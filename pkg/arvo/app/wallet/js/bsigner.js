!function(global){var globalThis=global,undefined,setTimeout=global.setTimeout,clearTimeout=global.clearTimeout,setInterval=global.setInterval,clearInterval=global.clearInterval,setImmediate=global.setImmediate,clearImmediate=global.clearImmediate,process,Buffer,console=global.console,__browser_modules__=[["bsigner","/lib/bsigner.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(1,r),a=__browser_require__(13,r),{Path:h}=__browser_require__(172,r),{InputData:c}=__browser_require__(375,r),{prepareSign:u,generateToken:f,prepareSignMultisig:l,guessPath:d,getKnownPaths:p}=__browser_require__(751,r);e.Signer=a,e.Path=h,e.InputData=c,e.prepareSign=u,e.prepareSignMultisig=l,e.generateToken=f,e.guessPath=d,e.getKnownPaths=p,e.vendors=o.vendors}],["bsigner","/lib/common.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(2,r),a=__browser_require__(3,r),{BufferMap:h}=__browser_require__(7,r),c=__browser_require__(9,r),u={LEDGER:"LEDGER",TREZOR:"TREZOR",MEMORY:"MEMORY"},f=new Set(Object.values(u));const l={purpose:44,coinType:{main:0,testnet:1,regtest:1,simnet:1},hardened:2147483648};function d(e){if("string"==typeof e){const t=e[e.length-1];o("'"!==t||"h"!==t),e=parseInt(e,10)}return(e|l.hardened)>>>0}function p(e){const t=Buffer.alloc(4);return t.writeUInt32BE(c[e].keyPrefix.xpubkey),t}const b=new h([[p("main"),[d(l.purpose),d(l.coinType.main)]],[p("testnet"),[d(l.purpose),d(l.coinType.testnet)]],[p("regtest"),[d(l.purpose),d(l.coinType.regtest)]],[p("simnet"),[d(l.purpose),d(l.coinType.simnet)]]]);e.vendors=u,e.AVAILABLE_VENDORS=f,e.parseVendors=function(e){if(Array.isArray(e)||e instanceof Set){for(const t of e){o("string"==typeof t);const e=t.toUpperCase();o(f.has(e),`Could not find vendor "${e}".`)}return new Set(e)}return o("string"==typeof e),"ANY"===(e=e.toUpperCase())?new Set(f):(o(f.has(e),`Could not find vendor "${e}".`),new Set([e]))},e.bip44=l,e.hash=function(e,t="hex"){return null!=e&&!0===e._isBuffer||(e=Buffer.from(e,t)),a.digest(e)},e.parsePath=function(e,t){o("string"==typeof e),o("boolean"==typeof t),o(e.length>=1),o(e.length<=3062);const r=e.split("/"),i=r[0];if("m"!==i&&"M"!==i&&"m'"!==i&&"M'"!==i)throw new Error("Invalid path root.");const s=[];for(let e=1;e<r.length;e++){let i=r[e];const n=i[i.length-1],o="'"===n||"h"===n;if(o&&(i=i.slice(0,-1)),i.length>10)throw new Error("Path index too large.");if(!/^\d+$/.test(i))throw new Error("Path index is non-numeric.");let a=parseInt(i,10);if(a>>>0!==a)throw new Error("Path index out of range.");if(o&&(a|=l.hardened,a>>>=0),!t&&a&l.hardened)throw new Error("Path index cannot be hardened.");s.push(a)}return s},e.sleep=function(e){return new Promise((t,r)=>{setTimeout(()=>t(),e)})},e.HDVersionBytes=b,e.harden=d}],["bsert","/lib/assert.js",function(e,t,r,i,s,n){"use strict";class o extends Error{constructor(e){"string"==typeof e&&(e={message:e}),null!==e&&"object"==typeof e||(e={});let t=null,r="fail",i=Boolean(e.generatedMessage);var s;if(null!=e.message&&(t="string"==typeof(s=e.message)?s:I(s)?m(s):g(s)),"string"==typeof e.operator&&(r=e.operator),null==t){if("fail"===r)t="Assertion failed.";else{t=`${g(e.actual)} ${r} ${g(e.expected)}`}i=!0}super(t);let n=this.constructor;"function"==typeof e.stackStartFunction?n=e.stackStartFunction:"function"==typeof e.stackStartFn&&(n=e.stackStartFn),this.type="AssertionError",this.name="AssertionError [ERR_ASSERTION]",this.code="ERR_ASSERTION",this.generatedMessage=i,this.actual=e.actual,this.expected=e.expected,this.operator=r,Error.captureStackTrace&&Error.captureStackTrace(this,n)}}function a(e,t){if(!e){let r=!1;if(0===arguments.length)t="No value argument passed to `assert()`.",r=!0;else if(null==t)t="Assertion failed.",r=!0;else if(I(t))throw t;throw new o({message:t,actual:e,expected:!0,operator:"==",generatedMessage:r,stackStartFn:a})}}function h(e,t,r){if(!Object.is(e,t)){if(I(r))throw r;throw new o({message:r,actual:e,expected:t,operator:"strictEqual",stackStartFn:h})}}function c(e,t,r){if(Object.is(e,t)){if(I(r))throw r;throw new o({message:r,actual:e,expected:t,operator:"notStrictEqual",stackStartFn:c})}}function u(e,t,r){"string"==typeof t&&(r=t,t=undefined);let i=!1,s=null;b("function"==typeof e,"func","function");try{e()}catch(e){i=!0,s=e}if(i){if(_(s,t,r,u)){let e=!1;throw null==r&&(r="Got unwanted exception.",e=!0),new o({message:r,actual:s,expected:t,operator:"doesNotThrow",generatedMessage:e,stackStartFn:u})}throw s}}async function f(e,t,r){"string"==typeof t&&(r=t,t=undefined);let i=!1,s=null;"function"!=typeof e&&b(A(e),"func","promise");try{A(e)?await e:await e()}catch(e){i=!0,s=e}if(!i){let e=!1;throw null==r&&(r="Missing expected rejection.",e=!0),new o({message:r,actual:undefined,expected:t,operator:"rejects",generatedMessage:e,stackStartFn:f})}if(!_(s,t,r,f))throw s}async function l(e,t,r){"string"==typeof t&&(r=t,t=undefined);let i=!1,s=null;"function"!=typeof e&&b(A(e),"func","promise");try{A(e)?await e:await e()}catch(e){i=!0,s=e}if(i){if(_(s,t,r,l)){let e=!1;throw null==r&&(r="Got unwanted rejection.",e=!0),new o({message:r,actual:undefined,expected:t,operator:"doesNotReject",generatedMessage:e,stackStartFn:l})}throw s}}function d(e,t,r){if(!w(e,t,!1)){if(I(r))throw r;throw new o({message:r,actual:e,expected:t,operator:"deepStrictEqual",stackStartFn:d})}}function p(e,t,r){if(w(e,t,!0)){if(I(r))throw r;throw new o({message:r,actual:e,expected:t,operator:"notDeepStrictEqual",stackStartFn:p})}}function b(e,t,r){if(!e){let e;e=null==t?"Invalid type for parameter.":null==r?`Invalid type for "${t}".`:`"${t}" must be a(n) ${r}.`;const i=new TypeError(e);throw Error.captureStackTrace&&Error.captureStackTrace(i,b),i}}function g(e){switch(typeof e){case"undefined":return"undefined";case"object":return null===e?"null":`[${function(e){const t=function(e){return E(e).slice(8,-1)}(e);if(null==e)return t;if("Object"!==t&&"Error"!==t)return t;let r,i;try{r=e.constructor}catch(e){}if(null==r)return t;try{i=r.name}catch(e){return t}return"string"!=typeof i||0===i.length?t:i}(e)}]`;case"boolean":case"number":return`${e}`;case"string":return e.length>80&&(e=`${e.substring(0,77)}...`),JSON.stringify(e);case"symbol":return m(e);case"function":return`[${function(e){let t;try{t=e.name}catch(e){}return"string"!=typeof t||0===t.length?"Function":`Function: ${t}`}(e)}]`;case"bigint":return`${e}n`;default:return`[${typeof e}]`}}function m(e){try{return String(e)}catch(e){return"Object"}}function _(e,t,r,i){if(null==t)return!0;if(O(t))return t.test(e);if("function"!=typeof t){if(i===u||i===l)throw new TypeError('"expected" must not be an object.');if("object"!=typeof t)throw new TypeError('"expected" must be an object.');let s=!1;if(null==r){r=`Missing expected ${i===f?"rejection":"exception"}.`,s=!0}if(null==e||"object"!=typeof e)throw new o({actual:e,expected:t,message:r,operator:i.name,generatedMessage:s,stackStartFn:i});const n=Object.keys(t);if(I(t)&&n.push("name","message"),0===n.length)throw new TypeError('"expected" may not be an empty object.');for(const a of n){const n=t[a],h=e[a];if(("string"!=typeof h||!O(n)||!n.test(h))&&!(a in e&&w(h,n,!1)))throw new o({actual:e,expected:t,message:r,operator:i.name,generatedMessage:s,stackStartFn:i})}return!0}return t.prototype!==undefined&&e instanceof t||!Error.isPrototypeOf(t)&&!0===t.call({},e)}function w(e,t,r){try{return y(e,t,null)}catch(e){return r}}function y(e,t,r){if(Object.is(e,t))return!0;if(!k(e)||!k(t))return!1;if(E(e)!==E(t))return!1;if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(S(e)&&S(t))return e.equals(t);if(e instanceof Date)return Object.is(e.getTime(),t.getTime());if(O(e))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(I(e)&&e.message!==t.message)return!1;if(function(e){return e instanceof ArrayBuffer}(e)&&(e=new Uint8Array(e),t=new Uint8Array(t)),function(e){return ArrayBuffer.isView(e)}(e)&&!S(e)){if(S(t))return!1;const r=new Uint8Array(e.buffer),i=new Uint8Array(t.buffer);if(r.length!==i.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==i[e])return!1;return!0}if(function(e){return e instanceof Set}(e)){if(e.size!==t.size)return!1;return new Set([...e,...t]).size===e.size}if(r){const i=r.a.get(e);if(null!=i){const e=r.b.get(t);if(null!=e)return i===e}r.p+=1}else r={a:new Map,b:new Map,p:0};r.a.set(e,r.p),r.b.set(t,r.p);const i=function(e,t,r){if(i=e,i instanceof Map){if(e.size!==t.size)return!1;const i=new Set([...e.keys(),...t.keys()]);if(i.size!==e.size)return!1;for(const s of i)if(!y(e.get(s),t.get(s),r))return!1;return!0}var i;if(function(e){return Array.isArray(e)}(e)){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!y(e[i],t[i],r))return!1;return!0}const s=v(e),n=v(t);if(s.length!==n.length)return!1;const o=new Set([...s,...n]);if(o.size!==s.length)return!1;for(const i of o)if(!y(e[i],t[i],r))return!1;return!0}(e,t,r);return r.a.delete(e),r.b.delete(t),i}function v(e){const t=Object.keys(e);if(!Object.getOwnPropertySymbols)return t;if(!Object.getOwnPropertyDescriptor)return t;const r=Object.getOwnPropertySymbols(e);for(const i of r){const r=Object.getOwnPropertyDescriptor(e,i);r&&r.enumerable&&t.push(i)}return t}function E(e){if(e===undefined)return"[object Undefined]";if(null===e)return"[object Null]";try{return Object.prototype.toString.call(e)}catch(e){return"[object Object]"}}function S(e){return k(e)&&"function"==typeof e.writeUInt32LE&&"function"==typeof e.equals}function I(e){return e instanceof Error}function k(e){return e&&"object"==typeof e}function A(e){return e instanceof Promise}function O(e){return e instanceof RegExp}function x(e){if("string"!=typeof e)return!1;switch(e){case"ascii":case"binary":case"base64":case"hex":case"latin1":case"ucs2":case"utf8":case"utf16le":return!0}return!1}function R(e,t,r){if("string"==typeof t){if(!S(e))return null;const{constructor:i}=e;if(!i||"function"!=typeof i.from)return null;if(!x(r))return null;if("hex"===r&&1&t.length)return null;const s=i.from(t,r);return"hex"===r&&s.length!==t.length>>>1?null:s}return t}a.AssertionError=o,a.assert=a,a.strict=a,a.ok=a,a.equal=h,a.notEqual=c,a.strictEqual=h,a.notStrictEqual=c,a.fail=function e(t){let r=!1;if(I(t))throw t;throw null==t&&(t="Assertion failed.",r=!0),new o({message:t,actual:!1,expected:!0,operator:"fail",generatedMessage:r,stackStartFn:e})},a.throws=function e(t,r,i){"string"==typeof r&&(i=r,r=undefined);let s=!1,n=null;b("function"==typeof t,"func","function");try{t()}catch(e){s=!0,n=e}if(!s){let t=!1;throw null==i&&(i="Missing expected exception.",t=!0),new o({message:i,actual:undefined,expected:r,operator:"throws",generatedMessage:t,stackStartFn:e})}if(!_(n,r,i,e))throw n},a.doesNotThrow=u,a.rejects=f,a.doesNotReject=l,a.ifError=function e(t){if(null!=t){let r="ifError got unwanted exception: ";throw"object"==typeof t&&"string"==typeof t.message?0===t.message.length&&t.constructor?r+=t.constructor.name:r+=t.message:r+=g(t),new o({message:r,actual:t,expected:null,operator:"ifError",generatedMessage:!0,stackStartFn:e})}},a.deepEqual=d,a.notDeepEqual=p,a.deepStrictEqual=d,a.notDeepStrictEqual=p,a.bufferEqual=function e(t,r,i,s){if(x(i)||(s=i,i=null),null==i&&(i="hex"),r=R(t,r,i),b(S(t),"actual","buffer"),b(S(r),"expected","buffer"),t!==r&&!t.equals(r)){if(I(s))throw s;throw new o({message:s,actual:t.toString(i),expected:r.toString(i),operator:"bufferEqual",stackStartFn:e})}},a.notBufferEqual=function e(t,r,i,s){if(x(i)||(s=i,i=null),null==i&&(i="hex"),r=R(t,r,i),b(S(t),"actual","buffer"),b(S(r),"expected","buffer"),t===r||t.equals(r)){if(I(s))throw s;throw new o({message:s,actual:t.toString(i),expected:r.toString(i),operator:"notBufferEqual",stackStartFn:e})}},a.enforce=b,a.range=function e(t,r){if(!t){const t=null!=r?`"${r}" is out of range.`:"Parameter is out of range.",i=new RangeError(t);throw Error.captureStackTrace&&Error.captureStackTrace(i,e),i}},r.exports=a}],["bcrypto","/lib/blake2b-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(4,r)}],["bcrypto","/lib/js/blake2b.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(5,r),a=__browser_require__(6,r),h=2147483648,c=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),u=new Uint8Array([0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,28,20,8,16,18,30,26,12,2,24,0,4,22,14,10,6,22,16,24,0,10,4,30,26,20,28,6,12,14,2,18,8,14,18,6,2,26,24,22,28,4,12,10,20,8,0,30,16,18,0,10,14,4,8,20,30,28,2,22,24,12,16,6,26,4,24,12,20,0,22,16,6,8,26,14,10,30,28,2,18,24,10,2,30,28,26,8,20,0,14,12,6,18,4,16,22,26,22,14,28,24,2,6,18,10,0,30,8,16,12,4,20,12,30,28,18,22,6,0,16,24,4,26,14,2,8,20,10,20,4,16,8,14,12,2,10,30,22,18,28,6,24,26,0,0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,28,20,8,16,18,30,26,12,2,24,0,4,22,14,10,6]);class f{constructor(){this.state=new Uint32Array(16),this.V=new Uint32Array(32),this.M=new Uint32Array(32),this.block=Buffer.allocUnsafe(128),this.size=32,this.count=0,this.pos=h}init(e,t){if(null==e&&(e=32),o(e>>>0===e),o(null==t||null!=t&&!0===t._isBuffer),0===e||e>64)throw new Error("Bad output length.");if(t&&t.length>64)throw new Error("Bad key length.");const r=t?t.length:0;for(let e=0;e<16;e++)this.state[e]=c[e];if(this.size=e,this.count=0,this.pos=0,this.state[0]^=16842752^r<<8^this.size,r>0){const e=Buffer.alloc(128,0);t.copy(e,0),this.update(e)}return this}update(e){o(null!=e&&!0===e._isBuffer),o(!(this.pos&h),"Context is not initialized.");let t=0,r=e.length;if(r>0){const i=this.pos,s=128-i;if(r>s)for(this.pos=0,e.copy(this.block,i,t,t+s),this.count+=128,this._compress(this.block,0,!1),t+=s,r-=s;r>128;)this.count+=128,this._compress(e,t,!1),t+=128,r-=128;e.copy(this.block,this.pos,t,t+r),this.pos+=r}return this}final(){o(!(this.pos&h),"Context is not initialized."),this.count+=this.pos,this.block.fill(0,this.pos,128),this._compress(this.block,0,!0),this.pos=h;const e=Buffer.allocUnsafe(this.size);for(let t=0;t<this.size;t++)e[t]=this.state[t>>>2]>>>8*(3&t);for(let e=0;e<16;e++)this.state[e]=0;for(let e=0;e<32;e++)this.V[e]=0,this.M[e]=0;for(let e=0;e<128;e++)this.block[e]=0;return e}_compress(e,t,r){const{V:i,M:s}=this;for(let e=0;e<16;e++)i[e]=this.state[e],i[e+16]=c[e];i[24]^=this.count,i[25]^=this.count*(1/4294967296),i[26]^=0,i[27]^=0,r&&(i[28]^=-1,i[29]^=-1,i[29]^=0,i[30]^=0);for(let r=0;r<32;r++)s[r]=b(e,t),t+=4;for(let e=0;e<12;e++)p(i,s,0,8,16,24,u[16*e+0],u[16*e+1]),p(i,s,2,10,18,26,u[16*e+2],u[16*e+3]),p(i,s,4,12,20,28,u[16*e+4],u[16*e+5]),p(i,s,6,14,22,30,u[16*e+6],u[16*e+7]),p(i,s,0,10,20,30,u[16*e+8],u[16*e+9]),p(i,s,2,12,22,24,u[16*e+10],u[16*e+11]),p(i,s,4,14,16,26,u[16*e+12],u[16*e+13]),p(i,s,6,8,18,28,u[16*e+14],u[16*e+15]);for(let e=0;e<16;e++)this.state[e]^=i[e]^i[e+16]}static hash(){return new f}static hmac(e){return new a(f,128,[e])}static digest(e,t,r){const{ctx:i}=f;return i.init(t,r),i.update(e),i.final()}static root(e,t,r,i){null==r&&(r=32),o(null!=e&&!0===e._isBuffer&&e.length===r),o(null!=t&&!0===t._isBuffer&&t.length===r);const{ctx:s}=f;return s.init(r,i),s.update(e),s.update(t),s.final()}static multi(e,t,r,i,s){const{ctx:n}=f;return n.init(i,s),n.update(e),n.update(t),r&&n.update(r),n.final()}static mac(e,t,r){return f.hmac(r).init(t).update(e).final()}}function l(e,t,r){const i=e[t+0]+e[r+0],s=e[t+1]+e[r+1],n=i>=4294967296|0;e[t+0]=i,e[t+1]=s+n}function d(e,t,r,i){const s=e[t+0]+r,n=e[t+1]+i,o=s>=4294967296|0;e[t+0]=s,e[t+1]=n+o}function p(e,t,r,i,s,n,o,a){const h=t[o+0],c=t[o+1],u=t[a+0],f=t[a+1];l(e,r,i),d(e,r,h,c);const p=e[n+0]^e[r+0],b=e[n+1]^e[r+1];e[n+0]=b,e[n+1]=p,l(e,s,n);const g=e[i+0]^e[s+0],m=e[i+1]^e[s+1];e[i+0]=g>>>24^m<<8,e[i+1]=m>>>24^g<<8,l(e,r,i),d(e,r,u,f);const _=e[n+0]^e[r+0],w=e[n+1]^e[r+1];e[n+0]=_>>>16^w<<16,e[n+1]=w>>>16^_<<16,l(e,s,n);const y=e[i+0]^e[s+0],v=e[i+1]^e[s+1];e[i+0]=v>>>31^y<<1,e[i+1]=y>>>31^v<<1}function b(e,t){return e[t++]+256*e[t++]+65536*e[t++]+16777216*e[t]}f.native=0,f.id="BLAKE2B256",f.size=32,f.bits=256,f.blockSize=128,f.zero=Buffer.alloc(32,0),f.ctx=new f,r.exports=f}],["bcrypto","/lib/internal/assert.js",function(e,t,r,i,s,n){"use strict";r.exports=function e(t,r){if(!t){const t=new Error(r||"Assertion failed");throw Error.captureStackTrace&&Error.captureStackTrace(t,e),t}}}],["bcrypto","/lib/internal/hmac.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(5,r);r.exports=class{constructor(e,t,r=[],i=[]){o("function"==typeof e),o(t>>>0===t),o(Array.isArray(r)),o(Array.isArray(i)),this.hash=e,this.size=t,this.x=r,this.y=i,this.inner=new e,this.outer=new e}init(e){if(o(null!=e&&!0===e._isBuffer),e.length>this.size){const t=new(0,this.hash);t.init(...this.x),t.update(e),e=t.final(...this.y),o(e.length<=this.size)}const t=Buffer.allocUnsafe(this.size);for(let r=0;r<e.length;r++)t[r]=54^e[r];for(let r=e.length;r<t.length;r++)t[r]=54;this.inner.init(...this.x),this.inner.update(t);for(let r=0;r<e.length;r++)t[r]=92^e[r];for(let r=e.length;r<t.length;r++)t[r]=92;return this.outer.init(...this.x),this.outer.update(t),this}update(e){return this.inner.update(e),this}final(){return this.outer.update(this.inner.final(...this.y)),this.outer.final(...this.y)}}}],["buffer-map","/lib/buffer-map.js",function(e,t,r,i,s,n){"use strict";const{custom:o}=__browser_require__(8,r);class a{constructor(e,t){this.key=e,this.value=t}}const h="function"==typeof SharedArrayBuffer;function c(e){if(ArrayBuffer.isView(e))return Buffer.from(e.buffer,e.byteOffset,e.byteLength);if(function(e){return e instanceof ArrayBuffer||!!(h&&e instanceof SharedArrayBuffer)}(e))return Buffer.from(e,0,e.byteLength);throw new TypeError("Non-buffer passed to buffer map/set.")}function u(e,t){return null!=e&&!0===e._isBuffer||(e=c(e)),e.toString(t)}function f(e){return u(e,"binary")}function l(e){return u(e,"hex")}e.BufferMap=class{constructor(e){if(this.map=new Map,null!=e)for(const[t,r]of e)this.set(t,r)}get size(){return this.map.size}get(e){const t=this.map.get(f(e));return t?t.value:undefined}has(e){return this.map.has(f(e))}set(e,t){return this.map.set(f(e),new a(e,t)),this}delete(e){return this.map.delete(f(e))}clear(){this.map.clear()}[Symbol.iterator](){return this.entries()}*entries(){for(const{key:e,value:t}of this.map.values())yield[e,t]}*keys(){for(const{key:e}of this.map.values())yield e}*values(){for(const{value:e}of this.map.values())yield e}forEach(e,t){if("function"!=typeof e)throw new TypeError(`${typeof e} is not a function`);for(const{key:r,value:i}of this.map.values())e.call(t,i,r,this)}toKeys(){const e=[];for(const{key:t}of this.map.values())e.push(t);return e}toValues(){const e=[];for(const{value:t}of this.map.values())e.push(t);return e}toArray(){return this.toValues()}[o](){const e=new Map;for(const{key:t,value:r}of this.map.values())e.set(l(t),r);return e}},e.BufferSet=class{constructor(e){if(this.map=new Map,null!=e)for(const t of e)this.add(t)}get size(){return this.map.size}has(e){return this.map.has(f(e))}add(e){return this.map.set(f(e),e),this}delete(e){return this.map.delete(f(e))}clear(){this.map.clear()}[Symbol.iterator](){return this.keys()}*entries(){for(const e of this.map.values())yield[e,e]}keys(){return this.map.values()}values(){return this.map.values()}forEach(e,t){if("function"!=typeof e)throw new TypeError(`${typeof e} is not a function`);for(const r of this.map.values())e.call(t,r,r,this)}toKeys(){const e=[];for(const t of this.map.values())e.push(t);return e}toValues(){return this.toKeys()}toArray(){return this.toKeys()}[o](){const e=new Set;for(const t of this.map.values())e.add(l(t));return e}}}],["buffer-map","/lib/custom-browser.js",function(e,t,r,i,s,n){"use strict";e.custom="inspect"}],["bcoin","/lib/protocol/networks.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(10,r),a=e;function h(e){return Buffer.from(e,"hex")}a.types=["main","testnet","regtest","simnet"];const c={type:"main",seeds:["seed.bitcoin.sipa.be","dnsseed.bluematt.me","dnsseed.bitcoin.dashjr.org","seed.bitcoinstats.com","seed.bitcoin.jonasschnelli.ch","seed.btc.petertodd.org","seed.bitcoin.sprovoost.nl","dnsseed.emzy.de"],magic:3652501241,port:8333};c.checkpointMap={11111:h("1d7c6eb2fd42f55925e92efad68b61edd22fba29fde8783df744e26900000000"),33333:h("a6d0b5df7d0df069ceb1e736a216ad187a50b07aaa4e78748a58d52d00000000"),74000:h("201a66b853f9e7814a820e2af5f5dc79c07144e31ce4c9a39339570000000000"),105000:h("97dc6b1d15fbeef373a744fee0b254b0d2c820a3ae7f0228ce91020000000000"),134444:h("feb0d2420d4a18914c81ac30f494a5d4ff34cd15d34cfd2fb105000000000000"),168000:h("63b703835cb735cb9a89d733cbe66f212f63795e0172ea619e09000000000000"),193000:h("17138bca83bdc3e6f60f01177c3877a98266de40735f2a459f05000000000000"),210000:h("2e3471a19b8e22b7f939c63663076603cf692f19837e34958b04000000000000"),216116:h("4edf231bf170234e6a811460f95c94af9464e41ee833b4f4b401000000000000"),225430:h("32595730b165f097e7b806a679cf7f3e439040f750433808c101000000000000"),250000:h("14d2f24d29bed75354f3f88a5fb50022fc064b02291fdf873800000000000000"),279000:h("407ebde958e44190fa9e810ea1fc3a7ef601c3b0a0728cae0100000000000000"),295000:h("83a93246c67003105af33ae0b29dd66f689d0f0ff54e9b4d0000000000000000"),300255:h("b2f3a0f0de4120c1089d5f5280a263059f9b6e7c520428160000000000000000"),319400:h("3bf115fd057391587ca39a531c5d4989e1adec9b2e05c6210000000000000000"),343185:h("548536d48e7678fcfa034202dd45d4a76b1ad061f38b2b070000000000000000"),352940:h("ffc9520143e41c94b6e03c2fa3e62bb76b55ba2df45d75100000000000000000"),382320:h("b28afdde92b0899715e40362f56afdb20e3d135bedc68d0a0000000000000000"),401465:h("eed16cb3e893ed9366f27c39a9ecd95465d02e3ef40e45010000000000000000"),420000:h("a1ff746b2d42b834cb7d6b8981b09c265c2cabc016e8cc020000000000000000"),440000:h("9bf296b8de5f834f7635d5e258a434ad51b4dbbcf7c08c030000000000000000"),450000:h("0ba2070c62cd9da1f8cef88a0648c661a411d33e728340010000000000000000"),460000:h("8c25fc7e414d3e868d6ce0ec473c30ad44e7e8bc1b75ef000000000000000000"),470000:h("89756d1ed75901437300af10d5ab69070a282e729c536c000000000000000000"),480000:h("b1a896fd31e639e0c74d1abeb1dbc93f176b767a5d4c02010000000000000000"),490000:h("90dec4d0153f20fbdcb245b1d5fb3d5a8d7bb1379106de000000000000000000"),500000:h("045d94a1c33354c3759cc0512dcc49fd81bf4c3637fb24000000000000000000"),510000:h("297301b8ca28584cb0c31c7e3fed51696bc33ef8782615000000000000000000"),525000:h("1dde8e3fb49bbd5ab66a1b847544d67fff10b108a1fa2f000000000000000000")},c.lastCheckpoint=525e3,c.halvingInterval=21e4,c.genesis={version:1,hash:h("6fe28c0ab6f1b372c1a6a246ae63f74f931e8365e15a089c68d6190000000000"),prevBlock:h("0000000000000000000000000000000000000000000000000000000000000000"),merkleRoot:h("3ba3edfd7a7b12b27ac72c3e67768f617fc81bc3888a51323a9fb8aa4b1e5e4a"),time:1231006505,bits:486604799,nonce:2083236893,height:0},c.genesisBlock="0100000000000000000000000000000000000000000000000000000000000000000000003ba3edfd7a7b12b27ac72c3e67768f617fc81bc3888a51323a9fb8aa4b1e5e4a29ab5f49ffff001d1dac2b7c0101000000010000000000000000000000000000000000000000000000000000000000000000ffffffff4d04ffff001d0104455468652054696d65732030332f4a616e2f32303039204368616e63656c6c6f72206f6e206272696e6b206f66207365636f6e64206261696c6f757420666f722062616e6b73ffffffff0100f2052a01000000434104678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef38c4f35504e51ec112de5c384df7ba0b8d578a4c702b6bf11d5fac00000000",c.pow={limit:new o("00000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffff","hex"),bits:486604799,chainwork:new o("00000000000000000000000000000000000000000259c9b7d8c7779d29a1188f","hex"),targetTimespan:1209600,targetSpacing:600,retargetInterval:2016,targetReset:!1,noRetargeting:!1},c.block={bip34height:227931,bip34hash:h("b808089c756add1591b1d17bab44bba3fed9e02f942ab4894b02000000000000"),bip65height:388381,bip65hash:h("f035476cfaeb9f677c2cdad00fd908c556775ded24b6c2040000000000000000"),bip66height:363725,bip66hash:h("3109b588941188a9f1c2576aae462d729b8cce9da1ea79030000000000000000"),pruneAfterHeight:1e3,keepBlocks:288,maxTipAge:86400,slowHeight:325e3},c.bip30={91842:h("eccae000e3c8e4e093936360431f3b7603c563c1ff6181390a4d0a0000000000"),91880:h("21d77ccb4c08386a04ac0196ae10f6a1d2c2a377558ca190f143070000000000")},c.activationThreshold=1916,c.minerWindow=2016,c.deployments={csv:{name:"csv",bit:0,startTime:1462060800,timeout:1493596800,threshold:-1,window:-1,required:!1,force:!0},segwit:{name:"segwit",bit:1,startTime:1479168e3,timeout:1510704e3,threshold:-1,window:-1,required:!0,force:!1},segsignal:{name:"segsignal",bit:4,startTime:1496275200,timeout:1510704e3,threshold:269,window:336,required:!1,force:!1},testdummy:{name:"testdummy",bit:28,startTime:1199145601,timeout:1230767999,threshold:-1,window:-1,required:!1,force:!0}},c.deploys=[c.deployments.csv,c.deployments.segwit,c.deployments.segsignal,c.deployments.testdummy],c.keyPrefix={privkey:128,xpubkey:76067358,xprivkey:76066276,xpubkey58:"xpub",xprivkey58:"xprv",coinType:0},c.addressPrefix={pubkeyhash:0,scripthash:5,witnesspubkeyhash:6,witnessscripthash:10,bech32:"bc"},c.requireStandard=!0,c.rpcPort=8332,c.walletPort=8334,c.minRelay=1e3,c.feeRate=1e5,c.maxFeeRate=4e5,c.selfConnect=!1,c.requestMempool=!1;const u={type:"testnet",seeds:["testnet-seed.bitcoin.jonasschnelli.ch","seed.tbtc.petertodd.org","testnet-seed.bluematt.me","testnet-seed.bitcoin.schildbach.de","seed.testnet.bitcoin.sprovoost.nl"],magic:118034699,port:18333};u.checkpointMap={546:h("70cb6af7ebbcb1315d3414029c556c55f3e2fc353c4c9063a76c932a00000000"),10000:h("02a1b43f52591e53b660069173ac83b675798e12599dbb0442b7580000000000"),50000:h("0c6ceabe803cec55ba2831e445956d0a43ba9521743a802cddac7e0700000000"),90000:h("cafc21e17faf90461a5905aa03302c394912651ed9475ae711723e0d00000000"),100000:h("1e0a16bbadccde1d80c66597b1939e45f91b570d29f95fc158299e0000000000"),140000:h("92c0877b54c556889b72175ccbe0c91a1208f6ef7efb2c006101062300000000"),170000:h("508125560d202b89757889bb0e49c712477be20440058f05db4f0e0000000000"),210000:h("32365454b5f29a826bff8ad9b0448cad0072fc73d50e482d91a3dece00000000"),230000:h("b11a447e62643e0b27406eb0fc270cb8126d7b5b70822fb642d9513400000000"),270000:h("1c42b811cf9c163932f6e95ec55bf9b5e2cb5324e7e93001572e000000000000"),300000:h("a141bf3972424853f04367b47995e220e0b5a2706e5618766f22000000000000"),340000:h("67edd4d92e405608109164b15f92b193377d49325b0ed036739c010000000000"),350000:h("592b44bc0f7a4286cf07ead8497114c6952c1c7dea7305193deacf8e00000000"),390000:h("f217e183484fb6d695609cc71fa2ae24c3020943407e0150b298030000000000"),420000:h("de9e73a3b91fbb014e036e8583a17d6b638a699aeb2de8573d12580800000000"),460000:h("2e8baaffc107f15c87aebe01664b63d07476afa53bcbada1281a030000000000"),500000:h("06f60922a2aab2757317820fc6ffaf6a470e2cbb0f63a2aac0a7010000000000"),540000:h("8dd0bebfbc4878f5af09d3e848dcc57827d2c1cebea8ec5d8cbe420500000000"),570000:h("87acbd4cd3c40ec9bd648f8698ed226b31187274c06cc7a9af79030000000000"),600000:h("169a05b3bb04b7d13ad628915630900a5ed2e89f3a9dc6064f62000000000000"),630000:h("bbbe117035432a6a4effcb297207a02b031735b43e0d19a9217c000000000000"),670000:h("080bfe75caed8624fcfdfbc65973c8f962d7bdc495a891f5d16b7d0000000000"),700000:h("c14d3f6a1e7c7d66fd940951e44f3c3be1273bea4d2ab1786140000000000000"),740000:h("b3b423f0462fd78a01e4f1a59a2737a0525b5dbb9bba0b4634f9000000000000"),780000:h("0381582e34c3755964dc2813e2b33e521e5596367144e1670851050000000000"),800000:h("03b5f8ab257e02903f509f5ff2935220eec2e77b1819651d099b200000000000"),840000:h("dac1648107bd4394e57e4083c86d42b548b1cfb119665f179ea80a0000000000"),880000:h("ff90b4bb07eded8e96715bf595c09c7d21dd8c61b8306ff48705d60000000000"),900000:h("9bd8ac418beeb1a2cf5d68c8b5c6ebaa947a5b766e5524898d6f350000000000"),940000:h("c98f1651a475b00d12f8c25eb166ee843affaa90610e36a19d68030000000000"),980000:h("cc8e9774542d044a9698ca2336ae02d5987157e676f1c76aa3877c0000000000"),1010000:h("9d9fb11abc2712d80368229e97b8d827b2a07d27eb5335e5c924000000000000"),1050000:h("d8190cf0af7f08e179cab51d67db0b44b87951a78f7fdc31b4a01a0000000000")},u.lastCheckpoint=105e4,u.halvingInterval=21e4,u.genesis={version:1,hash:h("43497fd7f826957108f4a30fd9cec3aeba79972084e90ead01ea330900000000"),prevBlock:h("0000000000000000000000000000000000000000000000000000000000000000"),merkleRoot:h("3ba3edfd7a7b12b27ac72c3e67768f617fc81bc3888a51323a9fb8aa4b1e5e4a"),time:1296688602,bits:486604799,nonce:414098458,height:0},u.genesisBlock="0100000000000000000000000000000000000000000000000000000000000000000000003ba3edfd7a7b12b27ac72c3e67768f617fc81bc3888a51323a9fb8aa4b1e5e4adae5494dffff001d1aa4ae180101000000010000000000000000000000000000000000000000000000000000000000000000ffffffff4d04ffff001d0104455468652054696d65732030332f4a616e2f32303039204368616e63656c6c6f72206f6e206272696e6b206f66207365636f6e64206261696c6f757420666f722062616e6b73ffffffff0100f2052a01000000434104678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef38c4f35504e51ec112de5c384df7ba0b8d578a4c702b6bf11d5fac00000000",u.pow={limit:new o("00000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffff","hex"),bits:486604799,chainwork:new o("000000000000000000000000000000000000000000000062b7123cfd7d09f7b6","hex"),targetTimespan:1209600,targetSpacing:600,retargetInterval:2016,targetReset:!0,noRetargeting:!1},u.block={bip34height:21111,bip34hash:h("f88ecd9912d00d3f5c2a8e0f50417d3e415c75b3abe584346da9b32300000000"),bip65height:581885,bip65hash:h("b61e864fbec41dfaf09da05d1d76dc068b0dd82ee7982ff255667f0000000000"),bip66height:330776,bip66hash:h("82a14b9e5ea81d4832b8e2cd3c2a6092b5a3853285a8995ec4c8042100000000"),pruneAfterHeight:1e3,keepBlocks:1e4,maxTipAge:86400,slowHeight:95e4},u.bip30={},u.activationThreshold=1512,u.minerWindow=2016,u.deployments={csv:{name:"csv",bit:0,startTime:1456790400,timeout:1493596800,threshold:-1,window:-1,required:!1,force:!0},segwit:{name:"segwit",bit:1,startTime:1462060800,timeout:1493596800,threshold:-1,window:-1,required:!0,force:!1},segsignal:{name:"segsignal",bit:4,startTime:4294967295,timeout:4294967295,threshold:269,window:336,required:!1,force:!1},testdummy:{name:"testdummy",bit:28,startTime:1199145601,timeout:1230767999,threshold:-1,window:-1,required:!1,force:!0}},u.deploys=[u.deployments.csv,u.deployments.segwit,u.deployments.segsignal,u.deployments.testdummy],u.keyPrefix={privkey:239,xpubkey:70617039,xprivkey:70615956,xpubkey58:"tpub",xprivkey58:"tprv",coinType:1},u.addressPrefix={pubkeyhash:111,scripthash:196,witnesspubkeyhash:3,witnessscripthash:40,bech32:"tb"},u.requireStandard=!1,u.rpcPort=18332,u.walletPort=18334,u.minRelay=1e3,u.feeRate=2e4,u.maxFeeRate=6e4,u.selfConnect=!1,u.requestMempool=!1;const f={type:"regtest",seeds:[],magic:3669344250,port:48444,checkpointMap:{},lastCheckpoint:0,halvingInterval:150};f.genesis={version:1,hash:h("06226e46111a0b59caaf126043eb5bbf28c34f3a5e332a1fc7b2b73cf188910f"),prevBlock:h("0000000000000000000000000000000000000000000000000000000000000000"),merkleRoot:h("3ba3edfd7a7b12b27ac72c3e67768f617fc81bc3888a51323a9fb8aa4b1e5e4a"),time:1296688602,bits:545259519,nonce:2,height:0},f.genesisBlock="0100000000000000000000000000000000000000000000000000000000000000000000003ba3edfd7a7b12b27ac72c3e67768f617fc81bc3888a51323a9fb8aa4b1e5e4adae5494dffff7f20020000000101000000010000000000000000000000000000000000000000000000000000000000000000ffffffff4d04ffff001d0104455468652054696d65732030332f4a616e2f32303039204368616e63656c6c6f72206f6e206272696e6b206f66207365636f6e64206261696c6f757420666f722062616e6b73ffffffff0100f2052a01000000434104678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef38c4f35504e51ec112de5c384df7ba0b8d578a4c702b6bf11d5fac00000000",f.pow={limit:new o("7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff","hex"),bits:545259519,chainwork:new o("0000000000000000000000000000000000000000000000000000000000000002","hex"),targetTimespan:1209600,targetSpacing:600,retargetInterval:2016,targetReset:!0,noRetargeting:!0},f.block={bip34height:1e8,bip34hash:null,bip65height:1351,bip65hash:null,bip66height:1251,bip66hash:null,pruneAfterHeight:1e3,keepBlocks:1e4,maxTipAge:4294967295,slowHeight:0},f.bip30={},f.activationThreshold=108,f.minerWindow=144,f.deployments={csv:{name:"csv",bit:0,startTime:0,timeout:4294967295,threshold:-1,window:-1,required:!1,force:!0},segwit:{name:"segwit",bit:1,startTime:-1,timeout:4294967295,threshold:-1,window:-1,required:!0,force:!1},segsignal:{name:"segsignal",bit:4,startTime:4294967295,timeout:4294967295,threshold:269,window:336,required:!1,force:!1},testdummy:{name:"testdummy",bit:28,startTime:0,timeout:4294967295,threshold:-1,window:-1,required:!1,force:!0}},f.deploys=[f.deployments.csv,f.deployments.segwit,f.deployments.segsignal,f.deployments.testdummy],f.keyPrefix={privkey:239,xpubkey:70617039,xprivkey:70615956,xpubkey58:"tpub",xprivkey58:"tprv",coinType:1},f.addressPrefix={pubkeyhash:111,scripthash:196,witnesspubkeyhash:3,witnessscripthash:40,bech32:"bcrt"},f.requireStandard=!1,f.rpcPort=48332,f.walletPort=48334,f.minRelay=1e3,f.feeRate=2e4,f.maxFeeRate=6e4,f.selfConnect=!0,f.requestMempool=!0;const l={type:"simnet",seeds:["127.0.0.1"],magic:303307798,port:18555,checkpointMap:{},lastCheckpoint:0,halvingInterval:21e4};l.genesis={version:1,hash:h("f67ad7695d9b662a72ff3d8edbbb2de0bfa67b13974bb9910d116d5cbd863e68"),prevBlock:h("0000000000000000000000000000000000000000000000000000000000000000"),merkleRoot:h("3ba3edfd7a7b12b27ac72c3e67768f617fc81bc3888a51323a9fb8aa4b1e5e4a"),time:1401292357,bits:545259519,nonce:2,height:0},l.genesisBlock="0100000000000000000000000000000000000000000000000000000000000000000000003ba3edfd7a7b12b27ac72c3e67768f617fc81bc3888a51323a9fb8aa4b1e5e4a45068653ffff7f20020000000101000000010000000000000000000000000000000000000000000000000000000000000000ffffffff4d04ffff001d0104455468652054696d65732030332f4a616e2f32303039204368616e63656c6c6f72206f6e206272696e6b206f66207365636f6e64206261696c6f757420666f722062616e6b73ffffffff0100f2052a01000000434104678afdb0fe5548271967f1a67130b7105cd6a828e03909a67962e0ea1f61deb649f6bc3f4cef38c4f35504e51ec112de5c384df7ba0b8d578a4c702b6bf11d5fac00000000",l.pow={limit:new o("7fffff0000000000000000000000000000000000000000000000000000000000","hex"),bits:545259519,chainwork:new o("0000000000000000000000000000000000000000000000000000000000000002","hex"),targetTimespan:1209600,targetSpacing:600,retargetInterval:2016,targetReset:!0,noRetargeting:!1},l.block={bip34height:0,bip34hash:h("f67ad7695d9b662a72ff3d8edbbb2de0bfa67b13974bb9910d116d5cbd863e68"),bip65height:0,bip65hash:h("f67ad7695d9b662a72ff3d8edbbb2de0bfa67b13974bb9910d116d5cbd863e68"),bip66height:0,bip66hash:h("f67ad7695d9b662a72ff3d8edbbb2de0bfa67b13974bb9910d116d5cbd863e68"),pruneAfterHeight:1e3,keepBlocks:1e4,maxTipAge:4294967295,slowHeight:0},l.bip30={},l.activationThreshold=75,l.minerWindow=100,l.deployments={csv:{name:"csv",bit:0,startTime:0,timeout:4294967295,threshold:-1,window:-1,required:!1,force:!0},segwit:{name:"segwit",bit:1,startTime:0,timeout:4294967295,threshold:-1,window:-1,required:!0,force:!1},segsignal:{name:"segsignal",bit:4,startTime:4294967295,timeout:4294967295,threshold:269,window:336,required:!1,force:!1},testdummy:{name:"testdummy",bit:28,startTime:1199145601,timeout:1230767999,threshold:-1,window:-1,required:!1,force:!0}},l.deploys=[l.deployments.csv,l.deployments.segwit,l.deployments.segsignal,l.deployments.testdummy],l.keyPrefix={privkey:100,xpubkey:69254458,xprivkey:69253376,xpubkey58:"spub",xprivkey58:"sprv",coinType:115},l.addressPrefix={pubkeyhash:63,scripthash:123,witnesspubkeyhash:25,witnessscripthash:40,bech32:"sb"},l.requireStandard=!1,l.rpcPort=18556,l.walletPort=18558,l.minRelay=1e3,l.feeRate=2e4,l.maxFeeRate=6e4,l.selfConnect=!1,l.requestMempool=!1,a.main=c,a.testnet=u,a.regtest=f,a.simnet=l}],["bcrypto","/lib/bn-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(11,r)}],["bcrypto","/lib/js/bn.js",function(e,t,r,i,s,n){"use strict";const{custom:o}=__browser_require__(12,r),a=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176],u={p192:null,p224:null,p521:null,k256:null,p25519:null,p448:null},f={NONE:0,QUO:1,REM:2,BOTH:3,EUCLID:4,ALL:7},l="function"==typeof BigInt;class d{constructor(e,t,r){this.words=[0],this.length=1,this.negative=0,this.red=null,this.from(e,t,r)}_iadd(e,t){let r=0,i=0;for(e.length<t.length&&([e,t]=[t,e]),e!==this&&this._alloc(e.length);i<t.length;i++){const s=(0|e.words[i])+(0|t.words[i])+r;this.words[i]=67108863&s,r=s>>>26}for(;0!==r&&i<e.length;i++){const t=(0|e.words[i])+r;this.words[i]=67108863&t,r=t>>>26}if(this.length=e.length,0!==r)this._alloc(this.length+1),this.words[this.length++]=r;else if(e!==this)for(;i<e.length;i++)this.words[i]=e.words[i];return this}_iaddn(e){if(this.words[0]+=e,this.words[0]<67108864)return this;let t=0;for(this._alloc(this.length+1),this.words[this.length]=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,this.words[t+1]+=1;return this.length=Math.max(this.length,t+1),this}iadd(e){if(A(d.isBN(e),"num","bignum"),this.negative===e.negative)this._iadd(this,e);else{const t=this.ucmp(e);if(0===t)return this.words[0]=0,this.length=1,this.negative=0,this;t<0?(this._isub(e,this),this.negative^=1):this._isub(this,e)}return this}iaddn(e){A(B(e),"num","smi");const t=e<0|0;return t&&(e=-e),this.negative===t?this._iaddn(e):1===this.length&&this.words[0]<e?(this.words[0]=e-this.words[0],this.negative^=1):this._isubn(e),this}add(e){return A(d.isBN(e),"num","bignum"),e.length>this.length?e.clone().iadd(this):this.clone().iadd(e)}addn(e){return this.clone().iaddn(e)}_isub(e,t){let r=0,i=0;for(k(e.length>=t.length),e!==this&&this._alloc(e.length);i<t.length;i++){const s=(0|e.words[i])-(0|t.words[i])+r;r=s>>26,this.words[i]=67108863&s}for(;0!==r&&i<e.length;i++){const t=(0|e.words[i])+r;r=t>>26,this.words[i]=67108863&t}if(k(0===r),e!==this)for(;i<e.length;i++)this.words[i]=e.words[i];return this.length=Math.max(this.length,i),this._strip()}_isubn(e){if(this.words[0]-=e,this.words[0]>=0)return this._normalize();k(1!==this.length),this._alloc(this.length+1);for(let e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.words[this.length]=0,this._strip()}isub(e){if(A(d.isBN(e),"num","bignum"),this.negative!==e.negative)this._iadd(this,e);else{const t=this.ucmp(e);if(0===t)return this.words[0]=0,this.length=1,this.negative=0,this;t<0?(this._isub(e,this),this.negative^=1):this._isub(this,e)}return this}isubn(e){A(B(e),"num","smi");const t=e<0|0;return t&&(e=-e),this.negative!==t?this._iaddn(e):1===this.length&&this.words[0]<e?(this.words[0]=e-this.words[0],this.negative^=1):this._isubn(e),this}sub(e){return this.clone().isub(e)}subn(e){return this.clone().isubn(e)}_mul(e,t){if(A(d.isBN(e),"num","bignum"),A(d.isBN(t),"out","bignum"),10===this.length&&10===e.length)return z(this,e,t);const r=this.length+e.length;return r<63?U(this,e,t):r<1024?L(this,e,t):function(e,t,r){if(!l||e.length+t.length>82595519)return L(e,t,r);const i=BigInt(0),s=BigInt(67108863),n=BigInt(26);let o=e.toBigInt()*t.toBigInt();const a=o<i|0;a&&(o=-o);let h=0;for(;o>i;)r.words[h++]=Number(o&s),o>>=n;0===h&&(r.words[h++]=0);return r.length=h,r.negative=a,r}(this,e,t)}imul(e){return this.mul(e)._move(this)}imuln(e){A(B(e),"num","smi");const t=e<0|0;t&&(e=-e);let r=0;for(let t=0;t<this.length;t++){const i=this.words[t]*e,s=(67108863&i)+(67108863&r);r>>=26,r+=i/67108864|0,r+=s>>>26,this.words[t]=67108863&s}return this.negative^=t,0!==r?(this._alloc(this.length+1),this.words[this.length++]=r):this._strip(),this}mul(e){A(d.isBN(e),"num","bignum");const t=this.length+e.length,r=new d;r.words=new Array(t);for(let e=0;e<t;e++)r.words[e]=0;return this._mul(e,r)}muln(e){return this.clone().imuln(e)}mulShift(e,t){A(d.isBN(e),"num","bignum"),A(t>>>0===t,"bits","uint32");const r=this.mul(e),i=r.utestn(t-1);return r.iushrn(t),this.negative^e.negative?r.isubn(i):r.iaddn(i)}_div(e,t){A(d.isBN(e),"num","bignum"),k((t&f.ALL)===t),k(t!==f.NONE);const r=this,i=e;if(M(!i.isZero()),r.isZero())return[new d(0),new d(0)];const s=r.negative,n=i.negative;r.negative=0,i.negative=0;let o=null,a=null;return r.ucmp(i)<0?(t&f.QUO&&(o=new d(0)),t&f.REM&&(a=r.clone())):1===i.length?(t&f.QUO&&(o=r.quon(i.words[0])),t&f.REM&&(a=r.remn(i.words[0]))):[o,a]=r._wordDiv(i,t),r.negative=s,i.negative=n,t&f.QUO&&(o.negative=r.negative^i.negative,o._normalize()),t&f.REM&&(a.negative=r.negative,a._normalize()),t&f.EUCLID&&(t&f.QUO&&(k(0!=(t&f.REM)),0!==a.negative&&(0!==i.negative?o.iaddn(1):o.isubn(1))),t&f.REM&&0!==a.negative&&(0!==i.negative?a.isub(i):a.iadd(i))),[o,a]}_wordDiv(e,t){let r,i=this.clone(),s=e,n=null;const o=0|s.words[s.length-1],a=26-T(o);0!==a?(s=s.clone(),i.iushln(a),s.iushln(a),r=0|s.words[s.length-1]):r=o;const h=i.length-s.length;if(k(h>=0),t&f.QUO){(n=new d(0)).length=h+1,n.words=new Array(n.length);for(let e=0;e<n.length;e++)n.words[e]=0}const c=i.clone();c._ishlnsubmul(s,1,h),0===c.negative&&(n&&(n.words[h]=1),i=c);for(let e=h-1;e>=0;e--){const t=(67108864*i.words[s.length+e]+i.words[s.length+e-1])/r|0;let o=Math.min(t,67108863);for(i._ishlnsubmul(s,o,e);0!==i.negative;)o-=1,i.negative=0,i._ishlnsubmul(s,1,e),i.ineg();n&&(n.words[e]=o)}return n&&n._strip(),t&f.REM&&0!==a&&i.iushrn(a),[n,i]}_ishlnsubmul(e,t,r){let i=0,s=0;for(this._expand(e.length+r);s<e.length;s++){const n=(0|this.words[s+r])+i,o=e.words[s]*t,a=n-(67108863&o);i=(a>>26)-(o/67108864|0),this.words[s+r]=67108863&a}for(;s<this.length-r;s++){const e=(0|this.words[s+r])+i;i=e>>26,this.words[s+r]=67108863&e}if(0===i)return this._strip();k(-1===i),i=0;for(let e=0;e<this.length;e++){const t=-(0|this.words[e])+i;i=t>>26,this.words[e]=67108863&t}return this.negative=1,this._strip()}quorem(e){return this._div(e,f.BOTH)}iquo(e){return this.quo(e)._move(this)}iquon(e){A(B(e),"num","smi"),M(0!==e);const t=e<0|0;t&&(e=-e);let r=0;for(let t=this.length-1;t>=0;t--){const i=(0|this.words[t])+67108864*r;this.words[t]=i/e|0,r=i%e}return this.negative^=t,this._strip()}quo(e){return this._div(e,f.QUO)[0]}quon(e){return this.clone().iquon(e)}irem(e){return this.rem(e)._move(this)}iremn(e){let t=this.remrn(e);return t<0&&(t=-t),this.words[0]=t,this.length=1,this._normalize()}rem(e){return this._div(e,f.REM)[1]}remn(e){return this.clone().iremn(e)}remrn(e){A(B(e),"num","smi"),M(0!==e),e<0&&(e=-e);const t=(1<<26)%e;let r=0;for(let i=this.length-1;i>=0;i--)r=(t*r+(0|this.words[i]))%e;return 0!==this.negative?0|-r:r}divmod(e){return this._div(e,f.BOTH|f.EUCLID)}idiv(e){return this.div(e)._move(this)}idivn(e){if(0===this.negative)return this.iquon(e);const t=this.remrn(e);return this.iquon(e),t<0&&(e<0?this.iaddn(1):this.isubn(1)),this}div(e){return this._div(e,f.BOTH|f.EUCLID)[0]}divn(e){return this.clone().idivn(e)}imod(e){return this.ucmp(e)<0?(0!==this.negative&&(this._isub(e,this),this.negative=0),this):this.mod(e)._move(this)}imodn(e){return this.words[0]=this.modrn(e),this.length=1,this.negative=0,this}mod(e){return this._div(e,f.REM|f.EUCLID)[1]}modn(e){return this.clone().imodn(e)}modrn(e){A(B(e),"num","smi");let t=this.remrn(e);return t<0&&(e<0?t-=e:t+=e),t}divRound(e){const[t,r]=this.quorem(e);if(r.isZero())return t;const i=1&e.words[0];e.iushrn(1);const s=r.ucmp(e);return e.iushln(1),e.words[0]|=i,s<0||e.isOdd()&&0===s?t:this.negative^e.negative?t.isubn(1):t.iaddn(1)}ipow(e){return this.pow(e)._move(this)}ipown(e){return this.pown(e)._move(this)}pow(e){A(d.isBN(e),"num","bignum");let t=T(e.words[e.length-1]),r=new d(1);for(let i=e.length-1;i>=0;i--){const s=e.words[i];for(let e=t-1;e>=0;e--)r=r.sqr(),s>>e&1&&(r=r.mul(this));t=26}return r}pown(e){if(A(B(e),"num","smi"),e<0&&(e=-e),0===e)return new d(1);if(1===e)return this.clone();let t=this;for(let r=T(e)-2;r>=0;r--)t=t.sqr(),e>>r&1&&(t=t.mul(this));return t}isqr(){return this.imul(this)}sqr(){return this.mul(this)}_rootrem(e,t){if(A(e>>>0===e,"num","uint32"),0===e)throw new RangeError("Zeroth root.");if(~e&this.negative)throw new RangeError("Negative with even root.");if(this.ucmpn(1)<=0)return[this.clone(),new d(0)];let r,i,s=new d(0),n=d.shift(1,this.bitLength()/e+1|0);if(0!==this.negative&&n.ineg(),2===e)do{s=n,(n=this.quo(s)).iadd(s),n.iushrn(1)}while(n.ucmp(s)<0);else do{n=(s=n).pown(e-1),n=this.quo(n),r=s.muln(e-1),n.iadd(r),n=n.quon(e)}while(n.ucmp(s)<0);return t&&(n=s.pown(e),i=this.sub(n)),[s,i]}rootrem(e){return this._rootrem(e,1)}iroot(e){return this.root(e)._move(this)}root(e){return this._rootrem(e,0)[0]}isPower(e){if(A(e>>>0===e,"num","uint32"),0===e||~e&this.negative)return!1;const[,t]=this.rootrem(e);return 0===t.sign()}sqrtrem(){return this.rootrem(2)}isqrt(){return this.sqrt()._move(this)}sqrt(){return this.root(2)}isSquare(){return this.isPower(2)}iand(e){A(d.isBN(e),"num","bignum");let t=this,r=e;if(t===r)return t;if(0==(t.negative|r.negative))return t.iuand(r);if(1==(t.negative&r.negative))return t.iaddn(1),r.iaddn(1),t.iuor(r),t.isubn(1),r.isubn(1),t;0!==t.negative&&([t,r]=[r.clone(),t]);const i=t.bitLength();return r.iaddn(1),r.inotn(i),t.iuand(r),r.inotn(i),r.isubn(1),t._move(this)}iandn(e){return A(B(e),"num","smi"),0!=(this.negative|e<0)?this.iand(new d(e)):(this.words[0]&=e,this.length=1,this)}and(e){return this.clone().iand(e)}andn(e){return this.clone().iandn(e)}andrn(e){if(A(B(e),"num","smi"),0!=(this.negative|e<0)){const t=this.iand(new d(e));if(t.length>1)throw new RangeError("Number exceeds 26 bits.");return 0!==t.negative?-t.words[0]:t.words[0]}return this.words[0]&e}iuand(e){A(d.isBN(e),"num","bignum"),this.length=Math.min(this.length,e.length);for(let t=0;t<this.length;t++)this.words[t]&=e.words[t];return this._strip()}iuandn(e){return A(B(e),"num","smi"),this.words[0]&=Math.abs(e),this.length=1,this._normalize()}uand(e){return this.clone().iuand(e)}uandn(e){return this.clone().iuandn(e)}uandrn(e){A(B(e),"num","smi");const t=this.words[0]&Math.abs(e);return 0!==this.negative?0|-t:t}ior(e){A(d.isBN(e),"num","bignum");let t=this,r=e;return t===r?t:0==(t.negative|r.negative)?t.iuor(r):1==(t.negative&r.negative)?(t.iaddn(1),r.iaddn(1),t.iuand(r),t.isubn(1),r.isubn(1),t):(r=r.clone(),0!==t.negative&&([t,r]=[r,t]),r.iaddn(1),t.inotn(r.bitLength()),r.iuand(t),r.isubn(1),r._move(this))}iorn(e){return A(B(e),"num","smi"),0!=(this.negative|e<0)?this.ior(new d(e)):(this.words[0]|=e,this)}or(e){return this.clone().ior(e)}orn(e){return this.clone().iorn(e)}iuor(e){A(d.isBN(e),"num","bignum"),this._expand(e.length);for(let t=0;t<e.length;t++)this.words[t]|=e.words[t];return this}iuorn(e){return A(B(e),"num","smi"),this.words[0]|=Math.abs(e),this}uor(e){return this.clone().iuor(e)}uorn(e){return this.clone().iuorn(e)}ixor(e){A(d.isBN(e),"num","bignum");let t=this,r=e;return t===r?(t.words[0]=0,t.length=1,t.negative=0,t):0==(t.negative|r.negative)?t.iuxor(r):1==(t.negative&r.negative)?(t.iaddn(1),r.iaddn(1),t.iuxor(r),t.ineg(),r.isubn(1),t):(0!==t.negative&&([t,r]=[r.clone(),t]),r.iaddn(1),t.iuxor(r),t.iaddn(1),t.ineg(),r.isubn(1),t._move(this))}ixorn(e){return A(B(e),"num","smi"),0!=(this.negative|e<0)?this.ixor(new d(e)):(this.words[0]^=e,this)}xor(e){return this.clone().ixor(e)}xorn(e){return this.clone().ixorn(e)}iuxor(e){A(d.isBN(e),"num","bignum");let t=this,r=e;t.length<r.length&&([t,r]=[r,t]);let i=0;for(;i<r.length;i++)this.words[i]=t.words[i]^r.words[i];if(t!==this)for(this._alloc(t.length);i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this._strip()}iuxorn(e){return A(B(e),"num","smi"),this.words[0]^=Math.abs(e),this._normalize()}uxor(e){return this.clone().iuxor(e)}uxorn(e){return this.clone().iuxorn(e)}inot(){return 0!==this.negative?this.ineg().isubn(1):this.iaddn(1).ineg(),this}not(){return this.clone().inot()}inotn(e){A(e>>>0===e,"width","uint32");const t=e%26;let r=Math.ceil(e/26),i=0;for(this._expand(r),t>0&&(r-=1);i<r;i++)this.words[i]^=67108863;return t>0&&(this.words[i]^=(1<<t)-1),this._strip()}notn(e){return this.clone().inotn(e)}ishl(e){return A(d.isBN(e),"bits","bignum"),A(e.bitLength()<=32,"bits","uint32"),this.ishln(e.toNumber())}ishln(e){return this.iushln(e)}shl(e){return this.clone().ishl(e)}shln(e){return this.clone().ishln(e)}iushl(e){return A(d.isBN(e),"bits","bignum"),A(e.bitLength()<=32,"bits","uint32"),this.iushln(e.toNumber())}iushln(e){A(e>>>0===e,"bits","uint32");const t=e%26,r=(e-t)/26,i=(1<<t)-1<<26-t;if(0!==t){let e=0;for(let r=0;r<this.length;r++){const s=this.words[r]&i,n=(0|this.words[r])-s<<t;this.words[r]=n|e,e=s>>>26-t}0!==e&&(this._alloc(this.length+1),this.words[this.length++]=e)}if(0!==r){this._alloc(this.length+r);for(let e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(let e=0;e<r;e++)this.words[e]=0;this.length+=r}return this._strip()}ushl(e){return this.clone().iushl(e)}ushln(e){return this.clone().iushln(e)}_split(e,t){const r=e%26,i=Math.min((e-r)/26,this.length),s=(1<<r)-1;if(t){t._alloc(i);for(let e=0;e<i;e++)t.words[e]=this.words[e];t.length=i}if(0===i);else if(this.length>i){this.length-=i;for(let e=0;e<this.length;e++)this.words[e]=this.words[e+i]}else this.words[0]=0,this.length=1;let n=0;if(0!==r)for(let e=this.length-1;e>=0;e--){const t=0|this.words[e];this.words[e]=n<<26-r|t>>>r,n=t&s}return t&&(0!==n?(t._alloc(t.length+1),t.words[t.length++]=n):(0===t.length&&(t.words[t.length++]=0),t._strip())),this._strip()}ishr(e){return A(d.isBN(e),"bits","bignum"),A(e.bitLength()<=32,"bits","uint32"),this.ishrn(e.toNumber())}ishrn(e){return A(e>>>0===e,"bits","uint32"),0!==this.negative?(this.iaddn(1),this.iushrn(e),this.isubn(1),this):this.iushrn(e)}shr(e){return this.clone().ishr(e)}shrn(e){return this.clone().ishrn(e)}iushr(e){return A(d.isBN(e),"bits","bignum"),A(e.bitLength()<=32,"bits","uint32"),this.iushrn(e.toNumber())}iushrn(e){return A(e>>>0===e,"bits","uint32"),this._split(e,null)}ushr(e){return this.clone().iushr(e)}ushrn(e){return this.clone().iushrn(e)}setn(e,t){return A(e>>>0===e,"bit","uint32"),0!==this.negative?(this.iaddn(1),this.usetn(e,!t),this.isubn(1),this):this.usetn(e,t)}usetn(e,t){A(e>>>0===e,"bit","uint32");const r=e%26,i=(e-r)/26;return this._expand(i+1),t?this.words[i]|=1<<r:this.words[i]&=~(1<<r),this._strip()}testn(e){A(e>>>0===e,"bit","uint32");const t=e%26,r=(e-t)/26;if(this.length<=r)return this.negative;const i=this.words[r],s=i>>t&1;if(0!==this.negative){if(t>0&&i&(1<<t)-1)return 1^s;let e=r;for(;e--;)if(this.words[e]>0)return 1^s}return s}utestn(e){A(e>>>0===e,"bit","uint32");const t=e%26,r=(e-t)/26;return this.length<=r?0:this.words[r]>>t&1}imaskn(e){return A(e>>>0===e,"bits","uint32"),0!==this.negative&&(this.iaddn(1),this.inotn(e+1),this.ineg()),this.iumaskn(e)}maskn(e){return this.clone().imaskn(e)}iumaskn(e){A(e>>>0===e,"bits","uint32");const t=e%26;let r=(e-t)/26;return this.length<=r?this:(0!==t&&(r+=1),this.length=Math.min(r,this.length),0!==t&&(this.words[this.length-1]&=(1<<t)-1),0===this.length&&(this.words[this.length++]=0),this._strip())}umaskn(e){return this.clone().iumaskn(e)}andln(e){return this.words[0]&e}ineg(){return this.isZero()||(this.negative^=1),this}neg(){return this.clone().ineg()}iabs(){return this.negative=0,this}abs(){return this.clone().iabs()}cmp(e){if(A(d.isBN(e),"num","bignum"),this.negative!==e.negative)return e.negative-this.negative;const t=this.ucmp(e);return 0!==this.negative?0|-t:t}cmpn(e){A(B(e),"num","smi");const t=e<0|0;if(this.negative!==t)return t-this.negative;const r=this.ucmpn(e);return 0!==this.negative?0|-r:r}eq(e){return 0===this.cmp(e)}eqn(e){return 0===this.cmpn(e)}gt(e){return this.cmp(e)>0}gtn(e){return this.cmpn(e)>0}gte(e){return this.cmp(e)>=0}gten(e){return this.cmpn(e)>=0}lt(e){return this.cmp(e)<0}ltn(e){return this.cmpn(e)<0}lte(e){return this.cmp(e)<=0}lten(e){return this.cmpn(e)<=0}sign(){return 0!==this.negative?-1:1===this.length&&0===this.words[0]?0:1}isZero(){return 1===this.length&&0===this.words[0]}isNeg(){return 0!==this.negative}isPos(){return 0===this.negative}isOdd(){return 1==(1&this.words[0])}isEven(){return 0==(1&this.words[0])}ucmp(e){if(A(d.isBN(e),"num","bignum"),this.length<e.length)return-1;if(this.length>e.length)return 1;for(let t=this.length-1;t>=0;t--){const r=0|this.words[t],i=0|e.words[t];if(r!==i)return(r>i)-(r<i)}return 0}ucmpn(e){if(A(B(e),"num","smi"),this.length>1)return 1;const t=0|this.words[0];return e<0&&(e=-e),(t>e)-(t<e)}legendre(e){const t=l?d.red(e):d.mont(e);return this.toRed(t).redLegendre()}jacobi(e){if(A(d.isBN(e),"num","bignum"),e.isZero()||e.isEven())throw new Error("jacobi: `num` must be odd.");let t=this._cloneNormal(),r=e.clone(),i=1;for(r.isNeg()&&(t.isNeg()&&(i=-1),r.ineg());;){if(0===r.cmpn(1))return i;if(t.isZero())return 0;if(t.imod(r),t.isZero())return 0;const e=t.zeroBits();if(1&e){const e=r.andln(7);3!==e&&5!==e||(i=-i)}const s=t.iushrn(e);3===r.andln(3)&&3===s.andln(3)&&(i=-i),t=r,r=s}}kronecker(e){A(d.isBN(e),"num","bignum");const t=[0,1,0,-1,0,-1,0,1];let r=this._cloneNormal(),i=e.clone(),s=1;if(i.isZero())return 0===r.ucmpn(1)?s:0;if(!r.isOdd()&&!i.isOdd())return 0;const n=i.zeroBits();for(i.iushrn(n),1&n&&(s=t[r.andln(7)]),i.isNeg()&&(r.isNeg()&&(s=-s),i.ineg());;){if(r.isZero())return 0===i.cmpn(1)?s:0;const e=r.zeroBits();r.iushrn(e),1&e&&(s*=t[i.andln(7)]),(r.words[0]^67108863*r.negative)&i.words[0]&2&&(s=-s),i.imod(r),[r,i]=[i,r],i.negative=0}}igcd(e){return this.gcd(e)._move(this)}gcd(e){if(A(d.isBN(e),"num","bignum"),this.isZero())return e.abs();if(e.isZero())return this.abs();let t=this.clone(),r=e.clone();t.negative=0,r.negative=0;const i=t._factor2(r);for(0!==i&&(t.iushrn(i),r.iushrn(i));;){const e=t.zeroBits(),i=r.zeroBits();0!==e&&t.iushrn(e),0!==i&&r.iushrn(i);const s=t.ucmp(r);if(s<0)[t,r]=[r,t];else if(0===s||0===r.ucmpn(1))break;t._isub(t,r)}return r.iushln(i)}ilcm(e){return this.lcm(e)._move(this)}lcm(e){return A(d.isBN(e),"num","bignum"),this.isZero()||e.isZero()?new d(0):this.quo(this.gcd(e)).mul(e).iabs()}egcd(e){if(A(d.isBN(e),"num","bignum"),this.isZero())return[new d(0),new d(e.sign()),e.abs()];if(e.isZero())return[new d(this.sign()),new d(0),this.abs()];const t=this.clone(),r=e.clone();t.negative=0,r.negative=0;const i=new d(1),s=new d(0),n=new d(0),o=new d(1),a=t._factor2(r);0!==a&&(t.iushrn(a),r.iushrn(a));const h=r.clone(),c=t.clone();for(;!t.isZero();){let e=0;for(let r=1;0==(t.words[0]&r)&&e<26;r<<=1)e+=1;if(e>0)for(t.iushrn(e);e>0;)(i.isOdd()||s.isOdd())&&(i.iadd(h),s.isub(c)),i.iushrn(1),s.iushrn(1),e-=1;let a=0;for(let e=1;0==(r.words[0]&e)&&a<26;e<<=1)a+=1;if(a>0)for(r.iushrn(a);a>0;)(n.isOdd()||o.isOdd())&&(n.iadd(h),o.isub(c)),n.iushrn(1),o.iushrn(1),a-=1;t.cmp(r)>=0?(t.isub(r),i.isub(n),s.isub(o)):(r.isub(t),n.isub(i),o.isub(s))}return 0!==this.negative&&n.ineg(),0!==e.negative&&o.ineg(),[n,o,r.iushln(a)]}iinvert(e){return this.invert(e)._move(this)}invert(e){if(A(d.isBN(e),"num","bignum"),O(e.sign()>0,"invert"),0===e.cmpn(1))throw new RangeError("Not invertible.");const[t,,r]=this.egcd(e);if(0!==r.cmpn(1))throw new RangeError("Not invertible.");return t.imod(e)}ifermat(e){return this.fermat(e)._move(this)}fermat(e){const t=l?d.red(e):d.mont(e);return this.toRed(t).redFermat().fromRed()}ipowm(e,t,r,i){return this.powm(e,t,r,i)._move(this)}powm(e,t,r,i){const s=!l&&r?d.mont(t):d.red(t);return this.toRed(s).redPow(e,i).fromRed()}ipowmn(e,t,r){return this.powmn(e,t,r)._move(this)}powmn(e,t,r){const i=r?d.mont(t):d.red(t);return this.toRed(i).redPown(e).fromRed()}isqrtm(e){return this.sqrtm(e)._move(this)}sqrtm(e){let t;return A(d.isBN(e),"p","bignum"),t=3===e.andln(3)||5===e.andln(7)?d.red(e):d.mont(e),this.toRed(t).redSqrt().fromRed()}isqrtpq(e,t){return this.sqrtpq(e,t)._move(this)}sqrtpq(e,t){const r=this.sqrtm(e),i=this.sqrtm(t),[s,n]=e.egcd(t),o=i.mul(s).mul(e),a=r.mul(n).mul(t),h=e.mul(t);return o.iadd(a).imod(h)}isPrime(e,t,r){return A(t>>>0===t,"reps","uint32"),!!this.isPrimeMR(e,t+1,!0)&&!!this.isPrimeLucas(r)}isPrimeMR(e,t,r=!1){A(t>>>0===t,"reps","uint32"),A(t>0,"reps","integer"),A("boolean"==typeof r,"force2","boolean");const i=this;if(i.cmpn(7)<0)return 0===i.cmpn(2)||0===i.cmpn(3)||0===i.cmpn(5);if(i.isEven())return!1;const s=i.subn(1),n=s.subn(2),o=s.zeroBits(),a=s.ushrn(o),h=d.red(i),c=s.toRed(h),u=new d(1).toRed(h);e:for(let i=0;i<t;i++){let s;i===t-1&&r?s=new d(2):(s=d.random(e,0,n)).iaddn(2);let f=s.toRed(h).redPow(a);if(0!==f.cmp(u)&&0!==f.cmp(c)){for(let e=1;e<o;e++){if(0===(f=f.redSqr()).cmp(c))continue e;if(0===f.cmp(u))return!1}return!1}}return!0}isPrimeLucas(e=0){A(e>>>0===e,"limit","uint32");const t=this;if(t.cmpn(1)<=0)return!1;if(t.isEven())return 0===t.cmpn(2);let r=3;for(;;){if(r>1e4)throw new Error(`Cannot find (D/n) = -1 for ${t.toString(10)}.`);if(0!==e&&r>e)return!1;const i=new d(r*r-4).jacobi(t);if(-1===i)break;if(0===i)return 0===t.cmpn(r+2);if(40===r&&t.isSquare())return!1;r+=1}const i=t.addn(1),s=i.zeroBits(),n=t.subn(2);let o=new d(2),a=new d(r);i.iushrn(s);for(let e=i.bitLength();e>=0;e--)i.utestn(e)?(o=o.mul(a).iadd(t).isubn(r).imod(t),a=a.sqr().iadd(n).imod(t)):(a=a.mul(o).iadd(t).isubn(r).imod(t),o=o.sqr().iadd(n).imod(t));if(0===o.cmpn(2)||0===o.cmp(n)){let e=o.muln(r),i=a.ushln(1);if(e.cmp(i)<0&&([e,i]=[i,e]),e.isub(i).imod(t).isZero())return!0}for(let e=0;e<s-1;e++){if(o.isZero())return!0;if(0===o.cmpn(2))return!1;o=o.sqr().isubn(2).imod(t)}return!1}toTwos(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()}fromTwos(e){return A(e>>>0===e,"width","uint32"),O(e>0,"width"),this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()}toRed(e){if(A(e instanceof v,"ctx","reduction context"),this.red)throw new Error("Already in reduction context.");return e.convertTo(this)}fromRed(){return x(this.red,"fromRed"),this.red.convertFrom(this)}forceRed(e){if(A(e instanceof v,"ctx","reduction context"),this.red){if(!e.m.eq(this.red.m)||e.mont!==this.red.mont)throw new Error("Already in reduction context.")}else O(0===this.negative,"red"),O(this.ucmp(e.m)<0,"red");return this.clone()._forceRed(e)}redIAdd(e){return A(d.isBN(e),"num","bignum"),x(this.red,"redIAdd"),this.red.iadd(this,e)}redAdd(e){return A(d.isBN(e),"num","bignum"),x(this.red,"redAdd"),this.red.add(this,e)}redIAddn(e){return A(B(e),"num","smi"),x(this.red,"redIAddn"),this.red.iaddn(this,e)}redAddn(e){return A(B(e),"num","smi"),x(this.red,"redAddn"),this.red.addn(this,e)}redISub(e){return A(d.isBN(e),"num","bignum"),x(this.red,"redISub"),this.red.isub(this,e)}redSub(e){return A(d.isBN(e),"num","bignum"),x(this.red,"redSub"),this.red.sub(this,e)}redISubn(e){return A(B(e),"num","smi"),x(this.red,"redISubn"),this.red.isubn(this,e)}redSubn(e){return A(B(e),"num","smi"),x(this.red,"redSubn"),this.red.subn(this,e)}redIMul(e){return A(d.isBN(e),"num","bignum"),x(this.red,"redIMul"),this.red.imul(this,e)}redMul(e){return A(d.isBN(e),"num","bignum"),x(this.red,"redMul"),this.red.mul(this,e)}redIMuln(e){return A(B(e),"num","smi"),x(this.red,"redIMuln"),this.red.imuln(this,e)}redMuln(e){return A(B(e),"num","smi"),x(this.red,"redMuln"),this.red.muln(this,e)}redIDiv(e){return A(d.isBN(e),"num","bignum"),x(this.red,"redIDiv"),this.red.idiv(this,e)}redDiv(e){return A(d.isBN(e),"num","bignum"),x(this.red,"redDiv"),this.red.div(this,e)}redIDivn(e){return A(B(e),"num","smi"),x(this.red,"redIDivn"),this.red.idivn(this,e)}redDivn(e){return A(B(e),"num","smi"),x(this.red,"redDivn"),this.red.divn(this,e)}redIPow(e,t){return A(d.isBN(e),"num","bignum"),x(this.red,"redIPow"),R(!e.red,"redIPow"),this.red.ipow(this,e,t)}redPow(e,t){return A(d.isBN(e),"num","bignum"),x(this.red,"redPow"),R(!e.red,"redPow"),this.red.pow(this,e,t)}redIPown(e){return A(B(e),"num","smi"),x(this.red,"redIPown"),this.red.ipown(this,e)}redPown(e){return A(B(e),"num","smi"),x(this.red,"redPown"),this.red.pown(this,e)}redISqr(){return x(this.red,"redISqr"),this.red.isqr(this)}redSqr(){return x(this.red,"redSqr"),this.red.sqr(this)}redISqrt(){return x(this.red,"redISqrt"),this.red.isqrt(this)}redSqrt(){return x(this.red,"redSqrt"),this.red.sqrt(this)}redIDivSqrt(e){return x(this.red,"redIDivSqrt"),this.red.idivsqrt(this,e)}redDivSqrt(e){return x(this.red,"redDivSqrt"),this.red.divsqrt(this,e)}redIsSquare(){return x(this.red,"redIsSquare"),this.red.isSquare(this)}redIShl(e){return A(d.isBN(e),"num","bignum"),x(this.red,"redIShl"),R(!e.red,"redIShl"),this.red.ishl(this,e)}redShl(e){return A(d.isBN(e),"num","bignum"),x(this.red,"redShl"),R(!e.red,"redShl"),this.red.shl(this,e)}redIShln(e){return A(e>>>0===e,"num","uint32"),x(this.red,"redIShln"),this.red.ishln(this,e)}redShln(e){return A(e>>>0===e,"num","uint32"),x(this.red,"redShln"),this.red.shln(this,e)}redINeg(){return x(this.red,"redINeg"),this.red.ineg(this)}redNeg(){return x(this.red,"redNeg"),this.red.neg(this)}redEq(e){return A(d.isBN(e),"num","bignum"),x(this.red,"redEq"),this.red.eq(this,e)}redEqn(e){return A(B(e),"num","smi"),x(this.red,"redEqn"),this.red.eqn(this,e)}redIsHigh(){return x(this.red,"redIsHigh"),this.red.isHigh(this)}redIsLow(){return x(this.red,"redIsLow"),this.red.isLow(this)}redIsOdd(){return x(this.red,"redIsOdd"),this.red.isOdd(this)}redIsEven(){return x(this.red,"redIsEven"),this.red.isEven(this)}redLegendre(){return x(this.red,"redLegendre"),this.red.legendre(this)}redJacobi(){return x(this.red,"redJacobi"),this.red.jacobi(this)}redKronecker(){return x(this.red,"redKronecker"),this.red.kronecker(this)}redIInvert(){return x(this.red,"redIInvert"),this.red.iinvert(this)}redInvert(){return x(this.red,"redInvert"),this.red.invert(this)}redIFermat(){return x(this.red,"redIFermat"),this.red.ifermat(this)}redFermat(){return x(this.red,"redFermat"),this.red.fermat(this)}_move(e){return e.words=this.words,e.length=this.length,e.negative=this.negative,e.red=this.red,e}_alloc(e){for(;this.words.length<e;)this.words.push(0);return this}_expand(e){for(this._alloc(e);this.length<e;)this.words[this.length++]=0;return this}_strip(){for(;this.length>1&&0===this.words[this.length-1];)this.length-=1;return this._normalize()}_normalize(){return k(this.length>0),1===this.length&&0===this.words[0]&&(this.negative=0),this}_check(){return k(this.length>0),k(this.length<=this.words.length),1===this.length?(0===this.words[0]&&k(0===this.negative),this):(k(0!==this.words[this.length-1]),this)}_invertp(e){if(A(d.isBN(e),"p","bignum"),k(0===this.negative),k(e.sign()>0),this.isZero()||0===e.cmpn(1))throw new RangeError("Not invertible.");const t=this.clone(),r=e.clone(),i=new d(1),s=new d(0),n=r.clone();for(;t.cmpn(1)>0&&r.cmpn(1)>0;){let e=0;for(let r=1;0==(t.words[0]&r)&&e<26;r<<=1)e+=1;if(e>0)for(t.iushrn(e);e>0;)i.isOdd()&&i.iadd(n),i.iushrn(1),e-=1;let o=0;for(let e=1;0==(r.words[0]&e)&&o<26;e<<=1)o+=1;if(o>0)for(r.iushrn(o);o>0;)s.isOdd()&&s.iadd(n),s.iushrn(1),o-=1;t.cmp(r)>=0?(t.isub(r),i.isub(s)):(r.isub(t),s.isub(i))}const o=0===t.cmpn(1)?i:s;return o.ucmp(e)>=0&&(o._isub(o,e),o.ucmp(e)>=0&&o._isub(o,e)),o.isNeg()&&o.iadd(e),o}_factor2(e){if(1&(this.words[0]|e.words[0]))return 0;const t=Math.min(this.length,e.length);let r=0;for(let i=0;i<t;i++){const t=C(this.words[i]|e.words[i]);if(r+=t,26!==t)break}return r}_cloneNormal(){return this.red?this.fromRed():this.clone()}_forceRed(e){return this.red=e,this}clone(){const e=new d;e.words=new Array(this.length);for(let t=0;t<this.length;t++)e.words[t]=this.words[t];return e.length=this.length,e.negative=this.negative,e.red=this.red,e}inject(e){A(d.isBN(e),"num","bignum"),this._alloc(e.length);for(let t=0;t<e.length;t++)this.words[t]=e.words[t];return this.length=e.length,this.negative=e.negative,this.red=e.red,this}set(e,t){return this.fromNumber(e,t)}swap(e){A(d.isBN(e),"num","bignum");const t=this,r=e;return[t.words,r.words]=[r.words,t.words],[t.length,r.length]=[r.length,t.length],[t.negative,r.negative]=[r.negative,t.negative],[t.red,r.red]=[r.red,t.red],t}reverse(){const e=this.negative;return this.fromBuffer(this.toBuffer("be"),"le"),this.negative=e,this}byteLength(){return Math.ceil(this.bitLength()/8)}bitLength(){const e=T(this.words[this.length-1]);return 26*(this.length-1)+e}zeroBits(){if(this.isZero())return 0;if(this.isOdd())return 0;let e=0;for(let t=0;t<this.length;t++){const r=C(this.words[t]);if(e+=r,26!==r)break}return e}isSafe(){return this.length<=2||3===this.length&&1===this.words[2]}word(e){return A(e>>>0===e,"pos","uint32"),e>=this.length?0:this.words[e]}[o](){let e="BN";return this.red&&(e="BN-R"),`<${e}: ${this.toString(10)}>`}csign(){return-2*this.negative+1-this.czero()}czero(){const e=this.words[0]-1>>>31;return this.length-2>>>31&e}cneg(){return this.negative}cpos(){return 1^this.negative}ceq(e){A(d.isBN(e),"num","bignum");let t=0;for(let r=0;r<e.length;r++)t|=this.words[r%this.length]^e.words[r];return t|=this.length^e.length,(t|=this.negative^e.negative)-1>>>31}ceqn(e){const t=e>>31&1,r=(0|e)*(1|-t)&67108863;let i=0;return i|=this.words[0]^r,i|=1^this.length,(i|=this.negative^t)-1>>>31}cswap(e,t){A(d.isBN(e),"num","bignum");const r=this,i=e,s=67108863&-(1&(t>>31|-t>>31));r._alloc(i.words.length),i._alloc(r.words.length);for(let e=0;e<r.words.length;e++){const t=(r.words[e]^i.words[e])&s;r.words[e]^=t,i.words[e]^=t}const n=(r.length^i.length)&s,o=(r.negative^i.negative)&s;return r.length^=n,i.length^=n,r.negative^=o,i.negative^=o,this}cinject(e,t){A(d.isBN(e),"num","bignum");const r=this,i=e,s=1&(t>>31|-t>>31),n=s-1&67108863,o=67108863&~(s-1);r._alloc(i.length);for(let e=0;e<i.length;e++)r.words[e]=r.words[e]&n|i.words[e]&o;return r.length=r.length&n|i.length&o,r.negative=r.negative&n|i.negative&o,this}cset(e,t){const r=1&(t>>31|-t>>31),i=r-1&67108863,s=67108863&~(r-1),n=e>>31&1,o=(0|e)*(1|-n)&67108863;return this.words[0]=this.words[0]&i|o&s,this.length=this.length&i|1&s,this.negative=this.negative&i|n&s,this}toNumber(){let e=this.words[0];if(2===this.length)e+=67108864*this.words[1];else if(3===this.length&&1===this.words[2])e+=4503599627370496+67108864*this.words[1];else if(this.length>2)throw new RangeError("Number can only safely store up to 53 bits.");return 0!==this.negative?-e:e}toDouble(){let e=0;for(let t=this.length-1;t>=0;t--)e=67108864*e+this.words[t];return 0!==this.negative?-e:e}valueOf(){return this.toDouble()}toBigInt(){if(!l)throw new Error("BigInt is not supported!");const e=BigInt(52),t=BigInt(26);let r=this.length-1,i=BigInt(0);for(;r>=1;r-=2){const t=67108864*this.words[r],s=this.words[r-1];i=i<<e|BigInt(t+s)}return r>=0&&(i=i<<t|BigInt(this.words[0])),0!==this.negative?-i:i}toBool(){return!this.isZero()}toString(e,t){if(e=N(e),null==t&&(t=0),0===t&&(t=1),A(e>>>0===e,"base","uint32"),A(t>>>0===t,"padding","uint32"),e<2||e>36)throw new RangeError("Base ranges between 2 and 36.");if(this._check(),16===e){let e="",r=0,i=0;for(let t=0;t<this.length;t++){const s=this.words[t],n=(16777215&(s<<r|i)).toString(16);e=0!==(i=s>>>24-r&16777215)||t!==this.length-1?a[6-n.length]+n+e:n+e,(r+=2)>=26&&(r-=26,t-=1)}for(0!==i&&(e=i.toString(16)+e);e.length%t!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}const r=h[e-1],i=c[e-1],s=this.clone();let n="";for(s.negative=0;!s.isZero();){const t=s.remrn(i).toString(e);s.iquon(i),n=s.isZero()?t+n:a[r-t.length]+t+n}for(this.isZero()&&(n="0");n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}toJSON(){return this.toString(16,2)}toArray(e,t){return this.toArrayLike(Array,e,t)}toBuffer(e,t){return this.toArrayLike(Buffer,e,t)}toArrayLike(e,t,r){null==t&&(t="be"),null==r&&(r=0),A("function"==typeof e,"ArrayType","function"),A("be"===t||"le"===t,"endian","endianness"),A(r>>>0===r,"length","uint32"),this._check();const i=this.byteLength(),s=r||Math.max(1,i);if(i>s)throw new RangeError("Byte array longer than desired length.");const n=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,s);if("be"===t){let e=n.length-1,t=0;for(let r=0;r<this.length;r++){const i=(3&r)<<1,s=this.words[r]<<i|t;n[e--]=255&s,e>=0&&(n[e--]=s>>>8&255),e>=0&&(n[e--]=s>>>16&255),6===i?(e>=0&&(n[e--]=s>>>24&255),t=0):t=s>>>24}if(e>=0){for(n[e--]=t;e>=0;)n[e--]=0;t=0}k(0===t)}else{let e=0,t=0;for(let r=0;r<this.length;r++){const i=(3&r)<<1,s=this.words[r]<<i|t;n[e++]=255&s,e<n.length&&(n[e++]=s>>>8&255),e<n.length&&(n[e++]=s>>>16&255),6===i?(e<n.length&&(n[e++]=s>>>24&255),t=0):t=s>>>24}if(e<n.length){for(n[e++]=t;e<n.length;)n[e++]=0;t=0}k(0===t)}return n}encode(e,t){return this.toBuffer(e,t)}of(e,t){return this.fromNumber(e,t)}fromNumber(e,t){null==t&&(t="be"),A(P(e),"num","integer"),A("be"===t||"le"===t,"endian","endianness");const r=e<0|0;return r&&(e=-e),e<67108864?(this.words[0]=67108863&e,this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(this.words=[67108863&e,e/67108864&67108863,1],this.length=3),this.negative=r,"le"===t&&this.reverse(),this}fromDouble(e,t){null==t&&(t="be"),A("number"==typeof e,"num","double"),A("be"===t||"le"===t,"endian","endianness"),isFinite(e)||(e=0);const r=e<=-1|0;for(e<0&&(e=-e),e=Math.floor(e),this.words=[];e>0;){const t=e%67108864,r=(e-t)/67108864;this.words.push(t),e=r}return 0===this.words.length&&this.words.push(0),this.length=this.words.length,this.negative=r,"le"===t&&this.reverse(),this}fromBigInt(e,t){if(null==t&&(t="be"),A("bigint"==typeof e,"num","bigint"),A("be"===t||"le"===t,"endian","endianness"),!l)throw new Error("BigInt is not supported!");const r=e<BigInt(0)|0;return this._fromHex(e.toString(16),r),this.negative=r,"le"===t&&this.reverse(),this}fromBool(e){return A("boolean"==typeof e,"value","boolean"),this.words[0]=0|e,this.length=1,this.negative=0,this}fromString(e,t,r){if("le"!==t&&"be"!==t||([t,r]=[r,t]),t=N(t),null==r&&(r="be"),A("string"==typeof e,"string","string"),A(t>>>0===t,"base","uint32"),A("be"===r||"le"===r,"endian","endianness"),t<2||t>36)throw new Error("Base ranges between 2 and 36.");let i=0;return(e=e.replace(/\s+/g,"")).length>0&&45===e.charCodeAt(0)&&(i=1),16===t?this._fromHex(e,i):this._fromBase(e,t,i),this.negative=i,this._normalize(),"le"===r&&this.reverse(),this}_fromHex(e,t){this.length=Math.max(2,Math.ceil((e.length-t)/6)),this.words=new Array(this.length);for(let e=0;e<this.length;e++)this.words[e]=0;let r=0,i=e.length-6,s=0;for(;i>=t;i-=6){const t=q(e,i,i+6);this.words[s]|=t<<r&67108863,this.words[s+1]|=t>>>26-r&4194303,(r+=24)>=26&&(r-=26,s+=1)}if(i+6!==t){const n=q(e,t,i+6);this.words[s]|=n<<r&67108863,this.words[s+1]|=n>>>26-r&4194303}return this._strip()}_fromBase(e,t,r){this.words[0]=0,this.length=1,this.negative=0;let i=0,s=1;for(;s<=67108863;s*=t)i+=1;i-=1,s=s/t|0;const n=e.length-r,o=n%i,a=Math.min(n,n-o)+r;let h=r;for(;h<a;h+=i){const r=j(e,h,h+i,t);this.imuln(s),this._iaddn(r)}if(0!==o){const r=Math.pow(t,o),i=j(e,h,e.length,t);this.imuln(r),this._iaddn(i)}return this}fromJSON(e){if(d.isBN(e))return e.red?e.fromRed():e.clone();if(Array.isArray(e)){for(const t of e)A("string"==typeof t,"chunk","string");e=e.join("")}return this.fromString(e,16)}fromBN(e){return this.inject(e)}fromArray(e,t){return A(Array.isArray(e),"data","array"),this.fromArrayLike(e,t)}fromBuffer(e,t){return A(null!=e&&!0===e._isBuffer,"data","buffer"),this.fromArrayLike(e,t)}fromArrayLike(e,t){if(null==t&&(t="be"),A(e&&e.length>>>0===e.length,"data","array-like"),A("be"===t||"le"===t,"endian","endianness"),0===e.length)return this.words[0]=0,this.length=1,this.negative=0,this;this.length=Math.max(2,Math.ceil(e.length/3)),this.words=new Array(this.length),this.negative=0;for(let e=0;e<this.length;e++)this.words[e]=0;const r=e.length%3;let i=0,s=0,n=0;if("be"===t){for(let t=e.length-1;t>=2;t-=3){const r=e[t]|e[t-1]<<8|e[t-2]<<16;this.words[s]|=r<<i&67108863,this.words[s+1]=r>>>26-i&67108863,(i+=24)>=26&&(i-=26,s+=1)}switch(r){case 2:n=e[1]|e[0]<<8;break;case 1:n=e[0]}}else{const t=e.length-r;for(let r=0;r<t;r+=3){const t=e[r]|e[r+1]<<8|e[r+2]<<16;this.words[s]|=t<<i&67108863,this.words[s+1]=t>>>26-i&67108863,(i+=24)>=26&&(i-=26,s+=1)}switch(r){case 2:n=e[t]|e[t+1]<<8;break;case 1:n=e[t]}}return r>0&&(this.words[s]|=n<<i&67108863,this.words[s+1]=n>>>26-i&67108863),this._strip()}decode(e,t){return this.fromBuffer(e,t)}from(e,t,r){if(null==e)return this;if("le"!==t&&"be"!==t||([t,r]=[r,t]),"number"==typeof e)return this.fromNumber(e,r);if("bigint"==typeof e)return this.fromBigInt(e,r);if("string"==typeof e)return this.fromString(e,t,r);if("object"==typeof e){if(d.isBN(e))return this.fromBN(e,r);if(e.length>>>0===e.length)return this.fromArrayLike(e,r)}if("boolean"==typeof e)return this.fromBool(e);throw new TypeError("Non-numeric object passed to BN.")}static min(...e){let t=null;for(const r of e)A(d.isBN(r),"num","bignum"),(!t||r.cmp(t)<0)&&(t=r);return t||new d(0)}static max(...e){let t=null;for(const r of e)A(d.isBN(r),"num","bignum"),(!t||r.cmp(t)>0)&&(t=r);return t||new d(0)}static cmp(e,t){return A(d.isBN(e),"a","bignum"),e.cmp(t)}static ucmp(e,t){return A(d.isBN(e),"a","bignum"),e.ucmp(t)}static red(e){return new v(e)}static barrett(e){return new E(e)}static mont(e){return new S(e)}static _prime(e){if(u[e])return u[e];let t;if("p192"===e)t=new b;else if("p224"===e)t=new g;else if("p521"===e)t=new m;else if("k256"===e)t=new _;else if("p25519"===e)t=new w;else{if("p448"!==e)throw new Error(`Unknown prime: "${e}".`);t=new y}return u[e]=t,t}static prime(e){return d._prime(e).p.clone()}static pow(e,t){return 2===e?d.shift(1,t):(new d).fromNumber(e).pown(t)}static shift(e,t){return 1===e?new d(0).usetn(t,1):(new d).fromNumber(e).ishln(t)}static mask(e){return d.shift(1,e).isubn(1)}static randomBits(e,t){if(A(null!=e,"rng","rng"),A(t>>>0===t,"bits","uint32"),"object"==typeof e){A("function"==typeof e.randomBytes,"rng","rng");const r=t+7>>>3,i=8*r,s=e.randomBytes(r);if(A(null!=s&&!0===s._isBuffer,"bytes","buffer"),s.length!==r)throw new RangeError("Invalid number of bytes returned from RNG.");const n=d.fromBuffer(s);return i>t&&n.iushrn(i-t),n}A("function"==typeof e,"rng","rng");const r=e(t);if(A(d.isBN(r),"num","bignum"),O(0===r.negative,"RNG"),R(!r.red,"RNG"),r.bitLength()>t)throw new RangeError("Invalid number of bits returned from RNG.");return r}static random(e,t,r){if(t=d.cast(t,16),r=d.cast(r,16),t.cmp(r)>0)throw new RangeError("Minimum cannot be greater than maximum.");const i=r.sub(t).iabs(),s=i.bitLength();if(0===s)return t.clone();for(;;){const r=d.randomBits(e,s);if(!(r.cmp(i)>=0))return r.iadd(t),r}}static of(e,t){return(new d).of(e,t)}static fromNumber(e,t){return(new d).fromNumber(e,t)}static fromDouble(e,t){return(new d).fromDouble(e,t)}static fromBigInt(e,t){return(new d).fromBigInt(e,t)}static fromBool(e){return(new d).fromBool(e)}static fromString(e,t,r){return(new d).fromString(e,t,r)}static fromJSON(e){return(new d).fromJSON(e)}static fromBN(e){return(new d).fromBN(e)}static fromArray(e,t){return(new d).fromArray(e,t)}static fromBuffer(e,t){return(new d).fromBuffer(e,t)}static fromArrayLike(e,t){return(new d).fromArrayLike(e,t)}static decode(e,t){return(new d).decode(e,t)}static from(e,t,r){return(new d).from(e,t,r)}static cast(e,t,r){return d.isBN(e)?e:new d(e,t,r)}static isBN(e){return e instanceof d}}d.BN=d,d.wordSize=26,d.native=0;class p{constructor(e,t){this.name=e,this.p=new d(t,16),this.n=this.p.bitLength(),this.k=d.shift(1,this.n).isub(this.p),this.lo=this.p.clone(),this.one=this.p.clone()}ireduce(e){const t=0!==e.negative;let r=e.bitLength();for(k(r<=2*this.n),e.negative=0;r>this.n;)this.split(e,this.lo),this.imulK(e),e._iadd(e,this.lo),r=e.bitLength();const i=r<this.n?-1:e.ucmp(this.p);return 0===i?(e.words[0]=0,e.length=1):i>0&&e._isub(e,this.p),t&&!e.isZero()&&e._isub(this.p,e),e}split(e,t){e._split(this.n,t)}imulK(e){return e.imul(this.k)}}class b extends p{constructor(){super("p192","ffffffff ffffffff ffffffff fffffffeffffffff ffffffff")}imulK(e){const t=this.one.inject(e);return e.iushln(64)._iadd(e,t)}}class g extends p{constructor(){super("p224","ffffffff ffffffff ffffffff ffffffff00000000 00000000 00000001")}imulK(e){const t=this.one.inject(e);return e.iushln(96)._isub(e,t)}}class m extends p{constructor(){super("p521","000001ff ffffffff ffffffff ffffffffffffffff ffffffff ffffffff ffffffffffffffff ffffffff ffffffff ffffffffffffffff ffffffff ffffffff ffffffffffffffff")}imulK(e){return e}}class _ extends p{constructor(){super("k256","ffffffff ffffffff ffffffff ffffffffffffffff ffffffff fffffffe fffffc2f")}split(e,t){const r=Math.min(e.length,9);t._alloc(r+1);for(let i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9)return t._strip(),e.words[0]=0,void(e.length=1);let i=e.words[9],s=10;for(t.words[t.length++]=4194303&i,t._strip();s<e.length;s++){const t=0|e.words[s];e.words[s-10]=(4194303&t)<<4|i>>>22,i=t}i>>>=22,e.words[s-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9,e._strip()}imulK(e){e._expand(e.length+2);let t=0;for(let r=0;r<e.length;r++){const i=e.words[r];t+=977*i,e.words[r]=67108863&t,t=64*i+Math.floor(t/67108864)}return 0===e.words[e.length-1]&&(e.length-=1,0===e.words[e.length-1]&&(e.length-=1)),e}}class w extends p{constructor(){super("p25519","7fffffff ffffffff ffffffff ffffffffffffffff ffffffff ffffffff ffffffed")}imulK(e){let t=0;for(let r=0;r<e.length;r++){const i=19*e.words[r]+t;t=i>>>26,e.words[r]=67108863&i}return 0!==t&&(e._alloc(e.length+1),e.words[e.length++]=t),e}}class y extends p{constructor(){super("p448","ffffffff ffffffff ffffffff ffffffffffffffff ffffffff fffffffe ffffffffffffffff ffffffff ffffffff ffffffffffffffff ffffffff")}imulK(e){const t=this.one.inject(e);return e.iushln(224)._iadd(e,t)}}class v{constructor(e){let t=null;"string"==typeof e&&(e=(t=d._prime(e)).p),A(d.isBN(e),"m","bignum"),R(!e.red,"reduction"),O(e.sign()>0,"reduction"),this.m=e,this.prime=t,this.mb=null,this.sm1=null}_verify1(e){O(0===e.negative,"red"),x(null!=e.red,"red")}_verify2(e,t){O(0==(e.negative|t.negative),"red"),x(null!=e.red&&e.red===t.red,"red")}get mont(){return!1}get coprime(){return!1}precompute(){if(null===this.sm1&&5===this.m.andln(7)){const e=new d(2).toRed(this),t=this.m.subn(1).iushrn(2);this.sm1=this.pow(e,t)}return this}convertTo(e){const t=e.mod(this.m);return t.red=this,t}convertFrom(e){const t=e.clone();return t.red=null,t}intTo(e){return e}intFrom(e){return e}imod(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.imod(this.m)._forceRed(this)}iadd(e,t){return this._verify2(e,t),e._iadd(e,t),e.ucmp(this.m)>=0&&e._isub(e,this.m),e}add(e,t){return e.length<t.length?this.iadd(t.clone(),e):this.iadd(e.clone(),t)}iaddn(e,t){return this._verify1(e),t<0?this.isubn(e,-t):(1===this.m.length&&(t%=this.m.words[0]),e._iaddn(t),e.ucmp(this.m)>=0&&e._isub(e,this.m),e)}addn(e,t){return this.iaddn(e.clone(),t)}isub(e,t){this._verify2(e,t);const r=e.ucmp(t);return 0===r?(e.words[0]=0,e.length=1,e):(r<0?(e._isub(t,e),e._isub(this.m,e)):e._isub(e,t),e)}sub(e,t){return this.isub(e.clone(),t)}isubn(e,t){return this._verify1(e),t<0?this.iaddn(e,-t):(1===this.m.length&&(t%=this.m.words[0]),1===e.length&&e.words[0]<t?(e.words[0]=t-e.words[0],e._isub(this.m,e)):e._isubn(t),e)}subn(e,t){return this.isubn(e.clone(),t)}imul(e,t){return this._verify2(e,t),this.imod(e.imul(t))}mul(e,t){return this._verify2(e,t),this.imod(e.mul(t))}imuln(e,t){if(this._verify1(e),e.isZero())return e;if(0===t)return e.words[0]=0,e.length=1,e;const r=t<0;if(r&&(t=-t),1===this.m.length&&(t%=this.m.words[0]),e.imuln(t),t<=16)for(;e.ucmp(this.m)>=0;)e._isub(e,this.m);else this.imod(e);return r&&this.ineg(e),e}muln(e,t){return this.imuln(e.clone(),t)}idiv(e,t){return this.div(e,t)._move(e)}div(e,t){return this.mul(e,this.invert(t))}idivn(e,t){return this.divn(e,t)._move(e)}divn(e,t){return this.div(e,this.convertTo(new d(t)))}ipow(e,t,r){return this.pow(e,t,r)._move(e)}pow(e,t,r){return this._verify1(e),t.isNeg()&&(e=this.invert(e)),l&&!this.prime?this.powInt(e,t,r):null!=r?this.climb(e,t,r):1===t.length?this.pown(e,t.words[0]):this.slide(e,t)}slide(e,t){const r=new Array(16);r[0]=new d(1).toRed(this),r[1]=e;for(let t=2;t<r.length;t++)r[t]=this.mul(r[t-1],e);let i=T(t.words[t.length-1]),s=r[0],n=0,o=0;for(let e=t.length-1;e>=0;e--){const a=t.words[e];for(let t=i-1;t>=0;t--){const i=a>>t&1;s!==r[0]&&(s=this.sqr(s)),0!==i||0!==n?(n<<=1,n|=i,4!==(o+=1)&&0!=(e|t)||(s=this.mul(s,r[n]),o=0,n=0)):o=0}i=26}return s}climb(e,t,r){const i=Math.max(t.bitLength(),r>>>0),s=i+7>>>3,n=t.toArray("le",s);let o=e.clone(),a=new d(1).toRed(this),h=0;for(let e=i-1;e>=0;e--){const t=n[e>>3]>>(7&e)&1;o.cswap(a,h^t),o=this.mul(o,a),a=this.mul(a,a),h=t}return o.cswap(a,h),a}powInt(e,t,r){null===this.mb&&(this.mb=this.m.toBigInt());const i=function(e,t,r,i){return null!=i?function(e,t,r,i){const s=Math.max(t.bitLength(),i>>>0),n=s+7>>>3,o=t.toArray("le",n);let a=BigInt(1),h=0;for(let t=s-1;t>=0;t--){const i=o[t>>3]>>(7&t)&1;[e,a]=D(e,a,h^i),e=e*a%r,a=a*a%r,h=i}return[e,a]=D(e,a,h),a}(e,t,r,i):function(e,t,r){let i=BigInt(1),s=T(t.words[t.length-1]);for(let n=t.length-1;n>=0;n--){const o=t.words[n];for(let t=s-1;t>=0;t--)i=i*i%r,o>>t&1&&(i=i*e%r);s=26}return i}(e,t,r)}(this.intFrom(e.toBigInt()),t,this.mb,r),s=this.intTo(i);return d.fromBigInt(s)._forceRed(this)}ipown(e,t){return this.pown(e,t)._move(e)}pown(e,t){if(this._verify1(e),t<0&&(e=this.invert(e),t=-t),0===t)return new d(1).toRed(this);if(1===t)return e.clone();let r=e;for(let i=T(t)-2;i>=0;i--)r=this.sqr(r),t>>i&1&&(r=this.mul(r,e));return r}isqr(e){return this.imul(e,e)}sqr(e){return this.mul(e,e)}isqrt(e){return this.sqrt(e)._move(e)}sqrt(e){return this._verify1(e),3===this.m.andln(3)?this.sqrt3mod4(e):5===this.m.andln(7)?null!=this.sm1?this.sqrt5mod8sm1(e):this.sqrt5mod8(e):this.sqrt0(e)}sqrt3mod4(e){const t=this.m.addn(1).iushrn(2),r=this.pow(e,t);if(!this.sqr(r).eq(e))throw new Error("X is not a square mod P.");return r}sqrt5mod8(e){const t=new d(1).toRed(this),r=this.m.ushrn(3),i=this.add(e,e),s=this.pow(i,r),n=this.mul(i,this.sqr(s)),o=this.mul(this.mul(s,e),this.isub(n,t));if(!this.sqr(o).eq(e))throw new Error("X is not a square mod P.");return o}sqrt5mod8sm1(e){const t=this.m.addn(3).iushrn(3);let r=this.pow(e,t);if(!this.sqr(r).eq(e)&&(r=this.mul(r,this.sm1),!this.sqr(r).eq(e)))throw new Error("X is not a square mod P.");return r}sqrt0(e){if(0===this.m.cmpn(1)||!this.m.isOdd())throw new Error("Invalid prime.");switch(this.jacobi(e)){case-1:throw new Error("X is not a square mod P.");case 0:return new d(0)._forceRed(this)}const t=new d(1).toRed(this),r=this.m.subn(1),i=r.zeroBits();r.iushrn(i);const s=new d(2).toRed(this);for(;-1!==this.jacobi(s);)this.iadd(s,t);let n=this.pow(e,r),o=this.pow(s,r),a=this.pow(e,r.iaddn(1).iushrn(1)),h=i;for(;;){let e=n,r=0;for(;0!==e.cmp(t);)e=this.sqr(e),r+=1;if(0===r)break;k(r<h),e=d.shift(1,h-r-1),e=this.pow(o,e),o=this.sqr(e),a=this.mul(a,e),n=this.mul(n,o),h=r}return a}idivsqrt(e,t){return this.divsqrt(e,t)._move(e)}divsqrt(e,t){if(this._verify2(e,t),t.isZero())throw new RangeError("Not invertible.");return 3===this.m.andln(3)?this.divsqrt3mod4(e,t):null!=this.sm1&&5===this.m.andln(7)?this.divsqrt5mod8(e,t):this.sqrt(this.div(e,t))}divsqrt3mod4(e,t){const r=this.m.subn(3).iushrn(2),i=this.sqr(e),s=this.mul(i,e),n=this.mul(s,i),o=this.mul(this.sqr(t),t),a=this.pow(this.mul(n,o),r),h=this.mul(this.mul(s,t),a);if(0===this.mul(t,this.sqr(h)).cmp(e))return h;throw new Error("X is not a square mod P.")}divsqrt5mod8(e,t){const r=this.m.subn(5).iushrn(3),i=this.mul(this.sqr(t),t),s=this.mul(this.sqr(i),t),n=this.pow(this.mul(e,s),r),o=this.mul(this.mul(e,i),n),a=this.mul(t,this.sqr(o));if(0===a.cmp(e))return o;if(0===this.ineg(a).cmp(e))return this.mul(o,this.sm1);throw new Error("X is not a square mod P.")}isSquare(e){let t;return t=this.prime||this.coprime?this.legendre(e):this.m.isOdd()?this.jacobi(e):this.kronecker(e),Boolean(~t>>>31)}ishl(e,t){return this._verify1(e),this.imod(e.iushl(t))}shl(e,t){return this.ishl(e.clone(),t)}ishln(e,t){if(this._verify1(e),e.iushln(t),t<=4)for(;e.ucmp(this.m)>=0;)e._isub(e,this.m);else this.imod(e);return e}shln(e,t){return this.ishln(e.clone(),t)}ineg(e){return this._verify1(e),e.isZero()||e._isub(this.m,e),e}neg(e){return this.ineg(e.clone())}eq(e,t){return this._verify2(e,t),0===e.ucmp(t)}eqn(e,t){if(this._verify1(e),1===this.m.length)return(t%=this.m.words[0])<0&&(t+=this.m.words[0]),0===e.ucmpn(t);if(t<0){this.m._isubn(-t);const r=e.ucmp(this.m);return this.m._iaddn(-t),0===r}return 0===e.ucmpn(t)}isHigh(e){return!this.isLow(e)}isLow(e){return this._verify1(e),e.ucmp(this.m.ushrn(1))<=0}isOdd(e){return this._verify1(e),e.isOdd()}isEven(e){return this._verify1(e),e.isEven()}legendre(e){if(this._verify1(e),this.m.isEven())throw new Error("legendre: `num` must be odd.");const t=this.m.subn(1).iushrn(1),r=this.pow(e,t),i=new d(1).toRed(this),s=r.czero(),n=r.ceq(i),o=r.ceq(this.ineg(i));if(0==(s|n|o))throw new Error("Invalid prime.");return k(s+n+o===1),n-o}jacobi(e){return this._verify1(e),e.jacobi(this.m)}kronecker(e){return this._verify1(e),e.kronecker(this.m)}iinvert(e){return this.invert(e)._move(e)}invert(e){return this._verify1(e),this.prime?this.imod(e._invertp(this.m)):e.invert(this.m)._forceRed(this)}ifermat(e){return this.fermat(e)._move(e)}fermat(e){if(this._verify1(e),e.isZero()||0===this.m.cmpn(1))throw new RangeError("Not invertible.");return this.pow(e,this.m.subn(2))}[o](){return this.prime?`<Red: ${this.prime.name}>`:`<Red: ${this.m.toString(10)}>`}}class E extends v{constructor(e){super(e),this.prime=null,this.n=this.m.bitLength(),this.n%26!=0&&(this.n+=26-this.n%26),this.k=2*this.n,this.w=this.k/26,this.b=d.shift(1,this.k).div(this.m)}convertTo(e){return e.length>this.w?super.convertTo(e):this.imod(e.clone())}_shift(e){let t=0,r=this.w;for(;r<e.length;)e.words[t++]=e.words[r++];0===t&&(e.words[t++]=0),e.length=t}imod(e){const t=e.negative;k(e.length<=this.w),e.negative=0;const r=e.mul(this.b);return this._shift(r),e._isub(e,r.mul(this.m)),e.ucmp(this.m)>=0&&e._isub(e,this.m),t&&!e.isZero()&&e._isub(this.m,e),e.red=this,e}}class S extends v{constructor(e){super(e),this.prime=null,this.n=this.m.bitLength(),this.n%26!=0&&(this.n+=26-this.n%26),this.r=d.shift(1,this.n),this.r2=d.shift(1,2*this.n).imod(this.m),this.ri=this.r._invertp(this.m).imod(this.m),this.mi=this.r.mul(this.ri).isubn(1).div(this.m),this.rib=null}get mont(){return!0}get coprime(){return!0}convertTo(e){return this.imod(e.ushln(this.n))}convertFrom(e){const t=this.imod(e.mul(this.ri));return t.red=null,t}intTo(e){return(e<<BigInt(this.n))%this.mb}intFrom(e){return null===this.rib&&(this.rib=this.ri.toBigInt()),e*this.rib%this.mb}iaddn(e,t){return this.iadd(e,this.convertTo(new d(t)))}isubn(e,t){return this.isub(e,this.convertTo(new d(t)))}imul(e,t){return this.mul(e,t)._move(e)}mul(e,t){if(this._verify2(e,t),e.isZero()||t.isZero())return new d(0)._forceRed(this);const r=e.mul(t),i=r.umaskn(this.n).mul(this.mi).iumaskn(this.n),s=r.iadd(i.mul(this.m)).iushrn(this.n);return s.ucmp(this.m)>=0&&s._isub(s,this.m),s._forceRed(this)}imuln(e,t){if(this._verify1(e),e.isZero())return e;if(0===t)return e.words[0]=0,e.length=1,e;const r=t<0;r&&(t=-t),1===this.m.length&&(t%=this.m.words[0]);const i=T(t);if(i>5)this.imul(e,this.convertTo(new d(t)));else if(0==(t&t-1))for(let t=0;t<i-1;t++)this.iadd(e,e);else{const r=e.clone();for(let s=i-2;s>=0;s--)this.iadd(e,e),t>>s&1&&this.iadd(e,r)}return r&&this.ineg(e),e}eqn(e,t){return this._verify1(e),0===t?e.isZero():0===e.ucmp(this.convertTo(new d(t)))}isLow(e){return this._verify1(e),this.convertFrom(e).ucmp(this.m.ushrn(1))<=0}isOdd(e){return this._verify1(e),this.convertFrom(e).isOdd()}isEven(e){return this._verify1(e),this.convertFrom(e).isEven()}invert(e){return this._verify1(e),this.imod(e._invertp(this.m).mul(this.r2))}}function I(e,t,r){const i=new e(t);return e.captureStackTrace&&e.captureStackTrace(i,r),i}function k(e,t){if(!e){throw I(Error,t||"Assertion failed.",k)}}function A(e,t,r){if(!e){const e=`"${t}" must be a(n) ${r}.`;throw I(TypeError,e,A)}}function O(e,t){if(!e){const e=`"${t}" only works with positive numbers.`;throw I(RangeError,e,O)}}function x(e,t){if(!e){const e=`"${t}" only works with red numbers.`;throw I(TypeError,e,x)}}function R(e,t){if(!e){const e=`"${t}" only works with normal numbers.`;throw I(TypeError,e,R)}}function M(e){if(!e){throw I(RangeError,"Cannot divide by zero.",M)}}function P(e){return Number.isSafeInteger(e)}function B(e){return P(e)&&e>=-67108863&&e<=67108863}function N(e){if(null==e)return 10;if("number"==typeof e)return e;switch(e){case"bin":return 2;case"oct":return 8;case"dec":return 10;case"hex":return 16}return 0}function T(e){if(Math.clz32)return 32-Math.clz32(e);let t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t}function C(e){if(0===e)return 26;let t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&(r+=1),r}function q(e,t,r){const i=Math.min(e.length,r);let s=0,n=0;for(let r=t;r<i;r++){const t=e.charCodeAt(r)-48;let i;s<<=4,s|=i=t>=49&&t<=54?t-49+10:t>=17&&t<=22?t-17+10:t,n|=i}if(-16&n)throw new Error("Invalid string.");return s}function j(e,t,r,i){const s=Math.min(e.length,r);let n=0;for(let r=t;r<s;r++){const t=e.charCodeAt(r)-48;let s;if(n*=i,s=t>=49?t-49+10:t>=17?t-17+10:t,t<0||t>207||s>=i)throw new Error("Invalid string.");n+=s}return n}function D(e,t,r){const i=BigInt(1),s=BigInt(r);return[e*(s^i)|t*s,t*(s^i)|e*s]}function U(e,t,r){const i=e.length+t.length;r.negative=e.negative^t.negative,r._alloc(i),r.length=i;const s=e.words[0]*t.words[0],n=67108863&s;let o=s/67108864|0,a=1;for(r.words[0]=n;a<r.length-1;a++){let i=o>>>26,s=67108863&o;const n=Math.max(0,a-e.length+1),h=Math.min(a,t.length-1);for(let r=n;r<=h;r++){const n=a-r,o=e.words[n]*t.words[r]+s;i+=o/67108864|0,s=67108863&o}r.words[a]=0|s,o=0|i}return 0!==o?r.words[a]=0|o:r.length-=1,r._strip()}function L(e,t,r){const i=e.length+t.length;r.negative=e.negative^t.negative,r._alloc(i),r.length=i;let s=0,n=0,o=0;for(;o<r.length-1;o++){let i=n;n=0;let a=67108863&s;const h=Math.max(0,o-e.length+1),c=Math.min(o,t.length-1);for(let r=h;r<=c;r++){const s=o-r,h=e.words[s]*t.words[r];let c=67108863&h;a=67108863&(c=c+a|0),n+=(i=(i=i+(h/67108864|0)|0)+(c>>>26)|0)>>>26,i&=67108863}r.words[o]=a,s=i,i=n}return 0!==s?r.words[o]=s:r.length-=1,r._strip()}function z(e,t,r){const i=e.words,s=t.words,n=r.words,o=0|i[0],a=8191&o,h=o>>>13,c=0|i[1],u=8191&c,f=c>>>13,l=0|i[2],d=8191&l,p=l>>>13,b=0|i[3],g=8191&b,m=b>>>13,_=0|i[4],w=8191&_,y=_>>>13,v=0|i[5],E=8191&v,S=v>>>13,I=0|i[6],k=8191&I,A=I>>>13,O=0|i[7],x=8191&O,R=O>>>13,M=0|i[8],P=8191&M,B=M>>>13,N=0|i[9],T=8191&N,C=N>>>13,q=0|s[0],j=8191&q,D=q>>>13,U=0|s[1],L=8191&U,z=U>>>13,F=0|s[2],H=8191&F,V=F>>>13,K=0|s[3],W=8191&K,G=K>>>13,Y=0|s[4],X=8191&Y,J=Y>>>13,Q=0|s[5],Z=8191&Q,$=Q>>>13,ee=0|s[6],te=8191&ee,re=ee>>>13,ie=0|s[7],se=8191&ie,ne=ie>>>13,oe=0|s[8],ae=8191&oe,he=oe>>>13,ce=0|s[9],ue=8191&ce,fe=ce>>>13;let le,de,pe,be=0;r.negative=e.negative^t.negative,r._alloc(20),r.length=19;let ge=(be+(le=Math.imul(a,j))|0)+((8191&(de=(de=Math.imul(a,D))+Math.imul(h,j)|0))<<13)|0;be=((pe=Math.imul(h,D))+(de>>>13)|0)+(ge>>>26)|0,ge&=67108863,le=Math.imul(u,j),de=(de=Math.imul(u,D))+Math.imul(f,j)|0,pe=Math.imul(f,D);let me=(be+(le=le+Math.imul(a,L)|0)|0)+((8191&(de=(de=de+Math.imul(a,z)|0)+Math.imul(h,L)|0))<<13)|0;be=((pe=pe+Math.imul(h,z)|0)+(de>>>13)|0)+(me>>>26)|0,me&=67108863,le=Math.imul(d,j),de=(de=Math.imul(d,D))+Math.imul(p,j)|0,pe=Math.imul(p,D),le=le+Math.imul(u,L)|0,de=(de=de+Math.imul(u,z)|0)+Math.imul(f,L)|0,pe=pe+Math.imul(f,z)|0;let _e=(be+(le=le+Math.imul(a,H)|0)|0)+((8191&(de=(de=de+Math.imul(a,V)|0)+Math.imul(h,H)|0))<<13)|0;be=((pe=pe+Math.imul(h,V)|0)+(de>>>13)|0)+(_e>>>26)|0,_e&=67108863,le=Math.imul(g,j),de=(de=Math.imul(g,D))+Math.imul(m,j)|0,pe=Math.imul(m,D),le=le+Math.imul(d,L)|0,de=(de=de+Math.imul(d,z)|0)+Math.imul(p,L)|0,pe=pe+Math.imul(p,z)|0,le=le+Math.imul(u,H)|0,de=(de=de+Math.imul(u,V)|0)+Math.imul(f,H)|0,pe=pe+Math.imul(f,V)|0;let we=(be+(le=le+Math.imul(a,W)|0)|0)+((8191&(de=(de=de+Math.imul(a,G)|0)+Math.imul(h,W)|0))<<13)|0;be=((pe=pe+Math.imul(h,G)|0)+(de>>>13)|0)+(we>>>26)|0,we&=67108863,le=Math.imul(w,j),de=(de=Math.imul(w,D))+Math.imul(y,j)|0,pe=Math.imul(y,D),le=le+Math.imul(g,L)|0,de=(de=de+Math.imul(g,z)|0)+Math.imul(m,L)|0,pe=pe+Math.imul(m,z)|0,le=le+Math.imul(d,H)|0,de=(de=de+Math.imul(d,V)|0)+Math.imul(p,H)|0,pe=pe+Math.imul(p,V)|0,le=le+Math.imul(u,W)|0,de=(de=de+Math.imul(u,G)|0)+Math.imul(f,W)|0,pe=pe+Math.imul(f,G)|0;let ye=(be+(le=le+Math.imul(a,X)|0)|0)+((8191&(de=(de=de+Math.imul(a,J)|0)+Math.imul(h,X)|0))<<13)|0;be=((pe=pe+Math.imul(h,J)|0)+(de>>>13)|0)+(ye>>>26)|0,ye&=67108863,le=Math.imul(E,j),de=(de=Math.imul(E,D))+Math.imul(S,j)|0,pe=Math.imul(S,D),le=le+Math.imul(w,L)|0,de=(de=de+Math.imul(w,z)|0)+Math.imul(y,L)|0,pe=pe+Math.imul(y,z)|0,le=le+Math.imul(g,H)|0,de=(de=de+Math.imul(g,V)|0)+Math.imul(m,H)|0,pe=pe+Math.imul(m,V)|0,le=le+Math.imul(d,W)|0,de=(de=de+Math.imul(d,G)|0)+Math.imul(p,W)|0,pe=pe+Math.imul(p,G)|0,le=le+Math.imul(u,X)|0,de=(de=de+Math.imul(u,J)|0)+Math.imul(f,X)|0,pe=pe+Math.imul(f,J)|0;let ve=(be+(le=le+Math.imul(a,Z)|0)|0)+((8191&(de=(de=de+Math.imul(a,$)|0)+Math.imul(h,Z)|0))<<13)|0;be=((pe=pe+Math.imul(h,$)|0)+(de>>>13)|0)+(ve>>>26)|0,ve&=67108863,le=Math.imul(k,j),de=(de=Math.imul(k,D))+Math.imul(A,j)|0,pe=Math.imul(A,D),le=le+Math.imul(E,L)|0,de=(de=de+Math.imul(E,z)|0)+Math.imul(S,L)|0,pe=pe+Math.imul(S,z)|0,le=le+Math.imul(w,H)|0,de=(de=de+Math.imul(w,V)|0)+Math.imul(y,H)|0,pe=pe+Math.imul(y,V)|0,le=le+Math.imul(g,W)|0,de=(de=de+Math.imul(g,G)|0)+Math.imul(m,W)|0,pe=pe+Math.imul(m,G)|0,le=le+Math.imul(d,X)|0,de=(de=de+Math.imul(d,J)|0)+Math.imul(p,X)|0,pe=pe+Math.imul(p,J)|0,le=le+Math.imul(u,Z)|0,de=(de=de+Math.imul(u,$)|0)+Math.imul(f,Z)|0,pe=pe+Math.imul(f,$)|0;let Ee=(be+(le=le+Math.imul(a,te)|0)|0)+((8191&(de=(de=de+Math.imul(a,re)|0)+Math.imul(h,te)|0))<<13)|0;be=((pe=pe+Math.imul(h,re)|0)+(de>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,le=Math.imul(x,j),de=(de=Math.imul(x,D))+Math.imul(R,j)|0,pe=Math.imul(R,D),le=le+Math.imul(k,L)|0,de=(de=de+Math.imul(k,z)|0)+Math.imul(A,L)|0,pe=pe+Math.imul(A,z)|0,le=le+Math.imul(E,H)|0,de=(de=de+Math.imul(E,V)|0)+Math.imul(S,H)|0,pe=pe+Math.imul(S,V)|0,le=le+Math.imul(w,W)|0,de=(de=de+Math.imul(w,G)|0)+Math.imul(y,W)|0,pe=pe+Math.imul(y,G)|0,le=le+Math.imul(g,X)|0,de=(de=de+Math.imul(g,J)|0)+Math.imul(m,X)|0,pe=pe+Math.imul(m,J)|0,le=le+Math.imul(d,Z)|0,de=(de=de+Math.imul(d,$)|0)+Math.imul(p,Z)|0,pe=pe+Math.imul(p,$)|0,le=le+Math.imul(u,te)|0,de=(de=de+Math.imul(u,re)|0)+Math.imul(f,te)|0,pe=pe+Math.imul(f,re)|0;let Se=(be+(le=le+Math.imul(a,se)|0)|0)+((8191&(de=(de=de+Math.imul(a,ne)|0)+Math.imul(h,se)|0))<<13)|0;be=((pe=pe+Math.imul(h,ne)|0)+(de>>>13)|0)+(Se>>>26)|0,Se&=67108863,le=Math.imul(P,j),de=(de=Math.imul(P,D))+Math.imul(B,j)|0,pe=Math.imul(B,D),le=le+Math.imul(x,L)|0,de=(de=de+Math.imul(x,z)|0)+Math.imul(R,L)|0,pe=pe+Math.imul(R,z)|0,le=le+Math.imul(k,H)|0,de=(de=de+Math.imul(k,V)|0)+Math.imul(A,H)|0,pe=pe+Math.imul(A,V)|0,le=le+Math.imul(E,W)|0,de=(de=de+Math.imul(E,G)|0)+Math.imul(S,W)|0,pe=pe+Math.imul(S,G)|0,le=le+Math.imul(w,X)|0,de=(de=de+Math.imul(w,J)|0)+Math.imul(y,X)|0,pe=pe+Math.imul(y,J)|0,le=le+Math.imul(g,Z)|0,de=(de=de+Math.imul(g,$)|0)+Math.imul(m,Z)|0,pe=pe+Math.imul(m,$)|0,le=le+Math.imul(d,te)|0,de=(de=de+Math.imul(d,re)|0)+Math.imul(p,te)|0,pe=pe+Math.imul(p,re)|0,le=le+Math.imul(u,se)|0,de=(de=de+Math.imul(u,ne)|0)+Math.imul(f,se)|0,pe=pe+Math.imul(f,ne)|0;let Ie=(be+(le=le+Math.imul(a,ae)|0)|0)+((8191&(de=(de=de+Math.imul(a,he)|0)+Math.imul(h,ae)|0))<<13)|0;be=((pe=pe+Math.imul(h,he)|0)+(de>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,le=Math.imul(T,j),de=(de=Math.imul(T,D))+Math.imul(C,j)|0,pe=Math.imul(C,D),le=le+Math.imul(P,L)|0,de=(de=de+Math.imul(P,z)|0)+Math.imul(B,L)|0,pe=pe+Math.imul(B,z)|0,le=le+Math.imul(x,H)|0,de=(de=de+Math.imul(x,V)|0)+Math.imul(R,H)|0,pe=pe+Math.imul(R,V)|0,le=le+Math.imul(k,W)|0,de=(de=de+Math.imul(k,G)|0)+Math.imul(A,W)|0,pe=pe+Math.imul(A,G)|0,le=le+Math.imul(E,X)|0,de=(de=de+Math.imul(E,J)|0)+Math.imul(S,X)|0,pe=pe+Math.imul(S,J)|0,le=le+Math.imul(w,Z)|0,de=(de=de+Math.imul(w,$)|0)+Math.imul(y,Z)|0,pe=pe+Math.imul(y,$)|0,le=le+Math.imul(g,te)|0,de=(de=de+Math.imul(g,re)|0)+Math.imul(m,te)|0,pe=pe+Math.imul(m,re)|0,le=le+Math.imul(d,se)|0,de=(de=de+Math.imul(d,ne)|0)+Math.imul(p,se)|0,pe=pe+Math.imul(p,ne)|0,le=le+Math.imul(u,ae)|0,de=(de=de+Math.imul(u,he)|0)+Math.imul(f,ae)|0,pe=pe+Math.imul(f,he)|0;let ke=(be+(le=le+Math.imul(a,ue)|0)|0)+((8191&(de=(de=de+Math.imul(a,fe)|0)+Math.imul(h,ue)|0))<<13)|0;be=((pe=pe+Math.imul(h,fe)|0)+(de>>>13)|0)+(ke>>>26)|0,ke&=67108863,le=Math.imul(T,L),de=(de=Math.imul(T,z))+Math.imul(C,L)|0,pe=Math.imul(C,z),le=le+Math.imul(P,H)|0,de=(de=de+Math.imul(P,V)|0)+Math.imul(B,H)|0,pe=pe+Math.imul(B,V)|0,le=le+Math.imul(x,W)|0,de=(de=de+Math.imul(x,G)|0)+Math.imul(R,W)|0,pe=pe+Math.imul(R,G)|0,le=le+Math.imul(k,X)|0,de=(de=de+Math.imul(k,J)|0)+Math.imul(A,X)|0,pe=pe+Math.imul(A,J)|0,le=le+Math.imul(E,Z)|0,de=(de=de+Math.imul(E,$)|0)+Math.imul(S,Z)|0,pe=pe+Math.imul(S,$)|0,le=le+Math.imul(w,te)|0,de=(de=de+Math.imul(w,re)|0)+Math.imul(y,te)|0,pe=pe+Math.imul(y,re)|0,le=le+Math.imul(g,se)|0,de=(de=de+Math.imul(g,ne)|0)+Math.imul(m,se)|0,pe=pe+Math.imul(m,ne)|0,le=le+Math.imul(d,ae)|0,de=(de=de+Math.imul(d,he)|0)+Math.imul(p,ae)|0,pe=pe+Math.imul(p,he)|0;let Ae=(be+(le=le+Math.imul(u,ue)|0)|0)+((8191&(de=(de=de+Math.imul(u,fe)|0)+Math.imul(f,ue)|0))<<13)|0;be=((pe=pe+Math.imul(f,fe)|0)+(de>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,le=Math.imul(T,H),de=(de=Math.imul(T,V))+Math.imul(C,H)|0,pe=Math.imul(C,V),le=le+Math.imul(P,W)|0,de=(de=de+Math.imul(P,G)|0)+Math.imul(B,W)|0,pe=pe+Math.imul(B,G)|0,le=le+Math.imul(x,X)|0,de=(de=de+Math.imul(x,J)|0)+Math.imul(R,X)|0,pe=pe+Math.imul(R,J)|0,le=le+Math.imul(k,Z)|0,de=(de=de+Math.imul(k,$)|0)+Math.imul(A,Z)|0,pe=pe+Math.imul(A,$)|0,le=le+Math.imul(E,te)|0,de=(de=de+Math.imul(E,re)|0)+Math.imul(S,te)|0,pe=pe+Math.imul(S,re)|0,le=le+Math.imul(w,se)|0,de=(de=de+Math.imul(w,ne)|0)+Math.imul(y,se)|0,pe=pe+Math.imul(y,ne)|0,le=le+Math.imul(g,ae)|0,de=(de=de+Math.imul(g,he)|0)+Math.imul(m,ae)|0,pe=pe+Math.imul(m,he)|0;let Oe=(be+(le=le+Math.imul(d,ue)|0)|0)+((8191&(de=(de=de+Math.imul(d,fe)|0)+Math.imul(p,ue)|0))<<13)|0;be=((pe=pe+Math.imul(p,fe)|0)+(de>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,le=Math.imul(T,W),de=(de=Math.imul(T,G))+Math.imul(C,W)|0,pe=Math.imul(C,G),le=le+Math.imul(P,X)|0,de=(de=de+Math.imul(P,J)|0)+Math.imul(B,X)|0,pe=pe+Math.imul(B,J)|0,le=le+Math.imul(x,Z)|0,de=(de=de+Math.imul(x,$)|0)+Math.imul(R,Z)|0,pe=pe+Math.imul(R,$)|0,le=le+Math.imul(k,te)|0,de=(de=de+Math.imul(k,re)|0)+Math.imul(A,te)|0,pe=pe+Math.imul(A,re)|0,le=le+Math.imul(E,se)|0,de=(de=de+Math.imul(E,ne)|0)+Math.imul(S,se)|0,pe=pe+Math.imul(S,ne)|0,le=le+Math.imul(w,ae)|0,de=(de=de+Math.imul(w,he)|0)+Math.imul(y,ae)|0,pe=pe+Math.imul(y,he)|0;let xe=(be+(le=le+Math.imul(g,ue)|0)|0)+((8191&(de=(de=de+Math.imul(g,fe)|0)+Math.imul(m,ue)|0))<<13)|0;be=((pe=pe+Math.imul(m,fe)|0)+(de>>>13)|0)+(xe>>>26)|0,xe&=67108863,le=Math.imul(T,X),de=(de=Math.imul(T,J))+Math.imul(C,X)|0,pe=Math.imul(C,J),le=le+Math.imul(P,Z)|0,de=(de=de+Math.imul(P,$)|0)+Math.imul(B,Z)|0,pe=pe+Math.imul(B,$)|0,le=le+Math.imul(x,te)|0,de=(de=de+Math.imul(x,re)|0)+Math.imul(R,te)|0,pe=pe+Math.imul(R,re)|0,le=le+Math.imul(k,se)|0,de=(de=de+Math.imul(k,ne)|0)+Math.imul(A,se)|0,pe=pe+Math.imul(A,ne)|0,le=le+Math.imul(E,ae)|0,de=(de=de+Math.imul(E,he)|0)+Math.imul(S,ae)|0,pe=pe+Math.imul(S,he)|0;let Re=(be+(le=le+Math.imul(w,ue)|0)|0)+((8191&(de=(de=de+Math.imul(w,fe)|0)+Math.imul(y,ue)|0))<<13)|0;be=((pe=pe+Math.imul(y,fe)|0)+(de>>>13)|0)+(Re>>>26)|0,Re&=67108863,le=Math.imul(T,Z),de=(de=Math.imul(T,$))+Math.imul(C,Z)|0,pe=Math.imul(C,$),le=le+Math.imul(P,te)|0,de=(de=de+Math.imul(P,re)|0)+Math.imul(B,te)|0,pe=pe+Math.imul(B,re)|0,le=le+Math.imul(x,se)|0,de=(de=de+Math.imul(x,ne)|0)+Math.imul(R,se)|0,pe=pe+Math.imul(R,ne)|0,le=le+Math.imul(k,ae)|0,de=(de=de+Math.imul(k,he)|0)+Math.imul(A,ae)|0,pe=pe+Math.imul(A,he)|0;let Me=(be+(le=le+Math.imul(E,ue)|0)|0)+((8191&(de=(de=de+Math.imul(E,fe)|0)+Math.imul(S,ue)|0))<<13)|0;be=((pe=pe+Math.imul(S,fe)|0)+(de>>>13)|0)+(Me>>>26)|0,Me&=67108863,le=Math.imul(T,te),de=(de=Math.imul(T,re))+Math.imul(C,te)|0,pe=Math.imul(C,re),le=le+Math.imul(P,se)|0,de=(de=de+Math.imul(P,ne)|0)+Math.imul(B,se)|0,pe=pe+Math.imul(B,ne)|0,le=le+Math.imul(x,ae)|0,de=(de=de+Math.imul(x,he)|0)+Math.imul(R,ae)|0,pe=pe+Math.imul(R,he)|0;let Pe=(be+(le=le+Math.imul(k,ue)|0)|0)+((8191&(de=(de=de+Math.imul(k,fe)|0)+Math.imul(A,ue)|0))<<13)|0;be=((pe=pe+Math.imul(A,fe)|0)+(de>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,le=Math.imul(T,se),de=(de=Math.imul(T,ne))+Math.imul(C,se)|0,pe=Math.imul(C,ne),le=le+Math.imul(P,ae)|0,de=(de=de+Math.imul(P,he)|0)+Math.imul(B,ae)|0,pe=pe+Math.imul(B,he)|0;let Be=(be+(le=le+Math.imul(x,ue)|0)|0)+((8191&(de=(de=de+Math.imul(x,fe)|0)+Math.imul(R,ue)|0))<<13)|0;be=((pe=pe+Math.imul(R,fe)|0)+(de>>>13)|0)+(Be>>>26)|0,Be&=67108863,le=Math.imul(T,ae),de=(de=Math.imul(T,he))+Math.imul(C,ae)|0,pe=Math.imul(C,he);let Ne=(be+(le=le+Math.imul(P,ue)|0)|0)+((8191&(de=(de=de+Math.imul(P,fe)|0)+Math.imul(B,ue)|0))<<13)|0;be=((pe=pe+Math.imul(B,fe)|0)+(de>>>13)|0)+(Ne>>>26)|0,Ne&=67108863;let Te=(be+(le=Math.imul(T,ue))|0)+((8191&(de=(de=Math.imul(T,fe))+Math.imul(C,ue)|0))<<13)|0;return be=((pe=Math.imul(C,fe))+(de>>>13)|0)+(Te>>>26)|0,Te&=67108863,n[0]=ge,n[1]=me,n[2]=_e,n[3]=we,n[4]=ye,n[5]=ve,n[6]=Ee,n[7]=Se,n[8]=Ie,n[9]=ke,n[10]=Ae,n[11]=Oe,n[12]=xe,n[13]=Re,n[14]=Me,n[15]=Pe,n[16]=Be,n[17]=Ne,n[18]=Te,0!==be&&(n[19]=be,r.length+=1),r}Math.imul||(z=U),d.Red=v,r.exports=d}],["bcrypto","/lib/internal/custom-browser.js",function(e,t,r,i,s,n){"use strict";e.custom="inspect"}],["bsigner","/lib/signer.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(2,r),a=__browser_require__(14,r),h=__browser_require__(56,r),c=__browser_require__(19,r),u=__browser_require__(61,r),f=__browser_require__(63,r),l=__browser_require__(378,r),d=__browser_require__(748,r),{AVAILABLE_VENDORS:p,vendors:b,parseVendors:g}=__browser_require__(1,r),m={[b.LEDGER]:f,[b.TREZOR]:l,[b.MEMORY]:d};class _{constructor(e){this.network=a.primary,this.logger=h.global,this.enabledVendors=new Set(p),this.vendorManagerOptions=new Map,this.fromOptions(e||{})}fromOptions(e){o(e),null!=e.network&&(this.network=a.get(e.network)),null!=e.logger&&(o("object"==typeof e.logger),this.logger=e.logger.context("signer")),null!=e.vendor&&(this.enabledVendors=g(e.vendor));for(const t of this.enabledVendors.values())this.vendorManagerOptions.set(t,{network:this.network,logger:this.logger,...e[t]});return this}static fromOptions(e){return(new this).fromOptions(e)}}function w(e){return`${e.vendor}:${e.handle}`}r.exports=class extends c{constructor(e){super(),this.opened=!1,this.options=new _(e),this.network=this.options.network,this.logger=this.options.logger,this.enabledVendors=this.options.enabledVendors,this.deviceManagers=new Map,this.cachedDevices=new Map,this.selected=null,this.init()}init(){for(const e of this.enabledVendors){const t=this.options.vendorManagerOptions.get(e),r=new m[e](t);this.deviceManagers.set(e,r)}}bind(){const e=e=>{const t=w(e);o(!this.cachedDevices.has(t),"Already have device for the handle."),this.logger.debug("Device connected: ",e),this.cachedDevices.set(t,e),this.emit("connect",e)},t=e=>{const t=w(e);this.logger.debug("Device disconnected: ",e),this.cachedDevices.delete(t),this.emit("disconnect",e)},r=e=>{this.selected=e,this.logger.debug("Device was selected: ",e),this.emit("select",e)},i=e=>{e===this.selected&&(this.logger.debug("Device was deselected: ",e),this.selected=null),this.emit("deselect",e)};for(const s of this.deviceManagers.values())s.on("connect",e),s.on("disconnect",t),s.on("select",r),s.on("deselect",i)}async selectDevice(e,t){if(!t&&e instanceof u&&(e=(t=e).vendor),!this.deviceManagers.has(e))throw new Error(`Vendor "${e}" not found or not enabled.`);if(t&&e!==t.vendor)throw new Error("Vendor for manager and device does not match.");return this.selected&&this.selected.vendor!==e&&await this.deviceManagers.get(this.selected.vendor).deselectDevice(),await this.deviceManagers.get(e).selectDevice(t)}async deselectDevice(){if(!this.selected)return!1;const e=this.selected.vendor;return this.deviceManagers.get(e).deselectDevice()}async open(){o(!this.opened,"Already opened."),this.opened=!0,this.bind();for(const e of this.deviceManagers.values())await e.open()}async close(){o(this.opened,"Not open."),this.opened=!1;for(const e of this.deviceManagers.values())await e.close()}async getPublicKey(e,t=!0){return o(this.selected,"Device was not selected."),this.selected.getPublicKey(e,t)}async getXPUB(e){return o(this.selected,"Device was not selected."),this.selected.getXPUB(e)}async signTransaction(e,t){return o(this.selected,"Device was not selected."),this.selected.signTransaction(e,t)}async getSignatures(e,t){return o(this.selected,"Device was not selected."),this.selected.getSignatures(e,t)}async signMessage(e,t){return o(this.selected,"Device was not selected."),this.selected.signMessage(e,t)}static fromOptions(e){return new this(e)}}}],["bcoin","/lib/protocol/network.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(16,r),h=__browser_require__(9,r),c=__browser_require__(17,r),u=__browser_require__(18,r),{inspectSymbol:f}=__browser_require__(21,r);class l{constructor(e){o(!l[e.type],"Cannot create two networks."),this.type=e.type,this.seeds=e.seeds,this.magic=e.magic,this.port=e.port,this.checkpointMap=e.checkpointMap,this.lastCheckpoint=e.lastCheckpoint,this.checkpoints=[],this.halvingInterval=e.halvingInterval,this.genesis=e.genesis,this.genesisBlock=e.genesisBlock,this.pow=e.pow,this.block=e.block,this.bip30=e.bip30,this.activationThreshold=e.activationThreshold,this.minerWindow=e.minerWindow,this.deployments=e.deployments,this.deploys=e.deploys,this.unknownBits=~c.VERSION_TOP_MASK,this.keyPrefix=e.keyPrefix,this.addressPrefix=e.addressPrefix,this.requireStandard=e.requireStandard,this.rpcPort=e.rpcPort,this.walletPort=e.walletPort,this.minRelay=e.minRelay,this.feeRate=e.feeRate,this.maxFeeRate=e.maxFeeRate,this.selfConnect=e.selfConnect,this.requestMempool=e.requestMempool,this.time=new u,this.init()}init(){let e=0;for(const t of this.deploys)e|=1<<t.bit;e|=c.VERSION_TOP_MASK,this.unknownBits=~e>>>0;for(const e of Object.keys(this.checkpointMap)){const t=this.checkpointMap[e],r=Number(e);this.checkpoints.push({hash:t,height:r})}this.checkpoints.sort(p)}byBit(e){const t=a.search(this.deploys,e,d);return-1===t?null:this.deploys[t]}now(){return this.time.now()}ms(){return this.time.ms()}static create(e){if("string"==typeof e&&(e=h[e]),o(e,"Unknown network."),l[e.type])return l[e.type];const t=new l(e);return l[t.type]=t,l.primary||(l.primary=t),t}static set(e){return o("string"==typeof e,"Bad network."),l.primary=l.get(e),l.type=e,l.primary}static get(e){if(!e)return o(l.primary,"No default network."),l.primary;if(e instanceof l)return e;if("string"==typeof e)return l.create(e);throw new Error("Unknown network.")}static ensure(e){return e?e instanceof l?e:"string"==typeof e&&h[e]?l.create(e):(o(l.primary,"No default network."),l.primary):(o(l.primary,"No default network."),l.primary)}static by(e,t,r,i){if(r){if(t(r=l.get(r),e))return r;throw new Error(`Network mismatch for ${i}.`)}for(const i of h.types)if(t(r=h[i],e))return l.get(i);throw new Error(`Network not found for ${i}.`)}static fromMagic(e,t){return l.by(e,b,t,"magic number")}static fromWIF(e,t){return l.by(e,g,t,"WIF")}static fromPublic(e,t){return l.by(e,m,t,"xpubkey")}static fromPrivate(e,t){return l.by(e,_,t,"xprivkey")}static fromPublic58(e,t){return l.by(e,w,t,"xpubkey")}static fromPrivate58(e,t){return l.by(e,y,t,"xprivkey")}static fromAddress(e,t){return l.by(e,v,t,"base58 address")}static fromBech32(e,t){return l.by(e,E,t,"bech32 address")}toString(){return this.type}[f](){return`<Network: ${this.type}>`}static isNetwork(e){return e instanceof l}}function d(e,t){return e.bit-t}function p(e,t){return e.height-t.height}function b(e,t){return e.magic===t}function g(e,t){return e.keyPrefix.privkey===t}function m(e,t){return e.keyPrefix.xpubkey===t}function _(e,t){return e.keyPrefix.xprivkey===t}function w(e,t){return e.keyPrefix.xpubkey58===t}function y(e,t){return e.keyPrefix.xprivkey58===t}function v(e,t){const r=e.addressPrefix;switch(t){case r.pubkeyhash:case r.scripthash:case r.witnesspubkeyhash:case r.witnessscripthash:return!0}return!1}function E(e,t){return e.addressPrefix.bech32===t}l.primary=null,l.type=null,l.main=null,l.testnet=null,l.regtest=null,l.segnet4=null,l.simnet=null,l.set(process.env.BCOIN_NETWORK||"main"),r.exports=l}],["bsert","/lib/assert.js",function(e,t,r,i,s,n){"use strict";class o extends Error{constructor(e){"string"==typeof e&&(e={message:e}),null!==e&&"object"==typeof e||(e={});let t=null,r="fail",i=Boolean(e.generatedMessage);var s;if(null!=e.message&&(t="string"==typeof(s=e.message)?s:I(s)?m(s):g(s)),"string"==typeof e.operator&&(r=e.operator),null==t){if("fail"===r)t="Assertion failed.";else{t=`${g(e.actual)} ${r} ${g(e.expected)}`}i=!0}super(t);let n=this.constructor;"function"==typeof e.stackStartFunction?n=e.stackStartFunction:"function"==typeof e.stackStartFn&&(n=e.stackStartFn),this.type="AssertionError",this.name="AssertionError [ERR_ASSERTION]",this.code="ERR_ASSERTION",this.generatedMessage=i,this.actual=e.actual,this.expected=e.expected,this.operator=r,Error.captureStackTrace&&Error.captureStackTrace(this,n)}}function a(e,t){if(!e){let r=!1;if(0===arguments.length)t="No value argument passed to `assert()`.",r=!0;else if(null==t)t="Assertion failed.",r=!0;else if(I(t))throw t;throw new o({message:t,actual:e,expected:!0,operator:"==",generatedMessage:r,stackStartFn:a})}}function h(e,t,r){if(!Object.is(e,t)){if(I(r))throw r;throw new o({message:r,actual:e,expected:t,operator:"strictEqual",stackStartFn:h})}}function c(e,t,r){if(Object.is(e,t)){if(I(r))throw r;throw new o({message:r,actual:e,expected:t,operator:"notStrictEqual",stackStartFn:c})}}function u(e,t,r){"string"==typeof t&&(r=t,t=undefined);let i=!1,s=null;b("function"==typeof e,"func","function");try{e()}catch(e){i=!0,s=e}if(i){if(_(s,t,r,u)){let e=!1;throw null==r&&(r="Got unwanted exception.",e=!0),new o({message:r,actual:s,expected:t,operator:"doesNotThrow",generatedMessage:e,stackStartFn:u})}throw s}}async function f(e,t,r){"string"==typeof t&&(r=t,t=undefined);let i=!1,s=null;"function"!=typeof e&&b(A(e),"func","promise");try{A(e)?await e:await e()}catch(e){i=!0,s=e}if(!i){let e=!1;throw null==r&&(r="Missing expected rejection.",e=!0),new o({message:r,actual:undefined,expected:t,operator:"rejects",generatedMessage:e,stackStartFn:f})}if(!_(s,t,r,f))throw s}async function l(e,t,r){"string"==typeof t&&(r=t,t=undefined);let i=!1,s=null;"function"!=typeof e&&b(A(e),"func","promise");try{A(e)?await e:await e()}catch(e){i=!0,s=e}if(i){if(_(s,t,r,l)){let e=!1;throw null==r&&(r="Got unwanted rejection.",e=!0),new o({message:r,actual:undefined,expected:t,operator:"doesNotReject",generatedMessage:e,stackStartFn:l})}throw s}}function d(e,t,r){if(!w(e,t,!1)){if(I(r))throw r;throw new o({message:r,actual:e,expected:t,operator:"deepStrictEqual",stackStartFn:d})}}function p(e,t,r){if(w(e,t,!0)){if(I(r))throw r;throw new o({message:r,actual:e,expected:t,operator:"notDeepStrictEqual",stackStartFn:p})}}function b(e,t,r){if(!e){let e;e=null==t?"Invalid type for parameter.":null==r?`Invalid type for "${t}".`:`"${t}" must be a(n) ${r}.`;const i=new TypeError(e);throw Error.captureStackTrace&&Error.captureStackTrace(i,b),i}}function g(e){switch(typeof e){case"undefined":return"undefined";case"object":return null===e?"null":`[${function(e){const t=function(e){return E(e).slice(8,-1)}(e);if(null==e)return t;if("Object"!==t&&"Error"!==t)return t;let r,i;try{r=e.constructor}catch(e){}if(null==r)return t;try{i=r.name}catch(e){return t}return"string"!=typeof i||0===i.length?t:i}(e)}]`;case"boolean":case"number":return`${e}`;case"string":return e.length>80&&(e=`${e.substring(0,77)}...`),JSON.stringify(e);case"symbol":return m(e);case"function":return`[${function(e){let t;try{t=e.name}catch(e){}return"string"!=typeof t||0===t.length?"Function":`Function: ${t}`}(e)}]`;case"bigint":return`${e}n`;default:return`[${typeof e}]`}}function m(e){try{return String(e)}catch(e){return"Object"}}function _(e,t,r,i){if(null==t)return!0;if(O(t))return t.test(e);if("function"!=typeof t){if(i===u||i===l)throw new TypeError('"expected" must not be an object.');if("object"!=typeof t)throw new TypeError('"expected" must be an object.');let s=!1;if(null==r){r=`Missing expected ${i===f?"rejection":"exception"}.`,s=!0}if(null==e||"object"!=typeof e)throw new o({actual:e,expected:t,message:r,operator:i.name,generatedMessage:s,stackStartFn:i});const n=Object.keys(t);if(I(t)&&n.push("name","message"),0===n.length)throw new TypeError('"expected" may not be an empty object.');for(const a of n){const n=t[a],h=e[a];if(("string"!=typeof h||!O(n)||!n.test(h))&&!(a in e&&w(h,n,!1)))throw new o({actual:e,expected:t,message:r,operator:i.name,generatedMessage:s,stackStartFn:i})}return!0}return t.prototype!==undefined&&e instanceof t||!Error.isPrototypeOf(t)&&!0===t.call({},e)}function w(e,t,r){try{return y(e,t,null)}catch(e){return r}}function y(e,t,r){if(Object.is(e,t))return!0;if(!k(e)||!k(t))return!1;if(E(e)!==E(t))return!1;if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(S(e)&&S(t))return e.equals(t);if(e instanceof Date)return Object.is(e.getTime(),t.getTime());if(O(e))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(I(e)&&e.message!==t.message)return!1;if(function(e){return e instanceof ArrayBuffer}(e)&&(e=new Uint8Array(e),t=new Uint8Array(t)),function(e){return ArrayBuffer.isView(e)}(e)&&!S(e)){if(S(t))return!1;const r=new Uint8Array(e.buffer),i=new Uint8Array(t.buffer);if(r.length!==i.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==i[e])return!1;return!0}if(function(e){return e instanceof Set}(e)){if(e.size!==t.size)return!1;return new Set([...e,...t]).size===e.size}if(r){const i=r.a.get(e);if(null!=i){const e=r.b.get(t);if(null!=e)return i===e}r.p+=1}else r={a:new Map,b:new Map,p:0};r.a.set(e,r.p),r.b.set(t,r.p);const i=function(e,t,r){if(i=e,i instanceof Map){if(e.size!==t.size)return!1;const i=new Set([...e.keys(),...t.keys()]);if(i.size!==e.size)return!1;for(const s of i)if(!y(e.get(s),t.get(s),r))return!1;return!0}var i;if(function(e){return Array.isArray(e)}(e)){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!y(e[i],t[i],r))return!1;return!0}const s=v(e),n=v(t);if(s.length!==n.length)return!1;const o=new Set([...s,...n]);if(o.size!==s.length)return!1;for(const i of o)if(!y(e[i],t[i],r))return!1;return!0}(e,t,r);return r.a.delete(e),r.b.delete(t),i}function v(e){const t=Object.keys(e);if(!Object.getOwnPropertySymbols)return t;if(!Object.getOwnPropertyDescriptor)return t;const r=Object.getOwnPropertySymbols(e);for(const i of r){const r=Object.getOwnPropertyDescriptor(e,i);r&&r.enumerable&&t.push(i)}return t}function E(e){if(e===undefined)return"[object Undefined]";if(null===e)return"[object Null]";try{return Object.prototype.toString.call(e)}catch(e){return"[object Object]"}}function S(e){return k(e)&&"function"==typeof e.writeUInt32LE&&"function"==typeof e.equals}function I(e){return e instanceof Error}function k(e){return e&&"object"==typeof e}function A(e){return e instanceof Promise}function O(e){return e instanceof RegExp}function x(e){if("string"!=typeof e)return!1;switch(e){case"ascii":case"binary":case"base64":case"hex":case"latin1":case"ucs2":case"utf8":case"utf16le":return!0}return!1}function R(e,t,r){if("string"==typeof t){if(!S(e))return null;const{constructor:i}=e;if(!i||"function"!=typeof i.from)return null;if(!x(r))return null;if("hex"===r&&1&t.length)return null;const s=i.from(t,r);return"hex"===r&&s.length!==t.length>>>1?null:s}return t}a.AssertionError=o,a.assert=a,a.strict=a,a.ok=a,a.equal=h,a.notEqual=c,a.strictEqual=h,a.notStrictEqual=c,a.fail=function e(t){let r=!1;if(I(t))throw t;throw null==t&&(t="Assertion failed.",r=!0),new o({message:t,actual:!1,expected:!0,operator:"fail",generatedMessage:r,stackStartFn:e})},a.throws=function e(t,r,i){"string"==typeof r&&(i=r,r=undefined);let s=!1,n=null;b("function"==typeof t,"func","function");try{t()}catch(e){s=!0,n=e}if(!s){let t=!1;throw null==i&&(i="Missing expected exception.",t=!0),new o({message:i,actual:undefined,expected:r,operator:"throws",generatedMessage:t,stackStartFn:e})}if(!_(n,r,i,e))throw n},a.doesNotThrow=u,a.rejects=f,a.doesNotReject=l,a.ifError=function e(t){if(null!=t){let r="ifError got unwanted exception: ";throw"object"==typeof t&&"string"==typeof t.message?0===t.message.length&&t.constructor?r+=t.constructor.name:r+=t.message:r+=g(t),new o({message:r,actual:t,expected:null,operator:"ifError",generatedMessage:!0,stackStartFn:e})}},a.deepEqual=d,a.notDeepEqual=p,a.deepStrictEqual=d,a.notDeepStrictEqual=p,a.bufferEqual=function e(t,r,i,s){if(x(i)||(s=i,i=null),null==i&&(i="hex"),r=R(t,r,i),b(S(t),"actual","buffer"),b(S(r),"expected","buffer"),t!==r&&!t.equals(r)){if(I(s))throw s;throw new o({message:s,actual:t.toString(i),expected:r.toString(i),operator:"bufferEqual",stackStartFn:e})}},a.notBufferEqual=function e(t,r,i,s){if(x(i)||(s=i,i=null),null==i&&(i="hex"),r=R(t,r,i),b(S(t),"actual","buffer"),b(S(r),"expected","buffer"),t===r||t.equals(r)){if(I(s))throw s;throw new o({message:s,actual:t.toString(i),expected:r.toString(i),operator:"notBufferEqual",stackStartFn:e})}},a.enforce=b,a.range=function e(t,r){if(!t){const t=null!=r?`"${r}" is out of range.`:"Parameter is out of range.",i=new RangeError(t);throw Error.captureStackTrace&&Error.captureStackTrace(i,e),i}},r.exports=a}],["bcoin","/lib/utils/binary.js",function(e,t,r,i,s,n){"use strict";e.search=function(e,t,r,i){let s=0,n=e.length-1;for(;s<=n;){const i=s+n>>>1,o=r(e[i],t);if(0===o)return i;o<0?s=i+1:n=i-1}return i?s:-1},e.insert=function(t,r,i,s){const n=e.search(t,r,i,!0);return s&&n<t.length&&0===i(t[n],r)?-1:(0===n?t.unshift(r):n===t.length?t.push(r):t.splice(n,0,r),n)},e.remove=function(t,r,i){const s=e.search(t,r,i,!1);return-1!==s&&(function(e,t){if(0===t)return void e.shift();let r=t+1;for(;r<e.length;)e[t++]=e[r++];e.pop()}(t,s),!0)}}],["bcoin","/lib/protocol/consensus.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(10,r);e.COIN=1e8,e.MAX_MONEY=21e6*e.COIN,e.BASE_REWARD=50*e.COIN,e.HALF_REWARD=Math.floor(e.BASE_REWARD/2),e.MAX_BLOCK_SIZE=1e6,e.MAX_RAW_BLOCK_SIZE=4e6,e.MAX_BLOCK_WEIGHT=4e6,e.MAX_BLOCK_SIGOPS=2e4,e.MAX_BLOCK_SIGOPS_COST=8e4,e.MEDIAN_TIMESPAN=11,e.VERSION_TOP_BITS=536870912,e.VERSION_TOP_MASK=3758096384,e.COINBASE_MATURITY=100,e.WITNESS_SCALE_FACTOR=4,e.LOCKTIME_THRESHOLD=5e8,e.SEQUENCE_DISABLE_FLAG=1<<31>>>0,e.SEQUENCE_TYPE_FLAG=1<<22,e.SEQUENCE_GRANULARITY=9,e.SEQUENCE_MASK=65535,e.MAX_SCRIPT_SIZE=1e4,e.MAX_SCRIPT_STACK=1e3,e.MAX_SCRIPT_PUSH=520,e.MAX_SCRIPT_OPS=201,e.MAX_MULTISIG_PUBKEYS=20,e.BIP16_TIME=1333238400,e.ZERO_HASH=Buffer.alloc(32,0),e.fromCompact=function(e){if(0===e)return new a(0);const t=e>>>24,r=e>>>23&1;let i,s=8388607&e;return t<=3?i=new a(s>>>=8*(3-t)):(i=new a(s)).iushln(8*(t-3)),r&&i.ineg(),i},e.toCompact=function(e){if(e.isZero())return 0;let t,r=e.byteLength();r<=3?(t=e.toNumber(),t<<=8*(3-r)):t=e.ushrn(8*(r-3)).toNumber(),8388608&t&&(t>>=8,r++);let i=r<<24|t;return e.isNeg()&&(i|=8388608),i>>>=0},e.verifyPOW=function(t,r){const i=e.fromCompact(r);return!i.isNeg()&&!i.isZero()&&(!(i.bitLength()>256)&&!new a(t,"le").gt(i))},e.getReward=function(t,r){o(t>=0,"Bad height for reward.");const i=Math.floor(t/r);return i>=33?0:0===i?e.BASE_REWARD:e.HALF_REWARD>>>i-1},e.hasBit=function(t,r){return(t&e.VERSION_TOP_MASK)>>>0===e.VERSION_TOP_BITS&&0!=(t&1<<r)}}],["bcoin","/lib/protocol/timedata.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(19,r),a=__browser_require__(20,r),h=__browser_require__(16,r);function c(e,t){return e-t}r.exports=class extends o{constructor(e){super(),null==e&&(e=200),this.samples=[],this.known=new Map,this.limit=e,this.offset=0,this.checked=!1}add(e,t){if(this.samples.length>=this.limit)return;if(this.known.has(e))return;const r=t-a.now();if(this.known.set(e,r),h.insert(this.samples,r,c),this.emit("sample",r,this.samples.length),this.samples.length>=5&&this.samples.length%2==1){let e=this.samples[this.samples.length>>>1];if(Math.abs(e)>=4200){if(!this.checked){let e=!1;for(const t of this.samples)if(0!==t&&Math.abs(t)<300){e=!0;break}e||(this.checked=!0,this.emit("mismatch"))}e=0}this.offset=e,this.emit("offset",this.offset)}}now(){return a.now()+this.offset}adjust(e){return e+this.offset}local(e){return e-this.offset}ms(){return Date.now()+1e3*this.offset}}}],["bpkg","/lib/builtins/events.js",function(e,t,r,i,s,n){"use strict";var o,a="object"==typeof Reflect?Reflect:null,h=a&&"function"==typeof a.apply?a.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};o=a&&"function"==typeof a.ownKeys?a.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var c=Number.isNaN||function(e){return e!=e};function u(){u.init.call(this)}r.exports=u,u.EventEmitter=u,u.prototype._events=undefined,u.prototype._eventsCount=0,u.prototype._maxListeners=undefined;var f=10;function l(e){return e._maxListeners===undefined?u.defaultMaxListeners:e._maxListeners}function d(e,t,r,i){var s,n,o,a;if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r);if((n=e._events)===undefined?(n=e._events=Object.create(null),e._eventsCount=0):(n.newListener!==undefined&&(e.emit("newListener",t,r.listener?r.listener:r),n=e._events),o=n[t]),o===undefined)o=n[t]=r,++e._eventsCount;else if("function"==typeof o?o=n[t]=i?[r,o]:[o,r]:i?o.unshift(r):o.push(r),(s=l(e))>0&&o.length>s&&!o.warned){o.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=e,h.type=t,h.count=o.length,a=h,console&&console.warn&&console.warn(a)}return e}function p(e,t,r){var i={fired:!1,wrapFn:undefined,target:e,type:t,listener:r},s=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,h(this.listener,this.target,e))}.bind(i);return s.listener=r,i.wrapFn=s,s}function b(e,t,r){var i=e._events;if(i===undefined)return[];var s=i[t];return s===undefined?[]:"function"==typeof s?r?[s.listener||s]:[s]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(s):m(s,s.length)}function g(e){var t=this._events;if(t!==undefined){var r=t[e];if("function"==typeof r)return 1;if(r!==undefined)return r.length}return 0}function m(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(e){if("number"!=typeof e||e<0||c(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");f=e}}),u.init=function(){this._events!==undefined&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||undefined},u.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||c(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},u.prototype.getMaxListeners=function(){return l(this)},u.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,s=this._events;if(s!==undefined)i=i&&s.error===undefined;else if(!i)return!1;if(i){var n;if(t.length>0&&(n=t[0]),n instanceof Error)throw n;var o=new Error("Unhandled error."+(n?" ("+n.message+")":""));throw o.context=n,o}var a=s[e];if(a===undefined)return!1;if("function"==typeof a)h(a,this,t);else{var c=a.length,u=m(a,c);for(r=0;r<c;++r)h(u[r],this,t)}return!0},u.prototype.addListener=function(e,t){return d(this,e,t,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(e,t){return d(this,e,t,!0)},u.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,p(this,e,t)),this},u.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,p(this,e,t)),this},u.prototype.removeListener=function(e,t){var r,i,s,n,o;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if((i=this._events)===undefined)return this;if((r=i[e])===undefined)return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(s=-1,n=r.length-1;n>=0;n--)if(r[n]===t||r[n].listener===t){o=r[n].listener,s=n;break}if(s<0)return this;0===s?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,s),1===r.length&&(i[e]=r[0]),i.removeListener!==undefined&&this.emit("removeListener",e,o||t)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(e){var t,r,i;if((r=this._events)===undefined)return this;if(r.removeListener===undefined)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):r[e]!==undefined&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var s,n=Object.keys(r);for(i=0;i<n.length;++i)"removeListener"!==(s=n[i])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t!==undefined)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},u.prototype.listeners=function(e){return b(this,e,!0)},u.prototype.rawListeners=function(e){return b(this,e,!1)},u.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},u.prototype.listenerCount=g,u.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]}}],["bcoin","/lib/utils/util.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=e;a.bench=function(e){if(!process.hrtime){const t=Date.now();if(e){const[r,i]=e;return t-(1e3*r+i/1e6)}const r=t%1e3;return[(t-r)/1e3,1e6*r]}if(e){const[t,r]=process.hrtime(e);return 1e3*t+r/1e6}return process.hrtime()},a.now=function(){return Math.floor(Date.now()/1e3)},a.ms=function(){return Date.now()},a.date=function(e){return null==e&&(e=a.now()),new Date(1e3*e).toISOString().slice(0,-5)+"Z"},a.time=function(e){return null==e?a.now():new Date(e)/1e3|0},a.revHex=function(e){return o(null!=e&&!0===e._isBuffer),Buffer.from(e).reverse().toString("hex")},a.fromRev=function(e){return o("string"==typeof e),o(0==(1&e.length)),Buffer.from(e,"hex").reverse()}}],["bcoin","/lib/utils/index.js",function(e,t,r,i,s,n){"use strict";e.binary=__browser_require__(16,r),e.fixed=__browser_require__(22,r),e.util=__browser_require__(20,r),e.message=__browser_require__(23,r);const{inspect:{custom:o}}=__browser_require__(55,r);e.inspectSymbol=o||"inspect"}],["bcoin","/lib/utils/fixed.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r);function a(e){switch(e){case 0:return 1;case 1:return 10;case 2:return 100;case 3:return 1e3;case 4:return 1e4;case 5:return 1e5;case 6:return 1e6;case 7:return 1e7;case 8:return 1e8}throw new Error("Exponent is too large.")}e.encode=function(e,t){o(Number.isSafeInteger(e),"Invalid integer value.");let r="";e<0&&(e=-e,r="-");const i=a(t);let s=e%i,n=(e-s)/i;for(s=s.toString(10),n=n.toString(10);s.length<t;)s="0"+s;return s=s.replace(/0+$/,""),o(s.length<=t,"Invalid integer value."),0===s.length&&(s="0"),0===t?`${r}${n}`:`${r}${n}.${s}`},e.decode=function(e,t){o("string"==typeof e),o(e.length<=32,"Fixed number string too large.");let r=1;e.length>0&&"-"===e[0]&&(e=e.substring(1),r=-1);let i=e,s="0";const n=e.indexOf(".");for(-1!==n&&(i=e.substring(0,n),s=e.substring(n+1)),i=i.replace(/^0+/,""),s=s.replace(/0+$/,""),o(i.length<=16-t,"Fixed number string exceeds 2^53-1."),o(s.length<=t,"Too many decimal places in fixed number string."),0===i.length&&(i="0");s.length<t;)s+="0";0===s.length&&(s="0"),o(/^\d+$/.test(i)&&/^\d+$/.test(s),"Non-numeric characters in fixed number string."),i=parseInt(i,10),s=parseInt(s,10);const h=a(t),c=function(e){switch(e){case 1:return 0;case 10:return 1;case 100:return 91;case 1e3:case 1e4:return 991;case 1e5:return 40991;case 1e6:return 740991;case 1e7:return 4740991;case 1e8:return 54740991}throw new Error("Exponent is too large.")}(h),u=function(e){switch(e){case 1:return 9007199254740991;case 10:return 900719925474099;case 100:return 90071992547409;case 1e3:return 9007199254740;case 1e4:return 900719925474;case 1e5:return 90071992547;case 1e6:return 9007199254;case 1e7:return 900719925;case 1e8:return 90071992}throw new Error("Exponent is too large.")}(h);return o(i<u||i===u&&s<=c,"Fixed number string exceeds 2^53-1."),r*(i*h+s)},e.toFloat=function(t,r){return parseFloat(e.encode(t,r))},e.fromFloat=function(t,r){return o("number"==typeof t&&isFinite(t)),o(Number.isSafeInteger(r)),e.decode(t.toFixed(r),r)}}],["bcoin","/lib/utils/message.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(33,r),c=__browser_require__(38,r),u=e;u.MAGIC_STRING="Bitcoin Signed Message:\n",u.magicHash=((e,t=u.MAGIC_STRING)=>{o("string"==typeof t,"prefix must be a string."),o("string"==typeof e,"message must be a string");const r=a.write();return r.writeVarString(t),r.writeVarString(e,"utf8"),h.digest(r.render())}),u.sign=((e,t,r)=>{o(t.getPrivateKey(),"Cannot sign without private key.");const i=u.magicHash(e,r),s=4!==t.getPublicKey().readInt8(0),[n,h]=c.signRecoverable(i,t.getPrivateKey()),f=a.write();return f.writeI8(h+27+(s?4:0)),f.writeBytes(n),f.render()}),u.recover=((e,t,r)=>{o("string"==typeof e,"msg must be a string"),o(null!=t&&!0===t._isBuffer,"sig must be a buffer");const i=u.magicHash(e,r);o.strictEqual(t.length,65,"Invalid signature length");const s=t.readUInt8(0)-27;o(s<8,"Invalid signature parameter");const n=Boolean(4&s),a=3&s;return c.recover(i,t.slice(1),a,n)})}],["bufio","/lib/bufio.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(25,r),a=__browser_require__(26,r),h=__browser_require__(27,r),c=__browser_require__(28,r),u=__browser_require__(29,r),f=__browser_require__(30,r),l=__browser_require__(31,r),d=__browser_require__(32,r);function p(e,t){return function(r,i){if(h(null!=r&&!0===r._isBuffer,"data","buffer"),h(i>>>0===i,"off","integer"),i+t>r.length)throw new c(i,"Out of bounds read");return e(r,i)}}function b(e){return function(t,r,i){if(h(null!=t&&!0===t._isBuffer,"data","buffer"),h(r>>>0===r,"off","integer"),h(i>>>0===i,"len","integer"),r+i>t.length)throw new c(r,"Out of bounds read");return e(t,r,i)}}function g(e){return function(t,r){return h(null!=t&&!0===t._isBuffer,"data","buffer"),h(r>>>0===r,"off","integer"),e(t,r)}}function m(e,t){return function(r,i,s){if(h(null!=r&&!0===r._isBuffer,"data","buffer"),h(s>>>0===s,"off","integer"),s+t>r.length)throw new c(s,"Out of bounds write");return e(r,i,s)}}function _(e){return function(t,r,i,s){if(h(null!=t&&!0===t._isBuffer,"data","buffer"),h(i>>>0===i,"off","integer"),h(s>>>0===s,"len","integer"),i+s>t.length)throw new c(i,"Out of bounds write");return e(t,r,i,s)}}function w(e,t){return function(r,i,s){if(h(null!=r&&!0===r._isBuffer,"data","buffer"),h(s>>>0===s,"off","integer"),s+t(i)>r.length)throw new c(s,"Out of bounds write");return e(r,i,s)}}e.custom=o,e.encoding=a,e.EncodingError=c,e.BufferReader=u,e.BufferWriter=f,e.StaticWriter=l,e.Struct=d,e.read=function(e,t){return new u(e,t)},e.write=function(e){return null!=e?new l(e):new f},e.pool=function(e){return l.pool(e)},e.readU=b(a.readU),e.readU64=p(a.readU64,8),e.readU56=p(a.readU56,7),e.readU48=p(a.readU48,6),e.readU40=p(a.readU40,5),e.readU32=p(a.readU32,4),e.readU24=p(a.readU24,3),e.readU16=p(a.readU16,2),e.readU8=p(a.readU8,1),e.readUBE=b(a.readUBE),e.readU64BE=p(a.readU64BE,8),e.readU56BE=p(a.readU56BE,7),e.readU48BE=p(a.readU48BE,6),e.readU40BE=p(a.readU40BE,5),e.readU32BE=p(a.readU32BE,4),e.readU24BE=p(a.readU24BE,3),e.readU16BE=p(a.readU16BE,2),e.readI=b(a.readI),e.readI64=p(a.readI64,8),e.readI56=p(a.readI56,7),e.readI48=p(a.readI48,6),e.readI40=p(a.readI40,5),e.readI32=p(a.readI32,4),e.readI24=p(a.readI24,3),e.readI16=p(a.readI16,2),e.readI8=p(a.readI8,1),e.readIBE=b(a.readIBE),e.readI64BE=p(a.readI64BE,8),e.readI56BE=p(a.readI56BE,7),e.readI48BE=p(a.readI48BE,6),e.readI40BE=p(a.readI40BE,5),e.readI32BE=p(a.readI32BE,4),e.readI24BE=p(a.readI24BE,3),e.readI16BE=p(a.readI16BE,2),e.readFloat=p(a.readFloat,4),e.readFloatBE=p(a.readFloatBE,4),e.readDouble=p(a.readDouble,8),e.readDoubleBE=p(a.readDoubleBE,8),e.writeU=_(a.writeU),e.writeU64=m(a.writeU64,8),e.writeU56=m(a.writeU56,7),e.writeU48=m(a.writeU48,6),e.writeU40=m(a.writeU40,5),e.writeU32=m(a.writeU32,4),e.writeU24=m(a.writeU24,3),e.writeU16=m(a.writeU16,2),e.writeU8=m(a.writeU8,1),e.writeUBE=_(a.writeUBE),e.writeU64BE=m(a.writeU64BE,8),e.writeU56BE=m(a.writeU56BE,7),e.writeU48BE=m(a.writeU48BE,6),e.writeU40BE=m(a.writeU40BE,5),e.writeU32BE=m(a.writeU32BE,4),e.writeU24BE=m(a.writeU24BE,3),e.writeU16BE=m(a.writeU16BE,2),e.writeI=_(a.writeI),e.writeI64=m(a.writeI64,8),e.writeI56=m(a.writeI56,7),e.writeI48=m(a.writeI48,6),e.writeI40=m(a.writeI40,5),e.writeI32=m(a.writeI32,4),e.writeI24=m(a.writeI24,3),e.writeI16=m(a.writeI16,2),e.writeI8=m(a.writeI8,1),e.writeIBE=_(a.writeIBE),e.writeI64BE=m(a.writeI64BE,8),e.writeI56BE=m(a.writeI56BE,7),e.writeI48BE=m(a.writeI48BE,6),e.writeI40BE=m(a.writeI40BE,5),e.writeI32BE=m(a.writeI32BE,4),e.writeI24BE=m(a.writeI24BE,3),e.writeI16BE=m(a.writeI16BE,2),e.writeFloat=m(a.writeFloat,4),e.writeFloatBE=m(a.writeFloatBE,4),e.writeDouble=m(a.writeDouble,8),e.writeDoubleBE=m(a.writeDoubleBE,8),e.readVarint=g(a.readVarint),e.writeVarint=w(a.writeVarint,a.sizeVarint),e.sizeVarint=a.sizeVarint,e.readVarint2=g(a.readVarint2),e.writeVarint2=w(a.writeVarint2,a.sizeVarint2),e.sizeVarint2=a.sizeVarint2,e.sliceBytes=a.sliceBytes,e.readBytes=a.readBytes,e.writeBytes=a.writeBytes,e.readString=a.readString,e.writeString=a.writeString,e.realloc=a.realloc,e.copy=a.copy,e.concat=a.concat,e.sizeVarBytes=a.sizeVarBytes,e.sizeVarlen=a.sizeVarlen,e.sizeVarString=a.sizeVarString}],["bufio","/lib/custom-browser.js",function(e,t,r,i,s,n){"use strict";e.custom="inspect"}],["bufio","/lib/encoding.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(27,r),a=__browser_require__(28,r),h=1/4294967296,{MAX_SAFE_INTEGER:c}=Number,u=new Float32Array(1),f=new Uint8Array(u.buffer),l=new Float64Array(1),d=new Uint8Array(l.buffer);u[0]=-1;const p=0===f[3];function b(e,t){const r=w(e,t+4),i=w(e,t);return Te(0==(4292870144&r),t,"Number exceeds 2^53-1"),4294967296*r+i}function g(e,t){const r=y(e,t+4),i=w(e,t);return Te(0==(4292870144&r),t,"Number exceeds 2^53-1"),4294967296*r+i}function m(e,t){return e[t++]+256*e[t++]+65536*e[t++]+16777216*e[t++]+4294967296*e[t++]+1099511627776*e[t]}function _(e,t){return e[t++]+256*e[t++]+65536*e[t++]+16777216*e[t++]+4294967296*e[t]}function w(e,t){return e[t++]+256*e[t++]+65536*e[t++]+16777216*e[t]}function y(e,t){return e[t++]+256*e[t++]+65536*e[t]}function v(e,t){return e[t++]+256*e[t]}function E(e,t){return e[t]}function S(e,t){const r=O(e,t),i=O(e,t+4);return Te(0==(4292870144&r),t,"Number exceeds 2^53-1"),4294967296*r+i}function I(e,t){const r=x(e,t),i=O(e,t+3);return Te(0==(4292870144&r),t,"Number exceeds 2^53-1"),4294967296*r+i}function k(e,t){return 1099511627776*e[t++]+4294967296*e[t++]+16777216*e[t++]+65536*e[t++]+256*e[t++]+e[t]}function A(e,t){return 4294967296*e[t++]+16777216*e[t++]+65536*e[t++]+256*e[t++]+e[t]}function O(e,t){return 16777216*e[t++]+65536*e[t++]+256*e[t++]+e[t]}function x(e,t){return 65536*e[t++]+256*e[t++]+e[t]}function R(e,t){return 256*e[t++]+e[t]}function M(e,t){const r=T(e,t+4),i=w(e,t);return Te(xe(r,i),"Number exceeds 2^53-1"),4294967296*r+i}function P(e,t){const r=C(e,t+4),i=w(e,t);return Te(xe(r,i),"Number exceeds 2^53-1"),4294967296*r+i}function B(e,t){const r=e[t+4]+256*e[t+5];return e[t++]+256*e[t++]+65536*e[t++]+16777216*e[t]+4294967296*(r|131070*(32768&r))}function N(e,t){return e[t++]+256*e[t++]+65536*e[t++]+16777216*e[t++]+4294967296*(e[t]|33554430*(128&e[t]))}function T(e,t){return e[t++]+256*e[t++]+65536*e[t++]+(e[t]<<24)}function C(e,t){const r=e[t++]+256*e[t++]+65536*e[t];return r|510*(8388608&r)}function q(e,t){const r=e[t++]+256*e[t];return r|131070*(32768&r)}function j(e,t){const r=e[t];return r|33554430*(128&r)}function D(e,t){const r=F(e,t),i=O(e,t+4);return Te(xe(r,i),"Number exceeds 2^53-1"),4294967296*r+i}function U(e,t){const r=H(e,t),i=O(e,t+3);return Te(xe(r,i),"Number exceeds 2^53-1"),4294967296*r+i}function L(e,t){const r=256*e[t++]+e[t++];return 4294967296*(r|131070*(32768&r))+16777216*e[t++]+65536*e[t++]+256*e[t++]+e[t]}function z(e,t){const r=e[t++];return 4294967296*(r|33554430*(128&r))+16777216*e[t++]+65536*e[t++]+256*e[t++]+e[t]}function F(e,t){return(e[t++]<<24)+65536*e[t++]+256*e[t++]+e[t]}function H(e,t){const r=65536*e[t++]+256*e[t++]+e[t];return r|510*(8388608&r)}function V(e,t){const r=256*e[t++]+e[t];return r|131070*(32768&r)}function K(e,t){return f[3]=e[t++],f[2]=e[t++],f[1]=e[t++],f[0]=e[t],u[0]}function W(e,t){return f[0]=e[t++],f[1]=e[t++],f[2]=e[t++],f[3]=e[t],u[0]}function G(e,t){return d[7]=e[t++],d[6]=e[t++],d[5]=e[t++],d[4]=e[t++],d[3]=e[t++],d[2]=e[t++],d[1]=e[t++],d[0]=e[t],l[0]}function Y(e,t){return d[0]=e[t++],d[1]=e[t++],d[2]=e[t++],d[3]=e[t++],d[4]=e[t++],d[5]=e[t++],d[6]=e[t++],d[7]=e[t],l[0]}const X=p?K:W,J=p?W:K,Q=p?G:Y,Z=p?Y:G;function $(e,t,r){return o(Number.isSafeInteger(t),"num","integer"),Re(e,t,r,!1)}function ee(e,t,r){return o(Number.isSafeInteger(t),"num","integer"),Me(e,t,r,!1)}function te(e,t,r){o(Number.isSafeInteger(t),"num","integer");const i=t*h|0;return e[r++]=t,t>>>=8,e[r++]=t,t>>>=8,e[r++]=t,t>>>=8,e[r++]=t,e[r++]=i,e[r++]=i>>>8,r}function re(e,t,r){o(Number.isSafeInteger(t),"num","integer");const i=t*h|0;return e[r++]=t,t>>>=8,e[r++]=t,t>>>=8,e[r++]=t,t>>>=8,e[r++]=t,e[r++]=i,r}function ie(e,t,r){return o(Number.isSafeInteger(t),"num","integer"),e[r++]=t,t>>>=8,e[r++]=t,t>>>=8,e[r++]=t,t>>>=8,e[r++]=t,r}function se(e,t,r){return o(Number.isSafeInteger(t),"num","integer"),e[r++]=t,t>>>=8,e[r++]=t,t>>>=8,e[r++]=t,r}function ne(e,t,r){return o(Number.isSafeInteger(t),"num","integer"),e[r++]=t,e[r++]=t>>>8,r}function oe(e,t,r){return o(Number.isSafeInteger(t),"num","integer"),e[r]=t,r+1}function ae(e,t,r){return o(Number.isSafeInteger(t),"num","integer"),Re(e,t,r,!0)}function he(e,t,r){return o(Number.isSafeInteger(t),"num","integer"),Me(e,t,r,!0)}function ce(e,t,r){o(Number.isSafeInteger(t),"num","integer");const i=t*h|0;return e[r++]=i>>>8,e[r++]=i,e[r+3]=t,t>>>=8,e[r+2]=t,t>>>=8,e[r+1]=t,t>>>=8,e[r]=t,r+4}function ue(e,t,r){o(Number.isSafeInteger(t),"num","integer");const i=t*h|0;return e[r++]=i,e[r+3]=t,t>>>=8,e[r+2]=t,t>>>=8,e[r+1]=t,t>>>=8,e[r]=t,r+4}function fe(e,t,r){return o(Number.isSafeInteger(t),"num","integer"),e[r+3]=t,t>>>=8,e[r+2]=t,t>>>=8,e[r+1]=t,t>>>=8,e[r]=t,r+4}function le(e,t,r){return o(Number.isSafeInteger(t),"num","integer"),e[r+2]=t,t>>>=8,e[r+1]=t,t>>>=8,e[r]=t,r+3}function de(e,t,r){return o(Number.isSafeInteger(t),"num","integer"),e[r++]=t>>>8,e[r++]=t,r}function pe(e,t,r){return ie(e,t,r)}function be(e,t,r){return se(e,t,r)}function ge(e,t,r){return fe(e,t,r)}function me(e,t,r){return le(e,t,r)}function _e(e,t,r){return o(Be(t),"num","number"),l[0]=t,e[r++]=d[0],e[r++]=d[1],e[r++]=d[2],e[r++]=d[3],e[r++]=d[4],e[r++]=d[5],e[r++]=d[6],e[r++]=d[7],r}function we(e,t,r){return o(Be(t),"num","number"),l[0]=t,e[r++]=d[7],e[r++]=d[6],e[r++]=d[5],e[r++]=d[4],e[r++]=d[3],e[r++]=d[2],e[r++]=d[1],e[r++]=d[0],r}function ye(e,t,r){return o(Be(t),"num","number"),u[0]=t,e[r++]=f[0],e[r++]=f[1],e[r++]=f[2],e[r++]=f[3],r}function ve(e,t,r){return o(Be(t),"num","number"),u[0]=t,e[r++]=f[3],e[r++]=f[2],e[r++]=f[1],e[r++]=f[0],r}const Ee=p?ve:ye,Se=p?ye:ve,Ie=p?we:_e,ke=p?_e:we;function Ae(e){return o(Number.isSafeInteger(e),"num","integer"),e<253?1:e<=65535?3:e<=4294967295?5:9}function Oe(e,t){o(null!=e&&!0===e._isBuffer,"data","buffer");const r=Buffer.allocUnsafe(t);return e.copy(r,0),r}function xe(e,t){return e<0&&(e=~e,0===t&&(e+=1)),0==(4292870144&e)}function Re(e,t,r,i){let s=!1;t<0&&(t=-t,s=!0);let n=t*h|0,o=0|t;return s&&(0===o?n=1+~n|0:(n=~n,o=1+~o)),r=i?ge(e,o,r=ge(e,n,r)):pe(e,n,r=pe(e,o,r))}function Me(e,t,r,i){let s=!1;t<0&&(t=-t,s=!0);let n=t*h|0,o=0|t;return s&&(0===o?n=1+~n|0:(n=~n,o=1+~o)),r=i?ge(e,o,r=me(e,n,r)):be(e,n,r=pe(e,o,r))}class Pe{constructor(e,t){this.size=e,this.value=t}}function Be(e){return"number"==typeof e&&isFinite(e)}function Ne(e,t){if(!e)throw new a(t,"Out of bounds read",Ne)}function Te(e,t,r){if(!e)throw new a(t,r,Te)}e.readU=function(e,t,r){switch(r){case 8:return b(e,t);case 7:return g(e,t);case 6:return m(e,t);case 5:return _(e,t);case 4:return w(e,t);case 3:return y(e,t);case 2:return v(e,t);case 1:return E(e,t);default:throw new a(t,"Invalid read length")}},e.readU64=b,e.readU56=g,e.readU48=m,e.readU40=_,e.readU32=w,e.readU24=y,e.readU16=v,e.readU8=E,e.readUBE=function(e,t,r){switch(r){case 8:return S(e,t);case 7:return I(e,t);case 6:return k(e,t);case 5:return A(e,t);case 4:return O(e,t);case 3:return x(e,t);case 2:return R(e,t);case 1:return E(e,t);default:throw new a(t,"Invalid read length")}},e.readU64BE=S,e.readU56BE=I,e.readU48BE=k,e.readU40BE=A,e.readU32BE=O,e.readU24BE=x,e.readU16BE=R,e.readI=function(e,t,r){switch(r){case 8:return M(e,t);case 7:return P(e,t);case 6:return B(e,t);case 5:return N(e,t);case 4:return T(e,t);case 3:return C(e,t);case 2:return q(e,t);case 1:return j(e,t);default:throw new a(t,"Invalid read length")}},e.readI64=M,e.readI56=P,e.readI48=B,e.readI40=N,e.readI32=T,e.readI24=C,e.readI16=q,e.readI8=j,e.readIBE=function(e,t,r){switch(r){case 8:return D(e,t);case 7:return U(e,t);case 6:return L(e,t);case 5:return z(e,t);case 4:return F(e,t);case 3:return H(e,t);case 2:return V(e,t);case 1:return j(e,t);default:throw new a(t,"Invalid read length")}},e.readI64BE=D,e.readI56BE=U,e.readI48BE=L,e.readI40BE=z,e.readI32BE=F,e.readI24BE=H,e.readI16BE=V,e.readFloat=X,e.readFloatBE=J,e.readDouble=Q,e.readDoubleBE=Z,e.writeU=function(e,t,r,i){switch(i){case 8:return $(e,t,r);case 7:return ee(e,t,r);case 6:return te(e,t,r);case 5:return re(e,t,r);case 4:return ie(e,t,r);case 3:return se(e,t,r);case 2:return ne(e,t,r);case 1:return oe(e,t,r);default:throw new a(r,"Invalid write length")}},e.writeU64=$,e.writeU56=ee,e.writeU48=te,e.writeU40=re,e.writeU32=ie,e.writeU24=se,e.writeU16=ne,e.writeU8=oe,e.writeUBE=function(e,t,r,i){switch(i){case 8:return ae(e,t,r);case 7:return he(e,t,r);case 6:return ce(e,t,r);case 5:return ue(e,t,r);case 4:return fe(e,t,r);case 3:return le(e,t,r);case 2:return de(e,t,r);case 1:return oe(e,t,r);default:throw new a(r,"Invalid write length")}},e.writeU64BE=ae,e.writeU56BE=he,e.writeU48BE=ce,e.writeU40BE=ue,e.writeU32BE=fe,e.writeU24BE=le,e.writeU16BE=de,e.writeI=function(e,t,r,i){switch(i){case 8:return $(e,t,r);case 7:return ee(e,t,r);case 6:return te(e,t,r);case 5:return re(e,t,r);case 4:return se(e,t,r);case 3:return ie(e,t,r);case 2:return ne(e,t,r);case 1:return oe(e,t,r);default:throw new a(r,"Invalid write length")}},e.writeI64=function(e,t,r){return $(e,t,r)},e.writeI56=function(e,t,r){return ee(e,t,r)},e.writeI48=function(e,t,r){return te(e,t,r)},e.writeI40=function(e,t,r){return re(e,t,r)},e.writeI32=pe,e.writeI24=be,e.writeI16=function(e,t,r){return ne(e,t,r)},e.writeI8=function(e,t,r){return oe(e,t,r)},e.writeIBE=function(e,t,r,i){switch(i){case 8:return ae(e,t,r);case 7:return he(e,t,r);case 6:return ce(e,t,r);case 5:return ue(e,t,r);case 4:return fe(e,t,r);case 3:return le(e,t,r);case 2:return de(e,t,r);case 1:return oe(e,t,r);default:throw new a(r,"Invalid write length")}},e.writeI64BE=function(e,t,r){return ae(e,t,r)},e.writeI56BE=function(e,t,r){return he(e,t,r)},e.writeI48BE=function(e,t,r){return ce(e,t,r)},e.writeI40BE=function(e,t,r){return ue(e,t,r)},e.writeI32BE=ge,e.writeI24BE=me,e.writeI16BE=function(e,t,r){return de(e,t,r)},e.writeFloat=Ee,e.writeFloatBE=Se,e.writeDouble=Ie,e.writeDoubleBE=ke,e.readVarint=function(e,t){let r,i;switch(Ne(t<e.length,t),e[t]){case 255:Ne(t+(i=9)<=e.length,t),Te((r=b(e,t+1))>4294967295,t,"Non-canonical varint");break;case 254:Ne(t+(i=5)<=e.length,t),Te((r=w(e,t+1))>65535,t,"Non-canonical varint");break;case 253:Ne(t+(i=3)<=e.length,t),Te((r=v(e,t+1))>=253,t,"Non-canonical varint");break;default:i=1,r=e[t]}return new Pe(i,r)},e.writeVarint=function(e,t,r){return o(Number.isSafeInteger(t),"num","integer"),t<253?(e[r++]=t,r):t<=65535?(e[r++]=253,ne(e,t,r)):t<=4294967295?(e[r++]=254,ie(e,t,r)):(e[r++]=255,$(e,t,r))},e.sizeVarint=Ae,e.readVarint2=function(e,t){let r=0,i=0;for(;;){Ne(t<e.length,t);const s=e[t++];if(i+=1,Te(r<=70368744177663-(127&s),t,"Number exceeds 2^53-1"),r=128*r+(127&s),0==(128&s))break;Te(r!==c,t,"Number exceeds 2^53-1"),r+=1}return new Pe(i,r)},e.writeVarint2=function(e,t,r){o(Number.isSafeInteger(t),"num","integer");const i=[];let s=0;for(;i[s]=127&t|(s?128:0),!(t<=127);)t=(t-t%128)/128-1,s+=1;Ne(r+s+1<=e.length,r);do{e[r++]=i[s]}while(s--);return r},e.sizeVarint2=function(e){o(Number.isSafeInteger(e),"num","integer");let t=0;for(;t+=1,!(e<=127);)e=(e-e%128)/128-1;return t},e.sliceBytes=function(e,t,r){if(o(null!=e&&!0===e._isBuffer,"data","buffer"),o(t>>>0===t,"off","integer"),o(r>>>0===r,"size","integer"),t+r>e.length)throw new a(t,"Out of bounds read");return e.slice(t,t+r)},e.readBytes=function(e,t,r){if(o(null!=e&&!0===e._isBuffer,"data","buffer"),o(t>>>0===t,"off","integer"),o(r>>>0===r,"size","integer"),t+r>e.length)throw new a(t,"Out of bounds read");const i=Buffer.allocUnsafe(r);return e.copy(i,0,t,t+r),i},e.writeBytes=function(e,t,r){if(o(null!=e&&!0===e._isBuffer,"data","buffer"),o(null!=t&&!0===t._isBuffer,"value","buffer"),o(r>>>0===r,"off","integer"),r+t.length>e.length)throw new a(r,"Out of bounds write");return t.copy(e,r,0,t.length)},e.readString=function(e,t,r,i){if(null==i&&(i="binary"),o(null!=e&&!0===e._isBuffer,"data","buffer"),o(t>>>0===t,"off","integer"),o(r>>>0===r,"size","integer"),o("string"==typeof i,"enc","string"),t+r>e.length)throw new a(t,"Out of bounds read");return e.toString(i,t,t+r)},e.writeString=function(e,t,r,i){if(null==i&&(i="binary"),o(null!=e&&!0===e._isBuffer,"data","buffer"),o("string"==typeof t,"str","string"),o(r>>>0===r,"off","integer"),o("string"==typeof i,"enc","string"),0===t.length)return 0;if(r+Buffer.byteLength(t,i)>e.length)throw new a(r,"Out of bounds write");return e.write(t,r,i)},e.realloc=Oe,e.copy=function(e){return o(null!=e&&!0===e._isBuffer,"data","buffer"),Oe(e,e.length)},e.concat=function(e,t){o(null!=e&&!0===e._isBuffer,"a","buffer"),o(null!=t&&!0===t._isBuffer,"b","buffer");const r=e.length+t.length,i=Buffer.allocUnsafe(r);return e.copy(i,0),t.copy(i,e.length),i},e.sizeVarBytes=function(e){return o(null!=e&&!0===e._isBuffer,"data","buffer"),Ae(e.length)+e.length},e.sizeVarlen=function(e){return Ae(e)+e},e.sizeVarString=function(e,t){if(null==t&&(t="binary"),o("string"==typeof e,"str","string"),o("string"==typeof t,"enc","string"),0===e.length)return 1;const r=Buffer.byteLength(e,t);return Ae(r)+r}}],["bufio","/lib/enforce.js",function(e,t,r,i,s,n){"use strict";r.exports=function e(t,r,i){if(!t){const t=new TypeError(`'${r}' must be a(n) ${i}.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,e),t}}}],["bufio","/lib/error.js",function(e,t,r,i,s,n){"use strict";class o extends Error{constructor(e,t,r){super(),this.type="EncodingError",this.name="EncodingError",this.code="ERR_ENCODING",this.message=`${t} (offset=${e}).`,Error.captureStackTrace&&Error.captureStackTrace(this,r||o)}}r.exports=o}],["bufio","/lib/reader.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(27,r),a=__browser_require__(26,r),h=__browser_require__(28,r),c=Buffer.alloc(0);r.exports=class{constructor(e,t=!1){o(null!=e&&!0===e._isBuffer,"data","buffer"),o("boolean"==typeof t,"zeroCopy","boolean"),this.data=e,this.offset=0,this.zeroCopy=t,this.stack=[]}check(e){if(this.offset+e>this.data.length)throw new h(this.offset,"Out of bounds read",this.check)}getSize(){return this.data.length}left(){return this.check(0),this.data.length-this.offset}seek(e){if(o(Number.isSafeInteger(e),"off","integer"),this.offset+e<0)throw new h(this.offset,"Out of bounds read");return this.check(e),this.offset+=e,this}start(){return this.stack.push(this.offset),this.offset}end(){if(0===this.stack.length)throw new Error("Cannot end without a stack item.");const e=this.stack.pop();return this.offset-e}endData(e=!1){if(o("boolean"==typeof e,"zeroCopy","boolean"),0===this.stack.length)throw new Error("Cannot end without a stack item.");const t=this.stack.pop(),r=this.offset,i=r-t,s=this.data;if(i===s.length)return s;if(this.zeroCopy||e)return s.slice(t,r);const n=Buffer.allocUnsafe(i);return s.copy(n,0,t,r),n}destroy(){return this.data=c,this.offset=0,this.stack.length=0,this}readU8(){this.check(1);const e=this.data[this.offset];return this.offset+=1,e}readU16(){this.check(2);const e=a.readU16(this.data,this.offset);return this.offset+=2,e}readU16BE(){this.check(2);const e=a.readU16BE(this.data,this.offset);return this.offset+=2,e}readU24(){this.check(3);const e=a.readU24(this.data,this.offset);return this.offset+=3,e}readU24BE(){this.check(3);const e=a.readU24BE(this.data,this.offset);return this.offset+=3,e}readU32(){this.check(4);const e=a.readU32(this.data,this.offset);return this.offset+=4,e}readU32BE(){this.check(4);const e=a.readU32BE(this.data,this.offset);return this.offset+=4,e}readU40(){this.check(5);const e=a.readU40(this.data,this.offset);return this.offset+=5,e}readU40BE(){this.check(5);const e=a.readU40BE(this.data,this.offset);return this.offset+=5,e}readU48(){this.check(6);const e=a.readU48(this.data,this.offset);return this.offset+=6,e}readU48BE(){this.check(6);const e=a.readU48BE(this.data,this.offset);return this.offset+=6,e}readU56(){this.check(7);const e=a.readU56(this.data,this.offset);return this.offset+=7,e}readU56BE(){this.check(7);const e=a.readU56BE(this.data,this.offset);return this.offset+=7,e}readU64(){this.check(8);const e=a.readU64(this.data,this.offset);return this.offset+=8,e}readU64BE(){this.check(8);const e=a.readU64BE(this.data,this.offset);return this.offset+=8,e}readI8(){this.check(1);const e=a.readI8(this.data,this.offset);return this.offset+=1,e}readI16(){this.check(2);const e=a.readI16(this.data,this.offset);return this.offset+=2,e}readI16BE(){this.check(2);const e=a.readI16BE(this.data,this.offset);return this.offset+=2,e}readI24(){this.check(3);const e=a.readI24(this.data,this.offset);return this.offset+=3,e}readI24BE(){this.check(3);const e=a.readI24BE(this.data,this.offset);return this.offset+=3,e}readI32(){this.check(4);const e=a.readI32(this.data,this.offset);return this.offset+=4,e}readI32BE(){this.check(4);const e=a.readI32BE(this.data,this.offset);return this.offset+=4,e}readI40(){this.check(5);const e=a.readI40(this.data,this.offset);return this.offset+=5,e}readI40BE(){this.check(5);const e=a.readI40BE(this.data,this.offset);return this.offset+=5,e}readI48(){this.check(6);const e=a.readI48(this.data,this.offset);return this.offset+=6,e}readI48BE(){this.check(6);const e=a.readI48BE(this.data,this.offset);return this.offset+=6,e}readI56(){this.check(7);const e=a.readI56(this.data,this.offset);return this.offset+=7,e}readI56BE(){this.check(7);const e=a.readI56BE(this.data,this.offset);return this.offset+=7,e}readI64(){this.check(8);const e=a.readI64(this.data,this.offset);return this.offset+=8,e}readI64BE(){this.check(8);const e=a.readI64BE(this.data,this.offset);return this.offset+=8,e}readFloat(){this.check(4);const e=a.readFloat(this.data,this.offset);return this.offset+=4,e}readFloatBE(){this.check(4);const e=a.readFloatBE(this.data,this.offset);return this.offset+=4,e}readDouble(){this.check(8);const e=a.readDouble(this.data,this.offset);return this.offset+=8,e}readDoubleBE(){this.check(8);const e=a.readDoubleBE(this.data,this.offset);return this.offset+=8,e}readVarint(){const{size:e,value:t}=a.readVarint(this.data,this.offset);return this.offset+=e,t}readVarint2(){const{size:e,value:t}=a.readVarint2(this.data,this.offset);return this.offset+=e,t}readBytes(e,t=!1){let r;return o(e>>>0===e,"size","integer"),o("boolean"==typeof t,"zeroCopy","boolean"),this.check(e),this.zeroCopy||t?r=this.data.slice(this.offset,this.offset+e):(r=Buffer.allocUnsafe(e),this.data.copy(r,0,this.offset,this.offset+e)),this.offset+=e,r}readVarBytes(e=!1){return this.readBytes(this.readVarint(),e)}readChild(e){o(e>>>0===e,"size","integer"),this.check(e);const t=this.data.slice(0,this.offset+e),r=new this.constructor(t);return r.offset=this.offset,this.offset+=e,r}readString(e,t){null==t&&(t="binary"),o(e>>>0===e,"size","integer"),o("string"==typeof t,"enc","string"),this.check(e);const r=this.data.toString(t,this.offset,this.offset+e);return this.offset+=e,r}readHash(e){return e?this.readString(32,e):this.readBytes(32)}readVarString(e,t=0){null==e&&(e="binary"),o("string"==typeof e,"enc","string"),o(t>>>0===t,"limit","integer");const r=this.readVarint();if(0!==t&&r>t)throw new h(this.offset,"String exceeds limit");return this.readString(r,e)}readNullString(e){null==e&&(e="binary"),o("string"==typeof e,"enc","string");let t=this.offset;for(;t<this.data.length&&0!==this.data[t];t++);if(t===this.data.length)throw new h(this.offset,"No NUL terminator");const r=this.readString(t-this.offset,e);return this.offset=t+1,r}createChecksum(e){o("function"==typeof e,"hash","function");let t=0;this.stack.length>0&&(t=this.stack[this.stack.length-1]);const r=this.data.slice(t,this.offset);return a.readU32(e(r),0)}verifyChecksum(e){const t=this.createChecksum(e);if(t!==this.readU32())throw new h(this.offset,"Checksum mismatch");return t}}}],["bufio","/lib/writer.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(27,r),a=__browser_require__(26,r),h=__browser_require__(28,r),c=0,u=1,f=2,l=3,d=4,p=5,b=6,g=7,m=8,_=9,w=10,y=11,v=12,E=13,S=14,I=15,k=16,A=17,O=18,x=19,R=20,M=21,P=22,B=23,N=24,T=25,C=26,q=27,j=28,D=29,U=30,L=31,z=32,F=33,H=34,V=35,K=36,W=37,G=38,Y=39,X=40;class J{constructor(e){this.type=e}}class Q extends J{constructor(e,t){super(e),this.value=t}}class Z extends J{constructor(e,t){super(e),this.data=t}}class $ extends J{constructor(e,t,r){super(e),this.value=t,this.enc=r}}class ee extends J{constructor(e,t){super(e),this.func=t}}class te extends J{constructor(e,t,r){super(e),this.value=t,this.size=r}}r.exports=class{constructor(){this.ops=[],this.offset=0}render(){const e=Buffer.allocUnsafe(this.offset);let t=0;for(const r of this.ops)switch(r.type){case c:t+=r.value;break;case u:t=a.writeU8(e,r.value,t);break;case f:t=a.writeU16(e,r.value,t);break;case l:t=a.writeU16BE(e,r.value,t);break;case d:t=a.writeU24(e,r.value,t);break;case p:t=a.writeU24BE(e,r.value,t);break;case b:t=a.writeU32(e,r.value,t);break;case g:t=a.writeU32BE(e,r.value,t);break;case m:t=a.writeU40(e,r.value,t);break;case _:t=a.writeU40BE(e,r.value,t);break;case w:t=a.writeU48(e,r.value,t);break;case y:t=a.writeU48BE(e,r.value,t);break;case v:t=a.writeU56(e,r.value,t);break;case E:t=a.writeU56BE(e,r.value,t);break;case S:t=a.writeU64(e,r.value,t);break;case I:t=a.writeU64BE(e,r.value,t);break;case k:t=a.writeI8(e,r.value,t);break;case A:t=a.writeI16(e,r.value,t);break;case O:t=a.writeI16BE(e,r.value,t);break;case x:t=a.writeI24(e,r.value,t);break;case R:t=a.writeI24BE(e,r.value,t);break;case M:t=a.writeI32(e,r.value,t);break;case P:t=a.writeI32BE(e,r.value,t);break;case B:t=a.writeI40(e,r.value,t);break;case N:t=a.writeI40BE(e,r.value,t);break;case T:t=a.writeI48(e,r.value,t);break;case C:t=a.writeI48BE(e,r.value,t);break;case q:t=a.writeI56(e,r.value,t);break;case j:t=a.writeI56BE(e,r.value,t);break;case D:t=a.writeI64(e,r.value,t);break;case U:t=a.writeI64BE(e,r.value,t);break;case L:t=a.writeFloat(e,r.value,t);break;case z:t=a.writeFloatBE(e,r.value,t);break;case F:t=a.writeDouble(e,r.value,t);break;case H:t=a.writeDoubleBE(e,r.value,t);break;case V:t=a.writeVarint(e,r.value,t);break;case K:t=a.writeVarint2(e,r.value,t);break;case W:t+=r.data.copy(e,t);break;case G:t+=e.write(r.value,t,r.enc);break;case Y:t+=r.func(e.slice(0,t)).copy(e,t,0,4);break;case X:e.fill(r.value,t,t+r.size),t+=r.size;break;default:throw new Error("Invalid type.")}if(t!==e.length)throw new h(t,"Out of bounds write");return this.destroy(),e}getSize(){return this.offset}seek(e){if(o(Number.isSafeInteger(e),"off","integer"),this.offset+e<0)throw new h(this.offset,"Out of bounds write");return this.offset+=e,this.ops.push(new Q(c,e)),this}destroy(){return this.ops.length=0,this.offset=0,this}writeU8(e){return this.offset+=1,this.ops.push(new Q(u,e)),this}writeU16(e){return this.offset+=2,this.ops.push(new Q(f,e)),this}writeU16BE(e){return this.offset+=2,this.ops.push(new Q(l,e)),this}writeU24(e){return this.offset+=3,this.ops.push(new Q(d,e)),this}writeU24BE(e){return this.offset+=3,this.ops.push(new Q(p,e)),this}writeU32(e){return this.offset+=4,this.ops.push(new Q(b,e)),this}writeU32BE(e){return this.offset+=4,this.ops.push(new Q(g,e)),this}writeU40(e){return this.offset+=5,this.ops.push(new Q(m,e)),this}writeU40BE(e){return this.offset+=5,this.ops.push(new Q(_,e)),this}writeU48(e){return this.offset+=6,this.ops.push(new Q(w,e)),this}writeU48BE(e){return this.offset+=6,this.ops.push(new Q(y,e)),this}writeU56(e){return this.offset+=7,this.ops.push(new Q(v,e)),this}writeU56BE(e){return this.offset+=7,this.ops.push(new Q(E,e)),this}writeU64(e){return this.offset+=8,this.ops.push(new Q(S,e)),this}writeU64BE(e){return this.offset+=8,this.ops.push(new Q(I,e)),this}writeI8(e){return this.offset+=1,this.ops.push(new Q(k,e)),this}writeI16(e){return this.offset+=2,this.ops.push(new Q(A,e)),this}writeI16BE(e){return this.offset+=2,this.ops.push(new Q(O,e)),this}writeI24(e){return this.offset+=3,this.ops.push(new Q(x,e)),this}writeI24BE(e){return this.offset+=3,this.ops.push(new Q(R,e)),this}writeI32(e){return this.offset+=4,this.ops.push(new Q(M,e)),this}writeI32BE(e){return this.offset+=4,this.ops.push(new Q(P,e)),this}writeI40(e){return this.offset+=5,this.ops.push(new Q(B,e)),this}writeI40BE(e){return this.offset+=5,this.ops.push(new Q(N,e)),this}writeI48(e){return this.offset+=6,this.ops.push(new Q(T,e)),this}writeI48BE(e){return this.offset+=6,this.ops.push(new Q(C,e)),this}writeI56(e){return this.offset+=7,this.ops.push(new Q(q,e)),this}writeI56BE(e){return this.offset+=7,this.ops.push(new Q(j,e)),this}writeI64(e){return this.offset+=8,this.ops.push(new Q(D,e)),this}writeI64BE(e){return this.offset+=8,this.ops.push(new Q(U,e)),this}writeFloat(e){return this.offset+=4,this.ops.push(new Q(L,e)),this}writeFloatBE(e){return this.offset+=4,this.ops.push(new Q(z,e)),this}writeDouble(e){return this.offset+=8,this.ops.push(new Q(F,e)),this}writeDoubleBE(e){return this.offset+=8,this.ops.push(new Q(H,e)),this}writeVarint(e){return this.offset+=a.sizeVarint(e),this.ops.push(new Q(V,e)),this}writeVarint2(e){return this.offset+=a.sizeVarint2(e),this.ops.push(new Q(K,e)),this}writeBytes(e){return o(null!=e&&!0===e._isBuffer,"value","buffer"),0===e.length?this:(this.offset+=e.length,this.ops.push(new Z(W,e)),this)}writeVarBytes(e){return o(null!=e&&!0===e._isBuffer,"value","buffer"),this.offset+=a.sizeVarint(e.length),this.ops.push(new Q(V,e.length)),0===e.length?this:(this.offset+=e.length,this.ops.push(new Z(W,e)),this)}copy(e,t,r){o(null!=e&&!0===e._isBuffer,"value","buffer"),o(t>>>0===t,"start","integer"),o(r>>>0===r,"end","integer"),o(r>=t,"start","integer");const i=e.slice(t,r);return this.writeBytes(i),this}writeString(e,t){return null==t&&(t="binary"),o("string"==typeof e,"value","string"),o("string"==typeof t,"enc","string"),0===e.length?this:(this.offset+=Buffer.byteLength(e,t),this.ops.push(new $(G,e,t)),this)}writeHash(e){return"string"!=typeof e?(o(null!=e&&!0===e._isBuffer,"value","buffer"),o(32===e.length,"value","32-byte hash"),this.writeBytes(e),this):(o(64===e.length,"value","32-byte hash"),this.writeString(e,"hex"),this)}writeVarString(e,t){if(null==t&&(t="binary"),o("string"==typeof e,"value","string"),o("string"==typeof t,"enc","string"),0===e.length)return this.ops.push(new Q(V,0)),this;const r=Buffer.byteLength(e,t);return this.offset+=a.sizeVarint(r),this.offset+=r,this.ops.push(new Q(V,r)),this.ops.push(new $(G,e,t)),this}writeNullString(e,t){return this.writeString(e,t),this.writeU8(0),this}writeChecksum(e){return o("function"==typeof e,"hash","function"),this.offset+=4,this.ops.push(new ee(Y,e)),this}fill(e,t){return o((255&e)===e,"value","byte"),o(t>>>0===t,"size","integer"),0===t?this:(this.offset+=t,this.ops.push(new te(X,e,t)),this)}}}],["bufio","/lib/staticwriter.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(27,r),a=__browser_require__(26,r),h=__browser_require__(28,r),c=Buffer.alloc(0),u=102400;let f=null;class l{constructor(e){this.data=c,this.offset=0,null!=e&&this.init(e)}check(e){if(this.offset+e>this.data.length)throw new h(this.offset,"Out of bounds write",this.check)}init(e){return null!=e&&!0===e._isBuffer?(this.data=e,this.offset=0,this):(o(e>>>0===e,"size","integer"),this.data=Buffer.allocUnsafe(e),this.offset=0,this)}static pool(e){if(o(e>>>0===e,"size","integer"),e<=u){f||(f=Buffer.allocUnsafe(u));const t=new l;return t.data=f.slice(0,e),t}return new l(e)}render(){const{data:e,offset:t}=this;if(t!==e.length)throw new h(t,"Out of bounds write");return this.destroy(),e}slice(){const{data:e,offset:t}=this;if(t>e.length)throw new h(t,"Out of bounds write");return this.destroy(),e.slice(0,t)}getSize(){return this.offset}seek(e){if(o(Number.isSafeInteger(e),"off","integer"),this.offset+e<0)throw new h(this.offset,"Out of bounds write");return this.check(e),this.offset+=e,this}destroy(){return this.data=c,this.offset=0,this}writeU8(e){return this.check(1),this.offset=a.writeU8(this.data,e,this.offset),this}writeU16(e){return this.check(2),this.offset=a.writeU16(this.data,e,this.offset),this}writeU16BE(e){return this.check(2),this.offset=a.writeU16BE(this.data,e,this.offset),this}writeU24(e){return this.check(3),this.offset=a.writeU24(this.data,e,this.offset),this}writeU24BE(e){return this.check(3),this.offset=a.writeU24BE(this.data,e,this.offset),this}writeU32(e){return this.check(4),this.offset=a.writeU32(this.data,e,this.offset),this}writeU32BE(e){return this.check(4),this.offset=a.writeU32BE(this.data,e,this.offset),this}writeU40(e){return this.check(5),this.offset=a.writeU40(this.data,e,this.offset),this}writeU40BE(e){return this.check(5),this.offset=a.writeU40BE(this.data,e,this.offset),this}writeU48(e){return this.check(6),this.offset=a.writeU48(this.data,e,this.offset),this}writeU48BE(e){return this.check(6),this.offset=a.writeU48BE(this.data,e,this.offset),this}writeU56(e){return this.check(7),this.offset=a.writeU56(this.data,e,this.offset),this}writeU56BE(e){return this.check(7),this.offset=a.writeU56BE(this.data,e,this.offset),this}writeU64(e){return this.check(8),this.offset=a.writeU64(this.data,e,this.offset),this}writeU64BE(e){return this.check(8),this.offset=a.writeU64BE(this.data,e,this.offset),this}writeI8(e){return this.check(1),this.offset=a.writeI8(this.data,e,this.offset),this}writeI16(e){return this.check(2),this.offset=a.writeI16(this.data,e,this.offset),this}writeI16BE(e){return this.check(2),this.offset=a.writeI16BE(this.data,e,this.offset),this}writeI24(e){return this.check(3),this.offset=a.writeI24(this.data,e,this.offset),this}writeI24BE(e){return this.check(3),this.offset=a.writeI24BE(this.data,e,this.offset),this}writeI32(e){return this.check(4),this.offset=a.writeI32(this.data,e,this.offset),this}writeI32BE(e){return this.check(4),this.offset=a.writeI32BE(this.data,e,this.offset),this}writeI40(e){return this.check(5),this.offset=a.writeI40(this.data,e,this.offset),this}writeI40BE(e){return this.check(5),this.offset=a.writeI40BE(this.data,e,this.offset),this}writeI48(e){return this.check(6),this.offset=a.writeI48(this.data,e,this.offset),this}writeI48BE(e){return this.check(6),this.offset=a.writeI48BE(this.data,e,this.offset),this}writeI56(e){return this.check(7),this.offset=a.writeI56(this.data,e,this.offset),this}writeI56BE(e){return this.check(7),this.offset=a.writeI56BE(this.data,e,this.offset),this}writeI64(e){return this.check(8),this.offset=a.writeI64(this.data,e,this.offset),this}writeI64BE(e){return this.check(8),this.offset=a.writeI64BE(this.data,e,this.offset),this}writeFloat(e){return this.check(4),this.offset=a.writeFloat(this.data,e,this.offset),this}writeFloatBE(e){return this.check(4),this.offset=a.writeFloatBE(this.data,e,this.offset),this}writeDouble(e){return this.check(8),this.offset=a.writeDouble(this.data,e,this.offset),this}writeDoubleBE(e){return this.check(8),this.offset=a.writeDoubleBE(this.data,e,this.offset),this}writeVarint(e){return this.offset=a.writeVarint(this.data,e,this.offset),this}writeVarint2(e){return this.offset=a.writeVarint2(this.data,e,this.offset),this}writeBytes(e){return o(null!=e&&!0===e._isBuffer,"value","buffer"),this.check(e.length),this.offset+=e.copy(this.data,this.offset),this}writeVarBytes(e){return o(null!=e&&!0===e._isBuffer,"value","buffer"),this.writeVarint(e.length),this.writeBytes(e),this}copy(e,t,r){return o(null!=e&&!0===e._isBuffer,"value","buffer"),o(t>>>0===t,"start","integer"),o(r>>>0===r,"end","integer"),o(r>=t,"start","integer"),this.check(r-t),this.offset+=e.copy(this.data,this.offset,t,r),this}writeString(e,t){if(null==t&&(t="binary"),o("string"==typeof e,"value","string"),o("string"==typeof t,"enc","string"),0===e.length)return this;const r=Buffer.byteLength(e,t);return this.check(r),this.offset+=this.data.write(e,this.offset,t),this}writeHash(e){return"string"!=typeof e?(o(null!=e&&!0===e._isBuffer,"value","buffer"),o(32===e.length,"value","32-byte hash"),this.writeBytes(e),this):(o(64===e.length,"value","32-byte hash"),this.check(32),this.offset+=this.data.write(e,this.offset,"hex"),this)}writeVarString(e,t){if(null==t&&(t="binary"),o("string"==typeof e,"value","string"),o("string"==typeof t,"enc","string"),0===e.length)return this.writeVarint(0),this;const r=Buffer.byteLength(e,t);return this.writeVarint(r),this.check(r),this.offset+=this.data.write(e,this.offset,t),this}writeNullString(e,t){return this.writeString(e,t),this.writeU8(0),this}writeChecksum(e){return o("function"==typeof e,"hash","function"),this.check(4),e(this.data.slice(0,this.offset)).copy(this.data,this.offset,0,4),this.offset+=4,this}fill(e,t){return o((255&e)===e,"value","byte"),o(t>>>0===t,"size","integer"),this.check(t),this.data.fill(e,this.offset,this.offset+t),this.offset+=t,this}}r.exports=l}],["bufio","/lib/struct.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(27,r),a=__browser_require__(29,r),h=__browser_require__(30,r),c=__browser_require__(31,r),{custom:u}=__browser_require__(25,r);r.exports=class{constructor(){}inject(e){return o(e instanceof this.constructor,"obj","struct"),this.decode(e.encode())}clone(){return(new this.constructor).inject(this)}getSize(e){return-1}write(e,t){return e}read(e,t){return this}toString(){return Object.prototype.toString.call(this)}fromString(e,t){return this}getJSON(){return this}fromJSON(e,t){return this}fromOptions(e,t){return this}from(e,t){return this.fromOptions(e,t)}format(){return this.getJSON()}encode(e){const t=this.getSize(e),r=-1===t?new h:new c(t);return this.write(r,e),r.render()}decode(e,t){const r=new a(e);return this.read(r,t),this}toHex(e){return this.encode(e).toString("hex")}fromHex(e,t){o("string"==typeof e,"str","string");const r=e.length>>>1,i=Buffer.from(e,"hex");if(i.length!==r)throw new Error("Invalid hex string.");return this.decode(i,t)}toBase64(e){return this.encode(e).toString("base64")}fromBase64(e,t){o("string"==typeof e,"str","string");const r=Buffer.from(e,"base64");if(e.length>(4*r.length/3+3&-4)>>>0)throw new Error("Invalid base64 string.");return this.decode(r,t)}toJSON(){return this.getJSON()}[u](){return this.format()}static read(e,t){return(new this).read(e,t)}static decode(e,t){return(new this).decode(e,t)}static fromHex(e,t){return(new this).fromHex(e,t)}static fromBase64(e,t){return(new this).fromBase64(e,t)}static fromString(e,t){return(new this).fromString(e,t)}static fromJSON(e,t){return(new this).fromJSON(e,t)}static fromOptions(e,t){return(new this).fromOptions(e,t)}static from(e,t){return(new this).from(e,t)}toWriter(e,t){return this.write(e,t)}fromReader(e,t){return this.read(e,t)}toRaw(e){return this.encode(e)}fromRaw(e,t){return this.decode(e,t)}static fromReader(e,t){return this.read(e,t)}static fromRaw(e,t){return this.decode(e,t)}}}],["bcrypto","/lib/hash256-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(34,r)}],["bcrypto","/lib/js/hash256.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(35,r),a=__browser_require__(36,r),h=__browser_require__(37,r);class c{constructor(){this.ctx=new a}init(){return this.ctx.init(),this}update(e){return this.ctx.update(e),this}final(){const e=Buffer.allocUnsafe(32);return this.ctx._final(e),this.ctx.init(),this.ctx.update(e),this.ctx._final(e),e}static hash(){return new c}static hmac(){return new h(c,64)}static digest(e){return c.ctx.init().update(e).final()}static root(e,t){return o(null!=e&&!0===e._isBuffer&&32===e.length),o(null!=t&&!0===t._isBuffer&&32===t.length),c.ctx.init().update(e).update(t).final()}static multi(e,t,r){const{ctx:i}=c;return i.init(),i.update(e),i.update(t),r&&i.update(r),i.final()}static mac(e,t){return c.hmac().init(t).update(e).final()}}c.native=0,c.id="HASH256",c.size=32,c.bits=256,c.blockSize=64,c.zero=Buffer.alloc(32,0),c.ctx=new c,r.exports=c}],["bcrypto","/lib/internal/assert.js",function(e,t,r,i,s,n){"use strict";r.exports=function e(t,r){if(!t){const t=new Error(r||"Assertion failed");throw Error.captureStackTrace&&Error.captureStackTrace(t,e),t}}}],["bcrypto","/lib/js/sha256.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(35,r),a=__browser_require__(37,r),h=-1,c=Buffer.alloc(8,0),u=Buffer.alloc(64,0);u[0]=128;const f=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);class l{constructor(){this.state=new Uint32Array(8),this.msg=new Uint32Array(64),this.block=Buffer.allocUnsafe(64),this.size=h}init(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.size=0,this}update(e){return o(null!=e&&!0===e._isBuffer),this._update(e,e.length),this}final(){return this._final(Buffer.allocUnsafe(32))}_update(e,t){o(this.size!==h,"Context is not initialized.");let r=63&this.size,i=0;if(this.size+=t,r>0){let s=64-r;if(s>t&&(s=t),e.copy(this.block,r,i,i+s),t-=s,i+=s,(r+=s)<64)return;this._transform(this.block,0)}for(;t>=64;)this._transform(e,i),i+=64,t-=64;t>0&&e.copy(this.block,0,i,i+t)}_final(e){o(this.size!==h,"Context is not initialized.");const t=63&this.size,r=8*this.size;_(c,r*(1/4294967296)>>>0,0),_(c,r>>>0,4),this._update(u,1+(119-t&63)),this._update(c,8);for(let t=0;t<8;t++)_(e,this.state[t],4*t),this.state[t]=0;for(let e=0;e<64;e++)this.msg[e]=0;for(let e=0;e<64;e++)this.block[e]=0;return this.size=h,e}_transform(e,t){const r=this.msg;let i=this.state[0],s=this.state[1],n=this.state[2],o=this.state[3],a=this.state[4],h=this.state[5],c=this.state[6],u=this.state[7],l=0;for(;l<16;l++)r[l]=(w=t+4*l,16777216*(_=e)[w++]+65536*_[w++]+256*_[w++]+_[w]);for(var _,w,y;l<64;l++)r[l]=(((y=r[l-2])>>>17|y<<15)^(y>>>19|y<<13)^y>>>10)+r[l-7]+b(r[l-15])+r[l-16];for(l=0;l<64;l++){const e=u+p(a)+g(a,h,c)+f[l]+r[l],t=d(i)+m(i,s,n);u=c,c=h,h=a,a=o+e>>>0,o=n,n=s,s=i,i=e+t>>>0}this.state[0]+=i,this.state[1]+=s,this.state[2]+=n,this.state[3]+=o,this.state[4]+=a,this.state[5]+=h,this.state[6]+=c,this.state[7]+=u}static hash(){return new l}static hmac(){return new a(l,64)}static digest(e){return l.ctx.init().update(e).final()}static root(e,t){return o(null!=e&&!0===e._isBuffer&&32===e.length),o(null!=t&&!0===t._isBuffer&&32===t.length),l.ctx.init().update(e).update(t).final()}static multi(e,t,r){const{ctx:i}=l;return i.init(),i.update(e),i.update(t),r&&i.update(r),i.final()}static mac(e,t){return l.hmac().init(t).update(e).final()}}function d(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function p(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function b(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function g(e,t,r){return r^e&(t^r)}function m(e,t,r){return e&t|r&(e|t)}function _(e,t,r){return e[r++]=t>>>24,e[r++]=t>>>16,e[r++]=t>>>8,e[r++]=t,r}l.native=0,l.id="SHA256",l.size=32,l.bits=256,l.blockSize=64,l.zero=Buffer.alloc(32,0),l.ctx=new l,r.exports=l}],["bcrypto","/lib/internal/hmac.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(35,r);r.exports=class{constructor(e,t,r=[],i=[]){o("function"==typeof e),o(t>>>0===t),o(Array.isArray(r)),o(Array.isArray(i)),this.hash=e,this.size=t,this.x=r,this.y=i,this.inner=new e,this.outer=new e}init(e){if(o(null!=e&&!0===e._isBuffer),e.length>this.size){const t=new(0,this.hash);t.init(...this.x),t.update(e),e=t.final(...this.y),o(e.length<=this.size)}const t=Buffer.allocUnsafe(this.size);for(let r=0;r<e.length;r++)t[r]=54^e[r];for(let r=e.length;r<t.length;r++)t[r]=54;this.inner.init(...this.x),this.inner.update(t);for(let r=0;r<e.length;r++)t[r]=92^e[r];for(let r=e.length;r<t.length;r++)t[r]=92;return this.outer.init(...this.x),this.outer.update(t),this}update(e){return this.inner.update(e),this}final(){return this.outer.update(this.inner.final(...this.y)),this.outer.final(...this.y)}}}],["bcrypto","/lib/secp256k1-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(39,r)}],["bcrypto","/lib/js/secp256k1.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(40,r),a=__browser_require__(51,r),h=__browser_require__(54,r);r.exports=new o("SECP256K1",a,h)}],["bcrypto","/lib/js/ecdsa.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(35,r),a=__browser_require__(10,r),h=__browser_require__(41,r),c=__browser_require__(43,r),u=__browser_require__(47,r),f=__browser_require__(52,r),l=__browser_require__(53,r);r.exports=class{constructor(e,t,r){o("string"==typeof e),o(t),this.id=e,this.type="ecdsa",this.hash=t,this.native=0,this._pre=r||null,this._curve=null,this._schnorr=null}get curve(){return this._curve||(this._curve=l.curve(this.id,this._pre),this._curve.precompute(h),this._pre=null),this._curve}get schnorr(){return this._schnorr||(this._schnorr=new u(this.curve,this.hash)),this._schnorr}get size(){return this.curve.fieldSize}get bits(){return this.curve.fieldBits}privateKeyGenerate(){const e=this.curve.randomScalar(h);return this.curve.encodeScalar(e)}privateKeyVerify(e){let t;o(null!=e&&!0===e._isBuffer);try{t=this.curve.decodeScalar(e)}catch(e){return!1}return!t.isZero()&&t.cmp(this.curve.n)<0}privateKeyExport(e){const t=this.publicKeyCreate(e,!1),{x:r,y:i}=this.publicKeyExport(t);return{d:Buffer.from(e),x:r,y:i}}privateKeyImport(e){o(e&&"object"==typeof e);const t=a.decode(e.d,this.curve.endian);if(t.isZero()||t.cmp(this.curve.n)>=0)throw new Error("Invalid private key.");return this.curve.encodeScalar(t)}privateKeyTweakAdd(e,t){const r=this.curve.decodeScalar(t);if(r.cmp(this.curve.n)>=0)throw new Error("Invalid scalar.");const i=this.curve.decodeScalar(e);if(i.isZero()||i.cmp(this.curve.n)>=0)throw new Error("Invalid private key.");const s=i.add(r).imod(this.curve.n);if(s.isZero())throw new Error("Invalid private key.");return this.curve.encodeScalar(s)}privateKeyTweakMul(e,t){const r=this.curve.decodeScalar(t);if(r.isZero()||r.cmp(this.curve.n)>=0)throw new Error("Invalid scalar.");const i=this.curve.decodeScalar(e);if(i.isZero()||i.cmp(this.curve.n)>=0)throw new Error("Invalid private key.");const s=i.mul(r).imod(this.curve.n);if(s.isZero())throw new Error("Invalid private key.");return this.curve.encodeScalar(s)}privateKeyReduce(e){o(null!=e&&!0===e._isBuffer),e.length>this.curve.scalarSize&&(e=e.slice(0,this.curve.scalarSize));const t=a.decode(e,this.curve.endian).imod(this.curve.n);if(t.isZero())throw new Error("Invalid private key.");return this.curve.encodeScalar(t)}privateKeyNegate(e){const t=this.curve.decodeScalar(e);if(t.isZero()||t.cmp(this.curve.n)>=0)throw new Error("Invalid private key.");const r=t.neg().imod(this.curve.n);return this.curve.encodeScalar(r)}privateKeyInvert(e){const t=this.curve.decodeScalar(e);if(t.isZero()||t.cmp(this.curve.n)>=0)throw new Error("Invalid private key.");const r=t.invert(this.curve.n);return this.curve.encodeScalar(r)}publicKeyCreate(e,t){const r=this.curve.decodeScalar(e);if(r.isZero()||r.cmp(this.curve.n)>=0)throw new Error("Invalid private key.");return this.curve.g.mulBlind(r).encode(t)}publicKeyConvert(e,t){return this.curve.decodePoint(e).encode(t)}publicKeyFromUniform(e,t){const r=this.curve.decodeUniform(e);return this.curve.pointFromUniform(r).encode(t)}publicKeyToUniform(e,t=h.randomInt()){const r=this.curve.decodePoint(e),i=this.curve.pointToUniform(r,t);return this.curve.encodeUniform(i,h)}publicKeyFromHash(e,t){return this.curve.pointFromHash(e).encode(t)}publicKeyToHash(e){const t=this.curve.decodePoint(e);return this.curve.pointToHash(t,h)}publicKeyVerify(e){o(null!=e&&!0===e._isBuffer);try{this.curve.decodePoint(e)}catch(e){return!1}return!0}publicKeyExport(e){const{x:t,y:r}=this.curve.decodePoint(e);return{x:this.curve.encodeField(t.fromRed()),y:this.curve.encodeField(r.fromRed())}}publicKeyImport(e,t){o(e&&"object"==typeof e);const r=a.decode(e.x,this.curve.endian);if(r.cmp(this.curve.p)>=0)throw new Error("Invalid point.");if(null!=e.y){const i=a.decode(e.y,this.curve.endian);if(i.cmp(this.curve.p)>=0)throw new Error("Invalid point.");const s=this.curve.point(r,i);if(!s.validate())throw new Error("Invalid point.");return s.encode(t)}return this.curve.pointFromX(r,e.sign).encode(t)}publicKeyTweakAdd(e,t,r){const i=this.curve.decodeScalar(t);if(i.cmp(this.curve.n)>=0)throw new Error("Invalid scalar.");const s=this.curve.decodePoint(e);return this.curve.g.jmul(i).add(s).encode(r)}publicKeyTweakMul(e,t,r){const i=this.curve.decodeScalar(t);if(i.isZero()||i.cmp(this.curve.n)>=0)throw new Error("Invalid scalar.");return this.curve.decodePoint(e).mul(i).encode(r)}publicKeyCombine(e,t){o(Array.isArray(e));let r=this.curve.jpoint();for(const t of e){const e=this.curve.decodePoint(t);r=r.add(e)}return r.encode(t)}publicKeyNegate(e,t){return this.curve.decodePoint(e).neg().encode(t)}signatureNormalize(e){const[t,r]=this._decodeCompact(e);return r.cmp(this.curve.nh)>0&&r.ineg().imod(this.curve.n),this._encodeCompact(t,r)}signatureNormalizeDER(e){const[t,r]=this._decodeDER(e,!1);return r.cmp(this.curve.nh)>0&&r.ineg().imod(this.curve.n),this._encodeDER(t,r)}signatureExport(e){const[t,r]=this._decodeCompact(e);return this._encodeDER(t,r)}signatureImport(e){const[t,r]=this._decodeDER(e,!1);return this._encodeCompact(t,r)}isLowS(e){let t;o(null!=e&&!0===e._isBuffer);try{[,t]=this._decodeCompact(e)}catch(e){return!1}return t.cmp(this.curve.nh)<=0}isLowDER(e){let t;o(null!=e&&!0===e._isBuffer);try{[,t]=this._decodeDER(e,!1)}catch(e){return!1}return t.cmp(this.curve.nh)<=0}sign(e,t){const[r,i]=this._sign(e,t);return this._encodeCompact(r,i)}signRecoverable(e,t){const[r,i,s]=this._sign(e,t);return[this._encodeCompact(r,i),s]}signDER(e,t){const[r,i]=this._sign(e,t);return this._encodeDER(r,i)}signRecoverableDER(e,t){const[r,i,s]=this._sign(e,t);return[this._encodeDER(r,i),s]}_sign(e,t){const{n:r,nh:i}=this.curve,s=this.curve.g,n=this.curve.decodeScalar(t);if(n.isZero()||n.cmp(r)>=0)throw new Error("Invalid private key.");const o=this._reduce(e),a=this.curve.encodeScalar(o),c=new f(this.hash,t,a);for(;;){const e=c.generate(this.curve.scalarSize),t=this._truncate(e);if(t.isZero()||t.cmp(r)>=0)continue;const a=s.mulBlind(t);if(a.isInfinity())continue;const u=a.getX(),f=u.mod(r);if(f.isZero())continue;const l=this.curve.randomScalar(h),d=t.mul(l).fermat(r),p=n.mul(l).imod(r),b=o.mul(l).imod(r),g=f.mul(p).iadd(b).imod(r).mul(d).imod(r);if(g.isZero())continue;let m=a.isOdd()|!u.eq(f)<<1;return g.cmp(i)>0&&(g.ineg().imod(r),m^=1),[f,g,m]}}verify(e,t,r){let i,s;o(null!=e&&!0===e._isBuffer),o(null!=t&&!0===t._isBuffer),o(null!=r&&!0===r._isBuffer);try{[i,s]=this._decodeCompact(t)}catch(e){return!1}try{return this._verify(e,i,s,r)}catch(e){return!1}}verifyDER(e,t,r){let i,s;o(null!=e&&!0===e._isBuffer),o(null!=t&&!0===t._isBuffer),o(null!=r&&!0===r._isBuffer);try{[i,s]=this._decodeDER(t,!1)}catch(e){return!1}try{return this._verify(e,i,s,r)}catch(e){return!1}}_verify(e,t,r,i){const{n:s}=this.curve,n=this.curve.g,o=this._reduce(e),a=this.curve.decodePoint(i);if(t.isZero()||t.cmp(s)>=0)return!1;if(r.isZero()||r.cmp(s)>=0)return!1;const h=r.invert(s),c=o.mul(h).imod(s),u=t.mul(h).imod(s);return n.jmulAdd(c,a,u).eqXToP(t)}recover(e,t,r,i){let s,n,a;o(null!=e&&!0===e._isBuffer),o(null!=t&&!0===t._isBuffer),o(r>>>0===r),o((3&r)===r,"The recovery param is more than two bits.");try{[s,n]=this._decodeCompact(t)}catch(e){return null}try{a=this._recover(e,s,n,r)}catch(e){return null}return a.encode(i)}recoverDER(e,t,r,i){let s,n,a;o(null!=e&&!0===e._isBuffer),o(null!=t&&!0===t._isBuffer),o(r>>>0===r),o((3&r)===r,"The recovery param is more than two bits.");try{[s,n]=this._decodeDER(t,!1)}catch(e){return null}try{a=this._recover(e,s,n,r)}catch(e){return null}return a.encode(i)}_recover(e,t,r,i){const{p:s,n:n}=this.curve,o=this.curve.g,a=this._reduce(e);if(t.isZero()||t.cmp(n)>=0)throw new Error("Invalid R value.");if(r.isZero()||r.cmp(n)>=0)throw new Error("Invalid S value.");const h=0!=(1&i);let c=t;if(i>>>1){if(c.cmp(s.mod(n))>=0)throw new Error("Invalid R value.");c=c.add(n)}const u=this.curve.pointFromX(c,h),f=t.invert(n),l=a.mul(f).ineg().imod(n),d=r.mul(f).imod(n),p=o.mulAdd(l,u,d);if(p.isInfinity())throw new Error("Invalid point.");return p}derive(e,t,r){const i=this.curve.decodePoint(e),s=this.curve.decodeScalar(t);if(s.isZero()||s.cmp(this.curve.n)>=0)throw new Error("Invalid private key.");if(this.curve.h.cmpn(1)>0&&i.isSmall())throw new Error("Invalid point.");return i.mulConst(s,h).encode(r)}schnorrSign(e,t){return this.schnorr.sign(e,t)}schnorrVerify(e,t,r){return this.schnorr.verify(e,t,r)}schnorrVerifyBatch(e){return this.schnorr.verifyBatch(e)}_encodeCompact(e,t){return Buffer.concat([this.curve.encodeScalar(e),this.curve.encodeScalar(t)])}_decodeCompact(e){o(null!=e&&!0===e._isBuffer);const{n:t}=this.curve,r=this.curve.scalarSize;if(e.length!==2*r)throw new Error("Invalid signature size.");const i=e.slice(0,r),s=e.slice(r,2*r),n=this.curve.decodeScalar(i),a=this.curve.decodeScalar(s);if(n.cmp(t)>=0||a.cmp(t)>=0)throw new Error("Invalid signature.");return[n,a]}_encodeDER(e,t){const r=c.sizeInt(e)+c.sizeInt(t),i=Buffer.alloc(c.sizeSeq(r));let s=0;return s=c.writeSeq(i,s,r),s=c.writeInt(i,s,e),s=c.writeInt(i,s,t),o(s===i.length),i}_decodeDER(e,t){o(null!=e&&!0===e._isBuffer),o("boolean"==typeof t);const{n:r}=this.curve;let i,s,n=0;if(n=c.readSeq(e,n,t),[i,n]=c.readInt(e,n,t),[s,n]=c.readInt(e,n,t),t&&n!==e.length)throw new Error("Trailing bytes.");if(i.cmp(r)>=0||s.cmp(r)>=0)throw new Error("Invalid signature.");return[i,s]}_truncate(e){o(null!=e&&!0===e._isBuffer);const t=this.curve.n.bitLength(),r=t+7>>>3;e.length>r&&(e=e.slice(0,r));const i=a.decode(e,this.curve.endian),s=8*e.length-t;return s>0&&i.iushrn(s),i}_reduce(e){return this._truncate(e).imod(this.curve.n)}}}],["bcrypto","/lib/random-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(42,r)}],["bcrypto","/lib/js/random.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(35,r),a=global.crypto||global.msCrypto,h=a&&"function"==typeof a.getRandomValues,c=h?a.getRandomValues.bind(a):null,u=new Uint32Array(1),f=65536;function l(){d(u);const e=u[0];return u[0]=0,e}function d(e){if(!h)throw new Error("Entropy source not available.");return c(e)}function p(e,t,r){if(o(null!=e&&!0===e._isBuffer),o(e.buffer instanceof ArrayBuffer),o(e.byteOffset>>>0===e.byteOffset),o(e.byteLength>>>0===e.byteLength),o(t>>>0===t),o(r>>>0===r),o(t+r<=e.byteLength),r>2**31-1)throw new RangeError('The value "size" is out of range.');const i=e.byteOffset+t,s=new Uint8Array(e.buffer,i,r);if(s.length>f)for(let e=0;e<s.length;e+=f){let t=e+f;t>s.length&&(t=s.length),d(s.subarray(e,t))}else s.length>0&&d(s)}e.native=0,e.randomBytes=function(e){o(e>>>0===e);const t=Buffer.alloc(e);return p(t,0,e),t},e.randomFill=function(e,t,r){return o(null!=e&&!0===e._isBuffer),null==t&&(t=0),o(t>>>0===t),null==r&&(r=e.length-t),o(r>>>0===r),o(t+r<=e.length),e.fill(0,t,t+r),p(e,t,r),e},e.randomInt=l,e.randomRange=function(e,t){o(e>>>0===e),o(t>>>0===t),o(t>=e);const r=t-e;if(0===r)return e;const i=-r>>>0;let s,n;do{n=(s=l())%r}while(s-n>i);return n+e}}],["bcrypto","/lib/internal/asn1.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(44,r),a=__browser_require__(10,r);function h(e,t,r){if(o(null!=e&&!0===e._isBuffer),o(t>>>0===t),o("boolean"==typeof r),t>=e.length)throw new Error("Invalid size.");const i=e[t],s=127&i;if(t+=1,0==(128&i))return[s,t];if(r&&0===s)throw new Error("Indefinite length.");let n=0;for(let i=0;i<s;i++){o(t<e.length);const i=e[t];if(t+=1,n>=1<<24)throw new Error("Length too large.");if(n*=256,n+=i,r&&0===n)throw new Error("Unexpected leading zeroes.")}if(r&&n<128)throw new Error("Non-minimal length.");return[n,t]}function c(e,t,r=!0){if(o(null!=e&&!0===e._isBuffer),o(t>>>0===t),o("boolean"==typeof r),t>=e.length||2!==e[t])throw new Error("Invalid integer tag.");let i;if(t+=1,[i,t]=h(e,t,r),t+i>e.length)throw new Error("Integer body out of bounds.");if(r){if(0===i)throw new Error("Zero length integer.");if(128&e[t])throw new Error("Integers must be positive.");if(i>1&&0===e[t]&&0==(128&e[t+1]))throw new Error("Unexpected leading zeroes.")}for(;i>1&&0===e[t];)t+=1,i-=1;if(i>2048)throw new Error("Invalid integer size.");return[a.decode(e.slice(t,t+i)),t+=i]}function u(e){return o(e>>>0===e),e<=127?1:e<=255?2:(o(e<=65535),3)}function f(e,t,r){return o(null!=e&&!0===e._isBuffer),o(t>>>0===t),o(r>>>0===r),r<=127?e[t++]=r:r<=255?(e[t++]=129,e[t++]=r):(o(r<=65535),e[t++]=130,e[t++]=r>>8,e[t++]=255&r),o(t<=e.length),t}e.readSize=h,e.readSeq=function(e,t,r=!0){if(o(null!=e&&!0===e._isBuffer),o(t>>>0===t),o("boolean"==typeof r),t>=e.length||48!==e[t])throw new Error("Invalid sequence tag.");let i;if(t+=1,[i,t]=h(e,t,r),r&&t+i!==e.length)throw new Error("Trailing bytes.");return t},e.readInt=c,e.readVersion=function(e,t,r,i=!0){let s;if(o(null!=e&&!0===e._isBuffer),o(t>>>0===t),o((255&r)===r),o("boolean"==typeof i),[s,t]=c(e,t,i),0!==s.cmpn(r))throw new Error("Invalid version.");return t},e.sizeSize=u,e.sizeSeq=function(e){return 1+u(e)+e},e.sizeInt=function(e){o(e instanceof a);const t=e.bitLength();let r=t+7>>>3;return t>0&&0==(7&t)&&(r+=e.testn(t-1)),0===t&&(r=1),1+u(r)+r},e.sizeVersion=function(e){return o((255&e)===e),3},e.writeSize=f,e.writeSeq=function(e,t,r){return o(null!=e&&!0===e._isBuffer),o(t>>>0===t),e[t++]=48,f(e,t,r)},e.writeInt=function(e,t,r){o(null!=e&&!0===e._isBuffer),o(t>>>0===t),o(r instanceof a);const i=r.bitLength();let s=i+7>>>3,n=0;return i>0&&0==(7&i)&&(n=r.testn(i-1)),0===i&&(s=1),e[t++]=2,t=f(e,t,n+s),n&&(e[t++]=0),0!==i?r.encode().copy(e,t):e[t]=0,o((t+=s)<=e.length),t},e.writeVersion=function(e,t,r){return o(null!=e&&!0===e._isBuffer),o(t>>>0===t),o((255&r)===r),o(t+3<=e.length),e[t++]=2,e[t++]=1,e[t++]=r,t}}],["bpkg","/lib/builtins/assert.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(45,r),a=__browser_require__(46,r),h=a.isDeepEqual,c=a.isDeepStrictEqual,u={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},f={};function l(e){if("object"!=typeof e||null===e)throw new o.ArgError("options",e,"Object");var t=null,r="fail";null!=e.message&&(t=String(e.message)),"string"==typeof e.operator&&(r=e.operator),null==t&&(t="fail"===r?"Assertion failed.":u[r]+" "+o.stringify(e.actual)+" "+r+" "+o.stringify(e.expected)),Error.call(this,t);var i=l;"function"==typeof e.stackStartFn&&(i=e.stackStartFn),this.name="AssertionError [ERR_ASSERTION]",this.code="ERR_ASSERTION",this.message=t,this.generatedMessage=!e.message,this.actual=e.actual,this.expected=e.expected,this.operator=r,Error.captureStackTrace&&Error.captureStackTrace(this,i)}o.inherits(l,Error);var d=function e(t,r){b(e,arguments.length,t,r)};function p(e){if(e.message instanceof Error)throw e.message;throw new l(e)}function b(e,t,r,i){if(!r){var s=!1;if(0===t)s=!0,i="No value argument passed to `assert.ok()`";else if(null==i)s=!0,i="Assertion failed.";else if(i instanceof Error)throw i;var n=new l({actual:r,expected:!0,message:i,operator:"==",stackStartFn:e});throw n.generatedMessage=s,n}}function g(e,t,r){for(var i=0;i<t.length;i++){var s=t[i];s in e&&(r!==undefined&&"string"==typeof r[s]&&e[s]instanceof RegExp&&e[s].test(r[s])?this[s]=r[s]:this[s]=e[s])}}function m(e,t,r,i,s){if(!(r in e&&c(e[r],t[r]))){if(!i){var n=new l({actual:new g(e,s),expected:new g(t,s,e),operator:"deepStrictEqual",stackStartFn:d.throws});throw n.actual=e,n.expected=t,n.operator="throws",n}p({actual:e,expected:t,message:i,operator:"throws",stackStartFn:d.throws})}}function _(e,t,r){if("function"!=typeof t){if(t instanceof RegExp)return t.test(e);if(2===arguments.length)throw new o.ArgError("expected",t,["Function","RegExp"]);if("object"!=typeof e||null===e){var i=new l({actual:e,expected:t,message:r,operator:"deepStrictEqual",stackStartFn:d.throws});throw i.operator="throws",i}var s=o.getOwnKeys(t);if(t instanceof Error)s.push("name","message");else if(0===s.length)throw new o.ArgError("error",t,"may not be an empty object");for(var n=0;n<s.length;n++){var a=s[n];"string"==typeof e[a]&&t[a]instanceof RegExp&&t[a].test(e[a])||m(e,t,a,r,s)}return!0}return t.prototype!==undefined&&e instanceof t||!(t.prototype instanceof Error)&&!0===t.call({},e)}function w(e){if("function"!=typeof e)throw new o.ArgError("fn",e,"Function");try{e()}catch(e){return e}return f}function y(e){return null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch}function v(e){return new Promise(function(t,r){try{var i;if("function"==typeof e){if(!y(i=e()))throw new o.ArgError("promiseFn",i,"instance of Promise")}else{if(!y(e))throw new o.ArgError("promiseFn",e,["Function","Promise"]);i=e}i.then(function(){t(f)},t)}catch(e){t(e)}})}function E(e,t,r,i){if("string"==typeof r){if(4===arguments.length)throw new o.ArgError("error",r,["Object","Error","Function","RegExp"]);if("object"==typeof t&&null!==t){if(t.message===r)throw new o.NodeError("ERR_AMBIGUOUS_ARGUMENT",'The error message "'+t.message+'" is identical to the message.')}else if(t===r)throw new o.NodeError("ERR_AMBIGUOUS_ARGUMENT",'The error "'+t+'" is identical to the message.');i=r,r=undefined}else if(null!=r&&"object"!=typeof r&&"function"!=typeof r)throw new o.ArgError("error",r,["Object","Error","Function","RegExp"]);if(t===f){var s="";r&&r.name&&(s+=" ("+r.name+")"),s+=i?": "+i:".";var n="rejects"===e.name?"rejection":"exception";p({actual:undefined,expected:r,operator:e.name,message:"Missing expected "+n+s,stackStartFn:e})}if(r&&!1===_(t,r,i))throw t}function S(e,t,r,i){if(t!==f){if("string"==typeof r&&(i=r,r=undefined),!r||_(t,r)){var s=i?": "+i:".",n="doesNotReject"===e.name?"rejection":"exception";p({actual:t,expected:r,operator:e.name,message:"Got unwanted "+n+s+'\nActual message: "'+(t&&t.message)+'"',stackStartFn:e})}throw t}}d.AssertionError=l,d.ok=d,d.fail=function e(t,r,i,s,n){var o,a=arguments.length;if(0===a?o="Failed":1===a?(i=t,t=undefined):2===a&&(s="!="),i instanceof Error)throw i;var h={actual:t,expected:r,operator:s===undefined?"fail":s,stackStartFn:n||e};i!==undefined&&(h.message=i);var c=new l(h);throw o&&(c.message=o,c.generatedMessage=!0),c},d.equal=function e(t,r,i){t!=r&&p({actual:t,expected:r,message:i,operator:"==",stackStartFn:e})},d.notEqual=function e(t,r,i){t==r&&p({actual:t,expected:r,message:i,operator:"!=",stackStartFn:e})},d.deepEqual=function e(t,r,i){h(t,r)||p({actual:t,expected:r,message:i,operator:"deepEqual",stackStartFn:e})},d.notDeepEqual=function e(t,r,i){h(t,r)&&p({actual:t,expected:r,message:i,operator:"notDeepEqual",stackStartFn:e})},d.deepStrictEqual=function e(t,r,i){c(t,r)||p({actual:t,expected:r,message:i,operator:"deepStrictEqual",stackStartFn:e})},d.notDeepStrictEqual=function e(t,r,i){c(t,r)&&p({actual:t,expected:r,message:i,operator:"notDeepStrictEqual",stackStartFn:e})},d.strictEqual=function e(t,r,i){o.equals(t,r)||p({actual:t,expected:r,message:i,operator:"strictEqual",stackStartFn:e})},d.notStrictEqual=function e(t,r,i){o.equals(t,r)&&p({actual:t,expected:r,message:i,operator:"notStrictEqual",stackStartFn:e})},d.throws=function e(t,r,i){E(e,w(t),r,i)},d.rejects=function e(t,r,i){return new Promise(function(s,n){v(t).then(function(t){try{E(e,t,r,i)}catch(e){return void n(e)}s()})})},d.doesNotThrow=function e(t,r,i){S(e,w(t),r,i)},d.doesNotReject=function e(t,r,i){return new Promise(function(s,n){v(t).then(function(t){try{S(e,t,r,i)}catch(e){return void n(e)}s()})})},d.ifError=function e(t){if(null!==t&&t!==undefined){var r="ifError got unwanted exception: ";"object"==typeof t&&"string"==typeof t.message?0===t.message.length&&t.constructor?r+=t.constructor.name:r+=t.message:r+=o.stringify(t);var i=new l({actual:t,expected:null,operator:"ifError",message:r,stackStartFn:e}),s=t.stack;if("string"==typeof s){var n=s.split("\n");n.shift();for(var a=i.stack.split("\n"),h=0;h<n.length;h++){var c=a.indexOf(n[h]);if(-1!==c){a=a.slice(0,c);break}}i.stack=a.join("\n")+"\n"+n.join("\n")}throw i}},d.strict=o.assign(function e(t,r){b(e,arguments.length,t,r)},d,{equal:d.strictEqual,deepEqual:d.deepStrictEqual,notEqual:d.notStrictEqual,notDeepEqual:d.notDeepStrictEqual}),d.strict.strict=d.strict,r.exports=d}],["bpkg","/lib/builtins/internal/util.js",function(e,t,r,i,s,n){"use strict";var o="function"==typeof ArrayBuffer,a="function"==typeof SharedArrayBuffer,h="function"==typeof BigInt,c="function"==typeof Symbol,u="function"==typeof Float32Array,f="function"==typeof Float64Array,l="function"==typeof Map,d="function"==typeof Set,p=1==={__proto__:{a:1}}.a;function b(e){var t;try{t=e.name}catch(e){}return"string"!=typeof t||0===t.length?"Function":"Function: "+t}function g(e){if(Object.keys)return Object.keys(e);var t,r=[];for(t in e)w.call(e,t)&&r.push(t);return r}function m(e){return Object.getOwnPropertyNames?Object.getOwnPropertyNames(e):g(e)}function _(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]}function w(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function y(e){return!!(o&&e instanceof ArrayBuffer)||!!(a&&e instanceof SharedArrayBuffer)}function v(e){return Array.isArray?Array.isArray(e):e instanceof Array}function E(e){return h&&e instanceof BigInt}function S(e){return e instanceof Boolean}function I(e){return e instanceof Number}function k(e){return e instanceof String}function A(e){return c&&e instanceof Symbol}function O(e,t){if(Object.setPrototypeOf)return Object.setPrototypeOf(e,t),void Object.setPrototypeOf(e.prototype,t.prototype);if(p)return e.__proto__=t,void(e.prototype.__proto__=t.prototype);if(Object.create)e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});else{var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}function x(e,t){if(!Object.getOwnPropertyDescriptor)return w(e,t);var r=Object.getOwnPropertyDescriptor(e,t);return null!=r&&!0===r.enumerable}function R(e){return M(e).slice(8,-1)}function M(e){return e===undefined?"[object Undefined]":null===e?"[object Null]":Object.prototype.toString.call(e)}function P(e,t,r){var i;if(v(r)&&1===r.length&&(r=r[0]),v(r)){var s=r.pop();i='The "'+e+'" argument must be one of type '+r.join(", ")+", or "+s+". Received type "+typeof t}else i='The "'+e+'" argument must be of type '+r+". Received type "+typeof t;TypeError.call(this,i),this.name="TypeError [ERR_INVALID_ARG_TYPE]",this.code="ERR_INVALID_ARG_TYPE",this.message=i,Error.captureStackTrace&&Error.captureStackTrace(this,P)}function B(e,t){Error.call(this,t),this.name="Error ["+e+"]",this.code=e,this.message=t,Error.captureStackTrace&&Error.captureStackTrace(this,B)}O(P,TypeError),O(B,Error),e.assign=function(e){if(Object.assign)return Object.assign.apply(Object,arguments);for(var t=1;t<arguments.length;t++){var r=arguments[t];if(null!==r&&"object"==typeof r)for(var i=g(r),s=0;s<i.length;s++)e[i[s]]=r[i[s]]}return e},e.equals=function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t},e.filter=function(e,t){if(e.filter)return e.filter(t);for(var r=[],i=0;i<e.length;i++)t(e[i])&&r.push(e[i]);return r},e.funcName=b,e.getOwnKeys=g,e.getOwnNonIndexProperties=function(e,t){var r,i,s,n=e.length>>>0===e.length,o=t?g(e):m(e),a=[];for(r=0;r<o.length;r++)i=o[r],n&&/^\d+$/.test(i)&&i>>>0<e.length||a.push(i);for(s=_(e),r=0;r<s.length;r++)i=s[r],t&&!x(e,i)||a.push(i);return a},e.getOwnPropertyNames=m,e.getOwnPropertySymbols=_,e.getPrototypeOf=function(e){return Object.getPrototypeOf?Object.getPrototypeOf(e):null==e?undefined:p?e.__proto__:e.constructor?e.constructor.prototype:undefined},e.hasOwnProperty=w,e.isAnyArrayBuffer=y,e.isArray=v,e.isArrayBufferView=function(e){return!!o&&null!=e&&(ArrayBuffer.isView?ArrayBuffer.isView(e):y(e.buffer))},e.isBigIntObject=E,e.isBooleanObject=S,e.isBoxedPrimitive=function(e){return null!==e&&"object"==typeof e&&(I(e)||k(e)||S(e)||E(e)||A(e))},e.isDate=function(e){return e instanceof Date},e.isFloat32Array=function(e){return u&&e instanceof Float32Array},e.isFloat64Array=function(e){return f&&e instanceof Float64Array},e.isMap=function(e){return l&&e instanceof Map},e.isNaN=function(e){return e!=e},e.isNumberObject=I,e.isRegExp=function(e){return e instanceof RegExp},e.isSet=function(e){return d&&e instanceof Set},e.isStringObject=k,e.isSymbolObject=A,e.inherits=O,e.propertyIsEnumerable=x,e.stringify=function(e){switch(typeof e){case"undefined":case"boolean":case"number":case"symbol":return String(e);case"bigint":return e+"n";case"string":return e.length>20&&(e=e.substring(0,17)+"..."),'"'+e+'"';case"object":return null===e?"null":"["+R(e)+"]";case"function":return"["+b(e)+"]";default:return"["+typeof e+"]"}},e.toName=R,e.toString=M,e.ArgError=P,e.NodeError=B}],["bpkg","/lib/builtins/internal/comparisons.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(45,r),a=!0,h=!1,c=0,u=1,f=2,l=3;function d(e,t,r,i){if(e===t)return 0!==e||(!r||o.equals(e,t));if(r){if("object"!=typeof e)return"number"==typeof e&&o.isNaN(e)&&o.isNaN(t);if("object"!=typeof t||null===e||null===t)return!1;if(o.getPrototypeOf(e)!==o.getPrototypeOf(t))return!1}else{if(null===e||"object"!=typeof e)return(null===t||"object"!=typeof t)&&e==t;if(null===t||"object"!=typeof t)return!1}var s,n,a,h,d,b,g=o.toString(e);if(g!==o.toString(t))return!1;if(o.isArray(e))return e.length===t.length&&(s=o.getOwnNonIndexProperties(e,!0),n=o.getOwnNonIndexProperties(t,!0),s.length===n.length&&p(e,t,r,i,u,s));if("[object Object]"===g)return p(e,t,r,i,c);if(o.isDate(e)){if(e.getTime()!==t.getTime())return!1}else if(o.isRegExp(e)){if(b=t,(d=e).source!==b.source||d.flags!==b.flags)return!1}else if(e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else{if(o.isArrayBufferView(e)){if(r||!o.isFloat32Array(e)&&!o.isFloat64Array(e)){if(!function(e,t){return e.byteLength===t.byteLength&&v(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}(e,t))return!1}else if(!function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e,t))return!1;return s=o.getOwnNonIndexProperties(e,!0),n=o.getOwnNonIndexProperties(t,!0),s.length===n.length&&p(e,t,r,i,c,s)}if(o.isSet(e))return!(!o.isSet(t)||e.size!==t.size)&&p(e,t,r,i,f);if(o.isMap(e))return!(!o.isMap(t)||e.size!==t.size)&&p(e,t,r,i,l);if(o.isAnyArrayBuffer(e)){if(h=t,(a=e).byteLength!==h.byteLength||!v(new Uint8Array(a),new Uint8Array(h)))return!1}else if(o.isBoxedPrimitive(e)&&!function(e,t){if(o.isNumberObject(e))return o.isNumberObject(t)&&o.equals(e,t);if(o.isStringObject(e))return o.isStringObject(t)&&e.valueOf()===t.valueOf();if(o.isBooleanObject(e))return o.isBooleanObject(t)&&e.valueOf()===t.valueOf();return o.isBigIntObject(e)?o.isBigIntObject(t)&&e.valueOf()===t.valueOf():o.isSymbolObject(t)&&e.valueOf()===t.valueOf()}(e,t))return!1}return p(e,t,r,i,c)}function p(e,t,r,i,s,n){if(5===arguments.length){n=o.getOwnKeys(e);var a=o.getOwnKeys(t);if(n.length!==a.length)return!1}for(var h=0;h<n.length;h++)if(!o.hasOwnProperty(t,n[h]))return!1;if(r&&5===arguments.length){var p,y=o.getOwnPropertySymbols(e);if(0!==y.length){var v=0;for(h=0;h<y.length;h++){var S=y[h];if(o.propertyIsEnumerable(e,S)){if(!o.propertyIsEnumerable(t,S))return!1;n.push(S),v++}else if(o.propertyIsEnumerable(t,S))return!1}if(p=o.getOwnPropertySymbols(t),y.length!==p.length&&b(t,p).length!==v)return!1}else if(0!==(p=o.getOwnPropertySymbols(t)).length&&0!==b(t,p).length)return!1}if(0===n.length&&(s===c||s===u&&0===e.length||0===e.size))return!0;if(i===undefined)i={val1:E(),val2:E(),position:0};else{var I=i.val1.get(e);if(I!==undefined){var k=i.val2.get(t);if(k!==undefined)return I===k}i.position++}i.val1.set(e,i.position),i.val2.set(t,i.position);var A=function(e,t,r,i,s,n){var a,h=0;if(n===f){if(!function(e,t,r,i){var s,n,o,a=null;for(s=e.keys();!(n=s.next()).done;)if("object"==typeof(o=n.value)&&null!==o)null===a&&(a=new Set),a.add(o);else if(!t.has(o)){if(r)return!1;if(!m(e,t,o))return!1;null===a&&(a=new Set),a.add(o)}if(null!==a){for(s=t.keys();!(n=s.next()).done;)if("object"==typeof(o=n.value)&&null!==o){if(!g(a,o,r,i))return!1}else if(!r&&!e.has(o)&&!g(a,o,r,i))return!1;return 0===a.size}return!0}(e,t,r,s))return!1}else if(n===l){if(!function(e,t,r,i){var s,n,o=null;for(s=e.entries();!(n=s.next()).done;){var a=n.value[0],h=n.value[1];if("object"==typeof a&&null!==a)null===o&&(o=new Set),o.add(a);else{var c=t.get(a);if(c===undefined&&!t.has(a)||!d(h,c,r,i)){if(r)return!1;if(!_(e,t,a,h,i))return!1;null===o&&(o=new Set),o.add(a)}}}if(null!==o){for(s=t.entries();!(n=s.next()).done;){var u=n.value[0],f=n.value[1];if("object"==typeof u&&null!==u){if(!w(o,e,u,f,r,i))return!1}else if(!(r||e.has(u)&&d(e.get(u),f,!1,i)||w(o,e,u,f,!1,i)))return!1}return 0===o.size}return!0}(e,t,r,s))return!1}else if(n===u)for(;h<e.length;h++){if(!o.hasOwnProperty(e,h)){if(o.hasOwnProperty(t,h))return!1;for(var c=o.getOwnKeys(e);h<c.length;h++)if(a=c[h],!o.hasOwnProperty(t,a)||!d(e[a],t[a],r,s))return!1;return c.length===o.getOwnKeys(t).length}if(!o.hasOwnProperty(t,h)||!d(e[h],t[h],r,s))return!1}for(h=0;h<i.length;h++)if(a=i[h],!d(e[a],t[a],r,s))return!1;return!0}(e,t,r,n,i,s);return i.val1.delete(e),i.val2.delete(t),A}function b(e,t){return o.filter(t,function(t){return o.propertyIsEnumerable(e,t)})}function g(e,t,r,i){for(var s=e.keys();;){var n=s.next();if(n.done)break;var o=n.value;if(d(t,o,r,i))return e.delete(o),!0}return!1}function m(e,t,r){var i=y(r);return null!=i?i:t.has(i)&&!e.has(i)}function _(e,t,r,i,s){var n=y(r);if(null!=n)return n;var o=t.get(n);return!(o===undefined&&!t.has(n)||!d(i,o,!1,s))&&(!e.has(n)&&d(i,o,!1,s))}function w(e,t,r,i,s,n){for(var o=e.keys();;){var a=o.next();if(a.done)break;var h=a.value;if(d(r,h,s,n)&&d(i,t.get(h),s,n))return e.delete(h),!0}return!1}function y(e){switch(typeof e){case"undefined":return null;case"object":return undefined;case"symbol":return!1;case"string":e=Number(e);case"number":if(o.isNaN(e))return!1}return!0}function v(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function E(){return"function"==typeof Map?new Map:new S}function S(){this.keys=[],this.values=[]}S.prototype.get=function(e){var t=this.keys.indexOf(e);return-1!==t?this.values[t]:undefined},S.prototype.set=function(e,t){var r=this.keys.indexOf(e);if(-1===r)return this.keys.push(e),void this.values.push(t);this.values[r]=t},S.prototype.delete=function(e){var t=this.keys.indexOf(e);-1!==t&&(this.keys.splice(t,1),this.values.splice(t,1))},e.isDeepEqual=function(e,t){return d(e,t,h)},e.isDeepStrictEqual=function(e,t){return d(e,t,a)}}],["bcrypto","/lib/js/schnorr-legacy.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(35,r),a=__browser_require__(48,r),h=__browser_require__(10,r);r.exports=class{constructor(e,t){this.curve=e,this.hash=t,this.rng=new a(this.curve,this.encode.bind(this))}check(){if(3!==this.curve.p.andln(3))throw new Error(`Schnorr is not supported for ${this.curve.id}.`)}encode(e){o(null!=e&&!0===e._isBuffer);const{fieldSize:t}=this.curve;if(e.length===1+t)return e;if(e.length!==1+2*t)throw new Error("Invalid point.");const r=Buffer.allocUnsafe(1+t);return r[0]=2|1&e[e.length-1],e.copy(r,1,1,1+t),r}hashInt(...e){const t=new this.hash;t.init();for(const r of e)t.update(r);let r=t.final();return r.length>this.curve.scalarSize&&(r=r.slice(0,this.curve.scalarSize)),h.decode(r,this.curve.endian).imod(this.curve.n)}hashNonce(e,t){return this.hashInt(e,t)}hashChallenge(e,t,r){return this.hashInt(e,this.encode(t),r)}sign(e,t){return o(null!=e&&!0===e._isBuffer),this.check(),this._sign(e,t)}_sign(e,t){const{n:r}=this.curve,i=this.curve.g,s=this.curve.decodeScalar(t);if(s.isZero()||s.cmp(r)>=0)throw new Error("Invalid private key.");const n=i.mulBlind(s),o=this.hashNonce(t,e);if(o.isZero())throw new Error("Signing failed (k' = 0).");const a=i.mulBlind(o);a.isSquare()||o.ineg().imod(r);const h=a.encodeX(),c=n.encode(),u=this.hashChallenge(h,c,e),f=o.add(u.mul(s)).imod(r);return Buffer.concat([h,this.curve.encodeScalar(f)])}verify(e,t,r){if(o(null!=e&&!0===e._isBuffer),o(null!=t&&!0===t._isBuffer),o(null!=r&&!0===r._isBuffer),this.check(),t.length!==this.curve.fieldSize+this.curve.scalarSize)return!1;try{return this._verify(e,t,r)}catch(e){return!1}}_verify(e,t,r){const{p:i,n:s}=this.curve,n=this.curve.g,o=t.slice(0,this.curve.fieldSize),a=t.slice(this.curve.fieldSize),h=this.curve.decodeField(o),c=this.curve.decodeScalar(a),u=this.curve.decodePoint(r);if(h.cmp(i)>=0||c.cmp(s)>=0)return!1;const f=this.hashChallenge(o,r,e),l=n.jmulAdd(c,u,f.ineg().imod(s));return!!l.isSquare()&&!!l.eqX(h)}verifyBatch(e){o(Array.isArray(e)),this.check();for(const t of e){o(Array.isArray(t)&&3===t.length);const[e,r,i]=t;if(o(null!=e&&!0===e._isBuffer),o(null!=r&&!0===r._isBuffer),o(null!=i&&!0===i._isBuffer),r.length!==this.curve.fieldSize+this.curve.scalarSize)return!1}try{return this._verifyBatch(e)}catch(e){return!1}}_verifyBatch(e){const{n:t}=this.curve,r=this.curve.g,i=new Array(1+2*e.length),s=new Array(1+2*e.length),n=new h(0);this.rng.init(e),i[0]=r,s[0]=n;for(let r=0;r<e.length;r++){const[o,a,h]=e[r],c=a.slice(0,this.curve.fieldSize),u=a.slice(this.curve.fieldSize),f=this.curve.decodeSquare(c),l=this.curve.decodeScalar(u),d=this.curve.decodePoint(h);if(l.cmp(t)>=0)return!1;const p=this.hashChallenge(c,h,o),b=this.rng.generate(r),g=p.mul(b).imod(t);n.iadd(l.mul(b)).imod(t),i[1+2*r+0]=f,s[1+2*r+0]=b,i[1+2*r+1]=d,s[1+2*r+1]=g}return n.ineg().imod(t),this.curve.jmulAll(i,s).isInfinity()}}}],["bcrypto","/lib/js/batch-rng.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(35,r),a=__browser_require__(10,r),h=__browser_require__(49,r),c=__browser_require__(51,r);r.exports=class{constructor(e,t=(e=>e)){this.curve=e,this.encode=t,this.hash=new c,this.chacha=new h,this.key=Buffer.alloc(32,0),this.iv=Buffer.alloc(8,0),this.cache=[new a(1),new a(1)]}init(e){o(Array.isArray(e)),this.hash.init();for(const[t,r,i]of e)this.hash.update(c.digest(t)),this.hash.update(r),this.hash.update(this.encode(i));return this.key=this.hash.final(),this.cache[0]=new a(1),this.cache[1]=new a(1),this}encrypt(e){const t=2*this.curve.scalarSize,r=Buffer.alloc(t,0),i=r.slice(0,this.curve.scalarSize),s=r.slice(this.curve.scalarSize);return this.chacha.init(this.key,this.iv,e),this.chacha.encrypt(r),[this.curve.decodeScalar(i),this.curve.decodeScalar(s)]}refresh(e){let t=0;for(;;){this.iv[4]=t,this.iv[5]=t>>>8,this.iv[6]=t>>>16,this.iv[7]=t>>>24,t+=1;const[r,i]=this.encrypt(e);if(!(r.isZero()||r.cmp(this.curve.n)>=0||i.isZero()||i.cmp(this.curve.n)>=0)){this.cache[0]=r,this.cache[1]=i;break}}}generate(e){return o(e>>>0===e),1&e&&this.refresh(e>>>1),this.cache[1&e]}}}],["bcrypto","/lib/chacha20-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(50,r)}],["bcrypto","/lib/js/chacha20.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(35,r),a=0===new Int8Array(new Int16Array([1]).buffer)[0];class h{constructor(){this.state=new Uint32Array(16),this.stream=new Uint32Array(16),this.bytes=new Uint8Array(this.stream.buffer),this.pos=-1,a&&(this.bytes=Buffer.alloc(64))}init(e,t,r){if(null==r&&(r=0),o(null!=e&&!0===e._isBuffer),o(null!=t&&!0===t._isBuffer),o(Number.isSafeInteger(r)),16!==e.length&&32!==e.length)throw new RangeError("Invalid key size.");if(t.length>=24&&(e=h.derive(e,t.slice(0,16)),t=t.slice(16)),this.state[0]=1634760805,this.state[1]=e.length<32?824206446:857760878,this.state[2]=e.length<32?2036477238:2036477234,this.state[3]=1797285236,this.state[4]=f(e,0),this.state[5]=f(e,4),this.state[6]=f(e,8),this.state[7]=f(e,12),this.state[8]=f(e,16%e.length),this.state[9]=f(e,20%e.length),this.state[10]=f(e,24%e.length),this.state[11]=f(e,28%e.length),this.state[12]=r>>>0,8===t.length)this.state[13]=r/4294967296>>>0,this.state[14]=f(t,0),this.state[15]=f(t,4);else if(12===t.length)this.state[13]=f(t,0),this.state[14]=f(t,4),this.state[15]=f(t,8);else{if(16!==t.length)throw new RangeError("Invalid nonce size.");this.state[12]=f(t,0),this.state[13]=f(t,4),this.state[14]=f(t,8),this.state[15]=f(t,12)}return this.pos=0,this}encrypt(e){if(o(null!=e&&!0===e._isBuffer),-1===this.pos)throw new Error("Context is not initialized.");for(let t=0;t<e.length;t++)0==(63&this.pos)&&(this._block(),this.pos=0),e[t]^=this.bytes[this.pos++];return e}_block(){for(let e=0;e<16;e++)this.stream[e]=this.state[e];for(let e=0;e<10;e++)c(this.stream,0,4,8,12),c(this.stream,1,5,9,13),c(this.stream,2,6,10,14),c(this.stream,3,7,11,15),c(this.stream,0,5,10,15),c(this.stream,1,6,11,12),c(this.stream,2,7,8,13),c(this.stream,3,4,9,14);for(let e=0;e<16;e++)this.stream[e]+=this.state[e];if(a)for(let e=0;e<16;e++)l(this.bytes,this.stream[e],4*e);this.state[12]+=1,0===this.state[12]&&(this.state[13]+=1)}destroy(){for(let e=0;e<16;e++)this.state[e]=0,this.stream[e]=0;if(a)for(let e=0;e<64;e++)this.bytes[e]=0;return this.pos=-1,this}static derive(e,t){if(o(null!=e&&!0===e._isBuffer),o(null!=t&&!0===t._isBuffer),16!==e.length&&32!==e.length)throw new RangeError("Invalid key size.");if(16!==t.length)throw new RangeError("Invalid nonce size.");const r=new Uint32Array(16);r[0]=1634760805,r[1]=e.length<32?824206446:857760878,r[2]=e.length<32?2036477238:2036477234,r[3]=1797285236,r[4]=f(e,0),r[5]=f(e,4),r[6]=f(e,8),r[7]=f(e,12),r[8]=f(e,16%e.length),r[9]=f(e,20%e.length),r[10]=f(e,24%e.length),r[11]=f(e,28%e.length),r[12]=f(t,0),r[13]=f(t,4),r[14]=f(t,8),r[15]=f(t,12);for(let e=0;e<10;e++)c(r,0,4,8,12),c(r,1,5,9,13),c(r,2,6,10,14),c(r,3,7,11,15),c(r,0,5,10,15),c(r,1,6,11,12),c(r,2,7,8,13),c(r,3,4,9,14);const i=Buffer.alloc(32);return l(i,r[0],0),l(i,r[1],4),l(i,r[2],8),l(i,r[3],12),l(i,r[12],16),l(i,r[13],20),l(i,r[14],24),l(i,r[15],28),i}}function c(e,t,r,i,s){e[t]+=e[r],e[s]=u(e[s]^e[t],16),e[i]+=e[s],e[r]=u(e[r]^e[i],12),e[t]+=e[r],e[s]=u(e[s]^e[t],8),e[i]+=e[s],e[r]=u(e[r]^e[i],7)}function u(e,t){return e<<t|e>>>32-t}function f(e,t){return e[t++]+256*e[t++]+65536*e[t++]+16777216*e[t]}function l(e,t,r){return e[r++]=t,t>>>=8,e[r++]=t,t>>>=8,e[r++]=t,t>>>=8,e[r++]=t,r}h.native=0,r.exports=h}],["bcrypto","/lib/sha256-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(36,r)}],["bcrypto","/lib/hmac-drbg.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(35,r),a=281474976710656,h=Buffer.from([0]),c=Buffer.from([1]);class u{constructor(e,t,r,i){o(e&&"string"==typeof e.id),this.hash=e,this.minEntropy="SHA1"===e.id?10:24,this.K=Buffer.allocUnsafe(e.size),this.V=Buffer.allocUnsafe(e.size),this.rounds=0,t&&this.init(t,r,i)}init(e,t=null,r=null){o(null!=e&&!0===e._isBuffer),o(!t||null!=t&&!0===t._isBuffer),o(!r||null!=r&&!0===r._isBuffer);for(let e=0;e<this.V.length;e++)this.K[e]=0,this.V[e]=1;const i=f(e,t,r);if(i.length<this.minEntropy)throw new Error("Not enough entropy.");return this.update(i),this.rounds=1,this}reseed(e,t=null){if(o(null!=e&&!0===e._isBuffer),o(!t||null!=t&&!0===t._isBuffer),0===this.rounds)throw new Error("DRBG not initialized.");const r=f(e,t);if(r.length<this.minEntropy)throw new Error("Not enough entropy.");return this.update(r),this.rounds=1,this}generate(e,t=null){if(o(e>>>0===e),o(!t||null!=t&&!0===t._isBuffer),0===this.rounds)throw new Error("DRBG not initialized.");if(this.rounds>a)throw new Error("Reseed is required.");t&&0===t.length&&(t=null),t&&this.update(t);const r=Math.ceil(e/this.hash.size),i=Buffer.allocUnsafe(r*this.hash.size);for(let e=0;e<r;e++)this.V=this.mac(this.V),this.V.copy(i,e*this.hash.size);return this.update(t),this.rounds+=1,i.slice(0,e)}randomBytes(e){return this.generate(e)}mac(e){return this.hash.mac(e,this.K)}hmac(){return this.hash.hmac().init(this.K)}update(e=null){o(!e||null!=e&&!0===e._isBuffer);const t=this.hmac();if(t.update(this.V),t.update(h),e&&t.update(e),this.K=t.final(),this.V=this.mac(this.V),e){const t=this.hmac();t.update(this.V),t.update(c),t.update(e),this.K=t.final(),this.V=this.mac(this.V)}return this}}function f(e,t=null,r=null){if(!t&&!r)return e;let i=e.length,s=0;t&&(i+=t.length),r&&(i+=r.length);const n=Buffer.allocUnsafe(i);return s+=e.copy(n,s),t&&(s+=t.copy(n,s)),r&&r.copy(n,s),n}u.native=0,r.exports=u}],["bcrypto","/lib/js/elliptic.js",function(e,t,r,i,s,n){"use strict";const{custom:o}=__browser_require__(12,r),a=__browser_require__(10,r),h={AFFINE:0,JACOBIAN:1,PROJECTIVE:2,EXTENDED:3},c=[-3,-1,-5,-7,0,7,5,1,3];class u{constructor(e,t,r){this.Point=null,this.id=null,this.ossl=null,this.type="base",this.endian="be",this.hash=null,this.prefix=null,this.context=!1,this.prime=null,this.p=null,this.red=null,this.fieldSize=0,this.fieldBits=0,this.signBit=0,this.n=null,this.h=null,this.q=null,this.z=null,this.g=null,this.nh=null,this.scalarSize=0,this.scalarBits=0,this.mask=null,this.zero=null,this.one=null,this.two=null,this.three=null,this.four=null,this.i2=null,this.i3=null,this.i4=null,this.i6=null,this.endo=null,this.hi=null,this._init(e,t,r)}_init(e,t,r){return P("function"==typeof e),P("string"==typeof t),P(r&&"object"==typeof r),P(null==r.red||r.red instanceof a.Red),P(null!=r.p,"Must pass a prime."),P(null==r.id||"string"==typeof r.id),P(null==r.ossl||"string"==typeof r.ossl),P(null==r.endian||"string"==typeof r.endian),P(null==r.hash||"string"==typeof r.hash),P(null==r.prefix||"string"==typeof r.prefix),P(null==r.context||"boolean"==typeof r.context),P(null==r.prime||"string"==typeof r.prime),this.Point=e,this.id=r.id||null,this.ossl=r.ossl||null,this.type=t,this.endian=r.endian||("short"===t?"be":"le"),this.hash=r.hash||null,this.prefix=r.prefix?Buffer.from(r.prefix,"binary"):null,this.context=r.context||!1,this.prime=r.prime||null,this.p=a.fromJSON(r.p),r.red?this.red=r.red:(this.red=r.prime?a.red(r.prime):a.mont(this.p),this.red.precompute()),this.fieldSize=this.p.byteLength(),this.fieldBits=this.p.bitLength(),this.signBit=8*this.fieldSize-1,"edwards"===this.type&&this.p.testn(this.signBit)&&(this.fieldSize+=1,this.signBit+=8),this.n=a.fromJSON(r.n||"0"),this.h=a.fromJSON(r.h||"1"),this.q=this.n.mul(this.h),this.z=a.fromJSON(r.z||"0").toRed(this.red),this.g=null,this.nh=this.n.ushrn(1),this.scalarSize=Math.max(this.n.byteLength(),this.p.byteLength()),this.scalarBits=this.n.bitLength(),this.mask=null,this.zero=new a(0).toRed(this.red),this.one=new a(1).toRed(this.red),this.two=new a(2).toRed(this.red),this.three=new a(3).toRed(this.red),this.four=new a(4).toRed(this.red),this.i2=this.two.redInvert(),this.i3=this.three.redInvert(),this.i4=this.i2.redSqr(),this.i6=this.i2.redMul(this.i3),this.endo=null,this.hi=null,this._scale=C(this._scale,this),this.isIsomorphic=C(this.isIsomorphic,this),this.isIsogenous=C(this.isIsogenous,this),P(this.p.sign()>0&&this.p.isOdd()),P(this.n.sign()>=0),P(this.h.sign()>0&&this.h.cmpn(255)<=0),P("be"===this.endian||"le"===this.endian),this}_finalize(e){return P(e&&"object"==typeof e),this.mask=new y(this),this.g=e.g?this.pointFromJSON(e.g):this.point(),this}_simpleMul(e,t){P(e instanceof f),P(t instanceof a),P(!t.red);const r=t.bitLength();t.isNeg()&&(e=e.neg());let i=this.jpoint();for(let s=r-1;s>=0;s--){const r=t.utestn(s);i=i.dbl(),1===r&&(i=i.add(e))}return i}_simpleMulAdd(e,t){P(Array.isArray(e)),P(Array.isArray(t)),P(e.length===t.length);const r=e.length,i=new Array(r),s=t;let n=0;for(let s=0;s<r;s++){const r=e[s],o=t[s];if(P(r instanceof f),P(o instanceof a),P(!o.red),s>0&&r.type!==e[s-1].type)throw new Error("Cannot mix points.");i[s]=o.isNeg()?r.neg():r,n=Math.max(n,o.bitLength())}let o=this.jpoint();for(let e=n-1;e>=0;e--){o=o.dbl();for(let t=0;t<r;t++){const r=i[t];1===s[t].utestn(e)&&(o=o.add(r))}}return o}_constMul(e,t,r){return P(e instanceof f),this.n.isZero()?this._simpleMul(e,t):"short"===this.type&&0===this.h.cmpn(1)?this._coZLadderMul(e,t):this._ladderMul(e,t)}_ladderMul(e,t){P(e instanceof f),P(t instanceof a),P(!t.red);const[r,i,s]=function(e,t){P(e instanceof a),P(t instanceof a);const r=e.abs().add(t),i=r.add(t),s=r.bitLength(),n=t.bitLength();r.cinject(i,s-n-1>>>31);const o=1&e.isNeg(),h=r.bitLength(),c=r.toArray("le");return[o,h,c]}(t,this.q);let n=e.toJ().clone(),o=this.jpoint().clone(),h=0;for(let e=i-1;e>=0;e--){const t=s[e>>3]>>(7&e)&1;n.swap(o,h^t),n=n.uadd(o),o=o.udbl(),h=t}return n.swap(o,h),o.swap(o.neg(),r),o}_coZLadderMul(e,t){P(e instanceof f),P(t instanceof a),P(!t.red);const r=e.toJ().clone(),[i,s,n,o]=function(e,t){P(e instanceof a),P(t instanceof a);const r=e.mod(t),i=t.sub(r),s=r.bitLength(),n=i.bitLength(),o=s-n>>>31;r.cinject(i,o);const h=r.bitLength(),c=r.toArray("le"),u=r.ceq(t.subn(1));return[o,h,c,u]}(t,this.n);let[h,c]=r.zdblu(),u=0;for(let e=s-2;e>=0;e--){const t=n[e>>3]>>(7&e)&1;h.swap(c,u^t),[h,c]=c.zaddc(h),[c,h]=h.zaddu(c),u=t}return h.swap(c,u),c.swap(r.neg(),o),c.swap(c.neg(),i),c}_fixedNafMul(e,t){P(e instanceof f),P(t instanceof a),P(e.pre);const{step:r,points:i}=e._getDoubles(0,0),s=function(e,t,r,i){P(i>>>0===i);const s=R(e,t,r),n=Math.ceil(s.length/i),o=new Array(n);let a=0;for(let e=0;e<s.length;e+=i){let t=0;for(let r=e+i-1;r>=e;r--)t=(t<<1)+s[r];o[a++]=t}return P(a===n),o}(t,1,t.bitLength()+1,r),n=((1<<r+1)-(r%2==0?2:1))/3;let o=this.jpoint(),h=this.jpoint();for(let e=n;e>0;e--){for(let t=0;t<s.length;t++){const r=s[t];r===e?h=h.add(i[t]):r===-e&&(h=h.add(i[t].neg()))}o=o.add(h)}return o}_wnafMul(e,t,r){P(t instanceof f),P(r instanceof a);const{width:i,points:s}=t._safeNAF(e),n=R(r,i,r.bitLength()+1);let o=this.jpoint();for(let e=n.length-1;e>=0;e--){let t=0;for(;e>=0&&0===n[e];e--)t+=1;if(e>=0&&(t+=1),o=o.dblp(t),e<0)break;const r=n[e];P(0!==r),o=r>0?o.add(s[r-1>>1]):o.add(s[-r-1>>1].neg())}return o}_wnafMulAdd(e,t,r){P(e>>>0===e),P(Array.isArray(t)),P(Array.isArray(r)),P(t.length===r.length);const i=t.length,s=new Array(i),n=new Array(i),o=new Array(i);let h=0;for(let e=0;e<i;e++){const i=t[e],c=r[e];if(P(i instanceof f),P(c instanceof a),e>0&&i.type!==t[e-1].type)throw new Error("Cannot mix points.");s[e]=null,n[e]=null,o[e]=0,h=Math.max(h,c.bitLength()+1)}let c=null,u=null,l=0;for(let e=0;e<i;e++){const i=t[e],o=r[e],a=i._getNAF(0);a?(s[l]=a.points,n[l]=R(o,a.width,h),l+=1):c?(s[l]=c._getJNAF(i),n[l]=M(u,o,h),c=null,u=null,l+=1):(c=i,u=o)}if(c){const t=c._safeNAF(e);s[l]=t.points,n[l]=R(u,t.width,h),l+=1}let d=this.jpoint();for(let e=h-1;e>=0;e--){let t=0;for(;e>=0;){let r=!0;for(let t=0;t<l;t++)o[t]=n[t][e],0!==o[t]&&(r=!1);if(!r)break;t+=1,e-=1}if(e>=0&&(t+=1),d=d.dblp(t),e<0)break;for(let e=0;e<l;e++){const t=o[e];0!==t&&(d=t>0?d.add(s[e][t-1>>1]):d.add(s[e][-t-1>>1].neg()))}}return d}_endoWnafMulAdd(e,t){throw new Error("Not implemented.")}_scale(e,t){switch(P(e instanceof u),P(e.p.eq(this.p)),e.type){case"short":return this._scaleShort(e,t);case"mont":return this._scaleMont(e,t);case"edwards":return this._scaleEdwards(e,t);default:throw new Error("Not implemented.")}}_scaleShort(e,t){throw new Error("Not implemented.")}_scaleMont(e,t){throw new Error("Not implemented.")}_scaleEdwards(e,t){throw new Error("Not implemented.")}isElliptic(){throw new Error("Not implemented.")}jinv(){throw new Error("Not implemented.")}precompute(e){return P(!this.g.isInfinity(),"Must have base point."),P(!this.n.isZero(),"Must have order."),this.g.precompute(this.n.bitLength()+1,e),this}scalar(e,t,r){const i=new a(e,t,r);return P(!i.red),this.n.isZero()?i:i.imod(this.n)}field(e,t,r){const i=a.cast(e,t,r);return i.red?i.forceRed(this.red):i.toRed(this.red)}point(e,t){throw new Error("Not implemented.")}jpoint(e,t,r){throw new Error("Not implemented.")}xpoint(e,t){throw new Error("Not implemented.")}cpoint(e,t,r,i){if(P(e instanceof a),P(t instanceof a),P(r instanceof a),P(i instanceof a),t.isZero()||i.isZero())return this.point();const s=t.redMul(i).redInvert(),n=e.redMul(i).redMul(s),o=r.redMul(t).redMul(s);return this.point(n,o)}solveX2(e){throw new Error("Not implemented.")}solveX(e){return this.solveX2(e).redSqrt()}solveY2(e){throw new Error("Not implemented.")}solveY(e){return this.solveY2(e).redSqrt()}validate(e){throw new Error("Not implemented.")}pointFromX(e,t){throw new Error("Not implemented.")}pointFromY(e,t){throw new Error("Not implemented.")}isIsomorphic(e){throw new Error("Not implemented.")}isIsogenous(e){throw new Error("Not implemented.")}pointFromShort(e){throw new Error("Not implemented.")}pointFromMont(e,t){throw new Error("Not implemented.")}pointFromEdwards(e){throw new Error("Not implemented.")}pointFromUniform(e){throw new Error("Not implemented.")}pointToUniform(e){throw new Error("Not implemented.")}pointFromHash(e,t=!1){P(null!=e&&!0===e._isBuffer),P("boolean"==typeof t);const r=this.fieldBits+7>>>3;if(e.length!==2*r)throw new Error("Invalid hash size.");const i=e.slice(0,r),s=e.slice(r),n=this.decodeUniform(i),o=this.decodeUniform(s),a=this.pointFromUniform(n),h=this.pointFromUniform(o),c=a.uadd(h);return t?c.mulH():c}pointToHash(e,t){for(P(e instanceof this.Point);;){const r=this.randomField(t),i=this.pointFromUniform(r);if(i.neg().eq(i))continue;const s=e.uadd(i.neg()),n=T(t);let o;try{o=this.pointToUniform(s,n)}catch(e){if("Invalid point."===e.message)continue;throw e}const a=this.encodeUniform(r,t),h=this.encodeUniform(o,t);return Buffer.concat([a,h])}}randomScalar(e){const t=this.n.isZero()?this.p:this.n;return a.random(e,1,t)}randomField(e){return a.random(e,1,this.p).toRed(this.red)}randomPoint(e){let t;for(;;){const r=this.randomField(e),i=0!=(1&T(e));try{t=this.pointFromX(r,i)}catch(e){continue}return P(t.validate()),t.mulH()}}mulAll(e,t){return this.jmulAll(e,t)}mulAllSimple(e,t){return this.jmulAllSimple(e,t)}jmulAll(e,t){return P(Array.isArray(e)),P(0===e.length||e[0]instanceof f),this.endo&&e.length>0&&e[0].type===h.AFFINE?this._endoWnafMulAdd(e,t):this._wnafMulAdd(1,e,t)}jmulAllSimple(e,t){return this._simpleMulAdd(e,t)}mulH(e){return P(e instanceof a),this.imulH(e.clone())}imulH(e){P(e instanceof a),P(!e.red);const t=this.h.word(0);if(0==(t&t-1)){const t=this.h.bitLength();return e.iushln(t-1).imod(this.n)}return e.imuln(t).imod(this.n)}reduce(e){return this.mask.reduce(e)}splitHash(e){return this.mask.splitHash(e)}clamp(e){return this.mask.clamp(e)}encodeField(e){return P(e instanceof a),P(!e.red),e.encode(this.endian,this.fieldSize)}decodeField(e){if(P(null!=e&&!0===e._isBuffer),e.length!==this.fieldSize)throw new Error("Invalid field element size.");return a.decode(e,this.endian)}encodeScalar(e){return P(e instanceof a),P(!e.red),e.encode(this.endian,this.scalarSize)}decodeScalar(e){if(P(null!=e&&!0===e._isBuffer),e.length!==this.scalarSize)throw new Error("Invalid scalar size.");return a.decode(e,this.endian)}encodeUniform(e,t){P(e instanceof a);const r=this.fieldBits,i=r+7>>>3,s=8*i-r,n=e.fromRed();if(null!=t&&0!==s){const e=a.randomBits(t,s);n.iuor(e.iushln(r))}return n.encode(this.endian,i)}decodeUniform(e){P(null!=e&&!0===e._isBuffer);const t=this.fieldBits,r=t+7>>>3;if(e.length!==r)throw new Error("Invalid field size.");return a.decode(e,this.endian).iumaskn(t).toRed(this.red)}encodePoint(e,t){return P(e instanceof f),e.encode(t)}decodePoint(e){throw new Error("Not implemented.")}encodeX(e){throw new Error("Not implemented.")}decodeX(e){throw new Error("Not implemented.")}decodeEven(e){throw new Error("Not implemented.")}decodeSquare(e){throw new Error("Not implemented.")}toShort(){throw new Error("Not implemented.")}toMont(e){throw new Error("Not implemented.")}toEdwards(e){throw new Error("Not implemented.")}pointToJSON(e,t){return P(e instanceof f),e.toJSON(t)}pointFromJSON(e){throw new Error("Not implemented.")}toJSON(e){let t,r,i,s,n;return"edwards"===this.type&&(t=this.prefix?this.prefix.toString():null,r=this.context),this.n.isZero()||(i=this.n.toJSON()),this.z.isZero()||(s=this.z.fromRed(),this.z.redIsHigh()&&s.isub(this.p),s=s.toString(16)),this.endo&&(n=this.endo.toJSON()),{id:this.id,ossl:this.ossl,type:this.type,endian:this.endian,hash:this.hash,prefix:t,context:r,prime:this.prime,p:this.p.toJSON(),a:undefined,b:undefined,d:undefined,n:i,h:this.h.toString(16),s:undefined,z:s,c:undefined,g:this.g.toJSON(e),endo:n}}static fromJSON(e){return new this(e)}}class f{constructor(e,t){P(e instanceof u),P(t>>>0===t),this.curve=e,this.type=t,this.pre=null}_init(){throw new Error("Not implemented.")}_getNAF(e){if(P(e>>>0===e),this.pre&&this.pre.naf)return this.pre.naf;if(0===e)return null;const t=1<<e-1,r=new Array(t),i=1===t?null:this.dbl();r[0]=this;for(let e=1;e<t;e++)r[e]=r[e-1].add(i);return new E(e,r)}_safeNAF(e){return this._getNAF(e)}_getDoubles(e,t){if(P(e>>>0===e),P(t>>>0===t),this.pre&&this.pre.doubles)return this.pre.doubles;if(0===e)return null;const r=Math.ceil(t/e)+1,i=new Array(r);let s=this,n=0;i[n++]=s;for(let r=0;r<t;r+=e){for(let t=0;t<e;t++)s=s.dbl();i[n++]=s}return P(n===r),new S(e,i)}_getBeta(){return null}_getBlinding(e){if(this.pre&&this.pre.blinding)return this.pre.blinding;if(!e)return null;if(this.curve.n.isZero())return null;const t=this.curve.randomScalar(e),r=this.mul(t);return new I(t,r)}_hasDoubles(e){if(P(e instanceof a),!this.pre||!this.pre.doubles)return!1;const{step:t,points:r}=this.pre.doubles,i=e.bitLength()+1;return r.length>=Math.ceil(i/t)+1}_getJNAF(e){return P(e instanceof f),P(e.type===this.type),[this,this.add(e),this.add(e.neg()),e]}_blind(e,t){if(P(e instanceof a),P(!e.red),this.pre&&this.pre.blinding){const{blind:t,unblind:r}=this.pre.blinding;return[this,e.sub(t),r]}if(!t)return[this,e,null];if(this.pre){if(this.curve.n.isZero())return[this,e,null];return[this,this.curve.randomScalar(t).mul(this.curve.n).iadd(e),null]}return[this.randomize(t),e,null]}clone(){throw new Error("Not implemented.")}swap(e,t){throw new Error("Not implemented.")}precompute(e,t){return P(e>>>0===e),this.pre||(this.pre=new v),this.pre.naf||(this.pre.naf=this._getNAF(8)),this.pre.doubles||(this.pre.doubles=this._getDoubles(4,e)),this.pre.beta||(this.pre.beta=this._getBeta()),this.pre.blinding||(this.pre.blinding=this._getBlinding(t)),this}validate(){return this.curve.validate(this)}normalize(){return this}scale(e){throw new Error("Not implemented.")}randomize(e){const t=this.curve.randomField(e);return this.scale(t)}neg(){throw new Error("Not implemented.")}add(e){throw new Error("Not implemented.")}sub(e){return P(e instanceof f),this.add(e.neg())}dbl(){throw new Error("Not implemented.")}dblp(e){P(e>>>0===e);let t=this;for(let r=0;r<e;r++)t=t.dbl();return t}uadd(e){throw new Error("Not implemented.")}usub(e){return P(e instanceof f),this.uadd(e.neg())}udbl(){throw new Error("Not implemented.")}zaddu(e){throw new Error("Not implemented.")}zaddc(e){throw new Error("Not implemented.")}zdblu(){throw new Error("Not implemented.")}diffAdd(e,t){throw new Error("Not implemented.")}diffAddDbl(e,t){throw new Error("Not implemented.")}recover(){throw new Error("Not implemented.")}getX(){throw new Error("Not implemented.")}getY(){throw new Error("Not implemented.")}eq(e){throw new Error("Not implemented.")}isInfinity(){throw new Error("Not implemented.")}isOdd(){throw new Error("Not implemented.")}isEven(){throw new Error("Not implemented.")}isSquare(){throw new Error("Not implemented.")}eqX(e){throw new Error("Not implemented.")}eqXToP(e){throw new Error("Not implemented.")}isSmall(){return!this.isInfinity()&&this.jmulH().isInfinity()}hasTorsion(){return!this.isInfinity()&&!this.jmul(this.curve.n).isInfinity()}mul(e){return this.jmul(e)}muln(e){return this.jmuln(e)}mulSimple(e){return this.jmulSimple(e)}mulBlind(e,t){return this.jmulBlind(e,t)}mulConst(e,t){return this.jmulConst(e,t)}mulAdd(e,t,r){return this.jmulAdd(e,t,r)}mulAddSimple(e,t,r){return this.jmulAddSimple(e,t,r)}mulH(){return this.jmulH()}div(e){return this.jdiv(e)}divn(e){return this.jdivn(e)}divH(){return this.jdivH()}jmul(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo&&this.type===h.AFFINE?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(4,this,e)}jmuln(e){return P((0|e)===e),this.jmulSimple(new a(e))}jmulSimple(e){return this.curve._simpleMul(this,e)}jmulBlind(e,t=null){const[r,i,s]=this._blind(e,t),n=r.jmul(i);return s?n.add(s):n}jmulConst(e,t=null){const[r,i,s]=this._blind(e,t),n=this.curve._constMul(r,i,t);return s?n.uadd(s):n}jmulAdd(e,t,r){return this.curve.endo&&this.type===h.AFFINE?this.curve._endoWnafMulAdd([this,t],[e,r]):this.curve._wnafMulAdd(1,[this,t],[e,r])}jmulAddSimple(e,t,r){return this.curve._simpleMulAdd([this,t],[e,r])}jmulH(){const e=this.curve.h.word(0);if(0==(e&e-1)){const e=this.curve.h.bitLength();return this.toJ().dblp(e-1)}return this.jmulSimple(this.curve.h)}jdiv(e){return P(e instanceof a),P(!e.red),this.jmul(e.invert(this.curve.n))}jdivn(e){return P(!this.curve.n.isZero()),0===this.curve.h.cmpn(e)?this.jdivH():this.jdiv(new a(e))}jdivH(){return this.curve.n.isZero()?this.toJ():0===this.curve.h.cmpn(1)?this.toJ():(null===this.curve.hi&&(this.curve.hi=this.curve.h.invert(this.curve.n)),this.jmul(this.curve.hi))}ladder(e){throw new Error("Not implemented.")}ladderSimple(e){throw new Error("Not implemented.")}ladderBlind(e,t){throw new Error("Not implemented.")}ladderConst(e,t){throw new Error("Not implemented.")}toP(){return this.normalize()}toJ(){return this}toX(){return this}encode(e){throw new Error("Not implemented.")}static decode(e,t){throw new Error("Not implemented.")}encodeX(){throw new Error("Not implemented.")}static decodeX(e,t){throw new Error("Not implemented.")}static decodeEven(e,t){throw new Error("Not implemented.")}static decodeSquare(e,t){throw new Error("Not implemented.")}toJSON(e){throw new Error("Not implemented.")}static fromJSON(e,t){throw new Error("Not implemented.")}[o](){return"<Point>"}}class l extends u{constructor(e){super(d,"short",e),this.a=a.fromJSON(e.a).toRed(this.red),this.b=a.fromJSON(e.b).toRed(this.red),this.c=a.fromJSON(e.c||"0").toRed(this.red),this.ai=this.a.isZero()?this.zero:this.a.redInvert(),this.zi=this.z.isZero()?this.zero:this.z.redInvert(),this.zeroA=this.a.isZero(),this.threeA=this.a.eq(this.three.redNeg()),this.redN=this.n.toRed(this.red),this.smallGap=!1,this._finalize(e)}_finalize(e){return super._finalize(e),null!=e.endo?this.endo=k.fromJSON(this,e.endo):this.endo=this._getEndomorphism(),!this.n.isZero()&&this.n.cmp(this.p)<0&&(this.smallGap=this.p.div(this.n).cmpn(100)<=0),this}static _isomorphism(e,t,r,i){P(e instanceof a),P(t instanceof a),P(r instanceof a),P(null==i||"boolean"==typeof i),P(!e.isZero()&&!t.isZero());const s=r.redDiv(e),n=s.redSqrt();if(null!=i?n.redIsOdd()!==i&&n.redINeg():1!==n.redJacobi()&&n.redINeg(),1!==n.redJacobi())throw new Error("Invalid `a` coefficient.");const o=s.redMul(n),h=e.redMul(s),c=t.redMul(o);return P(h.eq(r)),[h,c]}_short(e,t){return l._isomorphism(this.a,this.b,e,t)}_mont(e,t){const[r,i]=this._findRS(t),s=i.redInvert(),n=r.redMuln(3).redMul(s);return null!=e?b._isomorphism(n,s,e):[n,s]}_edwards(e,t){const[r,i]=this._findRS(t),s=r.redMuln(3),n=i.redMuln(2),o=s.redAdd(n),a=s.redSub(n);return null!=e?_._isomorphism(o,a,e):[o,a]}_findRS(e){P(null==e||"boolean"==typeof e),P(this.h.word(0)>=4),P(!this.n.isZero());const t=this.one.redNeg();let r;for(;;){t.redIAdd(this.one);try{r=this.pointFromX(t)}catch(e){continue}if(!(r=r.mul(this.n)).isInfinity()&&r.y.isZero())break}const i=r.x,s=i.redSqr().redMuln(3).redIAdd(this.a).redSqrt();return null!=e&&s.redIsOdd()!==e&&s.redINeg(),[i,s]}_scale0(e,t){const r=this.a.redDiv(this.field(e)),i=this.b.redDiv(this.field(t)),s=r.redSqrt();r.redMul(s).eq(i)||s.redINeg(),P(r.redMul(s).eq(i));const n=s.redSqrt(),o=s.redMul(n);return P(!n.isZero()),[s,o]}_scale1(e,t){const r=this.g.x.redDiv(this.field(e)),i=this.g.y.redDiv(this.field(t)),s=r.redSqrt();return r.redMul(s).eq(i)||s.redINeg(),P(r.redMul(s).eq(i)),P(!s.isZero()),[r,i]}_scaleShort(e){return P(e instanceof l),this.g.isInfinity()||e.g.isInfinity()?this._scale0(e.a,e.b):this._scale1(e.g.x,e.g.y)}_scaleMont(e){if(P(e instanceof b),this.g.isInfinity()||e.g.isInfinity()){const[t,r]=e._short();return this._scale0(t,r)}const{x:t,y:r}=e.g,i=t.redAdd(e.a3).redMul(e.bi),s=r.redMul(e.bi);return this._scale1(i,s)}_scaleEdwards(e){if(P(e instanceof _),this.g.isInfinity()||e.g.isInfinity()){const[t,r]=e._short();return this._scale0(t,r)}const{x:t,y:r,z:i}=e.g,s=e.a.redMuln(5),n=e.d.redMuln(5),o=e.d.redSub(e.a),a=n.redSub(e.a),h=e.d.redSub(s),c=r.redAdd(i),u=r.redSub(i),f=a.redMul(r).redIAdd(h.redMul(i)),l=u.redMuln(12),d=o.redMul(c).redMul(i),p=u.redMul(t).redIMuln(4),b=l.redMul(p).redInvert(),g=f.redMul(p).redMul(b),m=d.redMul(l).redMul(b);return this._scale1(g,m)}_getEndomorphism(e=0){if(this.n.isZero()||this.g.isInfinity())return null;if(!this.zeroA||1!==this.p.modrn(3)||1!==this.n.modrn(3))return null;const[t,r]=this._getEndoRoots(this.p),i=[t,r][1&e].toRed(this.red),[s,n]=this._getEndoRoots(this.n),o=this.point(this.g.x.redMul(i),this.g.y);let a;this.g.mul(s).eq(o)?a=s:(P(this.g.mul(n).eq(o)),a=n);const h=this._getEndoBasis(a),c=this._getEndoPrecomp(h);return new k(i,a,h,c)}_getEndoRoots(e){const t=e===this.p?this.red:a.mont(e),r=new a(2).toRed(t),i=new a(3).toRed(t),s=r.redInvert(),n=i.redNeg().redSqrt().redMul(s),o=n.redNeg();return[n.redSub(s).fromRed(),o.redSub(s).fromRed()].sort(a.cmp)}_getEndoBasis(e){const[t,r,i,s,n,o]=this._egcdSqrt(e),a=i,h=s.neg(),c=t.sqr().iadd(r.sqr()),u=n.sqr().iadd(o.sqr());let f,l;return c.cmp(u)<=0?(f=t,l=r.neg()):(f=n,l=o.neg()),[new A(a,h),new A(f,l)]}_egcdSqrt(e){P(e instanceof a),P(!e.red),P(e.sign()>0),P(this.n.sign()>0);const t=this.n.ushrn(this.n.bitLength()>>>1);let r,i,s,n,o,h=e,c=this.n.clone(),u=new a(1),f=new a(0),l=new a(0),d=new a(1),p=0,b=0;for(;!h.isZero()&&p<2;){const e=c.quo(h),a=c.sub(e.mul(h)),g=l.sub(e.mul(u)),m=d.sub(e.mul(f));0===b&&a.cmp(t)<0&&(r=o,i=u,s=a,n=g,b=1),o=a,c=h,h=a,l=u,u=g,d=f,f=m,p+=b}return P(0!==b,"Could not find r < sqrt(n)."),[r,i,s,n,l,u]}_getEndoPrecomp(e){P(Array.isArray(e)),P(2===e.length),P(e[0]instanceof A),P(e[1]instanceof A);const[t,r]=e,i=t.a.mul(r.b).isub(t.b.mul(r.a)),s=i.bitLength()+16,n=a.shift(1,s),o=n.mul(r.b).divRound(i),h=n.mul(t.b).divRound(i);return P(i.eq(this.n)),[o,h]}_endoSplit(e){P(e instanceof a),P(!e.red),P(!this.n.isZero());const[t,r]=this.endo.basis,i=r.b.mul(e).divRound(this.n),s=t.b.neg().mul(e).divRound(this.n),n=i.mul(t.a),o=s.mul(r.a),h=i.ineg().mul(t.b),c=s.mul(r.b);return[e.sub(n).isub(o),h.isub(c)]}_endoBeta(e){return P(e instanceof d),[e,e._getBeta()]}_endoWnafMulAdd(e,t){P(Array.isArray(e)),P(Array.isArray(t)),P(e.length===t.length),P(null!=this.endo);const r=e.length,i=new Array(2*r),s=new Array(2*r);for(let n=0;n<r;n++){const[r,o]=this._endoBeta(e[n]),[a,h]=this._endoSplit(t[n]);i[2*n+0]=r,s[2*n+0]=a,i[2*n+1]=o,s[2*n+1]=h}return this._wnafMulAdd(1,i,s)}_icart(e){const{a:t,b:r,i3:i,one:s}=this,n=i.redSqr().redMul(i),o=this.p.ushln(1).isubn(1).idivn(3),a=e.clone();a.cinject(s,a.czero());const h=a.redSqr(),c=h.redSqr(),u=c.redMul(h),f=a.redMuln(6).redFermat(),l=t.redMuln(3).redISub(c).redMul(f),d=l.redSqr(),p=u.redMul(n),b=h.redMul(i),g=d.redISub(r).redISub(p).redPow(o).redIAdd(b),m=a.redMul(g).redIAdd(l);return this.point(g,m)}_sswu(e){const{b:t,z:r,ai:i,zi:s,one:n}=this,o=this.p.subn(2),a=r.redSqr(),h=t.redNeg().redMul(i),c=t.redMul(s).redMul(i),u=e.redSqr(),f=u.redSqr(),l=a.redMul(f).redIAdd(r.redMul(u)).redPow(o),d=h.redMul(n.redAdd(l));d.cinject(c,l.czero());const p=r.redMul(u).redMul(d),b=this.solveY2(d),g=this.solveY2(p),m=0|b.redIsSquare(),_=d.cinject(p,1^m),w=b.cinject(g,1^m).redSqrt();return w.cinject(w.redNeg(),w.redIsOdd()^e.redIsOdd()),this.point(_,w)}_sswui(e,t){const{a:r,b:i,z:s}=this,{x:n,y:o}=e,a=3&t,h=r.redSqr().redMul(n.redSqr()),c=r.redMul(i).redMul(n).redIMuln(2),u=i.redSqr().redMuln(3),f=r.redMul(n).redIAdd(i),[l,d]=B(h.redISub(c).redISub(u)),p=f.redSub(d).redINeg(),b=f.redAdd(d).redINeg(),g=f.redMul(s).redIMuln(2),m=i.redMul(s).redIMuln(2);p.cinject(b,1&a),g.cinject(m,a>>>1);const[_,w]=N(p,g);if(w.cinject(w.redNeg(),w.redIsOdd()^o.redIsOdd()),!(l&_))throw new Error("Invalid point.");return w}_svdwf(e){const{c:t,z:r,zi:i,i2:s,i3:n}=this,o=this.p.subn(2),a=this.solveY2(r),h=n.redMul(i.redSqr()),c=e.redSqr(),u=c.redSqr(),f=c.redAdd(a),l=c.redMul(f).redPow(o),d=u.redMul(l).redMul(t),p=f.redSqr().redMul(f),b=t.redSub(r).redMul(s).redISub(d),g=d.redSub(t.redAdd(r).redMul(s)),m=r.redSub(p.redMul(l).redMul(h)),_=this.solveY2(b),w=this.solveY2(g),y=this.solveY2(m),v=0|_.redIsSquare(),E=0|w.redIsSquare();return b.cinject(g,(1^v)&E),_.cinject(w,(1^v)&E),b.cinject(m,(1^v)&(1^E)),_.cinject(y,(1^v)&(1^E)),[b,_]}_svdw(e){const[t,r]=this._svdwf(e),i=r.redSqrt();return i.cinject(i.redNeg(),i.redIsOdd()^e.redIsOdd()),this.point(t,i)}_svdwi(e,t){const{b:r,c:i,z:s,two:n}=this,{x:o,y:a}=e,h=3&t,c=s.redSqr(),u=c.redMul(s),f=c.redSqr(),l=u.redAdd(r),d=l.redMuln(2),p=o.redSqr(),b=o.redMuln(2).redIAdd(s),g=o.redMul(c),m=i.redSub(b),_=i.redAdd(b),w=p.redMul(c).redIAdd(f).redIMuln(9),y=o.redMul(u).redIMuln(18),v=l.redMul(o.redSub(s)).redIMuln(12),[E,S]=B(w.redISub(y).redIAdd(v)),I=h-2>>>31|E,k=S.redMul(s),A=u.redISub(g).redIMuln(3).redISub(d),O=l.redMul(m),x=l.redMul(_),R=A.redAdd(k),M=A.redSub(k),P=n.clone();O.cinject(x,(1^h)-1>>>31),O.cinject(R,(2^h)-1>>>31),O.cinject(M,(3^h)-1>>>31),P.cinject(_,(0^h)-1>>>31),P.cinject(m,(1^h)-1>>>31);const[T,C]=N(O,P),[q]=this._svdwf(C),j=q.ceq(o);if(C.cinject(C.redNeg(),C.redIsOdd()^a.redIsOdd()),!(I&T&j))throw new Error("Invalid point.");return C}isElliptic(){const{a:e,b:t}=this,r=e.redSqr().redMul(e);return!t.redSqr().redMuln(27).redIAdd(r.redMuln(4)).isZero()}jinv(){const{a:e,b:t}=this,r=e.redSqr().redMul(e),i=t.redSqr(),s=r.redMuln(4),n=s.redMuln(1728),o=i.redMuln(27).redIAdd(s);if(o.isZero())throw new Error("Curve is not elliptic.");return n.redDiv(o).fromRed()}point(e,t,r=0){return new d(this,e,t,r)}jpoint(e,t,r){return new p(this,e,t,r)}solveY2(e){P(e instanceof a);const t=e.redSqr().redMul(e).redIAdd(this.b);return this.zeroA||(this.threeA?t.redIAdd(e.redMuln(-3)):t.redIAdd(this.a.redMul(e))),t}validate(e){if(P(e instanceof d),e.inf)return!0;const{x:t,y:r}=e,i=this.solveY2(t);return r.redSqr().eq(i)}pointFromX(e,t=null){P(e instanceof a),P(null==t||"boolean"==typeof t),e.red||(e=e.toRed(this.red));const r=this.solveY(e);return null!=t&&r.redIsOdd()!==t&&r.redINeg(),this.point(e,r)}isIsomorphic(e){if(P(e instanceof u),!e.p.eq(this.p))return!1;let t,r;try{[t,r]=this._scale(e)}catch(e){return!1}if("short"===e.type){const i=this.field(e.a).redMul(t.redSqr()),s=this.field(e.b).redMul(r.redSqr());return this.a.eq(i)&&this.b.eq(s)}if("mont"===e.type){const{a3:r,bi:i}=e,s=this.field(r.redMul(i)).redMul(t);return this.solveY2(s).isZero()}if("edwards"===e.type){const r=this.field(e.ad6).redMul(t);return this.solveY2(r).isZero()}return!1}isIsogenous(e){return P(e instanceof u),!1}pointFromShort(e){if(P(e instanceof d),this.isIsomorphic(e.curve)){if(e.isInfinity())return this.point();const[t,r]=this._scale(e.curve),i=this.field(e.x),s=this.field(e.y),n=i.redMul(t),o=s.redMul(r);return this.point(n,o)}throw new Error("Not implemented.")}pointFromMont(e){if(P(e instanceof g),this.isIsomorphic(e.curve)){if(e.isInfinity())return this.point();const{a3:t,bi:r}=e.curve,[i,s]=this._scale(e.curve),n=e.x.redAdd(t).redMul(r),o=e.y.redMul(r);return this.point(this.field(n).redMul(i),this.field(o).redMul(s))}throw new Error("Not implemented.")}pointFromEdwards(e){if(P(e instanceof w),this.isIsomorphic(e.curve)){const{a:t,d:r,ad6:i}=e.curve,[s,n]=this._scale(e.curve);if(e.isInfinity())return this.point();if(e.x.isZero()){const e=this.field(i).redMul(s);return this.point(e,this.zero)}const{x:o,y:a,z:h}=e,c=t.redMuln(5),u=r.redMuln(5),f=r.redSub(t),l=u.redSub(t),d=r.redSub(c),p=a.redAdd(h),b=a.redSub(h),g=l.redMul(a).redIAdd(d.redMul(h)),m=b.redMuln(12),_=f.redMul(p).redMul(h),w=b.redMul(o).redIMuln(4);return this.cpoint(this.field(g).redMul(s),this.field(m),this.field(_).redMul(n),this.field(w))}throw new Error("Not implemented.")}pointFromUniform(e){if(P(e instanceof a),this.z.isZero()||this.b.isZero())throw new Error("Not implemented.");if(!this.a.isZero())return this._sswu(e);if(!this.c.isZero())return this._svdw(e);throw new Error("Not implemented.")}pointToUniform(e,t){if(P(e instanceof d),P(t>>>0===t),this.z.isZero()||this.b.isZero())throw new Error("Not implemented.");if(e.isInfinity())throw new Error("Invalid point.");if(!this.a.isZero())return this._sswui(e,t);if(!this.c.isZero())return this._svdwi(e,t);throw new Error("Not implemented.")}mulAll(e,t){return super.mulAll(e,t).toP()}mulAllSimple(e,t){return super.mulAllSimple(e,t).toP()}decodePoint(e){return d.decode(this,e)}encodeX(e){return P(e instanceof f),e.encodeX()}decodeEven(e){return d.decodeEven(this,e)}decodeSquare(e){return d.decodeSquare(this,e)}toShort(e,t,r=null){const[i,s]=this._short(e,t),n=new l({red:this.red,prime:this.prime,p:this.p,a:i,b:s,n:this.n,h:this.h});if(null!=r){const[,e]=n._scale(this);e.redIsOdd()!==r&&e.redINeg()}return this.g.isInfinity()||(n.g=n.pointFromShort(this.g)),n}toMont(e,t,r=null){const[i,s]=this._mont(e,t),n=new b({red:this.red,prime:this.prime,p:this.p,a:i,b:s,n:this.n,h:this.h});if(null!=r){const[,e]=this._scale(n);e.redIsOdd()!==r&&e.redINeg()}return this.g.isInfinity()||(n.g=n.pointFromShort(this.g)),n}toEdwards(e,t,r=null){const[i,s]=this._edwards(e,t),n=new _({red:this.red,prime:this.prime,p:this.p,a:i,d:s,n:this.n,h:this.h});if(null!=r){const[,e]=this._scale(n);e.redIsOdd()!==r&&e.redINeg()}return this.g.isInfinity()||(n.g=n.pointFromShort(this.g),n.g.normalize()),n}pointFromJSON(e){return d.fromJSON(this,e)}toJSON(e){const t=super.toJSON(e);return t.a=this.a.fromRed().toJSON(),t.b=this.b.fromRed().toJSON(),this.c.isZero()||(t.c=this.c.fromRed().toJSON()),t}}class d extends f{constructor(e,t,r,i){P(e instanceof l),super(e,h.AFFINE),this.x=this.curve.zero,this.y=this.curve.zero,this.inf=1,null!=t&&this._init(t,r,i)}_init(e,t,r){P(e instanceof a),P(t instanceof a),this.x=e,this.y=t,this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=0|r}_safeNAF(e){return P(e>>>0===e),this.pre&&this.pre.naf?this.pre.naf:e>1?this.toJ()._getNAF(e):this._getNAF(e)}_getBeta(){if(!this.curve.endo)return null;if(this.pre&&this.pre.beta)return this.pre.beta;const e=this.x.redMul(this.curve.endo.beta),t=this.curve.point(e,this.y);return this.pre&&(t.pre=this.pre.map(e=>{const t=e.x.redMul(this.curve.endo.beta);return this.curve.point(t,e.y)}),this.pre.beta=t),t}_getJNAF(e){if(P(e instanceof d),this.inf|e.inf)return super._getJNAF(e);const t=[this,null,null,e];return this.y.eq(e.y)?(t[1]=this.add(e),t[2]=this.toJ().add(e.neg())):this.y.eq(e.y.redNeg())?(t[1]=this.toJ().add(e),t[2]=this.add(e.neg())):(t[1]=this.toJ().add(e),t[2]=this.toJ().add(e.neg())),t}clone(){return this.curve.point(this.x.clone(),this.y.clone(),this.inf)}swap(e,t){P(e instanceof d);const r=1&(t>>31|-t>>31),i=this.inf,s=e.inf;return this.x.cswap(e.x,t),this.y.cswap(e.y,t),this.inf=i&(1^r)|s&r,e.inf=s&(1^r)|i&r,this}scale(e){return this.toJ().scale(e)}neg(){return this.inf?this:this.curve.point(this.x,this.y.redNeg())}add(e){if(P(e instanceof d),this.inf)return e;if(e.inf)return this;if(this.x.eq(e.x))return this.y.eq(e.y)?this.dbl():this.curve.point();if(this.y.eq(e.y)){const t=this.x.redNeg().redISub(e.x),r=this.y.redNeg();return this.curve.point(t,r)}const t=this.x.redSub(e.x),r=this.y.redSub(e.y).redDiv(t),i=r.redSqr().redISub(this.x).redISub(e.x),s=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)}dbl(){if(this.inf)return this;if(this.y.isZero())return this.curve.point();const e=this.x.redSqr().redIMuln(3).redIAdd(this.curve.a),t=this.y.redMuln(2),r=e.redDiv(t),i=r.redSqr().redISub(this.x).redISub(this.x),s=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)}uadd(e){P(e instanceof d);const t=this.y.redAdd(e.y),r=this.x.redAdd(e.x).redSqr(),i=this.x.redMul(e.x),s=r.redISub(i).redIAdd(this.curve.a),n=t.czero()&s.czero();t.cinject(this.x.redSub(e.x),n),s.cinject(this.y.redSub(e.y),n);const o=t.czero()&(1^(this.inf|e.inf));t.cinject(this.curve.one,t.czero());const a=s.redMul(t.redFermat()),h=a.redSqr().redISub(this.x).redISub(e.x),c=a.redMul(this.x.redSub(h)).redISub(this.y),u=o|this.inf&e.inf;return h.cinject(e.x,this.inf),c.cinject(e.y,this.inf),h.cinject(this.x,e.inf),c.cinject(this.y,e.inf),h.cinject(this.curve.zero,u),c.cinject(this.curve.zero,u),this.curve.point(h,c,u)}udbl(){return this.uadd(this)}recover(e,t,r,i){if(P(e instanceof a),P(t instanceof a),P(r instanceof a),P(i instanceof a),this.inf)return this.curve.jpoint();const s=t.redMul(i),n=s.redSqr(),o=n.redMul(s),h=this.x.redMul(s),c=e.redMul(i),u=r.redMul(t),f=this.curve.b.redMul(o).redIMuln(2),l=h.redMul(c).redIAdd(this.curve.a.redMul(n)),d=h.redAdd(c),p=h.redISub(c),b=f.redIAdd(l.redMul(d)),g=u.redMul(p.redSqr()),m=b.redISub(g),_=this.y.redMul(o).redIMuln(2),w=e.redMul(_),y=m.redMul(t),v=t.redMul(_),E=w.redMul(v),S=y.redMul(v.redSqr()),I=v;return this.curve.jpoint(E,S,I)}getX(){if(this.inf)throw new Error("Invalid point.");return this.x.fromRed()}getY(){if(this.inf)throw new Error("Invalid point.");return this.y.fromRed()}eq(e){return P(e instanceof d),this===e||(this.inf?0!==e.inf:!e.inf&&(this.x.eq(e.x)&&this.y.eq(e.y)))}isInfinity(){return 0!==this.inf}isOdd(){return!this.inf&&this.y.redIsOdd()}isEven(){return!this.inf&&this.y.redIsEven()}isSquare(){return!this.inf&&-1!==this.y.redJacobi()}eqX(e){return P(e instanceof a),P(!e.red),!this.inf&&this.getX().eq(e)}eqXToP(e){return P(e instanceof a),P(!e.red),P(!this.curve.n.isZero()),!this.inf&&this.getX().imod(this.curve.n).eq(e)}mul(e){return super.mul(e).toP()}muln(e){return super.muln(e).toP()}mulSimple(e){return super.mulSimple(e).toP()}mulBlind(e,t){return super.mulBlind(e,t).toP()}mulConst(e,t){return super.mulConst(e,t).toP()}mulAdd(e,t,r){return super.mulAdd(e,t,r).toP()}mulAddSimple(e,t,r){return super.mulAddSimple(e,t,r).toP()}mulH(){return super.mulH().toP()}div(e){return super.div(e).toP()}divn(e){return super.divn(e).toP()}divH(){return super.divH().toP()}toP(){return this}toJ(){return this.inf?this.curve.jpoint():this.curve.jpoint(this.x,this.y,this.curve.one)}encode(e){null==e&&(e=!0),P("boolean"==typeof e);const{fieldSize:t}=this.curve;if(this.inf)throw new Error("Invalid point.");if(e){const e=Buffer.allocUnsafe(1+t),r=this.curve.encodeField(this.getX());return e[0]=2|this.y.redIsOdd(),r.copy(e,1),e}const r=Buffer.allocUnsafe(1+2*t),i=this.curve.encodeField(this.getX()),s=this.curve.encodeField(this.getY());return r[0]=4,i.copy(r,1),s.copy(r,1+t),r}static decode(e,t){P(e instanceof l),P(null!=t&&!0===t._isBuffer);const r=e.fieldSize;if(t.length<1+r)throw new Error("Not a point.");const i=t[0];switch(i){case 2:case 3:{if(t.length!==1+r)throw new Error("Invalid point size for compressed.");const s=e.decodeField(t.slice(1,1+r));if(s.cmp(e.p)>=0)throw new Error("Invalid point.");const n=e.pointFromX(s,3===i);return P(!n.isInfinity()),n}case 4:case 6:case 7:{if(t.length!==1+2*r)throw new Error("Invalid point size for uncompressed.");const s=e.decodeField(t.slice(1,1+r)),n=e.decodeField(t.slice(1+r,1+2*r));if(s.cmp(e.p)>=0||n.cmp(e.p)>=0)throw new Error("Invalid point.");if(4!==i&&i!==(6|n.isOdd()))throw new Error("Invalid hybrid encoding.");const o=e.point(s,n);if(!o.validate())throw new Error("Invalid point.");return P(!o.isInfinity()),o}default:throw new Error("Unknown point format.")}}encodeX(){return this.curve.encodeField(this.getX())}static decodeEven(e,t){P(e instanceof l);const r=e.decodeField(t);if(r.cmp(e.p)>=0)throw new Error("Invalid point.");return e.pointFromX(r,!1)}static decodeSquare(e,t){P(e instanceof l);const r=e.decodeField(t);if(r.cmp(e.p)>=0)throw new Error("Invalid point.");return e.pointFromX(r)}toJSON(e){if(this.inf)return[];const t=this.getX().toJSON(),r=this.getY().toJSON();return!0===e&&this.pre?[t,r,this.pre.toJSON()]:[t,r]}static fromJSON(e,t){if(P(e instanceof l),P(Array.isArray(t)),P(0===t.length||2===t.length||3===t.length),0===t.length)return e.point();const r=a.fromJSON(t[0]),i=a.fromJSON(t[1]),s=e.point(r,i);return t.length>2&&null!=t[2]&&(s.pre=v.fromJSON(s,t[2])),s}[o](){return this.inf?"<ShortPoint: Infinity>":"<ShortPoint: x="+this.x.fromRed().toString(16,2)+" y="+this.y.fromRed().toString(16,2)+">"}}class p extends f{constructor(e,t,r,i){P(e instanceof l),super(e,h.JACOBIAN),this.x=this.curve.one,this.y=this.curve.one,this.z=this.curve.zero,this.zOne=0,null!=t&&this._init(t,r,i)}_init(e,t,r){P(e instanceof a),P(t instanceof a),P(null==r||r instanceof a),this.x=e,this.y=t,this.z=r||this.curve.one,this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=0|this.z.eq(this.curve.one)}clone(){return this.curve.jpoint(this.x.clone(),this.y.clone(),this.z.clone())}swap(e,t){P(e instanceof p);const r=1&(t>>31|-t>>31),i=this.zOne,s=e.zOne;return this.x.cswap(e.x,t),this.y.cswap(e.y,t),this.z.cswap(e.z,t),this.zOne=i&(1^r)|s&r,e.zOne=s&(1^r)|i&r,this}validate(){const{a:e,b:t}=this.curve;if(this.isInfinity())return!0;if(this.zOne)return this.curve.validate(this.toP());const r=this.y.redSqr(),i=this.x.redSqr().redMul(this.x),s=this.z.redSqr(),n=s.redSqr(),o=n.redMul(s),a=i.redIAdd(t.redMul(o));return this.curve.zeroA||(this.curve.threeA?a.redIAdd(n.redIMuln(-3).redMul(this.x)):a.redIAdd(e.redMul(n).redMul(this.x))),r.eq(a)}normalize(){if(this.zOne)return this;if(this.isInfinity())return this;const e=this.z.redInvert(),t=e.redSqr();return this.x=this.x.redMul(t),this.y=this.y.redMul(t).redMul(e),this.z=this.curve.one,this.zOne=1,this}scale(e){if(P(e instanceof a),this.isInfinity())return this.curve.jpoint();const t=e.redSqr(),r=this.x.redMul(t),i=this.y.redMul(t).redMul(e),s=this.z.redMul(e);return this.curve.jpoint(r,i,s)}neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)}add(e){return P(e instanceof f),e.type===h.AFFINE?this._mixedAdd(e):this._add(e)}_add(e){return P(e instanceof p),this.isInfinity()?e:e.isInfinity()?this:this.zOne&&e.zOne?this._addAA(e):this.zOne?e._addJA(this):e.zOne?this._addJA(e):this._addJJ(e)}_mixedAdd(e){return P(e instanceof d),this.isInfinity()?e.toJ():e.isInfinity()?this:this.zOne?this._addAA(e):this._addJA(e)}_addJJ(e){const t=this.z.redSqr(),r=e.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(t),n=this.y.redMul(e.z).redMul(r),o=e.y.redMul(this.z).redMul(t),a=s.redISub(i),h=o.redISub(n);if(a.isZero())return h.isZero()?this.dbl():this.curve.jpoint();const c=a.redSqr(),u=a.redMul(c),f=i.redMul(c),l=h.redSqr().redISub(u).redISub(f).redISub(f),d=h.redMul(f.redISub(l)).redISub(n.redMul(u)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(l,d,p)}_addJA(e){const t=this.z.redSqr(),r=e.x.redMul(t),i=e.y.redMul(this.z).redMul(t),s=r.redISub(this.x),n=i.redISub(this.y).redIMuln(2);if(s.isZero())return n.isZero()?this.dbl():this.curve.jpoint();const o=s.redMuln(2).redSqr(),a=s.redMul(o),h=this.x.redMul(o),c=n.redSqr().redISub(a).redISub(h).redISub(h),u=n.redMul(h.redISub(c)).redISub(this.y.redMul(a).redIMuln(2)),f=this.z.redMul(s).redIMuln(2);return this.curve.jpoint(c,u,f)}_addAA(e){const t=e.x.redSub(this.x),r=e.y.redSub(this.y).redIMuln(2);if(t.isZero())return r.isZero()?this.dbl():this.curve.jpoint();const i=t.redSqr().redIMuln(4),s=t.redMul(i),n=this.x.redMul(i),o=r.redSqr().redISub(s).redISub(n).redISub(n),a=r.redMul(n.redISub(o)).redISub(this.y.redMul(s).redIMuln(2)),h=t.redIMuln(2);return this.curve.jpoint(o,a,h)}dbl(){return this.isInfinity()?this:this.y.isZero()?this.curve.jpoint():this.zOne?this._dblA():this.curve.zeroA?this._dbl0():this.curve.threeA?this._dbl3():this._dblJ()}_dblJ(){const e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),i=this.x.redMul(t).redIMuln(4),s=e.redIMuln(3).redIAdd(this.curve.a.redMul(r.redSqr())),n=s.redSqr().redISub(i).redISub(i),o=n,a=s.redMul(i.redISub(n)).redISub(t.redSqr().redIMuln(8)),h=this.y.redMul(this.z).redIMuln(2);return this.curve.jpoint(o,a,h)}_dblA(){const e=this.x.redSqr(),t=this.y.redSqr(),r=t.redSqr(),i=t.redIAdd(this.x).redSqr().redISub(e).redISub(r).redIMuln(2),s=e.redIMuln(3).redIAdd(this.curve.a),n=s.redSqr().redISub(i).redISub(i),o=n,a=s.redMul(i.redISub(n)).redISub(r.redIMuln(8)),h=this.y.redMuln(2);return this.curve.jpoint(o,a,h)}_dbl0(){const e=this.x.redSqr(),t=this.y.redSqr(),r=t.redSqr(),i=t.redIAdd(this.x).redSqr().redISub(e).redISub(r).redIMuln(2),s=e.redIMuln(3),n=s.redSqr().redISub(i).redISub(i),o=s.redMul(i.redISub(n)).redISub(r.redIMuln(8)),a=this.y.redMul(this.z).redIMuln(2);return this.curve.jpoint(n,o,a)}_dbl3(){const e=this.z.redSqr(),t=this.y.redSqr(),r=this.x.redMul(t),i=this.x.redSub(e),s=this.x.redAdd(e),n=i.redMul(s).redIMuln(3),o=r.redIMuln(4),a=o.redMuln(2),h=t.redSqr().redIMuln(8),c=n.redSqr().redISub(a),u=this.y.redAdd(this.z).redSqr().redISub(t).redISub(e),f=n.redMul(o.redISub(c)).redISub(h);return this.curve.jpoint(c,f,u)}dblp(e){return P(e>>>0===e),this.curve.zeroA||this.curve.threeA?super.dblp(e):0===e?this:this.isInfinity()?this:this._dblp(e)}_dblp(e){const{a:t,i2:r}=this.curve;let i=this.x,s=this.z,n=this.y.redMuln(2),o=s.redPown(4);for(let r=0;r<e;r++){if(n.isZero())return this.curve.jpoint();const a=i.redSqr(),h=n.redSqr(),c=h.redSqr(),u=a.redIMuln(3).redIAdd(t.redMul(o)),f=i.redMul(h),l=u.redSqr().redISub(f).redISub(f),d=l,p=u.redMul(f.redISub(l)).redIMuln(2).redISub(c),b=n.redMul(s);r+1<e&&(o=o.redMul(c)),i=d,n=p,s=b}return this.curve.jpoint(i,n.redMul(r),s)}uadd(e){return P(e instanceof f),e.type===h.AFFINE?this._uadd(e.toJ()):this._uadd(e)}_uadd(e){P(e instanceof p);const{zero:t,one:r}=this.curve,i=this.z.redSqr(),s=e.z.redSqr(),n=this.x.redMul(s),o=e.x.redMul(i),a=this.y.redMul(s).redMul(e.z),h=e.y.redMul(i).redMul(this.z),c=this.z.redMul(e.z),u=n.redAdd(o),f=a.redAdd(h),l=u.redSqr().redISub(n.redMul(o));if(!this.curve.zeroA){const e=c.redPown(4);this.curve.threeA?l.redIAdd(e.redIMuln(-3)):l.redIAdd(this.curve.a.redMul(e))}const d=f.czero()&l.czero();f.cinject(n.redSub(o),d),l.cinject(a.redSub(h),d);const b=f.redSqr(),g=u.redMul(b),m=b.redSqr();m.cinject(t,d);const _=l.redSqr(),w=c.redMul(f),y=g.redMuln(3).redISub(_).redISub(_),v=_.redISub(g).redIMuln(4),E=l.redMul(y).redISub(m).redIMuln(4),S=w.redIMuln(2),I=this.z.czero(),k=e.z.czero(),A=S.czero()&(1^(I|k));return v.cinject(e.x,I),E.cinject(e.y,I),S.cinject(e.z,I),v.cinject(this.x,k),E.cinject(this.y,k),S.cinject(this.z,k),v.cinject(r,A),E.cinject(r,A),S.cinject(t,A),this.curve.jpoint(v,E,S)}udbl(){const e=this._udbl(),t=this.z.czero()|this.y.czero();return e.x.cinject(this.curve.one,t),e.y.cinject(this.curve.one,t),e.z.cinject(this.curve.zero,t),e}_udbl(){return this.curve.zeroA?this._dbl0():this.curve.threeA?this._dbl3():this._dblJ()}zaddu(e){P(e instanceof p);const t=this.x.redSub(e.x),r=this.y.redSub(e.y),i=t.redSqr(),s=this.x.redMul(i),n=e.x.redMul(i),o=s,a=r.redSqr().redISub(s).redISub(n),h=this.y.redMul(s.redSub(n)),c=r.redMul(o.redSub(a)).redISub(h),u=this.z.redMul(t),f=u;return[this.curve.jpoint(a,c,f),this.curve.jpoint(o,h,u)]}zaddc(e){P(e instanceof p);const t=this.x.redSub(e.x),r=this.y.redSub(e.y),i=this.y.redAdd(e.y),s=t.redSqr(),n=this.x.redMul(s),o=e.x.redMul(s),a=i.redSqr().redISub(n).redISub(o),h=r.redSqr().redISub(n).redISub(o),c=this.y.redMul(o.redISub(n)),u=e.y.redMuln(2).redIAdd(r),f=n.redISub(a),l=a.redAdd(f).redISub(h),d=u.redMul(f).redIAdd(c),b=r.redMul(l).redIAdd(c),g=this.z.redMul(t),m=g;return[this.curve.jpoint(h,b,m),this.curve.jpoint(a,d,g)]}zdblu(){const e=this.x.redSqr(),t=this.y.redSqr(),r=t.redSqr(),i=this.x.redAdd(t).redSqr(),s=e.redMuln(3);if(!this.curve.zeroA){const e=this.z.redPown(4);this.curve.threeA?s.redIAdd(e.redIMuln(-3)):s.redIAdd(this.curve.a.redMul(e))}const n=i.redISub(e).redISub(r).redIMuln(2),o=s.redSqr().redISub(n).redISub(n),a=r.redIMuln(8),h=n.redSub(o).redMul(s).redISub(a),c=this.y.redMul(this.z).redIMuln(2),u=c;return[this.curve.jpoint(o,h,u),this.curve.jpoint(n,a,c)]}recover(e,t,r,i){return this.toP().recover(e,t,r,i)}getX(){if(this.isInfinity())throw new Error("Invalid point.");return this.normalize(),this.x.fromRed()}getY(){if(this.isInfinity())throw new Error("Invalid point.");return this.normalize(),this.y.fromRed()}eq(e){if(P(e instanceof p),this===e)return!0;if(this.isInfinity())return e.isInfinity();if(e.isInfinity())return!1;if(this.z.eq(e.z))return this.x.eq(e.x)&&this.y.eq(e.y);const t=this.z.redSqr(),r=e.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(t);if(!i.eq(s))return!1;const n=t.redMul(this.z),o=r.redMul(e.z),a=this.y.redMul(o),h=e.y.redMul(n);return a.eq(h)}isInfinity(){return this.z.isZero()}isOdd(){return!this.isInfinity()&&(this.normalize(),this.y.redIsOdd())}isEven(){return!this.isInfinity()&&(this.normalize(),this.y.redIsEven())}isSquare(){return!this.isInfinity()&&-1!==this.y.redMul(this.z).redJacobi()}eqX(e){if(P(e instanceof a),P(!e.red),this.isInfinity())return!1;const t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);return this.x.eq(r)}eqXToP(e){if(P(e instanceof a),P(!e.red),!this.curve.smallGap)return this.toP().eqXToP(e);if(this.isInfinity())return!1;const t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(this.x.eq(r))return!0;const i=e.clone(),s=this.curve.redN.redMul(t);for(;;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(s),this.x.eq(r))break}return!0}toP(){return this.isInfinity()?this.curve.point():(this.normalize(),this.curve.point(this.x,this.y))}toJ(){return this}encode(e){return this.toP().encode(e)}static decode(e,t){return d.decode(e,t).toJ()}encodeX(){return this.toP().encodeX()}static decodeEven(e,t){return d.decodeEven(e,t).toJ()}static decodeSquare(e,t){return d.decodeSquare(e,t).toJ()}toJSON(e){return this.toP().toJSON(e)}static fromJSON(e,t){return d.fromJSON(e,t).toJ()}[o](){return this.isInfinity()?"<JPoint: Infinity>":"<JPoint: x="+this.x.fromRed().toString(16,2)+" y="+this.y.fromRed().toString(16,2)+" z="+this.z.fromRed().toString(16,2)+">"}}class b extends u{constructor(e){super(g,"mont",e),this.a=a.fromJSON(e.a).toRed(this.red),this.b=a.fromJSON(e.b).toRed(this.red),this.bi=this.b.redInvert(),this.a2=this.a.redAdd(this.two),this.a24=this.a2.redMul(this.i4),this.a3=this.a.redMul(this.i3),this.a0=this.a.redMul(this.bi),this.b0=this.bi.redSqr(),this._finalize(e)}static _isomorphism(e,t,r){P(e instanceof a),P(t instanceof a),P(r instanceof a);const i=e.clone(),s=r.clone();if(1!==t.redDiv(r).redJacobi())throw new Error("Invalid `b` coefficient.");return[i,s]}_short(e,t){const{a:r,b:i,three:s}=this,n=r.redSqr(),o=n.redMul(r),a=i.redSqr(),h=a.redMul(i),c=s.redSub(n),u=a.redMuln(3),f=o.redMuln(2).redISub(r.redMuln(9)),d=h.redMuln(27),p=c.redDiv(u),b=f.redDiv(d);return null!=e?l._isomorphism(p,b,e,t):[p,b]}_mont(e){return b._isomorphism(this.a,this.b,e)}_edwards(e,t=!1){P("boolean"==typeof t);const{two:r,bi:i}=this,s=this.a.redAdd(r).redMul(i),n=this.a.redSub(r).redMul(i);return t&&s.swap(n),null!=e?_._isomorphism(s,n,e):[s,n]}_scaleShort(e){P(e instanceof l);const[t,r]=e._scale(this);return[this.field(t.redInvert()),this.field(r.redInvert())]}_scaleMont(e){return P(e instanceof b),this.g.isInfinity()||e.g.isInfinity()?this.field(e.b).redDivSqrt(this.b):this.g.y.redDiv(this.field(e.g.y))}_scaleEdwards(e,t){P(e instanceof _);const r=e._scale(this,t);return this.field(r)}_solveY0(e){P(e instanceof a);const t=this.a0,r=this.b0,i=e.redSqr();return i.redMul(e).redIAdd(t.redMul(i)).redIAdd(r.redMul(e))}_elligator2(e){const t=this.a0.redNeg(),r=this.one.redAdd(this.z.redMul(e.redSqr()));r.cinject(this.one,r.czero());const i=t.redMul(r.redFermat()),s=i.redNeg().redISub(this.a0),n=this._solveY0(i),o=this._solveY0(s),a=0|n.redIsSquare(),h=i.cinject(s,1^a),c=n.cinject(o,1^a).redSqrt();c.cinject(c.redNeg(),c.redIsOdd()^e.redIsOdd());const u=this.b.redMul(h),f=this.b.redMul(c);return this.point(u,f)}_invert2(e,t){const{x:r,y:i}=e,s=1&t,n=r.redMul(this.bi),o=i.redMul(this.bi),a=n.redAdd(this.a0),h=n;a.cswap(h,s);const c=a.redINeg(),u=h.redMul(this.z),[f,l]=N(c,u);if(l.cinject(l.redNeg(),l.redIsOdd()^o.redIsOdd()),!f)throw new Error("Invalid point.");return l}_constMul(e,t,r){P(e instanceof g);const i=e.toX(),[s,n]=i.ladderConst(t,r),o=e.recover(n,s);return t.isNeg()?o.neg():o}isElliptic(){const e=this.a.redSqr();return!this.b.redMul(e.redSub(this.four)).isZero()}jinv(){const{a:e,three:t,four:r}=this,i=e.redSqr(),s=i.redSub(t).redPown(3).redIMuln(256),n=i.redSub(r);if(n.isZero())throw new Error("Curve is not elliptic.");return s.redDiv(n).fromRed()}point(e,t,r=0){return new g(this,e,t,r)}jpoint(e,t,r){return P(null==e&&null==t&&null==r),this.point()}xpoint(e,t){return new m(this,e,t)}solveY2(e){P(e instanceof a);const t=e.redSqr();return t.redMul(e).redIAdd(this.a.redMul(t)).redIAdd(e).redMul(this.bi)}validate(e){if(P(e instanceof g),e.isInfinity())return!0;const{x:t,y:r}=e,i=this.solveY2(t);return r.redSqr().eq(i)}pointFromX(e,t=null){P(e instanceof a),P(null==t||"boolean"==typeof t),e.red||(e=e.toRed(this.red));const r=this.solveY(e);return null!=t&&r.redIsOdd()!==t&&r.redINeg(),this.point(e,r)}isIsomorphic(e,t){if(P(e instanceof u),!e.p.eq(this.p))return!1;if("mont"===e.type){const t=this.field(e.a),r=this.field(e.b);return!!this.a.eq(t)&&(!this.b.isZero()&&1===r.redDiv(this.b).redJacobi())}return e.isIsomorphic(this,t)}isIsogenous(e){return P(e instanceof u),"mont"!==e.type&&e.isIsogenous(this)}pointFromShort(e){if(P(e instanceof d),this.isIsomorphic(e.curve)){if(e.isInfinity())return this.point();const{a3:t,b:r}=this,[i,s]=this._scale(e.curve),n=this.field(e.x).redMul(i),o=this.field(e.y).redMul(s),a=r.redMul(n).redISub(t),h=r.redMul(o);return this.point(a,h)}throw new Error("Not implemented.")}pointFromMont(e){if(P(e instanceof g),this.isIsomorphic(e.curve)){if(e.isInfinity())return this.point();const t=this._scale(e.curve),r=this.field(e.x),i=this.field(e.y),s=r,n=t.redMul(i);return this.point(s,n)}throw new Error("Not implemented.")}pointFromEdwards(e){P(e instanceof w),P(e.curve.p.eq(this.p));const t=this.field(e.x),r=this.field(e.y),i=this.field(e.z);if(this.isIsogenous(e.curve)){if(e.isInfinity())return this.point();if(e.x.isZero())return this.point(this.zero,this.zero);const s=i.redSqr().redIMuln(2),n=r.redSqr(),o=t.redSqr(),a=s.redISub(o).redISub(n).redMul(r),h=o.redMul(t);return this.cpoint(n,o,a,h)}if(this.isIsomorphic(e.curve,!0)){if(e.isInfinity())return this.point();if(e.x.isZero())return this.point(this.zero,this.zero);const s=this._scale(e.curve,!0),n=r.redAdd(i),o=r.redSub(i),a=s.redMul(i).redMul(n),h=t.redMul(o);return this.cpoint(n,o,a,h)}if(this.isIsomorphic(e.curve,!1)){if(e.isInfinity())return this.point();if(e.x.isZero())return this.point(this.zero,this.zero);const s=this._scale(e.curve,!1),n=i.redAdd(r),o=i.redSub(r),a=s.redMul(i).redMul(n),h=t.redMul(o);return this.cpoint(n,o,a,h)}throw new Error("Not implemented.")}pointFromUniform(e){if(P(e instanceof a),this.z.isZero()||this.a.isZero())throw new Error("Not implemented.");return this._elligator2(e)}pointToUniform(e,t){if(P(e instanceof g),P(t>>>0===t),this.z.isZero()||this.a.isZero())throw new Error("Not implemented.");if(e.isInfinity())throw new Error("Invalid point.");return this._invert2(e,t)}decodePoint(e,t){return g.decode(this,e,t)}encodeX(e){return P(e instanceof m),e.encode()}decodeX(e){return m.decode(this,e)}toShort(e,t,r=null){const[i,s]=this._short(e,t),n=new l({red:this.red,prime:this.prime,p:this.p,a:i,b:s,n:this.n,h:this.h});if(null!=r){const[,e]=n._scale(this);e.redIsOdd()!==r&&e.redINeg()}return this.g.isInfinity()||(n.g=n.pointFromMont(this.g)),n}toMont(e,t=null){const[r,i]=this._mont(e),s=new b({red:this.red,prime:this.prime,p:this.p,a:r,b:i,n:this.n,h:this.h,z:this.z});if(null!=t){const e=s._scale(this);e.redIsOdd()!==t&&e.redINeg()}return this.g.isInfinity()||(s.g=s.pointFromMont(this.g)),s}toEdwards(e,t,r=null){const[i,s]=this._edwards(e,t),n=new _({red:this.red,prime:this.prime,p:this.p,a:i,d:s,n:this.n,h:this.h,z:this.z});if(null!=r){const e=n._scale(this,t);e.redIsOdd()!==r&&e.redINeg()}return this.g.isInfinity()||(n.g=n.pointFromMont(this.g),n.g.normalize()),n}pointFromJSON(e){return g.fromJSON(this,e)}toJSON(e){const t=super.toJSON(e);return t.a=this.a.fromRed().toJSON(),t.b=this.b.fromRed().toJSON(),t}}class g extends f{constructor(e,t,r,i){P(e instanceof b),super(e,h.AFFINE),this.x=this.curve.zero,this.y=this.curve.zero,this.inf=1,null!=t&&this._init(t,r,i)}_init(e,t,r){P(e instanceof a),P(t instanceof a),this.x=e,this.y=t,this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=0|r}clone(){return this.curve.point(this.x.clone(),this.y.clone(),this.inf)}swap(e,t){P(e instanceof g);const r=1&(t>>31|-t>>31),i=this.inf,s=e.inf;return this.x.cswap(e.x,t),this.y.cswap(e.y,t),this.inf=i&(1^r)|s&r,e.inf=s&(1^r)|i&r,this}scale(e){return this.clone()}randomize(e){return this.clone()}neg(){return this.inf?this:this.curve.point(this.x,this.y.redNeg())}add(e){if(P(e instanceof g),this.inf)return e;if(e.inf)return this;if(this.x.eq(e.x))return this.y.eq(e.y)?this.dbl():this.curve.point();const t=e.x.redSub(this.x),r=e.y.redSub(this.y).redDiv(t),i=this.curve.b.redMul(r.redSqr()).redISub(this.curve.a).redISub(this.x).redISub(e.x),s=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)}dbl(){if(this.inf)return this;if(this.y.isZero())return this.curve.point();const e=this.x.redSqr().redIMuln(3),t=this.curve.a.redMul(this.x).redIMuln(2),r=e.redIAdd(t).redIAdd(this.curve.one),i=this.curve.b.redMul(this.y).redIMuln(2),s=r.redDiv(i),n=this.curve.b.redMul(s.redSqr()).redISub(this.curve.a).redISub(this.x).redISub(this.x),o=s.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,o)}uadd(e){P(e instanceof g);const t=e.x.redSub(this.x),r=e.y.redSub(this.y),i=this.x.redSqr().redIMuln(3),s=this.curve.a.redMul(this.x).redIMuln(2),n=i.redIAdd(s).redIAdd(this.curve.one),o=this.curve.b.redMul(this.y).redIMuln(2),a=t.czero()&r.czero();r.cinject(n,a),t.cinject(o,a);const h=t.czero()&(1^(this.inf|e.inf));t.cinject(this.curve.one,t.czero());const c=r.redMul(t.redFermat()),u=this.curve.b.redMul(c.redSqr()).redISub(this.curve.a).redISub(this.x).redISub(e.x),f=c.redMul(this.x.redSub(u)).redISub(this.y),l=h|this.inf&e.inf;return u.cinject(e.x,this.inf),f.cinject(e.y,this.inf),u.cinject(this.x,e.inf),f.cinject(this.y,e.inf),u.cinject(this.curve.zero,l),f.cinject(this.curve.zero,l),this.curve.point(u,f,l)}udbl(){return this.uadd(this)}recover(e,t){if(P(e instanceof m),P(t instanceof m),this.inf)return this.curve.point();const r=this.x.redMul(e.z),i=e.x.redAdd(r),s=e.x.redSub(r).redSqr().redMul(t.x),n=this.curve.a.redMul(e.z).redIMuln(2),o=i.redIAdd(n),a=this.x.redMul(e.x).redIAdd(e.z),h=o.redMul(a),c=n.redMul(e.z),u=h.redISub(c).redMul(t.z),f=this.curve.b.redMul(this.y).redIMuln(2).redMul(e.z).redMul(t.z),l=f.redMul(e.x),d=u.redISub(s),p=f.redMul(e.z);if(p.isZero())return this.curve.point();const b=p.redInvert(),g=l.redMul(b),_=d.redMul(b);return this.curve.point(g,_)}getX(){if(this.inf)throw new Error("Invalid point.");return this.x.fromRed()}getY(){if(this.inf)throw new Error("Invalid point.");return this.y.fromRed()}eq(e){return P(e instanceof g),this===e||(this.inf?0!==e.inf:!e.inf&&(this.x.eq(e.x)&&this.y.eq(e.y)))}isInfinity(){return 0!==this.inf}isOdd(){return!this.inf&&this.y.redIsOdd()}isEven(){return!this.inf&&this.y.redIsEven()}toP(){return this}toJ(){return this}toX(){return this.inf?this.curve.xpoint():this.curve.xpoint(this.x,this.curve.one)}encode(){return this.toX().encode()}static decode(e,t,r){return P(e instanceof b),e.decodeX(t).toP(r)}toJSON(e){if(this.inf)return[];return[this.getX().toJSON(),this.getY().toJSON()]}static fromJSON(e,t){if(P(e instanceof b),P(Array.isArray(t)),P(0===t.length||2===t.length||3===t.length),0===t.length)return e.point();const r=a.fromJSON(t[0]),i=a.fromJSON(t[1]);return e.point(r,i)}[o](){return this.inf?"<MontPoint: Infinity>":"<MontPoint: x="+this.x.fromRed().toString(16,2)+" y="+this.y.fromRed().toString(16,2)+">"}}class m extends f{constructor(e,t,r){P(e instanceof b),super(e,h.PROJECTIVE),this.x=this.curve.one,this.z=this.curve.zero,null!=t&&this._init(t,r)}_init(e,t){P(e instanceof a),P(null==t||t instanceof a),this.x=e,this.z=t||this.curve.one,this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red))}clone(){return this.curve.xpoint(this.x.clone(),this.z.clone())}swap(e,t){return P(e instanceof m),this.x.cswap(e.x,t),this.z.cswap(e.z,t),this}precompute(e,t){return this}validate(){if(this.isInfinity())return!0;const{x:e,z:t}=this,r=e.redSqr(),i=r.redMul(e),s=t.redSqr(),n=this.curve.a.redMul(r).redMul(t);return-1!==i.redIAdd(n).redIAdd(e.redMul(s)).redMul(this.curve.bi).redMul(t).redJacobi()}normalize(){return this.isInfinity()?this:this.z.eq(this.curve.one)?this:(this.x=this.x.redDiv(this.z),this.z=this.curve.one,this)}scale(e){if(P(e instanceof a),this.isInfinity())return this.curve.xpoint();const t=this.x.redMul(e),r=this.z.redMul(e);return this.curve.xpoint(t,r)}neg(){return this}dbl(){const e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),i=e.redMul(t),s=r.redMul(t.redIAdd(this.curve.a24.redMul(r)));return this.curve.xpoint(i,s)}diffAdd(e,t){P(e instanceof m),P(t instanceof m);const r=e.x.redAdd(e.z),i=e.x.redSub(e.z),s=t.x.redAdd(t.z),n=t.x.redSub(t.z).redMul(r),o=s.redMul(i),a=this.z.redMul(n.redAdd(o).redSqr()),h=this.x.redMul(n.redISub(o).redSqr());return this.curve.xpoint(a,h)}diffAddDbl(e,t){P(e instanceof m),P(t instanceof m);const r=t.x.redAdd(t.z),i=r.redSqr(),s=t.x.redSub(t.z),n=s.redSqr(),o=i.redSub(n),a=e.x.redAdd(e.z),h=e.x.redSub(e.z).redMul(r),c=a.redMul(s),u=this.z.redMul(h.redAdd(c).redSqr()),f=this.x.redMul(h.redISub(c).redSqr()),l=i.redMul(n),d=o.redMul(n.redIAdd(this.curve.a24.redMul(o)));return[this.curve.xpoint(u,f),this.curve.xpoint(l,d)]}getX(){if(this.isInfinity())throw new Error("Invalid point.");return this.normalize(),this.x.fromRed()}getY(e){return this.toP(e).getY()}eq(e){if(P(e instanceof m),this===e)return!0;if(this.isInfinity())return e.isInfinity();if(e.isInfinity())return!1;if(this.z.eq(e.z))return this.x.eq(e.x);const t=this.x.redMul(e.z),r=e.x.redMul(this.z);return t.eq(r)}isInfinity(){return this.z.isZero()}isOdd(){return!1}isEven(){return!1}hasTorsion(){return!this.isInfinity()&&(!!this.x.isZero()||super.hasTorsion())}jmul(e){return this.ladder(e)[1]}jmulSimple(e){return this.ladderSimple(e)[1]}jmulBlind(e,t){return this.ladderBlind(e,t)[1]}jmulConst(e,t){return this.ladderConst(e,t)[1]}jmulAdd(e,t,r){throw new Error("Not implemented.")}jmulAddSimple(e,t,r){throw new Error("Not implemented.")}ladder(e){P(e instanceof a),P(!e.red);const t=e.bitLength();let r=this,i=this.curve.xpoint();for(let s=t-1;s>=0;s--){0===e.utestn(s)?[r,i]=this.diffAddDbl(r,i):[i,r]=this.diffAddDbl(i,r)}return[r,i]}ladderSimple(e){P(e instanceof a),P(!e.red);const t=e.bitLength();let r=this,i=this.curve.xpoint();for(let s=t-1;s>=0;s--){0===e.utestn(s)?(r=this.diffAdd(r,i),i=i.dbl()):(i=this.diffAdd(i,r),r=r.dbl())}return[r,i]}ladderBlind(e,t){return t?this.randomize(t).ladder(e):this.ladder(e)}ladderConst(e,t){P(e instanceof a),P(!e.red);const r=Math.max(e.bitLength(),this.curve.fieldBits),i=r+7>>>3,s=e.toArray("le",i),n=t?this.randomize(t):this;let o=n.clone(),h=this.curve.xpoint().clone(),c=0;for(let e=r-1;e>=0;e--){const t=s[e>>3]>>(7&e)&1;o.swap(h,c^t),[o,h]=n.diffAddDbl(o,h),c=t}return o.swap(h,c),[o,h]}toP(e=null){return P(null==e||"boolean"==typeof e),this.isInfinity()?this.curve.point():(this.normalize(),this.curve.pointFromX(this.x,e))}toJ(){return this}toX(){return this}encode(){return this.curve.encodeField(this.getX())}static decode(e,t){P(e instanceof b);const r=e.decodeField(t);r.iumaskn(e.fieldBits);const i=e.xpoint(r,e.one);return P(!i.isInfinity()),i}toJSON(e){return this.toP().toJSON(e)}static fromJSON(e,t){return g.fromJSON(e,t).toX()}[o](){return this.isInfinity()?"<XPoint: Infinity>":"<XPoint: x="+this.x.fromRed().toString(16,2)+" z="+this.z.fromRed().toString(16,2)+">"}}class _ extends u{constructor(e){super(w,"edwards",e),this.a=a.fromJSON(e.a).toRed(this.red),this.d=a.fromJSON(e.d).toRed(this.red),this.s=a.fromJSON(e.s||"0").toRed(this.red),this.si=this.s.isZero()?this.zero:this.s.redInvert(),this.k=this.d.redMuln(2),this.smi=-this.d.redNeg().word(0),this.ad6=this.a.redAdd(this.d).redMul(this.i6),this.twisted=!this.a.eq(this.one),this.oneA=this.a.eq(this.one),this.mOneA=this.a.eq(this.one.redNeg()),this.smallD=null!=this.prime&&1===this.d.redNeg().length,this.alt=null,this._finalize(e)}static _isomorphism(e,t,r){P(e instanceof a),P(t instanceof a),P(r instanceof a);const i=r.clone(),s=r.redMul(t).redDiv(e);if(1!==e.redDiv(r).redJacobi())throw new Error("Invalid `a` coefficient.");return[i,s]}_short(e,t){const{a:r,d:i}=this,s=r.redSqr(),n=s.redMul(r),o=i.redSqr(),a=o.redMul(i),h=r.redMul(i).redIMuln(14),c=s.redMul(i),u=r.redMul(o),f=c.redIAdd(u).redIMuln(33),d=s.redAdd(h).redIAdd(o).redDivn(-48),p=f.redISub(n).redISub(a).redDivn(864);return null!=e?l._isomorphism(d,p,e,t):[d,p]}_mont(e,t=!1){let r,i;P("boolean"==typeof t),t?(r=this.d.redAdd(this.a),i=this.d.redSub(this.a)):(r=this.a.redAdd(this.d),i=this.a.redSub(this.d));const s=i.redInvert(),n=r.redMuln(2).redMul(s),o=s.redMuln(4);return null!=e?b._isomorphism(n,o,e):[n,o]}_edwards(e){return _._isomorphism(this.a,this.d,e)}_scaleShort(e){P(e instanceof l);const[t,r]=e._scale(this);return[this.field(t.redInvert()),this.field(r.redInvert())]}_scaleMont(e,t=!1){if(P(e instanceof b),P("boolean"==typeof t),this.g.isInfinity()||e.g.isInfinity()){const[r]=e._edwards(null,t);return this.field(r).redDivSqrt(this.a)}const r=e.g.x.redDiv(e.g.y);return this.g.x.redDiv(this.field(r))}_scaleEdwards(e){return P(e instanceof _),this.g.isInfinity()||e.g.isInfinity()?this.field(e.a).redDivSqrt(this.a):this.g.x.redDiv(this.field(e.g.x))}_mulA(e){return P(e instanceof a),this.oneA?e.clone():this.mOneA?e.redNeg():this.a.redMul(e)}_mulD(e){return P(e instanceof a),this.smallD?e.redMuln(this.smi):this.d.redMul(e)}_elligator1(e){const{s:t,si:r,i2:i,one:s,two:n}=this,o=r.redSqr().redIMuln(2),a=t.redSqr().redMul(i),h=a.redSqr(),c=o.redAdd(a),u=c.redSqr().redISub(n),f=o.redSub(s),l=this.p.subn(2),d=this.p.subn(1).iushrn(1),p=this.p.addn(1).iushrn(2),b=s.redSub(e),g=s.redAdd(e),m=b.redMul(g.redPow(l)),_=m.redSqr(),w=_.redMul(m),y=w.redMul(_).redAdd(u.redMul(w)).redIAdd(m),v=y.redPow(d),E=_.redAdd(h).redPow(d),S=v.redMul(E),I=v.redMul(m),k=v.redMul(y).redPow(p).redMul(S),A=s.redAdd(I),O=c.redMul(I),x=A.redSqr(),R=f.redMul(t).redMul(I).redMul(A),M=k.cinject(this.one,m.czero()),P=O.redSub(x),B=O.redAdd(x);return this.cpoint(R,M,P,B)}_invert1(e,t){const{s:r,si:i,i2:s,one:n}=this,{x:o,y:a,z:h}=e,c=1&t,u=i.redSqr().redIMuln(2),f=r.redSqr().redMul(s),l=f.redSqr(),d=u.redAdd(f),p=u.redSub(n),b=this.p.subn(2),g=this.p.subn(1).iushrn(1),m=this.p.addn(1).iushrn(2),_=a.redSub(h),w=a.redAdd(h).redIMuln(2),y=_.redMul(w.redPow(b)),v=n.redAdd(y.redMul(d)),E=v.redSqr().redISub(n),S=E.redPow(m),I=S.redSqr().ceq(E),k=S.redSub(v),A=n.redAdd(k),O=p.redMul(r).redMul(k).redMul(A).redMul(o.redMul(h)),x=k.redSqr().redIAdd(l),R=O.redMul(x).redPow(g).redMul(k),M=n.redSub(R),P=n.redAdd(R),B=M.redMul(P.redPow(b));if(B.cinject(B.redNeg(),B.redIsOdd()^c),!I)throw new Error("Invalid point.");return B}_alt(){return this.alt||(this.alt=this.toMont()),this.alt}isElliptic(){const e=this.a.redMul(this.d),t=this.a.redSub(this.d);return!e.redMul(t).isZero()}jinv(){const{a:e,d:t}=this,r=e.redMul(t),i=e.redSub(t).redPown(4),s=e.redSqr(),n=t.redSqr(),o=s.redAdd(r.redMuln(14)).redIAdd(n).redPown(3).redIMuln(16),a=r.redMul(i);if(a.isZero())throw new Error("Curve is not elliptic.");return o.redDiv(a).fromRed()}point(e,t,r,i){return new w(this,e,t,r,i)}jpoint(e,t,r){return P(null==e&&null==t&&null==r),this.point()}cpoint(e,t,r,i){P(e instanceof a),P(t instanceof a),P(r instanceof a),P(i instanceof a);const s=e.redMul(i),n=r.redMul(t),o=t.redMul(i),h=e.redMul(r);return this.point(s,n,o,h)}solveX2(e){P(e instanceof a);const t=e.redSqr(),r=this._mulD(t).redISub(this.a);return t.redISub(this.one).redDiv(r)}solveX(e){const t=e.redSqr(),r=this._mulD(t).redISub(this.a);return t.redISub(this.one).redDivSqrt(r)}solveY2(e){P(e instanceof a);const t=e.redSqr(),r=this._mulA(t).redISub(this.one),i=this._mulD(t).redISub(this.one);return r.redDiv(i)}solveY(e){const t=e.redSqr(),r=this._mulA(t).redISub(this.one),i=this._mulD(t).redISub(this.one);return r.redDivSqrt(i)}validate(e){if(P(e instanceof w),e.zOne){const t=e.x.redSqr(),r=e.y.redSqr(),i=this._mulD(t).redMul(r),s=this._mulA(t).redIAdd(r),n=this.one.redAdd(i),o=e.t,a=e.x.redMul(e.y);return s.eq(n)&&o.eq(a)}const t=e.x.redSqr(),r=e.y.redSqr(),i=e.z.redSqr(),s=i.redSqr(),n=this._mulD(t).redMul(r),o=this._mulA(t).redIAdd(r).redMul(i),a=s.redIAdd(n),h=e.t.redMul(e.z),c=e.x.redMul(e.y);return o.eq(a)&&h.eq(c)}pointFromX(e,t=null){P(e instanceof a),P(null==t||"boolean"==typeof t),e.red||(e=e.toRed(this.red));const r=this.solveY(e);if(null!=t){if(r.isZero()&&t)throw new Error("Invalid point.");r.redIsOdd()!==t&&r.redINeg()}return this.point(e,r)}pointFromY(e,t=null){P(e instanceof a),P(null==t||"boolean"==typeof t),e.red||(e=e.toRed(this.red));const r=this.solveX(e);if(null!=t){if(r.isZero()&&t)throw new Error("Invalid point.");r.redIsOdd()!==t&&r.redINeg()}return this.point(r,e)}isIsomorphic(e,t=!1){if(P(e instanceof u),P("boolean"==typeof t),!e.p.eq(this.p))return!1;if("short"===e.type)return e.isIsomorphic(this);if("mont"===e.type){const r=this.field(e.a);let i,s;return t?(i=this.d.redAdd(this.a),s=this.d.redSub(this.a)):(i=this.a.redAdd(this.d),s=this.a.redSub(this.d)),r.redMul(s).eq(i.redIMuln(2))}if("edwards"===e.type){const t=this.field(e.a),r=this.field(e.d);return this.a.redMul(r).eq(t.redMul(this.d))}return!1}isIsogenous(e){if(P(e instanceof u),!e.p.eq(this.p))return!1;if("mont"===e.type){if(!this.a.eq(this.one))return!1;const t=this.field(e.a),r=this.field(e.b),i=this.two.redSub(this.d.redMuln(4));return t.eq(i)&&r.eq(this.one)}if("edwards"===e.type){const t=this.field(e.a),r=this.field(e.d);return t.eq(this.a.redNeg())&&r.eq(this.d.redSub(this.a))}return!1}pointFromShort(e){if(P(e instanceof d),this.isIsomorphic(e.curve)){if(e.isInfinity())return this.point();if(e.y.isZero())return this.point(this.zero,this.one.redNeg());const{a:t,d:r}=this,[i,s]=this._scale(e.curve),n=t.redMuln(5),o=r.redMuln(5),a=this.field(e.x).redMul(i),h=this.field(e.y).redMul(s),c=a.redMuln(6),u=a.redMuln(12),f=c.redSub(t).redISub(r),l=h.redMuln(6),d=u.redSub(n).redIAdd(r),p=u.redAdd(t).redISub(o);return this.cpoint(f,l,d,p)}throw new Error("Not implemented.")}pointFromMont(e){P(e instanceof g),P(e.curve.p.eq(this.p));const t=this.field(e.x),r=this.field(e.y);if(this.isIsogenous(e.curve)){if(e.isInfinity())return this.point();if(e.x.isZero())return this.point();const i=t.redSqr(),s=i.redMul(t),n=s.redMul(t),o=n.redMul(t),a=r.redSqr(),h=r.redMuln(4),c=i.redSub(this.one),u=i.redMuln(2),f=a.redMuln(4),l=s.redIMuln(2),d=t.redMul(a).redIMuln(4),p=i.redMul(a).redIMuln(2),b=a.redIMuln(2),g=h.redMul(c),m=n.redISub(u).redIAdd(f).redIAdd(this.one),_=o.redSub(l).redISub(d).redIAdd(t).redINeg(),w=o.redISub(p).redISub(l).redISub(b).redIAdd(t);return this.cpoint(g,m,_,w).divn(4)}if(this.isIsomorphic(e.curve,!0)){if(e.isInfinity())return this.point();if(e.x.isZero())return this.point(this.zero,this.one.redNeg());const i=this._scale(e.curve,!0).redMul(t),s=r,n=t.redAdd(this.one),o=t.redSub(this.one);return this.cpoint(i,s,n,o)}if(this.isIsomorphic(e.curve,!1)){if(e.isInfinity())return this.point();if(e.x.isZero())return this.point(this.zero,this.one.redNeg());const i=this._scale(e.curve,!1).redMul(t),s=r,n=t.redSub(this.one),o=t.redAdd(this.one);return this.cpoint(i,s,n,o)}throw new Error("Not implemented.")}pointFromEdwards(e){P(e instanceof w),P(e.curve.p.eq(this.p));const t=this.field(e.curve.a),r=this.field(e.x),i=this.field(e.y),s=this.field(e.z),n=this.field(e.t);if(this.isIsogenous(e.curve)){const e=r.redMul(i),n=r.redSqr(),o=i.redSqr(),a=s.redSqr(),h=t.redMul(n),c=e.redIMuln(2),u=o.redSub(h),f=o.redAdd(h),l=a.redIMuln(2).redISub(f),d=this.cpoint(c,u,f,l);return this.twisted?d:d.divn(4)}if(this.isIsomorphic(e.curve)){const t=this._scale(e.curve),o=t.redMul(r),a=i,h=s,c=t.redMul(n);return this.point(o,a,h,c)}throw new Error("Not implemented.")}pointFromUniform(e,t=null){P(e instanceof a),P(e.red===this.red),P(null==t||t instanceof b),t||(t=this._alt());const r=t.field(e),i=t.pointFromUniform(r);return this.pointFromMont(i)}pointToUniform(e,t,r=null){P(e instanceof w),P(t>>>0===t),P(null==r||r instanceof b),r||(r=this._alt());const i=r.pointFromEdwards(e),s=r.pointToUniform(i,t);return this.field(s)}pointFromHash(e,t,r=null){P(null==r||r instanceof b),r||(r=this._alt());const i=r.pointFromHash(e,t);return this.pointFromMont(i)}pointToHash(e,t,r=null){P(null==r||r instanceof b),r||(r=this._alt());const i=r.pointFromEdwards(e);return r.pointToHash(i,t)}decodePoint(e){return w.decode(this,e)}toShort(e,t,r=null){const[i,s]=this._short(e,t),n=new l({red:this.red,prime:this.prime,p:this.p,a:i,b:s,n:this.n,h:this.h});if(null!=r){const[,e]=n._scale(this);e.redIsOdd()!==r&&e.redINeg()}return this.g.isInfinity()||(n.g=n.pointFromEdwards(this.g)),n}toMont(e,t,r=null){const[i,s]=this._mont(e,t),n=new b({red:this.red,prime:this.prime,p:this.p,a:i,b:s,n:this.n,h:this.h,z:this.z});if(null!=r){const e=this._scale(n,t);e.redIsOdd()!==r&&e.redINeg()}return this.g.isInfinity()||(n.g=n.pointFromEdwards(this.g)),n}toEdwards(e,t=null){const[r,i]=this._edwards(e),s=new _({red:this.red,prime:this.prime,p:this.p,a:r,d:i,n:this.n,h:this.h,z:this.z});if(null!=t){const e=s._scale(this);e.redIsOdd()!==t&&e.redINeg()}return this.g.isInfinity()||(s.g=s.pointFromEdwards(this.g),s.g.normalize()),s}pointFromJSON(e){return w.fromJSON(this,e)}toJSON(e){const t=super.toJSON(e);return t.a=this.a.fromRed().toJSON(),t.d=this.d.fromRed().toJSON(),this.s.isZero()||(t.s=this.s.fromRed().toJSON()),t}}class w extends f{constructor(e,t,r,i,s){P(e instanceof _),super(e,h.EXTENDED),this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=1,null!=t&&this._init(t,r,i,s)}_init(e,t,r,i){P(e instanceof a),P(t instanceof a),P(null==r||r instanceof a),P(null==i||i instanceof a),this.x=e,this.y=t,this.z=r||this.curve.one,this.t=i||null,this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=0|this.z.eq(this.curve.one),this._check(),this.t||(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redDiv(this.z)))}_check(){if(this.z.isZero())throw new Error("Invalid point.")}clone(){return this.curve.point(this.x.clone(),this.y.clone(),this.z.clone(),this.t.clone())}swap(e,t){P(e instanceof w);const r=1&(t>>31|-t>>31),i=this.zOne,s=e.zOne;return this.x.cswap(e.x,t),this.y.cswap(e.y,t),this.z.cswap(e.z,t),this.t.cswap(e.t,t),this.zOne=i&(1^r)|s&r,e.zOne=s&(1^r)|i&r,this}normalize(){if(this.zOne)return this;const e=this.z.redInvert();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t=this.t.redMul(e),this.z=this.curve.one,this.zOne=1,this}scale(e){P(e instanceof a);const t=this.x.redMul(e),r=this.y.redMul(e),i=this.z.redMul(e),s=this.t.redMul(e);return this.curve.point(t,r,i,s)}neg(){const e=this.x.redNeg(),t=this.y,r=this.z,i=this.t.redNeg();return this.curve.point(e,t,r,i)}add(e){return P(e instanceof w),this.isInfinity()?e:e.isInfinity()?this:this.zOne?e._add(this,0):this._add(e,0)}_add(e,t){return this.curve.mOneA?this._addM1(e,t):this._addA(e,t)}_addM1(e,t){const r=e.zOne&(1^t),i=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),s=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.k).redMul(e.t),o=r?this.z.redAdd(this.z):this.z.redMul(e.z).redIMuln(2),a=s.redSub(i),h=o.redSub(n),c=o.redIAdd(n),u=s.redIAdd(i),f=a.redMul(h),l=c.redMul(u),d=a.redMul(u),p=h.redMul(c);return this.curve.point(f,l,p,d)}_addA(e,t){const r=e.zOne&(1^t),i=this.x.redMul(e.x),s=this.y.redMul(e.y),n=this.curve._mulD(this.t).redMul(e.t),o=r?this.z.clone():this.z.redMul(e.z),a=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(s),h=o.redSub(n),c=o.redIAdd(n),u=s.redISub(this.curve._mulA(i)),f=a.redMul(h),l=c.redMul(u),d=a.redMul(u),p=h.redMul(c);return this.curve.point(f,l,p,d)}dbl(){return this.isInfinity()?this:this._dbl(0)}_dbl(e){const t=this.zOne&(1^e),r=this.x.redSqr(),i=this.y.redSqr(),s=t?this.curve.two:this.z.redSqr().redIMuln(2),n=this.curve._mulA(r),o=this.x.redAdd(this.y).redSqr().redISub(r).redISub(i),a=n.redAdd(i),h=a.redSub(s),c=n.redISub(i),u=o.redMul(h),f=a.redMul(c),l=o.redMul(c),d=h.redMul(a);return this.curve.point(u,f,d,l)}uadd(e){return P(e instanceof w),this._add(e,1)}udbl(){return this._dbl(1)}getX(){return this.normalize(),this.x.fromRed()}getY(){return this.normalize(),this.y.fromRed()}eq(e){if(P(e instanceof w),P(!this.z.isZero()),P(!e.z.isZero()),this===e)return!0;if(this.z.eq(e.z))return this.x.eq(e.x)&&this.y.eq(e.y);const t=this.x.redMul(e.z),r=e.x.redMul(this.z);if(!t.eq(r))return!1;const i=this.y.redMul(e.z),s=e.y.redMul(this.z);return i.eq(s)}isInfinity(){return P(!this.z.isZero()),!!this.x.isZero()&&this.y.eq(this.z)}isOdd(){return this.normalize(),this.x.redIsOdd()}isEven(){return this.normalize(),this.x.redIsEven()}toP(){return this.normalize()}toJ(){return this}encode(){const e=this.getY();return e.setn(this.curve.signBit,this.x.redIsOdd()),this.curve.encodeField(e)}static decode(e,t){P(e instanceof _);const r=e.decodeField(t),i=0!==r.testn(e.signBit);if(r.setn(e.signBit,0),r.cmp(e.p)>=0)throw new Error("Invalid point.");return e.pointFromY(r,i)}toJSON(e){if(this.isInfinity())return[];const t=this.getX().toJSON(),r=this.getY().toJSON();return!0===e&&this.pre?[t,r,this.pre.toJSON()]:[t,r]}static fromJSON(e,t){if(P(e instanceof _),P(Array.isArray(t)),P(0===t.length||2===t.length||3===t.length),0===t.length)return e.point();const r=a.fromJSON(t[0]),i=a.fromJSON(t[1]),s=e.point(r,i);return t.length>2&&null!=t[2]&&(s.pre=v.fromJSON(s,t[2])),s}[o](){return this.isInfinity()?"<EdwardsPoint: Infinity>":"<EdwardsPoint: x="+this.x.fromRed().toString(16,2)+" y="+this.y.fromRed().toString(16,2)+" z="+this.z.fromRed().toString(16,2)+">"}}class y{constructor(e){P(e instanceof u);const t=e.fieldBits,r=7&t||8;this.curve=e,this.h=255&-e.h.word(0),this.n=(1<<r)-1,this.b=1<<r-1,this.and=a.mask(t).iuxorn(255^this.h),this.or=a.shift(1,t-1)}reduce(e){return P(e instanceof a),P(!e.red),e.iuand(this.and),e.iuor(this.or),e}clamp(e){P(null!=e&&!0===e._isBuffer),P(e.length===this.curve.scalarSize);let t=0,r=this.curve.scalarSize-1;return"be"===this.curve.endian&&([t,r]=[r,t]),e[t]&=this.h,e[r]&=this.n,e[r]|=this.b,e}splitHash(e){P(null!=e&&!0===e._isBuffer),P(e.length===2*this.curve.fieldSize);let t=0;"be"===this.curve.endian&&(t=this.curve.fieldSize-this.curve.scalarSize);const r=e.slice(t,t+this.curve.scalarSize),i=e.slice(this.curve.fieldSize);return this.clamp(r),[r,i]}}class v{constructor(){this.naf=null,this.doubles=null,this.blinding=null,this.beta=null}map(e){P("function"==typeof e);const t=new this.constructor;return this.naf&&(t.naf=this.naf.map(e)),this.doubles&&(t.doubles=this.doubles.map(e)),t}toJSON(){return{naf:this.naf?this.naf.toJSON():null,doubles:this.doubles?this.doubles.toJSON():null,blinding:this.blinding?this.blinding.toJSON():undefined}}fromJSON(e,t){return P(e instanceof f),P(t&&"object"==typeof t),null!=t.naf&&(this.naf=E.fromJSON(e,t.naf)),null!=t.doubles&&(this.doubles=S.fromJSON(e,t.doubles)),null!=t.blinding&&(this.blinding=I.fromJSON(e,t.blinding)),this}static fromJSON(e,t){return(new this).fromJSON(e,t)}}class E{constructor(e,t){this.width=e,this.points=t}map(e){P("function"==typeof e);const{width:t}=this,r=[];for(const t of this.points)r.push(e(t));return new this.constructor(t,r)}toJSON(){return{width:this.width,points:this.points.slice(1).map(e=>e.toJSON())}}static fromJSON(e,t){P(e instanceof f),P(t&&"object"==typeof t),P(t.width>>>0===t.width),P(Array.isArray(t.points));const{curve:r}=e,{width:i}=t,s=[e];for(const e of t.points)s.push(r.pointFromJSON(e));return new this(i,s)}}class S{constructor(e,t){this.step=e,this.points=t}map(e){P("function"==typeof e);const{step:t}=this,r=[];for(const t of this.points)r.push(e(t));return new this.constructor(t,r)}toJSON(){return{step:this.step,points:this.points.slice(1).map(e=>e.toJSON())}}static fromJSON(e,t){P(e instanceof f),P(t&&"object"==typeof t),P(t.step>>>0===t.step),P(Array.isArray(t.points));const{curve:r}=e,{step:i}=t,s=[e];for(const e of t.points)s.push(r.pointFromJSON(e));return new this(i,s)}}class I{constructor(e,t){this.blind=e,this.unblind=t}toJSON(){return{blind:this.blind.toJSON(),unblind:this.unblind.toJSON()}}static fromJSON(e,t){P(e instanceof f),P(t&&"object"==typeof t);const{curve:r}=e;return new this(a.fromJSON(t.blind),r.pointFromJSON(t.unblind))}}class k{constructor(e,t,r,i){this.beta=e,this.lambda=t,this.basis=r,this.pre=i}toJSON(){return{beta:this.beta.fromRed().toJSON(),lambda:this.lambda.toJSON(),basis:[this.basis[0].toJSON(),this.basis[1].toJSON()],pre:[this.pre[0].toJSON(),this.pre[1].toJSON()]}}static fromJSON(e,t){return P(e instanceof u),P(t&&"object"==typeof t),P(Array.isArray(t.basis)),P(Array.isArray(t.pre)),P(2===t.basis.length),P(2===t.pre.length),new this(a.fromJSON(t.beta).toRed(e.red),a.fromJSON(t.lambda),[A.fromJSON(t.basis[0]),A.fromJSON(t.basis[1])],[a.fromJSON(t.pre[0]),a.fromJSON(t.pre[1])])}}class A{constructor(e,t){this.a=e,this.b=t}toJSON(){return{a:this.a.toJSON(),b:this.b.toJSON()}}static fromJSON(e){return P(e&&"object"==typeof e),new this(a.fromJSON(e.a),a.fromJSON(e.b))}}const O={__proto__:null,P192:class extends l{constructor(e){super({id:"P192",ossl:"prime192v1",type:"short",endian:"be",hash:"SHA256",prime:"p192",p:["ffffffff ffffffff ffffffff fffffffe","ffffffff ffffffff"],a:["ffffffff ffffffff ffffffff fffffffe","ffffffff fffffffc"],b:["64210519 e59c80e7 0fa7e9ab 72243049","feb8deec c146b9b1"],n:["ffffffff ffffffff ffffffff 99def836","146bc9b1 b4d22831"],h:"1",z:"-5",g:[["188da80e b03090f6 7cbf20eb 43a18800","f4ff0afd 82ff1012"],["07192b95 ffc8da78 631011ed 6b24cdd5","73f977a1 1e794811"],e]})}},P224:class extends l{constructor(e){super({id:"P224",ossl:"secp224r1",type:"short",endian:"be",hash:"SHA256",prime:"p224",p:["ffffffff ffffffff ffffffff ffffffff","00000000 00000000 00000001"],a:["ffffffff ffffffff ffffffff fffffffe","ffffffff ffffffff fffffffe"],b:["b4050a85 0c04b3ab f5413256 5044b0b7","d7bfd8ba 270b3943 2355ffb4"],n:["ffffffff ffffffff ffffffff ffff16a2","e0b8f03e 13dd2945 5c5c2a3d"],h:"1",z:"1f",g:[["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3","56c21122 343280d6 115c1d21"],["bd376388 b5f723fb 4c22dfe6 cd4375a0","5a074764 44d58199 85007e34"],e]})}},P256:class extends l{constructor(e){super({id:"P256",ossl:"prime256v1",type:"short",endian:"be",hash:"SHA256",prime:null,p:["ffffffff 00000001 00000000 00000000","00000000 ffffffff ffffffff ffffffff"],a:["ffffffff 00000001 00000000 00000000","00000000 ffffffff ffffffff fffffffc"],b:["5ac635d8 aa3a93e7 b3ebbd55 769886bc","651d06b0 cc53b0f6 3bce3c3e 27d2604b"],n:["ffffffff 00000000 ffffffff ffffffff","bce6faad a7179e84 f3b9cac2 fc632551"],h:"1",z:"-a",g:[["6b17d1f2 e12c4247 f8bce6e5 63a440f2","77037d81 2deb33a0 f4a13945 d898c296"],["4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16","2bce3357 6b315ece cbb64068 37bf51f5"],e]})}},P384:class extends l{constructor(e){super({id:"P384",ossl:"secp384r1",type:"short",endian:"be",hash:"SHA384",prime:null,p:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff fffffffe","ffffffff 00000000 00000000 ffffffff"],a:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff fffffffe","ffffffff 00000000 00000000 fffffffc"],b:["b3312fa7 e23ee7e4 988e056b e3f82d19","181d9c6e fe814112 0314088f 5013875a","c656398d 8a2ed19d 2a85c8ed d3ec2aef"],n:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff c7634d81 f4372ddf","581a0db2 48b0a77a ecec196a ccc52973"],h:"1",z:"-c",g:[["aa87ca22 be8b0537 8eb1c71e f320ad74","6e1d3b62 8ba79b98 59f741e0 82542a38","5502f25d bf55296c 3a545e38 72760ab7"],["3617de4a 96262c6f 5d9e98bf 9292dc29","f8f41dbd 289a147c e9da3113 b5f0b8c0","0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"],e]})}},P521:class extends l{constructor(e){super({id:"P521",ossl:"secp521r1",type:"short",endian:"be",hash:"SHA512",prime:"p521",p:["000001ff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff"],a:["000001ff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffff","fffffffc"],b:["00000051 953eb961 8e1c9a1f 929a21a0","b68540ee a2da725b 99b315f3 b8b48991","8ef109e1 56193951 ec7e937b 1652c0bd","3bb1bf07 3573df88 3d2c34f1 ef451fd4","6b503f00"],n:["000001ff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffff","fffffffa 51868783 bf2f966b 7fcc0148","f709a5d0 3bb5c9b8 899c47ae bb6fb71e","91386409"],h:"1",z:"-4",g:[["000000c6 858e06b7 0404e9cd 9e3ecb66","2395b442 9c648139 053fb521 f828af60","6b4d3dba a14b5e77 efe75928 fe1dc127","a2ffa8de 3348b3c1 856a429b f97e7e31","c2e5bd66"],["00000118 39296a78 9a3bc004 5c8a5fb4","2c7d1bd9 98f54449 579b4468 17afbd17","273e662c 97ee7299 5ef42640 c550b901","3fad0761 353c7086 a272c240 88be9476","9fd16650"],e]})}},SECP256K1:class extends l{constructor(e){super({id:"SECP256K1",ossl:"secp256k1",type:"short",endian:"be",hash:"SHA256",prime:"k256",p:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff fffffffe fffffc2f"],a:"0",b:"7",n:["ffffffff ffffffff ffffffff fffffffe","baaedce6 af48a03b bfd25e8c d0364141"],h:"1",z:"1",c:["0a2d2ba9 3507f1df 233770c2 a797962c","c61f6d15 da14ecd4 7d8d27ae 1cd5f852"],g:[["79be667e f9dcbbac 55a06295 ce870b07","029bfcdb 2dce28d9 59f2815b 16f81798"],["483ada77 26a3c465 5da4fbfc 0e1108a8","fd17b448 a6855419 9c47d08f fb10d4b8"],e],endo:{beta:["7ae96a2b 657c0710 6e64479e ac3434e9","9cf04975 12f58995 c1396c28 719501ee"],lambda:["5363ad4c c05c30e0 a5261c02 8812645a","122e22ea 20816678 df02967c 1b23bd72"],basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],pre:["3086d221a7d46bcde86c90e49284eb153dab","-e4437ed6010e88286f547fa90abfe4c42212"]}})}},BRAINPOOLP256:class extends l{constructor(e){super({id:"BRAINPOOLP256",ossl:"brainpoolP256r1",type:"short",endian:"be",hash:"SHA256",prime:null,p:["a9fb57db a1eea9bc 3e660a90 9d838d72","6e3bf623 d5262028 2013481d 1f6e5377"],a:["7d5a0975 fc2c3057 eef67530 417affe7","fb8055c1 26dc5c6c e94a4b44 f330b5d9"],b:["26dc5c6c e94a4b44 f330b5d9 bbd77cbf","95841629 5cf7e1ce 6bccdc18 ff8c07b6"],n:["a9fb57db a1eea9bc 3e660a90 9d838d71","8c397aa3 b561a6f7 901e0e82 974856a7"],h:"1",z:"-2",g:[["8bd2aeb9 cb7e57cb 2c4b482f fc81b7af","b9de27e1 e3bd23c2 3a4453bd 9ace3262"],["547ef835 c3dac4fd 97f8461a 14611dc9","c2774513 2ded8e54 5c1d54c7 2f046997"],e]})}},BRAINPOOLP384:class extends l{constructor(e){super({id:"BRAINPOOLP384",ossl:"brainpoolP384r1",type:"short",endian:"be",hash:"SHA384",prime:null,p:["8cb91e82 a3386d28 0f5d6f7e 50e641df","152f7109 ed5456b4 12b1da19 7fb71123","acd3a729 901d1a71 87470013 3107ec53"],a:["7bc382c6 3d8c150c 3c72080a ce05afa0","c2bea28e 4fb22787 139165ef ba91f90f","8aa5814a 503ad4eb 04a8c7dd 22ce2826"],b:["04a8c7dd 22ce2826 8b39b554 16f0447c","2fb77de1 07dcd2a6 2e880ea5 3eeb62d5","7cb43902 95dbc994 3ab78696 fa504c11"],n:["8cb91e82 a3386d28 0f5d6f7e 50e641df","152f7109 ed5456b3 1f166e6c ac0425a7","cf3ab6af 6b7fc310 3b883202 e9046565"],h:"1",z:"-5",g:[["1d1c64f0 68cf45ff a2a63a81 b7c13f6b","8847a3e7 7ef14fe3 db7fcafe 0cbd10e8","e826e034 36d646aa ef87b2e2 47d4af1e"],["8abe1d75 20f9c2a4 5cb1eb8e 95cfd552","62b70b29 feec5864 e19c054f f9912928","0e464621 77918111 42820341 263c5315"],e]})}},BRAINPOOLP512:class extends l{constructor(e){super({id:"BRAINPOOLP512",ossl:"brainpoolP512r1",type:"short",endian:"be",hash:"SHA512",prime:null,p:["aadd9db8 dbe9c48b 3fd4e6ae 33c9fc07","cb308db3 b3c9d20e d6639cca 70330871","7d4d9b00 9bc66842 aecda12a e6a380e6","2881ff2f 2d82c685 28aa6056 583a48f3"],a:["7830a331 8b603b89 e2327145 ac234cc5","94cbdd8d 3df91610 a83441ca ea9863bc","2ded5d5a a8253aa1 0a2ef1c9 8b9ac8b5","7f1117a7 2bf2c7b9 e7c1ac4d 77fc94ca"],b:["3df91610 a83441ca ea9863bc 2ded5d5a","a8253aa1 0a2ef1c9 8b9ac8b5 7f1117a7","2bf2c7b9 e7c1ac4d 77fc94ca dc083e67","984050b7 5ebae5dd 2809bd63 8016f723"],n:["aadd9db8 dbe9c48b 3fd4e6ae 33c9fc07","cb308db3 b3c9d20e d6639cca 70330870","553e5c41 4ca92619 41866119 7fac1047","1db1d381 085ddadd b5879682 9ca90069"],h:"1",z:"7",g:[["81aee4bd d82ed964 5a21322e 9c4c6a93","85ed9f70 b5d916c1 b43b62ee f4d0098e","ff3b1f78 e2d0d48d 50d1687b 93b97d5f","7c6d5047 406a5e68 8b352209 bcb9f822"],["7dde385d 566332ec c0eabfa9 cf7822fd","f209f700 24a57b1a a000c55b 881f8111","b2dcde49 4a5f485e 5bca4bd8 8a2763ae","d1ca2b2f a8f05406 78cd1e0f 3ad80892"],e]})}},X25519:class extends b{constructor(){super({id:"X25519",ossl:"X25519",type:"mont",endian:"le",hash:"SHA512",prime:"p25519",p:["7fffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffed"],a:"76d06",b:"1",n:["10000000 00000000 00000000 00000000","14def9de a2f79cd6 5812631a 5cf5d3ed"],h:"8",z:"2",g:[["00000000 00000000 00000000 00000000","00000000 00000000 00000000 00000009"],["5f51e65e 475f794b 1fe122d3 88b72eb3","6dc2b281 92839e4d d6163a5d 81312c14"]]})}},X448:class extends b{constructor(){super({id:"X448",ossl:"X448",type:"mont",endian:"le",hash:"SHAKE256",prime:"p448",p:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff fffffffe ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff"],a:"262a6",b:"1",n:["3fffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff 7cca23e9","c44edb49 aed63690 216cc272 8dc58f55","2378c292 ab5844f3"],h:"4",z:"-1",g:[["00000000 00000000 00000000 00000000","00000000 00000000 00000000 00000000","00000000 00000000 00000000 00000000","00000000 00000005"],["7d235d12 95f5b1f6 6c98ab6e 58326fce","cbae5d34 f55545d0 60f75dc2 8df3f6ed","b8027e23 46430d21 1312c4b1 50677af7","6fd7223d 457b5b1a"]]})}},MONT448:class extends b{constructor(){super({id:"MONT448",ossl:null,type:"mont",endian:"le",hash:"SHAKE256",prime:"p448",p:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff fffffffe ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff"],a:["b2cf97d2 d43459a9 31ed36b1 fc4e3cb5","5d93f8d2 22746997 60ccffc6 49961ed6","c5b05fca c24864ed 6fb59697 931b78da","84ddecd8 ca2b5cfb"],b:"1",n:["3fffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff 7cca23e9","c44edb49 aed63690 216cc272 8dc58f55","2378c292 ab5844f3"],h:"4",z:"-1",g:[["ac0d24cc c6c75cb0 eb71f81e 7a6edf51","48e88aee 009a2a24 e795687e c28e125a","3e6730a6 0d46367b aa7fe99d 152128dc","41321bc7 7817f059"],["5a4437f6 80c0d0db 9b061276 d5d0ffcc","e786ff33 b6a53d30 98746425 82e66f09","4433dae7 7244a6e2 6b11e905 7228f483","556c41a5 913f55fe"]]})}},ED25519:class extends _{constructor(e){super({id:"ED25519",ossl:"ED25519",type:"edwards",endian:"le",hash:"SHA512",prefix:"SigEd25519 no Ed25519 collisions",context:!1,prime:"p25519",p:["7fffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffed"],a:"-1",d:["52036cee 2b6ffe73 8cc74079 7779e898","00700a4d 4141d8ab 75eb4dca 135978a3"],n:["10000000 00000000 00000000 00000000","14def9de a2f79cd6 5812631a 5cf5d3ed"],h:"8",z:"2",g:[["216936d3 cd6e53fe c0a4e231 fdd6dc5c","692cc760 9525a7b2 c9562d60 8f25d51a"],["66666666 66666666 66666666 66666666","66666666 66666666 66666666 66666658"],e]})}},ISO448:class extends _{constructor(e){super({id:"ISO448",ossl:null,type:"edwards",endian:"le",hash:"SHAKE256",prefix:"SigEd448",context:!0,prime:"p448",p:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff fffffffe ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff"],a:"1",d:["d78b4bdc 7f0daf19 f24f38c2 9373a2cc","ad461572 42a50f37 809b1da3 412a12e7","9ccc9c81 264cfe9a d0809970 58fb61c4","243cc32d baa156b9"],n:["3fffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff 7cca23e9","c44edb49 aed63690 216cc272 8dc58f55","2378c292 ab5844f3"],h:"4",z:"-1",g:[["79a70b2b 70400553 ae7c9df4 16c792c6","1128751a c9296924 0c25a07d 728bdc93","e21f7787 ed697224 9de732f3 8496cd11","69871309 3e9c04fc"],["7fffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff 80000000","00000000 00000000 00000000 00000000","00000000 00000001"],e]})}},ED448:class extends _{constructor(e){super({id:"ED448",ossl:"ED448",type:"edwards",endian:"le",hash:"SHAKE256",prefix:"SigEd448",context:!0,prime:"p448",p:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff fffffffe ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff"],a:"1",d:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff fffffffe ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffff6756"],n:["3fffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff 7cca23e9","c44edb49 aed63690 216cc272 8dc58f55","2378c292 ab5844f3"],h:"4",z:"-1",g:[["4f1970c6 6bed0ded 221d15a6 22bf36da","9e146570 470f1767 ea6de324 a3d3a464","12ae1af7 2ab66511 433b80e1 8b00938e","2626a82b c70cc05e"],["693f4671 6eb6bc24 88762037 56c9c762","4bea7373 6ca39840 87789c1e 05a0c2d7","3ad3ff1c e67c39c4 fdbd132c 4ed7c8ad","9808795b f230fa14"],e]})}}},x={__proto__:null,P192:null,P224:null,P256:null,P384:null,P521:null,SECP256K1:null,BRAINPOOLP256:null,BRAINPOOLP384:null,BRAINPOOLP512:null,X25519:null,X448:null,MONT448:null,ED25519:null,ISO448:null,ED448:null};function R(e,t,r){P(e instanceof a),P(!e.red),P(t>>>0===t),P(r>>>0===r);const i=new Array(r),s=1<<t+1,n=e.abs(),o=1|e.sign();let h=0;for(;!n.isZero();){let e=0;n.isOdd()&&((e=n.andln(s-1))&s>>>1&&(e-=s),n.isubn(e)),i[h++]=e*o;let r=1;n.isZero()||0!==n.andln(s-1)||(r=t+1);for(let e=1;e<r;e++)i[h++]=0;n.iushrn(r)}for(P(h<=r);h<r;h++)i[h]=0;return i}function M(e,t,r){const i=function(e,t,r){P(e instanceof a),P(t instanceof a),P(!e.red),P(!t.red),P(r>>>0===r);const i=[new Array(r),new Array(r)],s=e.abs(),n=t.abs(),o=1|e.sign(),h=1|t.sign();let c=0,u=0,f=0;for(;s.cmpn(-u)>0||n.cmpn(-f)>0;){let e=s.andln(3)+u&3,t=n.andln(3)+f&3,r=0,a=0;if(3===e&&(e=-1),3===t&&(t=-1),1&e){const i=s.andln(7)+u&7;r=3!==i&&5!==i||2!==t?e:-e}if(1&t){const r=n.andln(7)+f&7;a=3!==r&&5!==r||2!==e?t:-t}i[0][c]=r*o,i[1][c]=a*h,2*u===r+1&&(u=1-u),2*f===a+1&&(f=1-f),s.iushrn(1),n.iushrn(1),c+=1}for(P(c<=r);c<r;c++)i[0][c]=0,i[1][c]=0;return i}(e,t,r),s=new Array(r);for(let e=0;e<r;e++){const t=i[0][e],r=i[1][e];s[e]=c[3*(t+1)+(r+1)]}return s}function P(e,t){if(!e){const e=new Error(t||"Assertion failed");throw Error.captureStackTrace&&Error.captureStackTrace(e,P),e}}function B(e){P(e instanceof a);try{return[1,e.redSqrt()]}catch(t){if("X is not a square mod P."===t.message)return[0,e.clone()];throw t}}function N(e,t){P(e instanceof a),P(t instanceof a);try{return[1,e.redDivSqrt(t)]}catch(t){if("Not invertible."===t.message||"X is not a square mod P."===t.message)return[0,e.clone()];throw t}}function T(e){return a.randomBits(e,32).toNumber()}function C(e,t){const r=new WeakMap;return function(i,s){const n=1&s,o=r.get(i);if(o&&null!==o[n])return o[n];const a=e.call(t,i,s);return r.has(i)||r.set(i,[null,null]),r.get(i)[n]=a,a}}e.Curve=u,e.Point=f,e.ShortCurve=l,e.ShortPoint=d,e.JPoint=p,e.MontCurve=b,e.MontPoint=g,e.XPoint=m,e.EdwardsCurve=_,e.EdwardsPoint=w,e.curves=O,e.curve=function(e,...t){P("string"==typeof e);const r=e.toUpperCase();let i=x[r];if(!i){const s=O[r];if(!s)throw new Error(`Curve not found: "${e}".`);i=new s(...t),x[r]=i}return i},e.register=function(e,t){P("string"==typeof e),P("function"==typeof t);const r=e.toUpperCase();if(O[r])throw new Error(`Curve already registered: "${e}".`);O[r]=t,x[r]=null}}],["bcrypto","/lib/js/precomputed/secp256k1.json",function(e,t,r,i,s,n){r.exports={naf:{width:8,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","0ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","02de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","02972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","0d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["049370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","091b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","0673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","0a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","09414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["078c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","04f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","073867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["0336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","060660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","0b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["04e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["0c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","021ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","0c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","09731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","0cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","0712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]},doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","04e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["06f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["0948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","0e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","067c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["0928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","0d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["08ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]}}}],["bpkg","/lib/builtins/util.js",function(e,t,r,i,s,n){var o=[["util","/util.js",function(e,t,r,i,s){var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},i=0;i<t.length;i++)r[t[i]]=Object.getOwnPropertyDescriptor(e,t[i]);return r},o=/%[sdj%]/g;e.format=function(e){if(!y(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(u(arguments[r]));return t.join(" ")}r=1;for(var i=arguments,s=i.length,n=String(e).replace(o,function(e){if("%%"===e)return"%";if(r>=s)return e;switch(e){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(e){return"[Circular]"}default:return e}}),a=i[r];r<s;a=i[++r])_(a)||!S(a)?n+=" "+a:n+=" "+u(a);return n},e.deprecate=function(t,r){if(void 0!==process&&!0===process.noDeprecation)return t;if(void 0===process)return function(){return e.deprecate(t,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),i=!0}return t.apply(this,arguments)}};var a,c={};function u(t,r){var i={seen:[],stylize:l};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),m(r)?i.showHidden=r:r&&e._extend(i,r),v(i.showHidden)&&(i.showHidden=!1),v(i.depth)&&(i.depth=2),v(i.colors)&&(i.colors=!1),v(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=f),d(i,t,i.depth)}function f(e,t){var r=u.styles[t];return r?"["+u.colors[r][0]+"m"+e+"["+u.colors[r][1]+"m":e}function l(e,t){return e}function d(t,r,i){if(t.customInspect&&r&&A(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var s=r.inspect(i,t);return y(s)||(s=d(t,s,i)),s}var n=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(y(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(w(t))return e.stylize(""+t,"number");if(m(t))return e.stylize(""+t,"boolean");if(_(t))return e.stylize("null","null")}(t,r);if(n)return n;var o=Object.keys(r),a=function(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(r)),k(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return p(r);if(0===o.length){if(A(r)){var h=r.name?": "+r.name:"";return t.stylize("[Function"+h+"]","special")}if(E(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(I(r))return t.stylize(Date.prototype.toString.call(r),"date");if(k(r))return p(r)}var c,u="",f=!1,l=["{","}"];(g(r)&&(f=!0,l=["[","]"]),A(r))&&(u=" [Function"+(r.name?": "+r.name:"")+"]");return E(r)&&(u=" "+RegExp.prototype.toString.call(r)),I(r)&&(u=" "+Date.prototype.toUTCString.call(r)),k(r)&&(u=" "+p(r)),0!==o.length||f&&0!=r.length?i<0?E(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),c=f?function(e,t,r,i,s){for(var n=[],o=0,a=t.length;o<a;++o)M(t,String(o))?n.push(b(e,t,r,i,String(o),!0)):n.push("");return s.forEach(function(s){s.match(/^\d+$/)||n.push(b(e,t,r,i,s,!0))}),n}(t,r,i,a,o):o.map(function(e){return b(t,r,i,a,e,f)}),t.seen.pop(),function(e,t,r){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(c,u,l)):l[0]+u+l[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function b(e,t,r,i,s,n){var o,a,h;if((h=Object.getOwnPropertyDescriptor(t,s)||{value:t[s]}).get?a=h.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):h.set&&(a=e.stylize("[Setter]","special")),M(i,s)||(o="["+s+"]"),a||(e.seen.indexOf(h.value)<0?(a=_(r)?d(e,h.value,null):d(e,h.value,r-1)).indexOf("\n")>-1&&(a=n?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),v(o)){if(n&&s.match(/^\d+$/))return a;(o=JSON.stringify(""+s)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+a}function g(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function _(e){return null===e}function w(e){return"number"==typeof e}function y(e){return"string"==typeof e}function v(e){return void 0===e}function E(e){return S(e)&&"[object RegExp]"===O(e)}function S(e){return"object"==typeof e&&null!==e}function I(e){return S(e)&&"[object Date]"===O(e)}function k(e){return S(e)&&("[object Error]"===O(e)||e instanceof Error)}function A(e){return"function"==typeof e}function O(e){return Object.prototype.toString.call(e)}function x(e){return e<10?"0"+e.toString(10):e.toString(10)}e.debuglog=function(t){if(v(a)&&(a=process.env.NODE_DEBUG||""),t=t.toUpperCase(),!c[t])if(new RegExp("\\b"+t+"\\b","i").test(a)){var r=process.pid;c[t]=function(){var i=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,i)}}else c[t]=function(){};return c[t]},e.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=g,e.isBoolean=m,e.isNull=_,e.isNullOrUndefined=function(e){return null==e},e.isNumber=w,e.isString=y,e.isSymbol=function(e){return"symbol"==typeof e},e.isUndefined=v,e.isRegExp=E,e.isObject=S,e.isDate=I,e.isError=k,e.isFunction=A,e.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},e.isBuffer=h(1);var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.log=function(){var t,r;console.log("%s - %s",(t=new Date,r=[x(t.getHours()),x(t.getMinutes()),x(t.getSeconds())].join(":"),[t.getDate(),R[t.getMonth()],r].join(" ")),e.format.apply(e,arguments))},e.inherits=h(2),e._extend=function(e,t){if(!t||!S(t))return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e};var P="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):undefined;function B(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}e.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(P&&e[P]){var t;if("function"!=typeof(t=e[P]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,P,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,i=new Promise(function(e,i){t=e,r=i}),s=[],n=0;n<arguments.length;n++)s.push(arguments[n]);s.push(function(e,i){e?r(e):t(i)});try{e.apply(this,s)}catch(e){r(e)}return i}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),P&&Object.defineProperty(t,P,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},e.promisify.custom=P,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var i=t.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var s=this,n=function(){return i.apply(s,arguments)};e.apply(this,t).then(function(e){process.nextTick(n,null,e)},function(e){process.nextTick(B,e,n)})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,n(e)),t}}],["util","/support/isBufferBrowser.js",function(e,t,r,i,s){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}}],["inherits","/inherits_browser.js",function(e,t,r,i,s){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}]],a=[];function h(t){if(t>>>0!==t||t>o.length)return function(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}(t);for(;a.length<=t;)a.push(null);var n=a[t];if(n)return n.exports;var h=o[t],c=h[0],u=h[1],f=h[2],l=e,d=r;0!==t&&(d={id:"/"+c+u,exports:l={},parent:r.parent,filename:r.filename,loaded:!1,children:r.children,paths:r.paths}),a[t]=d;try{f.call(l,l,d,i,s,void 0)}catch(e){throw a[t]=null,e}return o[t]=null,0!==t&&(d.loaded=!0),d.exports}h(0)}],["blgr","/lib/blgr.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(57,r)}],["blgr","/lib/logger.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(2,r),a=__browser_require__(58,r),h=__browser_require__(60,r);class c{constructor(e){this.level=c.levels.NONE,this.colors=c.HAS_TTY,this.console=!0,this.shrink=!0,this.closed=!0,this.closing=!1,this.filename=null,this.stream=null,this.contexts=Object.create(null),e&&this.set(e)}set(e){o(e),o(this.closed),"string"!=typeof e?(null!=e.level&&(o("string"==typeof e.level),this.setLevel(e.level)),null!=e.colors&&c.HAS_TTY&&(o("boolean"==typeof e.colors),this.colors=e.colors),null!=e.console&&(o("boolean"==typeof e.console),this.console=e.console),null!=e.shrink&&(o("boolean"==typeof e.shrink),this.shrink=e.shrink),null!=e.filename&&(o("string"==typeof e.filename,"Bad file."),this.filename=e.filename)):this.setLevel(e)}async open(){this.filename?this.stream?this.closed=!1:h.unsupported?this.closed=!1:(this.shrink&&await this.truncate(),this.stream=await l(this.filename),this.stream.once("error",this.handleError.bind(this)),this.closed=!1):this.closed=!1}async close(){if(null!=this.timer&&(clearTimeout(this.timer),this.timer=null),h.unsupported)return this.closed=!0,void(this.stream=null);if(this.stream){try{this.closing=!0,await(e=this.stream,new Promise((t,r)=>{const i=()=>{e.removeListener("error",s),e.removeListener("close",n)},s=e=>{i(),r(e)},n=()=>{i(),t(e)};e.removeAllListeners("error"),e.removeAllListeners("close"),e.once("error",s),e.once("close",n),e.close()}))}finally{this.closing=!1}this.stream=null}var e;this.closed=!0}async truncate(){if(!this.filename)return;if(h.unsupported)return;let e;o(!this.stream);try{e=await h.stat(this.filename)}catch(e){if("ENOENT"===e.code)return;throw e}const t=c.MAX_FILE_SIZE;if(e.size<=t+t/10)return;this.debug("Truncating log file to %dmb.",f(t));const r=await h.open(this.filename,"r+"),i=Buffer.allocUnsafe(t);await h.read(r,i,0,t,e.size-t),await h.ftruncate(r,t),await h.write(r,i,0,t,0),await h.close(r)}handleError(e){try{this.stream.close()}catch(e){}this.stream=null,this.retry()}async reopen(){if(!this.stream&&!this.closed&&!h.unsupported){try{this.stream=await l(this.filename)}catch(e){return void this.retry()}this.stream.once("error",e=>this.handleError(e))}}retry(){null==this.timer&&(this.timer=setTimeout(()=>{this.timer=null,this.reopen()},1e4))}setFile(e){o("string"==typeof e),o(!this.stream,"Log stream has already been created."),this.filename=e}setLevel(e){const t=c.levels[e.toUpperCase()];o(null!=t,"Invalid log level."),this.level=t}error(...e){if(this.level<c.levels.ERROR)return;const t=e[0];t instanceof Error?this.logError(c.levels.ERROR,null,t):this.log(c.levels.ERROR,null,e)}warning(...e){if(this.level<c.levels.WARNING)return;const t=e[0];t instanceof Error?this.logError(c.levels.WARNING,null,t):this.log(c.levels.WARNING,null,e)}info(...e){if(this.level<c.levels.INFO)return;const t=e[0];t instanceof Error?this.logError(c.levels.INFO,null,t):this.log(c.levels.INFO,null,e)}debug(...e){if(this.level<c.levels.DEBUG)return;const t=e[0];t instanceof Error?this.logError(c.levels.DEBUG,null,t):this.log(c.levels.DEBUG,null,e)}spam(...e){if(this.level<c.levels.SPAM)return;const t=e[0];t instanceof Error?this.logError(c.levels.SPAM,null,t):this.log(c.levels.SPAM,null,e)}log(e,t,r){this.closed||this.level<e||(this.writeConsole(e,t,r),this.writeStream(e,t,r))}context(e){let t=this.contexts[e];return t||(t=new u(this,e),this.contexts[e]=t),t}writeConsole(e,t,r){const i=c.levelsByVal[e];if(o(i,"Invalid log level."),!this.console)return!1;if(!process.stdout){let s=`[${i}] `;if(t&&(s+=`(${t}) `),r.length>0){const[t]=r;if(t&&"object"==typeof t)return e===c.levels.ERROR?console.error(s,t):console.log(s,t)}return s+=a(r,!1),e===c.levels.ERROR?console.error(s):console.log(s),!0}let s;if(this.colors){const t=c.styles[e];o(t),s=`[${t}m[${i}][m `}else s=`[${i}] `;return t&&(s+=`(${t}) `),s+=a(r,this.colors),s+="\n",e===c.levels.ERROR?process.stderr.write(s):process.stdout.write(s)}writeStream(e,t,r){const i=c.prefixByVal[e];if(o(i,"Invalid log level."),!this.stream)return;if(this.closing)return;let s=`[${i}:${(new Date).toISOString().slice(0,-5)+"Z"}] `;t&&(s+=`(${t}) `),s+=a(r,!1),s+="\n",this.stream.write(s)}logError(e,t,r){if(this.closed)return;h.unsupported&&this.console&&e<=c.levels.WARNING&&console.error(r);let i=String(r.message).replace(/^ *Error: */,"");e!==c.levels.ERROR&&(i=`Error: ${i}`),this.log(e,t,[i]),e<=c.levels.WARNING&&this.stream&&this.stream.write(r.stack+"\n")}memoryUsage(){if(!process.memoryUsage)return{total:0,jsHeap:0,jsHeapTotal:0,nativeHeap:0,external:0};const e=process.memoryUsage();return{total:f(e.rss),jsHeap:f(e.heapUsed),jsHeapTotal:f(e.heapTotal),nativeHeap:f(e.rss-e.heapTotal),external:f(e.external)}}memory(e){const t=this.memoryUsage();this.log(c.levels.DEBUG,e,["Memory: rss=%dmb, js-heap=%d/%dmb native-heap=%dmb",t.total,t.jsHeap,t.jsHeapTotal,t.nativeHeap])}}class u{constructor(e,t){o("string"==typeof t),this.logger=e,this.module=t}open(){return this.logger.open()}close(){return this.logger.close()}setFile(e){this.logger.setFile(e)}setLevel(e){this.logger.setLevel(e)}error(...e){if(this.logger.level<c.levels.ERROR)return;const t=e[0];t instanceof Error?this.logError(c.levels.ERROR,t):this.log(c.levels.ERROR,e)}warning(...e){if(this.logger.level<c.levels.WARNING)return;const t=e[0];t instanceof Error?this.logError(c.levels.WARNING,t):this.log(c.levels.WARNING,e)}info(...e){if(this.logger.level<c.levels.INFO)return;const t=e[0];t instanceof Error?this.logError(c.levels.INFO,t):this.log(c.levels.INFO,e)}debug(...e){if(this.logger.level<c.levels.DEBUG)return;const t=e[0];t instanceof Error?this.logError(c.levels.DEBUG,t):this.log(c.levels.DEBUG,e)}spam(...e){if(this.logger.level<c.levels.SPAM)return;const t=e[0];t instanceof Error?this.logError(c.levels.SPAM,t):this.log(c.levels.SPAM,e)}log(e,t){this.logger.log(e,this.module,t)}context(e){return new u(this.logger,e)}logError(e,t){this.logger.logError(e,this.module,t)}memoryUsage(){return this.logger.memoryUsage()}memory(){this.logger.memory(this.module)}}function f(e){return Math.floor(e/(1<<20))}function l(e){return new Promise((t,r)=>{const i=h.createWriteStream(e,{flags:"a"}),s=()=>{i.removeListener("error",n),i.removeListener("open",o)},n=e=>{try{i.close()}catch(e){}s(),r(e)},o=()=>{s(),t(i)};i.once("error",n),i.once("open",o)})}c.HAS_TTY=Boolean(process.stdout&&process.stdout.isTTY),c.MAX_FILE_SIZE=20<<20,c.levels={NONE:0,ERROR:1,WARNING:2,INFO:3,DEBUG:4,SPAM:5},c.levelsByVal=["none","error","warning","info","debug","spam"],c.prefixByVal=["N","E","W","I","D","S"],c.styles=["0","1;31","1;33","94","90","90"],c.global=new c,r.exports=c}],["blgr","/lib/format.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(59,r),a={showHidden:!1,depth:20,colors:!1,customInspect:!0,showProxy:!1,maxArrayLength:1e4,breakLength:60,compact:!0};function h(e){try{return JSON.stringify(e)}catch(e){return"[error]"}}function c(e,t){if(null==e)return"null";if(null==e||!0!==e._isBuffer){let r=(e>>>0).toString(16);for(;r.length<8;)r="0"+r;return t&&(r=u(r)),`0x${r}`}const r=e.toString("hex");return t?u(r):r}function u(e){let t="";for(let r=e.length-2;r>=0;r-=2)t+=e[r]+e[r+1];return t}function f(e){return"bigint"==typeof e?`${e}n`:`${parseInt(e)}`}r.exports=function(e,t){if(0===e.length)return"";const r=e[0];if(a.colors=t,"string"!=typeof r)return o(r,a);if(1===e.length)return r;let i,s="",n=1,u=0;for(let t=0;t<r.length-1;t++){if(37!==r.charCodeAt(t))continue;const d=r.charCodeAt(++t);if(n!==e.length){switch(d){case 115:i=String(e[n++]);break;case 106:i=h(e[n++]);break;case 100:l=e[n++],i="bigint"==typeof l?`${l}n`:`${Number(l)}`;break;case 79:case 111:i=o(e[n++],a);break;case 105:i=f(e[n++]);break;case 102:i=`${parseFloat(e[n++])}`;break;case 120:i=c(e[n++],!1);break;case 104:i=c(e[n++],!0);break;case 37:s+=r.slice(u,t),u=t+1;continue;default:continue}u!==t-1&&(s+=r.slice(u,t-1)),s+=i,u=t+1}else 37===d&&(s+=r.slice(u,t),u=t+1)}var l;for(0===u?s=r:u<r.length&&(s+=r.slice(u));n<e.length;){const t=e[n++];s+="object"!=typeof t&&"symbol"!=typeof t||null===t?` ${t}`:` ${o(t,a)}`}return s}}],["blgr","/lib/inspect-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=function(e){if(e===undefined)return"undefined";if(e!=e)return"NaN";try{return JSON.stringify(e,null,2)}catch(e){return"{}"}}}],["blgr","/lib/fs-browser.js",function(e,t,r,i,s,n){"use strict";e.unsupported=!0}],["bsigner","/lib/device/abstract.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(2,r),a=__browser_require__(14,r),{custom:h}=__browser_require__(62,r);r.exports=class{constructor(e){this.destroyed=!1,this.network=a.primary,e&&this.fromOptions(e)}fromOptions(e){return o(e),null!=e.network&&(o("object"==typeof e.network),this.network=e.network),this}get vendor(){throw new Error("Abstract method.")}get handle(){throw new Error("Abstract method.")}get key(){throw new Error("Abstract method.")}get opened(){throw new Error("Abstract method.")}async destroy(){throw new Error("Abstract method.")}async open(){throw new Error("Abstract method.")}async close(){throw new Error("Abstract method.")}[h](){return"<Device:"+` vendor=${this.vendor}`+` key=${this.key}`+` handle=${this.handle}`+` opened=${this.opened}`+` destroyed=${this.destroyed}`+">"}async getPublicKey(e,t=!0){throw new Error("Abstract method.")}async getXPUB(e){return(await this.getPublicKey(e)).xpubkey(this.network)}async signTransaction(e,t){throw new Error("Abstract method.")}async getSignatures(e,t){throw new Error("Abstract method.")}async signMessage(e,t){throw new Error("Abstract method.")}}}],["bsigner","/lib/internal/custom-browser.js",function(e,t,r,i,s,n){"use strict";e.custom="inspect"}],["bsigner","/lib/manager/ledger.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(2,r),a=__browser_require__(14,r),h=__browser_require__(64,r),{getUSB:c}=__browser_require__(65,r),u=__browser_require__(66,r).Device,f=__browser_require__(122,r),l=__browser_require__(377,r),{vendors:d}=__browser_require__(1,r);r.exports=class extends l{constructor(e){super(e),this.usb=h.usb,this.timeout=5e3,this._connectHandler=null,this._disconnectHandler=null,e&&this.fromOptions(e)}fromOptions(e){return o("object"==typeof e),this.options=e,null!=e.selector&&(o("function"==typeof e.selector),this.selector=e.selector,this.usb=c(this.selector)),null!=e.logger&&(o("object"==typeof e.logger),this.logger=e.logger.context("ledger-device-manager")),null!=e.network&&(this.network=a.get(e.network)),null!=e.usb&&(o(e.usb instanceof h.USB),this.usb=e.usb),null!=e.timeout&&(o("number"==typeof e.timeout),this.timeout=e.timeout),this}get vendor(){return d.LEDGER}handleConnect(e){const t=f.fromUSBDevice(e.device,this.options),r=t.handle;o(!this.cachedDevices.has(r),"Already have device for the handle."),this.cachedDevices.set(r,t),this.emit("connect",t)}handleDisconnect(e){const t=e.device._handle,r=this.cachedDevices.get(t);this.selected===r&&(this.selected.destroy(),this.deselectDevice()),this.cachedDevices.delete(t),this.emit("disconnect",r)}bind(){this._connectHandler=this.handleConnect.bind(this),this._disconnectHandler=this.handleDisconnect.bind(this),this.usb.on("connect",this._connectHandler),this.usb.on("disconnect",this._disconnectHandler)}unbind(){this.usb.removeListener("connect",this._connectHandler),this.usb.removeListener("disconnect",this._disconnectHandler),this._connectHandler=null,this._disconnectHandler=null}async open(){o(!this.opened,"Already opened."),this.opened=!0,this.bind()}async close(){o(this.opened,"Not open."),this.opened=!1;for(const e of this.cachedDevices.values())e.opened&&await e.close(),e.destroy();this.cachedDevices.clear(),this.unbind()}async selectDevice(e){if(o(this.opened,"Not open."),e){const t=e.handle;if(!this.cachedDevices.has(t))throw new Error("Device not found.");return this.deselectDevice(),this.selected=e,this.emit("select",e),await e.open(),e}const t=await u.requestDevice(this.usb),r=(e=f.fromLedgerDevice(t,this.options)).handle;return e.fromOptions(this.options),await this.deselectDevice(),this.selected=e,this.cachedDevices.set(r,e),await this.selected.open(),this.emit("select",this.selected),e}async deselectDevice(){return!!this.selected&&(this.selected.opened&&await this.selected.close(),this.emit("deselect",this.selected),this.selected=null,!0)}async getDevices(){return o(this.opened,"Not open."),Array.from(this.cachedDevices.values())}static fromOptions(e){return new this(e)}}}],["busb","/lib/busb-browser.js",function(e,t,r,i,s,n){"use strict";e.unsupported=!(global.navigator&&global.USB&&global.navigator.usb instanceof global.USB),e.unsupported||(e.usb=global.navigator.usb,e.USB=global.USB,e.USBDevice=global.USBDevice,e.USBConfiguration=global.USBConfiguration,e.USBInterface=global.USBInterface,e.USBAlternativeInterface=global.USBAlternativeInterface,e.USBEndpoint=global.USBEndpoint)}],["bsigner","/lib/internal/usb-browser.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(64,r);e.getUSB=(()=>o.usb)}],["bledger","/lib/device/usb.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(2,r),{Lock:a}=__browser_require__(67,r),h=__browser_require__(71,r),c=__browser_require__(56,r),u=__browser_require__(72,r),f=__browser_require__(120,r),{ProtocolWriter:l,ProtocolReader:d}=u,{Device:p}=__browser_require__(121,r),b=64,g=1,m=2,_=3;class w extends p{constructor(e){super(),this.lock=new a(!1),this.device=null,this.type="usb",e&&this.set(e)}set(e){if(super.set(e),null!=e.device){const t=e.device;o(t instanceof h.USBDevice),this.device=t,this.productId=t.productId,this.vendorId=t.vendorId,this.productName=t.productName,this.manufacturerName=t.manufacturerName,this.serialNumber=t.serialNumber}return this}get opened(){return this.enforce(this.device,"Device not found."),this.device.opened}enforce(e,t){if(!e)throw new f(t,w)}async open(){await w.ensureSupport(),this.enforce(this.device,"Device not found."),this.enforce(!1===this.opened,"Device is already open.");const e=this.device;await e.open(),null!==e.configuration&&e.configuration.configurationValue===g||await e.selectConfiguration(g),await e.reset();try{await e.claimInterface(m)}catch(t){throw await e.close(),new f("USB Interface not available.")}return this.logger.info("Device is open."),this}async close(){return this.enforce(this.device,"Device not found."),this.enforce(!0===this.opened,"Device is not open."),await this.device.releaseInterface(m),await this.device.reset(),await this.device.close(),this.logger.info("Device is closed."),this}_padMessage(e){const t=Buffer.alloc(b);return e.copy(t),t}_write(e){return this.logger.logger.level>=c.levels.DEBUG&&this.logger.debug("==>",e.toString("hex")),this.device.transferOut(_,e)}async _read(){const e=await this.device.transferIn(_,b),t=this.logger.logger.level;o("ok"===e.status,"Receiving data failed.");const r=Buffer.from(e.data.buffer);return t>=c.levels.DEBUG&&this.logger.debug("<==",r.toString("hex")),r}async exchange(e){const t=await this.lock.lock();try{return await this._exchange(e)}finally{t()}}async _exchange(e){this.enforce(!0===this.opened,"Device is not open");const t=new l({channelID:u.CHANNEL_ID,tag:u.TAG_APDU,data:e,packetSize:b}),r=new d({channelID:u.CHANNEL_ID,tag:u.TAG_APDU,packetSize:b}),i=t.toMessages();for(const e of i)await this._write(e);for(;!r.finished;){const e=await this._readTimeout();r.pushMessage(e)}return r.getData()}static fromDevice(e,t={}){return o(e instanceof h.USBDevice),new this({device:e,...t})}static async isSupported(){return!h.unsupported}static async ensureSupport(){if(!this.isSupported())throw new f("USB is not supported.",w)}static async getDevices(e=h.usb){o(e instanceof h.USB),await this.ensureSupport();const t=await e.getDevices(),r=[];for(const e of t)w.isLedgerDevice(e)&&r.push(w.fromDevice(e));return r}static async requestDevice(e=h.usb){o(e instanceof h.USB),await this.ensureSupport();const t={};let r;t.filters=[w.getDeviceFilter()];try{r=await e.requestDevice(t)}catch(e){throw new f("Device was not selected.")}return w.fromDevice(r)}static getDeviceFilter(){return{vendorId:11415}}}e.Device=w}],["bmutex","/lib/bmutex.js",function(e,t,r,i,s,n){"use strict";e.Lock=__browser_require__(68,r),e.MapLock=__browser_require__(70,r)}],["bmutex","/lib/lock.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(69,r);class a{constructor(e=!1,t){o("boolean"==typeof e),o(!t||"function"==typeof t),this.named=e,this.jobs=[],this.busy=!1,this.destroyed=!1,this.map=t?new t:new Map,this.current=null,this.unlocker=this.unlock.bind(this)}static create(e,t){const r=new a(e,t);return function(e,t){return r.lock(e,t)}}has(e){if(o(this.named,"Must use named jobs."),this.current)if(null!=e&&!0===e._isBuffer){if(this.current.equals(e))return!0}else if(this.current===e)return!0;return this.pending(e)}pending(e){o(this.named,"Must use named jobs.");const t=this.map.get(e);return null!=t&&t>0}lock(e,t){let r,i;if(this.named?(r=e||null,i=t||!1):(r=null,i=e||!1),this.destroyed)return Promise.reject(new Error("Lock is destroyed."));if(i)return o(this.busy),Promise.resolve(c);if(this.busy){if(r){const e=this.map.get(r)||0;this.map.set(r,e+1)}return new Promise((e,t)=>{this.jobs.push(new h(e,t,r))})}return this.busy=!0,this.current=r,Promise.resolve(this.unlocker)}unlock(){if(o(this.destroyed||this.busy),this.busy=!1,this.current=null,0===this.jobs.length)return;o(!this.destroyed);const e=this.jobs.shift();if(e.name){let t=this.map.get(e.name);o(t>0),0==--t?this.map.delete(e.name):this.map.set(e.name,t)}this.busy=!0,this.current=e.name,e.resolve(this.unlocker)}destroy(){o(!this.destroyed,"Lock is already destroyed."),this.destroyed=!0;const e=this.jobs;this.busy=!1,this.jobs=[],this.map.clear(),this.current=null;for(const t of e)t.reject(new Error("Lock was destroyed."))}}class h{constructor(e,t,r){this.resolve=e,this.reject=t,this.name=r||null}}function c(){}r.exports=a}],["bsert","/lib/assert.js",function(e,t,r,i,s,n){"use strict";class o extends Error{constructor(e){"string"==typeof e&&(e={message:e}),null!==e&&"object"==typeof e||(e={});let t=null,r="fail",i=Boolean(e.generatedMessage);var s;if(null!=e.message&&(t="string"==typeof(s=e.message)?s:I(s)?m(s):g(s)),"string"==typeof e.operator&&(r=e.operator),null==t){if("fail"===r)t="Assertion failed.";else{t=`${g(e.actual)} ${r} ${g(e.expected)}`}i=!0}super(t);let n=this.constructor;"function"==typeof e.stackStartFunction?n=e.stackStartFunction:"function"==typeof e.stackStartFn&&(n=e.stackStartFn),this.type="AssertionError",this.name="AssertionError [ERR_ASSERTION]",this.code="ERR_ASSERTION",this.generatedMessage=i,this.actual=e.actual,this.expected=e.expected,this.operator=r,Error.captureStackTrace&&Error.captureStackTrace(this,n)}}function a(e,t){if(!e){let r=!1;if(0===arguments.length)t="No value argument passed to `assert()`.",r=!0;else if(null==t)t="Assertion failed.",r=!0;else if(I(t))throw t;throw new o({message:t,actual:e,expected:!0,operator:"==",generatedMessage:r,stackStartFn:a})}}function h(e,t,r){if(!Object.is(e,t)){if(I(r))throw r;throw new o({message:r,actual:e,expected:t,operator:"strictEqual",stackStartFn:h})}}function c(e,t,r){if(Object.is(e,t)){if(I(r))throw r;throw new o({message:r,actual:e,expected:t,operator:"notStrictEqual",stackStartFn:c})}}function u(e,t,r){"string"==typeof t&&(r=t,t=undefined);let i=!1,s=null;b("function"==typeof e,"func","function");try{e()}catch(e){i=!0,s=e}if(i){if(_(s,t,r,u)){let e=!1;throw null==r&&(r="Got unwanted exception.",e=!0),new o({message:r,actual:s,expected:t,operator:"doesNotThrow",generatedMessage:e,stackStartFn:u})}throw s}}async function f(e,t,r){"string"==typeof t&&(r=t,t=undefined);let i=!1,s=null;"function"!=typeof e&&b(A(e),"func","promise");try{A(e)?await e:await e()}catch(e){i=!0,s=e}if(!i){let e=!1;throw null==r&&(r="Missing expected rejection.",e=!0),new o({message:r,actual:undefined,expected:t,operator:"rejects",generatedMessage:e,stackStartFn:f})}if(!_(s,t,r,f))throw s}async function l(e,t,r){"string"==typeof t&&(r=t,t=undefined);let i=!1,s=null;"function"!=typeof e&&b(A(e),"func","promise");try{A(e)?await e:await e()}catch(e){i=!0,s=e}if(i){if(_(s,t,r,l)){let e=!1;throw null==r&&(r="Got unwanted rejection.",e=!0),new o({message:r,actual:undefined,expected:t,operator:"doesNotReject",generatedMessage:e,stackStartFn:l})}throw s}}function d(e,t,r){if(!w(e,t,!1)){if(I(r))throw r;throw new o({message:r,actual:e,expected:t,operator:"deepStrictEqual",stackStartFn:d})}}function p(e,t,r){if(w(e,t,!0)){if(I(r))throw r;throw new o({message:r,actual:e,expected:t,operator:"notDeepStrictEqual",stackStartFn:p})}}function b(e,t,r){if(!e){let e;e=null==t?"Invalid type for parameter.":null==r?`Invalid type for "${t}".`:`"${t}" must be a(n) ${r}.`;const i=new TypeError(e);throw Error.captureStackTrace&&Error.captureStackTrace(i,b),i}}function g(e){switch(typeof e){case"undefined":return"undefined";case"object":return null===e?"null":`[${function(e){const t=function(e){return E(e).slice(8,-1)}(e);if(null==e)return t;if("Object"!==t&&"Error"!==t)return t;let r,i;try{r=e.constructor}catch(e){}if(null==r)return t;try{i=r.name}catch(e){return t}return"string"!=typeof i||0===i.length?t:i}(e)}]`;case"boolean":case"number":return`${e}`;case"string":return e.length>80&&(e=`${e.substring(0,77)}...`),JSON.stringify(e);case"symbol":return m(e);case"function":return`[${function(e){let t;try{t=e.name}catch(e){}return"string"!=typeof t||0===t.length?"Function":`Function: ${t}`}(e)}]`;case"bigint":return`${e}n`;default:return`[${typeof e}]`}}function m(e){try{return String(e)}catch(e){return"Object"}}function _(e,t,r,i){if(null==t)return!0;if(O(t))return t.test(e);if("function"!=typeof t){if(i===u||i===l)throw new TypeError('"expected" must not be an object.');if("object"!=typeof t)throw new TypeError('"expected" must be an object.');let s=!1;if(null==r){r=`Missing expected ${i===f?"rejection":"exception"}.`,s=!0}if(null==e||"object"!=typeof e)throw new o({actual:e,expected:t,message:r,operator:i.name,generatedMessage:s,stackStartFn:i});const n=Object.keys(t);if(I(t)&&n.push("name","message"),0===n.length)throw new TypeError('"expected" may not be an empty object.');for(const a of n){const n=t[a],h=e[a];if(("string"!=typeof h||!O(n)||!n.test(h))&&!(a in e&&w(h,n,!1)))throw new o({actual:e,expected:t,message:r,operator:i.name,generatedMessage:s,stackStartFn:i})}return!0}return t.prototype!==undefined&&e instanceof t||!Error.isPrototypeOf(t)&&!0===t.call({},e)}function w(e,t,r){try{return y(e,t,null)}catch(e){return r}}function y(e,t,r){if(Object.is(e,t))return!0;if(!k(e)||!k(t))return!1;if(E(e)!==E(t))return!1;if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(S(e)&&S(t))return e.equals(t);if(e instanceof Date)return Object.is(e.getTime(),t.getTime());if(O(e))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(I(e)&&e.message!==t.message)return!1;if(function(e){return e instanceof ArrayBuffer}(e)&&(e=new Uint8Array(e),t=new Uint8Array(t)),function(e){return ArrayBuffer.isView(e)}(e)&&!S(e)){if(S(t))return!1;const r=new Uint8Array(e.buffer),i=new Uint8Array(t.buffer);if(r.length!==i.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==i[e])return!1;return!0}if(function(e){return e instanceof Set}(e)){if(e.size!==t.size)return!1;return new Set([...e,...t]).size===e.size}if(r){const i=r.a.get(e);if(null!=i){const e=r.b.get(t);if(null!=e)return i===e}r.p+=1}else r={a:new Map,b:new Map,p:0};r.a.set(e,r.p),r.b.set(t,r.p);const i=function(e,t,r){if(i=e,i instanceof Map){if(e.size!==t.size)return!1;const i=new Set([...e.keys(),...t.keys()]);if(i.size!==e.size)return!1;for(const s of i)if(!y(e.get(s),t.get(s),r))return!1;return!0}var i;if(function(e){return Array.isArray(e)}(e)){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!y(e[i],t[i],r))return!1;return!0}const s=v(e),n=v(t);if(s.length!==n.length)return!1;const o=new Set([...s,...n]);if(o.size!==s.length)return!1;for(const i of o)if(!y(e[i],t[i],r))return!1;return!0}(e,t,r);return r.a.delete(e),r.b.delete(t),i}function v(e){const t=Object.keys(e);if(!Object.getOwnPropertySymbols)return t;if(!Object.getOwnPropertyDescriptor)return t;const r=Object.getOwnPropertySymbols(e);for(const i of r){const r=Object.getOwnPropertyDescriptor(e,i);r&&r.enumerable&&t.push(i)}return t}function E(e){if(e===undefined)return"[object Undefined]";if(null===e)return"[object Null]";try{return Object.prototype.toString.call(e)}catch(e){return"[object Object]"}}function S(e){return k(e)&&"function"==typeof e.writeUInt32LE&&"function"==typeof e.equals}function I(e){return e instanceof Error}function k(e){return e&&"object"==typeof e}function A(e){return e instanceof Promise}function O(e){return e instanceof RegExp}function x(e){if("string"!=typeof e)return!1;switch(e){case"ascii":case"binary":case"base64":case"hex":case"latin1":case"ucs2":case"utf8":case"utf16le":return!0}return!1}function R(e,t,r){if("string"==typeof t){if(!S(e))return null;const{constructor:i}=e;if(!i||"function"!=typeof i.from)return null;if(!x(r))return null;if("hex"===r&&1&t.length)return null;const s=i.from(t,r);return"hex"===r&&s.length!==t.length>>>1?null:s}return t}a.AssertionError=o,a.assert=a,a.strict=a,a.ok=a,a.equal=h,a.notEqual=c,a.strictEqual=h,a.notStrictEqual=c,a.fail=function e(t){let r=!1;if(I(t))throw t;throw null==t&&(t="Assertion failed.",r=!0),new o({message:t,actual:!1,expected:!0,operator:"fail",generatedMessage:r,stackStartFn:e})},a.throws=function e(t,r,i){"string"==typeof r&&(i=r,r=undefined);let s=!1,n=null;b("function"==typeof t,"func","function");try{t()}catch(e){s=!0,n=e}if(!s){let t=!1;throw null==i&&(i="Missing expected exception.",t=!0),new o({message:i,actual:undefined,expected:r,operator:"throws",generatedMessage:t,stackStartFn:e})}if(!_(n,r,i,e))throw n},a.doesNotThrow=u,a.rejects=f,a.doesNotReject=l,a.ifError=function e(t){if(null!=t){let r="ifError got unwanted exception: ";throw"object"==typeof t&&"string"==typeof t.message?0===t.message.length&&t.constructor?r+=t.constructor.name:r+=t.message:r+=g(t),new o({message:r,actual:t,expected:null,operator:"ifError",generatedMessage:!0,stackStartFn:e})}},a.deepEqual=d,a.notDeepEqual=p,a.deepStrictEqual=d,a.notDeepStrictEqual=p,a.bufferEqual=function e(t,r,i,s){if(x(i)||(s=i,i=null),null==i&&(i="hex"),r=R(t,r,i),b(S(t),"actual","buffer"),b(S(r),"expected","buffer"),t!==r&&!t.equals(r)){if(I(s))throw s;throw new o({message:s,actual:t.toString(i),expected:r.toString(i),operator:"bufferEqual",stackStartFn:e})}},a.notBufferEqual=function e(t,r,i,s){if(x(i)||(s=i,i=null),null==i&&(i="hex"),r=R(t,r,i),b(S(t),"actual","buffer"),b(S(r),"expected","buffer"),t===r||t.equals(r)){if(I(s))throw s;throw new o({message:s,actual:t.toString(i),expected:r.toString(i),operator:"notBufferEqual",stackStartFn:e})}},a.enforce=b,a.range=function e(t,r){if(!t){const t=null!=r?`"${r}" is out of range.`:"Parameter is out of range.",i=new RangeError(t);throw Error.captureStackTrace&&Error.captureStackTrace(i,e),i}},r.exports=a}],["bmutex","/lib/maplock.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(69,r);class a{constructor(e,t){o(!e||"function"==typeof e),o(!t||"function"==typeof t),this.Map=e||Map,this.Set=t||Set,this.jobs=new this.Map,this.busy=new this.Set,this.destroyed=!1}static create(e,t){const r=new a(e,t);return function(e,t){return r.lock(e,t)}}has(e){return this.busy.has(e)}pending(e){return this.jobs.has(e)}lock(e,t=!1){return this.destroyed?Promise.reject(new Error("Lock is destroyed.")):null==e?Promise.resolve(c):t?(o(this.busy.has(e)),Promise.resolve(c)):this.busy.has(e)?new Promise((t,r)=>{this.jobs.has(e)||this.jobs.set(e,[]),this.jobs.get(e).push(new h(t,r))}):(this.busy.add(e),Promise.resolve(this._unlock(e)))}_unlock(e){const t=this;return function r(){t.unlock(e,r)}}unlock(e,t=undefined){const r=this.jobs.get(e);if(o(this.destroyed||this.busy.has(e)),this.busy.delete(e),!r)return;o(!this.destroyed);const i=r.shift();o(i),0===r.length&&this.jobs.delete(e),this.busy.add(e),i.resolve(t)}destroy(){o(!this.destroyed,"Lock is already destroyed.");const e=this.jobs;this.destroyed=!0,this.jobs=new this.Map,this.busy=new this.Set;for(const t of e.values())for(const e of t)e.reject(new Error("Lock was destroyed."))}}class h{constructor(e,t){this.resolve=e,this.reject=t}}function c(){}r.exports=a}],["busb","/lib/busb-browser.js",function(e,t,r,i,s,n){"use strict";e.unsupported=!(global.navigator&&global.USB&&global.navigator.usb instanceof global.USB),e.unsupported||(e.usb=global.navigator.usb,e.USB=global.USB,e.USBDevice=global.USBDevice,e.USBConfiguration=global.USBConfiguration,e.USBInterface=global.USBInterface,e.USBAlternativeInterface=global.USBAlternativeInterface,e.USBEndpoint=global.USBEndpoint)}],["bledger","/lib/protocol/index.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(73,r),a=__browser_require__(74,r),h=__browser_require__(114,r),c=__browser_require__(116,r);e.LedgerError=o,e.APDU=h,e.APDUCommand=h.Command,e.APDUResponse=h.Response,e.APDUError=h.Error,e.LedgerProtocol=a,e.ProtocolWriter=a.Writer,e.ProtocolReader=a.Reader,e.common=c}],["bledger","/lib/protocol/error.js",function(e,t,r,i,s,n){"use strict";class o extends Error{constructor(e,t){super(),this.type="LedgerError",this.message=`${e}.`,Error.captureStackTrace&&Error.captureStackTrace(this,t||o)}}o.LedgerError=o,r.exports=o}],["bledger","/lib/protocol/ledgerprotocol.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(75,r),a=__browser_require__(73,r),h=__browser_require__(84,r),c=e;c.CHANNEL_ID=257,c.TAG_APDU=5,c.TAG_PING=2,c.MAX_BYTES=64;class u extends a{constructor(e,t){super(e,u),this.type="ProtocolError"}}class f{constructor(e){this.channelID=c.CHANNEL_ID,this.tag=c.TAG_APDU,this.data=null,this.packetSize=c.MAX_BYTES,e&&this.set(e)}enforce(e,t){if(!e)throw new u(t,this.enforce)}set(e){var t;this.enforce(e,"Must pass options"),null!=e.channelID&&(this.enforce((65535&(t=e.channelID))===t,"ChannelID must be Uint16"),this.channelID=e.channelID),null!=e.tag&&(this.enforce(d(e.tag),"Tag must be Uint8"),this.tag=e.tag),null!=e.packetSize&&(this.enforce(d(e.packetSize),"Packet size must be Uint8"),this.packetSize=e.packetSize)}getSize(e){const t=e+7;if(t<=this.packetSize)return t;const r=this.packetSize-5,i=t-this.packetSize,s=this.packetSize*(i/r|0);let n=i%r;return 0!==n&&(n+=5),this.packetSize+s+n}splitBuffer(e){return h.splitBuffer(e,this.packetSize)}}class l extends f{constructor(e){super(e),this.sequence=0,this.data=null,this.size=0,this.finished=!1}readFirstMessage(e){const t=o.read(e);this.enforce(e.length>=12,"Incorrect message length"),this.enforce(!0!==this.finished,"Reading from finished reader");const r=t.readU16BE(),i=t.readU8(),s=t.readU16BE(),n=t.readU16BE();return this.enforce(this.channelID===r,"Incorrect ChannelID"),this.enforce(this.tag===i,"Incorrect tag"),this.enforce(this.sequence===s,"Incorrect sequence number"),this.data=o.write(n),this.size=n,n<=this.packetSize-7?(this.data.writeBytes(t.readBytes(n)),this.finished=!0,this.finished):(this.data.writeBytes(t.readBytes(this.packetSize-7)),this.sequence++,this.finished)}readMessage(e){const t=o.read(e);this.enforce(!0!==this.finished,"Reading from finished reader");const r=t.readU16BE(),i=t.readU8(),s=t.readU16BE();this.enforce(this.channelID===r,"Incorrect channelID"),this.enforce(this.tag===i,"Incorrect tag"),this.enforce(this.sequence===s,"Incorrect sequence number");const n=this.size-this.data.getSize();return n<=this.packetSize-5?(this.data.writeBytes(t.readBytes(n)),this.finished=!0,this.finished):(this.data.writeBytes(t.readBytes(this.packetSize-5)),this.sequence++,this.finished)}pushMessage(e){return 0===this.sequence?this.readFirstMessage(e):this.readMessage(e)}getData(){if(!this.finished)throw new u("Reader isn't finished");return this.data.render()}static fromMessages(e){const t=new l;for(const r of e){if(t.pushMessage(r))break}return t.getData()}static fromBuffer(e,t){t||(t=c.MAX_BYTES);const r=h.splitBuffer(e,t);return this.fromMessages(r)}}function d(e){return(255&e)===e}e.Writer=class extends f{constructor(e){super(e),e&&this.set(e)}set(e){this.enforce(e,"Must pass options"),this.enforce(null!=e.data&&!0===e.data._isBuffer,"Data must be a buffer"),this.data=e.data}getSize(){return super.getSize(this.data.length)}toWriter(e){let t=0,r=0,i=this.data.length;if(e.writeU16BE(this.channelID),e.writeU8(this.tag),e.writeU16BE(t),e.writeU16BE(this.data.length),i<=57)return e.writeBytes(this.data),e.render();for(e.copy(this.data,r,57),r+=57,i-=57;0!==i;){if(t++,e.writeU16BE(this.channelID),e.writeU8(this.tag),e.writeU16BE(t),i<59)return e.copy(this.data,r,r+i),e.render();e.copy(this.data,r,r+59),r+=59,i-=59}return e.render()}toRaw(){const e=o.write(this.getSize());return this.toWriter(e)}toMessages(){return this.splitBuffer(this.toRaw())}},e.Reader=l}],["bufio","/lib/bufio.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(76,r),a=__browser_require__(77,r),h=__browser_require__(78,r),c=__browser_require__(79,r),u=__browser_require__(80,r),f=__browser_require__(81,r),l=__browser_require__(82,r),d=__browser_require__(83,r);function p(e,t){return function(r,i){if(h(null!=r&&!0===r._isBuffer,"data","buffer"),h(i>>>0===i,"off","integer"),i+t>r.length)throw new c(i,"Out of bounds read");return e(r,i)}}function b(e){return function(t,r,i){if(h(null!=t&&!0===t._isBuffer,"data","buffer"),h(r>>>0===r,"off","integer"),h(i>>>0===i,"len","integer"),r+i>t.length)throw new c(r,"Out of bounds read");return e(t,r,i)}}function g(e){return function(t,r){return h(null!=t&&!0===t._isBuffer,"data","buffer"),h(r>>>0===r,"off","integer"),e(t,r)}}function m(e,t){return function(r,i,s){if(h(null!=r&&!0===r._isBuffer,"data","buffer"),h(s>>>0===s,"off","integer"),s+t>r.length)throw new c(s,"Out of bounds write");return e(r,i,s)}}function _(e){return function(t,r,i,s){if(h(null!=t&&!0===t._isBuffer,"data","buffer"),h(i>>>0===i,"off","integer"),h(s>>>0===s,"len","integer"),i+s>t.length)throw new c(i,"Out of bounds write");return e(t,r,i,s)}}function w(e,t){return function(r,i,s){if(h(null!=r&&!0===r._isBuffer,"data","buffer"),h(s>>>0===s,"off","integer"),s+t(i)>r.length)throw new c(s,"Out of bounds write");return e(r,i,s)}}e.custom=o,e.encoding=a,e.EncodingError=c,e.BufferReader=u,e.BufferWriter=f,e.StaticWriter=l,e.Struct=d,e.read=function(e,t){return new u(e,t)},e.write=function(e){return null!=e?new l(e):new f},e.pool=function(e){return l.pool(e)},e.readU=b(a.readU),e.readU64=p(a.readU64,8),e.readU56=p(a.readU56,7),e.readU48=p(a.readU48,6),e.readU40=p(a.readU40,5),e.readU32=p(a.readU32,4),e.readU24=p(a.readU24,3),e.readU16=p(a.readU16,2),e.readU8=p(a.readU8,1),e.readUBE=b(a.readUBE),e.readU64BE=p(a.readU64BE,8),e.readU56BE=p(a.readU56BE,7),e.readU48BE=p(a.readU48BE,6),e.readU40BE=p(a.readU40BE,5),e.readU32BE=p(a.readU32BE,4),e.readU24BE=p(a.readU24BE,3),e.readU16BE=p(a.readU16BE,2),e.readI=b(a.readI),e.readI64=p(a.readI64,8),e.readI56=p(a.readI56,7),e.readI48=p(a.readI48,6),e.readI40=p(a.readI40,5),e.readI32=p(a.readI32,4),e.readI24=p(a.readI24,3),e.readI16=p(a.readI16,2),e.readI8=p(a.readI8,1),e.readIBE=b(a.readIBE),e.readI64BE=p(a.readI64BE,8),e.readI56BE=p(a.readI56BE,7),e.readI48BE=p(a.readI48BE,6),e.readI40BE=p(a.readI40BE,5),e.readI32BE=p(a.readI32BE,4),e.readI24BE=p(a.readI24BE,3),e.readI16BE=p(a.readI16BE,2),e.readFloat=p(a.readFloat,4),e.readFloatBE=p(a.readFloatBE,4),e.readDouble=p(a.readDouble,8),e.readDoubleBE=p(a.readDoubleBE,8),e.writeU=_(a.writeU),e.writeU64=m(a.writeU64,8),e.writeU56=m(a.writeU56,7),e.writeU48=m(a.writeU48,6),e.writeU40=m(a.writeU40,5),e.writeU32=m(a.writeU32,4),e.writeU24=m(a.writeU24,3),e.writeU16=m(a.writeU16,2),e.writeU8=m(a.writeU8,1),e.writeUBE=_(a.writeUBE),e.writeU64BE=m(a.writeU64BE,8),e.writeU56BE=m(a.writeU56BE,7),e.writeU48BE=m(a.writeU48BE,6),e.writeU40BE=m(a.writeU40BE,5),e.writeU32BE=m(a.writeU32BE,4),e.writeU24BE=m(a.writeU24BE,3),e.writeU16BE=m(a.writeU16BE,2),e.writeI=_(a.writeI),e.writeI64=m(a.writeI64,8),e.writeI56=m(a.writeI56,7),e.writeI48=m(a.writeI48,6),e.writeI40=m(a.writeI40,5),e.writeI32=m(a.writeI32,4),e.writeI24=m(a.writeI24,3),e.writeI16=m(a.writeI16,2),e.writeI8=m(a.writeI8,1),e.writeIBE=_(a.writeIBE),e.writeI64BE=m(a.writeI64BE,8),e.writeI56BE=m(a.writeI56BE,7),e.writeI48BE=m(a.writeI48BE,6),e.writeI40BE=m(a.writeI40BE,5),e.writeI32BE=m(a.writeI32BE,4),e.writeI24BE=m(a.writeI24BE,3),e.writeI16BE=m(a.writeI16BE,2),e.writeFloat=m(a.writeFloat,4),e.writeFloatBE=m(a.writeFloatBE,4),e.writeDouble=m(a.writeDouble,8),e.writeDoubleBE=m(a.writeDoubleBE,8),e.readVarint=g(a.readVarint),e.writeVarint=w(a.writeVarint,a.sizeVarint),e.sizeVarint=a.sizeVarint,e.readVarint2=g(a.readVarint2),e.writeVarint2=w(a.writeVarint2,a.sizeVarint2),e.sizeVarint2=a.sizeVarint2,e.sliceBytes=a.sliceBytes,e.readBytes=a.readBytes,e.writeBytes=a.writeBytes,e.readString=a.readString,e.writeString=a.writeString,e.realloc=a.realloc,e.copy=a.copy,e.concat=a.concat,e.sizeVarBytes=a.sizeVarBytes,e.sizeVarlen=a.sizeVarlen,e.sizeVarString=a.sizeVarString}],["bufio","/lib/custom-browser.js",function(e,t,r,i,s,n){"use strict";e.custom="inspect"}],["bufio","/lib/encoding.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(78,r),a=__browser_require__(79,r),h=1/4294967296,{MAX_SAFE_INTEGER:c}=Number,u=new Float32Array(1),f=new Uint8Array(u.buffer),l=new Float64Array(1),d=new Uint8Array(l.buffer);u[0]=-1;const p=0===f[3];function b(e,t){const r=w(e,t+4),i=w(e,t);return Te(0==(4292870144&r),t,"Number exceeds 2^53-1"),4294967296*r+i}function g(e,t){const r=y(e,t+4),i=w(e,t);return Te(0==(4292870144&r),t,"Number exceeds 2^53-1"),4294967296*r+i}function m(e,t){return e[t++]+256*e[t++]+65536*e[t++]+16777216*e[t++]+4294967296*e[t++]+1099511627776*e[t]}function _(e,t){return e[t++]+256*e[t++]+65536*e[t++]+16777216*e[t++]+4294967296*e[t]}function w(e,t){return e[t++]+256*e[t++]+65536*e[t++]+16777216*e[t]}function y(e,t){return e[t++]+256*e[t++]+65536*e[t]}function v(e,t){return e[t++]+256*e[t]}function E(e,t){return e[t]}function S(e,t){const r=O(e,t),i=O(e,t+4);return Te(0==(4292870144&r),t,"Number exceeds 2^53-1"),4294967296*r+i}function I(e,t){const r=x(e,t),i=O(e,t+3);return Te(0==(4292870144&r),t,"Number exceeds 2^53-1"),4294967296*r+i}function k(e,t){return 1099511627776*e[t++]+4294967296*e[t++]+16777216*e[t++]+65536*e[t++]+256*e[t++]+e[t]}function A(e,t){return 4294967296*e[t++]+16777216*e[t++]+65536*e[t++]+256*e[t++]+e[t]}function O(e,t){return 16777216*e[t++]+65536*e[t++]+256*e[t++]+e[t]}function x(e,t){return 65536*e[t++]+256*e[t++]+e[t]}function R(e,t){return 256*e[t++]+e[t]}function M(e,t){const r=T(e,t+4),i=w(e,t);return Te(xe(r,i),"Number exceeds 2^53-1"),4294967296*r+i}function P(e,t){const r=C(e,t+4),i=w(e,t);return Te(xe(r,i),"Number exceeds 2^53-1"),4294967296*r+i}function B(e,t){const r=e[t+4]+256*e[t+5];return e[t++]+256*e[t++]+65536*e[t++]+16777216*e[t]+4294967296*(r|131070*(32768&r))}function N(e,t){return e[t++]+256*e[t++]+65536*e[t++]+16777216*e[t++]+4294967296*(e[t]|33554430*(128&e[t]))}function T(e,t){return e[t++]+256*e[t++]+65536*e[t++]+(e[t]<<24)}function C(e,t){const r=e[t++]+256*e[t++]+65536*e[t];return r|510*(8388608&r)}function q(e,t){const r=e[t++]+256*e[t];return r|131070*(32768&r)}function j(e,t){const r=e[t];return r|33554430*(128&r)}function D(e,t){const r=F(e,t),i=O(e,t+4);return Te(xe(r,i),"Number exceeds 2^53-1"),4294967296*r+i}function U(e,t){const r=H(e,t),i=O(e,t+3);return Te(xe(r,i),"Number exceeds 2^53-1"),4294967296*r+i}function L(e,t){const r=256*e[t++]+e[t++];return 4294967296*(r|131070*(32768&r))+16777216*e[t++]+65536*e[t++]+256*e[t++]+e[t]}function z(e,t){const r=e[t++];return 4294967296*(r|33554430*(128&r))+16777216*e[t++]+65536*e[t++]+256*e[t++]+e[t]}function F(e,t){return(e[t++]<<24)+65536*e[t++]+256*e[t++]+e[t]}function H(e,t){const r=65536*e[t++]+256*e[t++]+e[t];return r|510*(8388608&r)}function V(e,t){const r=256*e[t++]+e[t];return r|131070*(32768&r)}function K(e,t){return f[3]=e[t++],f[2]=e[t++],f[1]=e[t++],f[0]=e[t],u[0]}function W(e,t){return f[0]=e[t++],f[1]=e[t++],f[2]=e[t++],f[3]=e[t],u[0]}function G(e,t){return d[7]=e[t++],d[6]=e[t++],d[5]=e[t++],d[4]=e[t++],d[3]=e[t++],d[2]=e[t++],d[1]=e[t++],d[0]=e[t],l[0]}function Y(e,t){return d[0]=e[t++],d[1]=e[t++],d[2]=e[t++],d[3]=e[t++],d[4]=e[t++],d[5]=e[t++],d[6]=e[t++],d[7]=e[t],l[0]}const X=p?K:W,J=p?W:K,Q=p?G:Y,Z=p?Y:G;function $(e,t,r){return o(Number.isSafeInteger(t),"num","integer"),Re(e,t,r,!1)}function ee(e,t,r){return o(Number.isSafeInteger(t),"num","integer"),Me(e,t,r,!1)}function te(e,t,r){o(Number.isSafeInteger(t),"num","integer");const i=t*h|0;return e[r++]=t,t>>>=8,e[r++]=t,t>>>=8,e[r++]=t,t>>>=8,e[r++]=t,e[r++]=i,e[r++]=i>>>8,r}function re(e,t,r){o(Number.isSafeInteger(t),"num","integer");const i=t*h|0;return e[r++]=t,t>>>=8,e[r++]=t,t>>>=8,e[r++]=t,t>>>=8,e[r++]=t,e[r++]=i,r}function ie(e,t,r){return o(Number.isSafeInteger(t),"num","integer"),e[r++]=t,t>>>=8,e[r++]=t,t>>>=8,e[r++]=t,t>>>=8,e[r++]=t,r}function se(e,t,r){return o(Number.isSafeInteger(t),"num","integer"),e[r++]=t,t>>>=8,e[r++]=t,t>>>=8,e[r++]=t,r}function ne(e,t,r){return o(Number.isSafeInteger(t),"num","integer"),e[r++]=t,e[r++]=t>>>8,r}function oe(e,t,r){return o(Number.isSafeInteger(t),"num","integer"),e[r]=t,r+1}function ae(e,t,r){return o(Number.isSafeInteger(t),"num","integer"),Re(e,t,r,!0)}function he(e,t,r){return o(Number.isSafeInteger(t),"num","integer"),Me(e,t,r,!0)}function ce(e,t,r){o(Number.isSafeInteger(t),"num","integer");const i=t*h|0;return e[r++]=i>>>8,e[r++]=i,e[r+3]=t,t>>>=8,e[r+2]=t,t>>>=8,e[r+1]=t,t>>>=8,e[r]=t,r+4}function ue(e,t,r){o(Number.isSafeInteger(t),"num","integer");const i=t*h|0;return e[r++]=i,e[r+3]=t,t>>>=8,e[r+2]=t,t>>>=8,e[r+1]=t,t>>>=8,e[r]=t,r+4}function fe(e,t,r){return o(Number.isSafeInteger(t),"num","integer"),e[r+3]=t,t>>>=8,e[r+2]=t,t>>>=8,e[r+1]=t,t>>>=8,e[r]=t,r+4}function le(e,t,r){return o(Number.isSafeInteger(t),"num","integer"),e[r+2]=t,t>>>=8,e[r+1]=t,t>>>=8,e[r]=t,r+3}function de(e,t,r){return o(Number.isSafeInteger(t),"num","integer"),e[r++]=t>>>8,e[r++]=t,r}function pe(e,t,r){return ie(e,t,r)}function be(e,t,r){return se(e,t,r)}function ge(e,t,r){return fe(e,t,r)}function me(e,t,r){return le(e,t,r)}function _e(e,t,r){return o(Be(t),"num","number"),l[0]=t,e[r++]=d[0],e[r++]=d[1],e[r++]=d[2],e[r++]=d[3],e[r++]=d[4],e[r++]=d[5],e[r++]=d[6],e[r++]=d[7],r}function we(e,t,r){return o(Be(t),"num","number"),l[0]=t,e[r++]=d[7],e[r++]=d[6],e[r++]=d[5],e[r++]=d[4],e[r++]=d[3],e[r++]=d[2],e[r++]=d[1],e[r++]=d[0],r}function ye(e,t,r){return o(Be(t),"num","number"),u[0]=t,e[r++]=f[0],e[r++]=f[1],e[r++]=f[2],e[r++]=f[3],r}function ve(e,t,r){return o(Be(t),"num","number"),u[0]=t,e[r++]=f[3],e[r++]=f[2],e[r++]=f[1],e[r++]=f[0],r}const Ee=p?ve:ye,Se=p?ye:ve,Ie=p?we:_e,ke=p?_e:we;function Ae(e){return o(Number.isSafeInteger(e),"num","integer"),e<253?1:e<=65535?3:e<=4294967295?5:9}function Oe(e,t){o(null!=e&&!0===e._isBuffer,"data","buffer");const r=Buffer.allocUnsafe(t);return e.copy(r,0),r}function xe(e,t){return e<0&&(e=~e,0===t&&(e+=1)),0==(4292870144&e)}function Re(e,t,r,i){let s=!1;t<0&&(t=-t,s=!0);let n=t*h|0,o=0|t;return s&&(0===o?n=1+~n|0:(n=~n,o=1+~o)),r=i?ge(e,o,r=ge(e,n,r)):pe(e,n,r=pe(e,o,r))}function Me(e,t,r,i){let s=!1;t<0&&(t=-t,s=!0);let n=t*h|0,o=0|t;return s&&(0===o?n=1+~n|0:(n=~n,o=1+~o)),r=i?ge(e,o,r=me(e,n,r)):be(e,n,r=pe(e,o,r))}class Pe{constructor(e,t){this.size=e,this.value=t}}function Be(e){return"number"==typeof e&&isFinite(e)}function Ne(e,t){if(!e)throw new a(t,"Out of bounds read",Ne)}function Te(e,t,r){if(!e)throw new a(t,r,Te)}e.readU=function(e,t,r){switch(r){case 8:return b(e,t);case 7:return g(e,t);case 6:return m(e,t);case 5:return _(e,t);case 4:return w(e,t);case 3:return y(e,t);case 2:return v(e,t);case 1:return E(e,t);default:throw new a(t,"Invalid read length")}},e.readU64=b,e.readU56=g,e.readU48=m,e.readU40=_,e.readU32=w,e.readU24=y,e.readU16=v,e.readU8=E,e.readUBE=function(e,t,r){switch(r){case 8:return S(e,t);case 7:return I(e,t);case 6:return k(e,t);case 5:return A(e,t);case 4:return O(e,t);case 3:return x(e,t);case 2:return R(e,t);case 1:return E(e,t);default:throw new a(t,"Invalid read length")}},e.readU64BE=S,e.readU56BE=I,e.readU48BE=k,e.readU40BE=A,e.readU32BE=O,e.readU24BE=x,e.readU16BE=R,e.readI=function(e,t,r){switch(r){case 8:return M(e,t);case 7:return P(e,t);case 6:return B(e,t);case 5:return N(e,t);case 4:return T(e,t);case 3:return C(e,t);case 2:return q(e,t);case 1:return j(e,t);default:throw new a(t,"Invalid read length")}},e.readI64=M,e.readI56=P,e.readI48=B,e.readI40=N,e.readI32=T,e.readI24=C,e.readI16=q,e.readI8=j,e.readIBE=function(e,t,r){switch(r){case 8:return D(e,t);case 7:return U(e,t);case 6:return L(e,t);case 5:return z(e,t);case 4:return F(e,t);case 3:return H(e,t);case 2:return V(e,t);case 1:return j(e,t);default:throw new a(t,"Invalid read length")}},e.readI64BE=D,e.readI56BE=U,e.readI48BE=L,e.readI40BE=z,e.readI32BE=F,e.readI24BE=H,e.readI16BE=V,e.readFloat=X,e.readFloatBE=J,e.readDouble=Q,e.readDoubleBE=Z,e.writeU=function(e,t,r,i){switch(i){case 8:return $(e,t,r);case 7:return ee(e,t,r);case 6:return te(e,t,r);case 5:return re(e,t,r);case 4:return ie(e,t,r);case 3:return se(e,t,r);case 2:return ne(e,t,r);case 1:return oe(e,t,r);default:throw new a(r,"Invalid write length")}},e.writeU64=$,e.writeU56=ee,e.writeU48=te,e.writeU40=re,e.writeU32=ie,e.writeU24=se,e.writeU16=ne,e.writeU8=oe,e.writeUBE=function(e,t,r,i){switch(i){case 8:return ae(e,t,r);case 7:return he(e,t,r);case 6:return ce(e,t,r);case 5:return ue(e,t,r);case 4:return fe(e,t,r);case 3:return le(e,t,r);case 2:return de(e,t,r);case 1:return oe(e,t,r);default:throw new a(r,"Invalid write length")}},e.writeU64BE=ae,e.writeU56BE=he,e.writeU48BE=ce,e.writeU40BE=ue,e.writeU32BE=fe,e.writeU24BE=le,e.writeU16BE=de,e.writeI=function(e,t,r,i){switch(i){case 8:return $(e,t,r);case 7:return ee(e,t,r);case 6:return te(e,t,r);case 5:return re(e,t,r);case 4:return se(e,t,r);case 3:return ie(e,t,r);case 2:return ne(e,t,r);case 1:return oe(e,t,r);default:throw new a(r,"Invalid write length")}},e.writeI64=function(e,t,r){return $(e,t,r)},e.writeI56=function(e,t,r){return ee(e,t,r)},e.writeI48=function(e,t,r){return te(e,t,r)},e.writeI40=function(e,t,r){return re(e,t,r)},e.writeI32=pe,e.writeI24=be,e.writeI16=function(e,t,r){return ne(e,t,r)},e.writeI8=function(e,t,r){return oe(e,t,r)},e.writeIBE=function(e,t,r,i){switch(i){case 8:return ae(e,t,r);case 7:return he(e,t,r);case 6:return ce(e,t,r);case 5:return ue(e,t,r);case 4:return fe(e,t,r);case 3:return le(e,t,r);case 2:return de(e,t,r);case 1:return oe(e,t,r);default:throw new a(r,"Invalid write length")}},e.writeI64BE=function(e,t,r){return ae(e,t,r)},e.writeI56BE=function(e,t,r){return he(e,t,r)},e.writeI48BE=function(e,t,r){return ce(e,t,r)},e.writeI40BE=function(e,t,r){return ue(e,t,r)},e.writeI32BE=ge,e.writeI24BE=me,e.writeI16BE=function(e,t,r){return de(e,t,r)},e.writeFloat=Ee,e.writeFloatBE=Se,e.writeDouble=Ie,e.writeDoubleBE=ke,e.readVarint=function(e,t){let r,i;switch(Ne(t<e.length,t),e[t]){case 255:Ne(t+(i=9)<=e.length,t),Te((r=b(e,t+1))>4294967295,t,"Non-canonical varint");break;case 254:Ne(t+(i=5)<=e.length,t),Te((r=w(e,t+1))>65535,t,"Non-canonical varint");break;case 253:Ne(t+(i=3)<=e.length,t),Te((r=v(e,t+1))>=253,t,"Non-canonical varint");break;default:i=1,r=e[t]}return new Pe(i,r)},e.writeVarint=function(e,t,r){return o(Number.isSafeInteger(t),"num","integer"),t<253?(e[r++]=t,r):t<=65535?(e[r++]=253,ne(e,t,r)):t<=4294967295?(e[r++]=254,ie(e,t,r)):(e[r++]=255,$(e,t,r))},e.sizeVarint=Ae,e.readVarint2=function(e,t){let r=0,i=0;for(;;){Ne(t<e.length,t);const s=e[t++];if(i+=1,Te(r<=70368744177663-(127&s),t,"Number exceeds 2^53-1"),r=128*r+(127&s),0==(128&s))break;Te(r!==c,t,"Number exceeds 2^53-1"),r+=1}return new Pe(i,r)},e.writeVarint2=function(e,t,r){o(Number.isSafeInteger(t),"num","integer");const i=[];let s=0;for(;i[s]=127&t|(s?128:0),!(t<=127);)t=(t-t%128)/128-1,s+=1;Ne(r+s+1<=e.length,r);do{e[r++]=i[s]}while(s--);return r},e.sizeVarint2=function(e){o(Number.isSafeInteger(e),"num","integer");let t=0;for(;t+=1,!(e<=127);)e=(e-e%128)/128-1;return t},e.sliceBytes=function(e,t,r){if(o(null!=e&&!0===e._isBuffer,"data","buffer"),o(t>>>0===t,"off","integer"),o(r>>>0===r,"size","integer"),t+r>e.length)throw new a(t,"Out of bounds read");return e.slice(t,t+r)},e.readBytes=function(e,t,r){if(o(null!=e&&!0===e._isBuffer,"data","buffer"),o(t>>>0===t,"off","integer"),o(r>>>0===r,"size","integer"),t+r>e.length)throw new a(t,"Out of bounds read");const i=Buffer.allocUnsafe(r);return e.copy(i,0,t,t+r),i},e.writeBytes=function(e,t,r){if(o(null!=e&&!0===e._isBuffer,"data","buffer"),o(null!=t&&!0===t._isBuffer,"value","buffer"),o(r>>>0===r,"off","integer"),r+t.length>e.length)throw new a(r,"Out of bounds write");return t.copy(e,r,0,t.length)},e.readString=function(e,t,r,i){if(null==i&&(i="binary"),o(null!=e&&!0===e._isBuffer,"data","buffer"),o(t>>>0===t,"off","integer"),o(r>>>0===r,"size","integer"),o("string"==typeof i,"enc","string"),t+r>e.length)throw new a(t,"Out of bounds read");return e.toString(i,t,t+r)},e.writeString=function(e,t,r,i){if(null==i&&(i="binary"),o(null!=e&&!0===e._isBuffer,"data","buffer"),o("string"==typeof t,"str","string"),o(r>>>0===r,"off","integer"),o("string"==typeof i,"enc","string"),0===t.length)return 0;if(r+Buffer.byteLength(t,i)>e.length)throw new a(r,"Out of bounds write");return e.write(t,r,i)},e.realloc=Oe,e.copy=function(e){return o(null!=e&&!0===e._isBuffer,"data","buffer"),Oe(e,e.length)},e.concat=function(e,t){o(null!=e&&!0===e._isBuffer,"a","buffer"),o(null!=t&&!0===t._isBuffer,"b","buffer");const r=e.length+t.length,i=Buffer.allocUnsafe(r);return e.copy(i,0),t.copy(i,e.length),i},e.sizeVarBytes=function(e){return o(null!=e&&!0===e._isBuffer,"data","buffer"),Ae(e.length)+e.length},e.sizeVarlen=function(e){return Ae(e)+e},e.sizeVarString=function(e,t){if(null==t&&(t="binary"),o("string"==typeof e,"str","string"),o("string"==typeof t,"enc","string"),0===e.length)return 1;const r=Buffer.byteLength(e,t);return Ae(r)+r}}],["bufio","/lib/enforce.js",function(e,t,r,i,s,n){"use strict";r.exports=function e(t,r,i){if(!t){const t=new TypeError(`'${r}' must be a(n) ${i}.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,e),t}}}],["bufio","/lib/error.js",function(e,t,r,i,s,n){"use strict";class o extends Error{constructor(e,t,r){super(),this.type="EncodingError",this.name="EncodingError",this.code="ERR_ENCODING",this.message=`${t} (offset=${e}).`,Error.captureStackTrace&&Error.captureStackTrace(this,r||o)}}r.exports=o}],["bufio","/lib/reader.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(78,r),a=__browser_require__(77,r),h=__browser_require__(79,r),c=Buffer.alloc(0);r.exports=class{constructor(e,t=!1){o(null!=e&&!0===e._isBuffer,"data","buffer"),o("boolean"==typeof t,"zeroCopy","boolean"),this.data=e,this.offset=0,this.zeroCopy=t,this.stack=[]}check(e){if(this.offset+e>this.data.length)throw new h(this.offset,"Out of bounds read",this.check)}getSize(){return this.data.length}left(){return this.check(0),this.data.length-this.offset}seek(e){if(o(Number.isSafeInteger(e),"off","integer"),this.offset+e<0)throw new h(this.offset,"Out of bounds read");return this.check(e),this.offset+=e,this}start(){return this.stack.push(this.offset),this.offset}end(){if(0===this.stack.length)throw new Error("Cannot end without a stack item.");const e=this.stack.pop();return this.offset-e}endData(e=!1){if(o("boolean"==typeof e,"zeroCopy","boolean"),0===this.stack.length)throw new Error("Cannot end without a stack item.");const t=this.stack.pop(),r=this.offset,i=r-t,s=this.data;if(i===s.length)return s;if(this.zeroCopy||e)return s.slice(t,r);const n=Buffer.allocUnsafe(i);return s.copy(n,0,t,r),n}destroy(){return this.data=c,this.offset=0,this.stack.length=0,this}readU8(){this.check(1);const e=this.data[this.offset];return this.offset+=1,e}readU16(){this.check(2);const e=a.readU16(this.data,this.offset);return this.offset+=2,e}readU16BE(){this.check(2);const e=a.readU16BE(this.data,this.offset);return this.offset+=2,e}readU24(){this.check(3);const e=a.readU24(this.data,this.offset);return this.offset+=3,e}readU24BE(){this.check(3);const e=a.readU24BE(this.data,this.offset);return this.offset+=3,e}readU32(){this.check(4);const e=a.readU32(this.data,this.offset);return this.offset+=4,e}readU32BE(){this.check(4);const e=a.readU32BE(this.data,this.offset);return this.offset+=4,e}readU40(){this.check(5);const e=a.readU40(this.data,this.offset);return this.offset+=5,e}readU40BE(){this.check(5);const e=a.readU40BE(this.data,this.offset);return this.offset+=5,e}readU48(){this.check(6);const e=a.readU48(this.data,this.offset);return this.offset+=6,e}readU48BE(){this.check(6);const e=a.readU48BE(this.data,this.offset);return this.offset+=6,e}readU56(){this.check(7);const e=a.readU56(this.data,this.offset);return this.offset+=7,e}readU56BE(){this.check(7);const e=a.readU56BE(this.data,this.offset);return this.offset+=7,e}readU64(){this.check(8);const e=a.readU64(this.data,this.offset);return this.offset+=8,e}readU64BE(){this.check(8);const e=a.readU64BE(this.data,this.offset);return this.offset+=8,e}readI8(){this.check(1);const e=a.readI8(this.data,this.offset);return this.offset+=1,e}readI16(){this.check(2);const e=a.readI16(this.data,this.offset);return this.offset+=2,e}readI16BE(){this.check(2);const e=a.readI16BE(this.data,this.offset);return this.offset+=2,e}readI24(){this.check(3);const e=a.readI24(this.data,this.offset);return this.offset+=3,e}readI24BE(){this.check(3);const e=a.readI24BE(this.data,this.offset);return this.offset+=3,e}readI32(){this.check(4);const e=a.readI32(this.data,this.offset);return this.offset+=4,e}readI32BE(){this.check(4);const e=a.readI32BE(this.data,this.offset);return this.offset+=4,e}readI40(){this.check(5);const e=a.readI40(this.data,this.offset);return this.offset+=5,e}readI40BE(){this.check(5);const e=a.readI40BE(this.data,this.offset);return this.offset+=5,e}readI48(){this.check(6);const e=a.readI48(this.data,this.offset);return this.offset+=6,e}readI48BE(){this.check(6);const e=a.readI48BE(this.data,this.offset);return this.offset+=6,e}readI56(){this.check(7);const e=a.readI56(this.data,this.offset);return this.offset+=7,e}readI56BE(){this.check(7);const e=a.readI56BE(this.data,this.offset);return this.offset+=7,e}readI64(){this.check(8);const e=a.readI64(this.data,this.offset);return this.offset+=8,e}readI64BE(){this.check(8);const e=a.readI64BE(this.data,this.offset);return this.offset+=8,e}readFloat(){this.check(4);const e=a.readFloat(this.data,this.offset);return this.offset+=4,e}readFloatBE(){this.check(4);const e=a.readFloatBE(this.data,this.offset);return this.offset+=4,e}readDouble(){this.check(8);const e=a.readDouble(this.data,this.offset);return this.offset+=8,e}readDoubleBE(){this.check(8);const e=a.readDoubleBE(this.data,this.offset);return this.offset+=8,e}readVarint(){const{size:e,value:t}=a.readVarint(this.data,this.offset);return this.offset+=e,t}readVarint2(){const{size:e,value:t}=a.readVarint2(this.data,this.offset);return this.offset+=e,t}readBytes(e,t=!1){let r;return o(e>>>0===e,"size","integer"),o("boolean"==typeof t,"zeroCopy","boolean"),this.check(e),this.zeroCopy||t?r=this.data.slice(this.offset,this.offset+e):(r=Buffer.allocUnsafe(e),this.data.copy(r,0,this.offset,this.offset+e)),this.offset+=e,r}readVarBytes(e=!1){return this.readBytes(this.readVarint(),e)}readChild(e){o(e>>>0===e,"size","integer"),this.check(e);const t=this.data.slice(0,this.offset+e),r=new this.constructor(t);return r.offset=this.offset,this.offset+=e,r}readString(e,t){null==t&&(t="binary"),o(e>>>0===e,"size","integer"),o("string"==typeof t,"enc","string"),this.check(e);const r=this.data.toString(t,this.offset,this.offset+e);return this.offset+=e,r}readHash(e){return e?this.readString(32,e):this.readBytes(32)}readVarString(e,t=0){null==e&&(e="binary"),o("string"==typeof e,"enc","string"),o(t>>>0===t,"limit","integer");const r=this.readVarint();if(0!==t&&r>t)throw new h(this.offset,"String exceeds limit");return this.readString(r,e)}readNullString(e){null==e&&(e="binary"),o("string"==typeof e,"enc","string");let t=this.offset;for(;t<this.data.length&&0!==this.data[t];t++);if(t===this.data.length)throw new h(this.offset,"No NUL terminator");const r=this.readString(t-this.offset,e);return this.offset=t+1,r}createChecksum(e){o("function"==typeof e,"hash","function");let t=0;this.stack.length>0&&(t=this.stack[this.stack.length-1]);const r=this.data.slice(t,this.offset);return a.readU32(e(r),0)}verifyChecksum(e){const t=this.createChecksum(e);if(t!==this.readU32())throw new h(this.offset,"Checksum mismatch");return t}}}],["bufio","/lib/writer.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(78,r),a=__browser_require__(77,r),h=__browser_require__(79,r),c=0,u=1,f=2,l=3,d=4,p=5,b=6,g=7,m=8,_=9,w=10,y=11,v=12,E=13,S=14,I=15,k=16,A=17,O=18,x=19,R=20,M=21,P=22,B=23,N=24,T=25,C=26,q=27,j=28,D=29,U=30,L=31,z=32,F=33,H=34,V=35,K=36,W=37,G=38,Y=39,X=40;class J{constructor(e){this.type=e}}class Q extends J{constructor(e,t){super(e),this.value=t}}class Z extends J{constructor(e,t){super(e),this.data=t}}class $ extends J{constructor(e,t,r){super(e),this.value=t,this.enc=r}}class ee extends J{constructor(e,t){super(e),this.func=t}}class te extends J{constructor(e,t,r){super(e),this.value=t,this.size=r}}r.exports=class{constructor(){this.ops=[],this.offset=0}render(){const e=Buffer.allocUnsafe(this.offset);let t=0;for(const r of this.ops)switch(r.type){case c:t+=r.value;break;case u:t=a.writeU8(e,r.value,t);break;case f:t=a.writeU16(e,r.value,t);break;case l:t=a.writeU16BE(e,r.value,t);break;case d:t=a.writeU24(e,r.value,t);break;case p:t=a.writeU24BE(e,r.value,t);break;case b:t=a.writeU32(e,r.value,t);break;case g:t=a.writeU32BE(e,r.value,t);break;case m:t=a.writeU40(e,r.value,t);break;case _:t=a.writeU40BE(e,r.value,t);break;case w:t=a.writeU48(e,r.value,t);break;case y:t=a.writeU48BE(e,r.value,t);break;case v:t=a.writeU56(e,r.value,t);break;case E:t=a.writeU56BE(e,r.value,t);break;case S:t=a.writeU64(e,r.value,t);break;case I:t=a.writeU64BE(e,r.value,t);break;case k:t=a.writeI8(e,r.value,t);break;case A:t=a.writeI16(e,r.value,t);break;case O:t=a.writeI16BE(e,r.value,t);break;case x:t=a.writeI24(e,r.value,t);break;case R:t=a.writeI24BE(e,r.value,t);break;case M:t=a.writeI32(e,r.value,t);break;case P:t=a.writeI32BE(e,r.value,t);break;case B:t=a.writeI40(e,r.value,t);break;case N:t=a.writeI40BE(e,r.value,t);break;case T:t=a.writeI48(e,r.value,t);break;case C:t=a.writeI48BE(e,r.value,t);break;case q:t=a.writeI56(e,r.value,t);break;case j:t=a.writeI56BE(e,r.value,t);break;case D:t=a.writeI64(e,r.value,t);break;case U:t=a.writeI64BE(e,r.value,t);break;case L:t=a.writeFloat(e,r.value,t);break;case z:t=a.writeFloatBE(e,r.value,t);break;case F:t=a.writeDouble(e,r.value,t);break;case H:t=a.writeDoubleBE(e,r.value,t);break;case V:t=a.writeVarint(e,r.value,t);break;case K:t=a.writeVarint2(e,r.value,t);break;case W:t+=r.data.copy(e,t);break;case G:t+=e.write(r.value,t,r.enc);break;case Y:t+=r.func(e.slice(0,t)).copy(e,t,0,4);break;case X:e.fill(r.value,t,t+r.size),t+=r.size;break;default:throw new Error("Invalid type.")}if(t!==e.length)throw new h(t,"Out of bounds write");return this.destroy(),e}getSize(){return this.offset}seek(e){if(o(Number.isSafeInteger(e),"off","integer"),this.offset+e<0)throw new h(this.offset,"Out of bounds write");return this.offset+=e,this.ops.push(new Q(c,e)),this}destroy(){return this.ops.length=0,this.offset=0,this}writeU8(e){return this.offset+=1,this.ops.push(new Q(u,e)),this}writeU16(e){return this.offset+=2,this.ops.push(new Q(f,e)),this}writeU16BE(e){return this.offset+=2,this.ops.push(new Q(l,e)),this}writeU24(e){return this.offset+=3,this.ops.push(new Q(d,e)),this}writeU24BE(e){return this.offset+=3,this.ops.push(new Q(p,e)),this}writeU32(e){return this.offset+=4,this.ops.push(new Q(b,e)),this}writeU32BE(e){return this.offset+=4,this.ops.push(new Q(g,e)),this}writeU40(e){return this.offset+=5,this.ops.push(new Q(m,e)),this}writeU40BE(e){return this.offset+=5,this.ops.push(new Q(_,e)),this}writeU48(e){return this.offset+=6,this.ops.push(new Q(w,e)),this}writeU48BE(e){return this.offset+=6,this.ops.push(new Q(y,e)),this}writeU56(e){return this.offset+=7,this.ops.push(new Q(v,e)),this}writeU56BE(e){return this.offset+=7,this.ops.push(new Q(E,e)),this}writeU64(e){return this.offset+=8,this.ops.push(new Q(S,e)),this}writeU64BE(e){return this.offset+=8,this.ops.push(new Q(I,e)),this}writeI8(e){return this.offset+=1,this.ops.push(new Q(k,e)),this}writeI16(e){return this.offset+=2,this.ops.push(new Q(A,e)),this}writeI16BE(e){return this.offset+=2,this.ops.push(new Q(O,e)),this}writeI24(e){return this.offset+=3,this.ops.push(new Q(x,e)),this}writeI24BE(e){return this.offset+=3,this.ops.push(new Q(R,e)),this}writeI32(e){return this.offset+=4,this.ops.push(new Q(M,e)),this}writeI32BE(e){return this.offset+=4,this.ops.push(new Q(P,e)),this}writeI40(e){return this.offset+=5,this.ops.push(new Q(B,e)),this}writeI40BE(e){return this.offset+=5,this.ops.push(new Q(N,e)),this}writeI48(e){return this.offset+=6,this.ops.push(new Q(T,e)),this}writeI48BE(e){return this.offset+=6,this.ops.push(new Q(C,e)),this}writeI56(e){return this.offset+=7,this.ops.push(new Q(q,e)),this}writeI56BE(e){return this.offset+=7,this.ops.push(new Q(j,e)),this}writeI64(e){return this.offset+=8,this.ops.push(new Q(D,e)),this}writeI64BE(e){return this.offset+=8,this.ops.push(new Q(U,e)),this}writeFloat(e){return this.offset+=4,this.ops.push(new Q(L,e)),this}writeFloatBE(e){return this.offset+=4,this.ops.push(new Q(z,e)),this}writeDouble(e){return this.offset+=8,this.ops.push(new Q(F,e)),this}writeDoubleBE(e){return this.offset+=8,this.ops.push(new Q(H,e)),this}writeVarint(e){return this.offset+=a.sizeVarint(e),this.ops.push(new Q(V,e)),this}writeVarint2(e){return this.offset+=a.sizeVarint2(e),this.ops.push(new Q(K,e)),this}writeBytes(e){return o(null!=e&&!0===e._isBuffer,"value","buffer"),0===e.length?this:(this.offset+=e.length,this.ops.push(new Z(W,e)),this)}writeVarBytes(e){return o(null!=e&&!0===e._isBuffer,"value","buffer"),this.offset+=a.sizeVarint(e.length),this.ops.push(new Q(V,e.length)),0===e.length?this:(this.offset+=e.length,this.ops.push(new Z(W,e)),this)}copy(e,t,r){o(null!=e&&!0===e._isBuffer,"value","buffer"),o(t>>>0===t,"start","integer"),o(r>>>0===r,"end","integer"),o(r>=t,"start","integer");const i=e.slice(t,r);return this.writeBytes(i),this}writeString(e,t){return null==t&&(t="binary"),o("string"==typeof e,"value","string"),o("string"==typeof t,"enc","string"),0===e.length?this:(this.offset+=Buffer.byteLength(e,t),this.ops.push(new $(G,e,t)),this)}writeHash(e){return"string"!=typeof e?(o(null!=e&&!0===e._isBuffer,"value","buffer"),o(32===e.length,"value","32-byte hash"),this.writeBytes(e),this):(o(64===e.length,"value","32-byte hash"),this.writeString(e,"hex"),this)}writeVarString(e,t){if(null==t&&(t="binary"),o("string"==typeof e,"value","string"),o("string"==typeof t,"enc","string"),0===e.length)return this.ops.push(new Q(V,0)),this;const r=Buffer.byteLength(e,t);return this.offset+=a.sizeVarint(r),this.offset+=r,this.ops.push(new Q(V,r)),this.ops.push(new $(G,e,t)),this}writeNullString(e,t){return this.writeString(e,t),this.writeU8(0),this}writeChecksum(e){return o("function"==typeof e,"hash","function"),this.offset+=4,this.ops.push(new ee(Y,e)),this}fill(e,t){return o((255&e)===e,"value","byte"),o(t>>>0===t,"size","integer"),0===t?this:(this.offset+=t,this.ops.push(new te(X,e,t)),this)}}}],["bufio","/lib/staticwriter.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(78,r),a=__browser_require__(77,r),h=__browser_require__(79,r),c=Buffer.alloc(0),u=102400;let f=null;class l{constructor(e){this.data=c,this.offset=0,null!=e&&this.init(e)}check(e){if(this.offset+e>this.data.length)throw new h(this.offset,"Out of bounds write",this.check)}init(e){return null!=e&&!0===e._isBuffer?(this.data=e,this.offset=0,this):(o(e>>>0===e,"size","integer"),this.data=Buffer.allocUnsafe(e),this.offset=0,this)}static pool(e){if(o(e>>>0===e,"size","integer"),e<=u){f||(f=Buffer.allocUnsafe(u));const t=new l;return t.data=f.slice(0,e),t}return new l(e)}render(){const{data:e,offset:t}=this;if(t!==e.length)throw new h(t,"Out of bounds write");return this.destroy(),e}slice(){const{data:e,offset:t}=this;if(t>e.length)throw new h(t,"Out of bounds write");return this.destroy(),e.slice(0,t)}getSize(){return this.offset}seek(e){if(o(Number.isSafeInteger(e),"off","integer"),this.offset+e<0)throw new h(this.offset,"Out of bounds write");return this.check(e),this.offset+=e,this}destroy(){return this.data=c,this.offset=0,this}writeU8(e){return this.check(1),this.offset=a.writeU8(this.data,e,this.offset),this}writeU16(e){return this.check(2),this.offset=a.writeU16(this.data,e,this.offset),this}writeU16BE(e){return this.check(2),this.offset=a.writeU16BE(this.data,e,this.offset),this}writeU24(e){return this.check(3),this.offset=a.writeU24(this.data,e,this.offset),this}writeU24BE(e){return this.check(3),this.offset=a.writeU24BE(this.data,e,this.offset),this}writeU32(e){return this.check(4),this.offset=a.writeU32(this.data,e,this.offset),this}writeU32BE(e){return this.check(4),this.offset=a.writeU32BE(this.data,e,this.offset),this}writeU40(e){return this.check(5),this.offset=a.writeU40(this.data,e,this.offset),this}writeU40BE(e){return this.check(5),this.offset=a.writeU40BE(this.data,e,this.offset),this}writeU48(e){return this.check(6),this.offset=a.writeU48(this.data,e,this.offset),this}writeU48BE(e){return this.check(6),this.offset=a.writeU48BE(this.data,e,this.offset),this}writeU56(e){return this.check(7),this.offset=a.writeU56(this.data,e,this.offset),this}writeU56BE(e){return this.check(7),this.offset=a.writeU56BE(this.data,e,this.offset),this}writeU64(e){return this.check(8),this.offset=a.writeU64(this.data,e,this.offset),this}writeU64BE(e){return this.check(8),this.offset=a.writeU64BE(this.data,e,this.offset),this}writeI8(e){return this.check(1),this.offset=a.writeI8(this.data,e,this.offset),this}writeI16(e){return this.check(2),this.offset=a.writeI16(this.data,e,this.offset),this}writeI16BE(e){return this.check(2),this.offset=a.writeI16BE(this.data,e,this.offset),this}writeI24(e){return this.check(3),this.offset=a.writeI24(this.data,e,this.offset),this}writeI24BE(e){return this.check(3),this.offset=a.writeI24BE(this.data,e,this.offset),this}writeI32(e){return this.check(4),this.offset=a.writeI32(this.data,e,this.offset),this}writeI32BE(e){return this.check(4),this.offset=a.writeI32BE(this.data,e,this.offset),this}writeI40(e){return this.check(5),this.offset=a.writeI40(this.data,e,this.offset),this}writeI40BE(e){return this.check(5),this.offset=a.writeI40BE(this.data,e,this.offset),this}writeI48(e){return this.check(6),this.offset=a.writeI48(this.data,e,this.offset),this}writeI48BE(e){return this.check(6),this.offset=a.writeI48BE(this.data,e,this.offset),this}writeI56(e){return this.check(7),this.offset=a.writeI56(this.data,e,this.offset),this}writeI56BE(e){return this.check(7),this.offset=a.writeI56BE(this.data,e,this.offset),this}writeI64(e){return this.check(8),this.offset=a.writeI64(this.data,e,this.offset),this}writeI64BE(e){return this.check(8),this.offset=a.writeI64BE(this.data,e,this.offset),this}writeFloat(e){return this.check(4),this.offset=a.writeFloat(this.data,e,this.offset),this}writeFloatBE(e){return this.check(4),this.offset=a.writeFloatBE(this.data,e,this.offset),this}writeDouble(e){return this.check(8),this.offset=a.writeDouble(this.data,e,this.offset),this}writeDoubleBE(e){return this.check(8),this.offset=a.writeDoubleBE(this.data,e,this.offset),this}writeVarint(e){return this.offset=a.writeVarint(this.data,e,this.offset),this}writeVarint2(e){return this.offset=a.writeVarint2(this.data,e,this.offset),this}writeBytes(e){return o(null!=e&&!0===e._isBuffer,"value","buffer"),this.check(e.length),this.offset+=e.copy(this.data,this.offset),this}writeVarBytes(e){return o(null!=e&&!0===e._isBuffer,"value","buffer"),this.writeVarint(e.length),this.writeBytes(e),this}copy(e,t,r){return o(null!=e&&!0===e._isBuffer,"value","buffer"),o(t>>>0===t,"start","integer"),o(r>>>0===r,"end","integer"),o(r>=t,"start","integer"),this.check(r-t),this.offset+=e.copy(this.data,this.offset,t,r),this}writeString(e,t){if(null==t&&(t="binary"),o("string"==typeof e,"value","string"),o("string"==typeof t,"enc","string"),0===e.length)return this;const r=Buffer.byteLength(e,t);return this.check(r),this.offset+=this.data.write(e,this.offset,t),this}writeHash(e){return"string"!=typeof e?(o(null!=e&&!0===e._isBuffer,"value","buffer"),o(32===e.length,"value","32-byte hash"),this.writeBytes(e),this):(o(64===e.length,"value","32-byte hash"),this.check(32),this.offset+=this.data.write(e,this.offset,"hex"),this)}writeVarString(e,t){if(null==t&&(t="binary"),o("string"==typeof e,"value","string"),o("string"==typeof t,"enc","string"),0===e.length)return this.writeVarint(0),this;const r=Buffer.byteLength(e,t);return this.writeVarint(r),this.check(r),this.offset+=this.data.write(e,this.offset,t),this}writeNullString(e,t){return this.writeString(e,t),this.writeU8(0),this}writeChecksum(e){return o("function"==typeof e,"hash","function"),this.check(4),e(this.data.slice(0,this.offset)).copy(this.data,this.offset,0,4),this.offset+=4,this}fill(e,t){return o((255&e)===e,"value","byte"),o(t>>>0===t,"size","integer"),this.check(t),this.data.fill(e,this.offset,this.offset+t),this.offset+=t,this}}r.exports=l}],["bufio","/lib/struct.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(78,r),a=__browser_require__(80,r),h=__browser_require__(81,r),c=__browser_require__(82,r),{custom:u}=__browser_require__(76,r);r.exports=class{constructor(){}inject(e){return o(e instanceof this.constructor,"obj","struct"),this.decode(e.encode())}clone(){return(new this.constructor).inject(this)}getSize(e){return-1}write(e,t){return e}read(e,t){return this}toString(){return Object.prototype.toString.call(this)}fromString(e,t){return this}getJSON(){return this}fromJSON(e,t){return this}fromOptions(e,t){return this}from(e,t){return this.fromOptions(e,t)}format(){return this.getJSON()}encode(e){const t=this.getSize(e),r=-1===t?new h:new c(t);return this.write(r,e),r.render()}decode(e,t){const r=new a(e);return this.read(r,t),this}toHex(e){return this.encode(e).toString("hex")}fromHex(e,t){o("string"==typeof e,"str","string");const r=e.length>>>1,i=Buffer.from(e,"hex");if(i.length!==r)throw new Error("Invalid hex string.");return this.decode(i,t)}toBase64(e){return this.encode(e).toString("base64")}fromBase64(e,t){o("string"==typeof e,"str","string");const r=Buffer.from(e,"base64");if(e.length>(4*r.length/3+3&-4)>>>0)throw new Error("Invalid base64 string.");return this.decode(r,t)}toJSON(){return this.getJSON()}[u](){return this.format()}static read(e,t){return(new this).read(e,t)}static decode(e,t){return(new this).decode(e,t)}static fromHex(e,t){return(new this).fromHex(e,t)}static fromBase64(e,t){return(new this).fromBase64(e,t)}static fromString(e,t){return(new this).fromString(e,t)}static fromJSON(e,t){return(new this).fromJSON(e,t)}static fromOptions(e,t){return(new this).fromOptions(e,t)}static from(e,t){return(new this).from(e,t)}toWriter(e,t){return this.write(e,t)}fromReader(e,t){return this.read(e,t)}toRaw(e){return this.encode(e)}fromRaw(e,t){return this.decode(e,t)}static fromReader(e,t){return this.read(e,t)}static fromRaw(e,t){return this.decode(e,t)}}}],["bledger","/lib/utils/transaction.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(2,r),a=__browser_require__(75,r),{encoding:h}=a,c=__browser_require__(85,r),u=__browser_require__(109,r),f=e;f.MAX_SCRIPT_BLOCK=50,f.splitBuffer=((e,t,r=!1)=>{const i=a.read(e,r),s=[];for(;i.left()>t;)s.push(i.readBytes(t));return s.push(i.readBytes(i.left())),s}),f.splitVersionInputs=(e=>{o(c.isTX(e));const t=4+h.sizeVarint(e.inputs.length),r=a.write(t);return r.writeU32(e.version),r.writeVarint(e.inputs.length),r.render()}),f.splitInput=(t=>{o(u.isInput(t));const r=[];{const e=t.script.getSize(),i=36+h.sizeVarint(e),s=a.write(i);t.prevout.toWriter(s),s.writeVarint(e),r.push(s.render())}const i=t.script.toRaw(),s=e.splitBuffer(i,f.MAX_SCRIPT_BLOCK,!0),n=s.pop();for(const e of s)r.push(e);const c=a.write(n.length+4);return c.writeBytes(n),c.writeU32(t.sequence),r.push(c.render()),r}),f.splitTransaction=(e=>{o(c.isTX(e));let t=[f.splitVersionInputs(e)];for(const r of e.inputs)t=t.concat(f.splitInput(r));{const r=h.sizeVarint(e.outputs.length),i=a.write(r);i.writeVarint(e.outputs.length),t.push(i.render())}for(const r of e.outputs){const e=r.getSize(),i=a.write(e);r.toWriter(i),t.push(i.render())}{const r=a.write(4);r.writeU32(e.locktime),t.push(r.render())}return t})}],["bcoin","/lib/primitives/tx.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(33,r),c=__browser_require__(38,r),{BufferSet:u}=__browser_require__(86,r),f=__browser_require__(20,r),l=__browser_require__(88,r),d=__browser_require__(14,r),p=__browser_require__(89,r),b=__browser_require__(109,r),g=__browser_require__(112,r),m=__browser_require__(111,r),_=__browser_require__(113,r),w=__browser_require__(17,r),y=__browser_require__(96,r),v=__browser_require__(101,r),{encoding:E}=a,{hashType:S}=p,{inspectSymbol:I}=__browser_require__(21,r);class k{constructor(e){this.version=1,this.inputs=[],this.outputs=[],this.locktime=0,this.mutable=!1,this._hash=null,this._hhash=null,this._whash=null,this._raw=null,this._offset=-1,this._block=!1,this._size=-1,this._witness=-1,this._sigops=-1,this._hashPrevouts=null,this._hashSequence=null,this._hashOutputs=null,e&&this.fromOptions(e)}fromOptions(e){if(o(e,"TX data is required."),null!=e.version&&(o(e.version>>>0===e.version,"Version must be a uint32."),this.version=e.version),e.inputs){o(Array.isArray(e.inputs),"Inputs must be an array.");for(const t of e.inputs)this.inputs.push(new b(t))}if(e.outputs){o(Array.isArray(e.outputs),"Outputs must be an array.");for(const t of e.outputs)this.outputs.push(new g(t))}return null!=e.locktime&&(o(e.locktime>>>0===e.locktime,"Locktime must be a uint32."),this.locktime=e.locktime),this}static fromOptions(e){return(new this).fromOptions(e)}clone(){return(new this.constructor).inject(this)}inject(e){this.version=e.version;for(const t of e.inputs)this.inputs.push(t.clone());for(const t of e.outputs)this.outputs.push(t.clone());return this.locktime=e.locktime,this}refresh(){this._hash=null,this._hhash=null,this._whash=null,this._raw=null,this._size=-1,this._offset=-1,this._block=!1,this._witness=-1,this._sigops=-1,this._hashPrevouts=null,this._hashSequence=null,this._hashOutputs=null}hash(e){let t=this._hash;if(t||(t=h.digest(this.toNormal()),this.mutable||(this._hash=t)),"hex"===e){let e=this._hhash;e||(e=t.toString("hex"),this.mutable||(this._hhash=e)),t=e}return t}witnessHash(e){if(!this.hasWitness())return this.hash(e);let t=this._whash;return t||(t=h.digest(this.toRaw()),this.mutable||(this._whash=t)),"hex"===e?t.toString("hex"):t}toRaw(){return this.frame().data}toNormal(){return this.hasWitness()?this.frameNormal().data:this.toRaw()}toWriter(e,t){return this.mutable?this.hasWitness()?this.writeWitness(e):this.writeNormal(e):(t&&(this._offset=e.offset,this._block=!0),e.writeBytes(this.toRaw()),e)}toNormalWriter(e){return this.hasWitness()?(this.writeNormal(e),e):this.toWriter(e)}frame(){if(this.mutable)return o(!this._raw),this.hasWitness()?this.frameWitness():this.frameNormal();if(this._raw){o(this._size>=0),o(this._witness>=0);const e=new A(this._size,this._witness);return e.data=this._raw,e}let e;return e=this.hasWitness()?this.frameWitness():this.frameNormal(),this._raw=e.data,this._size=e.size,this._witness=e.witness,e}getPosition(){return o(this._block&&this._offset>80,"Position not available."),{offset:this._offset,size:this._size}}getSizes(){return this.mutable?this.hasWitness()?this.getWitnessSizes():this.getNormalSizes():this.frame()}getVirtualSize(){const e=w.WITNESS_SCALE_FACTOR;return(this.getWeight()+e-1)/e|0}getSigopsSize(e){const t=w.WITNESS_SCALE_FACTOR,r=y.BYTES_PER_SIGOP;return(Math.max(this.getWeight(),e*r)+t-1)/t|0}getWeight(){const e=this.getSizes();return(e.size-e.witness)*(w.WITNESS_SCALE_FACTOR-1)+e.size}getSize(){return this.getSizes().size}getBaseSize(){const e=this.getSizes();return e.size-e.witness}hasWitness(){if(-1!==this._witness)return 0!==this._witness;for(const e of this.inputs)if(e.witness.items.length>0)return!0;return!1}signatureHash(e,t,r,i,s){if(o(e>=0&&e<this.inputs.length),o(t instanceof p),o("number"==typeof r),o("number"==typeof i),0===s)return this.signatureHashV0(e,t,i);if(1===s)return this.signatureHashV1(e,t,r,i);throw new Error("Unknown sighash version.")}signatureHashV0(e,t,r){if((31&r)===S.SINGLE&&e>=this.outputs.length){const e=Buffer.alloc(32,0);return e[0]=1,e}t=t.removeSeparators();const i=this.hashSize(e,t,r),s=a.pool(i);if(s.writeU32(this.version),r&S.ANYONECANPAY){const r=this.inputs[e];s.writeVarint(1),r.prevout.toWriter(s),s.writeVarBytes(t.toRaw()),s.writeU32(r.sequence)}else{s.writeVarint(this.inputs.length);for(let i=0;i<this.inputs.length;i++){const n=this.inputs[i];if(n.prevout.toWriter(s),i!==e)switch(s.writeVarint(0),31&r){case S.NONE:case S.SINGLE:s.writeU32(0);break;default:s.writeU32(n.sequence)}else s.writeVarBytes(t.toRaw()),s.writeU32(n.sequence)}}switch(31&r){case S.NONE:s.writeVarint(0);break;case S.SINGLE:{const t=this.outputs[e];s.writeVarint(e+1);for(let t=0;t<e;t++)s.writeI64(-1),s.writeVarint(0);t.toWriter(s);break}default:s.writeVarint(this.outputs.length);for(const e of this.outputs)e.toWriter(s)}return s.writeU32(this.locktime),s.writeU32(r),h.digest(s.render())}hashSize(e,t,r){let i=0;switch(i+=4,r&S.ANYONECANPAY?(i+=1,i+=36,i+=t.getVarSize(),i+=4):(i+=E.sizeVarint(this.inputs.length),i+=41*(this.inputs.length-1),i+=36,i+=t.getVarSize(),i+=4),31&r){case S.NONE:i+=1;break;case S.SINGLE:i+=E.sizeVarint(e+1),i+=9*e,i+=this.outputs[e].getSize();break;default:i+=E.sizeVarint(this.outputs.length);for(const e of this.outputs)i+=e.getSize()}return i+=8}signatureHashV1(e,t,r,i){const s=this.inputs[e];let n=w.ZERO_HASH,o=w.ZERO_HASH,c=w.ZERO_HASH;if(!(i&S.ANYONECANPAY))if(this._hashPrevouts)n=this._hashPrevouts;else{const e=a.pool(36*this.inputs.length);for(const t of this.inputs)t.prevout.toWriter(e);n=h.digest(e.render()),this.mutable||(this._hashPrevouts=n)}if(!(i&S.ANYONECANPAY)&&(31&i)!==S.SINGLE&&(31&i)!==S.NONE)if(this._hashSequence)o=this._hashSequence;else{const e=a.pool(4*this.inputs.length);for(const t of this.inputs)e.writeU32(t.sequence);o=h.digest(e.render()),this.mutable||(this._hashSequence=o)}if((31&i)!==S.SINGLE&&(31&i)!==S.NONE)if(this._hashOutputs)c=this._hashOutputs;else{let e=0;for(const t of this.outputs)e+=t.getSize();const t=a.pool(e);for(const e of this.outputs)e.toWriter(t);c=h.digest(t.render()),this.mutable||(this._hashOutputs=c)}else if((31&i)===S.SINGLE&&e<this.outputs.length){const t=this.outputs[e];c=h.digest(t.toRaw())}const u=156+t.getVarSize(),f=a.pool(u);return f.writeU32(this.version),f.writeBytes(n),f.writeBytes(o),f.writeHash(s.prevout.hash),f.writeU32(s.prevout.index),f.writeVarBytes(t.toRaw()),f.writeI64(r),f.writeU32(s.sequence),f.writeBytes(c),f.writeU32(this.locktime),f.writeU32(i),h.digest(f.render())}checksig(e,t,r,i,s,n){if(0===i.length)return!1;const o=i[i.length-1],a=this.signatureHash(e,t,r,o,n);return c.verifyDER(a,i.slice(0,-1),s)}signature(e,t,r,i,s,n){null==s&&(s=S.ALL),null==n&&(n=0);const o=this.signatureHash(e,t,r,s,n),h=c.signDER(o,i),u=a.write(h.length+1);return u.writeBytes(h),u.writeU8(s),u.render()}check(e,t){if(0===this.inputs.length)throw new v("UNKNOWN_ERROR","No inputs.");if(!this.isCoinbase())for(let r=0;r<this.inputs.length;r++){const{prevout:i}=this.inputs[r],s=e.getOutput(i);if(!s)throw new v("UNKNOWN_ERROR","No coin available.");this.checkInput(r,s,t)}}checkInput(e,t,r){const i=this.inputs[e];o(i,"Input does not exist."),o(t,"No coin passed."),p.verify(i.script,i.witness,t.script,this,e,t.value,r)}async checkAsync(e,t,r){if(0===this.inputs.length)throw new v("UNKNOWN_ERROR","No inputs.");this.isCoinbase()||(r?await r.check(this,e,t):this.check(e,t))}async checkInputAsync(e,t,r,i){const s=this.inputs[e];o(s,"Input does not exist."),o(t,"No coin passed."),i?await i.checkInput(this,e,t,r):this.checkInput(e,t,r)}verify(e,t){try{this.check(e,t)}catch(e){if("ScriptError"===e.type)return!1;throw e}return!0}verifyInput(e,t,r){try{this.checkInput(e,t,r)}catch(e){if("ScriptError"===e.type)return!1;throw e}return!0}async verifyAsync(e,t,r){try{await this.checkAsync(e,t,r)}catch(e){if("ScriptError"===e.type)return!1;throw e}return!0}async verifyInputAsync(e,t,r,i){try{await this.checkInput(e,t,r,i)}catch(e){if("ScriptError"===e.type)return!1;throw e}return!0}isCoinbase(){return 1===this.inputs.length&&this.inputs[0].prevout.isNull()}isRBF(){if(2===this.version)return!1;for(const e of this.inputs)if(e.isRBF())return!0;return!1}getFee(e){return this.hasCoins(e)?this.getInputValue(e)-this.getOutputValue():0}getInputValue(e){let t=0;for(const{prevout:r}of this.inputs){const i=e.getOutput(r);if(!i)return 0;t+=i.value}return t}getOutputValue(){let e=0;for(const t of this.outputs)e+=t.value;return e}_getInputAddresses(e){const t=new u,r=[];if(this.isCoinbase())return[r,t];for(const i of this.inputs){const s=e?e.getOutputFor(i):null,n=i.getAddress(s);if(!n)continue;const o=n.getHash();t.has(o)||(t.add(o),r.push(n))}return[r,t]}_getOutputAddresses(){const e=new u,t=[];for(const r of this.outputs){const i=r.getAddress();if(!i)continue;const s=i.getHash();e.has(s)||(e.add(s),t.push(i))}return[t,e]}_getAddresses(e){const[t,r]=this._getInputAddresses(e),i=this.getOutputAddresses();for(const e of i){const i=e.getHash();r.has(i)||(r.add(i),t.push(e))}return[t,r]}getInputAddresses(e){const[t]=this._getInputAddresses(e);return t}getOutputAddresses(){const[e]=this._getOutputAddresses();return e}getAddresses(e){const[t]=this._getAddresses(e);return t}getInputHashes(e,t){const[,r]=this._getInputAddresses(e);return"hex"!==t?r.toArray():r.toArray().map(e=>e.toString("hex"))}getOutputHashes(e){const[,t]=this._getOutputAddresses();return"hex"!==e?t.toArray():t.toArray().map(e=>e.toString("hex"))}getHashes(e,t){const[,r]=this._getAddresses(e);return"hex"!==t?r.toArray():r.toArray().map(e=>e.toString("hex"))}hasCoins(e){if(0===this.inputs.length)return!1;for(const{prevout:t}of this.inputs)if(!e.hasEntry(t))return!1;return!0}isFinal(e,t){const r=w.LOCKTIME_THRESHOLD;if(0===this.locktime)return!0;if(this.locktime<(this.locktime<r?e:t))return!0;for(const e of this.inputs)if(4294967295!==e.sequence)return!1;return!0}verifyLocktime(e,t){const r=w.LOCKTIME_THRESHOLD,i=this.inputs[e];return o(i,"Input does not exist."),o(t>=0,"Locktime must be non-negative."),this.locktime<r==t<r&&(!(t>this.locktime)&&4294967295!==i.sequence)}verifySequence(e,t){const r=w.SEQUENCE_DISABLE_FLAG,i=w.SEQUENCE_TYPE_FLAG,s=w.SEQUENCE_MASK,n=this.inputs[e];return o(n,"Input does not exist."),o(t>=0,"Locktime must be non-negative."),!!(t&r)||!(this.version<2)&&(!(n.sequence&r)&&((n.sequence&i)==(t&i)&&!((t&s)>(n.sequence&s))))}getLegacySigops(){if(-1!==this._sigops)return this._sigops;let e=0;for(const t of this.inputs)e+=t.script.getSigops(!1);for(const t of this.outputs)e+=t.script.getSigops(!1);return this.mutable||(this._sigops=e),e}getScripthashSigops(e){if(this.isCoinbase())return 0;let t=0;for(const r of this.inputs){const i=e.getOutputFor(r);i&&(i.script.isScripthash()&&(t+=i.script.getScripthashSigops(r.script)))}return t}getWitnessSigops(e){if(this.isCoinbase())return 0;let t=0;for(const r of this.inputs){const i=e.getOutputFor(r);i&&(t+=i.script.getWitnessSigops(r.script,r.witness))}return t}getSigopsCost(e,t){null==t&&(t=p.flags.STANDARD_VERIFY_FLAGS);const r=w.WITNESS_SCALE_FACTOR;let i=this.getLegacySigops()*r;return t&p.flags.VERIFY_P2SH&&(i+=this.getScripthashSigops(e)*r),t&p.flags.VERIFY_WITNESS&&(i+=this.getWitnessSigops(e)),i}getSigops(e,t){const r=w.WITNESS_SCALE_FACTOR;return(this.getSigopsCost(e,t)+r-1)/r|0}isSane(){const[e]=this.checkSanity();return e}checkSanity(){if(0===this.inputs.length)return[!1,"bad-txns-vin-empty",100];if(0===this.outputs.length)return[!1,"bad-txns-vout-empty",100];if(this.getBaseSize()>w.MAX_BLOCK_SIZE)return[!1,"bad-txns-oversize",100];let e=0;for(const t of this.outputs){if(t.value<0)return[!1,"bad-txns-vout-negative",100];if(t.value>w.MAX_MONEY)return[!1,"bad-txns-vout-toolarge",100];if((e+=t.value)<0||e>w.MAX_MONEY)return[!1,"bad-txns-txouttotal-toolarge",100]}const t=new u;for(const e of this.inputs){const r=e.prevout.toKey();if(t.has(r))return[!1,"bad-txns-inputs-duplicate",100];t.add(r)}if(this.isCoinbase()){const e=this.inputs[0].script.getSize();if(e<2||e>100)return[!1,"bad-cb-length",100]}else for(const e of this.inputs)if(e.prevout.isNull())return[!1,"bad-txns-prevout-null",10];return[!0,"valid",0]}isStandard(){const[e]=this.checkStandard();return e}checkStandard(){if(this.version<1||this.version>y.MAX_TX_VERSION)return[!1,"version",0];if(this.getWeight()>=y.MAX_TX_WEIGHT)return[!1,"tx-size",0];for(const e of this.inputs){if(e.script.getSize()>1650)return[!1,"scriptsig-size",0];if(!e.script.isPushOnly())return[!1,"scriptsig-not-pushonly",0]}let e=0;for(const t of this.outputs){if(!t.script.isStandard())return[!1,"scriptpubkey",0];if(t.script.isNulldata())e++;else{if(t.script.isMultisig()&&!y.BARE_MULTISIG)return[!1,"bare-multisig",0];if(t.isDust(y.MIN_RELAY))return[!1,"dust",0]}}return e>1?[!1,"multi-op-return",0]:[!0,"valid",0]}hasStandardInputs(e){if(this.isCoinbase())return!0;for(const t of this.inputs){const r=e.getOutputFor(t);if(!r)return!1;if(!r.script.isPubkeyhash())if(r.script.isScripthash()){const e=t.script.getRedeem();if(!e)return!1;if(e.getSigops(!0)>y.MAX_P2SH_SIGOPS)return!1}else if(r.script.isUnknown())return!1}return!0}hasStandardWitness(e){if(this.isCoinbase())return!0;for(const t of this.inputs){const r=t.witness,i=e.getOutputFor(t);if(!i)continue;if(0===r.items.length)continue;let s=i.script;if(s.isScripthash()&&!(s=t.script.getRedeem()))return!1;if(!s.isProgram())return!1;if(s.isWitnessPubkeyhash()){if(2!==r.items.length)return!1;if(r.items[0].length>73)return!1;if(r.items[1].length>65)return!1}else if(s.isWitnessScripthash()){if(r.items.length-1>y.MAX_P2WSH_STACK)return!1;for(let e=0;e<r.items.length-1;e++){if(r.items[e].length>y.MAX_P2WSH_PUSH)return!1}const e=r.items[r.items.length-1];if(e.length>y.MAX_P2WSH_SIZE)return!1;const i=p.fromRaw(e);if(i.isPubkey()){if(r.items.length-1!=1)return!1;if(r.items[0].length>73)return!1;continue}if(i.isPubkeyhash()){if(t.witness.items.length-1!=2)return!1;if(r.items[0].length>73)return!1;if(r.items[1].length>65)return!1;continue}const[s]=i.getMultisig();if(-1!==s){if(r.items.length-1!==s+1)return!1;if(0!==r.items[0].length)return!1;for(let e=1;e<r.items.length-1;e++){if(r.items[e].length>73)return!1}}}else{if(r.items.length>y.MAX_P2WSH_STACK)return!1;for(const e of r.items)if(e.length>y.MAX_P2WSH_PUSH)return!1}}return!0}verifyInputs(e,t){const[r]=this.checkInputs(e,t);return-1!==r}checkInputs(e,t){o("number"==typeof t);let r=0;for(const{prevout:i}of this.inputs){const s=e.getEntry(i);if(!s)return[-1,"bad-txns-inputs-missingorspent",0];if(s.coinbase&&t-s.height<w.COINBASE_MATURITY)return[-1,"bad-txns-premature-spend-of-coinbase",0];const n=e.getOutput(i);if(o(n),n.value<0||n.value>w.MAX_MONEY)return[-1,"bad-txns-inputvalues-outofrange",100];if((r+=n.value)<0||r>w.MAX_MONEY)return[-1,"bad-txns-inputvalues-outofrange",100]}const i=this.getOutputValue();if(r<i)return[-1,"bad-txns-in-belowout",100];const s=r-i;return s<0?[-1,"bad-txns-fee-negative",100]:s>w.MAX_MONEY?[-1,"bad-txns-fee-outofrange",100]:[s,"valid",0]}getModifiedSize(e){null==e&&(e=this.getVirtualSize());for(const t of this.inputs){const r=41+Math.min(110,t.script.getSize());e>r&&(e-=r)}return e}getPriority(e,t,r){if(o("number"==typeof t,"Must pass in height."),this.isCoinbase())return 0;null==r&&(r=this.getVirtualSize());let i=0;for(const{prevout:r}of this.inputs){const s=e.getOutput(r);if(!s)continue;const n=e.getHeight(r);if(-1!==n&&n<=t){const e=t-n;i+=s.value*e}}return Math.floor(i/r)}getChainValue(e){if(this.isCoinbase())return 0;let t=0;for(const{prevout:r}of this.inputs){const i=e.getOutput(r);i&&(-1!==e.getHeight(r)&&(t+=i.value))}return t}isFree(e,t,r){return this.getPriority(e,t,r)>y.FREE_THRESHOLD}getMinFee(e,t){return null==e&&(e=this.getVirtualSize()),y.getMinFee(e,t)}getRoundFee(e,t){return null==e&&(e=this.getVirtualSize()),y.getRoundFee(e,t)}getRate(e,t){const r=this.getFee(e);return r<0?0:(null==t&&(t=this.getVirtualSize()),y.getRate(t,r))}getPrevout(){if(this.isCoinbase())return[];const e=new u;for(const t of this.inputs)e.add(t.prevout.hash);return e.toArray()}isWatched(e){let t=!1;e.test(this.hash())&&(t=!0);for(let r=0;r<this.outputs.length;r++){const i=this.outputs[r];if(i.script.test(e)){if(1===e.update){const t=m.fromTX(this,r);e.add(t.toRaw())}else if(2===e.update&&(i.script.isPubkey()||i.script.isMultisig())){const t=m.fromTX(this,r);e.add(t.toRaw())}t=!0}}if(t)return t;for(const t of this.inputs){const r=t.prevout;if(e.test(r.toRaw()))return!0;if(t.script.test(e))return!0}return!1}rhash(){return f.revHex(this.hash())}rwhash(){return f.revHex(this.witnessHash())}txid(){return this.rhash()}wtxid(){return this.rwhash()}toInv(){return new _(_.types.TX,this.hash())}[I](){return this.format()}format(e,t,r){let i=0,s=0,n=-1,o=null,a=0,h=null;return e&&(s=this.getFee(e),i=this.getRate(e),Number.isSafeInteger(i)||(i=0)),t&&(n=t.height,o=f.revHex(t.hash),a=t.time,h=f.date(a)),null==r&&(r=-1),{hash:this.txid(),witnessHash:this.wtxid(),size:this.getSize(),virtualSize:this.getVirtualSize(),value:l.btc(this.getOutputValue()),fee:l.btc(s),rate:l.btc(i),minFee:l.btc(this.getMinFee()),height:n,block:o,time:a,date:h,index:r,version:this.version,inputs:this.inputs.map(t=>{const r=e?e.getOutputFor(t):null;return t.format(r)}),outputs:this.outputs,locktime:this.locktime}}toJSON(){return this.getJSON()}getJSON(e,t,r,i){let s,n,o,a,h,c;return t&&(n=this.getFee(t),s=this.getRate(t),Number.isSafeInteger(s)||(s=0)),r&&(o=r.height,a=f.revHex(r.hash),h=r.time,c=f.date(h)),e=d.get(e),{hash:this.txid(),witnessHash:this.wtxid(),fee:n,rate:s,mtime:f.now(),height:o,block:a,time:h,date:c,index:i,version:this.version,inputs:this.inputs.map(r=>{const i=t?t.getCoinFor(r):null;return r.getJSON(e,i)}),outputs:this.outputs.map(t=>t.getJSON(e)),locktime:this.locktime,hex:this.toRaw().toString("hex")}}fromJSON(e){o(e,"TX data is required."),o(e.version>>>0===e.version,"Version must be a uint32."),o(Array.isArray(e.inputs),"Inputs must be an array."),o(Array.isArray(e.outputs),"Outputs must be an array."),o(e.locktime>>>0===e.locktime,"Locktime must be a uint32."),this.version=e.version;for(const t of e.inputs)this.inputs.push(b.fromJSON(t));for(const t of e.outputs)this.outputs.push(g.fromJSON(t));return this.locktime=e.locktime,this}static fromJSON(e){return(new this).fromJSON(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}static fromReader(e,t){return(new this).fromReader(e,t)}fromRaw(e){return this.fromReader(a.read(e))}fromReader(e,t){if(function(e){return!(e.left()<6)&&0===e.data[e.offset+4]&&0!==e.data[e.offset+5]}(e))return this.fromWitnessReader(e,t);const r=e.start();this.version=e.readU32();const i=e.readVarint();for(let t=0;t<i;t++)this.inputs.push(b.fromReader(e));const s=e.readVarint();for(let t=0;t<s;t++)this.outputs.push(g.fromReader(e));return this.locktime=e.readU32(),t&&(this._offset=r,this._block=!0),this.mutable?e.end():(this._raw=e.endData(),this._size=this._raw.length,this._witness=0),this}fromWitnessReader(e,t){const r=e.start();this.version=e.readU32(),o(0===e.readU8(),"Non-zero marker.");let i=e.readU8();o(0!==i,"Flags byte is zero.");const s=e.readVarint();for(let t=0;t<s;t++)this.inputs.push(b.fromReader(e));const n=e.readVarint();for(let t=0;t<n;t++)this.outputs.push(g.fromReader(e));let a=0,h=!1;if(1&i){i^=1,a=e.offset;for(const t of this.inputs)t.witness.fromReader(e),t.witness.items.length>0&&(h=!0);a=e.offset-a+2}if(0!==i)throw new Error("Unknown witness flag.");if(0===this.inputs.length&&0!==this.outputs.length)throw new Error("Zero input witness tx.");return this.locktime=e.readU32(),t&&(this._offset=r,this._block=!0),!this.mutable&&h?(this._raw=e.endData(),this._size=this._raw.length,this._witness=a):e.end(),this}frameNormal(){const e=this.getNormalSizes(),t=a.write(e.size);return this.writeNormal(t),e.data=t.render(),e}frameWitness(){const e=this.getWitnessSizes(),t=a.write(e.size);return this.writeWitness(t),e.data=t.render(),e}writeNormal(e){if(0===this.inputs.length&&0!==this.outputs.length)throw new Error("Cannot serialize zero-input tx.");e.writeU32(this.version),e.writeVarint(this.inputs.length);for(const t of this.inputs)t.toWriter(e);e.writeVarint(this.outputs.length);for(const t of this.outputs)t.toWriter(e);return e.writeU32(this.locktime),e}writeWitness(e){if(0===this.inputs.length&&0!==this.outputs.length)throw new Error("Cannot serialize zero-input tx.");e.writeU32(this.version),e.writeU8(0),e.writeU8(1),e.writeVarint(this.inputs.length);for(const t of this.inputs)t.toWriter(e);e.writeVarint(this.outputs.length);for(const t of this.outputs)t.toWriter(e);const t=e.offset;for(const t of this.inputs)t.witness.toWriter(e);const r=e.offset-t;if(e.writeU32(this.locktime),r===this.inputs.length)throw new Error("Cannot serialize empty-witness tx.");return e}getNormalSizes(){let e=0;e+=4,e+=E.sizeVarint(this.inputs.length);for(const t of this.inputs)e+=t.getSize();e+=E.sizeVarint(this.outputs.length);for(const t of this.outputs)e+=t.getSize();return new A(e+=4,0)}getWitnessSizes(){let e=0,t=0;e+=4,t+=2,e+=E.sizeVarint(this.inputs.length);for(const r of this.inputs)e+=r.getSize(),t+=r.witness.getVarSize();e+=E.sizeVarint(this.outputs.length);for(const t of this.outputs)e+=t.getSize();return new A((e+=4)+t,t)}static isTX(e){return e instanceof k}}class A{constructor(e,t){this.data=null,this.size=e,this.witness=t}}r.exports=k}],["buffer-map","/lib/buffer-map.js",function(e,t,r,i,s,n){"use strict";const{custom:o}=__browser_require__(87,r);class a{constructor(e,t){this.key=e,this.value=t}}const h="function"==typeof SharedArrayBuffer;function c(e){if(ArrayBuffer.isView(e))return Buffer.from(e.buffer,e.byteOffset,e.byteLength);if(function(e){return e instanceof ArrayBuffer||!!(h&&e instanceof SharedArrayBuffer)}(e))return Buffer.from(e,0,e.byteLength);throw new TypeError("Non-buffer passed to buffer map/set.")}function u(e,t){return null!=e&&!0===e._isBuffer||(e=c(e)),e.toString(t)}function f(e){return u(e,"binary")}function l(e){return u(e,"hex")}e.BufferMap=class{constructor(e){if(this.map=new Map,null!=e)for(const[t,r]of e)this.set(t,r)}get size(){return this.map.size}get(e){const t=this.map.get(f(e));return t?t.value:undefined}has(e){return this.map.has(f(e))}set(e,t){return this.map.set(f(e),new a(e,t)),this}delete(e){return this.map.delete(f(e))}clear(){this.map.clear()}[Symbol.iterator](){return this.entries()}*entries(){for(const{key:e,value:t}of this.map.values())yield[e,t]}*keys(){for(const{key:e}of this.map.values())yield e}*values(){for(const{value:e}of this.map.values())yield e}forEach(e,t){if("function"!=typeof e)throw new TypeError(`${typeof e} is not a function`);for(const{key:r,value:i}of this.map.values())e.call(t,i,r,this)}toKeys(){const e=[];for(const{key:t}of this.map.values())e.push(t);return e}toValues(){const e=[];for(const{value:t}of this.map.values())e.push(t);return e}toArray(){return this.toValues()}[o](){const e=new Map;for(const{key:t,value:r}of this.map.values())e.set(l(t),r);return e}},e.BufferSet=class{constructor(e){if(this.map=new Map,null!=e)for(const t of e)this.add(t)}get size(){return this.map.size}has(e){return this.map.has(f(e))}add(e){return this.map.set(f(e),e),this}delete(e){return this.map.delete(f(e))}clear(){this.map.clear()}[Symbol.iterator](){return this.keys()}*entries(){for(const e of this.map.values())yield[e,e]}keys(){return this.map.values()}values(){return this.map.values()}forEach(e,t){if("function"!=typeof e)throw new TypeError(`${typeof e} is not a function`);for(const r of this.map.values())e.call(t,r,r,this)}toKeys(){const e=[];for(const t of this.map.values())e.push(t);return e}toValues(){return this.toKeys()}toArray(){return this.toKeys()}[o](){const e=new Set;for(const t of this.map.values())e.add(l(t));return e}}}],["buffer-map","/lib/custom-browser.js",function(e,t,r,i,s,n){"use strict";e.custom="inspect"}],["bcoin","/lib/btc/amount.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(22,r),{inspectSymbol:h}=__browser_require__(21,r);class c{constructor(e,t){this.value=0,null!=e&&this.fromOptions(e,t)}fromOptions(e,t){return"string"==typeof t?this.from(t,e):"number"==typeof e?this.fromValue(e):this.fromBTC(e)}toValue(){return this.value}toSatoshis(e){return e?this.value:this.value.toString(10)}toBits(e){return c.encode(this.value,2,e)}toMBTC(e){return c.encode(this.value,5,e)}toBTC(e){return c.encode(this.value,8,e)}to(e,t){switch(e){case"sat":return this.toSatoshis(t);case"ubtc":case"bits":return this.toBits(t);case"mbtc":return this.toMBTC(t);case"btc":return this.toBTC(t)}throw new Error(`Unknown unit "${e}".`)}toString(){return this.toBTC()}fromValue(e){return o(Number.isSafeInteger(e)&&e>=0,"Value must be an int64."),this.value=e,this}fromSatoshis(e){return this.value=c.decode(e,0),this}fromBits(e){return this.value=c.decode(e,2),this}fromMBTC(e){return this.value=c.decode(e,5),this}fromBTC(e){return this.value=c.decode(e,8),this}from(e,t){switch(e){case"sat":return this.fromSatoshis(t);case"ubtc":case"bits":return this.fromBits(t);case"mbtc":return this.fromMBTC(t);case"btc":return this.fromBTC(t)}throw new Error(`Unknown unit "${e}".`)}static fromOptions(e,t){return(new this).fromOptions(e,t)}static fromValue(e){return(new this).fromValue(e)}static fromSatoshis(e){return(new this).fromSatoshis(e)}static fromBits(e){return(new this).fromBits(e)}static fromMBTC(e){return(new this).fromMBTC(e)}static fromBTC(e){return(new this).fromBTC(e)}static from(e,t){return(new this).from(e,t)}[h](){return`<Amount: ${this.toString()}>`}static btc(e,t){return"string"==typeof e?e:c.encode(e,8,t)}static value(e){return"number"==typeof e?e:c.decode(e,8)}static encode(e,t,r){return r?a.toFloat(e,t):a.encode(e,t)}static decode(e,t){return"number"==typeof e?a.fromFloat(e,t):a.decode(e,t)}}r.exports=c}],["bcoin","/lib/script/script.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(90,r),c=__browser_require__(92,r),u=__browser_require__(51,r),f=__browser_require__(94,r),l=__browser_require__(33,r),d=__browser_require__(38,r),p=__browser_require__(17,r),b=__browser_require__(96,r),g=__browser_require__(97,r),m=__browser_require__(102,r),_=__browser_require__(103,r),w=__browser_require__(101,r),y=__browser_require__(99,r),v=__browser_require__(98,r),E=__browser_require__(104,r),S=v.opcodes,I=v.types,{encoding:k}=a,{inspectSymbol:A}=__browser_require__(21,r),O=Buffer.alloc(0);class x{constructor(e){this.raw=O,this.code=[],e&&this.fromOptions(e)}get length(){return this.code.length}set length(e){this.code.length=e}fromOptions(e){if(o(e,"Script data is required."),null!=e&&!0===e._isBuffer)return this.fromRaw(e);if(Array.isArray(e))return this.fromArray(e);if(e.raw){if(!e.code)return this.fromRaw(e.raw);o(null!=e.raw&&!0===e.raw._isBuffer,"Raw must be a Buffer."),this.raw=e.raw}if(e.code){if(!e.raw)return this.fromArray(e.code);o(Array.isArray(e.code),"Code must be an array."),this.code=e.code}return this}static fromOptions(e){return(new this).fromOptions(e)}values(){return this.code.values()}entries(){return this.code.entries()}[Symbol.iterator](){return this.code[Symbol.iterator]()}toArray(){return this.code.slice()}fromArray(e){o(Array.isArray(e)),this.clear();for(const t of e)this.push(t);return this.compile()}static fromArray(e){return(new this).fromArray(e)}toItems(){const e=[];for(const t of this.code){const r=t.toPush();if(!r)throw new Error("Non-push opcode in script.");e.push(r)}return e}fromItems(e){o(Array.isArray(e)),this.clear();for(const t of e)this.pushData(t);return this.compile()}static fromItems(e){return(new this).fromItems(e)}toStack(){return new _(this.toItems())}fromStack(e){return this.fromItems(e.items)}static fromStack(e){return(new this).fromStack(e)}clone(){return(new this.constructor).inject(this)}inject(e){return this.raw=e.raw,this.code=e.code.slice(),this}equals(e){return o(x.isScript(e)),this.raw.equals(e.raw)}compare(e){return o(x.isScript(e)),this.raw.compare(e.raw)}clear(){return this.raw=O,this.code.length=0,this}[A](){return`<Script: ${this.toString()}>`}toString(){const e=[];for(const t of this.code)e.push(t.toFormat());return e.join(" ")}toASM(e){this.isNulldata()&&(e=!1);const t=[];for(const r of this.code)t.push(r.toASM(e));return t.join(" ")}compile(){if(0===this.code.length)return this.clear();let e=0;for(const t of this.code)e+=t.getSize();const t=a.write(e);for(const e of this.code)e.toWriter(t);return this.raw=t.render(),this}toWriter(e){return e.writeVarBytes(this.raw),e}toRaw(){return this.raw}toJSON(){return this.toRaw().toString("hex")}fromJSON(e){return o("string"==typeof e,"Code must be a string."),this.fromRaw(Buffer.from(e,"hex"))}static fromJSON(e){return(new this).fromJSON(e)}getSubscript(e){if(0===e)return this.clone();const t=new x;for(let r=e;r<this.code.length;r++){const e=this.code[r];if(-1===e.value)break;t.code.push(e)}return t.compile()}removeSeparators(){let e=!1;for(const t of this.code){if(-1===t.value)break;if(t.value===S.OP_CODESEPARATOR){e=!0;break}}if(!e)return this;const t=new x;for(const e of this.code){if(-1===e.value)break;e.value!==S.OP_CODESEPARATOR&&t.code.push(e)}return t.compile()}execute(e,t,r,i,s,n){if(null==t&&(t=x.flags.STANDARD_VERIFY_FLAGS),null==n&&(n=0),this.raw.length>p.MAX_SCRIPT_SIZE)throw new w("SCRIPT_SIZE");const a=[],d=[];let b=0,g=0,m=0,_=!1;t&x.flags.VERIFY_MINIMALDATA&&(_=!0);for(let v=0;v<this.code.length;v++){const E=this.code[v];if(-1===E.value)throw new w("BAD_OPCODE",E,v);if(E.data&&E.data.length>p.MAX_SCRIPT_PUSH)throw new w("PUSH_SIZE",E,v);if(E.value>S.OP_16&&++g>p.MAX_SCRIPT_OPS)throw new w("OP_COUNT",E,v);if(E.isDisabled())throw new w("DISABLED_OPCODE",E,v);if(E.value===S.OP_CODESEPARATOR&&0===n&&t&x.flags.VERIFY_CONST_SCRIPTCODE)throw new w("OP_CODESEPARATOR",E,v);if(!m||E.isBranch())if(E.data){if(_&&!E.isMinimal())throw new w("MINIMALDATA",E,v);if(e.push(E.data),e.length+d.length>p.MAX_SCRIPT_STACK)throw new w("STACK_SIZE",E,v)}else{switch(E.value){case S.OP_0:e.pushInt(0);break;case S.OP_1NEGATE:e.pushInt(-1);break;case S.OP_1:case S.OP_2:case S.OP_3:case S.OP_4:case S.OP_5:case S.OP_6:case S.OP_7:case S.OP_8:case S.OP_9:case S.OP_10:case S.OP_11:case S.OP_12:case S.OP_13:case S.OP_14:case S.OP_15:case S.OP_16:e.pushInt(E.value-80);break;case S.OP_NOP:break;case S.OP_CHECKLOCKTIMEVERIFY:{if(!(t&x.flags.VERIFY_CHECKLOCKTIMEVERIFY))break;if(!r)throw new w("UNKNOWN_ERROR","No TX passed in.");if(0===e.length)throw new w("INVALID_STACK_OPERATION",E,v);const s=e.getNum(-1,_,5);if(s.isNeg())throw new w("NEGATIVE_LOCKTIME",E,v);const n=s.toDouble();if(!r.verifyLocktime(i,n))throw new w("UNSATISFIED_LOCKTIME",E,v);break}case S.OP_CHECKSEQUENCEVERIFY:{if(!(t&x.flags.VERIFY_CHECKSEQUENCEVERIFY))break;if(!r)throw new w("UNKNOWN_ERROR","No TX passed in.");if(0===e.length)throw new w("INVALID_STACK_OPERATION",E,v);const s=e.getNum(-1,_,5);if(s.isNeg())throw new w("NEGATIVE_LOCKTIME",E,v);const n=s.toDouble();if(!r.verifySequence(i,n))throw new w("UNSATISFIED_LOCKTIME",E,v);break}case S.OP_NOP1:case S.OP_NOP4:case S.OP_NOP5:case S.OP_NOP6:case S.OP_NOP7:case S.OP_NOP8:case S.OP_NOP9:case S.OP_NOP10:if(t&x.flags.VERIFY_DISCOURAGE_UPGRADABLE_NOPS)throw new w("DISCOURAGE_UPGRADABLE_NOPS",E,v);break;case S.OP_IF:case S.OP_NOTIF:{let r=!1;if(!m){if(e.length<1)throw new w("UNBALANCED_CONDITIONAL",E,v);if(1===n&&t&x.flags.VERIFY_MINIMALIF){const t=e.get(-1);if(t.length>1)throw new w("MINIMALIF");if(1===t.length&&1!==t[0])throw new w("MINIMALIF")}r=e.getBool(-1),E.value===S.OP_NOTIF&&(r=!r),e.pop()}a.push(r),r||(m+=1);break}case S.OP_ELSE:if(0===a.length)throw new w("UNBALANCED_CONDITIONAL",E,v);a[a.length-1]=!a[a.length-1],a[a.length-1]?m-=1:m+=1;break;case S.OP_ENDIF:if(0===a.length)throw new w("UNBALANCED_CONDITIONAL",E,v);a.pop()||(m-=1);break;case S.OP_VERIFY:if(0===e.length)throw new w("INVALID_STACK_OPERATION",E,v);if(!e.getBool(-1))throw new w("VERIFY",E,v);e.pop();break;case S.OP_RETURN:throw new w("OP_RETURN",E,v);case S.OP_TOALTSTACK:if(0===e.length)throw new w("INVALID_STACK_OPERATION",E,v);d.push(e.pop());break;case S.OP_FROMALTSTACK:if(0===d.length)throw new w("INVALID_ALTSTACK_OPERATION",E,v);e.push(d.pop());break;case S.OP_2DROP:if(e.length<2)throw new w("INVALID_STACK_OPERATION",E,v);e.pop(),e.pop();break;case S.OP_2DUP:{if(e.length<2)throw new w("INVALID_STACK_OPERATION",E,v);const t=e.get(-2),r=e.get(-1);e.push(t),e.push(r);break}case S.OP_3DUP:{if(e.length<3)throw new w("INVALID_STACK_OPERATION",E,v);const t=e.get(-3),r=e.get(-2),i=e.get(-1);e.push(t),e.push(r),e.push(i);break}case S.OP_2OVER:{if(e.length<4)throw new w("INVALID_STACK_OPERATION",E,v);const t=e.get(-4),r=e.get(-3);e.push(t),e.push(r);break}case S.OP_2ROT:{if(e.length<6)throw new w("INVALID_STACK_OPERATION",E,v);const t=e.get(-6),r=e.get(-5);e.erase(-6,-4),e.push(t),e.push(r);break}case S.OP_2SWAP:if(e.length<4)throw new w("INVALID_STACK_OPERATION",E,v);e.swap(-4,-2),e.swap(-3,-1);break;case S.OP_IFDUP:if(0===e.length)throw new w("INVALID_STACK_OPERATION",E,v);if(e.getBool(-1)){const t=e.get(-1);e.push(t)}break;case S.OP_DEPTH:e.pushInt(e.length);break;case S.OP_DROP:if(0===e.length)throw new w("INVALID_STACK_OPERATION",E,v);e.pop();break;case S.OP_DUP:if(0===e.length)throw new w("INVALID_STACK_OPERATION",E,v);e.push(e.get(-1));break;case S.OP_NIP:if(e.length<2)throw new w("INVALID_STACK_OPERATION",E,v);e.remove(-2);break;case S.OP_OVER:if(e.length<2)throw new w("INVALID_STACK_OPERATION",E,v);e.push(e.get(-2));break;case S.OP_PICK:case S.OP_ROLL:{if(e.length<2)throw new w("INVALID_STACK_OPERATION",E,v);const t=e.getInt(-1,_,4);if(e.pop(),t<0||t>=e.length)throw new w("INVALID_STACK_OPERATION",E,v);const r=e.get(-t-1);E.value===S.OP_ROLL&&e.remove(-t-1),e.push(r);break}case S.OP_ROT:if(e.length<3)throw new w("INVALID_STACK_OPERATION",E,v);e.swap(-3,-2),e.swap(-2,-1);break;case S.OP_SWAP:if(e.length<2)throw new w("INVALID_STACK_OPERATION",E,v);e.swap(-2,-1);break;case S.OP_TUCK:if(e.length<2)throw new w("INVALID_STACK_OPERATION",E,v);e.insert(-2,e.get(-1));break;case S.OP_SIZE:if(e.length<1)throw new w("INVALID_STACK_OPERATION",E,v);e.pushInt(e.get(-1).length);break;case S.OP_EQUAL:case S.OP_EQUALVERIFY:{if(e.length<2)throw new w("INVALID_STACK_OPERATION",E,v);const t=e.get(-2),r=e.get(-1),i=t.equals(r);if(e.pop(),e.pop(),e.pushBool(i),E.value===S.OP_EQUALVERIFY){if(!i)throw new w("EQUALVERIFY",E,v);e.pop()}break}case S.OP_1ADD:case S.OP_1SUB:case S.OP_NEGATE:case S.OP_ABS:case S.OP_NOT:case S.OP_0NOTEQUAL:{if(e.length<1)throw new w("INVALID_STACK_OPERATION",E,v);let t,r=e.getNum(-1,_,4);switch(E.value){case S.OP_1ADD:r.iaddn(1);break;case S.OP_1SUB:r.isubn(1);break;case S.OP_NEGATE:r.ineg();break;case S.OP_ABS:r.iabs();break;case S.OP_NOT:t=r.isZero(),r=y.fromBool(t);break;case S.OP_0NOTEQUAL:t=!r.isZero(),r=y.fromBool(t);break;default:o(!1,"Fatal script error.")}e.pop(),e.pushNum(r);break}case S.OP_ADD:case S.OP_SUB:case S.OP_BOOLAND:case S.OP_BOOLOR:case S.OP_NUMEQUAL:case S.OP_NUMEQUALVERIFY:case S.OP_NUMNOTEQUAL:case S.OP_LESSTHAN:case S.OP_GREATERTHAN:case S.OP_LESSTHANOREQUAL:case S.OP_GREATERTHANOREQUAL:case S.OP_MIN:case S.OP_MAX:{if(e.length<2)throw new w("INVALID_STACK_OPERATION",E,v);const t=e.getNum(-2,_,4),r=e.getNum(-1,_,4);let i,s;switch(E.value){case S.OP_ADD:i=t.iadd(r);break;case S.OP_SUB:i=t.isub(r);break;case S.OP_BOOLAND:s=t.toBool()&&r.toBool(),i=y.fromBool(s);break;case S.OP_BOOLOR:s=t.toBool()||r.toBool(),i=y.fromBool(s);break;case S.OP_NUMEQUAL:case S.OP_NUMEQUALVERIFY:s=t.eq(r),i=y.fromBool(s);break;case S.OP_NUMNOTEQUAL:s=!t.eq(r),i=y.fromBool(s);break;case S.OP_LESSTHAN:s=t.lt(r),i=y.fromBool(s);break;case S.OP_GREATERTHAN:s=t.gt(r),i=y.fromBool(s);break;case S.OP_LESSTHANOREQUAL:s=t.lte(r),i=y.fromBool(s);break;case S.OP_GREATERTHANOREQUAL:s=t.gte(r),i=y.fromBool(s);break;case S.OP_MIN:i=y.min(t,r);break;case S.OP_MAX:i=y.max(t,r);break;default:o(!1,"Fatal script error.")}if(e.pop(),e.pop(),e.pushNum(i),E.value===S.OP_NUMEQUALVERIFY){if(!e.getBool(-1))throw new w("NUMEQUALVERIFY",E,v);e.pop()}break}case S.OP_WITHIN:{if(e.length<3)throw new w("INVALID_STACK_OPERATION",E,v);const t=e.getNum(-3,_,4),r=e.getNum(-2,_,4),i=e.getNum(-1,_,4),s=r.lte(t)&&t.lt(i);e.pop(),e.pop(),e.pop(),e.pushBool(s);break}case S.OP_RIPEMD160:if(0===e.length)throw new w("INVALID_STACK_OPERATION",E,v);e.push(h.digest(e.pop()));break;case S.OP_SHA1:if(0===e.length)throw new w("INVALID_STACK_OPERATION",E,v);e.push(c.digest(e.pop()));break;case S.OP_SHA256:if(0===e.length)throw new w("INVALID_STACK_OPERATION",E,v);e.push(u.digest(e.pop()));break;case S.OP_HASH160:if(0===e.length)throw new w("INVALID_STACK_OPERATION",E,v);e.push(f.digest(e.pop()));break;case S.OP_HASH256:if(0===e.length)throw new w("INVALID_STACK_OPERATION",E,v);e.push(l.digest(e.pop()));break;case S.OP_CODESEPARATOR:b=v+1;break;case S.OP_CHECKSIG:case S.OP_CHECKSIGVERIFY:{if(!r)throw new w("UNKNOWN_ERROR","No TX passed in.");if(e.length<2)throw new w("INVALID_STACK_OPERATION",E,v);const o=e.get(-2),a=e.get(-1),h=this.getSubscript(b);if(0===n){if(h.findAndDelete(o)>0&&t&x.flags.VERIFY_CONST_SCRIPTCODE)throw new w("SIG_FINDANDDELETE",E,v)}M(o,t),R(a,t,n);let c=!1;if(o.length>0){const e=o[o.length-1];c=P(r.signatureHash(i,h,s,e,n),o,a)}if(!c&&t&x.flags.VERIFY_NULLFAIL&&0!==o.length)throw new w("NULLFAIL",E,v);if(e.pop(),e.pop(),e.pushBool(c),E.value===S.OP_CHECKSIGVERIFY){if(!c)throw new w("CHECKSIGVERIFY",E,v);e.pop()}break}case S.OP_CHECKMULTISIG:case S.OP_CHECKMULTISIGVERIFY:{if(!r)throw new w("UNKNOWN_ERROR","No TX passed in.");let o=1;if(e.length<o)throw new w("INVALID_STACK_OPERATION",E,v);let a,h,c=e.getInt(-o,_,4),u=c+2;if(c<0||c>p.MAX_MULTISIG_PUBKEYS)throw new w("PUBKEY_COUNT",E,v);if((g+=c)>p.MAX_SCRIPT_OPS)throw new w("OP_COUNT",E,v);if(a=o+=1,o+=c,e.length<o)throw new w("INVALID_STACK_OPERATION",E,v);let f=e.getInt(-o,_,4);if(f<0||f>c)throw new w("SIG_COUNT",E,v);if(h=o+=1,o+=f,e.length<o)throw new w("INVALID_STACK_OPERATION",E,v);const l=this.getSubscript(b);for(let r=0;r<f;r++){const i=e.get(-h-r);if(0===n){if(l.findAndDelete(i)>0&&t&x.flags.VERIFY_CONST_SCRIPTCODE)throw new w("SIG_FINDANDDELETE",E,v)}}let d=!0;for(;d&&f>0;){const o=e.get(-h),u=e.get(-a);if(M(o,t),R(u,t,n),o.length>0){const e=o[o.length-1];P(r.signatureHash(i,l,s,e,n),o,u)&&(h+=1,f-=1)}a+=1,f>(c-=1)&&(d=!1)}for(;o>1;){if(!d&&t&x.flags.VERIFY_NULLFAIL&&0===u&&0!==e.get(-1).length)throw new w("NULLFAIL",E,v);u>0&&(u-=1),e.pop(),o-=1}if(e.length<1)throw new w("INVALID_STACK_OPERATION",E,v);if(t&x.flags.VERIFY_NULLDUMMY&&0!==e.get(-1).length)throw new w("SIG_NULLDUMMY",E,v);if(e.pop(),e.pushBool(d),E.value===S.OP_CHECKMULTISIGVERIFY){if(!d)throw new w("CHECKMULTISIGVERIFY",E,v);e.pop()}break}default:throw new w("BAD_OPCODE",E,v)}if(e.length+d.length>p.MAX_SCRIPT_STACK)throw new w("STACK_SIZE",E,v)}else if(e.length+d.length>p.MAX_SCRIPT_STACK)throw new w("STACK_SIZE",E,v)}if(0!==a.length)throw new w("UNBALANCED_CONDITIONAL")}findAndDelete(e){const t=m.fromPush(e);if(this.raw.length<t.getSize())return 0;let r=!1;for(const e of this.code){if(-1===e.value)break;if(e.equals(t)){r=!0;break}}if(!r)return 0;const i=[];let s=0;for(const e of this.code){if(-1===e.value)break;e.equals(t)?s+=1:i.push(e)}return this.code=i,this.compile(),s}indexOf(e){for(let t=0;t<this.code.length;t++){const r=this.code[t];if(-1===r.value)break;if(r.data&&r.data.equals(e))return t}return-1}isCode(){for(const e of this.code){if(-1===e.value)return!1;if(e.isDisabled())return!1;switch(e.value){case S.OP_RESERVED:case S.OP_NOP:case S.OP_VER:case S.OP_VERIF:case S.OP_VERNOTIF:case S.OP_RESERVED1:case S.OP_RESERVED2:case S.OP_NOP1:return!1}if(e.value>S.OP_CHECKSEQUENCEVERIFY)return!1}return!0}fromPubkey(e){return o(null!=e&&!0===e._isBuffer&&(33===e.length||65===e.length)),this.raw=Buffer.allocUnsafe(1+e.length+1),this.raw[0]=e.length,e.copy(this.raw,1),this.raw[1+e.length]=S.OP_CHECKSIG,e=this.raw.slice(1,1+e.length),this.code.length=0,this.code.push(m.fromPush(e)),this.code.push(m.fromOp(S.OP_CHECKSIG)),this}static fromPubkey(e){return(new this).fromPubkey(e)}fromPubkeyhash(e){return o(null!=e&&!0===e._isBuffer&&20===e.length),this.raw=Buffer.allocUnsafe(25),this.raw[0]=S.OP_DUP,this.raw[1]=S.OP_HASH160,this.raw[2]=20,e.copy(this.raw,3),this.raw[23]=S.OP_EQUALVERIFY,this.raw[24]=S.OP_CHECKSIG,e=this.raw.slice(3,23),this.code.length=0,this.code.push(m.fromOp(S.OP_DUP)),this.code.push(m.fromOp(S.OP_HASH160)),this.code.push(m.fromPush(e)),this.code.push(m.fromOp(S.OP_EQUALVERIFY)),this.code.push(m.fromOp(S.OP_CHECKSIG)),this}static fromPubkeyhash(e){return(new this).fromPubkeyhash(e)}fromMultisig(e,t,r){o((255&e)===e&&(255&t)===t),o(Array.isArray(r)),o(r.length===t,"`n` keys are required for multisig."),o(e>=1&&e<=t),o(t>=1&&t<=15),this.clear(),this.pushSmall(e);for(const e of function(e){return e.slice().sort((e,t)=>e.compare(t))}(r))this.pushData(e);return this.pushSmall(t),this.pushOp(S.OP_CHECKMULTISIG),this.compile()}static fromMultisig(e,t,r){return(new this).fromMultisig(e,t,r)}fromScripthash(e){return o(null!=e&&!0===e._isBuffer&&20===e.length),this.raw=Buffer.allocUnsafe(23),this.raw[0]=S.OP_HASH160,this.raw[1]=20,e.copy(this.raw,2),this.raw[22]=S.OP_EQUAL,e=this.raw.slice(2,22),this.code.length=0,this.code.push(m.fromOp(S.OP_HASH160)),this.code.push(m.fromPush(e)),this.code.push(m.fromOp(S.OP_EQUAL)),this}static fromScripthash(e){return(new this).fromScripthash(e)}fromNulldata(e){return o(null!=e&&!0===e._isBuffer),o(e.length<=b.MAX_OP_RETURN,"Nulldata too large."),this.clear(),this.pushOp(S.OP_RETURN),this.pushData(e),this.compile()}static fromNulldata(e){return(new this).fromNulldata(e)}fromProgram(e,t){return o((255&e)===e&&e>=0&&e<=16),o(null!=t&&!0===t._isBuffer&&t.length>=2&&t.length<=40),this.raw=Buffer.allocUnsafe(2+t.length),this.raw[0]=0===e?0:e+80,this.raw[1]=t.length,t.copy(this.raw,2),t=this.raw.slice(2,2+t.length),this.code.length=0,this.code.push(m.fromSmall(e)),this.code.push(m.fromPush(t)),this}static fromProgram(e,t){return(new this).fromProgram(e,t)}fromAddress(e){if("string"==typeof e&&(e=E.fromString(e)),o(e instanceof E,"Not an address."),e.isPubkeyhash())return this.fromPubkeyhash(e.hash);if(e.isScripthash())return this.fromScripthash(e.hash);if(e.isProgram())return this.fromProgram(e.version,e.hash);throw new Error("Unknown address type.")}static fromAddress(e){return(new this).fromAddress(e)}fromCommitment(e,t){const r=a.write(36);return r.writeU32BE(2854332909),r.writeHash(e),this.clear(),this.pushOp(S.OP_RETURN),this.pushData(r.render()),t&&this.pushData(t),this.compile()}static fromCommitment(e,t){return(new this).fromCommitment(e,t)}getRedeem(){let e=null;for(const t of this.code){if(-1===t.value)return null;if(t.value>S.OP_16)return null;e=t.data}return e?x.fromRaw(e):null}getType(){return this.isPubkey()?I.PUBKEY:this.isPubkeyhash()?I.PUBKEYHASH:this.isScripthash()?I.SCRIPTHASH:this.isWitnessPubkeyhash()?I.WITNESSPUBKEYHASH:this.isWitnessScripthash()?I.WITNESSSCRIPTHASH:this.isMultisig()?I.MULTISIG:this.isNulldata()?I.NULLDATA:I.NONSTANDARD}isUnknown(){return this.getType()===I.NONSTANDARD}isStandard(){const[e,t]=this.getMultisig();return-1!==e?!(t<1||t>3)&&!(e<1||e>t):this.isNulldata()?this.raw.length<=b.MAX_OP_RETURN_BYTES:this.getType()!==I.NONSTANDARD}getSize(){return this.raw.length}getVarSize(){return k.sizeVarBytes(this.raw)}getInputAddress(){return E.fromInputScript(this)}getAddress(){return E.fromScript(this)}hash160(e){let t=f.digest(this.toRaw());return"hex"===e&&(t=t.toString("hex")),t}sha256(e){let t=u.digest(this.toRaw());return"hex"===e&&(t=t.toString("hex")),t}isPubkey(e){if(e)return this.raw.length>=35&&(33===this.raw[0]||65===this.raw[0])&&this.raw[0]+2===this.raw.length&&this.raw[this.raw.length-1]===S.OP_CHECKSIG;if(2!==this.code.length)return!1;const t=this.getLength(0);return(33===t||65===t)&&this.getOp(1)===S.OP_CHECKSIG}getPubkey(e){return this.isPubkey(e)?e?this.raw.slice(1,1+this.raw[0]):this.getData(0):null}isPubkeyhash(e){return e||25===this.raw.length?25===this.raw.length&&this.raw[0]===S.OP_DUP&&this.raw[1]===S.OP_HASH160&&20===this.raw[2]&&this.raw[23]===S.OP_EQUALVERIFY&&this.raw[24]===S.OP_CHECKSIG:5===this.code.length&&(this.getOp(0)===S.OP_DUP&&this.getOp(1)===S.OP_HASH160&&20===this.getLength(2)&&this.getOp(3)===S.OP_EQUALVERIFY&&this.getOp(4)===S.OP_CHECKSIG)}getPubkeyhash(e){return this.isPubkeyhash(e)?e?this.raw.slice(3,23):this.getData(2):null}isMultisig(e){if(this.code.length<4||this.code.length>19)return!1;if(this.getOp(-1)!==S.OP_CHECKMULTISIG)return!1;const t=this.getSmall(0);if(t<1)return!1;const r=this.getSmall(-2);if(r<1||t>r)return!1;if(this.code.length!==r+3)return!1;for(let t=1;t<r+1;t++){const r=this.code[t],i=r.toLength();if(33!==i&&65!==i)return!1;if(e&&!r.isMinimal())return!1}return!0}getMultisig(e){return this.isMultisig(e)?[this.getSmall(0),this.getSmall(-2)]:[-1,-1]}isScripthash(){return 23===this.raw.length&&this.raw[0]===S.OP_HASH160&&20===this.raw[1]&&this.raw[22]===S.OP_EQUAL}getScripthash(){return this.isScripthash()?this.getData(1):null}isNulldata(e){if(0===this.code.length)return!1;if(this.getOp(0)!==S.OP_RETURN)return!1;if(1===this.code.length)return!0;if(e&&this.raw.length>b.MAX_OP_RETURN_BYTES)return!1;for(let t=1;t<this.code.length;t++){const r=this.code[t];if(-1===r.value)return!1;if(r.value>S.OP_16)return!1;if(e&&!r.isMinimal())return!1}return!0}getNulldata(e){if(!this.isNulldata(e))return null;for(let e=1;e<this.code.length;e++){const t=this.code[e].toPush();if(t)return t}return O}isCommitment(){return this.raw.length>=38&&this.raw[0]===S.OP_RETURN&&36===this.raw[1]&&2854332909===this.raw.readUInt32BE(2,!0)}getCommitment(){return this.isCommitment()?this.raw.slice(6,38):null}isProgram(){return!(this.raw.length<4||this.raw.length>42)&&((this.raw[0]===S.OP_0||!(this.raw[0]<S.OP_1||this.raw[0]>S.OP_16))&&this.raw[1]+2===this.raw.length)}getProgram(){if(!this.isProgram())return null;const e=this.getSmall(0),t=this.getData(1);return new g(e,t)}forWitness(){if(this.isProgram())return this.clone();const e=this.getPubkey();if(e){const t=f.digest(e);return x.fromProgram(0,t)}const t=this.getPubkeyhash();return t?x.fromProgram(0,t):x.fromProgram(0,this.sha256())}isWitnessPubkeyhash(){return 22===this.raw.length&&this.raw[0]===S.OP_0&&20===this.raw[1]}getWitnessPubkeyhash(){return this.isWitnessPubkeyhash()?this.getData(1):null}isWitnessScripthash(){return 34===this.raw.length&&this.raw[0]===S.OP_0&&32===this.raw[1]}getWitnessScripthash(){return this.isWitnessScripthash()?this.getData(1):null}isUnspendable(){return this.raw.length>p.MAX_SCRIPT_SIZE||this.raw.length>0&&this.raw[0]===S.OP_RETURN}getInputType(){return this.isPubkeyInput()?I.PUBKEY:this.isPubkeyhashInput()?I.PUBKEYHASH:this.isScripthashInput()?I.SCRIPTHASH:this.isMultisigInput()?I.MULTISIG:I.NONSTANDARD}isUnknownInput(){return this.getInputType()===I.NONSTANDARD}isPubkeyInput(){if(1!==this.code.length)return!1;const e=this.getLength(0);return e>=9&&e<=73}getPubkeyInput(){return this.isPubkeyInput()?this.getData(0):null}isPubkeyhashInput(){if(2!==this.code.length)return!1;const e=this.getLength(0),t=this.getLength(1);return e>=9&&e<=73&&(33===t||65===t)}getPubkeyhashInput(){return this.isPubkeyhashInput()?[this.getData(0),this.getData(1)]:[null,null]}isMultisigInput(){if(this.code.length<2)return!1;if(this.getOp(0)!==S.OP_0)return!1;if(this.getOp(1)>S.OP_PUSHDATA4)return!1;if(this.isScripthashInput())return!1;for(let e=1;e<this.code.length;e++){const t=this.getLength(e);if(t<9||t>73)return!1}return!0}getMultisigInput(){if(!this.isMultisigInput())return null;const e=[];for(let t=1;t<this.code.length;t++)e.push(this.getData(t));return e}isScripthashInput(){if(this.code.length<1)return!1;const e=this.getData(-1);if(!e)return!1;if(0===e.length)return!1;if(v.isSignatureEncoding(e))return!1;if(v.isKeyEncoding(e))return!1;const t=x.fromRaw(e);return!!t.isCode()&&(!t.isUnspendable()&&!!this.isPushOnly())}getScripthashInput(){return this.isScripthashInput()?this.getData(-1):null}getCoinbaseHeight(){return x.getCoinbaseHeight(this.raw)}static getCoinbaseHeight(e){if(0===e.length)return-1;if(e[0]>=S.OP_1&&e[0]<=S.OP_16)return e[0]-80;if(e[0]>6)return-1;const t=m.fromRaw(e),r=t.toNum();return r?r.isNeg()?-1:t.equals(m.fromNum(r))?r.toDouble():-1:1}test(e){for(const t of this.code){if(-1===t.value)break;if(t.data&&0!==t.data.length&&e.test(t.data))return!0}return!1}isPushOnly(){for(const e of this.code){if(-1===e.value)return!1;if(e.value>S.OP_16)return!1}return!0}getSigops(e){let t=0,r=-1;for(const i of this.code){if(-1===i.value)break;switch(i.value){case S.OP_CHECKSIG:case S.OP_CHECKSIGVERIFY:t+=1;break;case S.OP_CHECKMULTISIG:case S.OP_CHECKMULTISIGVERIFY:e&&r>=S.OP_1&&r<=S.OP_16?t+=r-80:t+=p.MAX_MULTISIG_PUBKEYS}r=i.value}return t}getScripthashSigops(e){if(!this.isScripthash())return this.getSigops(!0);const t=e.getRedeem();return t?t.getSigops(!0):0}getWitnessSigops(e,t){let r=this.getProgram();if(!r&&this.isScripthash()){const t=e.getRedeem();t&&(r=t.getProgram())}if(!r)return 0;if(0===r.version){if(20===r.data.length)return 1;if(32===r.data.length&&t.items.length>0){return t.getRedeem().getSigops(!0)}}return 0}get(e){return e<0&&(e+=this.code.length),e<0||e>=this.code.length?null:this.code[e]}pop(){return this.code.pop()||null}shift(){return this.code.shift()||null}remove(e){if(e<0&&(e+=this.code.length),e<0||e>=this.code.length)return null;const t=this.code.splice(e,1);return 0===t.length?null:t[0]}set(e,t){return e<0&&(e+=this.code.length),o(m.isOpcode(t)),o(e>=0&&e<=this.code.length),this.code[e]=t,this}push(e){return o(m.isOpcode(e)),this.code.push(e),this}unshift(e){return o(m.isOpcode(e)),this.code.unshift(e),this}insert(e,t){return e<0&&(e+=this.code.length),o(m.isOpcode(t)),o(e>=0&&e<=this.code.length),this.code.splice(e,0,t),this}getOp(e){const t=this.get(e);return t?t.value:-1}popOp(){const e=this.pop();return e?e.value:-1}shiftOp(){const e=this.shift();return e?e.value:-1}removeOp(e){const t=this.remove(e);return t?t.value:-1}setOp(e,t){return this.set(e,m.fromOp(t))}pushOp(e){return this.push(m.fromOp(e))}unshiftOp(e){return this.unshift(m.fromOp(e))}insertOp(e,t){return this.insert(e,m.fromOp(t))}getData(e){const t=this.get(e);return t?t.data:null}popData(){const e=this.pop();return e?e.data:null}shiftData(){const e=this.shift();return e?e.data:null}removeData(e){const t=this.remove(e);return t?t.data:null}setData(e,t){return this.set(e,m.fromData(t))}pushData(e){return this.push(m.fromData(e))}unshiftData(e){return this.unshift(m.fromData(e))}insertData(e,t){return this.insert(e,m.fromData(t))}getLength(e){const t=this.get(e);return t?t.toLength():-1}getPush(e){const t=this.get(e);return t?t.toPush():null}popPush(){const e=this.pop();return e?e.toPush():null}shiftPush(){const e=this.shift();return e?e.toPush():null}removePush(e){const t=this.remove(e);return t?t.toPush():null}setPush(e,t){return this.set(e,m.fromPush(t))}pushPush(e){return this.push(m.fromPush(e))}unshiftPush(e){return this.unshift(m.fromPush(e))}insertPush(e,t){return this.insert(e,m.fromPush(t))}getString(e,t){const r=this.get(e);return r?r.toString(t):null}popString(e){const t=this.pop();return t?t.toString(e):null}shiftString(e){const t=this.shift();return t?t.toString(e):null}removeString(e,t){const r=this.remove(e);return r?r.toString(t):null}setString(e,t,r){return this.set(e,m.fromString(t,r))}pushString(e,t){return this.push(m.fromString(e,t))}unshiftString(e,t){return this.unshift(m.fromString(e,t))}insertString(e,t,r){return this.insert(e,m.fromString(t,r))}getSmall(e){const t=this.get(e);return t?t.toSmall():-1}popSmall(){const e=this.pop();return e?e.toSmall():-1}shiftSmall(){const e=this.shift();return e?e.toSmall():-1}removeSmall(e){const t=this.remove(e);return t?t.toSmall():-1}setSmall(e,t){return this.set(e,m.fromSmall(t))}pushSmall(e){return this.push(m.fromSmall(e))}unshiftSmall(e){return this.unshift(m.fromSmall(e))}insertSmall(e,t){return this.insert(e,m.fromSmall(t))}getNum(e,t,r){const i=this.get(e);return i?i.toNum(t,r):null}popNum(e,t){const r=this.pop();return r?r.toNum(e,t):null}shiftNum(e,t){const r=this.shift();return r?r.toNum(e,t):null}removeNum(e,t,r){const i=this.remove(e);return i?i.toNum(t,r):null}setNum(e,t){return this.set(e,m.fromNum(t))}pushNum(e){return this.push(m.fromNum(e))}unshiftNum(e){return this.unshift(m.fromNum(e))}insertNum(e,t){return this.insert(e,m.fromNum(t))}getInt(e,t,r){const i=this.get(e);return i?i.toInt(t,r):-1}popInt(e,t){const r=this.pop();return r?r.toInt(e,t):-1}shiftInt(e,t){const r=this.shift();return r?r.toInt(e,t):-1}removeInt(e,t,r){const i=this.remove(e);return i?i.toInt(t,r):-1}setInt(e,t){return this.set(e,m.fromInt(t))}pushInt(e){return this.push(m.fromInt(e))}unshiftInt(e){return this.unshift(m.fromInt(e))}insertInt(e,t){return this.insert(e,m.fromInt(t))}getBool(e){const t=this.get(e);return!!t&&t.toBool()}popBool(){const e=this.pop();return!!e&&e.toBool()}shiftBool(){const e=this.shift();return!!e&&e.toBool()}removeBool(e){const t=this.remove(e);return!!t&&t.toBool()}setBool(e,t){return this.set(e,m.fromBool(t))}pushBool(e){return this.push(m.fromBool(e))}unshiftBool(e){return this.unshift(m.fromBool(e))}insertBool(e,t){return this.insert(e,m.fromBool(t))}getSym(e){const t=this.get(e);return t?t.toSymbol():null}popSym(){const e=this.pop();return e?e.toSymbol():null}shiftSym(){const e=this.shift();return e?e.toSymbol():null}removeSym(e){const t=this.remove(e);return t?t.toSymbol():null}setSym(e,t){return this.set(e,m.fromSymbol(t))}pushSym(e){return this.push(m.fromSymbol(e))}unshiftSym(e){return this.unshift(m.fromSymbol(e))}insertSym(e,t){return this.insert(e,m.fromSymbol(t))}fromString(e){if(o("string"==typeof e),0===(e=e.trim()).length)return this;const t=e.split(/\s+/),r=a.write();for(const e of t){let t=e;32&t.charCodeAt(0)&&(t=t.toUpperCase()),/^OP_/.test(t)||(t=`OP_${t}`);const i=S[t];if(null!=i)r.writeU8(i);else{if("'"===e[0]){o("'"===e[e.length-1],"Invalid string.");const t=e.slice(1,-1),i=m.fromString(t);r.writeBytes(i.toRaw());continue}if(/^-?\d+$/.test(e)){const t=y.fromString(e,10),i=m.fromNum(t);r.writeBytes(i.toRaw());continue}o(0===e.indexOf("0x"),"Unknown opcode.");const t=e.substring(2),i=Buffer.from(t,"hex");o(i.length===t.length/2,"Invalid hex string."),r.writeBytes(i)}}return this.fromRaw(r.render())}static fromString(e){return(new this).fromString(e)}static verify(e,t,r,i,s,n,a){if(null==a&&(a=x.flags.STANDARD_VERIFY_FLAGS),a&x.flags.VERIFY_SIGPUSHONLY&&!e.isPushOnly())throw new w("SIG_PUSHONLY");let h,c=new _;if(e.execute(c,a,i,s,n,0),a&x.flags.VERIFY_P2SH&&(h=c.clone()),r.execute(c,a,i,s,n,0),0===c.length||!c.getBool(-1))throw new w("EVAL_FALSE");let u=!1;if(a&x.flags.VERIFY_WITNESS&&r.isProgram()){if(u=!0,0!==e.raw.length)throw new w("WITNESS_MALLEATED");x.verifyProgram(t,r,a,i,s,n),c.length=1}if(a&x.flags.VERIFY_P2SH&&r.isScripthash()){if(!e.isPushOnly())throw new w("SIG_PUSHONLY");if(0===(c=h).length)throw new w("EVAL_FALSE");const r=c.pop(),o=x.fromRaw(r);if(o.execute(c,a,i,s,n,0),0===c.length||!c.getBool(-1))throw new w("EVAL_FALSE");if(a&x.flags.VERIFY_WITNESS&&o.isProgram()){if(u=!0,!e.raw.equals(m.fromPush(r).toRaw()))throw new w("WITNESS_MALLEATED_P2SH");x.verifyProgram(t,o,a,i,s,n),c.length=1}}if(a&x.flags.VERIFY_CLEANSTACK&&(o(0!=(a&x.flags.VERIFY_P2SH)),1!==c.length))throw new w("CLEANSTACK");if(a&x.flags.VERIFY_WITNESS&&(o(0!=(a&x.flags.VERIFY_P2SH)),!u&&t.items.length>0))throw new w("WITNESS_UNEXPECTED")}static verifyProgram(e,t,r,i,s,n){const a=t.getProgram();o(a,"verifyProgram called on non-witness-program."),o(0!=(r&x.flags.VERIFY_WITNESS));const h=e.toStack();let c;if(0===a.version){if(32===a.data.length){if(0===h.length)throw new w("WITNESS_PROGRAM_WITNESS_EMPTY");const e=h.pop();if(!u.digest(e).equals(a.data))throw new w("WITNESS_PROGRAM_MISMATCH");c=x.fromRaw(e)}else{if(20!==a.data.length)throw new w("WITNESS_PROGRAM_WRONG_LENGTH");if(2!==h.length)throw new w("WITNESS_PROGRAM_MISMATCH");c=x.fromPubkeyhash(a.data)}for(let e=0;e<h.length;e++)if(h.get(e).length>p.MAX_SCRIPT_PUSH)throw new w("PUSH_SIZE");if(c.execute(h,r,i,s,n,1),1!==h.length)throw new w("CLEANSTACK");if(!h.getBool(-1))throw new w("EVAL_FALSE")}else if(r&x.flags.VERIFY_DISCOURAGE_UPGRADABLE_WITNESS_PROGRAM)throw new w("DISCOURAGE_UPGRADABLE_WITNESS_PROGRAM")}fromReader(e){return this.fromRaw(e.readVarBytes())}fromRaw(e){const t=a.read(e);for(this.raw=e;t.left();)this.code.push(m.fromReader(t));return this}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}static isScript(e){return e instanceof x}}function R(e,t,r){if(o(null!=e&&!0===e._isBuffer),o("number"==typeof t),o("number"==typeof r),t&x.flags.VERIFY_STRICTENC&&!v.isKeyEncoding(e))throw new w("PUBKEYTYPE");if(1===r&&t&x.flags.VERIFY_WITNESS_PUBKEYTYPE&&!v.isCompressedEncoding(e))throw new w("WITNESS_PUBKEYTYPE");return!0}function M(e,t){if(o(null!=e&&!0===e._isBuffer),o("number"==typeof t),0===e.length)return!0;if((t&x.flags.VERIFY_DERSIG||t&x.flags.VERIFY_LOW_S||t&x.flags.VERIFY_STRICTENC)&&!v.isSignatureEncoding(e))throw new w("SIG_DER");if(t&x.flags.VERIFY_LOW_S&&!v.isLowDER(e))throw new w("SIG_HIGH_S");if(t&x.flags.VERIFY_STRICTENC&&!v.isHashType(e))throw new w("SIG_HASHTYPE");return!0}function P(e,t,r){return d.verifyDER(e,t.slice(0,-1),r)}x.opcodes=v.opcodes,x.opcodesByVal=v.opcodesByVal,x.flags=v.flags,x.hashType=v.hashType,x.hashTypeByVal=v.hashTypeByVal,x.types=v.types,x.typesByVal=v.typesByVal,r.exports=x}],["bcrypto","/lib/ripemd160-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(91,r)}],["bcrypto","/lib/js/ripemd160.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(35,r),a=__browser_require__(37,r),h=-1,c=Buffer.alloc(8,0),u=Buffer.alloc(64,0);u[0]=128;const f=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=new Uint8Array([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=new Uint8Array([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),p=new Uint8Array([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]);class b{constructor(){this.state=new Uint32Array(5),this.msg=new Uint32Array(16),this.block=Buffer.allocUnsafe(64),this.size=h}init(){return this.state[0]=1732584193,this.state[1]=4023233417,this.state[2]=2562383102,this.state[3]=271733878,this.state[4]=3285377520,this.size=0,this}update(e){return o(null!=e&&!0===e._isBuffer),this._update(e,e.length),this}final(){return this._final(Buffer.allocUnsafe(20))}_update(e,t){o(this.size!==h,"Context is not initialized.");let r=63&this.size,i=0;if(this.size+=t,r>0){let s=64-r;if(s>t&&(s=t),e.copy(this.block,r,i,i+s),t-=s,i+=s,(r+=s)<64)return;this._transform(this.block,0)}for(;t>=64;)this._transform(e,i),i+=64,t-=64;t>0&&e.copy(this.block,0,i,i+t)}_final(e){o(this.size!==h,"Context is not initialized.");const t=63&this.size,r=8*this.size;y(c,r>>>0,0),y(c,r*(1/4294967296)>>>0,4),this._update(u,1+(119-t&63)),this._update(c,8);for(let t=0;t<5;t++)y(e,this.state[t],4*t),this.state[t]=0;for(let e=0;e<16;e++)this.msg[e]=0;for(let e=0;e<64;e++)this.block[e]=0;return this.size=h,e}_transform(e,t){const r=this.msg;let i=this.state[0],s=this.state[1],n=this.state[2],o=this.state[3],a=this.state[4],h=i,c=s,u=n,b=o,y=a;for(let i=0;i<16;i++)r[i]=(E=t+4*i,(v=e)[E++]+256*v[E++]+65536*v[E++]+16777216*v[E]);var v,E;for(let e=0;e<80;e++){let t=i+m(e,s,n,o)+r[f[e]]+_(e),v=g(t,d[e]),E=v+a;i=a,a=o,o=g(n,10),n=s,s=E,E=(v=g(t=h+m(79-e,c,u,b)+r[l[e]]+w(e),p[e]))+y,h=y,y=b,b=g(u,10),u=c,c=E}const S=this.state[1]+n+b;this.state[1]=this.state[2]+o+y,this.state[2]=this.state[3]+a+h,this.state[3]=this.state[4]+i+c,this.state[4]=this.state[0]+s+u,this.state[0]=S}static hash(){return new b}static hmac(){return new a(b,64)}static digest(e){return b.ctx.init().update(e).final()}static root(e,t){return o(null!=e&&!0===e._isBuffer&&20===e.length),o(null!=t&&!0===t._isBuffer&&20===t.length),b.ctx.init().update(e).update(t).final()}static multi(e,t,r){const{ctx:i}=b;return i.init(),i.update(e),i.update(t),r&&i.update(r),i.final()}static mac(e,t){return b.hmac().init(t).update(e).final()}}function g(e,t){return e<<t|e>>>32-t}function m(e,t,r,i){return e<=15?t^r^i:e<=31?t&r|~t&i:e<=47?(t|~r)^i:e<=63?t&i|r&~i:t^(r|~i)}function _(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function w(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}function y(e,t,r){return e[r++]=t,t>>>=8,e[r++]=t,t>>>=8,e[r++]=t,t>>>=8,e[r++]=t,r}b.native=0,b.id="RIPEMD160",b.size=20,b.bits=160,b.blockSize=64,b.zero=Buffer.alloc(20,0),b.ctx=new b,r.exports=b}],["bcrypto","/lib/sha1-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(93,r)}],["bcrypto","/lib/js/sha1.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(35,r),a=__browser_require__(37,r),h=-1,c=Buffer.alloc(8,0),u=Buffer.alloc(64,0);u[0]=128;const f=new Uint32Array([1518500249,1859775393,2400959708,3395469782]);class l{constructor(){this.state=new Uint32Array(5),this.msg=new Uint32Array(80),this.block=Buffer.allocUnsafe(64),this.size=h}init(){return this.state[0]=1732584193,this.state[1]=4023233417,this.state[2]=2562383102,this.state[3]=271733878,this.state[4]=3285377520,this.size=0,this}update(e){return o(null!=e&&!0===e._isBuffer),this._update(e,e.length),this}final(){return this._final(Buffer.allocUnsafe(20))}_update(e,t){o(this.size!==h,"Context is not initialized.");let r=63&this.size,i=0;if(this.size+=t,r>0){let s=64-r;if(s>t&&(s=t),e.copy(this.block,r,i,i+s),t-=s,i+=s,(r+=s)<64)return;this._transform(this.block,0)}for(;t>=64;)this._transform(e,i),i+=64,t-=64;t>0&&e.copy(this.block,0,i,i+t)}_final(e){o(this.size!==h,"Context is not initialized.");const t=63&this.size,r=8*this.size;b(c,r*(1/4294967296)>>>0,0),b(c,r>>>0,4),this._update(u,1+(119-t&63)),this._update(c,8);for(let t=0;t<5;t++)b(e,this.state[t],4*t),this.state[t]=0;for(let e=0;e<80;e++)this.msg[e]=0;for(let e=0;e<64;e++)this.block[e]=0;return this.size=h,e}_transform(e,t){const r=this.msg;let i=this.state[0],s=this.state[1],n=this.state[2],o=this.state[3],a=this.state[4],h=0;for(;h<16;h++)r[h]=(u=t+4*h,16777216*(c=e)[u++]+65536*c[u++]+256*c[u++]+c[u]);for(var c,u;h<80;h++)r[h]=d(r[h-3]^r[h-8]^r[h-14]^r[h-16],1);for(h=0;h<80;h++){const e=h/20|0,t=d(i,5)+p(e,s,n,o)+a+r[h]+f[e];a=o,o=n,n=d(s,30),s=i,i=t>>>0}this.state[0]+=i,this.state[1]+=s,this.state[2]+=n,this.state[3]+=o,this.state[4]+=a}static hash(){return new l}static hmac(){return new a(l,64)}static digest(e){return l.ctx.init().update(e).final()}static root(e,t){return o(null!=e&&!0===e._isBuffer&&20===e.length),o(null!=t&&!0===t._isBuffer&&20===t.length),l.ctx.init().update(e).update(t).final()}static multi(e,t,r){const{ctx:i}=l;return i.init(),i.update(e),i.update(t),r&&i.update(r),i.final()}static mac(e,t){return l.hmac().init(t).update(e).final()}}function d(e,t){return e<<t|e>>>32-t}function p(e,t,r,i){return 0===e?function(e,t,r){return e&t^~e&r}(t,r,i):1===e||3===e?function(e,t,r){return e^t^r}(t,r,i):2===e?function(e,t,r){return e&t^e&r^t&r}(t,r,i):0}function b(e,t,r){return e[r++]=t>>>24,e[r++]=t>>>16,e[r++]=t>>>8,e[r++]=t,r}l.native=0,l.id="SHA1",l.size=20,l.bits=160,l.blockSize=64,l.zero=Buffer.alloc(20,0),l.ctx=new l,r.exports=l}],["bcrypto","/lib/hash160-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(95,r)}],["bcrypto","/lib/js/hash160.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(35,r),a=__browser_require__(36,r),h=__browser_require__(91,r),c=__browser_require__(37,r),u=new h;class f{constructor(){this.ctx=new a}init(){return this.ctx.init(),this}update(e){return this.ctx.update(e),this}final(){const e=Buffer.allocUnsafe(32);return this.ctx._final(e),u.init(),u.update(e),u._final(e),e.slice(0,20)}static hash(){return new f}static hmac(){return new c(f,64)}static digest(e){return f.ctx.init().update(e).final()}static root(e,t){return o(null!=e&&!0===e._isBuffer&&20===e.length),o(null!=t&&!0===t._isBuffer&&20===t.length),f.ctx.init().update(e).update(t).final()}static multi(e,t,r){const{ctx:i}=f;return i.init(),i.update(e),i.update(t),r&&i.update(r),i.final()}static mac(e,t){return f.hmac().init(t).update(e).final()}}f.native=0,f.id="HASH160",f.size=20,f.bits=160,f.blockSize=64,f.zero=Buffer.alloc(20,0),f.ctx=new f,r.exports=f}],["bcoin","/lib/protocol/policy.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(17,r);e.MAX_TX_VERSION=2,e.MAX_TX_SIZE=a.MAX_BLOCK_SIZE/10,e.MAX_TX_WEIGHT=a.MAX_BLOCK_WEIGHT/10,e.MAX_TX_SIGOPS=a.MAX_BLOCK_SIGOPS/5,e.MAX_TX_SIGOPS_COST=a.MAX_BLOCK_SIGOPS_COST/5,e.BYTES_PER_SIGOP=20,e.MIN_RELAY=1e3,e.BARE_MULTISIG=!0,e.FREE_THRESHOLD=144*a.COIN/250,e.MAX_P2SH_SIGOPS=15,e.MAX_OP_RETURN_BYTES=83,e.MAX_OP_RETURN=80,e.MAX_P2WSH_STACK=100,e.MAX_P2WSH_PUSH=80,e.MAX_P2WSH_SIZE=3600,e.MEMPOOL_MAX_ANCESTORS=25,e.MEMPOOL_MAX_SIZE=1e8,e.MEMPOOL_EXPIRY_TIME=259200,e.MEMPOOL_MAX_ORPHANS=100,e.MIN_BLOCK_WEIGHT=0,e.MAX_BLOCK_WEIGHT=1e6*a.WITNESS_SCALE_FACTOR,e.BLOCK_PRIORITY_WEIGHT=0,e.BLOCK_PRIORITY_THRESHOLD=e.FREE_THRESHOLD,e.getMinFee=function(t,r){if(null==r&&(r=e.MIN_RELAY),o(t>=0),o(r>=0),0===t)return 0;let i=Math.floor(r*t/1e3);return 0===i&&r>0&&(i=r),i},e.getRoundFee=function(t,r){if(null==r&&(r=e.MIN_RELAY),o(t>=0),o(r>=0),0===t)return 0;let i=r*Math.ceil(t/1e3);return 0===i&&r>0&&(i=r),i},e.getRate=function(e,t){return o(e>=0),o(t>=0),0===e?0:Math.floor(1e3*t/e)}}],["bcoin","/lib/script/program.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(98,r),h=a.types,{inspectSymbol:c}=__browser_require__(21,r);r.exports=class{constructor(e,t){o((255&e)===e),o(e>=0&&e<=16),o(null!=t&&!0===t._isBuffer),o(t.length>=2&&t.length<=40),this.version=e,this.data=t}getType(){return 0===this.version?20===this.data.length?h.WITNESSPUBKEYHASH:32===this.data.length?h.WITNESSSCRIPTHASH:h.WITNESSMALFORMED:h.NONSTANDARD}isUnknown(){const e=this.getType();return e===h.WITNESSMALFORMED||e===h.NONSTANDARD}isMalformed(){return this.getType()===h.WITNESSMALFORMED}[c](){const e=this.data.toString("hex"),t=a.typesByVal[this.getType()].toLowerCase();return`<Program: version=${this.version} data=${e} type=${t}>`}}}],["bcoin","/lib/script/common.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(38,r),h=__browser_require__(99,r);e.opcodes={OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_CHECKLOCKTIMEVERIFY:177,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_INVALIDOPCODE:255},e.opcodesByVal={0:"OP_0",76:"OP_PUSHDATA1",77:"OP_PUSHDATA2",78:"OP_PUSHDATA4",79:"OP_1NEGATE",80:"OP_RESERVED",81:"OP_1",82:"OP_2",83:"OP_3",84:"OP_4",85:"OP_5",86:"OP_6",87:"OP_7",88:"OP_8",89:"OP_9",90:"OP_10",91:"OP_11",92:"OP_12",93:"OP_13",94:"OP_14",95:"OP_15",96:"OP_16",97:"OP_NOP",98:"OP_VER",99:"OP_IF",100:"OP_NOTIF",101:"OP_VERIF",102:"OP_VERNOTIF",103:"OP_ELSE",104:"OP_ENDIF",105:"OP_VERIFY",106:"OP_RETURN",107:"OP_TOALTSTACK",108:"OP_FROMALTSTACK",109:"OP_2DROP",110:"OP_2DUP",111:"OP_3DUP",112:"OP_2OVER",113:"OP_2ROT",114:"OP_2SWAP",115:"OP_IFDUP",116:"OP_DEPTH",117:"OP_DROP",118:"OP_DUP",119:"OP_NIP",120:"OP_OVER",121:"OP_PICK",122:"OP_ROLL",123:"OP_ROT",124:"OP_SWAP",125:"OP_TUCK",126:"OP_CAT",127:"OP_SUBSTR",128:"OP_LEFT",129:"OP_RIGHT",130:"OP_SIZE",131:"OP_INVERT",132:"OP_AND",133:"OP_OR",134:"OP_XOR",135:"OP_EQUAL",136:"OP_EQUALVERIFY",137:"OP_RESERVED1",138:"OP_RESERVED2",139:"OP_1ADD",140:"OP_1SUB",141:"OP_2MUL",142:"OP_2DIV",143:"OP_NEGATE",144:"OP_ABS",145:"OP_NOT",146:"OP_0NOTEQUAL",147:"OP_ADD",148:"OP_SUB",149:"OP_MUL",150:"OP_DIV",151:"OP_MOD",152:"OP_LSHIFT",153:"OP_RSHIFT",154:"OP_BOOLAND",155:"OP_BOOLOR",156:"OP_NUMEQUAL",157:"OP_NUMEQUALVERIFY",158:"OP_NUMNOTEQUAL",159:"OP_LESSTHAN",160:"OP_GREATERTHAN",161:"OP_LESSTHANOREQUAL",162:"OP_GREATERTHANOREQUAL",163:"OP_MIN",164:"OP_MAX",165:"OP_WITHIN",166:"OP_RIPEMD160",167:"OP_SHA1",168:"OP_SHA256",169:"OP_HASH160",170:"OP_HASH256",171:"OP_CODESEPARATOR",172:"OP_CHECKSIG",173:"OP_CHECKSIGVERIFY",174:"OP_CHECKMULTISIG",175:"OP_CHECKMULTISIGVERIFY",176:"OP_NOP1",177:"OP_CHECKLOCKTIMEVERIFY",178:"OP_CHECKSEQUENCEVERIFY",179:"OP_NOP4",180:"OP_NOP5",181:"OP_NOP6",182:"OP_NOP7",183:"OP_NOP8",184:"OP_NOP9",185:"OP_NOP10",255:"OP_INVALIDOPCODE"},e.small=[Buffer.from([129]),Buffer.from([]),Buffer.from([1]),Buffer.from([2]),Buffer.from([3]),Buffer.from([4]),Buffer.from([5]),Buffer.from([6]),Buffer.from([7]),Buffer.from([8]),Buffer.from([9]),Buffer.from([10]),Buffer.from([11]),Buffer.from([12]),Buffer.from([13]),Buffer.from([14]),Buffer.from([15]),Buffer.from([16])],e.flags={VERIFY_NONE:0,VERIFY_P2SH:1,VERIFY_STRICTENC:2,VERIFY_DERSIG:4,VERIFY_LOW_S:8,VERIFY_NULLDUMMY:16,VERIFY_SIGPUSHONLY:32,VERIFY_MINIMALDATA:64,VERIFY_DISCOURAGE_UPGRADABLE_NOPS:128,VERIFY_CLEANSTACK:256,VERIFY_CHECKLOCKTIMEVERIFY:512,VERIFY_CHECKSEQUENCEVERIFY:1024,VERIFY_WITNESS:2048,VERIFY_DISCOURAGE_UPGRADABLE_WITNESS_PROGRAM:4096,VERIFY_MINIMALIF:8192,VERIFY_NULLFAIL:16384,VERIFY_WITNESS_PUBKEYTYPE:32768,VERIFY_CONST_SCRIPTCODE:65536},e.flags.MANDATORY_VERIFY_FLAGS=e.flags.VERIFY_P2SH,e.flags.STANDARD_VERIFY_FLAGS=0|e.flags.MANDATORY_VERIFY_FLAGS|e.flags.VERIFY_DERSIG|e.flags.VERIFY_STRICTENC|e.flags.VERIFY_MINIMALDATA|e.flags.VERIFY_NULLDUMMY|e.flags.VERIFY_DISCOURAGE_UPGRADABLE_NOPS|e.flags.VERIFY_CLEANSTACK|e.flags.VERIFY_MINIMALIF|e.flags.VERIFY_NULLFAIL|e.flags.VERIFY_CHECKLOCKTIMEVERIFY|e.flags.VERIFY_CHECKSEQUENCEVERIFY|e.flags.VERIFY_LOW_S|e.flags.VERIFY_WITNESS|e.flags.VERIFY_DISCOURAGE_UPGRADABLE_WITNESS_PROGRAM|e.flags.VERIFY_WITNESS_PUBKEYTYPE|e.flags.VERIFY_CONST_SCRIPTCODE,e.flags.ONLY_STANDARD_VERIFY_FLAGS=e.flags.STANDARD_VERIFY_FLAGS&~e.flags.MANDATORY_VERIFY_FLAGS,e.hashType={ALL:1,NONE:2,SINGLE:3,ANYONECANPAY:128},e.hashTypeByVal={1:"ALL",2:"NONE",3:"SINGLE",128:"ANYONECANPAY"},e.types={NONSTANDARD:0,PUBKEY:1,PUBKEYHASH:2,SCRIPTHASH:3,MULTISIG:4,NULLDATA:5,WITNESSMALFORMED:128,WITNESSSCRIPTHASH:129,WITNESSPUBKEYHASH:130},e.typesByVal={0:"NONSTANDARD",1:"PUBKEY",2:"PUBKEYHASH",3:"SCRIPTHASH",4:"MULTISIG",5:"NULLDATA",128:"WITNESSMALFORMED",129:"WITNESSSCRIPTHASH",130:"WITNESSPUBKEYHASH"},e.isHashType=function(t){if(o(null!=t&&!0===t._isBuffer),0===t.length)return!1;const r=t[t.length-1]&~e.hashType.ANYONECANPAY;return!(r<e.hashType.ALL||r>e.hashType.SINGLE)},e.isLowDER=function(t){return!!e.isSignatureEncoding(t)&&a.isLowDER(t.slice(0,-1))},e.isKeyEncoding=function(e){if(o(null!=e&&!0===e._isBuffer),e.length<33)return!1;if(4===e[0]){if(65!==e.length)return!1}else{if(2!==e[0]&&3!==e[0])return!1;if(33!==e.length)return!1}return!0},e.isCompressedEncoding=function(e){return o(null!=e&&!0===e._isBuffer),33===e.length&&(2===e[0]||3===e[0])},e.isSignatureEncoding=function(e){if(o(null!=e&&!0===e._isBuffer),e.length<9)return!1;if(e.length>73)return!1;if(48!==e[0])return!1;if(e[1]!==e.length-3)return!1;const t=e[3];if(5+t>=e.length)return!1;const r=e[5+t];return t+r+7===e.length&&(2===e[2]&&(0!==t&&(!(128&e[4])&&(!(t>1&&0===e[4]&&!(128&e[5]))&&(2===e[t+4]&&(0!==r&&(!(128&e[t+6])&&!(r>1&&0===e[t+6]&&!(128&e[t+7])))))))))},e.toASM=function(t,r){if(t.length<=4){return h.decode(t).toString(10)}if(r&&e.isSignatureEncoding(t)){const r=t[t.length-1];let i=e.hashTypeByVal[31&r]||"";return i&&(r&e.hashType.ANYONECANPAY&&(i+="|ANYONECANPAY"),i=`[${i}]`),t.slice(0,-1).toString("hex")+i}return t.toString("hex")}}],["bcoin","/lib/script/scriptnum.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),{I64:a}=__browser_require__(100,r),h=__browser_require__(101,r),{inspectSymbol:c}=__browser_require__(21,r),u=Buffer.alloc(0);class f extends a{constructor(e,t){super(e,t)}getInt(){return this.lt(a.INT32_MIN)?a.LONG_MIN:this.gt(a.INT32_MAX)?a.LONG_MAX:this.toInt()}toRaw(){let e=this;if(e.isZero())return u;let t=!1;e.isNeg()&&(e=e.neg(),t=!0);const r=e.byteLength();let i=0;e.testn(8*r-1)&&(i=1);const s=Buffer.allocUnsafe(r+i);switch(r){case 8:s[7]=e.hi>>>24&255;case 7:s[6]=e.hi>>16&255;case 6:s[5]=e.hi>>8&255;case 5:s[4]=255&e.hi;case 4:s[3]=e.lo>>>24&255;case 3:s[2]=e.lo>>16&255;case 2:s[1]=e.lo>>8&255;case 1:s[0]=255&e.lo}return 128&s[r-1]?(o(1===i),o(s.length===r+i),s[r]=t?128:0):t?(o(0===i),o(s.length===r),s[r-1]|=128):(o(0===i),o(s.length===r)),s}fromRaw(e){if(o(null!=e&&!0===e._isBuffer),0===e.length)return this;switch(e.length){case 8:this.hi|=e[7]<<24;case 7:this.hi|=e[6]<<16;case 6:this.hi|=e[5]<<8;case 5:this.hi|=e[4];case 4:this.lo|=e[3]<<24;case 3:this.lo|=e[2]<<16;case 2:this.lo|=e[1]<<8;case 1:this.lo|=e[0];break;default:for(let t=0;t<e.length;t++)this.orb(t,e[t])}return 128&e[e.length-1]&&(this.setn(8*e.length-1,0),this.ineg()),this}encode(){return this.toRaw()}decode(e,t,r){if(o(null!=e&&!0===e._isBuffer),null!=r&&e.length>r)throw new h("UNKNOWN_ERROR","Script number overflow.");if(t&&!f.isMinimal(e))throw new h("UNKNOWN_ERROR","Non-minimal script number.");return this.fromRaw(e)}[c](){return`<ScriptNum: ${this.toString(10)}>`}static isMinimal(e){if(o(null!=e&&!0===e._isBuffer),0===e.length)return!0;if(0==(127&e[e.length-1])){if(1===e.length)return!1;if(0==(128&e[e.length-2]))return!1}return!0}static decode(e,t,r){return(new this).decode(e,t,r)}static isScriptNum(e){return e instanceof f}}r.exports=f}],["n64","/lib/n64.js",function(e,t,r,i,s,n){"use strict";function o(e){f(this instanceof o,"this","N64"),f(0===e||1===e,"sign","bit"),this.hi=0,this.lo=0,this.sign=e}function a(e,t){if(!(this instanceof a))return new a(e,t);o.call(this,0),this.from(e,t)}function h(e,t){if(!(this instanceof h))return new h(e,t);o.call(this,1),this.from(e,t)}function c(e){if(null==e)return 10;if("number"==typeof e)return e;switch(e){case"bin":return 2;case"oct":return 8;case"dec":return 10;case"hex":return 16}return 0}function u(e){if(Math.clz32)return 32-Math.clz32(e);let t=31;for(;t>=0&&0==(e&1<<t);t--);return t+1}function f(e,t,r){if(!e){const e=new TypeError(`'${t}' must be a(n) ${r}.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,f),e}}function l(e){return"number"==typeof e&&isFinite(e)}function d(e){return Array.isArray?Array.isArray(e):"Array"==={}.toString.call(e).slice(8,-1)}function p(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}function b(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24}function g(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function m(e,t,r){e[r]=255&t,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255}function _(e,t,r){e[r]=t>>>24&255,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=255&t}o.prototype._add=function(e,t){const r=this.hi,i=this.lo,s=i+t|0,n=i>>31,o=t>>31,a=(r+e|0)+(1&(n&o|~(s>>31)&(n^o)));return this.hi=0|a,this.lo=s,this},o.prototype.iadd=function(e){return f(o.isN64(e),"operand","int64"),this._add(e.hi,e.lo)},o.prototype.iaddn=function(e){return f(l(e),"operand","number"),this._add(e>>31&-this.sign,0|e)},o.prototype.add=function(e){return this.clone().iadd(e)},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype._sub=function(e,t){return e=~e,-1===(t=~t)?(t=0,e+=1,e|=0):t+=1,this._add(e,t)},o.prototype.isub=function(e){return f(o.isN64(e),"operand","int64"),this._sub(e.hi,e.lo)},o.prototype.isubn=function(e){return f(l(e),"operand","number"),this._sub(e>>31&-this.sign,0|e)},o.prototype.sub=function(e){return this.clone().isub(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype._mul=function(e,t){const r=this.hi,i=this.lo,s=65535&r,n=i>>>16,o=65535&i,a=65535&e,h=t>>>16,c=65535&t;let u=0,f=0,l=0,d=0;l+=(d+=o*c)>>>16,f+=(l+=n*c)>>>16,l&=65535,f+=(l+=o*h)>>>16,u+=(f+=s*c)>>>16,f&=65535,u+=(f+=n*h)>>>16,f&=65535,u+=(f+=o*a)>>>16,u+=(r>>>16)*c+s*h+n*a+o*(e>>>16);const p=(u&=65535)<<16|(f&=65535),b=(l&=65535)<<16|(d&=65535);return this.hi=p,this.lo=b,this},o.prototype.imul=function(e){return f(o.isN64(e),"multiplicand","int64"),this._mul(e.hi,e.lo)},o.prototype.imuln=function(e){return f(l(e),"multiplicand","number"),this._mul(e>>31&-this.sign,0|e)},o.prototype.mul=function(e){return this.clone().imul(e)},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.idiv=function(e){let t=this;if(f(o.isN64(e),"divisor","int64"),e.isZero())throw new Error("Cannot divide by zero.");if(t.isZero())return t;if(t.eq(e))return t.set(1);if(t.isSafe()&&e.isSafe()){const r=function(e){return e<0?-Math.floor(-e):Math.floor(e)}(t.toDouble()/e.toDouble());return t.set(r)}let r=!1;t.sign&&(t.hi<0?e.hi<0?(t=t.ineg(),e=e.neg()):(t=t.ineg(),r=!0):e.hi<0&&(e=e.neg(),r=!0));const i=t.toU64(),s=e.toU64();if(i.lt(s))return t.set(0);if(i.ushrn(1).lt(s))return t.set(r?-1:1);const n=new a,h=new a;let c=i.bitLength();for(;c--;)h.ishln(1),h.lo|=i.testn(c),h.gte(s)&&(h.isub(s),n.setn(c,1));return t.hi=n.hi,t.lo=n.lo,r&&t.ineg(),t},o.prototype.idivn=function(e){return f(l(e),"divisor","number"),this.idiv(this._small(e))},o.prototype.div=function(e){return this.clone().idiv(e)},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.imod=function(e){const t=this;if(f(o.isN64(e),"divisor","int64"),e.isZero())throw new Error("Cannot divide by zero.");if(t.isZero())return t;if(t.eq(e))return t.set(0);if(t.isSafe()&&e.isSafe()){const r=t.toDouble()%e.toDouble();return t.set(r)}return t.isub(t.div(e).imul(e))},o.prototype.imodn=function(e){return f(l(e),"divisor","number"),this.imod(this._small(e))},o.prototype.mod=function(e){return this.clone().imod(e)},o.prototype.modn=function(e){return this.clone().imodn(e)},o.prototype.ipow=function(e){return f(o.isN64(e),"exponent","int64"),this.ipown(e.lo)},o.prototype.ipown=function(e){if(f(l(e),"exponent","number"),this.isZero())return this;const t=this.clone(),r=this;let i=e>>>0;for(r.set(1);i>0;)1&i&&r.imul(t),i>>>=1,t.imul(t);return r},o.prototype.pow=function(e){return this.clone().ipow(e)},o.prototype.pown=function(e){return this.clone().ipown(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this)},o.prototype.iand=function(e){return f(o.isN64(e),"operand","int64"),this.hi&=e.hi,this.lo&=e.lo,this},o.prototype.iandn=function(e){return f(l(e),"operand","number"),this.hi&=e>>31&-this.sign,this.lo&=0|e,this},o.prototype.and=function(e){return this.clone().iand(e)},o.prototype.andn=function(e){return this.clone().iandn(e)},o.prototype.ior=function(e){return f(o.isN64(e),"operand","int64"),this.hi|=e.hi,this.lo|=e.lo,this},o.prototype.iorn=function(e){return f(l(e),"operand","number"),this.hi|=e>>31&-this.sign,this.lo|=0|e,this},o.prototype.or=function(e){return this.clone().ior(e)},o.prototype.orn=function(e){return this.clone().iorn(e)},o.prototype.ixor=function(e){return f(o.isN64(e),"operand","int64"),this.hi^=e.hi,this.lo^=e.lo,this},o.prototype.ixorn=function(e){return f(l(e),"operand","number"),this.hi^=e>>31&-this.sign,this.lo^=0|e,this},o.prototype.xor=function(e){return this.clone().ixor(e)},o.prototype.xorn=function(e){return this.clone().ixorn(e)},o.prototype.inot=function(){return this.hi=~this.hi,this.lo=~this.lo,this},o.prototype.not=function(){return this.clone().inot()},o.prototype.ishl=function(e){return f(o.isN64(e),"bits","int64"),this.ishln(e.lo)},o.prototype.ishln=function(e){if(f(l(e),"bits","number"),0===(e&=63))return this;let t=this.hi,r=this.lo;return e<32?(t<<=e,t|=r>>>32-e,r<<=e):(t=r<<e-32,r=0),this.hi=t,this.lo=r,this},o.prototype.shl=function(e){return this.clone().ishl(e)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ishr=function(e){return f(o.isN64(e),"bits","int64"),this.ishrn(e.lo)},o.prototype.ishrn=function(e){if(!this.sign)return this.iushrn(e);if(f(l(e),"bits","number"),0===(e&=63))return this;let t=this.hi,r=this.lo;return e<32?(r>>>=e,r|=t<<32-e,t>>=e):(r=t>>e-32,t>>=31),this.hi=t,this.lo=r,this},o.prototype.shr=function(e){return this.clone().ishr(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.iushr=function(e){return f(o.isN64(e),"bits","int64"),this.iushrn(e.lo)},o.prototype.iushrn=function(e){if(f(l(e),"bits","number"),0===(e&=63))return this;let t=this.hi,r=this.lo;return e<32?(r>>>=e,r|=t<<32-e,t>>>=e):(r=t>>>e-32,t=0),this.hi=0|t,this.lo=0|r,this},o.prototype.ushr=function(e){return this.clone().iushr(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.setn=function(e,t){return f(l(e),"bit","number"),(e&=63)<32?t?this.lo|=1<<e:this.lo&=~(1<<e):t?this.hi|=1<<e-32:this.hi&=~(1<<e-32),this},o.prototype.testn=function(e){return f(l(e),"bit","number"),(e&=63)<32?this.lo>>>e&1:this.hi>>>e-32&1},o.prototype.setb=function(e,t){return f(l(e),"pos","number"),f(l(t),"ch","number"),t&=255,(e&=7)<4?(this.lo&=~(255<<8*e),this.lo|=t<<8*e):(this.hi&=~(255<<8*(e-4)),this.hi|=t<<8*(e-4)),this},o.prototype.orb=function(e,t){return f(l(e),"pos","number"),f(l(t),"ch","number"),t&=255,(e&=7)<4?this.lo|=t<<8*e:this.hi|=t<<8*(e-4),this},o.prototype.getb=function(e){return f(l(e),"pos","number"),(e&=7)<4?this.lo>>8*e&255:this.hi>>8*(e-4)&255},o.prototype.imaskn=function(e){return f(l(e),"bit","number"),(e&=63)<32?(this.hi=0,this.lo&=(1<<e)-1):(this.hi&=(1<<e-32)-1,this.lo&=4294967295),this},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.andln=function(e){return f(l(e),"operand","number"),this.lo&e},o.prototype.ineg=function(){let e=~this.hi,t=~this.lo;return-1===t?(t=0,e+=1,e|=0):t+=1,this.hi=e,this.lo=t,this},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.iabs=function(){return this.isNeg()&&this.ineg(),this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._cmp=function(e,t){const r=this;let i=r.hi,s=r.lo;if(i===e&&s===t)return 0;let n=!1;if(r.sign){const t=i<0,r=e<0;if(t&&!r)return-1;if(!t&&r)return 1;n=t}return n||(i>>>=0,e>>>=0),i<e?-1:i>e?1:(s>>>=0)<(t>>>=0)?-1:1},o.prototype.cmp=function(e){return f(o.isN64(e),"value","int64"),this._cmp(e.hi,e.lo)},o.prototype.cmpn=function(e){return f(l(e),"value","number"),this._cmp(e>>31&-this.sign,0|e)},o.prototype.eq=function(e){return f(o.isN64(e),"value","int64"),this.hi===e.hi&&this.lo===e.lo},o.prototype.eqn=function(e){return f(l(e),"value","number"),this.hi===(e>>31&-this.sign)&&this.lo===(0|e)},o.prototype.gt=function(e){return this.cmp(e)>0},o.prototype.gtn=function(e){return this.cmpn(e)>0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.lt=function(e){return this.cmp(e)<0},o.prototype.ltn=function(e){return this.cmpn(e)<0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.isZero=function(){return 0===this.hi&&0===this.lo},o.prototype.isNeg=function(){return 1===this.sign&&this.hi<0},o.prototype.isOdd=function(){return 1==(1&this.lo)},o.prototype.isEven=function(){return 0==(1&this.lo)},o.prototype.clone=function(){const e=new this.constructor;return e.hi=this.hi,e.lo=this.lo,e},o.prototype.inject=function(e){return f(o.isN64(e),"value","int64"),this.hi=e.hi,this.lo=e.lo,this},o.prototype.set=function(e){f(function(e){return Number.isSafeInteger?Number.isSafeInteger(e):l(e)&&Math.floor(e)===e&&e>=-9007199254740991&&e<=9007199254740991}(e),"number","integer");let t=!1;return e<0&&(e=-e,t=!0),this.hi=e*(1/4294967296)|0,this.lo=0|e,t&&this.ineg(),this},o.prototype.join=function(e,t){return f(l(e),"hi","number"),f(l(t),"lo","number"),this.hi=0|e,this.lo=0|t,this},o.prototype._small=function(e){const t=new this.constructor;return t.hi=e>>31&-this.sign,t.lo=0|e,t},o.prototype.bitLength=function(){let e=this;return this.isNeg()&&(e=this.neg()),0===e.hi?u(e.lo):u(e.hi)+32},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.isSafe=function(){let e=this.hi;return this.isNeg()&&(e=~e,0===this.lo&&(e+=1)),0==(4292870144&e)},o.prototype.inspect=function(){let e="I64";return this.sign||(e="U64"),`<${e}: ${this.toString(10)}>`},o.prototype.readLE=function(e,t){return f(e&&"number"==typeof e.length,"data","arraylike"),f(t>>0===t,"offset","integer"),f(t+8<=e.length,"offset","valid offset"),this.lo=b(e,t),this.hi=b(e,t+4),t+8},o.prototype.readBE=function(e,t){return f(e&&"number"==typeof e.length,"data","arraylike"),f(t>>0===t,"offset","integer"),f(t+8<=e.length,"offset","valid offset"),this.hi=g(e,t),this.lo=g(e,t+4),t+8},o.prototype.readRaw=function(e,t){return this.readLE(e,t)},o.prototype.writeLE=function(e,t){return f(e&&"number"==typeof e.length,"data","arraylike"),f(t>>0===t,"offset","integer"),f(t+8<=e.length,"offset","valid offset"),m(e,this.lo,t),m(e,this.hi,t+4),t+8},o.prototype.writeBE=function(e,t){return f(e&&"number"==typeof e.length,"data","arraylike"),f(t>>0===t,"offset","integer"),f(t+8<=e.length,"offset","valid offset"),_(e,this.hi,t),_(e,this.lo,t+4),t+8},o.prototype.writeRaw=function(e,t){return this.writeLE(e,t)},o.prototype.toU64=function(){const e=new a;return e.hi=this.hi,e.lo=this.lo,e},o.prototype.toI64=function(){const e=new h;return e.hi=this.hi,e.lo=this.lo,e},o.prototype.toNumber=function(){if(!this.isSafe())throw new Error("Number exceeds 53 bits.");return this.toDouble()},o.prototype.toDouble=function(){let e=this.hi;return this.sign||(e>>>=0),4294967296*e+(this.lo>>>0)},o.prototype.toInt=function(){return this.sign?this.lo:this.lo>>>0},o.prototype.toBool=function(){return!this.isZero()},o.prototype.toBits=function(){return[this.hi,this.lo]},o.prototype.toObject=function(){return{hi:this.hi,lo:this.lo}},o.prototype.toString=function(e,t){if(e=c(e),null==t&&(t=0),f(e>>>0===e,"base","integer"),f(t>>>0===t,"pad","integer"),e<2||e>16)throw new Error("Base ranges between 2 and 16.");if(t>64)throw new Error("Maximum padding is 64 characters.");let r=this,i=!1;r.isNeg()&&(r=r.neg(),i=!0);let s=r.hi>>>0,n=r.lo>>>0,o="";do{const t=s%e;s-=t,s/=e;const r=(n+=4294967296*t)%e;n-=r,n/=e;let i=r;i+=i<10?48:87,o=String.fromCharCode(i)+o}while(n>0||s>0);for(;o.length<t;)o="0"+o;return i&&(o="-"+o),o},o.prototype.toJSON=function(){return this.toString(16,16)},o.prototype.toBN=function(e){const t=this.isNeg();let r=this.hi,i=this.lo;t&&(r=~r,-1===(i=~i)?(i=0,r+=1,r|=0):i+=1),i>>>=0;const s=new e(r>>>=0);return s.ishln(32),s.iadd(new e(i)),t&&s.ineg(),s},o.prototype.toLE=function(e){f("function"==typeof e,"ArrayLike","constructor");const t=p(e,8);return this.writeLE(t,0),t},o.prototype.toBE=function(e){f("function"==typeof e,"ArrayLike","constructor");const t=p(e,8);return this.writeBE(t,0),t},o.prototype.toRaw=function(e){return this.toLE(e)},o.prototype.fromNumber=function(e){return this.set(e)},o.prototype.fromInt=function(e){return f(l(e),"integer","number"),this.join(e>>31&-this.sign,e)},o.prototype.fromBool=function(e){return f("boolean"==typeof e,"value","boolean"),this.hi=0,this.lo=e?1:0,this},o.prototype.fromBits=function(e,t){return this.join(e,t)},o.prototype.fromObject=function(e){return f(e&&"object"==typeof e,"number","object"),this.fromBits(e.hi,e.lo)},o.prototype.fromString=function(e,t){if(t=c(t),f("string"==typeof e,"string","string"),f(t>>>0===t,"base","integer"),t<2||t>16)throw new Error("Base ranges between 2 and 16.");let r=!1,i=0;if(e.length>0&&"-"===e[0]&&(i+=1,r=!0),e.length===i||e.length>i+64)throw new Error("Invalid string (bad length).");let s=0,n=0;for(;i<e.length;i++){let r=e.charCodeAt(i);if(r>=48&&r<=57?r-=48:r>=65&&r<=90?r-=55:r>=97&&r<=122?r-=87:r=t,r>=t)throw new Error("Invalid string (parse error).");if(n*=t,s*=t,(n+=r)>4294967295&&(s+=(n-(r=n%4294967296))/4294967296,n=r),s>4294967295)throw new Error("Invalid string (overflow).")}return this.hi=0|s,this.lo=0|n,r&&this.ineg(),this},o.prototype.fromJSON=function(e){return this.fromString(e,16)},o.prototype.fromBN=function(e){f(e&&d(e.words),"number","big number");const t=this,r=e.clone(),i=r.isNeg();if(t.sign&&r.testn(63))throw new Error("Big number overflow.");let s=0;for(;!r.isZero();){if(8===s)throw new Error("Big number overflow.");t.orb(s,r.andln(255)),r.iushrn(8),s++}return i&&t.ineg(),t},o.prototype.fromLE=function(e){return this.readLE(e,0),this},o.prototype.fromBE=function(e){return this.readBE(e,0),this},o.prototype.fromRaw=function(e){return this.fromLE(e)},o.prototype.from=function(e,t){if(null==e)return this;if("number"==typeof e)return"number"==typeof t?this.fromBits(e,t):this.fromNumber(e);if("string"==typeof e)return this.fromString(e,t);if("object"==typeof e)return d(e.words)?this.fromBN(e):"number"==typeof e.length?this.fromRaw(e):this.fromObject(e);if("boolean"==typeof e)return this.fromBool(e);throw new TypeError("Non-numeric object passed to N64.")},o.min=function(e,t){return e.cmp(t)<0?e:t},o.max=function(e,t){return e.cmp(t)>0?e:t},o.random=function(){const e=new this;return e.hi=4294967296*Math.random()|0,e.lo=4294967296*Math.random()|0,e},o.pow=function(e,t){return(new this).fromInt(e).ipown(t)},o.shift=function(e,t){return(new this).fromInt(e).ishln(t)},o.readLE=function(e,t){const r=new this;return r.readLE(e,t),r},o.readBE=function(e,t){const r=new this;return r.readBE(e,t),r},o.readRaw=function(e,t){const r=new this;return r.readRaw(e,t),r},o.fromNumber=function(e){return(new this).fromNumber(e)},o.fromInt=function(e){return(new this).fromInt(e)},o.fromBool=function(e){return(new this).fromBool(e)},o.fromBits=function(e,t){return(new this).fromBits(e,t)},o.fromObject=function(e){return(new this).fromObject(e)},o.fromString=function(e,t){return(new this).fromString(e,t)},o.fromJSON=function(e){return(new this).fromJSON(e)},o.fromBN=function(e){return(new this).fromBN(e)},o.fromLE=function(e){return(new this).fromLE(e)},o.fromBE=function(e){return(new this).fromBE(e)},o.fromRaw=function(e){return(new this).fromRaw(e)},o.from=function(e,t){return(new this).from(e,t)},o.isN64=function(e){return e instanceof o},o.isU64=function(e){return e instanceof a},o.isI64=function(e){return e instanceof h},a.__proto__=o,a.prototype.__proto__=o.prototype,a.ULONG_MIN=0,a.ULONG_MAX=4294967295,a.UINT32_MIN=a(0,0),a.UINT32_MAX=a(0,4294967295),a.UINT64_MIN=a(0,0),a.UINT64_MAX=a(4294967295,4294967295),h.__proto__=o,h.prototype.__proto__=o.prototype,h.LONG_MIN=-2147483648,h.LONG_MAX=2147483647,h.INT32_MIN=h(4294967295,2147483648),h.INT32_MAX=h(0,2147483647),h.INT64_MIN=h(2147483648,0),h.INT64_MAX=h(2147483647,4294967295),e.N64=o,e.U64=a,e.I64=h}],["bcoin","/lib/script/scripterror.js",function(e,t,r,i,s,n){"use strict";class o extends Error{constructor(e,t,r){super(),this.type="ScriptError",this.code=e,this.message=e,this.op=-1,this.ip=-1,"string"==typeof t?this.message=t:t&&(this.message=`${e} (op=${t.toSymbol()}, ip=${r})`,this.op=t.value,this.ip=r),Error.captureStackTrace&&Error.captureStackTrace(this,o)}}r.exports=o}],["bcoin","/lib/script/opcode.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(99,r),c=__browser_require__(98,r),u=c.opcodes,f=[];let l=null;class d{constructor(e,t){this.value=e||0,this.data=t||null}isMinimal(){if(!this.data)return!0;if(1===this.data.length){if(129===this.data[0])return!1;if(this.data[0]>=1&&this.data[0]<=16)return!1}return this.data.length<=75?this.value===this.data.length:this.data.length<=255?this.value===u.OP_PUSHDATA1:this.data.length<=65535?this.value===u.OP_PUSHDATA2:(o(this.value===u.OP_PUSHDATA4),!0)}isDisabled(){switch(this.value){case u.OP_CAT:case u.OP_SUBSTR:case u.OP_LEFT:case u.OP_RIGHT:case u.OP_INVERT:case u.OP_AND:case u.OP_OR:case u.OP_XOR:case u.OP_2MUL:case u.OP_2DIV:case u.OP_MUL:case u.OP_DIV:case u.OP_MOD:case u.OP_LSHIFT:case u.OP_RSHIFT:return!0}return!1}isBranch(){return this.value>=u.OP_IF&&this.value<=u.OP_ENDIF}equals(e){return o(d.isOpcode(e)),this.value===e.value&&(this.data?(o(e.data),this.data.equals(e.data)):(o(!e.data),!0))}toOp(){return this.value}toData(){return this.data}toLength(){return this.data?this.data.length:-1}toPush(){return this.value===u.OP_0?c.small[1]:this.value===u.OP_1NEGATE?c.small[0]:this.value>=u.OP_1&&this.value<=u.OP_16?c.small[this.value-80+1]:this.toData()}toString(e){const t=this.toPush();return t?t.toString(e||"utf8"):null}toSmall(){return this.value===u.OP_0?0:this.value>=u.OP_1&&this.value<=u.OP_16?this.value-80:-1}toNum(e,t){return this.value===u.OP_0?h.fromInt(0):this.value===u.OP_1NEGATE?h.fromInt(-1):this.value>=u.OP_1&&this.value<=u.OP_16?h.fromInt(this.value-80):this.data?h.decode(this.data,e,t):null}toInt(e,t){const r=this.toNum(e,t);return r?r.getInt():-1}toBool(){const e=this.toSmall();return-1!==e&&1===e}toSymbol(){if(-1===this.value)return"OP_INVALIDOPCODE";const e=c.opcodesByVal[this.value];return e||`0x${p(this.value)}`}getSize(){if(!this.data)return 1;switch(this.value){case u.OP_PUSHDATA1:return 2+this.data.length;case u.OP_PUSHDATA2:return 3+this.data.length;case u.OP_PUSHDATA4:return 5+this.data.length;default:return 1+this.data.length}}toWriter(e){if(-1===this.value)throw new Error("Cannot reserialize a parse error.");if(!this.data)return e.writeU8(this.value),e;switch(this.value){case u.OP_PUSHDATA1:e.writeU8(this.value),e.writeU8(this.data.length),e.writeBytes(this.data);break;case u.OP_PUSHDATA2:e.writeU8(this.value),e.writeU16(this.data.length),e.writeBytes(this.data);break;case u.OP_PUSHDATA4:e.writeU8(this.value),e.writeU32(this.data.length),e.writeBytes(this.data);break;default:o(this.value===this.data.length),e.writeU8(this.value),e.writeBytes(this.data)}return e}toRaw(){const e=this.getSize();return this.toWriter(a.write(e)).render()}toFormat(){if(-1===this.value)return"0x01";if(this.data){if(this.data.length<=4){const e=this.toNum();if(this.equals(d.fromNum(e)))return e.toString(10)}const e=c.opcodesByVal[this.value],t=this.data.toString("hex");if(!e){return`0x${p(this.value)} 0x${t}`}let r=this.data.length.toString(16);for(;r.length%2!=0;)r="0"+r;return`${e} 0x${r} 0x${t}`}const e=c.opcodesByVal[this.value];return e||`0x${p(this.value)}`}toASM(e){return-1===this.value?"[error]":this.data?c.toASM(this.data,e):c.opcodesByVal[this.value]||"OP_UNKNOWN"}static fromOp(e){o("number"==typeof e);const t=f[e];return o(t,"Bad opcode."),t}static fromData(e){if(o(null!=e&&!0===e._isBuffer),1===e.length){if(129===e[0])return this.fromOp(u.OP_1NEGATE);if(e[0]>=1&&e[0]<=16)return this.fromOp(e[0]+80)}return this.fromPush(e)}static fromPush(e){if(o(null!=e&&!0===e._isBuffer),0===e.length)return this.fromOp(u.OP_0);if(e.length<=75)return new this(e.length,e);if(e.length<=255)return new this(u.OP_PUSHDATA1,e);if(e.length<=65535)return new this(u.OP_PUSHDATA2,e);if(e.length<=4294967295)return new this(u.OP_PUSHDATA4,e);throw new Error("Pushdata size too large.")}static fromString(e,t){o("string"==typeof e);const r=Buffer.from(e,t||"utf8");return this.fromData(r)}static fromSmall(e){return o((255&e)===e&&e>=0&&e<=16),this.fromOp(0===e?0:e+80)}static fromNum(e){return o(h.isScriptNum(e)),this.fromData(e.encode())}static fromInt(e){return o(Number.isSafeInteger(e)),0===e?this.fromOp(u.OP_0):-1===e?this.fromOp(u.OP_1NEGATE):e>=1&&e<=16?this.fromOp(e+80):this.fromNum(h.fromNumber(e))}static fromBool(e){return o("boolean"==typeof e),this.fromSmall(e?1:0)}static fromSymbol(e){o("string"==typeof e),o(e.length>0),32&e.charCodeAt(0)&&(e=e.toUpperCase()),/^OP_/.test(e)||(e=`OP_${e}`);const t=c.opcodes[e];if(null!=t)return this.fromOp(t);o(/^OP_0X/.test(e),"Unknown opcode."),o(7===e.length,"Unknown opcode.");const r=parseInt(e.substring(5),16);return o((255&r)===r,"Unknown opcode."),this.fromOp(r)}static fromReader(e){const t=e.readU8(),r=f[t];if(r)return r;switch(t){case u.OP_PUSHDATA1:{if(e.left()<1)return l;const r=e.readU8();return e.left()<r?(e.seek(e.left()),l):new this(t,e.readBytes(r))}case u.OP_PUSHDATA2:{if(e.left()<2)return e.seek(e.left()),l;const r=e.readU16();return e.left()<r?(e.seek(e.left()),l):new this(t,e.readBytes(r))}case u.OP_PUSHDATA4:{if(e.left()<4)return e.seek(e.left()),l;const r=e.readU32();return e.left()<r?(e.seek(e.left()),l):new this(t,e.readBytes(r))}default:if(e.left()<t)return e.seek(e.left()),l;return new this(t,e.readBytes(t))}}static fromRaw(e){return this.fromReader(a.read(e))}static isOpcode(e){return e instanceof d}}function p(e){return e<=15?"0"+e.toString(16):e.toString(16)}l=Object.freeze(new d(-1));for(let e=0;e<=255;e++){if(e>=1&&e<=78){f.push(null);continue}const t=new d(e);f.push(Object.freeze(t))}r.exports=d}],["bcoin","/lib/script/stack.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(98,r),h=__browser_require__(99,r),{inspectSymbol:c}=__browser_require__(21,r);class u{constructor(e){this.items=e||[]}get length(){return this.items.length}set length(e){this.items.length=e}[Symbol.iterator](){return this.items[Symbol.iterator]()}values(){return this.items.values()}entries(){return this.items.entries()}[c](){return`<Stack: ${this.toString()}>`}toString(){const e=[];for(const t of this.items)e.push(t.toString("hex"));return e.join(" ")}toASM(e){const t=[];for(const r of this.items)t.push(a.toASM(r,e));return t.join(" ")}clone(){return new this.constructor(this.items.slice())}clear(){return this.items.length=0,this}get(e){return e<0&&(e+=this.items.length),e<0||e>=this.items.length?null:this.items[e]}pop(){return this.items.pop()||null}shift(){return this.items.shift()||null}remove(e){if(e<0&&(e+=this.items.length),e<0||e>=this.items.length)return null;const t=this.items.splice(e,1);return 0===t.length?null:t[0]}set(e,t){return e<0&&(e+=this.items.length),o(null!=t&&!0===t._isBuffer),o(e>=0&&e<=this.items.length),this.items[e]=t,this}push(e){return o(null!=e&&!0===e._isBuffer),this.items.push(e),this}unshift(e){return o(null!=e&&!0===e._isBuffer),this.items.unshift(e),this}insert(e,t){return e<0&&(e+=this.items.length),o(null!=t&&!0===t._isBuffer),o(e>=0&&e<=this.items.length),this.items.splice(e,0,t),this}erase(e,t){e<0&&(e=this.items.length+e),t<0&&(t=this.items.length+t),this.items.splice(e,t-e)}swap(e,t){e<0&&(e=this.items.length+e),t<0&&(t=this.items.length+t);const r=this.items[e],i=this.items[t];this.items[e]=i,this.items[t]=r}getData(e){return this.get(e)}popData(){return this.pop()}shiftData(){return this.shift()}removeData(e){return this.remove(e)}setData(e,t){return this.set(e,t)}pushData(e){return this.push(e)}unshiftData(e){return this.unshift(e)}insertData(e,t){return this.insert(e,t)}getLength(e){const t=this.get(e);return t?t.length:-1}getString(e,t){const r=this.get(e);return r?u.toString(r,t):null}popString(e){const t=this.pop();return t?u.toString(t,e):null}shiftString(e){const t=this.shift();return t?u.toString(t,e):null}removeString(e,t){const r=this.remove(e);return r?u.toString(r,t):null}setString(e,t,r){return this.set(e,u.fromString(t,r))}pushString(e,t){return this.push(u.fromString(e,t))}unshiftString(e,t){return this.unshift(u.fromString(e,t))}insertString(e,t,r){return this.insert(e,u.fromString(t,r))}getNum(e,t,r){const i=this.get(e);return i?u.toNum(i,t,r):null}popNum(e,t){const r=this.pop();return r?u.toNum(r,e,t):null}shiftNum(e,t){const r=this.shift();return r?u.toNum(r,e,t):null}removeNum(e,t,r){const i=this.remove(e);return i?u.toNum(i,t,r):null}setNum(e,t){return this.set(e,u.fromNum(t))}pushNum(e){return this.push(u.fromNum(e))}unshiftNum(e){return this.unshift(u.fromNum(e))}insertNum(e,t){return this.insert(e,u.fromNum(t))}getInt(e,t,r){const i=this.get(e);return i?u.toInt(i,t,r):-1}popInt(e,t){const r=this.pop();return r?u.toInt(r,e,t):-1}shiftInt(e,t){const r=this.shift();return r?u.toInt(r,e,t):-1}removeInt(e,t,r){const i=this.remove(e);return i?u.toInt(i,t,r):-1}setInt(e,t){return this.set(e,u.fromInt(t))}pushInt(e){return this.push(u.fromInt(e))}unshiftInt(e){return this.unshift(u.fromInt(e))}insertInt(e,t){return this.insert(e,u.fromInt(t))}getBool(e){const t=this.get(e);return!!t&&u.toBool(t)}popBool(){const e=this.pop();return!!e&&u.toBool(e)}shiftBool(){const e=this.shift();return!!e&&u.toBool(e)}removeBool(e){const t=this.remove(e);return!!t&&u.toBool(t)}setBool(e,t){return this.set(e,u.fromBool(t))}pushBool(e){return this.push(u.fromBool(e))}unshiftBool(e){return this.unshift(u.fromBool(e))}insertBool(e,t){return this.insert(e,u.fromBool(t))}static isStack(e){return e instanceof u}static toString(e,t){return o(null!=e&&!0===e._isBuffer),e.toString(t||"utf8")}static fromString(e,t){return o("string"==typeof e),Buffer.from(e,t||"utf8")}static toNum(e,t,r){return h.decode(e,t,r)}static fromNum(e){return o(h.isScriptNum(e)),e.encode()}static toInt(e,t,r){return u.toNum(e,t,r).getInt()}static fromInt(e){if(o("number"==typeof e),e>=-1&&e<=16)return a.small[e+1];const t=h.fromNumber(e);return u.fromNum(t)}static toBool(e){o(null!=e&&!0===e._isBuffer);for(let t=0;t<e.length;t++)if(0!==e[t])return t!==e.length-1||128!==e[t];return!1}static fromBool(e){return o("boolean"==typeof e),u.fromInt(e?1:0)}}r.exports=u}],["bcoin","/lib/primitives/address.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(105,r),c=__browser_require__(107,r),u=__browser_require__(51,r),f=__browser_require__(94,r),l=__browser_require__(33,r),d=__browser_require__(14,r),p=__browser_require__(17,r),{inspectSymbol:b}=__browser_require__(21,r),g=Buffer.alloc(20,0);class m{constructor(e,t){this.type=m.types.PUBKEYHASH,this.version=-1,this.hash=g,e&&this.fromOptions(e,t)}fromOptions(e,t){if("string"==typeof e)return this.fromString(e,t);o(e);const{hash:r,type:i,version:s}=e;return this.fromHash(r,i,s)}static fromOptions(e,t){return(new this).fromOptions(e,t)}getHash(e){return"hex"===e?this.hash.toString("hex"):this.hash}isNull(){if(20===this.hash.length)return this.hash.equals(g);if(32===this.hash.length)return this.hash.equals(p.ZERO_HASH);for(let e=0;e<this.hash.length;e++)if(0!==this.hash[e])return!1;return!0}equals(e){return o(e instanceof m),this.type===e.type&&this.version===e.version&&this.hash.equals(e.hash)}getType(){return m.typesByVal[this.type].toLowerCase()}getPrefix(e){const t=(e=d.get(e)).addressPrefix;switch(this.type){case m.types.PUBKEYHASH:return t.pubkeyhash;case m.types.SCRIPTHASH:return t.scripthash;case m.types.WITNESS:if(20===this.hash.length)return t.witnesspubkeyhash;if(32===this.hash.length)return t.witnessscripthash}return-1}getSize(){let e=5+this.hash.length;return-1!==this.version&&(e+=2),e}toRaw(e){const t=this.getSize(),r=a.write(t),i=this.getPrefix(e);return o(-1!==i,"Not a valid address prefix."),r.writeU8(i),-1!==this.version&&(r.writeU8(this.version),r.writeU8(0)),r.writeBytes(this.hash),r.writeChecksum(l.digest),r.render()}toBase58(e){return h.encode(this.toRaw(e))}toBech32(e){const t=this.version,r=this.hash;o(-1!==t,"Cannot convert non-program address to bech32.");const i=(e=d.get(e)).addressPrefix.bech32;return c.encode(i,t,r)}fromString(e,t){if(o("string"==typeof e),o(e.length>0),o(e.length<=100),function(e){let t=!1,r=!1;for(let i=0;i<e.length;i++){const s=e.charCodeAt(i);if(!(s>=48&&s<=57)&&(32&s?(o(s>=97&&s<=122),t=!0):(o(s>=65&&s<=90),r=!0),t&&r))return!0}return!1}(e))return this.fromBase58(e,t);try{return this.fromBech32(e,t)}catch(r){return this.fromBase58(e,t)}}static fromString(e,t){return(new this).fromString(e,t)}toString(e){return-1!==this.version?this.toBech32(e):this.toBase58(e)}[b](){return"<Address:"+` type=${this.getType()}`+` version=${this.version}`+` str=${this.toString()}`+">"}fromRaw(e,t){const r=a.read(e,!0),i=r.readU8();t=d.fromAddress(i,t);const s=m.getType(i,t);let n=-1;if(s===m.types.WITNESS){if(e.length>38)throw new Error("Address is too long.");if(n=r.readU8(),0!==r.readU8())throw new Error("Address version padding is non-zero.")}else if(25!==e.length)throw new Error("Address is too long.");const o=r.readBytes(r.left()-4);return r.verifyChecksum(l.digest),this.fromHash(o,s,n)}static fromRaw(e,t){return(new this).fromRaw(e,t)}fromBase58(e,t){if(o("string"==typeof e),e.length>55)throw new Error("Address is too long.");return this.fromRaw(h.decode(e),t)}static fromBase58(e,t){return(new this).fromBase58(e,t)}fromBech32(e,t){const r=m.types.WITNESS;o("string"==typeof e);const[i,s,n]=c.decode(e);return d.fromBech32(i,t),this.fromHash(n,r,s)}static fromBech32(e,t){return(new this).fromBech32(e,t)}fromScript(e){const t=e.getPubkey();if(t)return this.hash=f.digest(t),this.type=m.types.PUBKEYHASH,this.version=-1,this;const r=e.getPubkeyhash();if(r)return this.hash=r,this.type=m.types.PUBKEYHASH,this.version=-1,this;const i=e.getScripthash();if(i)return this.hash=i,this.type=m.types.SCRIPTHASH,this.version=-1,this;const s=e.getProgram();return s&&!s.isMalformed()?(this.hash=s.data,this.type=m.types.WITNESS,this.version=s.version,this):e.isMultisig()?(this.hash=e.hash160(),this.type=m.types.SCRIPTHASH,this.version=-1,this):null}fromWitness(e){const[,t]=e.getPubkeyhashInput();if(t)return this.hash=f.digest(t),this.type=m.types.WITNESS,this.version=0,this;const r=e.getScripthashInput();return r?(this.hash=u.digest(r),this.type=m.types.WITNESS,this.version=0,this):null}fromInputScript(e){const[,t]=e.getPubkeyhashInput();if(t)return this.hash=f.digest(t),this.type=m.types.PUBKEYHASH,this.version=-1,this;const r=e.getScripthashInput();return r?(this.hash=f.digest(r),this.type=m.types.SCRIPTHASH,this.version=-1,this):null}static fromWitness(e){return(new this).fromWitness(e)}static fromInputScript(e){return(new this).fromInputScript(e)}static fromScript(e){return(new this).fromScript(e)}fromHash(e,t,r){return"string"==typeof t&&(t=m.types[t.toUpperCase()],o(null!=t,"Not a valid address type.")),null==t&&(t=m.types.PUBKEYHASH),null==r&&(r=-1),o(null!=e&&!0===e._isBuffer),o(t>>>0===t),o((0|r)===r),o(t>=m.types.PUBKEYHASH&&t<=m.types.WITNESS,"Not a valid address type."),-1===r?(o(t!==m.types.WITNESS,"Wrong version (witness)"),o(20===e.length,"Hash is the wrong size.")):(o(t===m.types.WITNESS,"Wrong version (non-witness)."),o(r>=0&&r<=16,"Bad program version."),0===r&&t===m.types.WITNESS&&o(20===e.length||32===e.length,"Witness program hash is the wrong size."),o(e.length>=2&&e.length<=40,"Hash is the wrong size.")),this.hash=e,this.type=t,this.version=r,this}static fromHash(e,t,r){return(new this).fromHash(e,t,r)}fromPubkeyhash(e){const t=m.types.PUBKEYHASH;return o(20===e.length,"P2PKH must be 20 bytes."),this.fromHash(e,t,-1)}static fromPubkeyhash(e){return(new this).fromPubkeyhash(e)}fromScripthash(e){const t=m.types.SCRIPTHASH;return o(e&&20===e.length,"P2SH must be 20 bytes."),this.fromHash(e,t,-1)}static fromScripthash(e){return(new this).fromScripthash(e)}fromWitnessPubkeyhash(e){const t=m.types.WITNESS;return o(e&&20===e.length,"P2WPKH must be 20 bytes."),this.fromHash(e,t,0)}static fromWitnessPubkeyhash(e){return(new this).fromWitnessPubkeyhash(e)}fromWitnessScripthash(e){const t=m.types.WITNESS;return o(e&&32===e.length,"P2WPKH must be 32 bytes."),this.fromHash(e,t,0)}static fromWitnessScripthash(e){return(new this).fromWitnessScripthash(e)}fromProgram(e,t){const r=m.types.WITNESS;return o(e>=0,"Bad version for witness program."),this.fromHash(t,r,e)}static fromProgram(e,t){return(new this).fromProgram(e,t)}isPubkeyhash(){return this.type===m.types.PUBKEYHASH}isScripthash(){return this.type===m.types.SCRIPTHASH}isWitnessPubkeyhash(){return 0===this.version&&20===this.hash.length}isWitnessScripthash(){return 0===this.version&&32===this.hash.length}isProgram(){return-1!==this.version}isUnknown(){return-1!==this.version&&(this.version>0||20!==this.hash.length&&32!==this.hash.length)}static getHash(e,t){if(!e)throw new Error("Object is not an address.");let r;if(null!=e&&!0===e._isBuffer){if(20!==e.length&&32!==e.length)throw new Error("Object is not an address.");r=e}else{if(!(e instanceof m))throw new Error("Object is not an address.");r=e.hash}return"hex"===t?r.toString("hex"):r}static getType(e,t){const r=t.addressPrefix;switch(e){case r.pubkeyhash:return m.types.PUBKEYHASH;case r.scripthash:return m.types.SCRIPTHASH;case r.witnesspubkeyhash:case r.witnessscripthash:return m.types.WITNESS;default:throw new Error("Unknown address prefix.")}}}m.types={PUBKEYHASH:0,SCRIPTHASH:1,WITNESS:2},m.typesByVal=["PUBKEYHASH","SCRIPTHASH","WITNESS"],r.exports=m}],["bcrypto","/lib/encoding/base58-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(106,r)}],["bcrypto","/lib/js/base58.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(35,r),a="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",h=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,-1,-1,-1,-1,-1,-1,-1,9,10,11,12,13,14,15,16,-1,17,18,19,20,21,-1,22,23,24,25,26,27,28,29,30,31,32,-1,-1,-1,-1,-1,-1,33,34,35,36,37,38,39,40,41,42,43,-1,44,45,46,47,48,49,50,51,52,53,54,55,56,57,-1,-1,-1,-1,-1];e.native=0,e.encode=function(e){o(null!=e&&!0===e._isBuffer);let t=0,r=0;for(;r<e.length&&0===e[r];r++)t+=1;const i=Buffer.allocUnsafe(1+(138*e.length/100|0));i.fill(0);let s=0;for(;r<e.length;r++){let t=e[r],n=0;for(let e=i.length-1;e>=0&&!(0===t&&n>=s);e--,n++)t+=256*i[e],i[e]=t%58,t=t/58|0;o(0===t),s=n}for(r=i.length-s;r<i.length&&0===i[r];)r+=1;let n="";for(let e=0;e<t;e++)n+="1";for(;r<i.length;r++)n+=a[i[r]];return n},e.decode=function(e){o("string"==typeof e);let t=0,r=0;for(;r<e.length&&"1"===e[r];r++)t+=1;const i=Buffer.allocUnsafe(1+(733*e.length/1e3|0));i.fill(0);let s=0;for(;r<e.length;r++){const t=e.charCodeAt(r),n=65408&t?-1:h[t];if(-1===n)throw new Error("Non-base58 character.");let a=n,c=0;for(let e=i.length-1;e>=0&&!(0===a&&c>=s);e--,c++)a+=58*i[e],i[e]=255&a,a>>>=8;o(0===a),s=c}for(r=0;r<i.length&&0===i[r];)r+=1;const n=Buffer.allocUnsafe(t+(i.length-r));let a;for(a=0;a<t;a++)n[a]=0;for(;r<i.length;)n[a++]=i[r++];return n},e.test=function(e){o("string"==typeof e);for(let t=0;t<e.length;t++){const r=e.charCodeAt(t);if(65408&r)return!1;if(-1===h[r])return!1}return!0}}],["bcrypto","/lib/encoding/bech32-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(108,r)}],["bcrypto","/lib/js/bech32.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(35,r),a=Buffer.allocUnsafe(66),h="qpzry9x8gf2tvdw0s3jn54khce6mua7l",c=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,15,-1,10,17,21,20,26,30,7,5,-1,-1,-1,-1,-1,-1,-1,29,-1,24,13,25,9,8,23,-1,18,22,31,27,19,-1,1,0,3,16,11,28,12,14,6,4,2,-1,-1,-1,-1,-1,-1,29,-1,24,13,25,9,8,23,-1,18,22,31,27,19,-1,1,0,3,16,11,28,12,14,6,4,2,-1,-1,-1,-1,-1];function u(e){const t=e>>>25;return(33554431&e)<<5^996825010&-(t>>>0&1)^642813549&-(t>>>1&1)^513874426&-(t>>>2&1)^1027748829&-(t>>>3&1)^705979059&-(t>>>4&1)}function f(e,t){o("string"==typeof e),o(null!=t&&!0===t._isBuffer);let r,i=1;for(r=0;r<e.length;r++){const t=e.charCodeAt(r);if(65280&t||t>>>5==0)throw new Error("Invalid bech32 character.");i=u(i)^t>>>5}if(r+7+t.length>90)throw new Error("Invalid bech32 data length.");i=u(i);let s="";for(let t=0;t<e.length;t++){const r=e.charCodeAt(t);i=u(i)^31&r,s+=e[t]}s+="1";for(let e=0;e<t.length;e++){const r=t[e];if(r>>>5!=0)throw new Error("Invalid bech32 value.");i=u(i)^r,s+=h[r]}for(let e=0;e<6;e++)i=u(i);i^=1;for(let e=0;e<6;e++)s+=h[i>>>5*(5-e)&31];return s}function l(e){if(o("string"==typeof e),e.length<8||e.length>90)throw new Error("Invalid bech32 string length.");let t=0;for(;t<e.length&&"1"!==e[e.length-1-t];)t+=1;const r=e.length-(1+t);if(1+t>=e.length||t<6)throw new Error("Invalid bech32 data length.");t-=6;const i=Buffer.allocUnsafe(t);let s,n=1,a=!1,h=!1,f="";for(let t=0;t<r;t++){let r=e.charCodeAt(t);if(r<33||r>126)throw new Error("Invalid bech32 character.");r>=97&&r<=122?a=!0:r>=65&&r<=90&&(h=!0,r=r-65+97),f+=String.fromCharCode(r),n=u(n)^r>>>5}for(n=u(n),s=0;s<r;s++)n=u(n)^31&e.charCodeAt(s);for(s+=1;s<e.length;){const t=e.charCodeAt(s),o=65408&t?-1:c[t];if(-1===o)throw new Error("Invalid bech32 character.");t>=97&&t<=122?a=!0:t>=65&&t<=90&&(h=!0),n=u(n)^o,s+6<e.length&&(i[s-(1+r)]=o),s+=1}if(a&&h)throw new Error("Invalid bech32 casing.");if(1!==n)throw new Error("Invalid bech32 checksum.");return[f,i.slice(0,t)]}function d(e,t,r,i,s,n,a){o(null!=e&&!0===e._isBuffer),o(t>>>0===t),o(null!=r&&!0===r._isBuffer),o(i>>>0===i),o((255&s)===s),o((255&n)===n),o("boolean"==typeof a),o(0!==s),o(0!==n);const h=(1<<n)-1;let c=0,u=0;for(;t<e.length;t++){const o=e[t];if(o>>>s!=0)throw new Error("Invalid bits.");for(c=c<<s|o,u+=s;u>=n;)u-=n,r[i++]=c>>>u&h}if(a)u&&(r[i++]=c<<n-u&h);else if(u>=s||c<<n-u&h)throw new Error("Invalid bits.");return o(i<=r.length),r.slice(0,i)}e.native=0,e.serialize=f,e.deserialize=l,e.is=function(e){o("string"==typeof e);try{l(e)}catch(e){return!1}return!0},e.convertBits=function(e,t,r,i){o(null!=e&&!0===e._isBuffer);const s=function(e,t,r,i){o(e>>>0===e),o((255&t)===t),o((255&r)===r),o("boolean"==typeof i),o(0!==t),o(0!==r);let s=(e*t+(r-1))/r;return s>>>=0,i&&(s+=1),s}(e.length,t,r,i);return d(e,0,Buffer.allocUnsafe(s),0,t,r,i)},e.encode=function(e,t,r){if(o("string"==typeof e),o((255&t)===t),o(null!=r&&!0===r._isBuffer),t<0||t>31)throw new Error("Invalid bech32 version.");if(r.length<2||r.length>40)throw new Error("Invalid bech32 data length.");const i=a;return i[0]=t,f(e,d(r,0,i,1,8,5,!0))},e.decode=function(e){const[t,r]=l(e);if(0===r.length||r.length>65)throw new Error("Invalid bech32 data length.");const i=r[0];if(i>31)throw new Error("Invalid bech32 version.");const s=d(r,1,r,0,5,8,!1);if(s.length<2||s.length>40)throw new Error("Invalid bech32 data length.");return[t,i,s]},e.test=function(e){let t;o("string"==typeof e);try{[,t]=l(e)}catch(e){return!1}return!(0===t.length||t.length>65||t[0]>31)}}],["bcoin","/lib/primitives/input.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(14,r),c=__browser_require__(89,r),u=__browser_require__(110,r),f=__browser_require__(111,r),{inspectSymbol:l}=__browser_require__(21,r);class d{constructor(e){this.prevout=new f,this.script=new c,this.sequence=4294967295,this.witness=new u,e&&this.fromOptions(e)}fromOptions(e){return o(e,"Input data is required."),this.prevout.fromOptions(e.prevout),e.script&&this.script.fromOptions(e.script),null!=e.sequence&&(o(e.sequence>>>0===e.sequence,"Sequence must be a uint32."),this.sequence=e.sequence),e.witness&&this.witness.fromOptions(e.witness),this}static fromOptions(e){return(new this).fromOptions(e)}clone(){const e=new this.constructor;return e.prevout=this.prevout,e.script.inject(this.script),e.sequence=this.sequence,e.witness.inject(this.witness),e}equals(e){return o(d.isInput(e)),this.prevout.equals(e.prevout)}compare(e){return o(d.isInput(e)),this.prevout.compare(e.prevout)}getType(e){if(this.isCoinbase())return"coinbase";if(e)return e.getType();let t;return t=this.witness.items.length>0?this.witness.getInputType():this.script.getInputType(),c.typesByVal[t].toLowerCase()}getRedeem(e){if(this.isCoinbase())return null;if(!e)return this.witness.isScripthashInput()?this.witness.getRedeem():this.script.isScripthashInput()?this.script.getRedeem():null;let t=e.script,r=null;return t.isScripthash()&&(r=t=this.script.getRedeem()),t&&t.isWitnessScripthash()&&(r=t=this.witness.getRedeem()),r}getSubtype(e){if(this.isCoinbase())return null;const t=this.getRedeem(e);if(!t)return null;const r=t.getType();return c.typesByVal[r].toLowerCase()}getAddress(e){return this.isCoinbase()?null:e?e.getAddress():this.script.code.length>0?this.script.getInputAddress():this.witness.items.length>0?this.witness.getInputAddress():null}getHash(e,t){const r=this.getAddress(e);return r?r.getHash(t):null}isFinal(){return 4294967295===this.sequence}isRBF(){return this.sequence<4294967294}isCoinbase(){return this.prevout.isNull()}[l](){return this.format()}format(e){return{type:this.getType(e),subtype:this.getSubtype(e),address:this.getAddress(e),script:this.script,witness:this.witness,redeem:this.getRedeem(e),sequence:this.sequence,prevout:this.prevout,coin:e||null}}toJSON(e,t){return this.getJSON()}getJSON(e,t){let r;return e=h.get(e),t||(r=this.getAddress())&&(r=r.toString(e)),{prevout:this.prevout.toJSON(),script:this.script.toJSON(),witness:this.witness.toJSON(),sequence:this.sequence,address:r,coin:t?t.getJSON(e,!0):undefined}}fromJSON(e){return o(e,"Input data is required."),o(e.sequence>>>0===e.sequence,"Sequence must be a uint32."),this.prevout.fromJSON(e.prevout),this.script.fromJSON(e.script),this.witness.fromJSON(e.witness),this.sequence=e.sequence,this}static fromJSON(e){return(new this).fromJSON(e)}getSize(){return 40+this.script.getVarSize()}toRaw(){const e=this.getSize();return this.toWriter(a.write(e)).render()}toWriter(e){return this.prevout.toWriter(e),e.writeVarBytes(this.script.toRaw()),e.writeU32(this.sequence),e}fromReader(e){return this.prevout.fromReader(e),this.script.fromRaw(e.readVarBytes()),this.sequence=e.readU32(),this}fromRaw(e){return this.fromReader(a.read(e))}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}fromOutpoint(e){return o(null!=e.hash&&!0===e.hash._isBuffer),o("number"==typeof e.index),this.prevout.hash=e.hash,this.prevout.index=e.index,this}static fromOutpoint(e){return(new this).fromOutpoint(e)}fromCoin(e){return o(null!=e.hash&&!0===e.hash._isBuffer),o("number"==typeof e.index),this.prevout.hash=e.hash,this.prevout.index=e.index,this}static fromCoin(e){return(new this).fromCoin(e)}fromTX(e,t){return o(e),o("number"==typeof t),o(t>=0&&t<e.outputs.length),this.prevout.hash=e.hash(),this.prevout.index=t,this}static fromTX(e,t){return(new this).fromTX(e,t)}static isInput(e){return e instanceof d}}r.exports=d}],["bcoin","/lib/script/witness.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(89,r),c=__browser_require__(98,r),u=__browser_require__(104,r),f=__browser_require__(103,r),{encoding:l}=a,d=c.types,{inspectSymbol:p}=__browser_require__(21,r);class b extends f{constructor(e){super(),e&&this.fromOptions(e)}fromOptions(e){return o(e,"Witness data is required."),Array.isArray(e)?this.fromArray(e):e.items?this.fromArray(e.items):this}static fromOptions(e){return(new this).fromOptions(e)}toArray(){return this.items.slice()}fromArray(e){return o(Array.isArray(e)),this.items=e,this}static fromArray(e){return(new this).fromArray(e)}toItems(){return this.items.slice()}fromItems(e){return o(Array.isArray(e)),this.items=e,this}static fromItems(e){return(new this).fromItems(e)}toStack(){return new f(this.toArray())}fromStack(e){return this.fromArray(e.items)}static fromStack(e){return(new this).fromStack(e)}[p](){return`<Witness: ${this.toString()}>`}clone(){return(new this.constructor).inject(this)}inject(e){return this.items=e.items.slice(),this}compile(){return this}getInputType(){return this.isPubkeyhashInput()?d.WITNESSPUBKEYHASH:this.isScripthashInput()?d.WITNESSSCRIPTHASH:d.NONSTANDARD}getInputAddress(){return u.fromWitness(this)}isPubkeyInput(){return!1}getPubkeyInput(){return null}isPubkeyhashInput(){return 2===this.items.length&&c.isSignatureEncoding(this.items[0])&&c.isKeyEncoding(this.items[1])}getPubkeyhashInput(){return this.isPubkeyhashInput()?[this.items[0],this.items[1]]:[null,null]}isMultisigInput(){return!1}getMultisigInput(){return null}isScripthashInput(){return this.items.length>0&&!this.isPubkeyhashInput()}getScripthashInput(){return this.isScripthashInput()?this.items[this.items.length-1]:null}isUnknownInput(){return this.getInputType()===d.NONSTANDARD}test(e){for(const t of this.items)if(0!==t.length&&e.test(t))return!0;return!1}getRedeem(){if(0===this.items.length)return null;const e=this.items[this.items.length-1];return e?h.fromRaw(e):null}indexOf(e){for(let t=0;t<this.items.length;t++){if(this.items[t].equals(e))return t}return-1}getSize(){let e=0;for(const t of this.items)e+=l.sizeVarBytes(t);return e}getVarSize(){return l.sizeVarint(this.items.length)+this.getSize()}toWriter(e){e.writeVarint(this.items.length);for(const t of this.items)e.writeVarBytes(t);return e}toRaw(){const e=this.getVarSize();return this.toWriter(a.write(e)).render()}toJSON(){return this.toRaw().toString("hex")}fromJSON(e){return o("string"==typeof e,"Witness must be a string."),this.fromRaw(Buffer.from(e,"hex"))}static fromJSON(e){return(new this).fromJSON(e)}fromReader(e){const t=e.readVarint();for(let r=0;r<t;r++)this.items.push(e.readVarBytes());return this}fromRaw(e){return this.fromReader(a.read(e))}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}fromString(e){if(!Array.isArray(e)){if(o("string"==typeof e),0===(e=e.trim()).length)return this;e=e.split(/\s+/)}for(const t of e)this.items.push(Buffer.from(t,"hex"));return this}static fromString(e){return(new this).fromString(e)}static isWitness(e){return e instanceof b}}r.exports=b}],["bcoin","/lib/primitives/outpoint.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(20,r),c=__browser_require__(17,r),{inspectSymbol:u}=__browser_require__(21,r);class f{constructor(e,t){this.hash=c.ZERO_HASH,this.index=4294967295,null!=e&&(o(null!=e&&!0===e._isBuffer),o(t>>>0===t,"Index must be a uint32."),this.hash=e,this.index=t)}fromOptions(e){return o(e,"Outpoint data is required."),o(null!=e.hash&&!0===e.hash._isBuffer),o(e.index>>>0===e.index,"Index must be a uint32."),this.hash=e.hash,this.index=e.index,this}static fromOptions(e){return(new this).fromOptions(e)}clone(){const e=new this.constructor;return e.hash=this.hash,e.index=this.index,e}equals(e){return o(f.isOutpoint(e)),this.hash.equals(e.hash)&&this.index===e.index}compare(e){o(f.isOutpoint(e));const t=function(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){if(e[i]<t[i])return-1;if(e[i]>t[i])return 1}return e.length<t.length?-1:e.length>t.length?1:0}(this.txid(),e.txid());return 0!==t?t:this.index-e.index}isNull(){return 4294967295===this.index&&this.hash.equals(c.ZERO_HASH)}rhash(){return h.revHex(this.hash)}txid(){return this.rhash()}toKey(){return this.toRaw()}fromKey(e){return this.hash=e.slice(0,32),this.index=a.readU32(e,32),this}static fromKey(e){return(new this).fromKey(e)}toWriter(e){return e.writeHash(this.hash),e.writeU32(this.index),e}getSize(){return 36}toRaw(){return this.toWriter(a.write(36)).render()}fromReader(e){return this.hash=e.readHash(),this.index=e.readU32(),this}fromRaw(e){return this.fromReader(a.read(e))}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e){return(new this).fromRaw(e)}fromJSON(e){return o(e,"Outpoint data is required."),o("string"==typeof e.hash,"Hash must be a string."),o(e.index>>>0===e.index,"Index must be a uint32."),this.hash=h.fromRev(e.hash),this.index=e.index,this}toJSON(){return{hash:h.revHex(this.hash),index:this.index}}static fromJSON(e){return(new this).fromJSON(e)}fromTX(e,t){return o(e),o("number"==typeof t),o(t>=0),this.hash=e.hash(),this.index=t,this}static fromTX(e,t){return(new this).fromTX(e,t)}static toKey(e,t){return new f(e,t).toKey()}[u](){return`<Outpoint: ${this.rhash()}/${this.index}>`}static isOutpoint(e){return e instanceof f}}r.exports=f}],["bcoin","/lib/primitives/output.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(88,r),c=__browser_require__(14,r),u=__browser_require__(104,r),f=__browser_require__(89,r),l=__browser_require__(17,r),d=__browser_require__(96,r),{inspectSymbol:p}=__browser_require__(21,r);class b{constructor(e){this.value=0,this.script=new f,e&&this.fromOptions(e)}fromOptions(e){return o(e,"Output data is required."),e.value&&(o(Number.isSafeInteger(e.value)&&e.value>=0,"Value must be a uint64."),this.value=e.value),e.script&&this.script.fromOptions(e.script),e.address&&this.script.fromAddress(e.address),this}static fromOptions(e){return(new this).fromOptions(e)}fromScript(e,t){return"string"==typeof e&&(e=u.fromString(e)),e instanceof u&&(e=f.fromAddress(e)),o(e instanceof f,"Script must be a Script."),o(Number.isSafeInteger(t)&&t>=0,"Value must be a uint64."),this.script=e,this.value=t,this}static fromScript(e,t){return(new this).fromScript(e,t)}clone(){const e=new this.constructor;return e.value=this.value,e.script.inject(this.script),e}equals(e){return o(b.isOutput(e)),this.value===e.value&&this.script.equals(e.script)}compare(e){o(b.isOutput(e));const t=this.value-e.value;return 0!==t?t:this.script.compare(e.script)}getType(){return f.typesByVal[this.script.getType()].toLowerCase()}getAddress(){return this.script.getAddress()}getHash(e){const t=this.getAddress();return t?t.getHash(e):null}[p](){return{type:this.getType(),value:h.btc(this.value),script:this.script,address:this.getAddress()}}toJSON(){return this.getJSON()}getJSON(e){let t=this.getAddress();return e=c.get(e),t&&(t=t.toString(e)),{value:this.value,script:this.script.toJSON(),address:t}}getDustThreshold(e){const t=l.WITNESS_SCALE_FACTOR;if(this.script.isUnspendable())return 0;let r=this.getSize();return this.script.isProgram()?r+=37+(107/t|0)+4:r+=148,3*d.getMinFee(r,e)}getSize(){return 8+this.script.getVarSize()}isDust(e){return this.value<this.getDustThreshold(e)}fromJSON(e){return o(e,"Output data is required."),o(Number.isSafeInteger(e.value)&&e.value>=0,"Value must be a uint64."),this.value=e.value,this.script.fromJSON(e.script),this}static fromJSON(e){return(new this).fromJSON(e)}toWriter(e){return e.writeI64(this.value),e.writeVarBytes(this.script.toRaw()),e}toRaw(){const e=this.getSize();return this.toWriter(a.write(e)).render()}fromReader(e){return this.value=e.readI64(),this.script.fromRaw(e.readVarBytes()),this}fromRaw(e){return this.fromReader(a.read(e))}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}static isOutput(e){return e instanceof b}}r.exports=b}],["bcoin","/lib/primitives/invitem.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(24,r),a=__browser_require__(20,r);class h{constructor(e,t){this.type=e,this.hash=t}getSize(){return 36}toWriter(e){return e.writeU32(this.type),e.writeHash(this.hash),e}toRaw(){return this.toWriter(o.write(36)).render()}fromReader(e){return this.type=e.readU32(),this.hash=e.readHash(),this}fromRaw(e){return this.fromReader(o.read(e))}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}isBlock(){switch(this.type){case h.types.BLOCK:case h.types.WITNESS_BLOCK:case h.types.FILTERED_BLOCK:case h.types.WITNESS_FILTERED_BLOCK:case h.types.CMPCT_BLOCK:return!0;default:return!1}}isTX(){switch(this.type){case h.types.TX:case h.types.WITNESS_TX:return!0;default:return!1}}hasWitness(){return 0!=(this.type&h.WITNESS_FLAG)}rhash(){return a.revHex(this.hash)}}h.types={TX:1,BLOCK:2,FILTERED_BLOCK:3,CMPCT_BLOCK:4,WITNESS_TX:1|1<<30,WITNESS_BLOCK:2|1<<30,WITNESS_FILTERED_BLOCK:3|1<<30},h.typesByVal={1:"TX",2:"BLOCK",3:"FILTERED_BLOCK",4:"CMPCT_BLOCK",[1|1<<30]:"WITNESS_TX",[2|1<<30]:"WITNESS_BLOCK",[3|1<<30]:"WITNESS_FILTERED_BLOCK"},h.WITNESS_FLAG=1<<30,r.exports=h}],["bledger","/lib/protocol/apdu.js",function(e,t,r,i,s,n){"use strict";const{inspect:o}=__browser_require__(55,r),a=__browser_require__(2,r),h=__browser_require__(75,r),c=__browser_require__(115,r),u=__browser_require__(73,r),f=__browser_require__(116,r),{errorMessages:l}=f,{CLA_GENERAL:d}=f.CLA,{INS_GET_WALLET_PUBLIC_KEY:p,INS_GET_TRUSTED_INPUT:b,INS_UNTRUSTED_HASH_TX_INPUT_START:g,INS_UNTRUSTED_HASH_SIGN:m,INS_UNTRUSTED_HASH_TX_INPUT_FINALIZE_FULL:_,INS_GET_FIRMWARE_VERSION:w,INS_GET_OPERATION_MODE:y,INS_SET_OPERATION_MODE:v,INS_SIGN_MESSAGE:E,INS_GET_RANDOM:S}=f.INS,{SW_INTERNAL_ERROR:I,SW_OK:k}=f.STATUS_WORDS,{FEATURE_COMPRESSED_KEY:A,FEATURE_SELF_SCREEN_BUTTONS:O,FEATURE_EXTERNAL_SCREEN_BUTTONS:x,FEATURE_NFC:R,FEATURE_BLE:M,FEATURE_TEE:P}=f.FEATURES,{MODE_SETUP:B,MODE_OPERATION:N}=f.MODES,T=Buffer.alloc(0);class C extends u{constructor(e,t,r,i){super(e,C),this.type="APDUError",this.code=t||-1,this.hexCode=r||"",this.message=`${e}. (0x${this.hexCode})`,Error.captureStackTrace&&Error.captureStackTrace(this,i||C)}}class q{constructor(e){this.cla=0,this.ins=0,this.p1=0,this.p2=0,this.data=T,this.le=64,this.skipBody=!1,this.skipSize=!1,e&&this.set(e)}set(e){a(e),a(U(e.cla)),a(U(e.ins)),this.cla=e.cla,this.ins=e.ins,null!=e.p1&&(a(U(e.p1)),this.p1=e.p1),null!=e.p2&&(a(U(e.p2)),this.p2=e.p2),null!=e.data&&(a(null!=e.data&&!0===e.data._isBuffer,"Data must be buffer"),this.data=e.data),null!=e.le&&(a(U(e.le)),this.le=e.le),null!=e.skipSize&&(a("boolean"==typeof e.skipSize),this.skipSize=e.skipSize),null!=e.skipBody&&(a("boolean"==typeof e.skipBody),this.skipBody=e.skipBody)}getSize(){let e=4;return this.skipSize||(e+=1),this.skipBody||(e+=this.data.length),e}toRaw(){const e=this.getSize(),t=h.write(e);return t.writeU8(this.cla),t.writeU8(this.ins),t.writeU8(this.p1),t.writeU8(this.p2),this.skipSize||t.writeU8(this.data.length),this.skipBody||t.writeBytes(this.data),t.render()}inspect(){const e=f.claByVal[this.cla],t=f.insByVal[this.ins];return"<APDUCommand:"+` cla=${e}(${this.cla})`+` ins=${t}(${this.ins})`+` p1=${this.p1}`+` p2=${this.p2}`+` data=${this.data.toString("hex")}`+">"}[o.custom](){return this.inspect()}static getFirmwareVersion(){return new q({cla:d,ins:w})}static getOperationMode(){return new q({cla:d,ins:y})}static setOperationMode(e){return new q({cla:d,ins:v,data:Buffer.alloc(1,e)})}static getRandom(e){return new q({cla:d,ins:S,data:Buffer.alloc(1,e),skipSize:!0})}static getWalletPublicKey(e,t){const r=c.encodePath(e);return new q({p1:(t&f.addressFlags.VERIFY)>>2,p2:t&f.addressTypeMask,cla:d,ins:p,data:r})}static getTrustedInput(e,t=!1){return new q({cla:d,ins:b,p1:t?0:128,data:e})}static hashTransactionStart(e,t,r,i){let s=128;return r&&(s=0),r&&i&&(s=2),new q({cla:d,ins:g,p1:t?0:128,p2:s,data:e})}static hashOutputFinalize(e,t=!0){return new q({cla:d,ins:_,p1:t?0:128,data:e})}static hashSign(e,t,r){const i=c.encodePath(e),s=h.write(i.length+6);return s.writeBytes(i),s.writeU8(0),s.writeU32BE(t),s.writeU8(r),new q({cla:d,ins:m,data:s.render()})}static signMessage(e,t,r,i){let s=r?1:128;return r&&i&&(s=0),new q({cla:d,ins:E,p1:t?0:128,p2:s,data:e})}}class j{constructor(e){this.data=null,this.status=0,this.type=0,e&&this.set(e)}set(e){var t;a(e),a(e.data),a("object"==typeof e.data),a((65535&(t=e.status))===t),a(U(e.type)),this.data=e.data,this.status=e.status,this.type=e.type}inspect(){return"<APDUResponse:"+` status=${f.statusByVal[this.status]}`+` type=${f.insByVal[this.type]}`+` data=${o(this.data)}`+">"}[o.custom](){return this.inspect()}static getFirmwareVersion(e){z(e);const t=h.read(e),r=t.readU8(),i=t.readU8(e[1]),s=t.readU8(),n=t.readU8(),o=t.readU8();t.seek(1);const a=t.readU8(),c=t.readU8(),u=t.readU16BE(),f={version:`${s}.${n}.${o}`,archID:i,tcsLoaderPatchVersion:a,features:{compressedPubkey:Boolean(r&A),selfScreenButtons:Boolean(r&O),externalScreenButtons:Boolean(r&x),nfc:Boolean(r&R),ble:Boolean(r&M),tee:Boolean(r&P)},mode:{setup:Boolean(c&B),operation:Boolean(c&N)}};return new j({status:u,type:w,data:f})}static getOperationMode(e){z(e);const t=h.read(e),r=t.readU8(),i=t.readU16BE();return new j({status:i,type:y,data:{mode:r,modeName:f.getModeName(r)}})}static setOperationMode(e){z(e),a(2===e.length,"Incorrect data length.");const t=L(e);return new j({status:t,type:v,data:{}})}static getRandom(e,t){z(e);const r=h.read(e),i=r.readBytes(t),s=r.readU16BE();return new j({status:s,type:S,data:i})}static getWalletPublicKey(e){z(e);const t=h.read(e),r=t.readU8(),i=t.readBytes(r),s=t.readU8(),n=t.readBytes(s),o=t.readBytes(32),a=t.readU16BE();return new j({data:{publicKey:i,address:n.toString(),chainCode:o},status:a,type:p})}static getTrustedInput(e){if(z(e),2===e.length)return D(b);const t=h.read(e),r=t.readBytes(56),i=t.readU16BE();return new j({data:r,status:i,type:b})}static hashTransactionStart(e){return z(e),D(g)}static hashOutputFinalize(e){if(z(e),2===e.length)return D(_);const t=h.read(e),r=[];for(let i=0;i<e.length-2;i++)r.push(Boolean(t.readU8()));const i=t.readU16BE();return new j({data:r,status:i,type:_})}static hashSign(e){z(e);const t=h.read(e),r=t.readBytes(e.length-2),i=t.readU16BE();return r[0]&=254,new j({data:r,status:i,type:m})}static signMessage0(e){z(e.slice(-2));const t=L(e.slice(-2)),r=e[0],i=0!==r;let s=null,n=null;return 2===r&&(s=e.slice(1,-2)),3===r&&(n=e.slice(1,-2)),new j({type:E,status:t,data:{confirmationNeeded:i,confirmationType:r,keycardData:s,secureScreenData:n,encryptedOutputData:null}})}static signMessage(e,t,r){z(e.slice(-2)),a(null!=t&&!0===t._isBuffer);const i=h.read(e),s=i.readU8(),n=i.readBytes(s);s&&(t=Buffer.concat([t,n]));let o=-1,c=!1,u=null;r&&(c=0!==(o=i.readU8())),r&&3===o&&(u=i.readBytes(i.left()-2));const f=i.readU16BE();return new j({type:E,status:f,data:{confirmationNeeded:c,confirmationType:o,keycardData:null,secureScreenData:u,encryptedOutputData:t}})}static signMessageFinal(e){z(e.slice(-2));const t=L(e.slice(-2)),r=e.slice(0,-2);return new j({type:E,status:t,data:r})}}function D(e){return new j({data:T,status:k,type:e})}function U(e){return(255&e)===e}function L(e){return 256*e[0]+e[1]}function z(e){if(null==e||!0!==e._isBuffer||2!==e.length)return;const t=e[0]<<8|e[1],r=e.toString("hex");if(t===k)return;if(e[0]===I)throw new C(l.SW_INTERNAL_ERROR,t,r);const i=f.errors[f.statusByVal[t]];if(i)throw new C(i,t,r);throw new C(l.SW_UNKNOWN_ERROR,t,r)}e.Command=q,e.Response=j,e.Error=C}],["bledger","/lib/utils/util.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(2,r),a=__browser_require__(75,r);e.parsePath=((e,t)=>{o("string"==typeof e),o("boolean"==typeof t),o(e.length>=1),o(e.length<=3062);const r=e.split("/"),i=r[0];if("m"!==i&&"M"!==i&&"m'"!==i&&"M'"!==i)throw new Error("Invalid path root.");const s=[];for(let e=1;e<r.length;e++){let i=r[e];const n="'"===i[i.length-1];if(n&&(i=i.slice(0,-1)),i.length>10)throw new Error("Path index too large.");if(!/^\d+$/.test(i))throw new Error("Path index is non-numeric.");let o=parseInt(i,10);if(o>>>0!==o)throw new Error("Path index out of range.");if(n&&(o|=2147483648,o>>>=0),!t&&2147483648&o)throw new Error("Path index cannot be hardened.");s.push(o)}return s}),e.encodePath=(t=>{"string"==typeof t&&(t=e.parsePath(t,!0));const r=t,i=a.write(1+4*r.length);i.writeU8(r.length);for(const e of r)i.writeU32BE(e);return i.render()})}],["bledger","/lib/protocol/common.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(75,r),a=__browser_require__(2,r),h=__browser_require__(117,r),c=e;function u(e){const t={};for(const r of Object.keys(e))t[e[r]]=r;return t}c.addressFlags={LEGACY:0,NESTED_WITNESS:1,WITNESS:2,VERIFY:4},c.addressTypeMask=3,c.MAX_DEPTH=10,c.CLA={CLA_GENERAL:224,CLA_VENDOR:208},c.claByVal=u(c.CLA),c.INS={INS_GET_WALLET_PUBLIC_KEY:64,INS_GET_TRUSTED_INPUT:66,INS_UNTRUSTED_HASH_TX_INPUT_START:68,INS_UNTRUSTED_HASH_TX_INPUT_FINALIZE:70,INS_UNTRUSTED_HASH_SIGN:72,INS_UNTRUSTED_HASH_TX_INPUT_FINALIZE_FULL:74,INS_GET_FIRMWARE_VERSION:196,INS_GET_OPERATION_MODE:36,INS_SET_OPERATION_MODE:38,INS_SIGN_MESSAGE:78,INS_SET_ALTERNATE_COIN_VERSION:20,INS_SETUP:32,INS_VERIFY_PIN:34,INS_SET_KEYMAP:40,INS_SET_COMM_PROTOCOL:42,INS_GET_INTERNAL_CHAIN_INDEX:76,INS_GET_TRANSACTION_LIMIT:160,INS_SET_TRANSACTION_LIMIT:162,INS_IMPORT_PRIVATE_KEY:176,INS_GET_PUBLIC_KEY:178,INS_DERIVE_BIP32_KEY:180,INS_SIGNVERIFY_IMMEDIATE:182,INS_GET_RANDOM:192,INS_GET_ATTESTATION:194,INS_COMPOSE_MOFN_ADDRESS:198,INS_GET_POS_SEED:202,INS_EXT_GET_HALF_PUBLIC_KEY:32,INS_EXT_CACHE_PUT_PUBLIC_KEY:34,INS_EXT_CACHE_HAS_PUBLIC_KEY:36,INS_EXT_CACHE_GET_FEATURES:38},c.insByVal=u(c.INS),c.STATUS_WORDS={SW_INCORRECT_LENGTH:26368,SW_INVALID_SECURITY_STATUS:27010,SW_INVALID_DATA:27264,SW_FILE_NOT_FOUND:27266,SW_INCORRECT_PARAMETERS:27392,SW_CONDITIONS_OF_USE_NOT_SATISFIED:27013,SW_INS_NOT_SUPPORTED:27904,SW_INTERNAL_ERROR:111,SW_OK:36864},c.errorMessages={SW_INCORRECT_LENGTH:"Incorrect length",SW_INVALID_SECURITY_STATUS:"Invalid security status",SW_INVALID_DATA:"Invalid data",SW_FILE_NOT_FOUND:"File not found",SW_INCORRECT_PARAMETERS:"Incorrect parameters",SW_CONDITIONS_OF_USE_NOT_SATISFIED:"Conditions not satisfied",SW_INS_NOT_SUPPORTED:"Instruction not supported (check app on the device)",SW_INTERNAL_ERROR:"Internal error",SW_UNKNOWN_ERROR:"Unknown status code"},c.errors=function(e,t){const r=Object.create(null);for(const i of Object.keys(e))r[i]=t[i];return r}(c.STATUS_WORDS,c.errorMessages),c.statusByVal=u(c.STATUS_WORDS),c.FEATURES={FEATURE_COMPRESSED_KEY:1,FEATURE_SELF_SCREEN_BUTTONS:2,FEATURE_EXTERNAL_SCREEN_BUTTONS:4,FEATURE_NFC:8,FEATURE_BLE:16,FEATURE_TEE:32},c.MODES={MODE_SETUP:1,MODE_OPERATION:2},c.OPERATION_MODES={OPERATION_MODE_WALLET:1,OPERATION_MODE_RELAXED_WALLET:2,OPERATION_MODE_SERVER:4,OPERATION_MODE_DEVELOPER:8},c.getModeName=function(e){switch(e){case c.OPERATION_MODES.OPERATION_MODE_WALLET:return"OPERATION_MODE_WALLET";case c.OPERATION_MODES.OPERATION_MODE_RELAXED_WALLET:return"OPERATION_MODE_RELAXED_WALLET";case c.OPERATION_MODES.OPERATION_MODE_SERVER:return"OPERATION_MODE_SERVER";case c.OPERATION_MODES.OPERATION_MODE_DEVELOPER:return"OPERATION_MODE_DEVELOPER";default:throw new Error("Incorrect operation mode.")}},c.BITCOIN_MAGIC="Bitcoin Signed Message:\n",c.hashMessage=function(e,t=c.BITCOIN_MAGIC){a(e.length<65535,"Message is too big."),a(null!=e&&!0===e._isBuffer,"Message must be a buffer."),a("string"==typeof t,"magic must be a string.");const r=e.length<253?1:3,i=o.write(t.length+r+e.length+1);return i.writeVarString(t),i.writeVarBytes(e),h.digest(i.render())}}],["bcrypto","/lib/hash256-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(118,r)}],["bcrypto","/lib/js/hash256.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(5,r),a=__browser_require__(119,r),h=__browser_require__(6,r);class c{constructor(){this.ctx=new a}init(){return this.ctx.init(),this}update(e){return this.ctx.update(e),this}final(){const e=Buffer.allocUnsafe(32);return this.ctx._final(e),this.ctx.init(),this.ctx.update(e),this.ctx._final(e),e}static hash(){return new c}static hmac(){return new h(c,64)}static digest(e){return c.ctx.init().update(e).final()}static root(e,t){return o(null!=e&&!0===e._isBuffer&&32===e.length),o(null!=t&&!0===t._isBuffer&&32===t.length),c.ctx.init().update(e).update(t).final()}static multi(e,t,r){const{ctx:i}=c;return i.init(),i.update(e),i.update(t),r&&i.update(r),i.final()}static mac(e,t){return c.hmac().init(t).update(e).final()}}c.native=0,c.id="HASH256",c.size=32,c.bits=256,c.blockSize=64,c.zero=Buffer.alloc(32,0),c.ctx=new c,r.exports=c}],["bcrypto","/lib/js/sha256.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(5,r),a=__browser_require__(6,r),h=-1,c=Buffer.alloc(8,0),u=Buffer.alloc(64,0);u[0]=128;const f=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);class l{constructor(){this.state=new Uint32Array(8),this.msg=new Uint32Array(64),this.block=Buffer.allocUnsafe(64),this.size=h}init(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.size=0,this}update(e){return o(null!=e&&!0===e._isBuffer),this._update(e,e.length),this}final(){return this._final(Buffer.allocUnsafe(32))}_update(e,t){o(this.size!==h,"Context is not initialized.");let r=63&this.size,i=0;if(this.size+=t,r>0){let s=64-r;if(s>t&&(s=t),e.copy(this.block,r,i,i+s),t-=s,i+=s,(r+=s)<64)return;this._transform(this.block,0)}for(;t>=64;)this._transform(e,i),i+=64,t-=64;t>0&&e.copy(this.block,0,i,i+t)}_final(e){o(this.size!==h,"Context is not initialized.");const t=63&this.size,r=8*this.size;_(c,r*(1/4294967296)>>>0,0),_(c,r>>>0,4),this._update(u,1+(119-t&63)),this._update(c,8);for(let t=0;t<8;t++)_(e,this.state[t],4*t),this.state[t]=0;for(let e=0;e<64;e++)this.msg[e]=0;for(let e=0;e<64;e++)this.block[e]=0;return this.size=h,e}_transform(e,t){const r=this.msg;let i=this.state[0],s=this.state[1],n=this.state[2],o=this.state[3],a=this.state[4],h=this.state[5],c=this.state[6],u=this.state[7],l=0;for(;l<16;l++)r[l]=(w=t+4*l,16777216*(_=e)[w++]+65536*_[w++]+256*_[w++]+_[w]);for(var _,w,y;l<64;l++)r[l]=(((y=r[l-2])>>>17|y<<15)^(y>>>19|y<<13)^y>>>10)+r[l-7]+b(r[l-15])+r[l-16];for(l=0;l<64;l++){const e=u+p(a)+g(a,h,c)+f[l]+r[l],t=d(i)+m(i,s,n);u=c,c=h,h=a,a=o+e>>>0,o=n,n=s,s=i,i=e+t>>>0}this.state[0]+=i,this.state[1]+=s,this.state[2]+=n,this.state[3]+=o,this.state[4]+=a,this.state[5]+=h,this.state[6]+=c,this.state[7]+=u}static hash(){return new l}static hmac(){return new a(l,64)}static digest(e){return l.ctx.init().update(e).final()}static root(e,t){return o(null!=e&&!0===e._isBuffer&&32===e.length),o(null!=t&&!0===t._isBuffer&&32===t.length),l.ctx.init().update(e).update(t).final()}static multi(e,t,r){const{ctx:i}=l;return i.init(),i.update(e),i.update(t),r&&i.update(r),i.final()}static mac(e,t){return l.hmac().init(t).update(e).final()}}function d(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function p(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function b(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function g(e,t,r){return r^e&(t^r)}function m(e,t,r){return e&t|r&(e|t)}function _(e,t,r){return e[r++]=t>>>24,e[r++]=t>>>16,e[r++]=t>>>8,e[r++]=t,r}l.native=0,l.id="SHA256",l.size=32,l.bits=256,l.blockSize=64,l.zero=Buffer.alloc(32,0),l.ctx=new l,r.exports=l}],["bledger","/lib/device/error.js",function(e,t,r,i,s,n){"use strict";class o extends Error{constructor(e,t){super(),this.type="DeviceError",this.message=e,Error.captureStackTrace&&Error.captureStackTrace(this,t||o)}}o.DeviceError=o,r.exports=o}],["bledger","/lib/device/device.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(2,r),a=__browser_require__(120,r),h=__browser_require__(56,r),c=Buffer.from("btc"),u=11415;class f{constructor(e){this.logger=null,this.timeout=5e3,this.scrambleKey=c,this.type="",this.productId=0,this.vendorId=0,this.productName="",this.manufacturerName="",this.serialNumber="",e&&this.set(e)}set(e){if(o(e),null!=e.logger)this.logger=e.logger.context("ledger-device");else if(null==this.logger){const e=new h;this.logger=e.context("ledger-device")}null!=e.timeout&&(o("number"==typeof e.timeout),o(e.timeout>=0),this.timeout=e.timeout),null!=e.scrambleKey&&("string"==typeof e.scrambleKey&&(e.scrambleKey=Buffer.from(e.scrambleKey,"ascii")),o(null!=e.scrambleKey&&!0===e.scrambleKey._isBuffer,"scramble key must be buffer"),this.scrambleKey=e.scrambleKey)}static fromOptions(e){return new this(e)}async open(){}async close(){}async _readTimeout(){if(0===this.timeout)return this._read();let e;const t=new Promise((t,r)=>{e=setTimeout(()=>{r(new a("Read Timeout"))},this.timeout)}),r=this._read(),i=await Promise.race([t,r]);return clearTimeout(e),i}async exchange(e){}static async getDevices(){return[]}static async requestDevice(){return new f}static isLedgerDevice(e){return e.vendorId===u}}e.Device=f}],["bsigner","/lib/device/ledger.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(2,r),a=__browser_require__(56,r),h=__browser_require__(123,r),c=__browser_require__(61,r),{vendors:u}=__browser_require__(1,r),f=__browser_require__(126,r),l=__browser_require__(128,r),d=__browser_require__(169,r),p=__browser_require__(376,r),{ManagedLedgerBcoin:b,LedgerBcoin:g,USB:m}=h,{Device:_}=m;r.exports=class extends c{constructor(e){super(e),this.logger=a.global,this.ledgerDevice=null,this.ledgerApp=null,this.managed=!0,e&&this.fromOptions(e)}fromOptions(e){super.fromOptions(e),o(e);let t=5e3;if(null!=e.managed&&(o("boolean"==typeof e.managed),this.managed=e.managed),null!=e.logger&&(o("object"==typeof e.logger),this.logger=e.logger.context("ledger-device")),null!=e.timeout&&(o("number"==typeof e.timeout),t=e.timeout),null!=e.device){o(_.isLedgerDevice(e.device)),this.ledgerDevice=e.device,this.ledgerDevice.set({timeout:t});const r=this.managed?b:g;this.ledgerApp=new r({logger:this.logger,device:this.ledgerDevice,network:this.network})}return this}get vendor(){return u.LEDGER}get usbDevice(){return this.ledgerDevice.device}get handle(){return this.usbDevice._handle}get key(){const e=this.usbDevice;return`${e.vendorId}:${e.productId}:${e.serialNumber}`}get opened(){return this.ledgerDevice.opened}async open(){o(!this.destroyed,"Device no longer available."),this.managed||(o(!this.opened),await this.ledgerDevice.open())}async close(){o(!this.destroyed,"Device no longer available."),this.managed||(o(this.opened),await this.ledgerDevice.close())}destroy(){o(!this.opened,"Can not destroy open device."),o(!this.destroyed),this.ledgerApp=null,this.destroyed=!0}async getPublicKey(e,t=!0){return o(!this.destroyed,"Device no longer available."),o(this.ledgerApp,"Ledger app not found."),e=d.parsePath(e),this.logger.debug("getting public key for path",e),this.ledgerApp.getPublicKey(e.toString(),t)}async signTransaction(e,t){o(!this.destroyed,"Device no longer available."),o(this.ledgerApp,"Ledger app not found.");const r=d.prepareSignOptions(t),i=p.createLedgerInputs(e,r,this.network),s=f.fromTX(e);for(const e of r.values())s.view.addCoin(e.coin);return await this.ledgerApp.signTransaction(s,i),this.logger.debug("Transaction was signed."),d.applyOtherSignatures(s,r,this.network)}async getSignatures(e,t){o(!this.destroyed,"Device no longer available."),o(this.ledgerApp,"Ledger app not found.");const r=d.prepareSignOptions(t),i=new l;for(const e of r.values())i.addCoin(e.coin);const s=p.createLedgerInputs(e,r,this.network),n=await this.ledgerApp.getTransactionSignatures(e,i,s);return this.logger.debug("Transaction was signed."),n}async signMessage(e,t){o(!this.destroyed,"Device no longer available."),o(this.ledgerApp,"Ledger app not found.");const r=(e=d.parsePath(e)).toString();return(await this.ledgerApp.signMessage(r,t)).toCoreSignature()}static fromOptions(e){return(new this).fromOptions(e)}static fromLedgerDevice(e,t={}){return this.fromOptions({...t,device:e})}static fromUSBDevice(e,t={}){const r=_.fromDevice(e);return this.fromLedgerDevice(r,t)}}}],["bledger","/lib/bledger-browser.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(73,r),a=__browser_require__(120,r),h=__browser_require__(66,r),c=__browser_require__(124,r),u=__browser_require__(125,r),f=__browser_require__(168,r),l=__browser_require__(166,r);e.bledger=e,e.USB=h,e.WebAuthn=c,e.LedgerError=o,e.DeviceError=a,e.ManagedLedgerBcoin=f,e.LedgerBcoin=u,e.LedgerTXInput=l}],["bledger","/lib/device/webauthn.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(44,r),{Device:a}=__browser_require__(121,r),h=__browser_require__(120,r),{Lock:c}=__browser_require__(67,r);class u extends a{constructor(e){super(e),this.lock=new c(!1),this.opened=!1,this.type="webauthn"}async open(){this.enforce(!1===this.opened,"Device is already open."),await u.ensureSupport(),this.opened=!0}async close(){this.enforce(!0===this.opened,"Device is already closed."),this.opened=!1}async exchange(e){const t=await this.lock.lock();try{return await this._exchange(e)}finally{t()}}async _exchange(e){this.enforce(!0===this.opened,"Device is not open."),o(null!=e&&!0===e._isBuffer,"apdu is not a buffer.");const t={publicKey:{timeout:this.timeout,challenge:Buffer.alloc(32),allowCredentials:[{type:"public-key",id:function(e,t){const r=Buffer.alloc(e.length);for(let i=0;i<e.length;i++)r[i]=e[i]^t[i%t.length];return r}(e,this.scrambleKey)}]}},r=await navigator.credentials.get(t);return Buffer.from(r.response.signature)}enforce(e,t){if(!e)throw new h(t,u)}static async isSupported(){return global.navigator&&global.navigator.credentials}static async ensureSupport(){if(!this.isSupported())throw new h("WebAuthn is not supported.",u)}static async getDevices(){return await this.ensureSupport(),[new u]}static async requestDevice(){return new u}}e.Device=u}],["bledger","/lib/ledger/ledgerbcoin.js",function(e,t,r,i,s,n){"use strict";const{assert:o,enforce:a}=__browser_require__(2,r),{Lock:h}=__browser_require__(67,r),{read:c}=__browser_require__(75,r),u=__browser_require__(56,r),f=__browser_require__(14,r),l=__browser_require__(85,r),d=__browser_require__(126,r),p=__browser_require__(128,r),b=__browser_require__(133,r),g=__browser_require__(141,r),m=__browser_require__(158,r),_=__browser_require__(115,r),w=__browser_require__(161,r),{Device:y}=__browser_require__(121,r),v=__browser_require__(162,r),E=__browser_require__(165,r);class S{constructor(e){this.options=new I(e),this.device=this.options.device,this.network=this.options.network,this.logger=this.options.logger.context("ledger-bcoin"),this.ledger=new v({device:this.device,logger:this.logger}),this.lock=new h(!1)}set(e){return a(e&&"object"==typeof e,"options","object"),null!=e.device&&(o(e.device instanceof y,"device must be a Device."),this.device=e.device),null!=e.network&&(this.network=f.get(e.network)),null!=e.logger&&(a("object"==typeof e.logger,"logger","object"),this.logger=e.logger.context("ledger-bcoin")),this}async getFirmwareVersion(){return this.ledger.getFirmwareVersion()}async getOperationMode(){return this.ledger.getOperationMode()}async setOperationMode(e){return this.ledger.setOperationMode(e)}async randomBytes(e){return this.ledger.getRandom(e)}async getPublicKey(e,t=!1,r=0){o(this.device),o(e),"string"==typeof e&&(e=_.parsePath(e,!0)),o(Array.isArray(e),"Path must be string or array");const i=e,s=await this.ledger.getPublicKey(e,r),n=g.publicKeyConvert(s.publicKey,!0);let a=0;t&&i.length>=1&&(a=await this.getFingerPrint(i.slice(0,-1)));const h=i.length?i[i.length-1]:0;return new b({depth:i.length,childIndex:h,parentFingerPrint:a,chainCode:s.chainCode,publicKey:n,network:this.network})}async getFingerPrint(e){o(this.device),o(e),"string"==typeof e&&(e=_.parsePath(e,!0)),o(Array.isArray(e),"Path must be an bip32 string or array.");const t=await this.ledger.getPublicKey(e),r=g.publicKeyConvert(t.publicKey,!0);return m.digest(r).readUInt32BE(0)}async getTransactionSignatures(e,t,r){const i=await this.lock.lock();try{return await this._getTransactionSignatures(e,t,r)}finally{i()}}async _getTransactionSignatures(e,t,r){null!=e&&!0===e._isBuffer&&(e=d.fromRaw(e)),l.isTX(e)&&(e=d.fromTX(e)),null!=t&&!0===t._isBuffer&&(t=p.fromReader(c(t),t)),o(d.isMTX(e),"Can not use non-MTX tx for signing"),o(t instanceof p,"Can not use non-CoinView view for signing");const i=e;i.view=t;const s=E.fromOptions({mtx:i,ledger:this.ledger,inputs:r,logger:this.logger});s.init(),await s.collectPubkeys(),await s.collectTrustedInputs(),await s.cacheWitnessInputs();const n=new Array(e.inputs.length);for(const e of r){const t=s.getIndex(e);o(t>=0,"Could not find ledger input index.");const r=await s.getSignature(e);o(!n[t],"Can not return same input twice."),n[t]=r}return s.destroy(),n}async signTransaction(e,t){const r=await this.lock.lock();try{return await this._signTransaction(e,t)}finally{r()}}async _signTransaction(e,t){o(d.isMTX(e),"Cannot use non-MTX tx for signing");const r=e.clone();r.view=e.view;const i=E.fromOptions({mtx:r,ledger:this.ledger,inputs:t,logger:this.logger});i.init(),await i.collectPubkeys(),await i.collectTrustedInputs(),await i.cacheWitnessInputs();for(const r of t){const t=i.getIndex(r);o(t>=0,"Could not find ledger input index.");const s=await i.getSignature(r);o(this.applySignature(e,t,r,s),"Adding signature failed.")}return i.destroy(),e}applySignature(e,t,r,i){const s=e.inputs[t],n=r.getPrevRedeem(),a=r.getRing(this.network),h=r.getCoin();if(o(s,"Could not find input."),!e.scriptInput(t,h,a))throw new Error("Could not template input.");const c=r.redeem,u=r.witness?s.witness:s.script;if(c){const t=u.toStack(),r=t.pop(),s=e.signVector(n,t,i,a);return!!s&&(s.push(r),u.fromStack(s),!0)}const f=u.toStack(),l=e.signVector(n,f,i,a);return!!l&&(u.fromStack(l),!0)}async signMessage(e,t,r){const i=await this.lock.lock();try{return await this._signMessage(e,t,r)}finally{i()}}async _signMessage(e,t,r){"string"==typeof t&&(t=Buffer.from(t,"binary")),o(null!=t&&!0===t._isBuffer,"message must be a buffer or a string.");const i=await this.ledger.signMessage(e,t,r);return w.fromLedgerSignature(i)}async signMessageLegacy(e,t,r){const i=await this.lock.lock();try{return await this._signMessageLegacy(e,t,r)}finally{i()}}async _signMessageLegacy(e,t,r){"string"==typeof t&&(t=Buffer.from(t,"binary")),o(null!=t&&!0===t._isBuffer,"message must be a buffer or a string.");const i=await this.ledger.signMessageLegacy(e,t,r);return w.fromLedgerSignature(i)}async verifyMessage(e,t,r){"string"==typeof t&&(t=Buffer.from(t,"binary")),o(null!=t&&!0===t._isBuffer,"message must be a buffer or a string."),o(r instanceof w,"Signature must be a LedgerSignature instance.");const i=await this.ledger.getPublicKey(e);return r.verifyMessage(t,i.publicKey)}}class I{constructor(e){this.device=null,this.network=f.primary,this.logger=u.global,e&&this.fromOptions(e)}fromOptions(e){return a(e&&"object"==typeof e,"options","object"),a(e.device instanceof y,"optoins.device","Device"),this.device=e.device,this.device.set({scrambleKey:"BTC"}),null!=e.logger&&(o("object"==typeof e.logger),this.logger=e.logger),null!=e.network&&(this.network=f.get(e.network)),this}static fromOptions(e){return new this(e)}}S.addressFlags=v.addressFlags,S.LedgerBcoin=S,r.exports=S}],["bcoin","/lib/primitives/mtx.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),{encoding:a}=__browser_require__(24,r),{BufferMap:h}=__browser_require__(86,r),c=__browser_require__(89,r),u=__browser_require__(85,r),f=__browser_require__(109,r),l=__browser_require__(112,r),d=__browser_require__(127,r),p=__browser_require__(111,r),b=__browser_require__(128,r),g=__browser_require__(104,r),m=__browser_require__(17,r),_=__browser_require__(96,r),w=__browser_require__(88,r),y=__browser_require__(103,r),v=__browser_require__(20,r),{inspectSymbol:E}=__browser_require__(21,r);class S extends u{constructor(e){super(),this.mutable=!0,this.changeIndex=-1,this.view=new b,e&&this.fromOptions(e)}fromOptions(e){if(null!=e.version&&(o(e.version>>>0===e.version,"Version must a be uint32."),this.version=e.version),e.inputs){o(Array.isArray(e.inputs),"Inputs must be an array.");for(const t of e.inputs)this.addInput(t)}if(e.outputs){o(Array.isArray(e.outputs),"Outputs must be an array.");for(const t of e.outputs)this.addOutput(t)}return null!=e.locktime&&(o(e.locktime>>>0===e.locktime,"Locktime must be a uint32."),this.locktime=e.locktime),null!=e.changeIndex&&(-1!==e.changeIndex?(o(e.changeIndex>>>0===e.changeIndex,"Change index must be a uint32."),this.changeIndex=e.changeIndex):this.changeIndex=-1),this}static fromOptions(e){return(new this).fromOptions(e)}clone(){const e=new this.constructor;return e.inject(this),e.changeIndex=this.changeIndex,e}addInput(e){const t=f.fromOptions(e);return this.inputs.push(t),t}addOutpoint(e){const t=p.fromOptions(e),r=f.fromOutpoint(t);return this.inputs.push(r),r}addCoin(e){o(e instanceof d,"Cannot add non-coin.");const t=f.fromCoin(e);return this.inputs.push(t),this.view.addCoin(e),t}addTX(e,t,r){o(e instanceof u,"Cannot add non-transaction."),null==r&&(r=-1);const i=f.fromTX(e,t);return this.inputs.push(i),this.view.addIndex(e,t,r),i}addOutput(e,t){let r;return r=null!=t?l.fromScript(e,t):l.fromOptions(e),this.outputs.push(r),r}check(e){return super.check(this.view,e)}checkAsync(e,t){return super.checkAsync(this.view,e,t)}verify(e){try{this.check(e)}catch(e){if("ScriptError"===e.type)return!1;throw e}return!0}async verifyAsync(e,t){try{await this.checkAsync(e,t)}catch(e){if("ScriptError"===e.type)return!1;throw e}return!0}getFee(){return super.getFee(this.view)}getInputValue(){return super.getInputValue(this.view)}getInputAddresses(){return super.getInputAddresses(this.view)}getAddresses(){return super.getAddresses(this.view)}getInputHashes(e){return super.getInputHashes(this.view,e)}getHashes(e){return super.getHashes(this.view,e)}hasCoins(){return super.hasCoins(this.view)}getSigops(e){return super.getSigops(this.view,e)}getSigopsCost(e){return super.getSigopsCost(this.view,e)}getSigopsSize(){return super.getSigopsSize(this.getSigopsCost())}verifyInputs(e){const[t]=this.checkInputs(e);return-1!==t}checkInputs(e){return super.checkInputs(this.view,e)}scriptInput(e,t,r){const i=this.inputs[e];if(o(i,"Input does not exist."),o(t,"No coin passed."),0!==i.script.raw.length||0!==i.witness.items.length)return!0;const s=t.script,n=s.getScripthash();if(n){const e=r.getRedeem(n);if(!e)return!1;if(e.isProgram()){const t=e.getWitnessScripthash();if(t){const s=r.getRedeem(t);if(!s)return!1;const n=this.scriptVector(s,r);return!!n&&(n.push(s.toRaw()),i.witness.fromStack(n),i.script.fromItems([e.toRaw()]),!0)}const s=e.getWitnessPubkeyhash();if(s){const t=c.fromPubkeyhash(s),n=this.scriptVector(t,r);return!!n&&(i.witness.fromStack(n),i.script.fromItems([e.toRaw()]),!0)}return!1}const t=this.scriptVector(e,r);return!!t&&(t.push(e.toRaw()),i.script.fromStack(t),!0)}if(s.isProgram()){const e=s.getWitnessScripthash();if(e){const t=r.getRedeem(e);if(!t)return!1;const s=this.scriptVector(t,r);return!!s&&(s.push(t.toRaw()),i.witness.fromStack(s),!0)}const t=s.getWitnessPubkeyhash();if(t){const e=c.fromPubkeyhash(t),s=this.scriptVector(e,r);return!!s&&(i.witness.fromStack(s),!0)}return!1}const a=this.scriptVector(s,r);return!!a&&(i.script.fromStack(a),!0)}scriptVector(e,t){const r=e.getPubkey();if(r){if(!r.equals(t.publicKey))return null;const e=new y;return e.pushInt(0),e}const i=e.getPubkeyhash();if(i){if(!i.equals(t.getKeyHash()))return null;const e=new y;return e.pushInt(0),e.pushData(t.publicKey),e}const[,s]=e.getMultisig();if(-1!==s){if(-1===e.indexOf(t.publicKey))return null;const r=new y;r.pushInt(0);for(let e=0;e<s;e++)r.pushInt(0);return r}return null}async signInputAsync(e,t,r,i,s){return s?await s.signInput(this,e,t,r,i,s):this.signInput(e,t,r,i)}signInput(e,t,r,i){const s=this.inputs[e],n=r.privateKey;o(s,"Input does not exist."),o(t,"No coin passed.");const a=t.value;let h=t.script,u=s.script,f=0,l=!1;if(h.isScripthash()){if(!(h=s.script.getRedeem()))throw new Error("Input has not been templated.");l=!0}if(h.isWitnessScripthash()){if(!(h=s.witness.getRedeem()))throw new Error("Input has not been templated.");u=s.witness,l=!0,f=1}else{const e=h.getWitnessPubkeyhash();e&&(h=c.fromPubkeyhash(e),u=s.witness,l=!1,f=1)}const d=this.signature(e,h,a,n,i,f);if(l){const e=u.toStack(),t=e.pop(),i=this.signVector(h,e,d,r);return!!i&&(i.push(t),u.fromStack(i),!0)}const p=u.toStack(),b=this.signVector(h,p,d,r);return!!b&&(u.fromStack(b),!0)}signVector(e,t,r,i){const s=e.getPubkey();if(s){if(!i.publicKey.equals(s))return null;if(0===t.length)throw new Error("Input has not been templated.");return t.get(0).length>0?t:(t.set(0,r),t)}const n=e.getPubkeyhash();if(n){if(!i.getKeyHash().equals(n))return null;if(2!==t.length)throw new Error("Input has not been templated.");if(0===t.get(1).length)throw new Error("Input has not been templated.");return t.get(0).length>0?t:(t.set(0,r),t)}const[a,h]=e.getMultisig();if(-1!==a){if(t.length<2)throw new Error("Input has not been templated.");if(0!==t.get(0).length)throw new Error("Input has not been templated.");if(t.length-1>h)throw new Error("Input has not been templated.");let s=0;for(let e=1;e<t.length;e++){t.get(e).length>0&&(s+=1)}if(s===a&&t.length-1===a)return t;for(;t.length-1<h;)t.pushInt(0);const n=[];for(const t of e.code)t.data&&n.push(t.data);let c=-1;for(let e=0;e<n.length;e++){if(n[e].equals(i.publicKey)){c=e;break}}if(-1===c)return null;if((c+=1)<t.length&&s<a&&0===t.get(c).length&&(t.set(c,r),s+=1),s>=a){for(let e=t.length-1;e>=1;e--){0===t.get(e).length&&t.remove(e)}for(;s>a;)t.pop(),s-=1;o(s===a),o(t.length-1===a)}return t}return null}isSigned(){for(let e=0;e<this.inputs.length;e++){const{prevout:t}=this.inputs[e],r=this.view.getOutput(t);if(!r)return!1;if(!this.isInputSigned(e,r))return!1}return!0}isInputSigned(e,t){const r=this.inputs[e];o(r,"Input does not exist."),o(t,"No coin passed.");let i=t.script,s=r.script,n=!1;if(i.isScripthash()){if(!(i=r.script.getRedeem()))return!1;n=!0}if(i.isWitnessScripthash()){if(!(i=r.witness.getRedeem()))return!1;s=r.witness,n=!0}else{const e=i.getWitnessPubkeyhash();e&&(i=c.fromPubkeyhash(e),s=r.witness,n=!1)}const a=s.toStack();return n&&a.pop(),this.isVectorSigned(i,a)}isVectorSigned(e,t){if(e.isPubkey())return 1===t.length&&0!==t.get(0).length;if(e.isPubkeyhash())return 2===t.length&&(0!==t.get(0).length&&0!==t.get(1).length);const[r]=e.getMultisig();if(-1!==r){if(t.length-1!==r)return!1;for(let e=1;e<t.length;e++){if(0===t.get(e).length)return!1}return!0}return!1}template(e){if(Array.isArray(e)){let t=0;for(const r of e)t+=this.template(r);return t}let t=0;for(let r=0;r<this.inputs.length;r++){const{prevout:i}=this.inputs[r],s=this.view.getOutput(i);s&&(e.ownOutput(s)&&this.scriptInput(r,s,e)&&(t+=1))}return t}sign(e,t){if(Array.isArray(e)){let r=0;for(const i of e)r+=this.sign(i,t);return r}o(e.privateKey,"No private key available.");let r=0;for(let i=0;i<this.inputs.length;i++){const{prevout:s}=this.inputs[i],n=this.view.getOutput(s);n&&(e.ownOutput(n)&&this.scriptInput(i,n,e)&&this.signInput(i,n,e,t)&&(r+=1))}return r}async signAsync(e,t,r){return r?await r.sign(this,e,t):this.sign(e,t)}async estimateSize(e){const t=m.WITNESS_SCALE_FACTOR;let r=0;r+=4,r+=a.sizeVarint(this.inputs.length),r+=40*this.inputs.length,r+=a.sizeVarint(this.outputs.length);for(const e of this.outputs)r+=e.getSize();r+=4;for(const{prevout:i}of this.inputs){const s=this.view.getOutput(i);if(!s){r+=110;continue}const n=s.script;if(n.isPubkey()){r+=1,r+=74;continue}if(n.isPubkeyhash()){r+=1,r+=74,r+=34;continue}const[o]=n.getMultisig();if(-1===o)if(n.isWitnessPubkeyhash()){let e=0;e+=1,e+=74,r+=e=((e+=34)+t-1)/t|0}else{if(e){const t=await e(n);if(-1!==t){r+=t;continue}}if(n.isScripthash())r+=1,r+=149;else if(n.isWitnessScripthash()){let e=0;e+=1,r+=e=((e+=149)+t-1)/t|0}else r+=110}else{let e=0;e+=1,e+=74*o,r+=e+=a.sizeVarint(e)}}return r}selectCoins(e,t){return new I(this,t).select(e)}subtractIndex(e,t){o("number"==typeof e),o("number"==typeof t);const r=this.outputs[e];if(!r)throw new Error("Subtraction index does not exist.");if(r.value<t+r.getDustThreshold())throw new Error("Could not subtract fee.");r.value-=t}subtractFee(e){o("number"==typeof e);let t=0;for(const e of this.outputs)e.script.isUnspendable()||(t+=1);if(0===t)throw new Error("Could not subtract fee.");const r=e%t,i=(e-r)/t;for(const e of this.outputs)if(!e.script.isUnspendable()){if(e.value<i+e.getDustThreshold())throw new Error("Could not subtract fee.");e.value-=i}for(const e of this.outputs)if(!e.script.isUnspendable()&&e.value>=r+e.getDustThreshold())return void(e.value-=r);throw new Error("Could not subtract fee.")}async fund(e,t){o(t,"Options are required."),o(t.changeAddress,"Change address is required."),o(0===this.inputs.length,"TX is already funded.");const r=await this.selectCoins(e,t);for(const e of r.chosen)this.addCoin(e);if(r.subtractFee){const e=r.subtractIndex;-1!==e?this.subtractIndex(e,r.fee):this.subtractFee(r.fee)}const i=new l;return i.value=r.change,i.script.fromAddress(r.changeAddress),i.isDust(_.MIN_RELAY)?(this.changeIndex=-1,o.strictEqual(this.getFee(),r.fee+r.change)):(this.outputs.push(i),this.changeIndex=this.outputs.length-1,o.strictEqual(this.getFee(),r.fee)),r}sortMembers(){let e=null;-1!==this.changeIndex&&(e=this.outputs[this.changeIndex],o(e)),this.inputs.sort(R),this.outputs.sort(M),-1!==this.changeIndex&&(this.changeIndex=this.outputs.indexOf(e),o(-1!==this.changeIndex))}avoidFeeSniping(e){o("number"==typeof e,"Must pass in height."),0==(10*Math.random()|0)&&(e-=100*Math.random()|0)<0&&(e=0),this.setLocktime(e)}setLocktime(e){o(e>>>0===e,"Locktime must be a uint32."),o(this.inputs.length>0,"Cannot set sequence with no inputs.");for(const e of this.inputs)4294967295===e.sequence&&(e.sequence=4294967294);this.locktime=e}setSequence(e,t,r){const i=this.inputs[e];o(i,"Input does not exist."),o(t>>>0===t,"Locktime must be a uint32."),this.version=2,r?(t>>>=m.SEQUENCE_GRANULARITY,t&=m.SEQUENCE_MASK,t|=m.SEQUENCE_TYPE_FLAG):t&=m.SEQUENCE_MASK,i.sequence=t}[E](){return this.format()}format(){return super.format(this.view)}toJSON(){return super.toJSON(null,this.view)}getJSON(e){return super.getJSON(e,this.view)}fromJSON(e){super.fromJSON(e);for(let t=0;t<e.inputs.length;t++){const r=e.inputs[t],{prevout:i}=r;if(!r.coin)continue;const s=d.fromJSON(r.coin);s.hash=v.fromRev(i.hash),s.index=i.index,this.view.addCoin(s)}return this}static fromJSON(e){return(new this).fromJSON(e)}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}toTX(){return(new u).inject(this)}commit(){return[this.toTX(),this.view]}static fromTX(e){return(new this).inject(e)}static isMTX(e){return e instanceof S}}class I{constructor(e,t){this.tx=e.clone(),this.coins=[],this.outputValue=0,this.index=0,this.chosen=[],this.change=0,this.fee=I.MIN_FEE,this.selection="value",this.subtractFee=!1,this.subtractIndex=-1,this.height=-1,this.depth=-1,this.hardFee=-1,this.rate=I.FEE_RATE,this.maxFee=-1,this.round=!1,this.changeAddress=null,this.inputs=new h,this.estimate=null,this.injectInputs(),t&&this.fromOptions(t)}fromOptions(e){if(e.selection&&(o("string"==typeof e.selection),this.selection=e.selection),null!=e.subtractFee&&("number"==typeof e.subtractFee?(o(Number.isSafeInteger(e.subtractFee)),o(e.subtractFee>=-1),this.subtractIndex=e.subtractFee,this.subtractFee=-1!==this.subtractIndex):(o("boolean"==typeof e.subtractFee),this.subtractFee=e.subtractFee)),null!=e.subtractIndex&&(o(Number.isSafeInteger(e.subtractIndex)),o(e.subtractIndex>=-1),this.subtractIndex=e.subtractIndex,this.subtractFee=-1!==this.subtractIndex),null!=e.height&&(o(Number.isSafeInteger(e.height)),o(e.height>=-1),this.height=e.height),null!=e.confirmations&&(o(Number.isSafeInteger(e.confirmations)),o(e.confirmations>=-1),this.depth=e.confirmations),null!=e.depth&&(o(Number.isSafeInteger(e.depth)),o(e.depth>=-1),this.depth=e.depth),null!=e.hardFee&&(o(Number.isSafeInteger(e.hardFee)),o(e.hardFee>=-1),this.hardFee=e.hardFee),null!=e.rate&&(o(Number.isSafeInteger(e.rate)),o(e.rate>=0),this.rate=e.rate),null!=e.maxFee&&(o(Number.isSafeInteger(e.maxFee)),o(e.maxFee>=-1),this.maxFee=e.maxFee),null!=e.round&&(o("boolean"==typeof e.round),this.round=e.round),e.changeAddress){const t=e.changeAddress;"string"==typeof t?this.changeAddress=g.fromString(t):(o(t instanceof g),this.changeAddress=t)}if(e.estimate&&(o("function"==typeof e.estimate),this.estimate=e.estimate),e.inputs){o(Array.isArray(e.inputs));for(let t=0;t<e.inputs.length;t++){const r=e.inputs[t];o(r&&"object"==typeof r);const{hash:i,index:s}=r;o(null!=i&&!0===i._isBuffer),o("number"==typeof s),this.inputs.set(p.toKey(i,s),t)}}return this}injectInputs(){if(this.tx.inputs.length>0)for(let e=0;e<this.tx.inputs.length;e++){const{prevout:t}=this.tx.inputs[e];this.inputs.set(t.toKey(),e)}}init(e){switch(this.coins=e.slice(),this.outputValue=this.tx.getOutputValue(),this.index=0,this.chosen=[],this.change=0,this.fee=I.MIN_FEE,this.tx.inputs.length=0,this.selection){case"all":case"random":this.coins.sort(O);break;case"age":this.coins.sort(A);break;case"value":this.coins.sort(x);break;default:throw new k(`Bad selection type: ${this.selection}.`)}}total(){return this.subtractFee?this.outputValue:this.outputValue+this.fee}isFull(){return this.tx.getInputValue()>=this.total()}isSpendable(e){if(this.tx.view.hasEntry(e))return!1;if(-1===this.height)return!0;if(e.coinbase)return-1!==e.height&&!(this.height+1<e.height+m.COINBASE_MATURITY);if(-1===this.depth)return!0;return!(e.getDepth(this.height)<this.depth)}getFee(e){if(this.round){const t=_.getRoundFee(e,this.rate);return Math.min(t,I.MAX_FEE)}const t=_.getMinFee(e,this.rate);return Math.min(t,I.MAX_FEE)}fund(){if(this.inputs.size>0){const e=[];for(let t=0;t<this.inputs.size;t++)e.push(null);for(const t of this.coins){const{hash:r,index:i}=t,s=p.toKey(r,i),n=this.inputs.get(s);null!=n&&(e[n]=t,this.inputs.delete(s))}if(this.inputs.size>0)throw new Error("Could not resolve preferred inputs.");for(const t of e)this.tx.addCoin(t),this.chosen.push(t)}for(;this.index<this.coins.length;){const e=this.coins[this.index++];if(this.isSpendable(e)&&(this.tx.addCoin(e),this.chosen.push(e),"all"!==this.selection&&this.isFull()))break}}async select(e){if(this.init(e),-1!==this.hardFee?this.selectHard():await this.selectEstimate(),!this.isFull())throw new k("Not enough funds.",this.tx.getInputValue(),this.total());return this.change=this.tx.getInputValue()-this.total(),this}async selectEstimate(){this.fee=I.MIN_FEE,this.fund();const e=new l;this.changeAddress?e.script.fromAddress(this.changeAddress):e.script.fromPubkeyhash(Buffer.allocUnsafe(20)),this.tx.outputs.push(e);do{const e=await this.tx.estimateSize(this.estimate);if(this.fee=this.getFee(e),this.maxFee>0&&this.fee>this.maxFee)throw new k("Fee is too high.");this.isFull()||this.fund()}while(!this.isFull()&&this.index<this.coins.length)}selectHard(){this.fee=Math.min(this.hardFee,I.MAX_FEE),this.fund()}}I.FEE_RATE=1e4,I.MIN_FEE=1e4,I.MAX_FEE=m.COIN/10;class k extends Error{constructor(e,t,r){super(),this.type="FundingError",this.message=e,this.availableFunds=-1,this.requiredFunds=-1,null!=t&&(this.message+=` (available=${w.btc(t)},`,this.message+=` required=${w.btc(r)})`,this.availableFunds=t,this.requiredFunds=r),Error.captureStackTrace&&Error.captureStackTrace(this,k)}}function A(e,t){return(e=-1===e.height?2147483647:e.height)-(t=-1===t.height?2147483647:t.height)}function O(e,t){return Math.random()>.5?1:-1}function x(e,t){return-1===e.height&&-1!==t.height?1:-1!==e.height&&-1===t.height?-1:t.value-e.value}function R(e,t){return e.compare(t)}function M(e,t){return e.compare(t)}(e=S).MTX=S,e.Selector=I,e.FundingError=k,r.exports=e}],["bcoin","/lib/primitives/coin.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(20,r),c=__browser_require__(88,r),u=__browser_require__(112,r),f=__browser_require__(14,r),l=__browser_require__(17,r),d=__browser_require__(111,r),{inspectSymbol:p}=__browser_require__(21,r);class b extends u{constructor(e){super(),this.version=1,this.height=-1,this.coinbase=!1,this.hash=l.ZERO_HASH,this.index=0,e&&this.fromOptions(e)}fromOptions(e){return o(e,"Coin data is required."),null!=e.version&&(o(e.version>>>0===e.version,"Version must be a uint32."),this.version=e.version),null!=e.height&&(-1!==e.height?(o(e.height>>>0===e.height,"Height must be a uint32."),this.height=e.height):this.height=-1),null!=e.value&&(o(Number.isSafeInteger(e.value)&&e.value>=0,"Value must be a uint64."),this.value=e.value),e.script&&this.script.fromOptions(e.script),null!=e.coinbase&&(o("boolean"==typeof e.coinbase,"Coinbase must be a boolean."),this.coinbase=e.coinbase),null!=e.hash&&(o(null!=e.hash&&!0===e.hash._isBuffer),this.hash=e.hash),null!=e.index&&(o(e.index>>>0===e.index,"Index must be a uint32."),this.index=e.index),this}static fromOptions(e){return(new this).fromOptions(e)}clone(){o(!1,"Coins are not cloneable.")}getDepth(e){return o("number"==typeof e,"Must pass a height."),-1===this.height?0:-1===e?0:e<this.height?0:e-this.height+1}toKey(){return d.toKey(this.hash,this.index)}fromKey(e){const{hash:t,index:r}=d.fromKey(e);return this.hash=t,this.index=r,this}static fromKey(e){return(new this).fromKey(e)}rhash(){return h.revHex(this.hash)}txid(){return this.rhash()}[p](){return{type:this.getType(),version:this.version,height:this.height,value:c.btc(this.value),script:this.script,coinbase:this.coinbase,hash:this.hash?h.revHex(this.hash):null,index:this.index,address:this.getAddress()}}toJSON(){return this.getJSON()}getJSON(e,t){let r=this.getAddress();return e=f.get(e),r&&(r=r.toString(e)),{version:this.version,height:this.height,value:this.value,script:this.script.toJSON(),address:r,coinbase:this.coinbase,hash:t?undefined:this.rhash(),index:t?undefined:this.index}}fromJSON(e){return o(e,"Coin data required."),o(e.version>>>0===e.version,"Version must be a uint32."),o(-1===e.height||e.height>>>0===e.height,"Height must be a uint32."),o(Number.isSafeInteger(e.value)&&e.value>=0,"Value must be a uint64."),o("boolean"==typeof e.coinbase,"Coinbase must be a boolean."),this.version=e.version,this.height=e.height,this.value=e.value,this.script.fromJSON(e.script),this.coinbase=e.coinbase,null!=e.hash&&(o("string"==typeof e.hash,"Hash must be a string."),o(64===e.hash.length,"Hash must be a string."),o(e.index>>>0===e.index,"Index must be a uint32."),this.hash=h.fromRev(e.hash),this.index=e.index),this}static fromJSON(e){return(new this).fromJSON(e)}getSize(){return 17+this.script.getVarSize()}toWriter(e){let t=this.height;return-1===t&&(t=2147483647),e.writeU32(this.version),e.writeU32(t),e.writeI64(this.value),e.writeVarBytes(this.script.toRaw()),e.writeU8(this.coinbase?1:0),e}toRaw(){const e=this.getSize();return this.toWriter(a.write(e)).render()}fromReader(e){return this.version=e.readU32(),this.height=e.readU32(),this.value=e.readI64(),this.script.fromRaw(e.readVarBytes()),this.coinbase=1===e.readU8(),2147483647===this.height&&(this.height=-1),this}fromRaw(e){return this.fromReader(a.read(e))}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}fromTX(e,t,r){return o("number"==typeof t),o("number"==typeof r),o(t>=0&&t<e.outputs.length),this.version=e.version,this.height=r,this.value=e.outputs[t].value,this.script=e.outputs[t].script,this.coinbase=e.isCoinbase(),this.hash=e.hash(),this.index=t,this}static fromTX(e,t,r){return(new this).fromTX(e,t,r)}static isCoin(e){return e instanceof b}}r.exports=b}],["bcoin","/lib/coins/coinview.js",function(e,t,r,i,s,n){"use strict";const{BufferMap:o}=__browser_require__(86,r),a=__browser_require__(129,r),h=__browser_require__(132,r),c=__browser_require__(130,r);r.exports=class{constructor(){this.map=new o,this.undo=new h}get(e){return this.map.get(e)}has(e){return this.map.has(e)}add(e,t){return this.map.set(e,t),t}ensure(e){const t=this.map.get(e);return t||this.add(e,new a)}remove(e){const t=this.map.get(e);return t?(this.map.delete(e),t):null}addTX(e,t){const r=e.hash(),i=a.fromTX(e,t);return this.add(r,i)}removeTX(e,t){const r=e.hash(),i=a.fromTX(e,t);for(const e of i.outputs.values())e.spent=!0;return this.add(r,i)}addEntry(e,t){const{hash:r,index:i}=e;return this.ensure(r).add(i,t)}addCoin(e){return this.ensure(e.hash).addCoin(e)}addOutput(e,t){const{hash:r,index:i}=e;return this.ensure(r).addOutput(i,t)}addIndex(e,t,r){const i=e.hash();return this.ensure(i).addIndex(e,t,r)}spendEntry(e){const{hash:t,index:r}=e,i=this.get(t);if(!i)return null;const s=i.spend(r);return s?(this.undo.push(s),s):null}removeEntry(e){const{hash:t,index:r}=e,i=this.get(t);return i?i.remove(r):null}hasEntry(e){const{hash:t,index:r}=e,i=this.get(t);return!!i&&i.has(r)}getEntry(e){const{hash:t,index:r}=e,i=this.get(t);return i?i.get(r):null}isUnspent(e){const{hash:t,index:r}=e,i=this.get(t);return!!i&&i.isUnspent(r)}getCoin(e){const t=this.get(e.hash);return t?t.getCoin(e):null}getOutput(e){const{hash:t,index:r}=e,i=this.get(t);return i?i.getOutput(r):null}getHeight(e){const t=this.getEntry(e);return t?t.height:-1}isCoinbase(e){const t=this.getEntry(e);return!!t&&t.coinbase}hasEntryFor(e){return this.hasEntry(e.prevout)}getEntryFor(e){return this.getEntry(e.prevout)}isUnspentFor(e){return this.isUnspent(e.prevout)}getCoinFor(e){return this.getCoin(e.prevout)}getOutputFor(e){return this.getOutput(e.prevout)}getHeightFor(e){return this.getHeight(e.prevout)}isCoinbaseFor(e){return this.isCoinbase(e.prevout)}async readCoin(e,t){const r=this.getEntry(t);if(r)return r;const i=await e.readCoin(t);return i?this.addEntry(t,i):null}async readInputs(e,t){let r=!0;for(const{prevout:i}of t.inputs)await this.readCoin(e,i)||(r=!1);return r}async spendInputs(e,t){let r=0;for(;r<t.inputs.length;){const i=Math.min(r+4,t.inputs.length),s=[];for(;r<i;r++){const{prevout:i}=t.inputs[r];s.push(this.readCoin(e,i))}const n=await Promise.all(s);for(const e of n){if(!e||e.spent)return!1;e.spent=!0,this.undo.push(e)}}return!0}getSize(e){let t=0;t+=e.inputs.length;for(const{prevout:r}of e.inputs){const e=this.getEntry(r);e&&(t+=e.getSize())}return t}toWriter(e,t){for(const{prevout:r}of t.inputs){const t=this.getEntry(r);t?(e.writeU8(1),t.toWriter(e)):e.writeU8(0)}return e}fromReader(e,t){for(const{prevout:r}of t.inputs){if(0===e.readU8())continue;const t=c.fromReader(e);this.addEntry(r,t)}return this}static fromReader(e,t){return(new this).fromReader(e,t)}}}],["bcoin","/lib/coins/coins.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(130,r);r.exports=class{constructor(){this.outputs=new Map}add(e,t){return o(e>>>0===e),o(t),this.outputs.set(e,t),t}addOutput(e,t){return this.add(e,a.fromOutput(t))}addIndex(e,t,r){return this.add(t,a.fromTX(e,t,r))}addCoin(e){return this.add(e.index,a.fromCoin(e))}has(e){return this.outputs.has(e)}isUnspent(e){const t=this.outputs.get(e);return!(!t||t.spent)}get(e){return this.outputs.get(e)||null}getOutput(e){const t=this.outputs.get(e);return t?t.output:null}getCoin(e){const t=this.outputs.get(e.index);return t?t.toCoin(e):null}spend(e){const t=this.get(e);return!t||t.spent?null:(t.spent=!0,t)}remove(e){const t=this.get(e);return t?(this.outputs.delete(e),t):null}isEmpty(){return 0===this.outputs.size}fromTX(e,t){o("number"==typeof t);for(let r=0;r<e.outputs.length;r++){if(e.outputs[r].script.isUnspendable())continue;const i=a.fromTX(e,r,t);this.outputs.set(r,i)}return this}static fromTX(e,t){return(new this).fromTX(e,t)}}}],["bcoin","/lib/coins/coinentry.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(127,r),c=__browser_require__(112,r),u=__browser_require__(131,r),{encoding:f}=a,l=1,d=(1<<32-l>>>0)-1;r.exports=class{constructor(){this.version=1,this.height=-1,this.coinbase=!1,this.output=new c,this.spent=!1,this.raw=null}toOutput(){return this.output}toCoin(e){const t=new h;return t.version=this.version,t.height=this.height,t.coinbase=this.coinbase,t.script=this.output.script,t.value=this.output.value,t.hash=e.hash,t.index=e.index,t}fromOutput(e){return this.output=e,this}static fromOutput(e){return(new this).fromOutput(e)}fromCoin(e){return this.version=e.version,this.height=e.height,this.coinbase=e.coinbase,this.output.script=e.script,this.output.value=e.value,this}static fromCoin(e){return(new this).fromCoin(e)}fromTX(e,t,r){return o("number"==typeof t),o("number"==typeof r),o(t>=0&&t<e.outputs.length),this.version=e.version,this.height=r,this.coinbase=e.isCoinbase(),this.output=e.outputs[t],this}static fromTX(e,t,r){return(new this).fromTX(e,t,r)}getSize(){if(this.raw)return this.raw.length;let e=0;return e+=f.sizeVarint(this.version),e+=4,e+=u.size(this.output)}toWriter(e){if(this.raw)return e.writeBytes(this.raw),e;let t=this.height,r=0;return this.coinbase&&(r|=1),-1===t&&(t=d),r|=t<<l,e.writeVarint(this.version),e.writeU32(r),u.pack(this.output,e),e}toRaw(){if(this.raw)return this.raw;const e=this.getSize(),t=a.write(e);return this.toWriter(t),this.raw=t.render(),this.raw}fromReader(e){const t=e.readVarint(),r=e.readU32();let i=r>>>l;return i===d&&(i=-1),this.version=t,this.coinbase=0!=(1&r),this.height=i,u.unpack(this.output,e),this}static fromReader(e){return(new this).fromReader(e)}fromRaw(e){return this.fromReader(a.read(e)),this.raw=e,this}static fromRaw(e){return(new this).fromRaw(e)}}}],["bcoin","/lib/coins/compress.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),{encoding:a}=__browser_require__(24,r),h=__browser_require__(38,r),c=__browser_require__(17,r),u=6,f=Buffer.alloc(0);function l(e,t){const r=e.getPubkeyhash(!0);if(r)return t.writeU8(0),t.writeBytes(r),t;const i=e.getScripthash();if(i)return t.writeU8(1),t.writeBytes(i),t;const s=e.getPubkey(!0);if(s&&p(s)){const e=function(e){let t;switch(e[0]){case 2:case 3:t=e;break;case 4:(t=h.publicKeyConvert(e,!0))[0]=4|1&e[64];break;default:throw new Error("Bad point format.")}return o(33===t.length),t}(s);return t.writeBytes(e),t}return t.writeVarint(e.raw.length+u),t.writeBytes(e.raw),t}function d(e,t){switch(t.readU8()){case 0:{const r=t.readBytes(20,!0);e.fromPubkeyhash(r);break}case 1:{const r=t.readBytes(20,!0);e.fromScripthash(r);break}case 2:case 3:case 4:case 5:{t.offset-=1;const r=function(e){const t=e[0];switch(o(33===e.length),t){case 2:case 3:return e;case 4:e[0]=2;break;case 5:e[0]=3;break;default:throw new Error("Bad point format.")}const r=h.publicKeyConvert(e,!1);return e[0]=t,r}(t.readBytes(33,!0));e.fromPubkey(r);break}default:{t.offset-=1;const r=t.readVarint()-u;if(r>c.MAX_SCRIPT_SIZE)e.fromNulldata(f),t.seek(r);else{const i=t.readBytes(r);e.fromRaw(i)}break}}return e}function p(e){if(0===e.length)return!1;switch(e[0]){case 2:case 3:return 33===e.length;case 4:return 65===e.length&&h.publicKeyVerify(e);default:return!1}}e.pack=function(e,t){return t.writeVarint(e.value),l(e.script,t),t},e.unpack=function(e,t){return e.value=t.readVarint(),d(e.script,t),e},e.size=function(e){let t=0;return t+=a.sizeVarint(e.value),t+=function(e){if(e.isPubkeyhash(!0))return 21;if(e.isScripthash())return 21;const t=e.getPubkey(!0);if(t&&p(t))return 33;let r=0;return r+=a.sizeVarint(e.raw.length+u),r+=e.raw.length}(e.script)}}],["bcoin","/lib/coins/undocoins.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(130,r);r.exports=class{constructor(){this.items=[]}push(e){return this.items.push(e)}getSize(){let e=0;e+=4;for(const t of this.items)e+=t.getSize();return e}toRaw(){const e=this.getSize(),t=a.write(e);t.writeU32(this.items.length);for(const e of this.items)e.toWriter(t);return t.render()}fromRaw(e){const t=a.read(e),r=t.readU32();for(let e=0;e<r;e++)this.items.push(h.fromReader(t));return this}static fromRaw(e){return(new this).fromRaw(e)}isEmpty(){return 0===this.items.length}commit(){const e=this.toRaw();return this.items.length=0,e}apply(e,t){const r=this.items.pop();o(r),e.addEntry(t,r)}}}],["bcoin","/lib/hd/public.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(105,r),c=__browser_require__(134,r),u=__browser_require__(94,r),f=__browser_require__(33,r),l=__browser_require__(136,r),d=__browser_require__(38,r),p=__browser_require__(14,r),b=__browser_require__(17,r),g=__browser_require__(138,r);class m{constructor(e){this.depth=0,this.parentFingerPrint=0,this.childIndex=0,this.chainCode=b.ZERO_HASH,this.publicKey=g.ZERO_KEY,this.fingerPrint=-1,e&&this.fromOptions(e)}fromOptions(e){return o(e,"No options for HDPublicKey"),o((255&e.depth)===e.depth),o(e.parentFingerPrint>>>0===e.parentFingerPrint),o(e.childIndex>>>0===e.childIndex),o(null!=e.chainCode&&!0===e.chainCode._isBuffer),o(null!=e.publicKey&&!0===e.publicKey._isBuffer),this.depth=e.depth,this.parentFingerPrint=e.parentFingerPrint,this.childIndex=e.childIndex,this.chainCode=e.chainCode,this.publicKey=e.publicKey,this}static fromOptions(e){return(new this).fromOptions(e)}toPublic(){return this}xprivkey(e){return null}xpubkey(e){return this.toBase58(e)}destroy(){this.depth=0,this.childIndex=0,this.parentFingerPrint=0,l(this.chainCode),l(this.publicKey),this.fingerPrint=-1}derive(e,t){if(o("number"==typeof e),e>>>0!==e)throw new Error("Index out of range.");if(e&g.HARDENED||t)throw new Error("Cannot derive hardened.");if(this.depth>=255)throw new Error("Depth too high.");const r=this.getID(e),i=g.cache.get(r);if(i)return i;const s=a.pool(37);s.writeBytes(this.publicKey),s.writeU32BE(e);const n=s.render(),h=c.mac(n,this.chainCode),f=h.slice(0,32),l=h.slice(32,64);let p;try{p=d.publicKeyTweakAdd(this.publicKey,f,!0)}catch(t){return this.derive(e+1)}if(-1===this.fingerPrint){const e=u.digest(this.publicKey);this.fingerPrint=e.readUInt32BE(0,!0)}const b=new this.constructor;return b.depth=this.depth+1,b.parentFingerPrint=this.fingerPrint,b.childIndex=e,b.chainCode=l,b.publicKey=p,g.cache.set(r,b),b}getID(e){return"b"+this.publicKey.toString("hex")+e}deriveAccount(e,t,r){return o(e>>>0===e),o(t>>>0===t),o(r>>>0===r),o(this.isAccount(r),"Cannot derive account index."),this}isMaster(){return g.isMaster(this)}isAccount(e){return g.isAccount(this,e)}static isValidPath(e){try{return g.parsePath(e,!1),!0}catch(e){return!1}}derivePath(e){const t=g.parsePath(e,!1);let r=this;for(const e of t)r=r.derive(e);return r}equals(e){return o(m.isHDPublicKey(e)),this.depth===e.depth&&this.parentFingerPrint===e.parentFingerPrint&&this.childIndex===e.childIndex&&this.chainCode.equals(e.chainCode)&&this.publicKey.equals(e.publicKey)}compare(e){o(m.isHDPublicKey(e));let t=this.depth-e.depth;return 0!==t?t:0!==(t=this.parentFingerPrint-e.parentFingerPrint)?t:0!==(t=this.childIndex-e.childIndex)?t:0!==(t=this.chainCode.compare(e.chainCode))?t:0!==(t=this.publicKey.compare(e.publicKey))?t:0}toJSON(e){return{xpubkey:this.xpubkey(e)}}fromJSON(e,t){return o(e.xpubkey,"Could not handle HD key JSON."),this.fromBase58(e.xpubkey,t),this}static fromJSON(e,t){return(new this).fromJSON(e,t)}static isBase58(e,t){if("string"!=typeof e)return!1;if(e.length<4)return!1;const r=e.substring(0,4);try{return p.fromPublic58(r,t),!0}catch(e){return!1}}static isRaw(e,t){if(null==e||!0!==e._isBuffer)return!1;if(e.length<4)return!1;const r=e.readUInt32BE(0,!0);try{return p.fromPublic(r,t),!0}catch(e){return!1}}fromBase58(e,t){return o("string"==typeof e),this.fromRaw(h.decode(e),t)}fromReader(e,t){const r=e.readU32BE();return p.fromPublic(r,t),this.depth=e.readU8(),this.parentFingerPrint=e.readU32BE(),this.childIndex=e.readU32BE(),this.chainCode=e.readBytes(32),this.publicKey=e.readBytes(33),e.verifyChecksum(f.digest),this}fromRaw(e,t){return this.fromReader(a.read(e),t)}toBase58(e){return h.encode(this.toRaw(e))}toWriter(e,t){return t=p.get(t),e.writeU32BE(t.keyPrefix.xpubkey),e.writeU8(this.depth),e.writeU32BE(this.parentFingerPrint),e.writeU32BE(this.childIndex),e.writeBytes(this.chainCode),e.writeBytes(this.publicKey),e.writeChecksum(f.digest),e}getSize(){return 82}toRaw(e){return this.toWriter(a.write(82),e).render()}static fromBase58(e,t){return(new this).fromBase58(e,t)}static fromReader(e,t){return(new this).fromReader(e,t)}static fromRaw(e,t){return(new this).fromRaw(e,t)}static isHDPublicKey(e){return e instanceof m}}r.exports=m}],["bcrypto","/lib/sha512-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(135,r)}],["bcrypto","/lib/js/sha512.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(35,r),a=__browser_require__(37,r),h=-1,c=Buffer.alloc(16,0),u=Buffer.alloc(128,0);u[0]=128;const f=new Uint32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);class l{constructor(){this.state=new Uint32Array(16),this.msg=new Uint32Array(160),this.block=Buffer.allocUnsafe(128),this.size=h}init(){return this.state[0]=1779033703,this.state[1]=4089235720,this.state[2]=3144134277,this.state[3]=2227873595,this.state[4]=1013904242,this.state[5]=4271175723,this.state[6]=2773480762,this.state[7]=1595750129,this.state[8]=1359893119,this.state[9]=2917565137,this.state[10]=2600822924,this.state[11]=725511199,this.state[12]=528734635,this.state[13]=4215389547,this.state[14]=1541459225,this.state[15]=327033209,this.size=0,this}update(e){return o(null!=e&&!0===e._isBuffer),this._update(e,e.length),this}final(){return this._final(Buffer.allocUnsafe(64))}_update(e,t){o(this.size!==h,"Context is not initialized.");let r=127&this.size,i=0;if(this.size+=t,r>0){let s=128-r;if(s>t&&(s=t),e.copy(this.block,r,i,i+s),t-=s,i+=s,(r+=s)<128)return;this._transform(this.block,0)}for(;t>=128;)this._transform(e,i),i+=128,t-=128;t>0&&e.copy(this.block,0,i,i+t)}_final(e){o(this.size!==h,"Context is not initialized.");const t=127&this.size,r=8*this.size;q(c,r*(1/4294967296)>>>0,8),q(c,r>>>0,12),this._update(u,1+(239-t&127)),this._update(c,16);for(let t=0;t<16;t++)q(e,this.state[t],4*t),this.state[t]=0;for(let e=0;e<160;e++)this.msg[e]=0;for(let e=0;e<128;e++)this.block[e]=0;return this.size=h,e}_prepare(e,t){const r=this.msg;let i=0;for(;i<32;i++)r[i]=(n=t+4*i,16777216*(s=e)[n++]+65536*s[n++]+256*s[n++]+s[n]);for(var s,n;i<160;i+=2){const e=T(r[i-4],r[i-3]),t=C(r[i-4],r[i-3]),s=r[i-14],n=r[i-13],o=B(r[i-30],r[i-29]),a=N(r[i-30],r[i-29]),h=r[i-32],c=r[i-31];r[i+0]=g(e,t,s,n,o,a,h,c),r[i+1]=m(e,t,s,n,o,a,h,c)}}_transform(e,t){const r=this.msg;this._prepare(e,t);let i=this.state[0],s=this.state[1],n=this.state[2],o=this.state[3],a=this.state[4],h=this.state[5],c=this.state[6],u=this.state[7],l=this.state[8],g=this.state[9],m=this.state[10],y=this.state[11],v=this.state[12],E=this.state[13],S=this.state[14],B=this.state[15];for(let e=0;e<r.length;e+=2){let t=S,d=B,N=M(l,g),T=P(l,g);const C=I(l,g,m,y,v,E),q=k(l,g,m,y,v,E),j=f[e+0],D=f[e+1],U=r[e+0],L=r[e+1],z=_(t,d,N,T,C,q,j,D,U,L),F=w(t,d,N,T,C,q,j,D,U,L),H=p(t=x(i,s),d=R(i,s),N=A(i,s,n,o,a,h),T=O(i,s,n,o,a,h)),V=b(t,d,N,T);S=v,B=E,v=m,E=y,m=l,y=g,l=p(c,u,z,F),g=b(u,u,z,F),c=a,u=h,a=n,h=o,n=i,o=s,i=p(z,F,H,V),s=b(z,F,H,V)}d(this.state,0,i,s),d(this.state,2,n,o),d(this.state,4,a,h),d(this.state,6,c,u),d(this.state,8,l,g),d(this.state,10,m,y),d(this.state,12,v,E),d(this.state,14,S,B)}static hash(){return new l}static hmac(){return new a(l,128)}static digest(e){return l.ctx.init().update(e).final()}static root(e,t){return o(null!=e&&!0===e._isBuffer&&64===e.length),o(null!=t&&!0===t._isBuffer&&64===t.length),l.ctx.init().update(e).update(t).final()}static multi(e,t,r){const{ctx:i}=l;return i.init(),i.update(e),i.update(t),r&&i.update(r),i.final()}static mac(e,t){return l.hmac().init(t).update(e).final()}}function d(e,t,r,i){const s=e[t+0],n=i+e[t+1]>>>0,o=(n<i)+r+s;e[t+0]=o>>>0,e[t+1]=n}function p(e,t,r,i){return(t+i>>>0<t)+e+r>>>0}function b(e,t,r,i){return t+i>>>0}function g(e,t,r,i,s,n,o,a){let h=0,c=t;return h+=(c=c+i>>>0)<t,h+=(c=c+n>>>0)<n,e+r+s+o+(h+=(c=c+a>>>0)<a)>>>0}function m(e,t,r,i,s,n,o,a){return t+i+n+a>>>0}function _(e,t,r,i,s,n,o,a,h,c){let u=0,f=t;return u+=(f=f+i>>>0)<t,u+=(f=f+n>>>0)<n,u+=(f=f+a>>>0)<a,e+r+s+o+h+(u+=(f=f+c>>>0)<c)>>>0}function w(e,t,r,i,s,n,o,a,h,c){return t+i+n+a+c>>>0}function y(e,t,r){return(t<<32-r|e>>>r)>>>0}function v(e,t,r){return(e<<32-r|t>>>r)>>>0}function E(e,t,r){return e>>>r}function S(e,t,r){return(e<<32-r|t>>>r)>>>0}function I(e,t,r,i,s,n){return(e&r^~e&s)>>>0}function k(e,t,r,i,s,n){return(t&i^~t&n)>>>0}function A(e,t,r,i,s,n){return(e&r^e&s^r&s)>>>0}function O(e,t,r,i,s,n){return(t&i^t&n^i&n)>>>0}function x(e,t){return(y(e,t,28)^y(t,e,2)^y(t,e,7))>>>0}function R(e,t){return(v(e,t,28)^v(t,e,2)^v(t,e,7))>>>0}function M(e,t){return(y(e,t,14)^y(e,t,18)^y(t,e,9))>>>0}function P(e,t){return(v(e,t,14)^v(e,t,18)^v(t,e,9))>>>0}function B(e,t){return(y(e,t,1)^y(e,t,8)^E(e,0,7))>>>0}function N(e,t){return(v(e,t,1)^v(e,t,8)^S(e,t,7))>>>0}function T(e,t){return(y(e,t,19)^y(t,e,29)^E(e,0,6))>>>0}function C(e,t){return(v(e,t,19)^v(t,e,29)^S(e,t,6))>>>0}function q(e,t,r){return e[r++]=t>>>24,e[r++]=t>>>16,e[r++]=t>>>8,e[r++]=t,r}l.native=0,l.id="SHA512",l.size=64,l.bits=512,l.blockSize=128,l.zero=Buffer.alloc(64,0),l.ctx=new l,r.exports=l}],["bcrypto","/lib/cleanse-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(137,r)}],["bcrypto","/lib/js/cleanse.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(35,r),a=__browser_require__(41,r);function h(e){o(null!=e&&!0===e._isBuffer),a.randomFill(e,0,e.length)}h.native=0,r.exports=h}],["bcoin","/lib/hd/common.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(139,r),h=e;h.HARDENED=2147483648,h.MIN_ENTROPY=128,h.MAX_ENTROPY=512,h.cache=new a(500),h.parsePath=function(e,t){o("string"==typeof e),o("boolean"==typeof t),o(e.length>=1),o(e.length<=3062);const r=e.split("/"),i=r[0];if("m"!==i&&"M"!==i&&"m'"!==i&&"M'"!==i)throw new Error("Invalid path root.");const s=[];for(let e=1;e<r.length;e++){let i=r[e];const n="'"===i[i.length-1];if(n&&(i=i.slice(0,-1)),i.length>10)throw new Error("Path index too large.");if(!/^\d+$/.test(i))throw new Error("Path index is non-numeric.");let o=parseInt(i,10);if(o>>>0!==o)throw new Error("Path index out of range.");if(n&&(o|=h.HARDENED,o>>>=0),!t&&o&h.HARDENED)throw new Error("Path index cannot be hardened.");s.push(o)}return s},h.isMaster=function(e){return 0===e.depth&&0===e.childIndex&&0===e.parentFingerPrint},h.isAccount=function(e,t){if(null!=t){const r=(h.HARDENED|t)>>>0;if(e.childIndex!==r)return!1}return 3===e.depth&&0!=(e.childIndex&h.HARDENED)},h.ZERO_KEY=Buffer.alloc(33,0)}],["blru","/lib/blru.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(140,r)}],["blru","/lib/lru.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r);class a{constructor(e,t){this.key=e,this.value=t,this.next=null,this.prev=null}}class h{constructor(e){this.lru=e,this.ops=[]}set(e,t){this.ops.push(new c(!1,e,t))}remove(e){this.ops.push(new c(!0,e,null))}clear(){this.ops.length=0}commit(){for(const e of this.ops)e.remove?this.lru.remove(e.key):this.lru.set(e.key,e.value);this.ops.length=0}}class c{constructor(e,t,r){this.remove=e,this.key=t,this.value=r}}r.exports=class{constructor(e,t,r){o("number"==typeof e,"Capacity must be a number."),o(e>=0,"Capacity cannot be negative."),o(!t||"function"==typeof t,"Bad size callback."),o(!r||"function"==typeof r),this.map=r?new r:new Map,this.size=0,this.items=0,this.head=null,this.tail=null,this.pending=null,this.capacity=e,this.getSize=t}_getSize(e){return this.getSize?120+this.getSize(e.value,e.key):1}_compact(){if(this.size<=this.capacity)return;let e=null,t=null;for(e=this.head;e&&!(this.size<=this.capacity);e=t)this.size-=this._getSize(e),this.items-=1,this.map.delete(e.key),t=e.next,e.prev=null,e.next=null;if(!e)return this.head=null,void(this.tail=null);this.head=e,e.prev=null}reset(){let e,t;for(e=this.head;e;e=t)this.map.delete(e.key),this.items-=1,t=e.next,e.prev=null,e.next=null;o(!e),this.size=0,this.head=null,this.tail=null}set(e,t){if(0===this.capacity)return;let r=this.map.get(e);if(r)return this.size-=this._getSize(r),r.value=t,this.size+=this._getSize(r),this._removeList(r),this._appendList(r),void this._compact();r=new a(e,t),this.map.set(e,r),this._appendList(r),this.size+=this._getSize(r),this.items+=1,this._compact()}get(e){if(0===this.capacity)return null;const t=this.map.get(e);return t?(this._removeList(t),this._appendList(t),t.value):null}has(e){return 0!==this.capacity&&this.map.has(e)}remove(e){if(0===this.capacity)return!1;const t=this.map.get(e);return!!t&&(this.size-=this._getSize(t),this.items-=1,this.map.delete(e),this._removeList(t),!0)}_prependList(e){this._insertList(null,e)}_appendList(e){this._insertList(this.tail,e)}_insertList(e,t){o(!t.next),o(!t.prev),null!=e?(t.next=e.next,t.prev=e,e.next=t,t.next&&(t.next.prev=t),e===this.tail&&(this.tail=t)):this.head?(this.head.prev=t,t.next=this.head,this.head=t):(this.head=t,this.tail=t)}_removeList(e){e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev||this.head),this.head||o(!this.tail),this.tail||o(!this.head),e.prev=null,e.next=null}keys(){const e=[];for(let t=this.head;t;t=t.next)t===this.head&&o(!t.prev),t.prev||o(t===this.head),t.next||o(t===this.tail),e.push(t.key);return e}values(){const e=[];for(let t=this.head;t;t=t.next)e.push(t.value);return e}toArray(){const e=[];for(let t=this.head;t;t=t.next)e.push(t);return e}batch(){return new h(this)}start(){o(!this.pending),this.pending=this.batch()}clear(){o(this.pending),this.pending.clear()}drop(){o(this.pending),this.pending=null}commit(){o(this.pending),this.pending.commit(),this.pending=null}push(e,t){o(this.pending),0!==this.capacity&&this.pending.set(e,t)}unpush(e){o(this.pending),0!==this.capacity&&this.pending.remove(e)}}}],["bcrypto","/lib/secp256k1-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(142,r)}],["bcrypto","/lib/js/secp256k1.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(143,r),a=__browser_require__(154,r),h=__browser_require__(157,r);r.exports=new o("SECP256K1",a,h)}],["bcrypto","/lib/js/ecdsa.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(5,r),a=__browser_require__(144,r),h=__browser_require__(147,r),c=__browser_require__(149,r),u=__browser_require__(150,r),f=__browser_require__(155,r),l=__browser_require__(156,r);r.exports=class{constructor(e,t,r){o("string"==typeof e),o(t),this.id=e,this.type="ecdsa",this.hash=t,this.native=0,this._pre=r||null,this._curve=null,this._schnorr=null}get curve(){return this._curve||(this._curve=l.curve(this.id,this._pre),this._curve.precompute(h),this._pre=null),this._curve}get schnorr(){return this._schnorr||(this._schnorr=new u(this.curve,this.hash)),this._schnorr}get size(){return this.curve.fieldSize}get bits(){return this.curve.fieldBits}privateKeyGenerate(){const e=this.curve.randomScalar(h);return this.curve.encodeScalar(e)}privateKeyVerify(e){let t;o(null!=e&&!0===e._isBuffer);try{t=this.curve.decodeScalar(e)}catch(e){return!1}return!t.isZero()&&t.cmp(this.curve.n)<0}privateKeyExport(e){const t=this.publicKeyCreate(e,!1),{x:r,y:i}=this.publicKeyExport(t);return{d:Buffer.from(e),x:r,y:i}}privateKeyImport(e){o(e&&"object"==typeof e);const t=a.decode(e.d,this.curve.endian);if(t.isZero()||t.cmp(this.curve.n)>=0)throw new Error("Invalid private key.");return this.curve.encodeScalar(t)}privateKeyTweakAdd(e,t){const r=this.curve.decodeScalar(t);if(r.cmp(this.curve.n)>=0)throw new Error("Invalid scalar.");const i=this.curve.decodeScalar(e);if(i.isZero()||i.cmp(this.curve.n)>=0)throw new Error("Invalid private key.");const s=i.add(r).imod(this.curve.n);if(s.isZero())throw new Error("Invalid private key.");return this.curve.encodeScalar(s)}privateKeyTweakMul(e,t){const r=this.curve.decodeScalar(t);if(r.isZero()||r.cmp(this.curve.n)>=0)throw new Error("Invalid scalar.");const i=this.curve.decodeScalar(e);if(i.isZero()||i.cmp(this.curve.n)>=0)throw new Error("Invalid private key.");const s=i.mul(r).imod(this.curve.n);if(s.isZero())throw new Error("Invalid private key.");return this.curve.encodeScalar(s)}privateKeyReduce(e){o(null!=e&&!0===e._isBuffer),e.length>this.curve.scalarSize&&(e=e.slice(0,this.curve.scalarSize));const t=a.decode(e,this.curve.endian).imod(this.curve.n);if(t.isZero())throw new Error("Invalid private key.");return this.curve.encodeScalar(t)}privateKeyNegate(e){const t=this.curve.decodeScalar(e);if(t.isZero()||t.cmp(this.curve.n)>=0)throw new Error("Invalid private key.");const r=t.neg().imod(this.curve.n);return this.curve.encodeScalar(r)}privateKeyInvert(e){const t=this.curve.decodeScalar(e);if(t.isZero()||t.cmp(this.curve.n)>=0)throw new Error("Invalid private key.");const r=t.invert(this.curve.n);return this.curve.encodeScalar(r)}publicKeyCreate(e,t){const r=this.curve.decodeScalar(e);if(r.isZero()||r.cmp(this.curve.n)>=0)throw new Error("Invalid private key.");return this.curve.g.mulBlind(r).encode(t)}publicKeyConvert(e,t){return this.curve.decodePoint(e).encode(t)}publicKeyFromUniform(e,t){const r=this.curve.decodeUniform(e);return this.curve.pointFromUniform(r).encode(t)}publicKeyToUniform(e,t=h.randomInt()){const r=this.curve.decodePoint(e),i=this.curve.pointToUniform(r,t);return this.curve.encodeUniform(i,h)}publicKeyFromHash(e,t){return this.curve.pointFromHash(e).encode(t)}publicKeyToHash(e){const t=this.curve.decodePoint(e);return this.curve.pointToHash(t,h)}publicKeyVerify(e){o(null!=e&&!0===e._isBuffer);try{this.curve.decodePoint(e)}catch(e){return!1}return!0}publicKeyExport(e){const{x:t,y:r}=this.curve.decodePoint(e);return{x:this.curve.encodeField(t.fromRed()),y:this.curve.encodeField(r.fromRed())}}publicKeyImport(e,t){o(e&&"object"==typeof e);const r=a.decode(e.x,this.curve.endian);if(r.cmp(this.curve.p)>=0)throw new Error("Invalid point.");if(null!=e.y){const i=a.decode(e.y,this.curve.endian);if(i.cmp(this.curve.p)>=0)throw new Error("Invalid point.");const s=this.curve.point(r,i);if(!s.validate())throw new Error("Invalid point.");return s.encode(t)}return this.curve.pointFromX(r,e.sign).encode(t)}publicKeyTweakAdd(e,t,r){const i=this.curve.decodeScalar(t);if(i.cmp(this.curve.n)>=0)throw new Error("Invalid scalar.");const s=this.curve.decodePoint(e);return this.curve.g.jmul(i).add(s).encode(r)}publicKeyTweakMul(e,t,r){const i=this.curve.decodeScalar(t);if(i.isZero()||i.cmp(this.curve.n)>=0)throw new Error("Invalid scalar.");return this.curve.decodePoint(e).mul(i).encode(r)}publicKeyCombine(e,t){o(Array.isArray(e));let r=this.curve.jpoint();for(const t of e){const e=this.curve.decodePoint(t);r=r.add(e)}return r.encode(t)}publicKeyNegate(e,t){return this.curve.decodePoint(e).neg().encode(t)}signatureNormalize(e){const[t,r]=this._decodeCompact(e);return r.cmp(this.curve.nh)>0&&r.ineg().imod(this.curve.n),this._encodeCompact(t,r)}signatureNormalizeDER(e){const[t,r]=this._decodeDER(e,!1);return r.cmp(this.curve.nh)>0&&r.ineg().imod(this.curve.n),this._encodeDER(t,r)}signatureExport(e){const[t,r]=this._decodeCompact(e);return this._encodeDER(t,r)}signatureImport(e){const[t,r]=this._decodeDER(e,!1);return this._encodeCompact(t,r)}isLowS(e){let t;o(null!=e&&!0===e._isBuffer);try{[,t]=this._decodeCompact(e)}catch(e){return!1}return t.cmp(this.curve.nh)<=0}isLowDER(e){let t;o(null!=e&&!0===e._isBuffer);try{[,t]=this._decodeDER(e,!1)}catch(e){return!1}return t.cmp(this.curve.nh)<=0}sign(e,t){const[r,i]=this._sign(e,t);return this._encodeCompact(r,i)}signRecoverable(e,t){const[r,i,s]=this._sign(e,t);return[this._encodeCompact(r,i),s]}signDER(e,t){const[r,i]=this._sign(e,t);return this._encodeDER(r,i)}signRecoverableDER(e,t){const[r,i,s]=this._sign(e,t);return[this._encodeDER(r,i),s]}_sign(e,t){const{n:r,nh:i}=this.curve,s=this.curve.g,n=this.curve.decodeScalar(t);if(n.isZero()||n.cmp(r)>=0)throw new Error("Invalid private key.");const o=this._reduce(e),a=this.curve.encodeScalar(o),c=new f(this.hash,t,a);for(;;){const e=c.generate(this.curve.scalarSize),t=this._truncate(e);if(t.isZero()||t.cmp(r)>=0)continue;const a=s.mulBlind(t);if(a.isInfinity())continue;const u=a.getX(),f=u.mod(r);if(f.isZero())continue;const l=this.curve.randomScalar(h),d=t.mul(l).fermat(r),p=n.mul(l).imod(r),b=o.mul(l).imod(r),g=f.mul(p).iadd(b).imod(r).mul(d).imod(r);if(g.isZero())continue;let m=a.isOdd()|!u.eq(f)<<1;return g.cmp(i)>0&&(g.ineg().imod(r),m^=1),[f,g,m]}}verify(e,t,r){let i,s;o(null!=e&&!0===e._isBuffer),o(null!=t&&!0===t._isBuffer),o(null!=r&&!0===r._isBuffer);try{[i,s]=this._decodeCompact(t)}catch(e){return!1}try{return this._verify(e,i,s,r)}catch(e){return!1}}verifyDER(e,t,r){let i,s;o(null!=e&&!0===e._isBuffer),o(null!=t&&!0===t._isBuffer),o(null!=r&&!0===r._isBuffer);try{[i,s]=this._decodeDER(t,!1)}catch(e){return!1}try{return this._verify(e,i,s,r)}catch(e){return!1}}_verify(e,t,r,i){const{n:s}=this.curve,n=this.curve.g,o=this._reduce(e),a=this.curve.decodePoint(i);if(t.isZero()||t.cmp(s)>=0)return!1;if(r.isZero()||r.cmp(s)>=0)return!1;const h=r.invert(s),c=o.mul(h).imod(s),u=t.mul(h).imod(s);return n.jmulAdd(c,a,u).eqXToP(t)}recover(e,t,r,i){let s,n,a;o(null!=e&&!0===e._isBuffer),o(null!=t&&!0===t._isBuffer),o(r>>>0===r),o((3&r)===r,"The recovery param is more than two bits.");try{[s,n]=this._decodeCompact(t)}catch(e){return null}try{a=this._recover(e,s,n,r)}catch(e){return null}return a.encode(i)}recoverDER(e,t,r,i){let s,n,a;o(null!=e&&!0===e._isBuffer),o(null!=t&&!0===t._isBuffer),o(r>>>0===r),o((3&r)===r,"The recovery param is more than two bits.");try{[s,n]=this._decodeDER(t,!1)}catch(e){return null}try{a=this._recover(e,s,n,r)}catch(e){return null}return a.encode(i)}_recover(e,t,r,i){const{p:s,n:n}=this.curve,o=this.curve.g,a=this._reduce(e);if(t.isZero()||t.cmp(n)>=0)throw new Error("Invalid R value.");if(r.isZero()||r.cmp(n)>=0)throw new Error("Invalid S value.");const h=0!=(1&i);let c=t;if(i>>>1){if(c.cmp(s.mod(n))>=0)throw new Error("Invalid R value.");c=c.add(n)}const u=this.curve.pointFromX(c,h),f=t.invert(n),l=a.mul(f).ineg().imod(n),d=r.mul(f).imod(n),p=o.mulAdd(l,u,d);if(p.isInfinity())throw new Error("Invalid point.");return p}derive(e,t,r){const i=this.curve.decodePoint(e),s=this.curve.decodeScalar(t);if(s.isZero()||s.cmp(this.curve.n)>=0)throw new Error("Invalid private key.");if(this.curve.h.cmpn(1)>0&&i.isSmall())throw new Error("Invalid point.");return i.mulConst(s,h).encode(r)}schnorrSign(e,t){return this.schnorr.sign(e,t)}schnorrVerify(e,t,r){return this.schnorr.verify(e,t,r)}schnorrVerifyBatch(e){return this.schnorr.verifyBatch(e)}_encodeCompact(e,t){return Buffer.concat([this.curve.encodeScalar(e),this.curve.encodeScalar(t)])}_decodeCompact(e){o(null!=e&&!0===e._isBuffer);const{n:t}=this.curve,r=this.curve.scalarSize;if(e.length!==2*r)throw new Error("Invalid signature size.");const i=e.slice(0,r),s=e.slice(r,2*r),n=this.curve.decodeScalar(i),a=this.curve.decodeScalar(s);if(n.cmp(t)>=0||a.cmp(t)>=0)throw new Error("Invalid signature.");return[n,a]}_encodeDER(e,t){const r=c.sizeInt(e)+c.sizeInt(t),i=Buffer.alloc(c.sizeSeq(r));let s=0;return s=c.writeSeq(i,s,r),s=c.writeInt(i,s,e),s=c.writeInt(i,s,t),o(s===i.length),i}_decodeDER(e,t){o(null!=e&&!0===e._isBuffer),o("boolean"==typeof t);const{n:r}=this.curve;let i,s,n=0;if(n=c.readSeq(e,n,t),[i,n]=c.readInt(e,n,t),[s,n]=c.readInt(e,n,t),t&&n!==e.length)throw new Error("Trailing bytes.");if(i.cmp(r)>=0||s.cmp(r)>=0)throw new Error("Invalid signature.");return[i,s]}_truncate(e){o(null!=e&&!0===e._isBuffer);const t=this.curve.n.bitLength(),r=t+7>>>3;e.length>r&&(e=e.slice(0,r));const i=a.decode(e,this.curve.endian),s=8*e.length-t;return s>0&&i.iushrn(s),i}_reduce(e){return this._truncate(e).imod(this.curve.n)}}}],["bcrypto","/lib/bn-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(145,r)}],["bcrypto","/lib/js/bn.js",function(e,t,r,i,s,n){"use strict";const{custom:o}=__browser_require__(146,r),a=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176],u={p192:null,p224:null,p521:null,k256:null,p25519:null,p448:null},f={NONE:0,QUO:1,REM:2,BOTH:3,EUCLID:4,ALL:7},l="function"==typeof BigInt;class d{constructor(e,t,r){this.words=[0],this.length=1,this.negative=0,this.red=null,this.from(e,t,r)}_iadd(e,t){let r=0,i=0;for(e.length<t.length&&([e,t]=[t,e]),e!==this&&this._alloc(e.length);i<t.length;i++){const s=(0|e.words[i])+(0|t.words[i])+r;this.words[i]=67108863&s,r=s>>>26}for(;0!==r&&i<e.length;i++){const t=(0|e.words[i])+r;this.words[i]=67108863&t,r=t>>>26}if(this.length=e.length,0!==r)this._alloc(this.length+1),this.words[this.length++]=r;else if(e!==this)for(;i<e.length;i++)this.words[i]=e.words[i];return this}_iaddn(e){if(this.words[0]+=e,this.words[0]<67108864)return this;let t=0;for(this._alloc(this.length+1),this.words[this.length]=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,this.words[t+1]+=1;return this.length=Math.max(this.length,t+1),this}iadd(e){if(A(d.isBN(e),"num","bignum"),this.negative===e.negative)this._iadd(this,e);else{const t=this.ucmp(e);if(0===t)return this.words[0]=0,this.length=1,this.negative=0,this;t<0?(this._isub(e,this),this.negative^=1):this._isub(this,e)}return this}iaddn(e){A(B(e),"num","smi");const t=e<0|0;return t&&(e=-e),this.negative===t?this._iaddn(e):1===this.length&&this.words[0]<e?(this.words[0]=e-this.words[0],this.negative^=1):this._isubn(e),this}add(e){return A(d.isBN(e),"num","bignum"),e.length>this.length?e.clone().iadd(this):this.clone().iadd(e)}addn(e){return this.clone().iaddn(e)}_isub(e,t){let r=0,i=0;for(k(e.length>=t.length),e!==this&&this._alloc(e.length);i<t.length;i++){const s=(0|e.words[i])-(0|t.words[i])+r;r=s>>26,this.words[i]=67108863&s}for(;0!==r&&i<e.length;i++){const t=(0|e.words[i])+r;r=t>>26,this.words[i]=67108863&t}if(k(0===r),e!==this)for(;i<e.length;i++)this.words[i]=e.words[i];return this.length=Math.max(this.length,i),this._strip()}_isubn(e){if(this.words[0]-=e,this.words[0]>=0)return this._normalize();k(1!==this.length),this._alloc(this.length+1);for(let e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.words[this.length]=0,this._strip()}isub(e){if(A(d.isBN(e),"num","bignum"),this.negative!==e.negative)this._iadd(this,e);else{const t=this.ucmp(e);if(0===t)return this.words[0]=0,this.length=1,this.negative=0,this;t<0?(this._isub(e,this),this.negative^=1):this._isub(this,e)}return this}isubn(e){A(B(e),"num","smi");const t=e<0|0;return t&&(e=-e),this.negative!==t?this._iaddn(e):1===this.length&&this.words[0]<e?(this.words[0]=e-this.words[0],this.negative^=1):this._isubn(e),this}sub(e){return this.clone().isub(e)}subn(e){return this.clone().isubn(e)}_mul(e,t){if(A(d.isBN(e),"num","bignum"),A(d.isBN(t),"out","bignum"),10===this.length&&10===e.length)return z(this,e,t);const r=this.length+e.length;return r<63?U(this,e,t):r<1024?L(this,e,t):function(e,t,r){if(!l||e.length+t.length>82595519)return L(e,t,r);const i=BigInt(0),s=BigInt(67108863),n=BigInt(26);let o=e.toBigInt()*t.toBigInt();const a=o<i|0;a&&(o=-o);let h=0;for(;o>i;)r.words[h++]=Number(o&s),o>>=n;0===h&&(r.words[h++]=0);return r.length=h,r.negative=a,r}(this,e,t)}imul(e){return this.mul(e)._move(this)}imuln(e){A(B(e),"num","smi");const t=e<0|0;t&&(e=-e);let r=0;for(let t=0;t<this.length;t++){const i=this.words[t]*e,s=(67108863&i)+(67108863&r);r>>=26,r+=i/67108864|0,r+=s>>>26,this.words[t]=67108863&s}return this.negative^=t,0!==r?(this._alloc(this.length+1),this.words[this.length++]=r):this._strip(),this}mul(e){A(d.isBN(e),"num","bignum");const t=this.length+e.length,r=new d;r.words=new Array(t);for(let e=0;e<t;e++)r.words[e]=0;return this._mul(e,r)}muln(e){return this.clone().imuln(e)}mulShift(e,t){A(d.isBN(e),"num","bignum"),A(t>>>0===t,"bits","uint32");const r=this.mul(e),i=r.utestn(t-1);return r.iushrn(t),this.negative^e.negative?r.isubn(i):r.iaddn(i)}_div(e,t){A(d.isBN(e),"num","bignum"),k((t&f.ALL)===t),k(t!==f.NONE);const r=this,i=e;if(M(!i.isZero()),r.isZero())return[new d(0),new d(0)];const s=r.negative,n=i.negative;r.negative=0,i.negative=0;let o=null,a=null;return r.ucmp(i)<0?(t&f.QUO&&(o=new d(0)),t&f.REM&&(a=r.clone())):1===i.length?(t&f.QUO&&(o=r.quon(i.words[0])),t&f.REM&&(a=r.remn(i.words[0]))):[o,a]=r._wordDiv(i,t),r.negative=s,i.negative=n,t&f.QUO&&(o.negative=r.negative^i.negative,o._normalize()),t&f.REM&&(a.negative=r.negative,a._normalize()),t&f.EUCLID&&(t&f.QUO&&(k(0!=(t&f.REM)),0!==a.negative&&(0!==i.negative?o.iaddn(1):o.isubn(1))),t&f.REM&&0!==a.negative&&(0!==i.negative?a.isub(i):a.iadd(i))),[o,a]}_wordDiv(e,t){let r,i=this.clone(),s=e,n=null;const o=0|s.words[s.length-1],a=26-T(o);0!==a?(s=s.clone(),i.iushln(a),s.iushln(a),r=0|s.words[s.length-1]):r=o;const h=i.length-s.length;if(k(h>=0),t&f.QUO){(n=new d(0)).length=h+1,n.words=new Array(n.length);for(let e=0;e<n.length;e++)n.words[e]=0}const c=i.clone();c._ishlnsubmul(s,1,h),0===c.negative&&(n&&(n.words[h]=1),i=c);for(let e=h-1;e>=0;e--){const t=(67108864*i.words[s.length+e]+i.words[s.length+e-1])/r|0;let o=Math.min(t,67108863);for(i._ishlnsubmul(s,o,e);0!==i.negative;)o-=1,i.negative=0,i._ishlnsubmul(s,1,e),i.ineg();n&&(n.words[e]=o)}return n&&n._strip(),t&f.REM&&0!==a&&i.iushrn(a),[n,i]}_ishlnsubmul(e,t,r){let i=0,s=0;for(this._expand(e.length+r);s<e.length;s++){const n=(0|this.words[s+r])+i,o=e.words[s]*t,a=n-(67108863&o);i=(a>>26)-(o/67108864|0),this.words[s+r]=67108863&a}for(;s<this.length-r;s++){const e=(0|this.words[s+r])+i;i=e>>26,this.words[s+r]=67108863&e}if(0===i)return this._strip();k(-1===i),i=0;for(let e=0;e<this.length;e++){const t=-(0|this.words[e])+i;i=t>>26,this.words[e]=67108863&t}return this.negative=1,this._strip()}quorem(e){return this._div(e,f.BOTH)}iquo(e){return this.quo(e)._move(this)}iquon(e){A(B(e),"num","smi"),M(0!==e);const t=e<0|0;t&&(e=-e);let r=0;for(let t=this.length-1;t>=0;t--){const i=(0|this.words[t])+67108864*r;this.words[t]=i/e|0,r=i%e}return this.negative^=t,this._strip()}quo(e){return this._div(e,f.QUO)[0]}quon(e){return this.clone().iquon(e)}irem(e){return this.rem(e)._move(this)}iremn(e){let t=this.remrn(e);return t<0&&(t=-t),this.words[0]=t,this.length=1,this._normalize()}rem(e){return this._div(e,f.REM)[1]}remn(e){return this.clone().iremn(e)}remrn(e){A(B(e),"num","smi"),M(0!==e),e<0&&(e=-e);const t=(1<<26)%e;let r=0;for(let i=this.length-1;i>=0;i--)r=(t*r+(0|this.words[i]))%e;return 0!==this.negative?0|-r:r}divmod(e){return this._div(e,f.BOTH|f.EUCLID)}idiv(e){return this.div(e)._move(this)}idivn(e){if(0===this.negative)return this.iquon(e);const t=this.remrn(e);return this.iquon(e),t<0&&(e<0?this.iaddn(1):this.isubn(1)),this}div(e){return this._div(e,f.BOTH|f.EUCLID)[0]}divn(e){return this.clone().idivn(e)}imod(e){return this.ucmp(e)<0?(0!==this.negative&&(this._isub(e,this),this.negative=0),this):this.mod(e)._move(this)}imodn(e){return this.words[0]=this.modrn(e),this.length=1,this.negative=0,this}mod(e){return this._div(e,f.REM|f.EUCLID)[1]}modn(e){return this.clone().imodn(e)}modrn(e){A(B(e),"num","smi");let t=this.remrn(e);return t<0&&(e<0?t-=e:t+=e),t}divRound(e){const[t,r]=this.quorem(e);if(r.isZero())return t;const i=1&e.words[0];e.iushrn(1);const s=r.ucmp(e);return e.iushln(1),e.words[0]|=i,s<0||e.isOdd()&&0===s?t:this.negative^e.negative?t.isubn(1):t.iaddn(1)}ipow(e){return this.pow(e)._move(this)}ipown(e){return this.pown(e)._move(this)}pow(e){A(d.isBN(e),"num","bignum");let t=T(e.words[e.length-1]),r=new d(1);for(let i=e.length-1;i>=0;i--){const s=e.words[i];for(let e=t-1;e>=0;e--)r=r.sqr(),s>>e&1&&(r=r.mul(this));t=26}return r}pown(e){if(A(B(e),"num","smi"),e<0&&(e=-e),0===e)return new d(1);if(1===e)return this.clone();let t=this;for(let r=T(e)-2;r>=0;r--)t=t.sqr(),e>>r&1&&(t=t.mul(this));return t}isqr(){return this.imul(this)}sqr(){return this.mul(this)}_rootrem(e,t){if(A(e>>>0===e,"num","uint32"),0===e)throw new RangeError("Zeroth root.");if(~e&this.negative)throw new RangeError("Negative with even root.");if(this.ucmpn(1)<=0)return[this.clone(),new d(0)];let r,i,s=new d(0),n=d.shift(1,this.bitLength()/e+1|0);if(0!==this.negative&&n.ineg(),2===e)do{s=n,(n=this.quo(s)).iadd(s),n.iushrn(1)}while(n.ucmp(s)<0);else do{n=(s=n).pown(e-1),n=this.quo(n),r=s.muln(e-1),n.iadd(r),n=n.quon(e)}while(n.ucmp(s)<0);return t&&(n=s.pown(e),i=this.sub(n)),[s,i]}rootrem(e){return this._rootrem(e,1)}iroot(e){return this.root(e)._move(this)}root(e){return this._rootrem(e,0)[0]}isPower(e){if(A(e>>>0===e,"num","uint32"),0===e||~e&this.negative)return!1;const[,t]=this.rootrem(e);return 0===t.sign()}sqrtrem(){return this.rootrem(2)}isqrt(){return this.sqrt()._move(this)}sqrt(){return this.root(2)}isSquare(){return this.isPower(2)}iand(e){A(d.isBN(e),"num","bignum");let t=this,r=e;if(t===r)return t;if(0==(t.negative|r.negative))return t.iuand(r);if(1==(t.negative&r.negative))return t.iaddn(1),r.iaddn(1),t.iuor(r),t.isubn(1),r.isubn(1),t;0!==t.negative&&([t,r]=[r.clone(),t]);const i=t.bitLength();return r.iaddn(1),r.inotn(i),t.iuand(r),r.inotn(i),r.isubn(1),t._move(this)}iandn(e){return A(B(e),"num","smi"),0!=(this.negative|e<0)?this.iand(new d(e)):(this.words[0]&=e,this.length=1,this)}and(e){return this.clone().iand(e)}andn(e){return this.clone().iandn(e)}andrn(e){if(A(B(e),"num","smi"),0!=(this.negative|e<0)){const t=this.iand(new d(e));if(t.length>1)throw new RangeError("Number exceeds 26 bits.");return 0!==t.negative?-t.words[0]:t.words[0]}return this.words[0]&e}iuand(e){A(d.isBN(e),"num","bignum"),this.length=Math.min(this.length,e.length);for(let t=0;t<this.length;t++)this.words[t]&=e.words[t];return this._strip()}iuandn(e){return A(B(e),"num","smi"),this.words[0]&=Math.abs(e),this.length=1,this._normalize()}uand(e){return this.clone().iuand(e)}uandn(e){return this.clone().iuandn(e)}uandrn(e){A(B(e),"num","smi");const t=this.words[0]&Math.abs(e);return 0!==this.negative?0|-t:t}ior(e){A(d.isBN(e),"num","bignum");let t=this,r=e;return t===r?t:0==(t.negative|r.negative)?t.iuor(r):1==(t.negative&r.negative)?(t.iaddn(1),r.iaddn(1),t.iuand(r),t.isubn(1),r.isubn(1),t):(r=r.clone(),0!==t.negative&&([t,r]=[r,t]),r.iaddn(1),t.inotn(r.bitLength()),r.iuand(t),r.isubn(1),r._move(this))}iorn(e){return A(B(e),"num","smi"),0!=(this.negative|e<0)?this.ior(new d(e)):(this.words[0]|=e,this)}or(e){return this.clone().ior(e)}orn(e){return this.clone().iorn(e)}iuor(e){A(d.isBN(e),"num","bignum"),this._expand(e.length);for(let t=0;t<e.length;t++)this.words[t]|=e.words[t];return this}iuorn(e){return A(B(e),"num","smi"),this.words[0]|=Math.abs(e),this}uor(e){return this.clone().iuor(e)}uorn(e){return this.clone().iuorn(e)}ixor(e){A(d.isBN(e),"num","bignum");let t=this,r=e;return t===r?(t.words[0]=0,t.length=1,t.negative=0,t):0==(t.negative|r.negative)?t.iuxor(r):1==(t.negative&r.negative)?(t.iaddn(1),r.iaddn(1),t.iuxor(r),t.ineg(),r.isubn(1),t):(0!==t.negative&&([t,r]=[r.clone(),t]),r.iaddn(1),t.iuxor(r),t.iaddn(1),t.ineg(),r.isubn(1),t._move(this))}ixorn(e){return A(B(e),"num","smi"),0!=(this.negative|e<0)?this.ixor(new d(e)):(this.words[0]^=e,this)}xor(e){return this.clone().ixor(e)}xorn(e){return this.clone().ixorn(e)}iuxor(e){A(d.isBN(e),"num","bignum");let t=this,r=e;t.length<r.length&&([t,r]=[r,t]);let i=0;for(;i<r.length;i++)this.words[i]=t.words[i]^r.words[i];if(t!==this)for(this._alloc(t.length);i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this._strip()}iuxorn(e){return A(B(e),"num","smi"),this.words[0]^=Math.abs(e),this._normalize()}uxor(e){return this.clone().iuxor(e)}uxorn(e){return this.clone().iuxorn(e)}inot(){return 0!==this.negative?this.ineg().isubn(1):this.iaddn(1).ineg(),this}not(){return this.clone().inot()}inotn(e){A(e>>>0===e,"width","uint32");const t=e%26;let r=Math.ceil(e/26),i=0;for(this._expand(r),t>0&&(r-=1);i<r;i++)this.words[i]^=67108863;return t>0&&(this.words[i]^=(1<<t)-1),this._strip()}notn(e){return this.clone().inotn(e)}ishl(e){return A(d.isBN(e),"bits","bignum"),A(e.bitLength()<=32,"bits","uint32"),this.ishln(e.toNumber())}ishln(e){return this.iushln(e)}shl(e){return this.clone().ishl(e)}shln(e){return this.clone().ishln(e)}iushl(e){return A(d.isBN(e),"bits","bignum"),A(e.bitLength()<=32,"bits","uint32"),this.iushln(e.toNumber())}iushln(e){A(e>>>0===e,"bits","uint32");const t=e%26,r=(e-t)/26,i=(1<<t)-1<<26-t;if(0!==t){let e=0;for(let r=0;r<this.length;r++){const s=this.words[r]&i,n=(0|this.words[r])-s<<t;this.words[r]=n|e,e=s>>>26-t}0!==e&&(this._alloc(this.length+1),this.words[this.length++]=e)}if(0!==r){this._alloc(this.length+r);for(let e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(let e=0;e<r;e++)this.words[e]=0;this.length+=r}return this._strip()}ushl(e){return this.clone().iushl(e)}ushln(e){return this.clone().iushln(e)}_split(e,t){const r=e%26,i=Math.min((e-r)/26,this.length),s=(1<<r)-1;if(t){t._alloc(i);for(let e=0;e<i;e++)t.words[e]=this.words[e];t.length=i}if(0===i);else if(this.length>i){this.length-=i;for(let e=0;e<this.length;e++)this.words[e]=this.words[e+i]}else this.words[0]=0,this.length=1;let n=0;if(0!==r)for(let e=this.length-1;e>=0;e--){const t=0|this.words[e];this.words[e]=n<<26-r|t>>>r,n=t&s}return t&&(0!==n?(t._alloc(t.length+1),t.words[t.length++]=n):(0===t.length&&(t.words[t.length++]=0),t._strip())),this._strip()}ishr(e){return A(d.isBN(e),"bits","bignum"),A(e.bitLength()<=32,"bits","uint32"),this.ishrn(e.toNumber())}ishrn(e){return A(e>>>0===e,"bits","uint32"),0!==this.negative?(this.iaddn(1),this.iushrn(e),this.isubn(1),this):this.iushrn(e)}shr(e){return this.clone().ishr(e)}shrn(e){return this.clone().ishrn(e)}iushr(e){return A(d.isBN(e),"bits","bignum"),A(e.bitLength()<=32,"bits","uint32"),this.iushrn(e.toNumber())}iushrn(e){return A(e>>>0===e,"bits","uint32"),this._split(e,null)}ushr(e){return this.clone().iushr(e)}ushrn(e){return this.clone().iushrn(e)}setn(e,t){return A(e>>>0===e,"bit","uint32"),0!==this.negative?(this.iaddn(1),this.usetn(e,!t),this.isubn(1),this):this.usetn(e,t)}usetn(e,t){A(e>>>0===e,"bit","uint32");const r=e%26,i=(e-r)/26;return this._expand(i+1),t?this.words[i]|=1<<r:this.words[i]&=~(1<<r),this._strip()}testn(e){A(e>>>0===e,"bit","uint32");const t=e%26,r=(e-t)/26;if(this.length<=r)return this.negative;const i=this.words[r],s=i>>t&1;if(0!==this.negative){if(t>0&&i&(1<<t)-1)return 1^s;let e=r;for(;e--;)if(this.words[e]>0)return 1^s}return s}utestn(e){A(e>>>0===e,"bit","uint32");const t=e%26,r=(e-t)/26;return this.length<=r?0:this.words[r]>>t&1}imaskn(e){return A(e>>>0===e,"bits","uint32"),0!==this.negative&&(this.iaddn(1),this.inotn(e+1),this.ineg()),this.iumaskn(e)}maskn(e){return this.clone().imaskn(e)}iumaskn(e){A(e>>>0===e,"bits","uint32");const t=e%26;let r=(e-t)/26;return this.length<=r?this:(0!==t&&(r+=1),this.length=Math.min(r,this.length),0!==t&&(this.words[this.length-1]&=(1<<t)-1),0===this.length&&(this.words[this.length++]=0),this._strip())}umaskn(e){return this.clone().iumaskn(e)}andln(e){return this.words[0]&e}ineg(){return this.isZero()||(this.negative^=1),this}neg(){return this.clone().ineg()}iabs(){return this.negative=0,this}abs(){return this.clone().iabs()}cmp(e){if(A(d.isBN(e),"num","bignum"),this.negative!==e.negative)return e.negative-this.negative;const t=this.ucmp(e);return 0!==this.negative?0|-t:t}cmpn(e){A(B(e),"num","smi");const t=e<0|0;if(this.negative!==t)return t-this.negative;const r=this.ucmpn(e);return 0!==this.negative?0|-r:r}eq(e){return 0===this.cmp(e)}eqn(e){return 0===this.cmpn(e)}gt(e){return this.cmp(e)>0}gtn(e){return this.cmpn(e)>0}gte(e){return this.cmp(e)>=0}gten(e){return this.cmpn(e)>=0}lt(e){return this.cmp(e)<0}ltn(e){return this.cmpn(e)<0}lte(e){return this.cmp(e)<=0}lten(e){return this.cmpn(e)<=0}sign(){return 0!==this.negative?-1:1===this.length&&0===this.words[0]?0:1}isZero(){return 1===this.length&&0===this.words[0]}isNeg(){return 0!==this.negative}isPos(){return 0===this.negative}isOdd(){return 1==(1&this.words[0])}isEven(){return 0==(1&this.words[0])}ucmp(e){if(A(d.isBN(e),"num","bignum"),this.length<e.length)return-1;if(this.length>e.length)return 1;for(let t=this.length-1;t>=0;t--){const r=0|this.words[t],i=0|e.words[t];if(r!==i)return(r>i)-(r<i)}return 0}ucmpn(e){if(A(B(e),"num","smi"),this.length>1)return 1;const t=0|this.words[0];return e<0&&(e=-e),(t>e)-(t<e)}legendre(e){const t=l?d.red(e):d.mont(e);return this.toRed(t).redLegendre()}jacobi(e){if(A(d.isBN(e),"num","bignum"),e.isZero()||e.isEven())throw new Error("jacobi: `num` must be odd.");let t=this._cloneNormal(),r=e.clone(),i=1;for(r.isNeg()&&(t.isNeg()&&(i=-1),r.ineg());;){if(0===r.cmpn(1))return i;if(t.isZero())return 0;if(t.imod(r),t.isZero())return 0;const e=t.zeroBits();if(1&e){const e=r.andln(7);3!==e&&5!==e||(i=-i)}const s=t.iushrn(e);3===r.andln(3)&&3===s.andln(3)&&(i=-i),t=r,r=s}}kronecker(e){A(d.isBN(e),"num","bignum");const t=[0,1,0,-1,0,-1,0,1];let r=this._cloneNormal(),i=e.clone(),s=1;if(i.isZero())return 0===r.ucmpn(1)?s:0;if(!r.isOdd()&&!i.isOdd())return 0;const n=i.zeroBits();for(i.iushrn(n),1&n&&(s=t[r.andln(7)]),i.isNeg()&&(r.isNeg()&&(s=-s),i.ineg());;){if(r.isZero())return 0===i.cmpn(1)?s:0;const e=r.zeroBits();r.iushrn(e),1&e&&(s*=t[i.andln(7)]),(r.words[0]^67108863*r.negative)&i.words[0]&2&&(s=-s),i.imod(r),[r,i]=[i,r],i.negative=0}}igcd(e){return this.gcd(e)._move(this)}gcd(e){if(A(d.isBN(e),"num","bignum"),this.isZero())return e.abs();if(e.isZero())return this.abs();let t=this.clone(),r=e.clone();t.negative=0,r.negative=0;const i=t._factor2(r);for(0!==i&&(t.iushrn(i),r.iushrn(i));;){const e=t.zeroBits(),i=r.zeroBits();0!==e&&t.iushrn(e),0!==i&&r.iushrn(i);const s=t.ucmp(r);if(s<0)[t,r]=[r,t];else if(0===s||0===r.ucmpn(1))break;t._isub(t,r)}return r.iushln(i)}ilcm(e){return this.lcm(e)._move(this)}lcm(e){return A(d.isBN(e),"num","bignum"),this.isZero()||e.isZero()?new d(0):this.quo(this.gcd(e)).mul(e).iabs()}egcd(e){if(A(d.isBN(e),"num","bignum"),this.isZero())return[new d(0),new d(e.sign()),e.abs()];if(e.isZero())return[new d(this.sign()),new d(0),this.abs()];const t=this.clone(),r=e.clone();t.negative=0,r.negative=0;const i=new d(1),s=new d(0),n=new d(0),o=new d(1),a=t._factor2(r);0!==a&&(t.iushrn(a),r.iushrn(a));const h=r.clone(),c=t.clone();for(;!t.isZero();){let e=0;for(let r=1;0==(t.words[0]&r)&&e<26;r<<=1)e+=1;if(e>0)for(t.iushrn(e);e>0;)(i.isOdd()||s.isOdd())&&(i.iadd(h),s.isub(c)),i.iushrn(1),s.iushrn(1),e-=1;let a=0;for(let e=1;0==(r.words[0]&e)&&a<26;e<<=1)a+=1;if(a>0)for(r.iushrn(a);a>0;)(n.isOdd()||o.isOdd())&&(n.iadd(h),o.isub(c)),n.iushrn(1),o.iushrn(1),a-=1;t.cmp(r)>=0?(t.isub(r),i.isub(n),s.isub(o)):(r.isub(t),n.isub(i),o.isub(s))}return 0!==this.negative&&n.ineg(),0!==e.negative&&o.ineg(),[n,o,r.iushln(a)]}iinvert(e){return this.invert(e)._move(this)}invert(e){if(A(d.isBN(e),"num","bignum"),O(e.sign()>0,"invert"),0===e.cmpn(1))throw new RangeError("Not invertible.");const[t,,r]=this.egcd(e);if(0!==r.cmpn(1))throw new RangeError("Not invertible.");return t.imod(e)}ifermat(e){return this.fermat(e)._move(this)}fermat(e){const t=l?d.red(e):d.mont(e);return this.toRed(t).redFermat().fromRed()}ipowm(e,t,r,i){return this.powm(e,t,r,i)._move(this)}powm(e,t,r,i){const s=!l&&r?d.mont(t):d.red(t);return this.toRed(s).redPow(e,i).fromRed()}ipowmn(e,t,r){return this.powmn(e,t,r)._move(this)}powmn(e,t,r){const i=r?d.mont(t):d.red(t);return this.toRed(i).redPown(e).fromRed()}isqrtm(e){return this.sqrtm(e)._move(this)}sqrtm(e){let t;return A(d.isBN(e),"p","bignum"),t=3===e.andln(3)||5===e.andln(7)?d.red(e):d.mont(e),this.toRed(t).redSqrt().fromRed()}isqrtpq(e,t){return this.sqrtpq(e,t)._move(this)}sqrtpq(e,t){const r=this.sqrtm(e),i=this.sqrtm(t),[s,n]=e.egcd(t),o=i.mul(s).mul(e),a=r.mul(n).mul(t),h=e.mul(t);return o.iadd(a).imod(h)}isPrime(e,t,r){return A(t>>>0===t,"reps","uint32"),!!this.isPrimeMR(e,t+1,!0)&&!!this.isPrimeLucas(r)}isPrimeMR(e,t,r=!1){A(t>>>0===t,"reps","uint32"),A(t>0,"reps","integer"),A("boolean"==typeof r,"force2","boolean");const i=this;if(i.cmpn(7)<0)return 0===i.cmpn(2)||0===i.cmpn(3)||0===i.cmpn(5);if(i.isEven())return!1;const s=i.subn(1),n=s.subn(2),o=s.zeroBits(),a=s.ushrn(o),h=d.red(i),c=s.toRed(h),u=new d(1).toRed(h);e:for(let i=0;i<t;i++){let s;i===t-1&&r?s=new d(2):(s=d.random(e,0,n)).iaddn(2);let f=s.toRed(h).redPow(a);if(0!==f.cmp(u)&&0!==f.cmp(c)){for(let e=1;e<o;e++){if(0===(f=f.redSqr()).cmp(c))continue e;if(0===f.cmp(u))return!1}return!1}}return!0}isPrimeLucas(e=0){A(e>>>0===e,"limit","uint32");const t=this;if(t.cmpn(1)<=0)return!1;if(t.isEven())return 0===t.cmpn(2);let r=3;for(;;){if(r>1e4)throw new Error(`Cannot find (D/n) = -1 for ${t.toString(10)}.`);if(0!==e&&r>e)return!1;const i=new d(r*r-4).jacobi(t);if(-1===i)break;if(0===i)return 0===t.cmpn(r+2);if(40===r&&t.isSquare())return!1;r+=1}const i=t.addn(1),s=i.zeroBits(),n=t.subn(2);let o=new d(2),a=new d(r);i.iushrn(s);for(let e=i.bitLength();e>=0;e--)i.utestn(e)?(o=o.mul(a).iadd(t).isubn(r).imod(t),a=a.sqr().iadd(n).imod(t)):(a=a.mul(o).iadd(t).isubn(r).imod(t),o=o.sqr().iadd(n).imod(t));if(0===o.cmpn(2)||0===o.cmp(n)){let e=o.muln(r),i=a.ushln(1);if(e.cmp(i)<0&&([e,i]=[i,e]),e.isub(i).imod(t).isZero())return!0}for(let e=0;e<s-1;e++){if(o.isZero())return!0;if(0===o.cmpn(2))return!1;o=o.sqr().isubn(2).imod(t)}return!1}toTwos(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()}fromTwos(e){return A(e>>>0===e,"width","uint32"),O(e>0,"width"),this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()}toRed(e){if(A(e instanceof v,"ctx","reduction context"),this.red)throw new Error("Already in reduction context.");return e.convertTo(this)}fromRed(){return x(this.red,"fromRed"),this.red.convertFrom(this)}forceRed(e){if(A(e instanceof v,"ctx","reduction context"),this.red){if(!e.m.eq(this.red.m)||e.mont!==this.red.mont)throw new Error("Already in reduction context.")}else O(0===this.negative,"red"),O(this.ucmp(e.m)<0,"red");return this.clone()._forceRed(e)}redIAdd(e){return A(d.isBN(e),"num","bignum"),x(this.red,"redIAdd"),this.red.iadd(this,e)}redAdd(e){return A(d.isBN(e),"num","bignum"),x(this.red,"redAdd"),this.red.add(this,e)}redIAddn(e){return A(B(e),"num","smi"),x(this.red,"redIAddn"),this.red.iaddn(this,e)}redAddn(e){return A(B(e),"num","smi"),x(this.red,"redAddn"),this.red.addn(this,e)}redISub(e){return A(d.isBN(e),"num","bignum"),x(this.red,"redISub"),this.red.isub(this,e)}redSub(e){return A(d.isBN(e),"num","bignum"),x(this.red,"redSub"),this.red.sub(this,e)}redISubn(e){return A(B(e),"num","smi"),x(this.red,"redISubn"),this.red.isubn(this,e)}redSubn(e){return A(B(e),"num","smi"),x(this.red,"redSubn"),this.red.subn(this,e)}redIMul(e){return A(d.isBN(e),"num","bignum"),x(this.red,"redIMul"),this.red.imul(this,e)}redMul(e){return A(d.isBN(e),"num","bignum"),x(this.red,"redMul"),this.red.mul(this,e)}redIMuln(e){return A(B(e),"num","smi"),x(this.red,"redIMuln"),this.red.imuln(this,e)}redMuln(e){return A(B(e),"num","smi"),x(this.red,"redMuln"),this.red.muln(this,e)}redIDiv(e){return A(d.isBN(e),"num","bignum"),x(this.red,"redIDiv"),this.red.idiv(this,e)}redDiv(e){return A(d.isBN(e),"num","bignum"),x(this.red,"redDiv"),this.red.div(this,e)}redIDivn(e){return A(B(e),"num","smi"),x(this.red,"redIDivn"),this.red.idivn(this,e)}redDivn(e){return A(B(e),"num","smi"),x(this.red,"redDivn"),this.red.divn(this,e)}redIPow(e,t){return A(d.isBN(e),"num","bignum"),x(this.red,"redIPow"),R(!e.red,"redIPow"),this.red.ipow(this,e,t)}redPow(e,t){return A(d.isBN(e),"num","bignum"),x(this.red,"redPow"),R(!e.red,"redPow"),this.red.pow(this,e,t)}redIPown(e){return A(B(e),"num","smi"),x(this.red,"redIPown"),this.red.ipown(this,e)}redPown(e){return A(B(e),"num","smi"),x(this.red,"redPown"),this.red.pown(this,e)}redISqr(){return x(this.red,"redISqr"),this.red.isqr(this)}redSqr(){return x(this.red,"redSqr"),this.red.sqr(this)}redISqrt(){return x(this.red,"redISqrt"),this.red.isqrt(this)}redSqrt(){return x(this.red,"redSqrt"),this.red.sqrt(this)}redIDivSqrt(e){return x(this.red,"redIDivSqrt"),this.red.idivsqrt(this,e)}redDivSqrt(e){return x(this.red,"redDivSqrt"),this.red.divsqrt(this,e)}redIsSquare(){return x(this.red,"redIsSquare"),this.red.isSquare(this)}redIShl(e){return A(d.isBN(e),"num","bignum"),x(this.red,"redIShl"),R(!e.red,"redIShl"),this.red.ishl(this,e)}redShl(e){return A(d.isBN(e),"num","bignum"),x(this.red,"redShl"),R(!e.red,"redShl"),this.red.shl(this,e)}redIShln(e){return A(e>>>0===e,"num","uint32"),x(this.red,"redIShln"),this.red.ishln(this,e)}redShln(e){return A(e>>>0===e,"num","uint32"),x(this.red,"redShln"),this.red.shln(this,e)}redINeg(){return x(this.red,"redINeg"),this.red.ineg(this)}redNeg(){return x(this.red,"redNeg"),this.red.neg(this)}redEq(e){return A(d.isBN(e),"num","bignum"),x(this.red,"redEq"),this.red.eq(this,e)}redEqn(e){return A(B(e),"num","smi"),x(this.red,"redEqn"),this.red.eqn(this,e)}redIsHigh(){return x(this.red,"redIsHigh"),this.red.isHigh(this)}redIsLow(){return x(this.red,"redIsLow"),this.red.isLow(this)}redIsOdd(){return x(this.red,"redIsOdd"),this.red.isOdd(this)}redIsEven(){return x(this.red,"redIsEven"),this.red.isEven(this)}redLegendre(){return x(this.red,"redLegendre"),this.red.legendre(this)}redJacobi(){return x(this.red,"redJacobi"),this.red.jacobi(this)}redKronecker(){return x(this.red,"redKronecker"),this.red.kronecker(this)}redIInvert(){return x(this.red,"redIInvert"),this.red.iinvert(this)}redInvert(){return x(this.red,"redInvert"),this.red.invert(this)}redIFermat(){return x(this.red,"redIFermat"),this.red.ifermat(this)}redFermat(){return x(this.red,"redFermat"),this.red.fermat(this)}_move(e){return e.words=this.words,e.length=this.length,e.negative=this.negative,e.red=this.red,e}_alloc(e){for(;this.words.length<e;)this.words.push(0);return this}_expand(e){for(this._alloc(e);this.length<e;)this.words[this.length++]=0;return this}_strip(){for(;this.length>1&&0===this.words[this.length-1];)this.length-=1;return this._normalize()}_normalize(){return k(this.length>0),1===this.length&&0===this.words[0]&&(this.negative=0),this}_check(){return k(this.length>0),k(this.length<=this.words.length),1===this.length?(0===this.words[0]&&k(0===this.negative),this):(k(0!==this.words[this.length-1]),this)}_invertp(e){if(A(d.isBN(e),"p","bignum"),k(0===this.negative),k(e.sign()>0),this.isZero()||0===e.cmpn(1))throw new RangeError("Not invertible.");const t=this.clone(),r=e.clone(),i=new d(1),s=new d(0),n=r.clone();for(;t.cmpn(1)>0&&r.cmpn(1)>0;){let e=0;for(let r=1;0==(t.words[0]&r)&&e<26;r<<=1)e+=1;if(e>0)for(t.iushrn(e);e>0;)i.isOdd()&&i.iadd(n),i.iushrn(1),e-=1;let o=0;for(let e=1;0==(r.words[0]&e)&&o<26;e<<=1)o+=1;if(o>0)for(r.iushrn(o);o>0;)s.isOdd()&&s.iadd(n),s.iushrn(1),o-=1;t.cmp(r)>=0?(t.isub(r),i.isub(s)):(r.isub(t),s.isub(i))}const o=0===t.cmpn(1)?i:s;return o.ucmp(e)>=0&&(o._isub(o,e),o.ucmp(e)>=0&&o._isub(o,e)),o.isNeg()&&o.iadd(e),o}_factor2(e){if(1&(this.words[0]|e.words[0]))return 0;const t=Math.min(this.length,e.length);let r=0;for(let i=0;i<t;i++){const t=C(this.words[i]|e.words[i]);if(r+=t,26!==t)break}return r}_cloneNormal(){return this.red?this.fromRed():this.clone()}_forceRed(e){return this.red=e,this}clone(){const e=new d;e.words=new Array(this.length);for(let t=0;t<this.length;t++)e.words[t]=this.words[t];return e.length=this.length,e.negative=this.negative,e.red=this.red,e}inject(e){A(d.isBN(e),"num","bignum"),this._alloc(e.length);for(let t=0;t<e.length;t++)this.words[t]=e.words[t];return this.length=e.length,this.negative=e.negative,this.red=e.red,this}set(e,t){return this.fromNumber(e,t)}swap(e){A(d.isBN(e),"num","bignum");const t=this,r=e;return[t.words,r.words]=[r.words,t.words],[t.length,r.length]=[r.length,t.length],[t.negative,r.negative]=[r.negative,t.negative],[t.red,r.red]=[r.red,t.red],t}reverse(){const e=this.negative;return this.fromBuffer(this.toBuffer("be"),"le"),this.negative=e,this}byteLength(){return Math.ceil(this.bitLength()/8)}bitLength(){const e=T(this.words[this.length-1]);return 26*(this.length-1)+e}zeroBits(){if(this.isZero())return 0;if(this.isOdd())return 0;let e=0;for(let t=0;t<this.length;t++){const r=C(this.words[t]);if(e+=r,26!==r)break}return e}isSafe(){return this.length<=2||3===this.length&&1===this.words[2]}word(e){return A(e>>>0===e,"pos","uint32"),e>=this.length?0:this.words[e]}[o](){let e="BN";return this.red&&(e="BN-R"),`<${e}: ${this.toString(10)}>`}csign(){return-2*this.negative+1-this.czero()}czero(){const e=this.words[0]-1>>>31;return this.length-2>>>31&e}cneg(){return this.negative}cpos(){return 1^this.negative}ceq(e){A(d.isBN(e),"num","bignum");let t=0;for(let r=0;r<e.length;r++)t|=this.words[r%this.length]^e.words[r];return t|=this.length^e.length,(t|=this.negative^e.negative)-1>>>31}ceqn(e){const t=e>>31&1,r=(0|e)*(1|-t)&67108863;let i=0;return i|=this.words[0]^r,i|=1^this.length,(i|=this.negative^t)-1>>>31}cswap(e,t){A(d.isBN(e),"num","bignum");const r=this,i=e,s=67108863&-(1&(t>>31|-t>>31));r._alloc(i.words.length),i._alloc(r.words.length);for(let e=0;e<r.words.length;e++){const t=(r.words[e]^i.words[e])&s;r.words[e]^=t,i.words[e]^=t}const n=(r.length^i.length)&s,o=(r.negative^i.negative)&s;return r.length^=n,i.length^=n,r.negative^=o,i.negative^=o,this}cinject(e,t){A(d.isBN(e),"num","bignum");const r=this,i=e,s=1&(t>>31|-t>>31),n=s-1&67108863,o=67108863&~(s-1);r._alloc(i.length);for(let e=0;e<i.length;e++)r.words[e]=r.words[e]&n|i.words[e]&o;return r.length=r.length&n|i.length&o,r.negative=r.negative&n|i.negative&o,this}cset(e,t){const r=1&(t>>31|-t>>31),i=r-1&67108863,s=67108863&~(r-1),n=e>>31&1,o=(0|e)*(1|-n)&67108863;return this.words[0]=this.words[0]&i|o&s,this.length=this.length&i|1&s,this.negative=this.negative&i|n&s,this}toNumber(){let e=this.words[0];if(2===this.length)e+=67108864*this.words[1];else if(3===this.length&&1===this.words[2])e+=4503599627370496+67108864*this.words[1];else if(this.length>2)throw new RangeError("Number can only safely store up to 53 bits.");return 0!==this.negative?-e:e}toDouble(){let e=0;for(let t=this.length-1;t>=0;t--)e=67108864*e+this.words[t];return 0!==this.negative?-e:e}valueOf(){return this.toDouble()}toBigInt(){if(!l)throw new Error("BigInt is not supported!");const e=BigInt(52),t=BigInt(26);let r=this.length-1,i=BigInt(0);for(;r>=1;r-=2){const t=67108864*this.words[r],s=this.words[r-1];i=i<<e|BigInt(t+s)}return r>=0&&(i=i<<t|BigInt(this.words[0])),0!==this.negative?-i:i}toBool(){return!this.isZero()}toString(e,t){if(e=N(e),null==t&&(t=0),0===t&&(t=1),A(e>>>0===e,"base","uint32"),A(t>>>0===t,"padding","uint32"),e<2||e>36)throw new RangeError("Base ranges between 2 and 36.");if(this._check(),16===e){let e="",r=0,i=0;for(let t=0;t<this.length;t++){const s=this.words[t],n=(16777215&(s<<r|i)).toString(16);e=0!==(i=s>>>24-r&16777215)||t!==this.length-1?a[6-n.length]+n+e:n+e,(r+=2)>=26&&(r-=26,t-=1)}for(0!==i&&(e=i.toString(16)+e);e.length%t!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}const r=h[e-1],i=c[e-1],s=this.clone();let n="";for(s.negative=0;!s.isZero();){const t=s.remrn(i).toString(e);s.iquon(i),n=s.isZero()?t+n:a[r-t.length]+t+n}for(this.isZero()&&(n="0");n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}toJSON(){return this.toString(16,2)}toArray(e,t){return this.toArrayLike(Array,e,t)}toBuffer(e,t){return this.toArrayLike(Buffer,e,t)}toArrayLike(e,t,r){null==t&&(t="be"),null==r&&(r=0),A("function"==typeof e,"ArrayType","function"),A("be"===t||"le"===t,"endian","endianness"),A(r>>>0===r,"length","uint32"),this._check();const i=this.byteLength(),s=r||Math.max(1,i);if(i>s)throw new RangeError("Byte array longer than desired length.");const n=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,s);if("be"===t){let e=n.length-1,t=0;for(let r=0;r<this.length;r++){const i=(3&r)<<1,s=this.words[r]<<i|t;n[e--]=255&s,e>=0&&(n[e--]=s>>>8&255),e>=0&&(n[e--]=s>>>16&255),6===i?(e>=0&&(n[e--]=s>>>24&255),t=0):t=s>>>24}if(e>=0){for(n[e--]=t;e>=0;)n[e--]=0;t=0}k(0===t)}else{let e=0,t=0;for(let r=0;r<this.length;r++){const i=(3&r)<<1,s=this.words[r]<<i|t;n[e++]=255&s,e<n.length&&(n[e++]=s>>>8&255),e<n.length&&(n[e++]=s>>>16&255),6===i?(e<n.length&&(n[e++]=s>>>24&255),t=0):t=s>>>24}if(e<n.length){for(n[e++]=t;e<n.length;)n[e++]=0;t=0}k(0===t)}return n}encode(e,t){return this.toBuffer(e,t)}of(e,t){return this.fromNumber(e,t)}fromNumber(e,t){null==t&&(t="be"),A(P(e),"num","integer"),A("be"===t||"le"===t,"endian","endianness");const r=e<0|0;return r&&(e=-e),e<67108864?(this.words[0]=67108863&e,this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(this.words=[67108863&e,e/67108864&67108863,1],this.length=3),this.negative=r,"le"===t&&this.reverse(),this}fromDouble(e,t){null==t&&(t="be"),A("number"==typeof e,"num","double"),A("be"===t||"le"===t,"endian","endianness"),isFinite(e)||(e=0);const r=e<=-1|0;for(e<0&&(e=-e),e=Math.floor(e),this.words=[];e>0;){const t=e%67108864,r=(e-t)/67108864;this.words.push(t),e=r}return 0===this.words.length&&this.words.push(0),this.length=this.words.length,this.negative=r,"le"===t&&this.reverse(),this}fromBigInt(e,t){if(null==t&&(t="be"),A("bigint"==typeof e,"num","bigint"),A("be"===t||"le"===t,"endian","endianness"),!l)throw new Error("BigInt is not supported!");const r=e<BigInt(0)|0;return this._fromHex(e.toString(16),r),this.negative=r,"le"===t&&this.reverse(),this}fromBool(e){return A("boolean"==typeof e,"value","boolean"),this.words[0]=0|e,this.length=1,this.negative=0,this}fromString(e,t,r){if("le"!==t&&"be"!==t||([t,r]=[r,t]),t=N(t),null==r&&(r="be"),A("string"==typeof e,"string","string"),A(t>>>0===t,"base","uint32"),A("be"===r||"le"===r,"endian","endianness"),t<2||t>36)throw new Error("Base ranges between 2 and 36.");let i=0;return(e=e.replace(/\s+/g,"")).length>0&&45===e.charCodeAt(0)&&(i=1),16===t?this._fromHex(e,i):this._fromBase(e,t,i),this.negative=i,this._normalize(),"le"===r&&this.reverse(),this}_fromHex(e,t){this.length=Math.max(2,Math.ceil((e.length-t)/6)),this.words=new Array(this.length);for(let e=0;e<this.length;e++)this.words[e]=0;let r=0,i=e.length-6,s=0;for(;i>=t;i-=6){const t=q(e,i,i+6);this.words[s]|=t<<r&67108863,this.words[s+1]|=t>>>26-r&4194303,(r+=24)>=26&&(r-=26,s+=1)}if(i+6!==t){const n=q(e,t,i+6);this.words[s]|=n<<r&67108863,this.words[s+1]|=n>>>26-r&4194303}return this._strip()}_fromBase(e,t,r){this.words[0]=0,this.length=1,this.negative=0;let i=0,s=1;for(;s<=67108863;s*=t)i+=1;i-=1,s=s/t|0;const n=e.length-r,o=n%i,a=Math.min(n,n-o)+r;let h=r;for(;h<a;h+=i){const r=j(e,h,h+i,t);this.imuln(s),this._iaddn(r)}if(0!==o){const r=Math.pow(t,o),i=j(e,h,e.length,t);this.imuln(r),this._iaddn(i)}return this}fromJSON(e){if(d.isBN(e))return e.red?e.fromRed():e.clone();if(Array.isArray(e)){for(const t of e)A("string"==typeof t,"chunk","string");e=e.join("")}return this.fromString(e,16)}fromBN(e){return this.inject(e)}fromArray(e,t){return A(Array.isArray(e),"data","array"),this.fromArrayLike(e,t)}fromBuffer(e,t){return A(null!=e&&!0===e._isBuffer,"data","buffer"),this.fromArrayLike(e,t)}fromArrayLike(e,t){if(null==t&&(t="be"),A(e&&e.length>>>0===e.length,"data","array-like"),A("be"===t||"le"===t,"endian","endianness"),0===e.length)return this.words[0]=0,this.length=1,this.negative=0,this;this.length=Math.max(2,Math.ceil(e.length/3)),this.words=new Array(this.length),this.negative=0;for(let e=0;e<this.length;e++)this.words[e]=0;const r=e.length%3;let i=0,s=0,n=0;if("be"===t){for(let t=e.length-1;t>=2;t-=3){const r=e[t]|e[t-1]<<8|e[t-2]<<16;this.words[s]|=r<<i&67108863,this.words[s+1]=r>>>26-i&67108863,(i+=24)>=26&&(i-=26,s+=1)}switch(r){case 2:n=e[1]|e[0]<<8;break;case 1:n=e[0]}}else{const t=e.length-r;for(let r=0;r<t;r+=3){const t=e[r]|e[r+1]<<8|e[r+2]<<16;this.words[s]|=t<<i&67108863,this.words[s+1]=t>>>26-i&67108863,(i+=24)>=26&&(i-=26,s+=1)}switch(r){case 2:n=e[t]|e[t+1]<<8;break;case 1:n=e[t]}}return r>0&&(this.words[s]|=n<<i&67108863,this.words[s+1]=n>>>26-i&67108863),this._strip()}decode(e,t){return this.fromBuffer(e,t)}from(e,t,r){if(null==e)return this;if("le"!==t&&"be"!==t||([t,r]=[r,t]),"number"==typeof e)return this.fromNumber(e,r);if("bigint"==typeof e)return this.fromBigInt(e,r);if("string"==typeof e)return this.fromString(e,t,r);if("object"==typeof e){if(d.isBN(e))return this.fromBN(e,r);if(e.length>>>0===e.length)return this.fromArrayLike(e,r)}if("boolean"==typeof e)return this.fromBool(e);throw new TypeError("Non-numeric object passed to BN.")}static min(...e){let t=null;for(const r of e)A(d.isBN(r),"num","bignum"),(!t||r.cmp(t)<0)&&(t=r);return t||new d(0)}static max(...e){let t=null;for(const r of e)A(d.isBN(r),"num","bignum"),(!t||r.cmp(t)>0)&&(t=r);return t||new d(0)}static cmp(e,t){return A(d.isBN(e),"a","bignum"),e.cmp(t)}static ucmp(e,t){return A(d.isBN(e),"a","bignum"),e.ucmp(t)}static red(e){return new v(e)}static barrett(e){return new E(e)}static mont(e){return new S(e)}static _prime(e){if(u[e])return u[e];let t;if("p192"===e)t=new b;else if("p224"===e)t=new g;else if("p521"===e)t=new m;else if("k256"===e)t=new _;else if("p25519"===e)t=new w;else{if("p448"!==e)throw new Error(`Unknown prime: "${e}".`);t=new y}return u[e]=t,t}static prime(e){return d._prime(e).p.clone()}static pow(e,t){return 2===e?d.shift(1,t):(new d).fromNumber(e).pown(t)}static shift(e,t){return 1===e?new d(0).usetn(t,1):(new d).fromNumber(e).ishln(t)}static mask(e){return d.shift(1,e).isubn(1)}static randomBits(e,t){if(A(null!=e,"rng","rng"),A(t>>>0===t,"bits","uint32"),"object"==typeof e){A("function"==typeof e.randomBytes,"rng","rng");const r=t+7>>>3,i=8*r,s=e.randomBytes(r);if(A(null!=s&&!0===s._isBuffer,"bytes","buffer"),s.length!==r)throw new RangeError("Invalid number of bytes returned from RNG.");const n=d.fromBuffer(s);return i>t&&n.iushrn(i-t),n}A("function"==typeof e,"rng","rng");const r=e(t);if(A(d.isBN(r),"num","bignum"),O(0===r.negative,"RNG"),R(!r.red,"RNG"),r.bitLength()>t)throw new RangeError("Invalid number of bits returned from RNG.");return r}static random(e,t,r){if(t=d.cast(t,16),r=d.cast(r,16),t.cmp(r)>0)throw new RangeError("Minimum cannot be greater than maximum.");const i=r.sub(t).iabs(),s=i.bitLength();if(0===s)return t.clone();for(;;){const r=d.randomBits(e,s);if(!(r.cmp(i)>=0))return r.iadd(t),r}}static of(e,t){return(new d).of(e,t)}static fromNumber(e,t){return(new d).fromNumber(e,t)}static fromDouble(e,t){return(new d).fromDouble(e,t)}static fromBigInt(e,t){return(new d).fromBigInt(e,t)}static fromBool(e){return(new d).fromBool(e)}static fromString(e,t,r){return(new d).fromString(e,t,r)}static fromJSON(e){return(new d).fromJSON(e)}static fromBN(e){return(new d).fromBN(e)}static fromArray(e,t){return(new d).fromArray(e,t)}static fromBuffer(e,t){return(new d).fromBuffer(e,t)}static fromArrayLike(e,t){return(new d).fromArrayLike(e,t)}static decode(e,t){return(new d).decode(e,t)}static from(e,t,r){return(new d).from(e,t,r)}static cast(e,t,r){return d.isBN(e)?e:new d(e,t,r)}static isBN(e){return e instanceof d}}d.BN=d,d.wordSize=26,d.native=0;class p{constructor(e,t){this.name=e,this.p=new d(t,16),this.n=this.p.bitLength(),this.k=d.shift(1,this.n).isub(this.p),this.lo=this.p.clone(),this.one=this.p.clone()}ireduce(e){const t=0!==e.negative;let r=e.bitLength();for(k(r<=2*this.n),e.negative=0;r>this.n;)this.split(e,this.lo),this.imulK(e),e._iadd(e,this.lo),r=e.bitLength();const i=r<this.n?-1:e.ucmp(this.p);return 0===i?(e.words[0]=0,e.length=1):i>0&&e._isub(e,this.p),t&&!e.isZero()&&e._isub(this.p,e),e}split(e,t){e._split(this.n,t)}imulK(e){return e.imul(this.k)}}class b extends p{constructor(){super("p192","ffffffff ffffffff ffffffff fffffffeffffffff ffffffff")}imulK(e){const t=this.one.inject(e);return e.iushln(64)._iadd(e,t)}}class g extends p{constructor(){super("p224","ffffffff ffffffff ffffffff ffffffff00000000 00000000 00000001")}imulK(e){const t=this.one.inject(e);return e.iushln(96)._isub(e,t)}}class m extends p{constructor(){super("p521","000001ff ffffffff ffffffff ffffffffffffffff ffffffff ffffffff ffffffffffffffff ffffffff ffffffff ffffffffffffffff ffffffff ffffffff ffffffffffffffff")}imulK(e){return e}}class _ extends p{constructor(){super("k256","ffffffff ffffffff ffffffff ffffffffffffffff ffffffff fffffffe fffffc2f")}split(e,t){const r=Math.min(e.length,9);t._alloc(r+1);for(let i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9)return t._strip(),e.words[0]=0,void(e.length=1);let i=e.words[9],s=10;for(t.words[t.length++]=4194303&i,t._strip();s<e.length;s++){const t=0|e.words[s];e.words[s-10]=(4194303&t)<<4|i>>>22,i=t}i>>>=22,e.words[s-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9,e._strip()}imulK(e){e._expand(e.length+2);let t=0;for(let r=0;r<e.length;r++){const i=e.words[r];t+=977*i,e.words[r]=67108863&t,t=64*i+Math.floor(t/67108864)}return 0===e.words[e.length-1]&&(e.length-=1,0===e.words[e.length-1]&&(e.length-=1)),e}}class w extends p{constructor(){super("p25519","7fffffff ffffffff ffffffff ffffffffffffffff ffffffff ffffffff ffffffed")}imulK(e){let t=0;for(let r=0;r<e.length;r++){const i=19*e.words[r]+t;t=i>>>26,e.words[r]=67108863&i}return 0!==t&&(e._alloc(e.length+1),e.words[e.length++]=t),e}}class y extends p{constructor(){super("p448","ffffffff ffffffff ffffffff ffffffffffffffff ffffffff fffffffe ffffffffffffffff ffffffff ffffffff ffffffffffffffff ffffffff")}imulK(e){const t=this.one.inject(e);return e.iushln(224)._iadd(e,t)}}class v{constructor(e){let t=null;"string"==typeof e&&(e=(t=d._prime(e)).p),A(d.isBN(e),"m","bignum"),R(!e.red,"reduction"),O(e.sign()>0,"reduction"),this.m=e,this.prime=t,this.mb=null,this.sm1=null}_verify1(e){O(0===e.negative,"red"),x(null!=e.red,"red")}_verify2(e,t){O(0==(e.negative|t.negative),"red"),x(null!=e.red&&e.red===t.red,"red")}get mont(){return!1}get coprime(){return!1}precompute(){if(null===this.sm1&&5===this.m.andln(7)){const e=new d(2).toRed(this),t=this.m.subn(1).iushrn(2);this.sm1=this.pow(e,t)}return this}convertTo(e){const t=e.mod(this.m);return t.red=this,t}convertFrom(e){const t=e.clone();return t.red=null,t}intTo(e){return e}intFrom(e){return e}imod(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.imod(this.m)._forceRed(this)}iadd(e,t){return this._verify2(e,t),e._iadd(e,t),e.ucmp(this.m)>=0&&e._isub(e,this.m),e}add(e,t){return e.length<t.length?this.iadd(t.clone(),e):this.iadd(e.clone(),t)}iaddn(e,t){return this._verify1(e),t<0?this.isubn(e,-t):(1===this.m.length&&(t%=this.m.words[0]),e._iaddn(t),e.ucmp(this.m)>=0&&e._isub(e,this.m),e)}addn(e,t){return this.iaddn(e.clone(),t)}isub(e,t){this._verify2(e,t);const r=e.ucmp(t);return 0===r?(e.words[0]=0,e.length=1,e):(r<0?(e._isub(t,e),e._isub(this.m,e)):e._isub(e,t),e)}sub(e,t){return this.isub(e.clone(),t)}isubn(e,t){return this._verify1(e),t<0?this.iaddn(e,-t):(1===this.m.length&&(t%=this.m.words[0]),1===e.length&&e.words[0]<t?(e.words[0]=t-e.words[0],e._isub(this.m,e)):e._isubn(t),e)}subn(e,t){return this.isubn(e.clone(),t)}imul(e,t){return this._verify2(e,t),this.imod(e.imul(t))}mul(e,t){return this._verify2(e,t),this.imod(e.mul(t))}imuln(e,t){if(this._verify1(e),e.isZero())return e;if(0===t)return e.words[0]=0,e.length=1,e;const r=t<0;if(r&&(t=-t),1===this.m.length&&(t%=this.m.words[0]),e.imuln(t),t<=16)for(;e.ucmp(this.m)>=0;)e._isub(e,this.m);else this.imod(e);return r&&this.ineg(e),e}muln(e,t){return this.imuln(e.clone(),t)}idiv(e,t){return this.div(e,t)._move(e)}div(e,t){return this.mul(e,this.invert(t))}idivn(e,t){return this.divn(e,t)._move(e)}divn(e,t){return this.div(e,this.convertTo(new d(t)))}ipow(e,t,r){return this.pow(e,t,r)._move(e)}pow(e,t,r){return this._verify1(e),t.isNeg()&&(e=this.invert(e)),l&&!this.prime?this.powInt(e,t,r):null!=r?this.climb(e,t,r):1===t.length?this.pown(e,t.words[0]):this.slide(e,t)}slide(e,t){const r=new Array(16);r[0]=new d(1).toRed(this),r[1]=e;for(let t=2;t<r.length;t++)r[t]=this.mul(r[t-1],e);let i=T(t.words[t.length-1]),s=r[0],n=0,o=0;for(let e=t.length-1;e>=0;e--){const a=t.words[e];for(let t=i-1;t>=0;t--){const i=a>>t&1;s!==r[0]&&(s=this.sqr(s)),0!==i||0!==n?(n<<=1,n|=i,4!==(o+=1)&&0!=(e|t)||(s=this.mul(s,r[n]),o=0,n=0)):o=0}i=26}return s}climb(e,t,r){const i=Math.max(t.bitLength(),r>>>0),s=i+7>>>3,n=t.toArray("le",s);let o=e.clone(),a=new d(1).toRed(this),h=0;for(let e=i-1;e>=0;e--){const t=n[e>>3]>>(7&e)&1;o.cswap(a,h^t),o=this.mul(o,a),a=this.mul(a,a),h=t}return o.cswap(a,h),a}powInt(e,t,r){null===this.mb&&(this.mb=this.m.toBigInt());const i=function(e,t,r,i){return null!=i?function(e,t,r,i){const s=Math.max(t.bitLength(),i>>>0),n=s+7>>>3,o=t.toArray("le",n);let a=BigInt(1),h=0;for(let t=s-1;t>=0;t--){const i=o[t>>3]>>(7&t)&1;[e,a]=D(e,a,h^i),e=e*a%r,a=a*a%r,h=i}return[e,a]=D(e,a,h),a}(e,t,r,i):function(e,t,r){let i=BigInt(1),s=T(t.words[t.length-1]);for(let n=t.length-1;n>=0;n--){const o=t.words[n];for(let t=s-1;t>=0;t--)i=i*i%r,o>>t&1&&(i=i*e%r);s=26}return i}(e,t,r)}(this.intFrom(e.toBigInt()),t,this.mb,r),s=this.intTo(i);return d.fromBigInt(s)._forceRed(this)}ipown(e,t){return this.pown(e,t)._move(e)}pown(e,t){if(this._verify1(e),t<0&&(e=this.invert(e),t=-t),0===t)return new d(1).toRed(this);if(1===t)return e.clone();let r=e;for(let i=T(t)-2;i>=0;i--)r=this.sqr(r),t>>i&1&&(r=this.mul(r,e));return r}isqr(e){return this.imul(e,e)}sqr(e){return this.mul(e,e)}isqrt(e){return this.sqrt(e)._move(e)}sqrt(e){return this._verify1(e),3===this.m.andln(3)?this.sqrt3mod4(e):5===this.m.andln(7)?null!=this.sm1?this.sqrt5mod8sm1(e):this.sqrt5mod8(e):this.sqrt0(e)}sqrt3mod4(e){const t=this.m.addn(1).iushrn(2),r=this.pow(e,t);if(!this.sqr(r).eq(e))throw new Error("X is not a square mod P.");return r}sqrt5mod8(e){const t=new d(1).toRed(this),r=this.m.ushrn(3),i=this.add(e,e),s=this.pow(i,r),n=this.mul(i,this.sqr(s)),o=this.mul(this.mul(s,e),this.isub(n,t));if(!this.sqr(o).eq(e))throw new Error("X is not a square mod P.");return o}sqrt5mod8sm1(e){const t=this.m.addn(3).iushrn(3);let r=this.pow(e,t);if(!this.sqr(r).eq(e)&&(r=this.mul(r,this.sm1),!this.sqr(r).eq(e)))throw new Error("X is not a square mod P.");return r}sqrt0(e){if(0===this.m.cmpn(1)||!this.m.isOdd())throw new Error("Invalid prime.");switch(this.jacobi(e)){case-1:throw new Error("X is not a square mod P.");case 0:return new d(0)._forceRed(this)}const t=new d(1).toRed(this),r=this.m.subn(1),i=r.zeroBits();r.iushrn(i);const s=new d(2).toRed(this);for(;-1!==this.jacobi(s);)this.iadd(s,t);let n=this.pow(e,r),o=this.pow(s,r),a=this.pow(e,r.iaddn(1).iushrn(1)),h=i;for(;;){let e=n,r=0;for(;0!==e.cmp(t);)e=this.sqr(e),r+=1;if(0===r)break;k(r<h),e=d.shift(1,h-r-1),e=this.pow(o,e),o=this.sqr(e),a=this.mul(a,e),n=this.mul(n,o),h=r}return a}idivsqrt(e,t){return this.divsqrt(e,t)._move(e)}divsqrt(e,t){if(this._verify2(e,t),t.isZero())throw new RangeError("Not invertible.");return 3===this.m.andln(3)?this.divsqrt3mod4(e,t):null!=this.sm1&&5===this.m.andln(7)?this.divsqrt5mod8(e,t):this.sqrt(this.div(e,t))}divsqrt3mod4(e,t){const r=this.m.subn(3).iushrn(2),i=this.sqr(e),s=this.mul(i,e),n=this.mul(s,i),o=this.mul(this.sqr(t),t),a=this.pow(this.mul(n,o),r),h=this.mul(this.mul(s,t),a);if(0===this.mul(t,this.sqr(h)).cmp(e))return h;throw new Error("X is not a square mod P.")}divsqrt5mod8(e,t){const r=this.m.subn(5).iushrn(3),i=this.mul(this.sqr(t),t),s=this.mul(this.sqr(i),t),n=this.pow(this.mul(e,s),r),o=this.mul(this.mul(e,i),n),a=this.mul(t,this.sqr(o));if(0===a.cmp(e))return o;if(0===this.ineg(a).cmp(e))return this.mul(o,this.sm1);throw new Error("X is not a square mod P.")}isSquare(e){let t;return t=this.prime||this.coprime?this.legendre(e):this.m.isOdd()?this.jacobi(e):this.kronecker(e),Boolean(~t>>>31)}ishl(e,t){return this._verify1(e),this.imod(e.iushl(t))}shl(e,t){return this.ishl(e.clone(),t)}ishln(e,t){if(this._verify1(e),e.iushln(t),t<=4)for(;e.ucmp(this.m)>=0;)e._isub(e,this.m);else this.imod(e);return e}shln(e,t){return this.ishln(e.clone(),t)}ineg(e){return this._verify1(e),e.isZero()||e._isub(this.m,e),e}neg(e){return this.ineg(e.clone())}eq(e,t){return this._verify2(e,t),0===e.ucmp(t)}eqn(e,t){if(this._verify1(e),1===this.m.length)return(t%=this.m.words[0])<0&&(t+=this.m.words[0]),0===e.ucmpn(t);if(t<0){this.m._isubn(-t);const r=e.ucmp(this.m);return this.m._iaddn(-t),0===r}return 0===e.ucmpn(t)}isHigh(e){return!this.isLow(e)}isLow(e){return this._verify1(e),e.ucmp(this.m.ushrn(1))<=0}isOdd(e){return this._verify1(e),e.isOdd()}isEven(e){return this._verify1(e),e.isEven()}legendre(e){if(this._verify1(e),this.m.isEven())throw new Error("legendre: `num` must be odd.");const t=this.m.subn(1).iushrn(1),r=this.pow(e,t),i=new d(1).toRed(this),s=r.czero(),n=r.ceq(i),o=r.ceq(this.ineg(i));if(0==(s|n|o))throw new Error("Invalid prime.");return k(s+n+o===1),n-o}jacobi(e){return this._verify1(e),e.jacobi(this.m)}kronecker(e){return this._verify1(e),e.kronecker(this.m)}iinvert(e){return this.invert(e)._move(e)}invert(e){return this._verify1(e),this.prime?this.imod(e._invertp(this.m)):e.invert(this.m)._forceRed(this)}ifermat(e){return this.fermat(e)._move(e)}fermat(e){if(this._verify1(e),e.isZero()||0===this.m.cmpn(1))throw new RangeError("Not invertible.");return this.pow(e,this.m.subn(2))}[o](){return this.prime?`<Red: ${this.prime.name}>`:`<Red: ${this.m.toString(10)}>`}}class E extends v{constructor(e){super(e),this.prime=null,this.n=this.m.bitLength(),this.n%26!=0&&(this.n+=26-this.n%26),this.k=2*this.n,this.w=this.k/26,this.b=d.shift(1,this.k).div(this.m)}convertTo(e){return e.length>this.w?super.convertTo(e):this.imod(e.clone())}_shift(e){let t=0,r=this.w;for(;r<e.length;)e.words[t++]=e.words[r++];0===t&&(e.words[t++]=0),e.length=t}imod(e){const t=e.negative;k(e.length<=this.w),e.negative=0;const r=e.mul(this.b);return this._shift(r),e._isub(e,r.mul(this.m)),e.ucmp(this.m)>=0&&e._isub(e,this.m),t&&!e.isZero()&&e._isub(this.m,e),e.red=this,e}}class S extends v{constructor(e){super(e),this.prime=null,this.n=this.m.bitLength(),this.n%26!=0&&(this.n+=26-this.n%26),this.r=d.shift(1,this.n),this.r2=d.shift(1,2*this.n).imod(this.m),this.ri=this.r._invertp(this.m).imod(this.m),this.mi=this.r.mul(this.ri).isubn(1).div(this.m),this.rib=null}get mont(){return!0}get coprime(){return!0}convertTo(e){return this.imod(e.ushln(this.n))}convertFrom(e){const t=this.imod(e.mul(this.ri));return t.red=null,t}intTo(e){return(e<<BigInt(this.n))%this.mb}intFrom(e){return null===this.rib&&(this.rib=this.ri.toBigInt()),e*this.rib%this.mb}iaddn(e,t){return this.iadd(e,this.convertTo(new d(t)))}isubn(e,t){return this.isub(e,this.convertTo(new d(t)))}imul(e,t){return this.mul(e,t)._move(e)}mul(e,t){if(this._verify2(e,t),e.isZero()||t.isZero())return new d(0)._forceRed(this);const r=e.mul(t),i=r.umaskn(this.n).mul(this.mi).iumaskn(this.n),s=r.iadd(i.mul(this.m)).iushrn(this.n);return s.ucmp(this.m)>=0&&s._isub(s,this.m),s._forceRed(this)}imuln(e,t){if(this._verify1(e),e.isZero())return e;if(0===t)return e.words[0]=0,e.length=1,e;const r=t<0;r&&(t=-t),1===this.m.length&&(t%=this.m.words[0]);const i=T(t);if(i>5)this.imul(e,this.convertTo(new d(t)));else if(0==(t&t-1))for(let t=0;t<i-1;t++)this.iadd(e,e);else{const r=e.clone();for(let s=i-2;s>=0;s--)this.iadd(e,e),t>>s&1&&this.iadd(e,r)}return r&&this.ineg(e),e}eqn(e,t){return this._verify1(e),0===t?e.isZero():0===e.ucmp(this.convertTo(new d(t)))}isLow(e){return this._verify1(e),this.convertFrom(e).ucmp(this.m.ushrn(1))<=0}isOdd(e){return this._verify1(e),this.convertFrom(e).isOdd()}isEven(e){return this._verify1(e),this.convertFrom(e).isEven()}invert(e){return this._verify1(e),this.imod(e._invertp(this.m).mul(this.r2))}}function I(e,t,r){const i=new e(t);return e.captureStackTrace&&e.captureStackTrace(i,r),i}function k(e,t){if(!e){throw I(Error,t||"Assertion failed.",k)}}function A(e,t,r){if(!e){const e=`"${t}" must be a(n) ${r}.`;throw I(TypeError,e,A)}}function O(e,t){if(!e){const e=`"${t}" only works with positive numbers.`;throw I(RangeError,e,O)}}function x(e,t){if(!e){const e=`"${t}" only works with red numbers.`;throw I(TypeError,e,x)}}function R(e,t){if(!e){const e=`"${t}" only works with normal numbers.`;throw I(TypeError,e,R)}}function M(e){if(!e){throw I(RangeError,"Cannot divide by zero.",M)}}function P(e){return Number.isSafeInteger(e)}function B(e){return P(e)&&e>=-67108863&&e<=67108863}function N(e){if(null==e)return 10;if("number"==typeof e)return e;switch(e){case"bin":return 2;case"oct":return 8;case"dec":return 10;case"hex":return 16}return 0}function T(e){if(Math.clz32)return 32-Math.clz32(e);let t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t}function C(e){if(0===e)return 26;let t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&(r+=1),r}function q(e,t,r){const i=Math.min(e.length,r);let s=0,n=0;for(let r=t;r<i;r++){const t=e.charCodeAt(r)-48;let i;s<<=4,s|=i=t>=49&&t<=54?t-49+10:t>=17&&t<=22?t-17+10:t,n|=i}if(-16&n)throw new Error("Invalid string.");return s}function j(e,t,r,i){const s=Math.min(e.length,r);let n=0;for(let r=t;r<s;r++){const t=e.charCodeAt(r)-48;let s;if(n*=i,s=t>=49?t-49+10:t>=17?t-17+10:t,t<0||t>207||s>=i)throw new Error("Invalid string.");n+=s}return n}function D(e,t,r){const i=BigInt(1),s=BigInt(r);return[e*(s^i)|t*s,t*(s^i)|e*s]}function U(e,t,r){const i=e.length+t.length;r.negative=e.negative^t.negative,r._alloc(i),r.length=i;const s=e.words[0]*t.words[0],n=67108863&s;let o=s/67108864|0,a=1;for(r.words[0]=n;a<r.length-1;a++){let i=o>>>26,s=67108863&o;const n=Math.max(0,a-e.length+1),h=Math.min(a,t.length-1);for(let r=n;r<=h;r++){const n=a-r,o=e.words[n]*t.words[r]+s;i+=o/67108864|0,s=67108863&o}r.words[a]=0|s,o=0|i}return 0!==o?r.words[a]=0|o:r.length-=1,r._strip()}function L(e,t,r){const i=e.length+t.length;r.negative=e.negative^t.negative,r._alloc(i),r.length=i;let s=0,n=0,o=0;for(;o<r.length-1;o++){let i=n;n=0;let a=67108863&s;const h=Math.max(0,o-e.length+1),c=Math.min(o,t.length-1);for(let r=h;r<=c;r++){const s=o-r,h=e.words[s]*t.words[r];let c=67108863&h;a=67108863&(c=c+a|0),n+=(i=(i=i+(h/67108864|0)|0)+(c>>>26)|0)>>>26,i&=67108863}r.words[o]=a,s=i,i=n}return 0!==s?r.words[o]=s:r.length-=1,r._strip()}function z(e,t,r){const i=e.words,s=t.words,n=r.words,o=0|i[0],a=8191&o,h=o>>>13,c=0|i[1],u=8191&c,f=c>>>13,l=0|i[2],d=8191&l,p=l>>>13,b=0|i[3],g=8191&b,m=b>>>13,_=0|i[4],w=8191&_,y=_>>>13,v=0|i[5],E=8191&v,S=v>>>13,I=0|i[6],k=8191&I,A=I>>>13,O=0|i[7],x=8191&O,R=O>>>13,M=0|i[8],P=8191&M,B=M>>>13,N=0|i[9],T=8191&N,C=N>>>13,q=0|s[0],j=8191&q,D=q>>>13,U=0|s[1],L=8191&U,z=U>>>13,F=0|s[2],H=8191&F,V=F>>>13,K=0|s[3],W=8191&K,G=K>>>13,Y=0|s[4],X=8191&Y,J=Y>>>13,Q=0|s[5],Z=8191&Q,$=Q>>>13,ee=0|s[6],te=8191&ee,re=ee>>>13,ie=0|s[7],se=8191&ie,ne=ie>>>13,oe=0|s[8],ae=8191&oe,he=oe>>>13,ce=0|s[9],ue=8191&ce,fe=ce>>>13;let le,de,pe,be=0;r.negative=e.negative^t.negative,r._alloc(20),r.length=19;let ge=(be+(le=Math.imul(a,j))|0)+((8191&(de=(de=Math.imul(a,D))+Math.imul(h,j)|0))<<13)|0;be=((pe=Math.imul(h,D))+(de>>>13)|0)+(ge>>>26)|0,ge&=67108863,le=Math.imul(u,j),de=(de=Math.imul(u,D))+Math.imul(f,j)|0,pe=Math.imul(f,D);let me=(be+(le=le+Math.imul(a,L)|0)|0)+((8191&(de=(de=de+Math.imul(a,z)|0)+Math.imul(h,L)|0))<<13)|0;be=((pe=pe+Math.imul(h,z)|0)+(de>>>13)|0)+(me>>>26)|0,me&=67108863,le=Math.imul(d,j),de=(de=Math.imul(d,D))+Math.imul(p,j)|0,pe=Math.imul(p,D),le=le+Math.imul(u,L)|0,de=(de=de+Math.imul(u,z)|0)+Math.imul(f,L)|0,pe=pe+Math.imul(f,z)|0;let _e=(be+(le=le+Math.imul(a,H)|0)|0)+((8191&(de=(de=de+Math.imul(a,V)|0)+Math.imul(h,H)|0))<<13)|0;be=((pe=pe+Math.imul(h,V)|0)+(de>>>13)|0)+(_e>>>26)|0,_e&=67108863,le=Math.imul(g,j),de=(de=Math.imul(g,D))+Math.imul(m,j)|0,pe=Math.imul(m,D),le=le+Math.imul(d,L)|0,de=(de=de+Math.imul(d,z)|0)+Math.imul(p,L)|0,pe=pe+Math.imul(p,z)|0,le=le+Math.imul(u,H)|0,de=(de=de+Math.imul(u,V)|0)+Math.imul(f,H)|0,pe=pe+Math.imul(f,V)|0;let we=(be+(le=le+Math.imul(a,W)|0)|0)+((8191&(de=(de=de+Math.imul(a,G)|0)+Math.imul(h,W)|0))<<13)|0;be=((pe=pe+Math.imul(h,G)|0)+(de>>>13)|0)+(we>>>26)|0,we&=67108863,le=Math.imul(w,j),de=(de=Math.imul(w,D))+Math.imul(y,j)|0,pe=Math.imul(y,D),le=le+Math.imul(g,L)|0,de=(de=de+Math.imul(g,z)|0)+Math.imul(m,L)|0,pe=pe+Math.imul(m,z)|0,le=le+Math.imul(d,H)|0,de=(de=de+Math.imul(d,V)|0)+Math.imul(p,H)|0,pe=pe+Math.imul(p,V)|0,le=le+Math.imul(u,W)|0,de=(de=de+Math.imul(u,G)|0)+Math.imul(f,W)|0,pe=pe+Math.imul(f,G)|0;let ye=(be+(le=le+Math.imul(a,X)|0)|0)+((8191&(de=(de=de+Math.imul(a,J)|0)+Math.imul(h,X)|0))<<13)|0;be=((pe=pe+Math.imul(h,J)|0)+(de>>>13)|0)+(ye>>>26)|0,ye&=67108863,le=Math.imul(E,j),de=(de=Math.imul(E,D))+Math.imul(S,j)|0,pe=Math.imul(S,D),le=le+Math.imul(w,L)|0,de=(de=de+Math.imul(w,z)|0)+Math.imul(y,L)|0,pe=pe+Math.imul(y,z)|0,le=le+Math.imul(g,H)|0,de=(de=de+Math.imul(g,V)|0)+Math.imul(m,H)|0,pe=pe+Math.imul(m,V)|0,le=le+Math.imul(d,W)|0,de=(de=de+Math.imul(d,G)|0)+Math.imul(p,W)|0,pe=pe+Math.imul(p,G)|0,le=le+Math.imul(u,X)|0,de=(de=de+Math.imul(u,J)|0)+Math.imul(f,X)|0,pe=pe+Math.imul(f,J)|0;let ve=(be+(le=le+Math.imul(a,Z)|0)|0)+((8191&(de=(de=de+Math.imul(a,$)|0)+Math.imul(h,Z)|0))<<13)|0;be=((pe=pe+Math.imul(h,$)|0)+(de>>>13)|0)+(ve>>>26)|0,ve&=67108863,le=Math.imul(k,j),de=(de=Math.imul(k,D))+Math.imul(A,j)|0,pe=Math.imul(A,D),le=le+Math.imul(E,L)|0,de=(de=de+Math.imul(E,z)|0)+Math.imul(S,L)|0,pe=pe+Math.imul(S,z)|0,le=le+Math.imul(w,H)|0,de=(de=de+Math.imul(w,V)|0)+Math.imul(y,H)|0,pe=pe+Math.imul(y,V)|0,le=le+Math.imul(g,W)|0,de=(de=de+Math.imul(g,G)|0)+Math.imul(m,W)|0,pe=pe+Math.imul(m,G)|0,le=le+Math.imul(d,X)|0,de=(de=de+Math.imul(d,J)|0)+Math.imul(p,X)|0,pe=pe+Math.imul(p,J)|0,le=le+Math.imul(u,Z)|0,de=(de=de+Math.imul(u,$)|0)+Math.imul(f,Z)|0,pe=pe+Math.imul(f,$)|0;let Ee=(be+(le=le+Math.imul(a,te)|0)|0)+((8191&(de=(de=de+Math.imul(a,re)|0)+Math.imul(h,te)|0))<<13)|0;be=((pe=pe+Math.imul(h,re)|0)+(de>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,le=Math.imul(x,j),de=(de=Math.imul(x,D))+Math.imul(R,j)|0,pe=Math.imul(R,D),le=le+Math.imul(k,L)|0,de=(de=de+Math.imul(k,z)|0)+Math.imul(A,L)|0,pe=pe+Math.imul(A,z)|0,le=le+Math.imul(E,H)|0,de=(de=de+Math.imul(E,V)|0)+Math.imul(S,H)|0,pe=pe+Math.imul(S,V)|0,le=le+Math.imul(w,W)|0,de=(de=de+Math.imul(w,G)|0)+Math.imul(y,W)|0,pe=pe+Math.imul(y,G)|0,le=le+Math.imul(g,X)|0,de=(de=de+Math.imul(g,J)|0)+Math.imul(m,X)|0,pe=pe+Math.imul(m,J)|0,le=le+Math.imul(d,Z)|0,de=(de=de+Math.imul(d,$)|0)+Math.imul(p,Z)|0,pe=pe+Math.imul(p,$)|0,le=le+Math.imul(u,te)|0,de=(de=de+Math.imul(u,re)|0)+Math.imul(f,te)|0,pe=pe+Math.imul(f,re)|0;let Se=(be+(le=le+Math.imul(a,se)|0)|0)+((8191&(de=(de=de+Math.imul(a,ne)|0)+Math.imul(h,se)|0))<<13)|0;be=((pe=pe+Math.imul(h,ne)|0)+(de>>>13)|0)+(Se>>>26)|0,Se&=67108863,le=Math.imul(P,j),de=(de=Math.imul(P,D))+Math.imul(B,j)|0,pe=Math.imul(B,D),le=le+Math.imul(x,L)|0,de=(de=de+Math.imul(x,z)|0)+Math.imul(R,L)|0,pe=pe+Math.imul(R,z)|0,le=le+Math.imul(k,H)|0,de=(de=de+Math.imul(k,V)|0)+Math.imul(A,H)|0,pe=pe+Math.imul(A,V)|0,le=le+Math.imul(E,W)|0,de=(de=de+Math.imul(E,G)|0)+Math.imul(S,W)|0,pe=pe+Math.imul(S,G)|0,le=le+Math.imul(w,X)|0,de=(de=de+Math.imul(w,J)|0)+Math.imul(y,X)|0,pe=pe+Math.imul(y,J)|0,le=le+Math.imul(g,Z)|0,de=(de=de+Math.imul(g,$)|0)+Math.imul(m,Z)|0,pe=pe+Math.imul(m,$)|0,le=le+Math.imul(d,te)|0,de=(de=de+Math.imul(d,re)|0)+Math.imul(p,te)|0,pe=pe+Math.imul(p,re)|0,le=le+Math.imul(u,se)|0,de=(de=de+Math.imul(u,ne)|0)+Math.imul(f,se)|0,pe=pe+Math.imul(f,ne)|0;let Ie=(be+(le=le+Math.imul(a,ae)|0)|0)+((8191&(de=(de=de+Math.imul(a,he)|0)+Math.imul(h,ae)|0))<<13)|0;be=((pe=pe+Math.imul(h,he)|0)+(de>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,le=Math.imul(T,j),de=(de=Math.imul(T,D))+Math.imul(C,j)|0,pe=Math.imul(C,D),le=le+Math.imul(P,L)|0,de=(de=de+Math.imul(P,z)|0)+Math.imul(B,L)|0,pe=pe+Math.imul(B,z)|0,le=le+Math.imul(x,H)|0,de=(de=de+Math.imul(x,V)|0)+Math.imul(R,H)|0,pe=pe+Math.imul(R,V)|0,le=le+Math.imul(k,W)|0,de=(de=de+Math.imul(k,G)|0)+Math.imul(A,W)|0,pe=pe+Math.imul(A,G)|0,le=le+Math.imul(E,X)|0,de=(de=de+Math.imul(E,J)|0)+Math.imul(S,X)|0,pe=pe+Math.imul(S,J)|0,le=le+Math.imul(w,Z)|0,de=(de=de+Math.imul(w,$)|0)+Math.imul(y,Z)|0,pe=pe+Math.imul(y,$)|0,le=le+Math.imul(g,te)|0,de=(de=de+Math.imul(g,re)|0)+Math.imul(m,te)|0,pe=pe+Math.imul(m,re)|0,le=le+Math.imul(d,se)|0,de=(de=de+Math.imul(d,ne)|0)+Math.imul(p,se)|0,pe=pe+Math.imul(p,ne)|0,le=le+Math.imul(u,ae)|0,de=(de=de+Math.imul(u,he)|0)+Math.imul(f,ae)|0,pe=pe+Math.imul(f,he)|0;let ke=(be+(le=le+Math.imul(a,ue)|0)|0)+((8191&(de=(de=de+Math.imul(a,fe)|0)+Math.imul(h,ue)|0))<<13)|0;be=((pe=pe+Math.imul(h,fe)|0)+(de>>>13)|0)+(ke>>>26)|0,ke&=67108863,le=Math.imul(T,L),de=(de=Math.imul(T,z))+Math.imul(C,L)|0,pe=Math.imul(C,z),le=le+Math.imul(P,H)|0,de=(de=de+Math.imul(P,V)|0)+Math.imul(B,H)|0,pe=pe+Math.imul(B,V)|0,le=le+Math.imul(x,W)|0,de=(de=de+Math.imul(x,G)|0)+Math.imul(R,W)|0,pe=pe+Math.imul(R,G)|0,le=le+Math.imul(k,X)|0,de=(de=de+Math.imul(k,J)|0)+Math.imul(A,X)|0,pe=pe+Math.imul(A,J)|0,le=le+Math.imul(E,Z)|0,de=(de=de+Math.imul(E,$)|0)+Math.imul(S,Z)|0,pe=pe+Math.imul(S,$)|0,le=le+Math.imul(w,te)|0,de=(de=de+Math.imul(w,re)|0)+Math.imul(y,te)|0,pe=pe+Math.imul(y,re)|0,le=le+Math.imul(g,se)|0,de=(de=de+Math.imul(g,ne)|0)+Math.imul(m,se)|0,pe=pe+Math.imul(m,ne)|0,le=le+Math.imul(d,ae)|0,de=(de=de+Math.imul(d,he)|0)+Math.imul(p,ae)|0,pe=pe+Math.imul(p,he)|0;let Ae=(be+(le=le+Math.imul(u,ue)|0)|0)+((8191&(de=(de=de+Math.imul(u,fe)|0)+Math.imul(f,ue)|0))<<13)|0;be=((pe=pe+Math.imul(f,fe)|0)+(de>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,le=Math.imul(T,H),de=(de=Math.imul(T,V))+Math.imul(C,H)|0,pe=Math.imul(C,V),le=le+Math.imul(P,W)|0,de=(de=de+Math.imul(P,G)|0)+Math.imul(B,W)|0,pe=pe+Math.imul(B,G)|0,le=le+Math.imul(x,X)|0,de=(de=de+Math.imul(x,J)|0)+Math.imul(R,X)|0,pe=pe+Math.imul(R,J)|0,le=le+Math.imul(k,Z)|0,de=(de=de+Math.imul(k,$)|0)+Math.imul(A,Z)|0,pe=pe+Math.imul(A,$)|0,le=le+Math.imul(E,te)|0,de=(de=de+Math.imul(E,re)|0)+Math.imul(S,te)|0,pe=pe+Math.imul(S,re)|0,le=le+Math.imul(w,se)|0,de=(de=de+Math.imul(w,ne)|0)+Math.imul(y,se)|0,pe=pe+Math.imul(y,ne)|0,le=le+Math.imul(g,ae)|0,de=(de=de+Math.imul(g,he)|0)+Math.imul(m,ae)|0,pe=pe+Math.imul(m,he)|0;let Oe=(be+(le=le+Math.imul(d,ue)|0)|0)+((8191&(de=(de=de+Math.imul(d,fe)|0)+Math.imul(p,ue)|0))<<13)|0;be=((pe=pe+Math.imul(p,fe)|0)+(de>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,le=Math.imul(T,W),de=(de=Math.imul(T,G))+Math.imul(C,W)|0,pe=Math.imul(C,G),le=le+Math.imul(P,X)|0,de=(de=de+Math.imul(P,J)|0)+Math.imul(B,X)|0,pe=pe+Math.imul(B,J)|0,le=le+Math.imul(x,Z)|0,de=(de=de+Math.imul(x,$)|0)+Math.imul(R,Z)|0,pe=pe+Math.imul(R,$)|0,le=le+Math.imul(k,te)|0,de=(de=de+Math.imul(k,re)|0)+Math.imul(A,te)|0,pe=pe+Math.imul(A,re)|0,le=le+Math.imul(E,se)|0,de=(de=de+Math.imul(E,ne)|0)+Math.imul(S,se)|0,pe=pe+Math.imul(S,ne)|0,le=le+Math.imul(w,ae)|0,de=(de=de+Math.imul(w,he)|0)+Math.imul(y,ae)|0,pe=pe+Math.imul(y,he)|0;let xe=(be+(le=le+Math.imul(g,ue)|0)|0)+((8191&(de=(de=de+Math.imul(g,fe)|0)+Math.imul(m,ue)|0))<<13)|0;be=((pe=pe+Math.imul(m,fe)|0)+(de>>>13)|0)+(xe>>>26)|0,xe&=67108863,le=Math.imul(T,X),de=(de=Math.imul(T,J))+Math.imul(C,X)|0,pe=Math.imul(C,J),le=le+Math.imul(P,Z)|0,de=(de=de+Math.imul(P,$)|0)+Math.imul(B,Z)|0,pe=pe+Math.imul(B,$)|0,le=le+Math.imul(x,te)|0,de=(de=de+Math.imul(x,re)|0)+Math.imul(R,te)|0,pe=pe+Math.imul(R,re)|0,le=le+Math.imul(k,se)|0,de=(de=de+Math.imul(k,ne)|0)+Math.imul(A,se)|0,pe=pe+Math.imul(A,ne)|0,le=le+Math.imul(E,ae)|0,de=(de=de+Math.imul(E,he)|0)+Math.imul(S,ae)|0,pe=pe+Math.imul(S,he)|0;let Re=(be+(le=le+Math.imul(w,ue)|0)|0)+((8191&(de=(de=de+Math.imul(w,fe)|0)+Math.imul(y,ue)|0))<<13)|0;be=((pe=pe+Math.imul(y,fe)|0)+(de>>>13)|0)+(Re>>>26)|0,Re&=67108863,le=Math.imul(T,Z),de=(de=Math.imul(T,$))+Math.imul(C,Z)|0,pe=Math.imul(C,$),le=le+Math.imul(P,te)|0,de=(de=de+Math.imul(P,re)|0)+Math.imul(B,te)|0,pe=pe+Math.imul(B,re)|0,le=le+Math.imul(x,se)|0,de=(de=de+Math.imul(x,ne)|0)+Math.imul(R,se)|0,pe=pe+Math.imul(R,ne)|0,le=le+Math.imul(k,ae)|0,de=(de=de+Math.imul(k,he)|0)+Math.imul(A,ae)|0,pe=pe+Math.imul(A,he)|0;let Me=(be+(le=le+Math.imul(E,ue)|0)|0)+((8191&(de=(de=de+Math.imul(E,fe)|0)+Math.imul(S,ue)|0))<<13)|0;be=((pe=pe+Math.imul(S,fe)|0)+(de>>>13)|0)+(Me>>>26)|0,Me&=67108863,le=Math.imul(T,te),de=(de=Math.imul(T,re))+Math.imul(C,te)|0,pe=Math.imul(C,re),le=le+Math.imul(P,se)|0,de=(de=de+Math.imul(P,ne)|0)+Math.imul(B,se)|0,pe=pe+Math.imul(B,ne)|0,le=le+Math.imul(x,ae)|0,de=(de=de+Math.imul(x,he)|0)+Math.imul(R,ae)|0,pe=pe+Math.imul(R,he)|0;let Pe=(be+(le=le+Math.imul(k,ue)|0)|0)+((8191&(de=(de=de+Math.imul(k,fe)|0)+Math.imul(A,ue)|0))<<13)|0;be=((pe=pe+Math.imul(A,fe)|0)+(de>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,le=Math.imul(T,se),de=(de=Math.imul(T,ne))+Math.imul(C,se)|0,pe=Math.imul(C,ne),le=le+Math.imul(P,ae)|0,de=(de=de+Math.imul(P,he)|0)+Math.imul(B,ae)|0,pe=pe+Math.imul(B,he)|0;let Be=(be+(le=le+Math.imul(x,ue)|0)|0)+((8191&(de=(de=de+Math.imul(x,fe)|0)+Math.imul(R,ue)|0))<<13)|0;be=((pe=pe+Math.imul(R,fe)|0)+(de>>>13)|0)+(Be>>>26)|0,Be&=67108863,le=Math.imul(T,ae),de=(de=Math.imul(T,he))+Math.imul(C,ae)|0,pe=Math.imul(C,he);let Ne=(be+(le=le+Math.imul(P,ue)|0)|0)+((8191&(de=(de=de+Math.imul(P,fe)|0)+Math.imul(B,ue)|0))<<13)|0;be=((pe=pe+Math.imul(B,fe)|0)+(de>>>13)|0)+(Ne>>>26)|0,Ne&=67108863;let Te=(be+(le=Math.imul(T,ue))|0)+((8191&(de=(de=Math.imul(T,fe))+Math.imul(C,ue)|0))<<13)|0;return be=((pe=Math.imul(C,fe))+(de>>>13)|0)+(Te>>>26)|0,Te&=67108863,n[0]=ge,n[1]=me,n[2]=_e,n[3]=we,n[4]=ye,n[5]=ve,n[6]=Ee,n[7]=Se,n[8]=Ie,n[9]=ke,n[10]=Ae,n[11]=Oe,n[12]=xe,n[13]=Re,n[14]=Me,n[15]=Pe,n[16]=Be,n[17]=Ne,n[18]=Te,0!==be&&(n[19]=be,r.length+=1),r}Math.imul||(z=U),d.Red=v,r.exports=d}],["bcrypto","/lib/internal/custom-browser.js",function(e,t,r,i,s,n){"use strict";e.custom="inspect"}],["bcrypto","/lib/random-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(148,r)}],["bcrypto","/lib/js/random.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(5,r),a=global.crypto||global.msCrypto,h=a&&"function"==typeof a.getRandomValues,c=h?a.getRandomValues.bind(a):null,u=new Uint32Array(1),f=65536;function l(){d(u);const e=u[0];return u[0]=0,e}function d(e){if(!h)throw new Error("Entropy source not available.");return c(e)}function p(e,t,r){if(o(null!=e&&!0===e._isBuffer),o(e.buffer instanceof ArrayBuffer),o(e.byteOffset>>>0===e.byteOffset),o(e.byteLength>>>0===e.byteLength),o(t>>>0===t),o(r>>>0===r),o(t+r<=e.byteLength),r>2**31-1)throw new RangeError('The value "size" is out of range.');const i=e.byteOffset+t,s=new Uint8Array(e.buffer,i,r);if(s.length>f)for(let e=0;e<s.length;e+=f){let t=e+f;t>s.length&&(t=s.length),d(s.subarray(e,t))}else s.length>0&&d(s)}e.native=0,e.randomBytes=function(e){o(e>>>0===e);const t=Buffer.alloc(e);return p(t,0,e),t},e.randomFill=function(e,t,r){return o(null!=e&&!0===e._isBuffer),null==t&&(t=0),o(t>>>0===t),null==r&&(r=e.length-t),o(r>>>0===r),o(t+r<=e.length),e.fill(0,t,t+r),p(e,t,r),e},e.randomInt=l,e.randomRange=function(e,t){o(e>>>0===e),o(t>>>0===t),o(t>=e);const r=t-e;if(0===r)return e;const i=-r>>>0;let s,n;do{n=(s=l())%r}while(s-n>i);return n+e}}],["bcrypto","/lib/internal/asn1.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(44,r),a=__browser_require__(144,r);function h(e,t,r){if(o(null!=e&&!0===e._isBuffer),o(t>>>0===t),o("boolean"==typeof r),t>=e.length)throw new Error("Invalid size.");const i=e[t],s=127&i;if(t+=1,0==(128&i))return[s,t];if(r&&0===s)throw new Error("Indefinite length.");let n=0;for(let i=0;i<s;i++){o(t<e.length);const i=e[t];if(t+=1,n>=1<<24)throw new Error("Length too large.");if(n*=256,n+=i,r&&0===n)throw new Error("Unexpected leading zeroes.")}if(r&&n<128)throw new Error("Non-minimal length.");return[n,t]}function c(e,t,r=!0){if(o(null!=e&&!0===e._isBuffer),o(t>>>0===t),o("boolean"==typeof r),t>=e.length||2!==e[t])throw new Error("Invalid integer tag.");let i;if(t+=1,[i,t]=h(e,t,r),t+i>e.length)throw new Error("Integer body out of bounds.");if(r){if(0===i)throw new Error("Zero length integer.");if(128&e[t])throw new Error("Integers must be positive.");if(i>1&&0===e[t]&&0==(128&e[t+1]))throw new Error("Unexpected leading zeroes.")}for(;i>1&&0===e[t];)t+=1,i-=1;if(i>2048)throw new Error("Invalid integer size.");return[a.decode(e.slice(t,t+i)),t+=i]}function u(e){return o(e>>>0===e),e<=127?1:e<=255?2:(o(e<=65535),3)}function f(e,t,r){return o(null!=e&&!0===e._isBuffer),o(t>>>0===t),o(r>>>0===r),r<=127?e[t++]=r:r<=255?(e[t++]=129,e[t++]=r):(o(r<=65535),e[t++]=130,e[t++]=r>>8,e[t++]=255&r),o(t<=e.length),t}e.readSize=h,e.readSeq=function(e,t,r=!0){if(o(null!=e&&!0===e._isBuffer),o(t>>>0===t),o("boolean"==typeof r),t>=e.length||48!==e[t])throw new Error("Invalid sequence tag.");let i;if(t+=1,[i,t]=h(e,t,r),r&&t+i!==e.length)throw new Error("Trailing bytes.");return t},e.readInt=c,e.readVersion=function(e,t,r,i=!0){let s;if(o(null!=e&&!0===e._isBuffer),o(t>>>0===t),o((255&r)===r),o("boolean"==typeof i),[s,t]=c(e,t,i),0!==s.cmpn(r))throw new Error("Invalid version.");return t},e.sizeSize=u,e.sizeSeq=function(e){return 1+u(e)+e},e.sizeInt=function(e){o(e instanceof a);const t=e.bitLength();let r=t+7>>>3;return t>0&&0==(7&t)&&(r+=e.testn(t-1)),0===t&&(r=1),1+u(r)+r},e.sizeVersion=function(e){return o((255&e)===e),3},e.writeSize=f,e.writeSeq=function(e,t,r){return o(null!=e&&!0===e._isBuffer),o(t>>>0===t),e[t++]=48,f(e,t,r)},e.writeInt=function(e,t,r){o(null!=e&&!0===e._isBuffer),o(t>>>0===t),o(r instanceof a);const i=r.bitLength();let s=i+7>>>3,n=0;return i>0&&0==(7&i)&&(n=r.testn(i-1)),0===i&&(s=1),e[t++]=2,t=f(e,t,n+s),n&&(e[t++]=0),0!==i?r.encode().copy(e,t):e[t]=0,o((t+=s)<=e.length),t},e.writeVersion=function(e,t,r){return o(null!=e&&!0===e._isBuffer),o(t>>>0===t),o((255&r)===r),o(t+3<=e.length),e[t++]=2,e[t++]=1,e[t++]=r,t}}],["bcrypto","/lib/js/schnorr-legacy.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(5,r),a=__browser_require__(151,r),h=__browser_require__(144,r);r.exports=class{constructor(e,t){this.curve=e,this.hash=t,this.rng=new a(this.curve,this.encode.bind(this))}check(){if(3!==this.curve.p.andln(3))throw new Error(`Schnorr is not supported for ${this.curve.id}.`)}encode(e){o(null!=e&&!0===e._isBuffer);const{fieldSize:t}=this.curve;if(e.length===1+t)return e;if(e.length!==1+2*t)throw new Error("Invalid point.");const r=Buffer.allocUnsafe(1+t);return r[0]=2|1&e[e.length-1],e.copy(r,1,1,1+t),r}hashInt(...e){const t=new this.hash;t.init();for(const r of e)t.update(r);let r=t.final();return r.length>this.curve.scalarSize&&(r=r.slice(0,this.curve.scalarSize)),h.decode(r,this.curve.endian).imod(this.curve.n)}hashNonce(e,t){return this.hashInt(e,t)}hashChallenge(e,t,r){return this.hashInt(e,this.encode(t),r)}sign(e,t){return o(null!=e&&!0===e._isBuffer),this.check(),this._sign(e,t)}_sign(e,t){const{n:r}=this.curve,i=this.curve.g,s=this.curve.decodeScalar(t);if(s.isZero()||s.cmp(r)>=0)throw new Error("Invalid private key.");const n=i.mulBlind(s),o=this.hashNonce(t,e);if(o.isZero())throw new Error("Signing failed (k' = 0).");const a=i.mulBlind(o);a.isSquare()||o.ineg().imod(r);const h=a.encodeX(),c=n.encode(),u=this.hashChallenge(h,c,e),f=o.add(u.mul(s)).imod(r);return Buffer.concat([h,this.curve.encodeScalar(f)])}verify(e,t,r){if(o(null!=e&&!0===e._isBuffer),o(null!=t&&!0===t._isBuffer),o(null!=r&&!0===r._isBuffer),this.check(),t.length!==this.curve.fieldSize+this.curve.scalarSize)return!1;try{return this._verify(e,t,r)}catch(e){return!1}}_verify(e,t,r){const{p:i,n:s}=this.curve,n=this.curve.g,o=t.slice(0,this.curve.fieldSize),a=t.slice(this.curve.fieldSize),h=this.curve.decodeField(o),c=this.curve.decodeScalar(a),u=this.curve.decodePoint(r);if(h.cmp(i)>=0||c.cmp(s)>=0)return!1;const f=this.hashChallenge(o,r,e),l=n.jmulAdd(c,u,f.ineg().imod(s));return!!l.isSquare()&&!!l.eqX(h)}verifyBatch(e){o(Array.isArray(e)),this.check();for(const t of e){o(Array.isArray(t)&&3===t.length);const[e,r,i]=t;if(o(null!=e&&!0===e._isBuffer),o(null!=r&&!0===r._isBuffer),o(null!=i&&!0===i._isBuffer),r.length!==this.curve.fieldSize+this.curve.scalarSize)return!1}try{return this._verifyBatch(e)}catch(e){return!1}}_verifyBatch(e){const{n:t}=this.curve,r=this.curve.g,i=new Array(1+2*e.length),s=new Array(1+2*e.length),n=new h(0);this.rng.init(e),i[0]=r,s[0]=n;for(let r=0;r<e.length;r++){const[o,a,h]=e[r],c=a.slice(0,this.curve.fieldSize),u=a.slice(this.curve.fieldSize),f=this.curve.decodeSquare(c),l=this.curve.decodeScalar(u),d=this.curve.decodePoint(h);if(l.cmp(t)>=0)return!1;const p=this.hashChallenge(c,h,o),b=this.rng.generate(r),g=p.mul(b).imod(t);n.iadd(l.mul(b)).imod(t),i[1+2*r+0]=f,s[1+2*r+0]=b,i[1+2*r+1]=d,s[1+2*r+1]=g}return n.ineg().imod(t),this.curve.jmulAll(i,s).isInfinity()}}}],["bcrypto","/lib/js/batch-rng.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(5,r),a=__browser_require__(144,r),h=__browser_require__(152,r),c=__browser_require__(154,r);r.exports=class{constructor(e,t=(e=>e)){this.curve=e,this.encode=t,this.hash=new c,this.chacha=new h,this.key=Buffer.alloc(32,0),this.iv=Buffer.alloc(8,0),this.cache=[new a(1),new a(1)]}init(e){o(Array.isArray(e)),this.hash.init();for(const[t,r,i]of e)this.hash.update(c.digest(t)),this.hash.update(r),this.hash.update(this.encode(i));return this.key=this.hash.final(),this.cache[0]=new a(1),this.cache[1]=new a(1),this}encrypt(e){const t=2*this.curve.scalarSize,r=Buffer.alloc(t,0),i=r.slice(0,this.curve.scalarSize),s=r.slice(this.curve.scalarSize);return this.chacha.init(this.key,this.iv,e),this.chacha.encrypt(r),[this.curve.decodeScalar(i),this.curve.decodeScalar(s)]}refresh(e){let t=0;for(;;){this.iv[4]=t,this.iv[5]=t>>>8,this.iv[6]=t>>>16,this.iv[7]=t>>>24,t+=1;const[r,i]=this.encrypt(e);if(!(r.isZero()||r.cmp(this.curve.n)>=0||i.isZero()||i.cmp(this.curve.n)>=0)){this.cache[0]=r,this.cache[1]=i;break}}}generate(e){return o(e>>>0===e),1&e&&this.refresh(e>>>1),this.cache[1&e]}}}],["bcrypto","/lib/chacha20-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(153,r)}],["bcrypto","/lib/js/chacha20.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(5,r),a=0===new Int8Array(new Int16Array([1]).buffer)[0];class h{constructor(){this.state=new Uint32Array(16),this.stream=new Uint32Array(16),this.bytes=new Uint8Array(this.stream.buffer),this.pos=-1,a&&(this.bytes=Buffer.alloc(64))}init(e,t,r){if(null==r&&(r=0),o(null!=e&&!0===e._isBuffer),o(null!=t&&!0===t._isBuffer),o(Number.isSafeInteger(r)),16!==e.length&&32!==e.length)throw new RangeError("Invalid key size.");if(t.length>=24&&(e=h.derive(e,t.slice(0,16)),t=t.slice(16)),this.state[0]=1634760805,this.state[1]=e.length<32?824206446:857760878,this.state[2]=e.length<32?2036477238:2036477234,this.state[3]=1797285236,this.state[4]=f(e,0),this.state[5]=f(e,4),this.state[6]=f(e,8),this.state[7]=f(e,12),this.state[8]=f(e,16%e.length),this.state[9]=f(e,20%e.length),this.state[10]=f(e,24%e.length),this.state[11]=f(e,28%e.length),this.state[12]=r>>>0,8===t.length)this.state[13]=r/4294967296>>>0,this.state[14]=f(t,0),this.state[15]=f(t,4);else if(12===t.length)this.state[13]=f(t,0),this.state[14]=f(t,4),this.state[15]=f(t,8);else{if(16!==t.length)throw new RangeError("Invalid nonce size.");this.state[12]=f(t,0),this.state[13]=f(t,4),this.state[14]=f(t,8),this.state[15]=f(t,12)}return this.pos=0,this}encrypt(e){if(o(null!=e&&!0===e._isBuffer),-1===this.pos)throw new Error("Context is not initialized.");for(let t=0;t<e.length;t++)0==(63&this.pos)&&(this._block(),this.pos=0),e[t]^=this.bytes[this.pos++];return e}_block(){for(let e=0;e<16;e++)this.stream[e]=this.state[e];for(let e=0;e<10;e++)c(this.stream,0,4,8,12),c(this.stream,1,5,9,13),c(this.stream,2,6,10,14),c(this.stream,3,7,11,15),c(this.stream,0,5,10,15),c(this.stream,1,6,11,12),c(this.stream,2,7,8,13),c(this.stream,3,4,9,14);for(let e=0;e<16;e++)this.stream[e]+=this.state[e];if(a)for(let e=0;e<16;e++)l(this.bytes,this.stream[e],4*e);this.state[12]+=1,0===this.state[12]&&(this.state[13]+=1)}destroy(){for(let e=0;e<16;e++)this.state[e]=0,this.stream[e]=0;if(a)for(let e=0;e<64;e++)this.bytes[e]=0;return this.pos=-1,this}static derive(e,t){if(o(null!=e&&!0===e._isBuffer),o(null!=t&&!0===t._isBuffer),16!==e.length&&32!==e.length)throw new RangeError("Invalid key size.");if(16!==t.length)throw new RangeError("Invalid nonce size.");const r=new Uint32Array(16);r[0]=1634760805,r[1]=e.length<32?824206446:857760878,r[2]=e.length<32?2036477238:2036477234,r[3]=1797285236,r[4]=f(e,0),r[5]=f(e,4),r[6]=f(e,8),r[7]=f(e,12),r[8]=f(e,16%e.length),r[9]=f(e,20%e.length),r[10]=f(e,24%e.length),r[11]=f(e,28%e.length),r[12]=f(t,0),r[13]=f(t,4),r[14]=f(t,8),r[15]=f(t,12);for(let e=0;e<10;e++)c(r,0,4,8,12),c(r,1,5,9,13),c(r,2,6,10,14),c(r,3,7,11,15),c(r,0,5,10,15),c(r,1,6,11,12),c(r,2,7,8,13),c(r,3,4,9,14);const i=Buffer.alloc(32);return l(i,r[0],0),l(i,r[1],4),l(i,r[2],8),l(i,r[3],12),l(i,r[12],16),l(i,r[13],20),l(i,r[14],24),l(i,r[15],28),i}}function c(e,t,r,i,s){e[t]+=e[r],e[s]=u(e[s]^e[t],16),e[i]+=e[s],e[r]=u(e[r]^e[i],12),e[t]+=e[r],e[s]=u(e[s]^e[t],8),e[i]+=e[s],e[r]=u(e[r]^e[i],7)}function u(e,t){return e<<t|e>>>32-t}function f(e,t){return e[t++]+256*e[t++]+65536*e[t++]+16777216*e[t]}function l(e,t,r){return e[r++]=t,t>>>=8,e[r++]=t,t>>>=8,e[r++]=t,t>>>=8,e[r++]=t,r}h.native=0,r.exports=h}],["bcrypto","/lib/sha256-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(119,r)}],["bcrypto","/lib/hmac-drbg.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(5,r),a=281474976710656,h=Buffer.from([0]),c=Buffer.from([1]);class u{constructor(e,t,r,i){o(e&&"string"==typeof e.id),this.hash=e,this.minEntropy="SHA1"===e.id?10:24,this.K=Buffer.allocUnsafe(e.size),this.V=Buffer.allocUnsafe(e.size),this.rounds=0,t&&this.init(t,r,i)}init(e,t=null,r=null){o(null!=e&&!0===e._isBuffer),o(!t||null!=t&&!0===t._isBuffer),o(!r||null!=r&&!0===r._isBuffer);for(let e=0;e<this.V.length;e++)this.K[e]=0,this.V[e]=1;const i=f(e,t,r);if(i.length<this.minEntropy)throw new Error("Not enough entropy.");return this.update(i),this.rounds=1,this}reseed(e,t=null){if(o(null!=e&&!0===e._isBuffer),o(!t||null!=t&&!0===t._isBuffer),0===this.rounds)throw new Error("DRBG not initialized.");const r=f(e,t);if(r.length<this.minEntropy)throw new Error("Not enough entropy.");return this.update(r),this.rounds=1,this}generate(e,t=null){if(o(e>>>0===e),o(!t||null!=t&&!0===t._isBuffer),0===this.rounds)throw new Error("DRBG not initialized.");if(this.rounds>a)throw new Error("Reseed is required.");t&&0===t.length&&(t=null),t&&this.update(t);const r=Math.ceil(e/this.hash.size),i=Buffer.allocUnsafe(r*this.hash.size);for(let e=0;e<r;e++)this.V=this.mac(this.V),this.V.copy(i,e*this.hash.size);return this.update(t),this.rounds+=1,i.slice(0,e)}randomBytes(e){return this.generate(e)}mac(e){return this.hash.mac(e,this.K)}hmac(){return this.hash.hmac().init(this.K)}update(e=null){o(!e||null!=e&&!0===e._isBuffer);const t=this.hmac();if(t.update(this.V),t.update(h),e&&t.update(e),this.K=t.final(),this.V=this.mac(this.V),e){const t=this.hmac();t.update(this.V),t.update(c),t.update(e),this.K=t.final(),this.V=this.mac(this.V)}return this}}function f(e,t=null,r=null){if(!t&&!r)return e;let i=e.length,s=0;t&&(i+=t.length),r&&(i+=r.length);const n=Buffer.allocUnsafe(i);return s+=e.copy(n,s),t&&(s+=t.copy(n,s)),r&&r.copy(n,s),n}u.native=0,r.exports=u}],["bcrypto","/lib/js/elliptic.js",function(e,t,r,i,s,n){"use strict";const{custom:o}=__browser_require__(146,r),a=__browser_require__(144,r),h={AFFINE:0,JACOBIAN:1,PROJECTIVE:2,EXTENDED:3},c=[-3,-1,-5,-7,0,7,5,1,3];class u{constructor(e,t,r){this.Point=null,this.id=null,this.ossl=null,this.type="base",this.endian="be",this.hash=null,this.prefix=null,this.context=!1,this.prime=null,this.p=null,this.red=null,this.fieldSize=0,this.fieldBits=0,this.signBit=0,this.n=null,this.h=null,this.q=null,this.z=null,this.g=null,this.nh=null,this.scalarSize=0,this.scalarBits=0,this.mask=null,this.zero=null,this.one=null,this.two=null,this.three=null,this.four=null,this.i2=null,this.i3=null,this.i4=null,this.i6=null,this.endo=null,this.hi=null,this._init(e,t,r)}_init(e,t,r){return P("function"==typeof e),P("string"==typeof t),P(r&&"object"==typeof r),P(null==r.red||r.red instanceof a.Red),P(null!=r.p,"Must pass a prime."),P(null==r.id||"string"==typeof r.id),P(null==r.ossl||"string"==typeof r.ossl),P(null==r.endian||"string"==typeof r.endian),P(null==r.hash||"string"==typeof r.hash),P(null==r.prefix||"string"==typeof r.prefix),P(null==r.context||"boolean"==typeof r.context),P(null==r.prime||"string"==typeof r.prime),this.Point=e,this.id=r.id||null,this.ossl=r.ossl||null,this.type=t,this.endian=r.endian||("short"===t?"be":"le"),this.hash=r.hash||null,this.prefix=r.prefix?Buffer.from(r.prefix,"binary"):null,this.context=r.context||!1,this.prime=r.prime||null,this.p=a.fromJSON(r.p),r.red?this.red=r.red:(this.red=r.prime?a.red(r.prime):a.mont(this.p),this.red.precompute()),this.fieldSize=this.p.byteLength(),this.fieldBits=this.p.bitLength(),this.signBit=8*this.fieldSize-1,"edwards"===this.type&&this.p.testn(this.signBit)&&(this.fieldSize+=1,this.signBit+=8),this.n=a.fromJSON(r.n||"0"),this.h=a.fromJSON(r.h||"1"),this.q=this.n.mul(this.h),this.z=a.fromJSON(r.z||"0").toRed(this.red),this.g=null,this.nh=this.n.ushrn(1),this.scalarSize=Math.max(this.n.byteLength(),this.p.byteLength()),this.scalarBits=this.n.bitLength(),this.mask=null,this.zero=new a(0).toRed(this.red),this.one=new a(1).toRed(this.red),this.two=new a(2).toRed(this.red),this.three=new a(3).toRed(this.red),this.four=new a(4).toRed(this.red),this.i2=this.two.redInvert(),this.i3=this.three.redInvert(),this.i4=this.i2.redSqr(),this.i6=this.i2.redMul(this.i3),this.endo=null,this.hi=null,this._scale=C(this._scale,this),this.isIsomorphic=C(this.isIsomorphic,this),this.isIsogenous=C(this.isIsogenous,this),P(this.p.sign()>0&&this.p.isOdd()),P(this.n.sign()>=0),P(this.h.sign()>0&&this.h.cmpn(255)<=0),P("be"===this.endian||"le"===this.endian),this}_finalize(e){return P(e&&"object"==typeof e),this.mask=new y(this),this.g=e.g?this.pointFromJSON(e.g):this.point(),this}_simpleMul(e,t){P(e instanceof f),P(t instanceof a),P(!t.red);const r=t.bitLength();t.isNeg()&&(e=e.neg());let i=this.jpoint();for(let s=r-1;s>=0;s--){const r=t.utestn(s);i=i.dbl(),1===r&&(i=i.add(e))}return i}_simpleMulAdd(e,t){P(Array.isArray(e)),P(Array.isArray(t)),P(e.length===t.length);const r=e.length,i=new Array(r),s=t;let n=0;for(let s=0;s<r;s++){const r=e[s],o=t[s];if(P(r instanceof f),P(o instanceof a),P(!o.red),s>0&&r.type!==e[s-1].type)throw new Error("Cannot mix points.");i[s]=o.isNeg()?r.neg():r,n=Math.max(n,o.bitLength())}let o=this.jpoint();for(let e=n-1;e>=0;e--){o=o.dbl();for(let t=0;t<r;t++){const r=i[t];1===s[t].utestn(e)&&(o=o.add(r))}}return o}_constMul(e,t,r){return P(e instanceof f),this.n.isZero()?this._simpleMul(e,t):"short"===this.type&&0===this.h.cmpn(1)?this._coZLadderMul(e,t):this._ladderMul(e,t)}_ladderMul(e,t){P(e instanceof f),P(t instanceof a),P(!t.red);const[r,i,s]=function(e,t){P(e instanceof a),P(t instanceof a);const r=e.abs().add(t),i=r.add(t),s=r.bitLength(),n=t.bitLength();r.cinject(i,s-n-1>>>31);const o=1&e.isNeg(),h=r.bitLength(),c=r.toArray("le");return[o,h,c]}(t,this.q);let n=e.toJ().clone(),o=this.jpoint().clone(),h=0;for(let e=i-1;e>=0;e--){const t=s[e>>3]>>(7&e)&1;n.swap(o,h^t),n=n.uadd(o),o=o.udbl(),h=t}return n.swap(o,h),o.swap(o.neg(),r),o}_coZLadderMul(e,t){P(e instanceof f),P(t instanceof a),P(!t.red);const r=e.toJ().clone(),[i,s,n,o]=function(e,t){P(e instanceof a),P(t instanceof a);const r=e.mod(t),i=t.sub(r),s=r.bitLength(),n=i.bitLength(),o=s-n>>>31;r.cinject(i,o);const h=r.bitLength(),c=r.toArray("le"),u=r.ceq(t.subn(1));return[o,h,c,u]}(t,this.n);let[h,c]=r.zdblu(),u=0;for(let e=s-2;e>=0;e--){const t=n[e>>3]>>(7&e)&1;h.swap(c,u^t),[h,c]=c.zaddc(h),[c,h]=h.zaddu(c),u=t}return h.swap(c,u),c.swap(r.neg(),o),c.swap(c.neg(),i),c}_fixedNafMul(e,t){P(e instanceof f),P(t instanceof a),P(e.pre);const{step:r,points:i}=e._getDoubles(0,0),s=function(e,t,r,i){P(i>>>0===i);const s=R(e,t,r),n=Math.ceil(s.length/i),o=new Array(n);let a=0;for(let e=0;e<s.length;e+=i){let t=0;for(let r=e+i-1;r>=e;r--)t=(t<<1)+s[r];o[a++]=t}return P(a===n),o}(t,1,t.bitLength()+1,r),n=((1<<r+1)-(r%2==0?2:1))/3;let o=this.jpoint(),h=this.jpoint();for(let e=n;e>0;e--){for(let t=0;t<s.length;t++){const r=s[t];r===e?h=h.add(i[t]):r===-e&&(h=h.add(i[t].neg()))}o=o.add(h)}return o}_wnafMul(e,t,r){P(t instanceof f),P(r instanceof a);const{width:i,points:s}=t._safeNAF(e),n=R(r,i,r.bitLength()+1);let o=this.jpoint();for(let e=n.length-1;e>=0;e--){let t=0;for(;e>=0&&0===n[e];e--)t+=1;if(e>=0&&(t+=1),o=o.dblp(t),e<0)break;const r=n[e];P(0!==r),o=r>0?o.add(s[r-1>>1]):o.add(s[-r-1>>1].neg())}return o}_wnafMulAdd(e,t,r){P(e>>>0===e),P(Array.isArray(t)),P(Array.isArray(r)),P(t.length===r.length);const i=t.length,s=new Array(i),n=new Array(i),o=new Array(i);let h=0;for(let e=0;e<i;e++){const i=t[e],c=r[e];if(P(i instanceof f),P(c instanceof a),e>0&&i.type!==t[e-1].type)throw new Error("Cannot mix points.");s[e]=null,n[e]=null,o[e]=0,h=Math.max(h,c.bitLength()+1)}let c=null,u=null,l=0;for(let e=0;e<i;e++){const i=t[e],o=r[e],a=i._getNAF(0);a?(s[l]=a.points,n[l]=R(o,a.width,h),l+=1):c?(s[l]=c._getJNAF(i),n[l]=M(u,o,h),c=null,u=null,l+=1):(c=i,u=o)}if(c){const t=c._safeNAF(e);s[l]=t.points,n[l]=R(u,t.width,h),l+=1}let d=this.jpoint();for(let e=h-1;e>=0;e--){let t=0;for(;e>=0;){let r=!0;for(let t=0;t<l;t++)o[t]=n[t][e],0!==o[t]&&(r=!1);if(!r)break;t+=1,e-=1}if(e>=0&&(t+=1),d=d.dblp(t),e<0)break;for(let e=0;e<l;e++){const t=o[e];0!==t&&(d=t>0?d.add(s[e][t-1>>1]):d.add(s[e][-t-1>>1].neg()))}}return d}_endoWnafMulAdd(e,t){throw new Error("Not implemented.")}_scale(e,t){switch(P(e instanceof u),P(e.p.eq(this.p)),e.type){case"short":return this._scaleShort(e,t);case"mont":return this._scaleMont(e,t);case"edwards":return this._scaleEdwards(e,t);default:throw new Error("Not implemented.")}}_scaleShort(e,t){throw new Error("Not implemented.")}_scaleMont(e,t){throw new Error("Not implemented.")}_scaleEdwards(e,t){throw new Error("Not implemented.")}isElliptic(){throw new Error("Not implemented.")}jinv(){throw new Error("Not implemented.")}precompute(e){return P(!this.g.isInfinity(),"Must have base point."),P(!this.n.isZero(),"Must have order."),this.g.precompute(this.n.bitLength()+1,e),this}scalar(e,t,r){const i=new a(e,t,r);return P(!i.red),this.n.isZero()?i:i.imod(this.n)}field(e,t,r){const i=a.cast(e,t,r);return i.red?i.forceRed(this.red):i.toRed(this.red)}point(e,t){throw new Error("Not implemented.")}jpoint(e,t,r){throw new Error("Not implemented.")}xpoint(e,t){throw new Error("Not implemented.")}cpoint(e,t,r,i){if(P(e instanceof a),P(t instanceof a),P(r instanceof a),P(i instanceof a),t.isZero()||i.isZero())return this.point();const s=t.redMul(i).redInvert(),n=e.redMul(i).redMul(s),o=r.redMul(t).redMul(s);return this.point(n,o)}solveX2(e){throw new Error("Not implemented.")}solveX(e){return this.solveX2(e).redSqrt()}solveY2(e){throw new Error("Not implemented.")}solveY(e){return this.solveY2(e).redSqrt()}validate(e){throw new Error("Not implemented.")}pointFromX(e,t){throw new Error("Not implemented.")}pointFromY(e,t){throw new Error("Not implemented.")}isIsomorphic(e){throw new Error("Not implemented.")}isIsogenous(e){throw new Error("Not implemented.")}pointFromShort(e){throw new Error("Not implemented.")}pointFromMont(e,t){throw new Error("Not implemented.")}pointFromEdwards(e){throw new Error("Not implemented.")}pointFromUniform(e){throw new Error("Not implemented.")}pointToUniform(e){throw new Error("Not implemented.")}pointFromHash(e,t=!1){P(null!=e&&!0===e._isBuffer),P("boolean"==typeof t);const r=this.fieldBits+7>>>3;if(e.length!==2*r)throw new Error("Invalid hash size.");const i=e.slice(0,r),s=e.slice(r),n=this.decodeUniform(i),o=this.decodeUniform(s),a=this.pointFromUniform(n),h=this.pointFromUniform(o),c=a.uadd(h);return t?c.mulH():c}pointToHash(e,t){for(P(e instanceof this.Point);;){const r=this.randomField(t),i=this.pointFromUniform(r);if(i.neg().eq(i))continue;const s=e.uadd(i.neg()),n=T(t);let o;try{o=this.pointToUniform(s,n)}catch(e){if("Invalid point."===e.message)continue;throw e}const a=this.encodeUniform(r,t),h=this.encodeUniform(o,t);return Buffer.concat([a,h])}}randomScalar(e){const t=this.n.isZero()?this.p:this.n;return a.random(e,1,t)}randomField(e){return a.random(e,1,this.p).toRed(this.red)}randomPoint(e){let t;for(;;){const r=this.randomField(e),i=0!=(1&T(e));try{t=this.pointFromX(r,i)}catch(e){continue}return P(t.validate()),t.mulH()}}mulAll(e,t){return this.jmulAll(e,t)}mulAllSimple(e,t){return this.jmulAllSimple(e,t)}jmulAll(e,t){return P(Array.isArray(e)),P(0===e.length||e[0]instanceof f),this.endo&&e.length>0&&e[0].type===h.AFFINE?this._endoWnafMulAdd(e,t):this._wnafMulAdd(1,e,t)}jmulAllSimple(e,t){return this._simpleMulAdd(e,t)}mulH(e){return P(e instanceof a),this.imulH(e.clone())}imulH(e){P(e instanceof a),P(!e.red);const t=this.h.word(0);if(0==(t&t-1)){const t=this.h.bitLength();return e.iushln(t-1).imod(this.n)}return e.imuln(t).imod(this.n)}reduce(e){return this.mask.reduce(e)}splitHash(e){return this.mask.splitHash(e)}clamp(e){return this.mask.clamp(e)}encodeField(e){return P(e instanceof a),P(!e.red),e.encode(this.endian,this.fieldSize)}decodeField(e){if(P(null!=e&&!0===e._isBuffer),e.length!==this.fieldSize)throw new Error("Invalid field element size.");return a.decode(e,this.endian)}encodeScalar(e){return P(e instanceof a),P(!e.red),e.encode(this.endian,this.scalarSize)}decodeScalar(e){if(P(null!=e&&!0===e._isBuffer),e.length!==this.scalarSize)throw new Error("Invalid scalar size.");return a.decode(e,this.endian)}encodeUniform(e,t){P(e instanceof a);const r=this.fieldBits,i=r+7>>>3,s=8*i-r,n=e.fromRed();if(null!=t&&0!==s){const e=a.randomBits(t,s);n.iuor(e.iushln(r))}return n.encode(this.endian,i)}decodeUniform(e){P(null!=e&&!0===e._isBuffer);const t=this.fieldBits,r=t+7>>>3;if(e.length!==r)throw new Error("Invalid field size.");return a.decode(e,this.endian).iumaskn(t).toRed(this.red)}encodePoint(e,t){return P(e instanceof f),e.encode(t)}decodePoint(e){throw new Error("Not implemented.")}encodeX(e){throw new Error("Not implemented.")}decodeX(e){throw new Error("Not implemented.")}decodeEven(e){throw new Error("Not implemented.")}decodeSquare(e){throw new Error("Not implemented.")}toShort(){throw new Error("Not implemented.")}toMont(e){throw new Error("Not implemented.")}toEdwards(e){throw new Error("Not implemented.")}pointToJSON(e,t){return P(e instanceof f),e.toJSON(t)}pointFromJSON(e){throw new Error("Not implemented.")}toJSON(e){let t,r,i,s,n;return"edwards"===this.type&&(t=this.prefix?this.prefix.toString():null,r=this.context),this.n.isZero()||(i=this.n.toJSON()),this.z.isZero()||(s=this.z.fromRed(),this.z.redIsHigh()&&s.isub(this.p),s=s.toString(16)),this.endo&&(n=this.endo.toJSON()),{id:this.id,ossl:this.ossl,type:this.type,endian:this.endian,hash:this.hash,prefix:t,context:r,prime:this.prime,p:this.p.toJSON(),a:undefined,b:undefined,d:undefined,n:i,h:this.h.toString(16),s:undefined,z:s,c:undefined,g:this.g.toJSON(e),endo:n}}static fromJSON(e){return new this(e)}}class f{constructor(e,t){P(e instanceof u),P(t>>>0===t),this.curve=e,this.type=t,this.pre=null}_init(){throw new Error("Not implemented.")}_getNAF(e){if(P(e>>>0===e),this.pre&&this.pre.naf)return this.pre.naf;if(0===e)return null;const t=1<<e-1,r=new Array(t),i=1===t?null:this.dbl();r[0]=this;for(let e=1;e<t;e++)r[e]=r[e-1].add(i);return new E(e,r)}_safeNAF(e){return this._getNAF(e)}_getDoubles(e,t){if(P(e>>>0===e),P(t>>>0===t),this.pre&&this.pre.doubles)return this.pre.doubles;if(0===e)return null;const r=Math.ceil(t/e)+1,i=new Array(r);let s=this,n=0;i[n++]=s;for(let r=0;r<t;r+=e){for(let t=0;t<e;t++)s=s.dbl();i[n++]=s}return P(n===r),new S(e,i)}_getBeta(){return null}_getBlinding(e){if(this.pre&&this.pre.blinding)return this.pre.blinding;if(!e)return null;if(this.curve.n.isZero())return null;const t=this.curve.randomScalar(e),r=this.mul(t);return new I(t,r)}_hasDoubles(e){if(P(e instanceof a),!this.pre||!this.pre.doubles)return!1;const{step:t,points:r}=this.pre.doubles,i=e.bitLength()+1;return r.length>=Math.ceil(i/t)+1}_getJNAF(e){return P(e instanceof f),P(e.type===this.type),[this,this.add(e),this.add(e.neg()),e]}_blind(e,t){if(P(e instanceof a),P(!e.red),this.pre&&this.pre.blinding){const{blind:t,unblind:r}=this.pre.blinding;return[this,e.sub(t),r]}if(!t)return[this,e,null];if(this.pre){if(this.curve.n.isZero())return[this,e,null];return[this,this.curve.randomScalar(t).mul(this.curve.n).iadd(e),null]}return[this.randomize(t),e,null]}clone(){throw new Error("Not implemented.")}swap(e,t){throw new Error("Not implemented.")}precompute(e,t){return P(e>>>0===e),this.pre||(this.pre=new v),this.pre.naf||(this.pre.naf=this._getNAF(8)),this.pre.doubles||(this.pre.doubles=this._getDoubles(4,e)),this.pre.beta||(this.pre.beta=this._getBeta()),this.pre.blinding||(this.pre.blinding=this._getBlinding(t)),this}validate(){return this.curve.validate(this)}normalize(){return this}scale(e){throw new Error("Not implemented.")}randomize(e){const t=this.curve.randomField(e);return this.scale(t)}neg(){throw new Error("Not implemented.")}add(e){throw new Error("Not implemented.")}sub(e){return P(e instanceof f),this.add(e.neg())}dbl(){throw new Error("Not implemented.")}dblp(e){P(e>>>0===e);let t=this;for(let r=0;r<e;r++)t=t.dbl();return t}uadd(e){throw new Error("Not implemented.")}usub(e){return P(e instanceof f),this.uadd(e.neg())}udbl(){throw new Error("Not implemented.")}zaddu(e){throw new Error("Not implemented.")}zaddc(e){throw new Error("Not implemented.")}zdblu(){throw new Error("Not implemented.")}diffAdd(e,t){throw new Error("Not implemented.")}diffAddDbl(e,t){throw new Error("Not implemented.")}recover(){throw new Error("Not implemented.")}getX(){throw new Error("Not implemented.")}getY(){throw new Error("Not implemented.")}eq(e){throw new Error("Not implemented.")}isInfinity(){throw new Error("Not implemented.")}isOdd(){throw new Error("Not implemented.")}isEven(){throw new Error("Not implemented.")}isSquare(){throw new Error("Not implemented.")}eqX(e){throw new Error("Not implemented.")}eqXToP(e){throw new Error("Not implemented.")}isSmall(){return!this.isInfinity()&&this.jmulH().isInfinity()}hasTorsion(){return!this.isInfinity()&&!this.jmul(this.curve.n).isInfinity()}mul(e){return this.jmul(e)}muln(e){return this.jmuln(e)}mulSimple(e){return this.jmulSimple(e)}mulBlind(e,t){return this.jmulBlind(e,t)}mulConst(e,t){return this.jmulConst(e,t)}mulAdd(e,t,r){return this.jmulAdd(e,t,r)}mulAddSimple(e,t,r){return this.jmulAddSimple(e,t,r)}mulH(){return this.jmulH()}div(e){return this.jdiv(e)}divn(e){return this.jdivn(e)}divH(){return this.jdivH()}jmul(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo&&this.type===h.AFFINE?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(4,this,e)}jmuln(e){return P((0|e)===e),this.jmulSimple(new a(e))}jmulSimple(e){return this.curve._simpleMul(this,e)}jmulBlind(e,t=null){const[r,i,s]=this._blind(e,t),n=r.jmul(i);return s?n.add(s):n}jmulConst(e,t=null){const[r,i,s]=this._blind(e,t),n=this.curve._constMul(r,i,t);return s?n.uadd(s):n}jmulAdd(e,t,r){return this.curve.endo&&this.type===h.AFFINE?this.curve._endoWnafMulAdd([this,t],[e,r]):this.curve._wnafMulAdd(1,[this,t],[e,r])}jmulAddSimple(e,t,r){return this.curve._simpleMulAdd([this,t],[e,r])}jmulH(){const e=this.curve.h.word(0);if(0==(e&e-1)){const e=this.curve.h.bitLength();return this.toJ().dblp(e-1)}return this.jmulSimple(this.curve.h)}jdiv(e){return P(e instanceof a),P(!e.red),this.jmul(e.invert(this.curve.n))}jdivn(e){return P(!this.curve.n.isZero()),0===this.curve.h.cmpn(e)?this.jdivH():this.jdiv(new a(e))}jdivH(){return this.curve.n.isZero()?this.toJ():0===this.curve.h.cmpn(1)?this.toJ():(null===this.curve.hi&&(this.curve.hi=this.curve.h.invert(this.curve.n)),this.jmul(this.curve.hi))}ladder(e){throw new Error("Not implemented.")}ladderSimple(e){throw new Error("Not implemented.")}ladderBlind(e,t){throw new Error("Not implemented.")}ladderConst(e,t){throw new Error("Not implemented.")}toP(){return this.normalize()}toJ(){return this}toX(){return this}encode(e){throw new Error("Not implemented.")}static decode(e,t){throw new Error("Not implemented.")}encodeX(){throw new Error("Not implemented.")}static decodeX(e,t){throw new Error("Not implemented.")}static decodeEven(e,t){throw new Error("Not implemented.")}static decodeSquare(e,t){throw new Error("Not implemented.")}toJSON(e){throw new Error("Not implemented.")}static fromJSON(e,t){throw new Error("Not implemented.")}[o](){return"<Point>"}}class l extends u{constructor(e){super(d,"short",e),this.a=a.fromJSON(e.a).toRed(this.red),this.b=a.fromJSON(e.b).toRed(this.red),this.c=a.fromJSON(e.c||"0").toRed(this.red),this.ai=this.a.isZero()?this.zero:this.a.redInvert(),this.zi=this.z.isZero()?this.zero:this.z.redInvert(),this.zeroA=this.a.isZero(),this.threeA=this.a.eq(this.three.redNeg()),this.redN=this.n.toRed(this.red),this.smallGap=!1,this._finalize(e)}_finalize(e){return super._finalize(e),null!=e.endo?this.endo=k.fromJSON(this,e.endo):this.endo=this._getEndomorphism(),!this.n.isZero()&&this.n.cmp(this.p)<0&&(this.smallGap=this.p.div(this.n).cmpn(100)<=0),this}static _isomorphism(e,t,r,i){P(e instanceof a),P(t instanceof a),P(r instanceof a),P(null==i||"boolean"==typeof i),P(!e.isZero()&&!t.isZero());const s=r.redDiv(e),n=s.redSqrt();if(null!=i?n.redIsOdd()!==i&&n.redINeg():1!==n.redJacobi()&&n.redINeg(),1!==n.redJacobi())throw new Error("Invalid `a` coefficient.");const o=s.redMul(n),h=e.redMul(s),c=t.redMul(o);return P(h.eq(r)),[h,c]}_short(e,t){return l._isomorphism(this.a,this.b,e,t)}_mont(e,t){const[r,i]=this._findRS(t),s=i.redInvert(),n=r.redMuln(3).redMul(s);return null!=e?b._isomorphism(n,s,e):[n,s]}_edwards(e,t){const[r,i]=this._findRS(t),s=r.redMuln(3),n=i.redMuln(2),o=s.redAdd(n),a=s.redSub(n);return null!=e?_._isomorphism(o,a,e):[o,a]}_findRS(e){P(null==e||"boolean"==typeof e),P(this.h.word(0)>=4),P(!this.n.isZero());const t=this.one.redNeg();let r;for(;;){t.redIAdd(this.one);try{r=this.pointFromX(t)}catch(e){continue}if(!(r=r.mul(this.n)).isInfinity()&&r.y.isZero())break}const i=r.x,s=i.redSqr().redMuln(3).redIAdd(this.a).redSqrt();return null!=e&&s.redIsOdd()!==e&&s.redINeg(),[i,s]}_scale0(e,t){const r=this.a.redDiv(this.field(e)),i=this.b.redDiv(this.field(t)),s=r.redSqrt();r.redMul(s).eq(i)||s.redINeg(),P(r.redMul(s).eq(i));const n=s.redSqrt(),o=s.redMul(n);return P(!n.isZero()),[s,o]}_scale1(e,t){const r=this.g.x.redDiv(this.field(e)),i=this.g.y.redDiv(this.field(t)),s=r.redSqrt();return r.redMul(s).eq(i)||s.redINeg(),P(r.redMul(s).eq(i)),P(!s.isZero()),[r,i]}_scaleShort(e){return P(e instanceof l),this.g.isInfinity()||e.g.isInfinity()?this._scale0(e.a,e.b):this._scale1(e.g.x,e.g.y)}_scaleMont(e){if(P(e instanceof b),this.g.isInfinity()||e.g.isInfinity()){const[t,r]=e._short();return this._scale0(t,r)}const{x:t,y:r}=e.g,i=t.redAdd(e.a3).redMul(e.bi),s=r.redMul(e.bi);return this._scale1(i,s)}_scaleEdwards(e){if(P(e instanceof _),this.g.isInfinity()||e.g.isInfinity()){const[t,r]=e._short();return this._scale0(t,r)}const{x:t,y:r,z:i}=e.g,s=e.a.redMuln(5),n=e.d.redMuln(5),o=e.d.redSub(e.a),a=n.redSub(e.a),h=e.d.redSub(s),c=r.redAdd(i),u=r.redSub(i),f=a.redMul(r).redIAdd(h.redMul(i)),l=u.redMuln(12),d=o.redMul(c).redMul(i),p=u.redMul(t).redIMuln(4),b=l.redMul(p).redInvert(),g=f.redMul(p).redMul(b),m=d.redMul(l).redMul(b);return this._scale1(g,m)}_getEndomorphism(e=0){if(this.n.isZero()||this.g.isInfinity())return null;if(!this.zeroA||1!==this.p.modrn(3)||1!==this.n.modrn(3))return null;const[t,r]=this._getEndoRoots(this.p),i=[t,r][1&e].toRed(this.red),[s,n]=this._getEndoRoots(this.n),o=this.point(this.g.x.redMul(i),this.g.y);let a;this.g.mul(s).eq(o)?a=s:(P(this.g.mul(n).eq(o)),a=n);const h=this._getEndoBasis(a),c=this._getEndoPrecomp(h);return new k(i,a,h,c)}_getEndoRoots(e){const t=e===this.p?this.red:a.mont(e),r=new a(2).toRed(t),i=new a(3).toRed(t),s=r.redInvert(),n=i.redNeg().redSqrt().redMul(s),o=n.redNeg();return[n.redSub(s).fromRed(),o.redSub(s).fromRed()].sort(a.cmp)}_getEndoBasis(e){const[t,r,i,s,n,o]=this._egcdSqrt(e),a=i,h=s.neg(),c=t.sqr().iadd(r.sqr()),u=n.sqr().iadd(o.sqr());let f,l;return c.cmp(u)<=0?(f=t,l=r.neg()):(f=n,l=o.neg()),[new A(a,h),new A(f,l)]}_egcdSqrt(e){P(e instanceof a),P(!e.red),P(e.sign()>0),P(this.n.sign()>0);const t=this.n.ushrn(this.n.bitLength()>>>1);let r,i,s,n,o,h=e,c=this.n.clone(),u=new a(1),f=new a(0),l=new a(0),d=new a(1),p=0,b=0;for(;!h.isZero()&&p<2;){const e=c.quo(h),a=c.sub(e.mul(h)),g=l.sub(e.mul(u)),m=d.sub(e.mul(f));0===b&&a.cmp(t)<0&&(r=o,i=u,s=a,n=g,b=1),o=a,c=h,h=a,l=u,u=g,d=f,f=m,p+=b}return P(0!==b,"Could not find r < sqrt(n)."),[r,i,s,n,l,u]}_getEndoPrecomp(e){P(Array.isArray(e)),P(2===e.length),P(e[0]instanceof A),P(e[1]instanceof A);const[t,r]=e,i=t.a.mul(r.b).isub(t.b.mul(r.a)),s=i.bitLength()+16,n=a.shift(1,s),o=n.mul(r.b).divRound(i),h=n.mul(t.b).divRound(i);return P(i.eq(this.n)),[o,h]}_endoSplit(e){P(e instanceof a),P(!e.red),P(!this.n.isZero());const[t,r]=this.endo.basis,i=r.b.mul(e).divRound(this.n),s=t.b.neg().mul(e).divRound(this.n),n=i.mul(t.a),o=s.mul(r.a),h=i.ineg().mul(t.b),c=s.mul(r.b);return[e.sub(n).isub(o),h.isub(c)]}_endoBeta(e){return P(e instanceof d),[e,e._getBeta()]}_endoWnafMulAdd(e,t){P(Array.isArray(e)),P(Array.isArray(t)),P(e.length===t.length),P(null!=this.endo);const r=e.length,i=new Array(2*r),s=new Array(2*r);for(let n=0;n<r;n++){const[r,o]=this._endoBeta(e[n]),[a,h]=this._endoSplit(t[n]);i[2*n+0]=r,s[2*n+0]=a,i[2*n+1]=o,s[2*n+1]=h}return this._wnafMulAdd(1,i,s)}_icart(e){const{a:t,b:r,i3:i,one:s}=this,n=i.redSqr().redMul(i),o=this.p.ushln(1).isubn(1).idivn(3),a=e.clone();a.cinject(s,a.czero());const h=a.redSqr(),c=h.redSqr(),u=c.redMul(h),f=a.redMuln(6).redFermat(),l=t.redMuln(3).redISub(c).redMul(f),d=l.redSqr(),p=u.redMul(n),b=h.redMul(i),g=d.redISub(r).redISub(p).redPow(o).redIAdd(b),m=a.redMul(g).redIAdd(l);return this.point(g,m)}_sswu(e){const{b:t,z:r,ai:i,zi:s,one:n}=this,o=this.p.subn(2),a=r.redSqr(),h=t.redNeg().redMul(i),c=t.redMul(s).redMul(i),u=e.redSqr(),f=u.redSqr(),l=a.redMul(f).redIAdd(r.redMul(u)).redPow(o),d=h.redMul(n.redAdd(l));d.cinject(c,l.czero());const p=r.redMul(u).redMul(d),b=this.solveY2(d),g=this.solveY2(p),m=0|b.redIsSquare(),_=d.cinject(p,1^m),w=b.cinject(g,1^m).redSqrt();return w.cinject(w.redNeg(),w.redIsOdd()^e.redIsOdd()),this.point(_,w)}_sswui(e,t){const{a:r,b:i,z:s}=this,{x:n,y:o}=e,a=3&t,h=r.redSqr().redMul(n.redSqr()),c=r.redMul(i).redMul(n).redIMuln(2),u=i.redSqr().redMuln(3),f=r.redMul(n).redIAdd(i),[l,d]=B(h.redISub(c).redISub(u)),p=f.redSub(d).redINeg(),b=f.redAdd(d).redINeg(),g=f.redMul(s).redIMuln(2),m=i.redMul(s).redIMuln(2);p.cinject(b,1&a),g.cinject(m,a>>>1);const[_,w]=N(p,g);if(w.cinject(w.redNeg(),w.redIsOdd()^o.redIsOdd()),!(l&_))throw new Error("Invalid point.");return w}_svdwf(e){const{c:t,z:r,zi:i,i2:s,i3:n}=this,o=this.p.subn(2),a=this.solveY2(r),h=n.redMul(i.redSqr()),c=e.redSqr(),u=c.redSqr(),f=c.redAdd(a),l=c.redMul(f).redPow(o),d=u.redMul(l).redMul(t),p=f.redSqr().redMul(f),b=t.redSub(r).redMul(s).redISub(d),g=d.redSub(t.redAdd(r).redMul(s)),m=r.redSub(p.redMul(l).redMul(h)),_=this.solveY2(b),w=this.solveY2(g),y=this.solveY2(m),v=0|_.redIsSquare(),E=0|w.redIsSquare();return b.cinject(g,(1^v)&E),_.cinject(w,(1^v)&E),b.cinject(m,(1^v)&(1^E)),_.cinject(y,(1^v)&(1^E)),[b,_]}_svdw(e){const[t,r]=this._svdwf(e),i=r.redSqrt();return i.cinject(i.redNeg(),i.redIsOdd()^e.redIsOdd()),this.point(t,i)}_svdwi(e,t){const{b:r,c:i,z:s,two:n}=this,{x:o,y:a}=e,h=3&t,c=s.redSqr(),u=c.redMul(s),f=c.redSqr(),l=u.redAdd(r),d=l.redMuln(2),p=o.redSqr(),b=o.redMuln(2).redIAdd(s),g=o.redMul(c),m=i.redSub(b),_=i.redAdd(b),w=p.redMul(c).redIAdd(f).redIMuln(9),y=o.redMul(u).redIMuln(18),v=l.redMul(o.redSub(s)).redIMuln(12),[E,S]=B(w.redISub(y).redIAdd(v)),I=h-2>>>31|E,k=S.redMul(s),A=u.redISub(g).redIMuln(3).redISub(d),O=l.redMul(m),x=l.redMul(_),R=A.redAdd(k),M=A.redSub(k),P=n.clone();O.cinject(x,(1^h)-1>>>31),O.cinject(R,(2^h)-1>>>31),O.cinject(M,(3^h)-1>>>31),P.cinject(_,(0^h)-1>>>31),P.cinject(m,(1^h)-1>>>31);const[T,C]=N(O,P),[q]=this._svdwf(C),j=q.ceq(o);if(C.cinject(C.redNeg(),C.redIsOdd()^a.redIsOdd()),!(I&T&j))throw new Error("Invalid point.");return C}isElliptic(){const{a:e,b:t}=this,r=e.redSqr().redMul(e);return!t.redSqr().redMuln(27).redIAdd(r.redMuln(4)).isZero()}jinv(){const{a:e,b:t}=this,r=e.redSqr().redMul(e),i=t.redSqr(),s=r.redMuln(4),n=s.redMuln(1728),o=i.redMuln(27).redIAdd(s);if(o.isZero())throw new Error("Curve is not elliptic.");return n.redDiv(o).fromRed()}point(e,t,r=0){return new d(this,e,t,r)}jpoint(e,t,r){return new p(this,e,t,r)}solveY2(e){P(e instanceof a);const t=e.redSqr().redMul(e).redIAdd(this.b);return this.zeroA||(this.threeA?t.redIAdd(e.redMuln(-3)):t.redIAdd(this.a.redMul(e))),t}validate(e){if(P(e instanceof d),e.inf)return!0;const{x:t,y:r}=e,i=this.solveY2(t);return r.redSqr().eq(i)}pointFromX(e,t=null){P(e instanceof a),P(null==t||"boolean"==typeof t),e.red||(e=e.toRed(this.red));const r=this.solveY(e);return null!=t&&r.redIsOdd()!==t&&r.redINeg(),this.point(e,r)}isIsomorphic(e){if(P(e instanceof u),!e.p.eq(this.p))return!1;let t,r;try{[t,r]=this._scale(e)}catch(e){return!1}if("short"===e.type){const i=this.field(e.a).redMul(t.redSqr()),s=this.field(e.b).redMul(r.redSqr());return this.a.eq(i)&&this.b.eq(s)}if("mont"===e.type){const{a3:r,bi:i}=e,s=this.field(r.redMul(i)).redMul(t);return this.solveY2(s).isZero()}if("edwards"===e.type){const r=this.field(e.ad6).redMul(t);return this.solveY2(r).isZero()}return!1}isIsogenous(e){return P(e instanceof u),!1}pointFromShort(e){if(P(e instanceof d),this.isIsomorphic(e.curve)){if(e.isInfinity())return this.point();const[t,r]=this._scale(e.curve),i=this.field(e.x),s=this.field(e.y),n=i.redMul(t),o=s.redMul(r);return this.point(n,o)}throw new Error("Not implemented.")}pointFromMont(e){if(P(e instanceof g),this.isIsomorphic(e.curve)){if(e.isInfinity())return this.point();const{a3:t,bi:r}=e.curve,[i,s]=this._scale(e.curve),n=e.x.redAdd(t).redMul(r),o=e.y.redMul(r);return this.point(this.field(n).redMul(i),this.field(o).redMul(s))}throw new Error("Not implemented.")}pointFromEdwards(e){if(P(e instanceof w),this.isIsomorphic(e.curve)){const{a:t,d:r,ad6:i}=e.curve,[s,n]=this._scale(e.curve);if(e.isInfinity())return this.point();if(e.x.isZero()){const e=this.field(i).redMul(s);return this.point(e,this.zero)}const{x:o,y:a,z:h}=e,c=t.redMuln(5),u=r.redMuln(5),f=r.redSub(t),l=u.redSub(t),d=r.redSub(c),p=a.redAdd(h),b=a.redSub(h),g=l.redMul(a).redIAdd(d.redMul(h)),m=b.redMuln(12),_=f.redMul(p).redMul(h),w=b.redMul(o).redIMuln(4);return this.cpoint(this.field(g).redMul(s),this.field(m),this.field(_).redMul(n),this.field(w))}throw new Error("Not implemented.")}pointFromUniform(e){if(P(e instanceof a),this.z.isZero()||this.b.isZero())throw new Error("Not implemented.");if(!this.a.isZero())return this._sswu(e);if(!this.c.isZero())return this._svdw(e);throw new Error("Not implemented.")}pointToUniform(e,t){if(P(e instanceof d),P(t>>>0===t),this.z.isZero()||this.b.isZero())throw new Error("Not implemented.");if(e.isInfinity())throw new Error("Invalid point.");if(!this.a.isZero())return this._sswui(e,t);if(!this.c.isZero())return this._svdwi(e,t);throw new Error("Not implemented.")}mulAll(e,t){return super.mulAll(e,t).toP()}mulAllSimple(e,t){return super.mulAllSimple(e,t).toP()}decodePoint(e){return d.decode(this,e)}encodeX(e){return P(e instanceof f),e.encodeX()}decodeEven(e){return d.decodeEven(this,e)}decodeSquare(e){return d.decodeSquare(this,e)}toShort(e,t,r=null){const[i,s]=this._short(e,t),n=new l({red:this.red,prime:this.prime,p:this.p,a:i,b:s,n:this.n,h:this.h});if(null!=r){const[,e]=n._scale(this);e.redIsOdd()!==r&&e.redINeg()}return this.g.isInfinity()||(n.g=n.pointFromShort(this.g)),n}toMont(e,t,r=null){const[i,s]=this._mont(e,t),n=new b({red:this.red,prime:this.prime,p:this.p,a:i,b:s,n:this.n,h:this.h});if(null!=r){const[,e]=this._scale(n);e.redIsOdd()!==r&&e.redINeg()}return this.g.isInfinity()||(n.g=n.pointFromShort(this.g)),n}toEdwards(e,t,r=null){const[i,s]=this._edwards(e,t),n=new _({red:this.red,prime:this.prime,p:this.p,a:i,d:s,n:this.n,h:this.h});if(null!=r){const[,e]=this._scale(n);e.redIsOdd()!==r&&e.redINeg()}return this.g.isInfinity()||(n.g=n.pointFromShort(this.g),n.g.normalize()),n}pointFromJSON(e){return d.fromJSON(this,e)}toJSON(e){const t=super.toJSON(e);return t.a=this.a.fromRed().toJSON(),t.b=this.b.fromRed().toJSON(),this.c.isZero()||(t.c=this.c.fromRed().toJSON()),t}}class d extends f{constructor(e,t,r,i){P(e instanceof l),super(e,h.AFFINE),this.x=this.curve.zero,this.y=this.curve.zero,this.inf=1,null!=t&&this._init(t,r,i)}_init(e,t,r){P(e instanceof a),P(t instanceof a),this.x=e,this.y=t,this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=0|r}_safeNAF(e){return P(e>>>0===e),this.pre&&this.pre.naf?this.pre.naf:e>1?this.toJ()._getNAF(e):this._getNAF(e)}_getBeta(){if(!this.curve.endo)return null;if(this.pre&&this.pre.beta)return this.pre.beta;const e=this.x.redMul(this.curve.endo.beta),t=this.curve.point(e,this.y);return this.pre&&(t.pre=this.pre.map(e=>{const t=e.x.redMul(this.curve.endo.beta);return this.curve.point(t,e.y)}),this.pre.beta=t),t}_getJNAF(e){if(P(e instanceof d),this.inf|e.inf)return super._getJNAF(e);const t=[this,null,null,e];return this.y.eq(e.y)?(t[1]=this.add(e),t[2]=this.toJ().add(e.neg())):this.y.eq(e.y.redNeg())?(t[1]=this.toJ().add(e),t[2]=this.add(e.neg())):(t[1]=this.toJ().add(e),t[2]=this.toJ().add(e.neg())),t}clone(){return this.curve.point(this.x.clone(),this.y.clone(),this.inf)}swap(e,t){P(e instanceof d);const r=1&(t>>31|-t>>31),i=this.inf,s=e.inf;return this.x.cswap(e.x,t),this.y.cswap(e.y,t),this.inf=i&(1^r)|s&r,e.inf=s&(1^r)|i&r,this}scale(e){return this.toJ().scale(e)}neg(){return this.inf?this:this.curve.point(this.x,this.y.redNeg())}add(e){if(P(e instanceof d),this.inf)return e;if(e.inf)return this;if(this.x.eq(e.x))return this.y.eq(e.y)?this.dbl():this.curve.point();if(this.y.eq(e.y)){const t=this.x.redNeg().redISub(e.x),r=this.y.redNeg();return this.curve.point(t,r)}const t=this.x.redSub(e.x),r=this.y.redSub(e.y).redDiv(t),i=r.redSqr().redISub(this.x).redISub(e.x),s=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)}dbl(){if(this.inf)return this;if(this.y.isZero())return this.curve.point();const e=this.x.redSqr().redIMuln(3).redIAdd(this.curve.a),t=this.y.redMuln(2),r=e.redDiv(t),i=r.redSqr().redISub(this.x).redISub(this.x),s=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)}uadd(e){P(e instanceof d);const t=this.y.redAdd(e.y),r=this.x.redAdd(e.x).redSqr(),i=this.x.redMul(e.x),s=r.redISub(i).redIAdd(this.curve.a),n=t.czero()&s.czero();t.cinject(this.x.redSub(e.x),n),s.cinject(this.y.redSub(e.y),n);const o=t.czero()&(1^(this.inf|e.inf));t.cinject(this.curve.one,t.czero());const a=s.redMul(t.redFermat()),h=a.redSqr().redISub(this.x).redISub(e.x),c=a.redMul(this.x.redSub(h)).redISub(this.y),u=o|this.inf&e.inf;return h.cinject(e.x,this.inf),c.cinject(e.y,this.inf),h.cinject(this.x,e.inf),c.cinject(this.y,e.inf),h.cinject(this.curve.zero,u),c.cinject(this.curve.zero,u),this.curve.point(h,c,u)}udbl(){return this.uadd(this)}recover(e,t,r,i){if(P(e instanceof a),P(t instanceof a),P(r instanceof a),P(i instanceof a),this.inf)return this.curve.jpoint();const s=t.redMul(i),n=s.redSqr(),o=n.redMul(s),h=this.x.redMul(s),c=e.redMul(i),u=r.redMul(t),f=this.curve.b.redMul(o).redIMuln(2),l=h.redMul(c).redIAdd(this.curve.a.redMul(n)),d=h.redAdd(c),p=h.redISub(c),b=f.redIAdd(l.redMul(d)),g=u.redMul(p.redSqr()),m=b.redISub(g),_=this.y.redMul(o).redIMuln(2),w=e.redMul(_),y=m.redMul(t),v=t.redMul(_),E=w.redMul(v),S=y.redMul(v.redSqr()),I=v;return this.curve.jpoint(E,S,I)}getX(){if(this.inf)throw new Error("Invalid point.");return this.x.fromRed()}getY(){if(this.inf)throw new Error("Invalid point.");return this.y.fromRed()}eq(e){return P(e instanceof d),this===e||(this.inf?0!==e.inf:!e.inf&&(this.x.eq(e.x)&&this.y.eq(e.y)))}isInfinity(){return 0!==this.inf}isOdd(){return!this.inf&&this.y.redIsOdd()}isEven(){return!this.inf&&this.y.redIsEven()}isSquare(){return!this.inf&&-1!==this.y.redJacobi()}eqX(e){return P(e instanceof a),P(!e.red),!this.inf&&this.getX().eq(e)}eqXToP(e){return P(e instanceof a),P(!e.red),P(!this.curve.n.isZero()),!this.inf&&this.getX().imod(this.curve.n).eq(e)}mul(e){return super.mul(e).toP()}muln(e){return super.muln(e).toP()}mulSimple(e){return super.mulSimple(e).toP()}mulBlind(e,t){return super.mulBlind(e,t).toP()}mulConst(e,t){return super.mulConst(e,t).toP()}mulAdd(e,t,r){return super.mulAdd(e,t,r).toP()}mulAddSimple(e,t,r){return super.mulAddSimple(e,t,r).toP()}mulH(){return super.mulH().toP()}div(e){return super.div(e).toP()}divn(e){return super.divn(e).toP()}divH(){return super.divH().toP()}toP(){return this}toJ(){return this.inf?this.curve.jpoint():this.curve.jpoint(this.x,this.y,this.curve.one)}encode(e){null==e&&(e=!0),P("boolean"==typeof e);const{fieldSize:t}=this.curve;if(this.inf)throw new Error("Invalid point.");if(e){const e=Buffer.allocUnsafe(1+t),r=this.curve.encodeField(this.getX());return e[0]=2|this.y.redIsOdd(),r.copy(e,1),e}const r=Buffer.allocUnsafe(1+2*t),i=this.curve.encodeField(this.getX()),s=this.curve.encodeField(this.getY());return r[0]=4,i.copy(r,1),s.copy(r,1+t),r}static decode(e,t){P(e instanceof l),P(null!=t&&!0===t._isBuffer);const r=e.fieldSize;if(t.length<1+r)throw new Error("Not a point.");const i=t[0];switch(i){case 2:case 3:{if(t.length!==1+r)throw new Error("Invalid point size for compressed.");const s=e.decodeField(t.slice(1,1+r));if(s.cmp(e.p)>=0)throw new Error("Invalid point.");const n=e.pointFromX(s,3===i);return P(!n.isInfinity()),n}case 4:case 6:case 7:{if(t.length!==1+2*r)throw new Error("Invalid point size for uncompressed.");const s=e.decodeField(t.slice(1,1+r)),n=e.decodeField(t.slice(1+r,1+2*r));if(s.cmp(e.p)>=0||n.cmp(e.p)>=0)throw new Error("Invalid point.");if(4!==i&&i!==(6|n.isOdd()))throw new Error("Invalid hybrid encoding.");const o=e.point(s,n);if(!o.validate())throw new Error("Invalid point.");return P(!o.isInfinity()),o}default:throw new Error("Unknown point format.")}}encodeX(){return this.curve.encodeField(this.getX())}static decodeEven(e,t){P(e instanceof l);const r=e.decodeField(t);if(r.cmp(e.p)>=0)throw new Error("Invalid point.");return e.pointFromX(r,!1)}static decodeSquare(e,t){P(e instanceof l);const r=e.decodeField(t);if(r.cmp(e.p)>=0)throw new Error("Invalid point.");return e.pointFromX(r)}toJSON(e){if(this.inf)return[];const t=this.getX().toJSON(),r=this.getY().toJSON();return!0===e&&this.pre?[t,r,this.pre.toJSON()]:[t,r]}static fromJSON(e,t){if(P(e instanceof l),P(Array.isArray(t)),P(0===t.length||2===t.length||3===t.length),0===t.length)return e.point();const r=a.fromJSON(t[0]),i=a.fromJSON(t[1]),s=e.point(r,i);return t.length>2&&null!=t[2]&&(s.pre=v.fromJSON(s,t[2])),s}[o](){return this.inf?"<ShortPoint: Infinity>":"<ShortPoint: x="+this.x.fromRed().toString(16,2)+" y="+this.y.fromRed().toString(16,2)+">"}}class p extends f{constructor(e,t,r,i){P(e instanceof l),super(e,h.JACOBIAN),this.x=this.curve.one,this.y=this.curve.one,this.z=this.curve.zero,this.zOne=0,null!=t&&this._init(t,r,i)}_init(e,t,r){P(e instanceof a),P(t instanceof a),P(null==r||r instanceof a),this.x=e,this.y=t,this.z=r||this.curve.one,this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=0|this.z.eq(this.curve.one)}clone(){return this.curve.jpoint(this.x.clone(),this.y.clone(),this.z.clone())}swap(e,t){P(e instanceof p);const r=1&(t>>31|-t>>31),i=this.zOne,s=e.zOne;return this.x.cswap(e.x,t),this.y.cswap(e.y,t),this.z.cswap(e.z,t),this.zOne=i&(1^r)|s&r,e.zOne=s&(1^r)|i&r,this}validate(){const{a:e,b:t}=this.curve;if(this.isInfinity())return!0;if(this.zOne)return this.curve.validate(this.toP());const r=this.y.redSqr(),i=this.x.redSqr().redMul(this.x),s=this.z.redSqr(),n=s.redSqr(),o=n.redMul(s),a=i.redIAdd(t.redMul(o));return this.curve.zeroA||(this.curve.threeA?a.redIAdd(n.redIMuln(-3).redMul(this.x)):a.redIAdd(e.redMul(n).redMul(this.x))),r.eq(a)}normalize(){if(this.zOne)return this;if(this.isInfinity())return this;const e=this.z.redInvert(),t=e.redSqr();return this.x=this.x.redMul(t),this.y=this.y.redMul(t).redMul(e),this.z=this.curve.one,this.zOne=1,this}scale(e){if(P(e instanceof a),this.isInfinity())return this.curve.jpoint();const t=e.redSqr(),r=this.x.redMul(t),i=this.y.redMul(t).redMul(e),s=this.z.redMul(e);return this.curve.jpoint(r,i,s)}neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)}add(e){return P(e instanceof f),e.type===h.AFFINE?this._mixedAdd(e):this._add(e)}_add(e){return P(e instanceof p),this.isInfinity()?e:e.isInfinity()?this:this.zOne&&e.zOne?this._addAA(e):this.zOne?e._addJA(this):e.zOne?this._addJA(e):this._addJJ(e)}_mixedAdd(e){return P(e instanceof d),this.isInfinity()?e.toJ():e.isInfinity()?this:this.zOne?this._addAA(e):this._addJA(e)}_addJJ(e){const t=this.z.redSqr(),r=e.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(t),n=this.y.redMul(e.z).redMul(r),o=e.y.redMul(this.z).redMul(t),a=s.redISub(i),h=o.redISub(n);if(a.isZero())return h.isZero()?this.dbl():this.curve.jpoint();const c=a.redSqr(),u=a.redMul(c),f=i.redMul(c),l=h.redSqr().redISub(u).redISub(f).redISub(f),d=h.redMul(f.redISub(l)).redISub(n.redMul(u)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(l,d,p)}_addJA(e){const t=this.z.redSqr(),r=e.x.redMul(t),i=e.y.redMul(this.z).redMul(t),s=r.redISub(this.x),n=i.redISub(this.y).redIMuln(2);if(s.isZero())return n.isZero()?this.dbl():this.curve.jpoint();const o=s.redMuln(2).redSqr(),a=s.redMul(o),h=this.x.redMul(o),c=n.redSqr().redISub(a).redISub(h).redISub(h),u=n.redMul(h.redISub(c)).redISub(this.y.redMul(a).redIMuln(2)),f=this.z.redMul(s).redIMuln(2);return this.curve.jpoint(c,u,f)}_addAA(e){const t=e.x.redSub(this.x),r=e.y.redSub(this.y).redIMuln(2);if(t.isZero())return r.isZero()?this.dbl():this.curve.jpoint();const i=t.redSqr().redIMuln(4),s=t.redMul(i),n=this.x.redMul(i),o=r.redSqr().redISub(s).redISub(n).redISub(n),a=r.redMul(n.redISub(o)).redISub(this.y.redMul(s).redIMuln(2)),h=t.redIMuln(2);return this.curve.jpoint(o,a,h)}dbl(){return this.isInfinity()?this:this.y.isZero()?this.curve.jpoint():this.zOne?this._dblA():this.curve.zeroA?this._dbl0():this.curve.threeA?this._dbl3():this._dblJ()}_dblJ(){const e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),i=this.x.redMul(t).redIMuln(4),s=e.redIMuln(3).redIAdd(this.curve.a.redMul(r.redSqr())),n=s.redSqr().redISub(i).redISub(i),o=n,a=s.redMul(i.redISub(n)).redISub(t.redSqr().redIMuln(8)),h=this.y.redMul(this.z).redIMuln(2);return this.curve.jpoint(o,a,h)}_dblA(){const e=this.x.redSqr(),t=this.y.redSqr(),r=t.redSqr(),i=t.redIAdd(this.x).redSqr().redISub(e).redISub(r).redIMuln(2),s=e.redIMuln(3).redIAdd(this.curve.a),n=s.redSqr().redISub(i).redISub(i),o=n,a=s.redMul(i.redISub(n)).redISub(r.redIMuln(8)),h=this.y.redMuln(2);return this.curve.jpoint(o,a,h)}_dbl0(){const e=this.x.redSqr(),t=this.y.redSqr(),r=t.redSqr(),i=t.redIAdd(this.x).redSqr().redISub(e).redISub(r).redIMuln(2),s=e.redIMuln(3),n=s.redSqr().redISub(i).redISub(i),o=s.redMul(i.redISub(n)).redISub(r.redIMuln(8)),a=this.y.redMul(this.z).redIMuln(2);return this.curve.jpoint(n,o,a)}_dbl3(){const e=this.z.redSqr(),t=this.y.redSqr(),r=this.x.redMul(t),i=this.x.redSub(e),s=this.x.redAdd(e),n=i.redMul(s).redIMuln(3),o=r.redIMuln(4),a=o.redMuln(2),h=t.redSqr().redIMuln(8),c=n.redSqr().redISub(a),u=this.y.redAdd(this.z).redSqr().redISub(t).redISub(e),f=n.redMul(o.redISub(c)).redISub(h);return this.curve.jpoint(c,f,u)}dblp(e){return P(e>>>0===e),this.curve.zeroA||this.curve.threeA?super.dblp(e):0===e?this:this.isInfinity()?this:this._dblp(e)}_dblp(e){const{a:t,i2:r}=this.curve;let i=this.x,s=this.z,n=this.y.redMuln(2),o=s.redPown(4);for(let r=0;r<e;r++){if(n.isZero())return this.curve.jpoint();const a=i.redSqr(),h=n.redSqr(),c=h.redSqr(),u=a.redIMuln(3).redIAdd(t.redMul(o)),f=i.redMul(h),l=u.redSqr().redISub(f).redISub(f),d=l,p=u.redMul(f.redISub(l)).redIMuln(2).redISub(c),b=n.redMul(s);r+1<e&&(o=o.redMul(c)),i=d,n=p,s=b}return this.curve.jpoint(i,n.redMul(r),s)}uadd(e){return P(e instanceof f),e.type===h.AFFINE?this._uadd(e.toJ()):this._uadd(e)}_uadd(e){P(e instanceof p);const{zero:t,one:r}=this.curve,i=this.z.redSqr(),s=e.z.redSqr(),n=this.x.redMul(s),o=e.x.redMul(i),a=this.y.redMul(s).redMul(e.z),h=e.y.redMul(i).redMul(this.z),c=this.z.redMul(e.z),u=n.redAdd(o),f=a.redAdd(h),l=u.redSqr().redISub(n.redMul(o));if(!this.curve.zeroA){const e=c.redPown(4);this.curve.threeA?l.redIAdd(e.redIMuln(-3)):l.redIAdd(this.curve.a.redMul(e))}const d=f.czero()&l.czero();f.cinject(n.redSub(o),d),l.cinject(a.redSub(h),d);const b=f.redSqr(),g=u.redMul(b),m=b.redSqr();m.cinject(t,d);const _=l.redSqr(),w=c.redMul(f),y=g.redMuln(3).redISub(_).redISub(_),v=_.redISub(g).redIMuln(4),E=l.redMul(y).redISub(m).redIMuln(4),S=w.redIMuln(2),I=this.z.czero(),k=e.z.czero(),A=S.czero()&(1^(I|k));return v.cinject(e.x,I),E.cinject(e.y,I),S.cinject(e.z,I),v.cinject(this.x,k),E.cinject(this.y,k),S.cinject(this.z,k),v.cinject(r,A),E.cinject(r,A),S.cinject(t,A),this.curve.jpoint(v,E,S)}udbl(){const e=this._udbl(),t=this.z.czero()|this.y.czero();return e.x.cinject(this.curve.one,t),e.y.cinject(this.curve.one,t),e.z.cinject(this.curve.zero,t),e}_udbl(){return this.curve.zeroA?this._dbl0():this.curve.threeA?this._dbl3():this._dblJ()}zaddu(e){P(e instanceof p);const t=this.x.redSub(e.x),r=this.y.redSub(e.y),i=t.redSqr(),s=this.x.redMul(i),n=e.x.redMul(i),o=s,a=r.redSqr().redISub(s).redISub(n),h=this.y.redMul(s.redSub(n)),c=r.redMul(o.redSub(a)).redISub(h),u=this.z.redMul(t),f=u;return[this.curve.jpoint(a,c,f),this.curve.jpoint(o,h,u)]}zaddc(e){P(e instanceof p);const t=this.x.redSub(e.x),r=this.y.redSub(e.y),i=this.y.redAdd(e.y),s=t.redSqr(),n=this.x.redMul(s),o=e.x.redMul(s),a=i.redSqr().redISub(n).redISub(o),h=r.redSqr().redISub(n).redISub(o),c=this.y.redMul(o.redISub(n)),u=e.y.redMuln(2).redIAdd(r),f=n.redISub(a),l=a.redAdd(f).redISub(h),d=u.redMul(f).redIAdd(c),b=r.redMul(l).redIAdd(c),g=this.z.redMul(t),m=g;return[this.curve.jpoint(h,b,m),this.curve.jpoint(a,d,g)]}zdblu(){const e=this.x.redSqr(),t=this.y.redSqr(),r=t.redSqr(),i=this.x.redAdd(t).redSqr(),s=e.redMuln(3);if(!this.curve.zeroA){const e=this.z.redPown(4);this.curve.threeA?s.redIAdd(e.redIMuln(-3)):s.redIAdd(this.curve.a.redMul(e))}const n=i.redISub(e).redISub(r).redIMuln(2),o=s.redSqr().redISub(n).redISub(n),a=r.redIMuln(8),h=n.redSub(o).redMul(s).redISub(a),c=this.y.redMul(this.z).redIMuln(2),u=c;return[this.curve.jpoint(o,h,u),this.curve.jpoint(n,a,c)]}recover(e,t,r,i){return this.toP().recover(e,t,r,i)}getX(){if(this.isInfinity())throw new Error("Invalid point.");return this.normalize(),this.x.fromRed()}getY(){if(this.isInfinity())throw new Error("Invalid point.");return this.normalize(),this.y.fromRed()}eq(e){if(P(e instanceof p),this===e)return!0;if(this.isInfinity())return e.isInfinity();if(e.isInfinity())return!1;if(this.z.eq(e.z))return this.x.eq(e.x)&&this.y.eq(e.y);const t=this.z.redSqr(),r=e.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(t);if(!i.eq(s))return!1;const n=t.redMul(this.z),o=r.redMul(e.z),a=this.y.redMul(o),h=e.y.redMul(n);return a.eq(h)}isInfinity(){return this.z.isZero()}isOdd(){return!this.isInfinity()&&(this.normalize(),this.y.redIsOdd())}isEven(){return!this.isInfinity()&&(this.normalize(),this.y.redIsEven())}isSquare(){return!this.isInfinity()&&-1!==this.y.redMul(this.z).redJacobi()}eqX(e){if(P(e instanceof a),P(!e.red),this.isInfinity())return!1;const t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);return this.x.eq(r)}eqXToP(e){if(P(e instanceof a),P(!e.red),!this.curve.smallGap)return this.toP().eqXToP(e);if(this.isInfinity())return!1;const t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(this.x.eq(r))return!0;const i=e.clone(),s=this.curve.redN.redMul(t);for(;;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(s),this.x.eq(r))break}return!0}toP(){return this.isInfinity()?this.curve.point():(this.normalize(),this.curve.point(this.x,this.y))}toJ(){return this}encode(e){return this.toP().encode(e)}static decode(e,t){return d.decode(e,t).toJ()}encodeX(){return this.toP().encodeX()}static decodeEven(e,t){return d.decodeEven(e,t).toJ()}static decodeSquare(e,t){return d.decodeSquare(e,t).toJ()}toJSON(e){return this.toP().toJSON(e)}static fromJSON(e,t){return d.fromJSON(e,t).toJ()}[o](){return this.isInfinity()?"<JPoint: Infinity>":"<JPoint: x="+this.x.fromRed().toString(16,2)+" y="+this.y.fromRed().toString(16,2)+" z="+this.z.fromRed().toString(16,2)+">"}}class b extends u{constructor(e){super(g,"mont",e),this.a=a.fromJSON(e.a).toRed(this.red),this.b=a.fromJSON(e.b).toRed(this.red),this.bi=this.b.redInvert(),this.a2=this.a.redAdd(this.two),this.a24=this.a2.redMul(this.i4),this.a3=this.a.redMul(this.i3),this.a0=this.a.redMul(this.bi),this.b0=this.bi.redSqr(),this._finalize(e)}static _isomorphism(e,t,r){P(e instanceof a),P(t instanceof a),P(r instanceof a);const i=e.clone(),s=r.clone();if(1!==t.redDiv(r).redJacobi())throw new Error("Invalid `b` coefficient.");return[i,s]}_short(e,t){const{a:r,b:i,three:s}=this,n=r.redSqr(),o=n.redMul(r),a=i.redSqr(),h=a.redMul(i),c=s.redSub(n),u=a.redMuln(3),f=o.redMuln(2).redISub(r.redMuln(9)),d=h.redMuln(27),p=c.redDiv(u),b=f.redDiv(d);return null!=e?l._isomorphism(p,b,e,t):[p,b]}_mont(e){return b._isomorphism(this.a,this.b,e)}_edwards(e,t=!1){P("boolean"==typeof t);const{two:r,bi:i}=this,s=this.a.redAdd(r).redMul(i),n=this.a.redSub(r).redMul(i);return t&&s.swap(n),null!=e?_._isomorphism(s,n,e):[s,n]}_scaleShort(e){P(e instanceof l);const[t,r]=e._scale(this);return[this.field(t.redInvert()),this.field(r.redInvert())]}_scaleMont(e){return P(e instanceof b),this.g.isInfinity()||e.g.isInfinity()?this.field(e.b).redDivSqrt(this.b):this.g.y.redDiv(this.field(e.g.y))}_scaleEdwards(e,t){P(e instanceof _);const r=e._scale(this,t);return this.field(r)}_solveY0(e){P(e instanceof a);const t=this.a0,r=this.b0,i=e.redSqr();return i.redMul(e).redIAdd(t.redMul(i)).redIAdd(r.redMul(e))}_elligator2(e){const t=this.a0.redNeg(),r=this.one.redAdd(this.z.redMul(e.redSqr()));r.cinject(this.one,r.czero());const i=t.redMul(r.redFermat()),s=i.redNeg().redISub(this.a0),n=this._solveY0(i),o=this._solveY0(s),a=0|n.redIsSquare(),h=i.cinject(s,1^a),c=n.cinject(o,1^a).redSqrt();c.cinject(c.redNeg(),c.redIsOdd()^e.redIsOdd());const u=this.b.redMul(h),f=this.b.redMul(c);return this.point(u,f)}_invert2(e,t){const{x:r,y:i}=e,s=1&t,n=r.redMul(this.bi),o=i.redMul(this.bi),a=n.redAdd(this.a0),h=n;a.cswap(h,s);const c=a.redINeg(),u=h.redMul(this.z),[f,l]=N(c,u);if(l.cinject(l.redNeg(),l.redIsOdd()^o.redIsOdd()),!f)throw new Error("Invalid point.");return l}_constMul(e,t,r){P(e instanceof g);const i=e.toX(),[s,n]=i.ladderConst(t,r),o=e.recover(n,s);return t.isNeg()?o.neg():o}isElliptic(){const e=this.a.redSqr();return!this.b.redMul(e.redSub(this.four)).isZero()}jinv(){const{a:e,three:t,four:r}=this,i=e.redSqr(),s=i.redSub(t).redPown(3).redIMuln(256),n=i.redSub(r);if(n.isZero())throw new Error("Curve is not elliptic.");return s.redDiv(n).fromRed()}point(e,t,r=0){return new g(this,e,t,r)}jpoint(e,t,r){return P(null==e&&null==t&&null==r),this.point()}xpoint(e,t){return new m(this,e,t)}solveY2(e){P(e instanceof a);const t=e.redSqr();return t.redMul(e).redIAdd(this.a.redMul(t)).redIAdd(e).redMul(this.bi)}validate(e){if(P(e instanceof g),e.isInfinity())return!0;const{x:t,y:r}=e,i=this.solveY2(t);return r.redSqr().eq(i)}pointFromX(e,t=null){P(e instanceof a),P(null==t||"boolean"==typeof t),e.red||(e=e.toRed(this.red));const r=this.solveY(e);return null!=t&&r.redIsOdd()!==t&&r.redINeg(),this.point(e,r)}isIsomorphic(e,t){if(P(e instanceof u),!e.p.eq(this.p))return!1;if("mont"===e.type){const t=this.field(e.a),r=this.field(e.b);return!!this.a.eq(t)&&(!this.b.isZero()&&1===r.redDiv(this.b).redJacobi())}return e.isIsomorphic(this,t)}isIsogenous(e){return P(e instanceof u),"mont"!==e.type&&e.isIsogenous(this)}pointFromShort(e){if(P(e instanceof d),this.isIsomorphic(e.curve)){if(e.isInfinity())return this.point();const{a3:t,b:r}=this,[i,s]=this._scale(e.curve),n=this.field(e.x).redMul(i),o=this.field(e.y).redMul(s),a=r.redMul(n).redISub(t),h=r.redMul(o);return this.point(a,h)}throw new Error("Not implemented.")}pointFromMont(e){if(P(e instanceof g),this.isIsomorphic(e.curve)){if(e.isInfinity())return this.point();const t=this._scale(e.curve),r=this.field(e.x),i=this.field(e.y),s=r,n=t.redMul(i);return this.point(s,n)}throw new Error("Not implemented.")}pointFromEdwards(e){P(e instanceof w),P(e.curve.p.eq(this.p));const t=this.field(e.x),r=this.field(e.y),i=this.field(e.z);if(this.isIsogenous(e.curve)){if(e.isInfinity())return this.point();if(e.x.isZero())return this.point(this.zero,this.zero);const s=i.redSqr().redIMuln(2),n=r.redSqr(),o=t.redSqr(),a=s.redISub(o).redISub(n).redMul(r),h=o.redMul(t);return this.cpoint(n,o,a,h)}if(this.isIsomorphic(e.curve,!0)){if(e.isInfinity())return this.point();if(e.x.isZero())return this.point(this.zero,this.zero);const s=this._scale(e.curve,!0),n=r.redAdd(i),o=r.redSub(i),a=s.redMul(i).redMul(n),h=t.redMul(o);return this.cpoint(n,o,a,h)}if(this.isIsomorphic(e.curve,!1)){if(e.isInfinity())return this.point();if(e.x.isZero())return this.point(this.zero,this.zero);const s=this._scale(e.curve,!1),n=i.redAdd(r),o=i.redSub(r),a=s.redMul(i).redMul(n),h=t.redMul(o);return this.cpoint(n,o,a,h)}throw new Error("Not implemented.")}pointFromUniform(e){if(P(e instanceof a),this.z.isZero()||this.a.isZero())throw new Error("Not implemented.");return this._elligator2(e)}pointToUniform(e,t){if(P(e instanceof g),P(t>>>0===t),this.z.isZero()||this.a.isZero())throw new Error("Not implemented.");if(e.isInfinity())throw new Error("Invalid point.");return this._invert2(e,t)}decodePoint(e,t){return g.decode(this,e,t)}encodeX(e){return P(e instanceof m),e.encode()}decodeX(e){return m.decode(this,e)}toShort(e,t,r=null){const[i,s]=this._short(e,t),n=new l({red:this.red,prime:this.prime,p:this.p,a:i,b:s,n:this.n,h:this.h});if(null!=r){const[,e]=n._scale(this);e.redIsOdd()!==r&&e.redINeg()}return this.g.isInfinity()||(n.g=n.pointFromMont(this.g)),n}toMont(e,t=null){const[r,i]=this._mont(e),s=new b({red:this.red,prime:this.prime,p:this.p,a:r,b:i,n:this.n,h:this.h,z:this.z});if(null!=t){const e=s._scale(this);e.redIsOdd()!==t&&e.redINeg()}return this.g.isInfinity()||(s.g=s.pointFromMont(this.g)),s}toEdwards(e,t,r=null){const[i,s]=this._edwards(e,t),n=new _({red:this.red,prime:this.prime,p:this.p,a:i,d:s,n:this.n,h:this.h,z:this.z});if(null!=r){const e=n._scale(this,t);e.redIsOdd()!==r&&e.redINeg()}return this.g.isInfinity()||(n.g=n.pointFromMont(this.g),n.g.normalize()),n}pointFromJSON(e){return g.fromJSON(this,e)}toJSON(e){const t=super.toJSON(e);return t.a=this.a.fromRed().toJSON(),t.b=this.b.fromRed().toJSON(),t}}class g extends f{constructor(e,t,r,i){P(e instanceof b),super(e,h.AFFINE),this.x=this.curve.zero,this.y=this.curve.zero,this.inf=1,null!=t&&this._init(t,r,i)}_init(e,t,r){P(e instanceof a),P(t instanceof a),this.x=e,this.y=t,this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=0|r}clone(){return this.curve.point(this.x.clone(),this.y.clone(),this.inf)}swap(e,t){P(e instanceof g);const r=1&(t>>31|-t>>31),i=this.inf,s=e.inf;return this.x.cswap(e.x,t),this.y.cswap(e.y,t),this.inf=i&(1^r)|s&r,e.inf=s&(1^r)|i&r,this}scale(e){return this.clone()}randomize(e){return this.clone()}neg(){return this.inf?this:this.curve.point(this.x,this.y.redNeg())}add(e){if(P(e instanceof g),this.inf)return e;if(e.inf)return this;if(this.x.eq(e.x))return this.y.eq(e.y)?this.dbl():this.curve.point();const t=e.x.redSub(this.x),r=e.y.redSub(this.y).redDiv(t),i=this.curve.b.redMul(r.redSqr()).redISub(this.curve.a).redISub(this.x).redISub(e.x),s=r.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)}dbl(){if(this.inf)return this;if(this.y.isZero())return this.curve.point();const e=this.x.redSqr().redIMuln(3),t=this.curve.a.redMul(this.x).redIMuln(2),r=e.redIAdd(t).redIAdd(this.curve.one),i=this.curve.b.redMul(this.y).redIMuln(2),s=r.redDiv(i),n=this.curve.b.redMul(s.redSqr()).redISub(this.curve.a).redISub(this.x).redISub(this.x),o=s.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,o)}uadd(e){P(e instanceof g);const t=e.x.redSub(this.x),r=e.y.redSub(this.y),i=this.x.redSqr().redIMuln(3),s=this.curve.a.redMul(this.x).redIMuln(2),n=i.redIAdd(s).redIAdd(this.curve.one),o=this.curve.b.redMul(this.y).redIMuln(2),a=t.czero()&r.czero();r.cinject(n,a),t.cinject(o,a);const h=t.czero()&(1^(this.inf|e.inf));t.cinject(this.curve.one,t.czero());const c=r.redMul(t.redFermat()),u=this.curve.b.redMul(c.redSqr()).redISub(this.curve.a).redISub(this.x).redISub(e.x),f=c.redMul(this.x.redSub(u)).redISub(this.y),l=h|this.inf&e.inf;return u.cinject(e.x,this.inf),f.cinject(e.y,this.inf),u.cinject(this.x,e.inf),f.cinject(this.y,e.inf),u.cinject(this.curve.zero,l),f.cinject(this.curve.zero,l),this.curve.point(u,f,l)}udbl(){return this.uadd(this)}recover(e,t){if(P(e instanceof m),P(t instanceof m),this.inf)return this.curve.point();const r=this.x.redMul(e.z),i=e.x.redAdd(r),s=e.x.redSub(r).redSqr().redMul(t.x),n=this.curve.a.redMul(e.z).redIMuln(2),o=i.redIAdd(n),a=this.x.redMul(e.x).redIAdd(e.z),h=o.redMul(a),c=n.redMul(e.z),u=h.redISub(c).redMul(t.z),f=this.curve.b.redMul(this.y).redIMuln(2).redMul(e.z).redMul(t.z),l=f.redMul(e.x),d=u.redISub(s),p=f.redMul(e.z);if(p.isZero())return this.curve.point();const b=p.redInvert(),g=l.redMul(b),_=d.redMul(b);return this.curve.point(g,_)}getX(){if(this.inf)throw new Error("Invalid point.");return this.x.fromRed()}getY(){if(this.inf)throw new Error("Invalid point.");return this.y.fromRed()}eq(e){return P(e instanceof g),this===e||(this.inf?0!==e.inf:!e.inf&&(this.x.eq(e.x)&&this.y.eq(e.y)))}isInfinity(){return 0!==this.inf}isOdd(){return!this.inf&&this.y.redIsOdd()}isEven(){return!this.inf&&this.y.redIsEven()}toP(){return this}toJ(){return this}toX(){return this.inf?this.curve.xpoint():this.curve.xpoint(this.x,this.curve.one)}encode(){return this.toX().encode()}static decode(e,t,r){return P(e instanceof b),e.decodeX(t).toP(r)}toJSON(e){if(this.inf)return[];return[this.getX().toJSON(),this.getY().toJSON()]}static fromJSON(e,t){if(P(e instanceof b),P(Array.isArray(t)),P(0===t.length||2===t.length||3===t.length),0===t.length)return e.point();const r=a.fromJSON(t[0]),i=a.fromJSON(t[1]);return e.point(r,i)}[o](){return this.inf?"<MontPoint: Infinity>":"<MontPoint: x="+this.x.fromRed().toString(16,2)+" y="+this.y.fromRed().toString(16,2)+">"}}class m extends f{constructor(e,t,r){P(e instanceof b),super(e,h.PROJECTIVE),this.x=this.curve.one,this.z=this.curve.zero,null!=t&&this._init(t,r)}_init(e,t){P(e instanceof a),P(null==t||t instanceof a),this.x=e,this.z=t||this.curve.one,this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red))}clone(){return this.curve.xpoint(this.x.clone(),this.z.clone())}swap(e,t){return P(e instanceof m),this.x.cswap(e.x,t),this.z.cswap(e.z,t),this}precompute(e,t){return this}validate(){if(this.isInfinity())return!0;const{x:e,z:t}=this,r=e.redSqr(),i=r.redMul(e),s=t.redSqr(),n=this.curve.a.redMul(r).redMul(t);return-1!==i.redIAdd(n).redIAdd(e.redMul(s)).redMul(this.curve.bi).redMul(t).redJacobi()}normalize(){return this.isInfinity()?this:this.z.eq(this.curve.one)?this:(this.x=this.x.redDiv(this.z),this.z=this.curve.one,this)}scale(e){if(P(e instanceof a),this.isInfinity())return this.curve.xpoint();const t=this.x.redMul(e),r=this.z.redMul(e);return this.curve.xpoint(t,r)}neg(){return this}dbl(){const e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),i=e.redMul(t),s=r.redMul(t.redIAdd(this.curve.a24.redMul(r)));return this.curve.xpoint(i,s)}diffAdd(e,t){P(e instanceof m),P(t instanceof m);const r=e.x.redAdd(e.z),i=e.x.redSub(e.z),s=t.x.redAdd(t.z),n=t.x.redSub(t.z).redMul(r),o=s.redMul(i),a=this.z.redMul(n.redAdd(o).redSqr()),h=this.x.redMul(n.redISub(o).redSqr());return this.curve.xpoint(a,h)}diffAddDbl(e,t){P(e instanceof m),P(t instanceof m);const r=t.x.redAdd(t.z),i=r.redSqr(),s=t.x.redSub(t.z),n=s.redSqr(),o=i.redSub(n),a=e.x.redAdd(e.z),h=e.x.redSub(e.z).redMul(r),c=a.redMul(s),u=this.z.redMul(h.redAdd(c).redSqr()),f=this.x.redMul(h.redISub(c).redSqr()),l=i.redMul(n),d=o.redMul(n.redIAdd(this.curve.a24.redMul(o)));return[this.curve.xpoint(u,f),this.curve.xpoint(l,d)]}getX(){if(this.isInfinity())throw new Error("Invalid point.");return this.normalize(),this.x.fromRed()}getY(e){return this.toP(e).getY()}eq(e){if(P(e instanceof m),this===e)return!0;if(this.isInfinity())return e.isInfinity();if(e.isInfinity())return!1;if(this.z.eq(e.z))return this.x.eq(e.x);const t=this.x.redMul(e.z),r=e.x.redMul(this.z);return t.eq(r)}isInfinity(){return this.z.isZero()}isOdd(){return!1}isEven(){return!1}hasTorsion(){return!this.isInfinity()&&(!!this.x.isZero()||super.hasTorsion())}jmul(e){return this.ladder(e)[1]}jmulSimple(e){return this.ladderSimple(e)[1]}jmulBlind(e,t){return this.ladderBlind(e,t)[1]}jmulConst(e,t){return this.ladderConst(e,t)[1]}jmulAdd(e,t,r){throw new Error("Not implemented.")}jmulAddSimple(e,t,r){throw new Error("Not implemented.")}ladder(e){P(e instanceof a),P(!e.red);const t=e.bitLength();let r=this,i=this.curve.xpoint();for(let s=t-1;s>=0;s--){0===e.utestn(s)?[r,i]=this.diffAddDbl(r,i):[i,r]=this.diffAddDbl(i,r)}return[r,i]}ladderSimple(e){P(e instanceof a),P(!e.red);const t=e.bitLength();let r=this,i=this.curve.xpoint();for(let s=t-1;s>=0;s--){0===e.utestn(s)?(r=this.diffAdd(r,i),i=i.dbl()):(i=this.diffAdd(i,r),r=r.dbl())}return[r,i]}ladderBlind(e,t){return t?this.randomize(t).ladder(e):this.ladder(e)}ladderConst(e,t){P(e instanceof a),P(!e.red);const r=Math.max(e.bitLength(),this.curve.fieldBits),i=r+7>>>3,s=e.toArray("le",i),n=t?this.randomize(t):this;let o=n.clone(),h=this.curve.xpoint().clone(),c=0;for(let e=r-1;e>=0;e--){const t=s[e>>3]>>(7&e)&1;o.swap(h,c^t),[o,h]=n.diffAddDbl(o,h),c=t}return o.swap(h,c),[o,h]}toP(e=null){return P(null==e||"boolean"==typeof e),this.isInfinity()?this.curve.point():(this.normalize(),this.curve.pointFromX(this.x,e))}toJ(){return this}toX(){return this}encode(){return this.curve.encodeField(this.getX())}static decode(e,t){P(e instanceof b);const r=e.decodeField(t);r.iumaskn(e.fieldBits);const i=e.xpoint(r,e.one);return P(!i.isInfinity()),i}toJSON(e){return this.toP().toJSON(e)}static fromJSON(e,t){return g.fromJSON(e,t).toX()}[o](){return this.isInfinity()?"<XPoint: Infinity>":"<XPoint: x="+this.x.fromRed().toString(16,2)+" z="+this.z.fromRed().toString(16,2)+">"}}class _ extends u{constructor(e){super(w,"edwards",e),this.a=a.fromJSON(e.a).toRed(this.red),this.d=a.fromJSON(e.d).toRed(this.red),this.s=a.fromJSON(e.s||"0").toRed(this.red),this.si=this.s.isZero()?this.zero:this.s.redInvert(),this.k=this.d.redMuln(2),this.smi=-this.d.redNeg().word(0),this.ad6=this.a.redAdd(this.d).redMul(this.i6),this.twisted=!this.a.eq(this.one),this.oneA=this.a.eq(this.one),this.mOneA=this.a.eq(this.one.redNeg()),this.smallD=null!=this.prime&&1===this.d.redNeg().length,this.alt=null,this._finalize(e)}static _isomorphism(e,t,r){P(e instanceof a),P(t instanceof a),P(r instanceof a);const i=r.clone(),s=r.redMul(t).redDiv(e);if(1!==e.redDiv(r).redJacobi())throw new Error("Invalid `a` coefficient.");return[i,s]}_short(e,t){const{a:r,d:i}=this,s=r.redSqr(),n=s.redMul(r),o=i.redSqr(),a=o.redMul(i),h=r.redMul(i).redIMuln(14),c=s.redMul(i),u=r.redMul(o),f=c.redIAdd(u).redIMuln(33),d=s.redAdd(h).redIAdd(o).redDivn(-48),p=f.redISub(n).redISub(a).redDivn(864);return null!=e?l._isomorphism(d,p,e,t):[d,p]}_mont(e,t=!1){let r,i;P("boolean"==typeof t),t?(r=this.d.redAdd(this.a),i=this.d.redSub(this.a)):(r=this.a.redAdd(this.d),i=this.a.redSub(this.d));const s=i.redInvert(),n=r.redMuln(2).redMul(s),o=s.redMuln(4);return null!=e?b._isomorphism(n,o,e):[n,o]}_edwards(e){return _._isomorphism(this.a,this.d,e)}_scaleShort(e){P(e instanceof l);const[t,r]=e._scale(this);return[this.field(t.redInvert()),this.field(r.redInvert())]}_scaleMont(e,t=!1){if(P(e instanceof b),P("boolean"==typeof t),this.g.isInfinity()||e.g.isInfinity()){const[r]=e._edwards(null,t);return this.field(r).redDivSqrt(this.a)}const r=e.g.x.redDiv(e.g.y);return this.g.x.redDiv(this.field(r))}_scaleEdwards(e){return P(e instanceof _),this.g.isInfinity()||e.g.isInfinity()?this.field(e.a).redDivSqrt(this.a):this.g.x.redDiv(this.field(e.g.x))}_mulA(e){return P(e instanceof a),this.oneA?e.clone():this.mOneA?e.redNeg():this.a.redMul(e)}_mulD(e){return P(e instanceof a),this.smallD?e.redMuln(this.smi):this.d.redMul(e)}_elligator1(e){const{s:t,si:r,i2:i,one:s,two:n}=this,o=r.redSqr().redIMuln(2),a=t.redSqr().redMul(i),h=a.redSqr(),c=o.redAdd(a),u=c.redSqr().redISub(n),f=o.redSub(s),l=this.p.subn(2),d=this.p.subn(1).iushrn(1),p=this.p.addn(1).iushrn(2),b=s.redSub(e),g=s.redAdd(e),m=b.redMul(g.redPow(l)),_=m.redSqr(),w=_.redMul(m),y=w.redMul(_).redAdd(u.redMul(w)).redIAdd(m),v=y.redPow(d),E=_.redAdd(h).redPow(d),S=v.redMul(E),I=v.redMul(m),k=v.redMul(y).redPow(p).redMul(S),A=s.redAdd(I),O=c.redMul(I),x=A.redSqr(),R=f.redMul(t).redMul(I).redMul(A),M=k.cinject(this.one,m.czero()),P=O.redSub(x),B=O.redAdd(x);return this.cpoint(R,M,P,B)}_invert1(e,t){const{s:r,si:i,i2:s,one:n}=this,{x:o,y:a,z:h}=e,c=1&t,u=i.redSqr().redIMuln(2),f=r.redSqr().redMul(s),l=f.redSqr(),d=u.redAdd(f),p=u.redSub(n),b=this.p.subn(2),g=this.p.subn(1).iushrn(1),m=this.p.addn(1).iushrn(2),_=a.redSub(h),w=a.redAdd(h).redIMuln(2),y=_.redMul(w.redPow(b)),v=n.redAdd(y.redMul(d)),E=v.redSqr().redISub(n),S=E.redPow(m),I=S.redSqr().ceq(E),k=S.redSub(v),A=n.redAdd(k),O=p.redMul(r).redMul(k).redMul(A).redMul(o.redMul(h)),x=k.redSqr().redIAdd(l),R=O.redMul(x).redPow(g).redMul(k),M=n.redSub(R),P=n.redAdd(R),B=M.redMul(P.redPow(b));if(B.cinject(B.redNeg(),B.redIsOdd()^c),!I)throw new Error("Invalid point.");return B}_alt(){return this.alt||(this.alt=this.toMont()),this.alt}isElliptic(){const e=this.a.redMul(this.d),t=this.a.redSub(this.d);return!e.redMul(t).isZero()}jinv(){const{a:e,d:t}=this,r=e.redMul(t),i=e.redSub(t).redPown(4),s=e.redSqr(),n=t.redSqr(),o=s.redAdd(r.redMuln(14)).redIAdd(n).redPown(3).redIMuln(16),a=r.redMul(i);if(a.isZero())throw new Error("Curve is not elliptic.");return o.redDiv(a).fromRed()}point(e,t,r,i){return new w(this,e,t,r,i)}jpoint(e,t,r){return P(null==e&&null==t&&null==r),this.point()}cpoint(e,t,r,i){P(e instanceof a),P(t instanceof a),P(r instanceof a),P(i instanceof a);const s=e.redMul(i),n=r.redMul(t),o=t.redMul(i),h=e.redMul(r);return this.point(s,n,o,h)}solveX2(e){P(e instanceof a);const t=e.redSqr(),r=this._mulD(t).redISub(this.a);return t.redISub(this.one).redDiv(r)}solveX(e){const t=e.redSqr(),r=this._mulD(t).redISub(this.a);return t.redISub(this.one).redDivSqrt(r)}solveY2(e){P(e instanceof a);const t=e.redSqr(),r=this._mulA(t).redISub(this.one),i=this._mulD(t).redISub(this.one);return r.redDiv(i)}solveY(e){const t=e.redSqr(),r=this._mulA(t).redISub(this.one),i=this._mulD(t).redISub(this.one);return r.redDivSqrt(i)}validate(e){if(P(e instanceof w),e.zOne){const t=e.x.redSqr(),r=e.y.redSqr(),i=this._mulD(t).redMul(r),s=this._mulA(t).redIAdd(r),n=this.one.redAdd(i),o=e.t,a=e.x.redMul(e.y);return s.eq(n)&&o.eq(a)}const t=e.x.redSqr(),r=e.y.redSqr(),i=e.z.redSqr(),s=i.redSqr(),n=this._mulD(t).redMul(r),o=this._mulA(t).redIAdd(r).redMul(i),a=s.redIAdd(n),h=e.t.redMul(e.z),c=e.x.redMul(e.y);return o.eq(a)&&h.eq(c)}pointFromX(e,t=null){P(e instanceof a),P(null==t||"boolean"==typeof t),e.red||(e=e.toRed(this.red));const r=this.solveY(e);if(null!=t){if(r.isZero()&&t)throw new Error("Invalid point.");r.redIsOdd()!==t&&r.redINeg()}return this.point(e,r)}pointFromY(e,t=null){P(e instanceof a),P(null==t||"boolean"==typeof t),e.red||(e=e.toRed(this.red));const r=this.solveX(e);if(null!=t){if(r.isZero()&&t)throw new Error("Invalid point.");r.redIsOdd()!==t&&r.redINeg()}return this.point(r,e)}isIsomorphic(e,t=!1){if(P(e instanceof u),P("boolean"==typeof t),!e.p.eq(this.p))return!1;if("short"===e.type)return e.isIsomorphic(this);if("mont"===e.type){const r=this.field(e.a);let i,s;return t?(i=this.d.redAdd(this.a),s=this.d.redSub(this.a)):(i=this.a.redAdd(this.d),s=this.a.redSub(this.d)),r.redMul(s).eq(i.redIMuln(2))}if("edwards"===e.type){const t=this.field(e.a),r=this.field(e.d);return this.a.redMul(r).eq(t.redMul(this.d))}return!1}isIsogenous(e){if(P(e instanceof u),!e.p.eq(this.p))return!1;if("mont"===e.type){if(!this.a.eq(this.one))return!1;const t=this.field(e.a),r=this.field(e.b),i=this.two.redSub(this.d.redMuln(4));return t.eq(i)&&r.eq(this.one)}if("edwards"===e.type){const t=this.field(e.a),r=this.field(e.d);return t.eq(this.a.redNeg())&&r.eq(this.d.redSub(this.a))}return!1}pointFromShort(e){if(P(e instanceof d),this.isIsomorphic(e.curve)){if(e.isInfinity())return this.point();if(e.y.isZero())return this.point(this.zero,this.one.redNeg());const{a:t,d:r}=this,[i,s]=this._scale(e.curve),n=t.redMuln(5),o=r.redMuln(5),a=this.field(e.x).redMul(i),h=this.field(e.y).redMul(s),c=a.redMuln(6),u=a.redMuln(12),f=c.redSub(t).redISub(r),l=h.redMuln(6),d=u.redSub(n).redIAdd(r),p=u.redAdd(t).redISub(o);return this.cpoint(f,l,d,p)}throw new Error("Not implemented.")}pointFromMont(e){P(e instanceof g),P(e.curve.p.eq(this.p));const t=this.field(e.x),r=this.field(e.y);if(this.isIsogenous(e.curve)){if(e.isInfinity())return this.point();if(e.x.isZero())return this.point();const i=t.redSqr(),s=i.redMul(t),n=s.redMul(t),o=n.redMul(t),a=r.redSqr(),h=r.redMuln(4),c=i.redSub(this.one),u=i.redMuln(2),f=a.redMuln(4),l=s.redIMuln(2),d=t.redMul(a).redIMuln(4),p=i.redMul(a).redIMuln(2),b=a.redIMuln(2),g=h.redMul(c),m=n.redISub(u).redIAdd(f).redIAdd(this.one),_=o.redSub(l).redISub(d).redIAdd(t).redINeg(),w=o.redISub(p).redISub(l).redISub(b).redIAdd(t);return this.cpoint(g,m,_,w).divn(4)}if(this.isIsomorphic(e.curve,!0)){if(e.isInfinity())return this.point();if(e.x.isZero())return this.point(this.zero,this.one.redNeg());const i=this._scale(e.curve,!0).redMul(t),s=r,n=t.redAdd(this.one),o=t.redSub(this.one);return this.cpoint(i,s,n,o)}if(this.isIsomorphic(e.curve,!1)){if(e.isInfinity())return this.point();if(e.x.isZero())return this.point(this.zero,this.one.redNeg());const i=this._scale(e.curve,!1).redMul(t),s=r,n=t.redSub(this.one),o=t.redAdd(this.one);return this.cpoint(i,s,n,o)}throw new Error("Not implemented.")}pointFromEdwards(e){P(e instanceof w),P(e.curve.p.eq(this.p));const t=this.field(e.curve.a),r=this.field(e.x),i=this.field(e.y),s=this.field(e.z),n=this.field(e.t);if(this.isIsogenous(e.curve)){const e=r.redMul(i),n=r.redSqr(),o=i.redSqr(),a=s.redSqr(),h=t.redMul(n),c=e.redIMuln(2),u=o.redSub(h),f=o.redAdd(h),l=a.redIMuln(2).redISub(f),d=this.cpoint(c,u,f,l);return this.twisted?d:d.divn(4)}if(this.isIsomorphic(e.curve)){const t=this._scale(e.curve),o=t.redMul(r),a=i,h=s,c=t.redMul(n);return this.point(o,a,h,c)}throw new Error("Not implemented.")}pointFromUniform(e,t=null){P(e instanceof a),P(e.red===this.red),P(null==t||t instanceof b),t||(t=this._alt());const r=t.field(e),i=t.pointFromUniform(r);return this.pointFromMont(i)}pointToUniform(e,t,r=null){P(e instanceof w),P(t>>>0===t),P(null==r||r instanceof b),r||(r=this._alt());const i=r.pointFromEdwards(e),s=r.pointToUniform(i,t);return this.field(s)}pointFromHash(e,t,r=null){P(null==r||r instanceof b),r||(r=this._alt());const i=r.pointFromHash(e,t);return this.pointFromMont(i)}pointToHash(e,t,r=null){P(null==r||r instanceof b),r||(r=this._alt());const i=r.pointFromEdwards(e);return r.pointToHash(i,t)}decodePoint(e){return w.decode(this,e)}toShort(e,t,r=null){const[i,s]=this._short(e,t),n=new l({red:this.red,prime:this.prime,p:this.p,a:i,b:s,n:this.n,h:this.h});if(null!=r){const[,e]=n._scale(this);e.redIsOdd()!==r&&e.redINeg()}return this.g.isInfinity()||(n.g=n.pointFromEdwards(this.g)),n}toMont(e,t,r=null){const[i,s]=this._mont(e,t),n=new b({red:this.red,prime:this.prime,p:this.p,a:i,b:s,n:this.n,h:this.h,z:this.z});if(null!=r){const e=this._scale(n,t);e.redIsOdd()!==r&&e.redINeg()}return this.g.isInfinity()||(n.g=n.pointFromEdwards(this.g)),n}toEdwards(e,t=null){const[r,i]=this._edwards(e),s=new _({red:this.red,prime:this.prime,p:this.p,a:r,d:i,n:this.n,h:this.h,z:this.z});if(null!=t){const e=s._scale(this);e.redIsOdd()!==t&&e.redINeg()}return this.g.isInfinity()||(s.g=s.pointFromEdwards(this.g),s.g.normalize()),s}pointFromJSON(e){return w.fromJSON(this,e)}toJSON(e){const t=super.toJSON(e);return t.a=this.a.fromRed().toJSON(),t.d=this.d.fromRed().toJSON(),this.s.isZero()||(t.s=this.s.fromRed().toJSON()),t}}class w extends f{constructor(e,t,r,i,s){P(e instanceof _),super(e,h.EXTENDED),this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=1,null!=t&&this._init(t,r,i,s)}_init(e,t,r,i){P(e instanceof a),P(t instanceof a),P(null==r||r instanceof a),P(null==i||i instanceof a),this.x=e,this.y=t,this.z=r||this.curve.one,this.t=i||null,this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=0|this.z.eq(this.curve.one),this._check(),this.t||(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redDiv(this.z)))}_check(){if(this.z.isZero())throw new Error("Invalid point.")}clone(){return this.curve.point(this.x.clone(),this.y.clone(),this.z.clone(),this.t.clone())}swap(e,t){P(e instanceof w);const r=1&(t>>31|-t>>31),i=this.zOne,s=e.zOne;return this.x.cswap(e.x,t),this.y.cswap(e.y,t),this.z.cswap(e.z,t),this.t.cswap(e.t,t),this.zOne=i&(1^r)|s&r,e.zOne=s&(1^r)|i&r,this}normalize(){if(this.zOne)return this;const e=this.z.redInvert();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t=this.t.redMul(e),this.z=this.curve.one,this.zOne=1,this}scale(e){P(e instanceof a);const t=this.x.redMul(e),r=this.y.redMul(e),i=this.z.redMul(e),s=this.t.redMul(e);return this.curve.point(t,r,i,s)}neg(){const e=this.x.redNeg(),t=this.y,r=this.z,i=this.t.redNeg();return this.curve.point(e,t,r,i)}add(e){return P(e instanceof w),this.isInfinity()?e:e.isInfinity()?this:this.zOne?e._add(this,0):this._add(e,0)}_add(e,t){return this.curve.mOneA?this._addM1(e,t):this._addA(e,t)}_addM1(e,t){const r=e.zOne&(1^t),i=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),s=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.k).redMul(e.t),o=r?this.z.redAdd(this.z):this.z.redMul(e.z).redIMuln(2),a=s.redSub(i),h=o.redSub(n),c=o.redIAdd(n),u=s.redIAdd(i),f=a.redMul(h),l=c.redMul(u),d=a.redMul(u),p=h.redMul(c);return this.curve.point(f,l,p,d)}_addA(e,t){const r=e.zOne&(1^t),i=this.x.redMul(e.x),s=this.y.redMul(e.y),n=this.curve._mulD(this.t).redMul(e.t),o=r?this.z.clone():this.z.redMul(e.z),a=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(s),h=o.redSub(n),c=o.redIAdd(n),u=s.redISub(this.curve._mulA(i)),f=a.redMul(h),l=c.redMul(u),d=a.redMul(u),p=h.redMul(c);return this.curve.point(f,l,p,d)}dbl(){return this.isInfinity()?this:this._dbl(0)}_dbl(e){const t=this.zOne&(1^e),r=this.x.redSqr(),i=this.y.redSqr(),s=t?this.curve.two:this.z.redSqr().redIMuln(2),n=this.curve._mulA(r),o=this.x.redAdd(this.y).redSqr().redISub(r).redISub(i),a=n.redAdd(i),h=a.redSub(s),c=n.redISub(i),u=o.redMul(h),f=a.redMul(c),l=o.redMul(c),d=h.redMul(a);return this.curve.point(u,f,d,l)}uadd(e){return P(e instanceof w),this._add(e,1)}udbl(){return this._dbl(1)}getX(){return this.normalize(),this.x.fromRed()}getY(){return this.normalize(),this.y.fromRed()}eq(e){if(P(e instanceof w),P(!this.z.isZero()),P(!e.z.isZero()),this===e)return!0;if(this.z.eq(e.z))return this.x.eq(e.x)&&this.y.eq(e.y);const t=this.x.redMul(e.z),r=e.x.redMul(this.z);if(!t.eq(r))return!1;const i=this.y.redMul(e.z),s=e.y.redMul(this.z);return i.eq(s)}isInfinity(){return P(!this.z.isZero()),!!this.x.isZero()&&this.y.eq(this.z)}isOdd(){return this.normalize(),this.x.redIsOdd()}isEven(){return this.normalize(),this.x.redIsEven()}toP(){return this.normalize()}toJ(){return this}encode(){const e=this.getY();return e.setn(this.curve.signBit,this.x.redIsOdd()),this.curve.encodeField(e)}static decode(e,t){P(e instanceof _);const r=e.decodeField(t),i=0!==r.testn(e.signBit);if(r.setn(e.signBit,0),r.cmp(e.p)>=0)throw new Error("Invalid point.");return e.pointFromY(r,i)}toJSON(e){if(this.isInfinity())return[];const t=this.getX().toJSON(),r=this.getY().toJSON();return!0===e&&this.pre?[t,r,this.pre.toJSON()]:[t,r]}static fromJSON(e,t){if(P(e instanceof _),P(Array.isArray(t)),P(0===t.length||2===t.length||3===t.length),0===t.length)return e.point();const r=a.fromJSON(t[0]),i=a.fromJSON(t[1]),s=e.point(r,i);return t.length>2&&null!=t[2]&&(s.pre=v.fromJSON(s,t[2])),s}[o](){return this.isInfinity()?"<EdwardsPoint: Infinity>":"<EdwardsPoint: x="+this.x.fromRed().toString(16,2)+" y="+this.y.fromRed().toString(16,2)+" z="+this.z.fromRed().toString(16,2)+">"}}class y{constructor(e){P(e instanceof u);const t=e.fieldBits,r=7&t||8;this.curve=e,this.h=255&-e.h.word(0),this.n=(1<<r)-1,this.b=1<<r-1,this.and=a.mask(t).iuxorn(255^this.h),this.or=a.shift(1,t-1)}reduce(e){return P(e instanceof a),P(!e.red),e.iuand(this.and),e.iuor(this.or),e}clamp(e){P(null!=e&&!0===e._isBuffer),P(e.length===this.curve.scalarSize);let t=0,r=this.curve.scalarSize-1;return"be"===this.curve.endian&&([t,r]=[r,t]),e[t]&=this.h,e[r]&=this.n,e[r]|=this.b,e}splitHash(e){P(null!=e&&!0===e._isBuffer),P(e.length===2*this.curve.fieldSize);let t=0;"be"===this.curve.endian&&(t=this.curve.fieldSize-this.curve.scalarSize);const r=e.slice(t,t+this.curve.scalarSize),i=e.slice(this.curve.fieldSize);return this.clamp(r),[r,i]}}class v{constructor(){this.naf=null,this.doubles=null,this.blinding=null,this.beta=null}map(e){P("function"==typeof e);const t=new this.constructor;return this.naf&&(t.naf=this.naf.map(e)),this.doubles&&(t.doubles=this.doubles.map(e)),t}toJSON(){return{naf:this.naf?this.naf.toJSON():null,doubles:this.doubles?this.doubles.toJSON():null,blinding:this.blinding?this.blinding.toJSON():undefined}}fromJSON(e,t){return P(e instanceof f),P(t&&"object"==typeof t),null!=t.naf&&(this.naf=E.fromJSON(e,t.naf)),null!=t.doubles&&(this.doubles=S.fromJSON(e,t.doubles)),null!=t.blinding&&(this.blinding=I.fromJSON(e,t.blinding)),this}static fromJSON(e,t){return(new this).fromJSON(e,t)}}class E{constructor(e,t){this.width=e,this.points=t}map(e){P("function"==typeof e);const{width:t}=this,r=[];for(const t of this.points)r.push(e(t));return new this.constructor(t,r)}toJSON(){return{width:this.width,points:this.points.slice(1).map(e=>e.toJSON())}}static fromJSON(e,t){P(e instanceof f),P(t&&"object"==typeof t),P(t.width>>>0===t.width),P(Array.isArray(t.points));const{curve:r}=e,{width:i}=t,s=[e];for(const e of t.points)s.push(r.pointFromJSON(e));return new this(i,s)}}class S{constructor(e,t){this.step=e,this.points=t}map(e){P("function"==typeof e);const{step:t}=this,r=[];for(const t of this.points)r.push(e(t));return new this.constructor(t,r)}toJSON(){return{step:this.step,points:this.points.slice(1).map(e=>e.toJSON())}}static fromJSON(e,t){P(e instanceof f),P(t&&"object"==typeof t),P(t.step>>>0===t.step),P(Array.isArray(t.points));const{curve:r}=e,{step:i}=t,s=[e];for(const e of t.points)s.push(r.pointFromJSON(e));return new this(i,s)}}class I{constructor(e,t){this.blind=e,this.unblind=t}toJSON(){return{blind:this.blind.toJSON(),unblind:this.unblind.toJSON()}}static fromJSON(e,t){P(e instanceof f),P(t&&"object"==typeof t);const{curve:r}=e;return new this(a.fromJSON(t.blind),r.pointFromJSON(t.unblind))}}class k{constructor(e,t,r,i){this.beta=e,this.lambda=t,this.basis=r,this.pre=i}toJSON(){return{beta:this.beta.fromRed().toJSON(),lambda:this.lambda.toJSON(),basis:[this.basis[0].toJSON(),this.basis[1].toJSON()],pre:[this.pre[0].toJSON(),this.pre[1].toJSON()]}}static fromJSON(e,t){return P(e instanceof u),P(t&&"object"==typeof t),P(Array.isArray(t.basis)),P(Array.isArray(t.pre)),P(2===t.basis.length),P(2===t.pre.length),new this(a.fromJSON(t.beta).toRed(e.red),a.fromJSON(t.lambda),[A.fromJSON(t.basis[0]),A.fromJSON(t.basis[1])],[a.fromJSON(t.pre[0]),a.fromJSON(t.pre[1])])}}class A{constructor(e,t){this.a=e,this.b=t}toJSON(){return{a:this.a.toJSON(),b:this.b.toJSON()}}static fromJSON(e){return P(e&&"object"==typeof e),new this(a.fromJSON(e.a),a.fromJSON(e.b))}}const O={__proto__:null,P192:class extends l{constructor(e){super({id:"P192",ossl:"prime192v1",type:"short",endian:"be",hash:"SHA256",prime:"p192",p:["ffffffff ffffffff ffffffff fffffffe","ffffffff ffffffff"],a:["ffffffff ffffffff ffffffff fffffffe","ffffffff fffffffc"],b:["64210519 e59c80e7 0fa7e9ab 72243049","feb8deec c146b9b1"],n:["ffffffff ffffffff ffffffff 99def836","146bc9b1 b4d22831"],h:"1",z:"-5",g:[["188da80e b03090f6 7cbf20eb 43a18800","f4ff0afd 82ff1012"],["07192b95 ffc8da78 631011ed 6b24cdd5","73f977a1 1e794811"],e]})}},P224:class extends l{constructor(e){super({id:"P224",ossl:"secp224r1",type:"short",endian:"be",hash:"SHA256",prime:"p224",p:["ffffffff ffffffff ffffffff ffffffff","00000000 00000000 00000001"],a:["ffffffff ffffffff ffffffff fffffffe","ffffffff ffffffff fffffffe"],b:["b4050a85 0c04b3ab f5413256 5044b0b7","d7bfd8ba 270b3943 2355ffb4"],n:["ffffffff ffffffff ffffffff ffff16a2","e0b8f03e 13dd2945 5c5c2a3d"],h:"1",z:"1f",g:[["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3","56c21122 343280d6 115c1d21"],["bd376388 b5f723fb 4c22dfe6 cd4375a0","5a074764 44d58199 85007e34"],e]})}},P256:class extends l{constructor(e){super({id:"P256",ossl:"prime256v1",type:"short",endian:"be",hash:"SHA256",prime:null,p:["ffffffff 00000001 00000000 00000000","00000000 ffffffff ffffffff ffffffff"],a:["ffffffff 00000001 00000000 00000000","00000000 ffffffff ffffffff fffffffc"],b:["5ac635d8 aa3a93e7 b3ebbd55 769886bc","651d06b0 cc53b0f6 3bce3c3e 27d2604b"],n:["ffffffff 00000000 ffffffff ffffffff","bce6faad a7179e84 f3b9cac2 fc632551"],h:"1",z:"-a",g:[["6b17d1f2 e12c4247 f8bce6e5 63a440f2","77037d81 2deb33a0 f4a13945 d898c296"],["4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16","2bce3357 6b315ece cbb64068 37bf51f5"],e]})}},P384:class extends l{constructor(e){super({id:"P384",ossl:"secp384r1",type:"short",endian:"be",hash:"SHA384",prime:null,p:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff fffffffe","ffffffff 00000000 00000000 ffffffff"],a:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff fffffffe","ffffffff 00000000 00000000 fffffffc"],b:["b3312fa7 e23ee7e4 988e056b e3f82d19","181d9c6e fe814112 0314088f 5013875a","c656398d 8a2ed19d 2a85c8ed d3ec2aef"],n:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff c7634d81 f4372ddf","581a0db2 48b0a77a ecec196a ccc52973"],h:"1",z:"-c",g:[["aa87ca22 be8b0537 8eb1c71e f320ad74","6e1d3b62 8ba79b98 59f741e0 82542a38","5502f25d bf55296c 3a545e38 72760ab7"],["3617de4a 96262c6f 5d9e98bf 9292dc29","f8f41dbd 289a147c e9da3113 b5f0b8c0","0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"],e]})}},P521:class extends l{constructor(e){super({id:"P521",ossl:"secp521r1",type:"short",endian:"be",hash:"SHA512",prime:"p521",p:["000001ff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff"],a:["000001ff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffff","fffffffc"],b:["00000051 953eb961 8e1c9a1f 929a21a0","b68540ee a2da725b 99b315f3 b8b48991","8ef109e1 56193951 ec7e937b 1652c0bd","3bb1bf07 3573df88 3d2c34f1 ef451fd4","6b503f00"],n:["000001ff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffff","fffffffa 51868783 bf2f966b 7fcc0148","f709a5d0 3bb5c9b8 899c47ae bb6fb71e","91386409"],h:"1",z:"-4",g:[["000000c6 858e06b7 0404e9cd 9e3ecb66","2395b442 9c648139 053fb521 f828af60","6b4d3dba a14b5e77 efe75928 fe1dc127","a2ffa8de 3348b3c1 856a429b f97e7e31","c2e5bd66"],["00000118 39296a78 9a3bc004 5c8a5fb4","2c7d1bd9 98f54449 579b4468 17afbd17","273e662c 97ee7299 5ef42640 c550b901","3fad0761 353c7086 a272c240 88be9476","9fd16650"],e]})}},SECP256K1:class extends l{constructor(e){super({id:"SECP256K1",ossl:"secp256k1",type:"short",endian:"be",hash:"SHA256",prime:"k256",p:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff fffffffe fffffc2f"],a:"0",b:"7",n:["ffffffff ffffffff ffffffff fffffffe","baaedce6 af48a03b bfd25e8c d0364141"],h:"1",z:"1",c:["0a2d2ba9 3507f1df 233770c2 a797962c","c61f6d15 da14ecd4 7d8d27ae 1cd5f852"],g:[["79be667e f9dcbbac 55a06295 ce870b07","029bfcdb 2dce28d9 59f2815b 16f81798"],["483ada77 26a3c465 5da4fbfc 0e1108a8","fd17b448 a6855419 9c47d08f fb10d4b8"],e],endo:{beta:["7ae96a2b 657c0710 6e64479e ac3434e9","9cf04975 12f58995 c1396c28 719501ee"],lambda:["5363ad4c c05c30e0 a5261c02 8812645a","122e22ea 20816678 df02967c 1b23bd72"],basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],pre:["3086d221a7d46bcde86c90e49284eb153dab","-e4437ed6010e88286f547fa90abfe4c42212"]}})}},BRAINPOOLP256:class extends l{constructor(e){super({id:"BRAINPOOLP256",ossl:"brainpoolP256r1",type:"short",endian:"be",hash:"SHA256",prime:null,p:["a9fb57db a1eea9bc 3e660a90 9d838d72","6e3bf623 d5262028 2013481d 1f6e5377"],a:["7d5a0975 fc2c3057 eef67530 417affe7","fb8055c1 26dc5c6c e94a4b44 f330b5d9"],b:["26dc5c6c e94a4b44 f330b5d9 bbd77cbf","95841629 5cf7e1ce 6bccdc18 ff8c07b6"],n:["a9fb57db a1eea9bc 3e660a90 9d838d71","8c397aa3 b561a6f7 901e0e82 974856a7"],h:"1",z:"-2",g:[["8bd2aeb9 cb7e57cb 2c4b482f fc81b7af","b9de27e1 e3bd23c2 3a4453bd 9ace3262"],["547ef835 c3dac4fd 97f8461a 14611dc9","c2774513 2ded8e54 5c1d54c7 2f046997"],e]})}},BRAINPOOLP384:class extends l{constructor(e){super({id:"BRAINPOOLP384",ossl:"brainpoolP384r1",type:"short",endian:"be",hash:"SHA384",prime:null,p:["8cb91e82 a3386d28 0f5d6f7e 50e641df","152f7109 ed5456b4 12b1da19 7fb71123","acd3a729 901d1a71 87470013 3107ec53"],a:["7bc382c6 3d8c150c 3c72080a ce05afa0","c2bea28e 4fb22787 139165ef ba91f90f","8aa5814a 503ad4eb 04a8c7dd 22ce2826"],b:["04a8c7dd 22ce2826 8b39b554 16f0447c","2fb77de1 07dcd2a6 2e880ea5 3eeb62d5","7cb43902 95dbc994 3ab78696 fa504c11"],n:["8cb91e82 a3386d28 0f5d6f7e 50e641df","152f7109 ed5456b3 1f166e6c ac0425a7","cf3ab6af 6b7fc310 3b883202 e9046565"],h:"1",z:"-5",g:[["1d1c64f0 68cf45ff a2a63a81 b7c13f6b","8847a3e7 7ef14fe3 db7fcafe 0cbd10e8","e826e034 36d646aa ef87b2e2 47d4af1e"],["8abe1d75 20f9c2a4 5cb1eb8e 95cfd552","62b70b29 feec5864 e19c054f f9912928","0e464621 77918111 42820341 263c5315"],e]})}},BRAINPOOLP512:class extends l{constructor(e){super({id:"BRAINPOOLP512",ossl:"brainpoolP512r1",type:"short",endian:"be",hash:"SHA512",prime:null,p:["aadd9db8 dbe9c48b 3fd4e6ae 33c9fc07","cb308db3 b3c9d20e d6639cca 70330871","7d4d9b00 9bc66842 aecda12a e6a380e6","2881ff2f 2d82c685 28aa6056 583a48f3"],a:["7830a331 8b603b89 e2327145 ac234cc5","94cbdd8d 3df91610 a83441ca ea9863bc","2ded5d5a a8253aa1 0a2ef1c9 8b9ac8b5","7f1117a7 2bf2c7b9 e7c1ac4d 77fc94ca"],b:["3df91610 a83441ca ea9863bc 2ded5d5a","a8253aa1 0a2ef1c9 8b9ac8b5 7f1117a7","2bf2c7b9 e7c1ac4d 77fc94ca dc083e67","984050b7 5ebae5dd 2809bd63 8016f723"],n:["aadd9db8 dbe9c48b 3fd4e6ae 33c9fc07","cb308db3 b3c9d20e d6639cca 70330870","553e5c41 4ca92619 41866119 7fac1047","1db1d381 085ddadd b5879682 9ca90069"],h:"1",z:"7",g:[["81aee4bd d82ed964 5a21322e 9c4c6a93","85ed9f70 b5d916c1 b43b62ee f4d0098e","ff3b1f78 e2d0d48d 50d1687b 93b97d5f","7c6d5047 406a5e68 8b352209 bcb9f822"],["7dde385d 566332ec c0eabfa9 cf7822fd","f209f700 24a57b1a a000c55b 881f8111","b2dcde49 4a5f485e 5bca4bd8 8a2763ae","d1ca2b2f a8f05406 78cd1e0f 3ad80892"],e]})}},X25519:class extends b{constructor(){super({id:"X25519",ossl:"X25519",type:"mont",endian:"le",hash:"SHA512",prime:"p25519",p:["7fffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffed"],a:"76d06",b:"1",n:["10000000 00000000 00000000 00000000","14def9de a2f79cd6 5812631a 5cf5d3ed"],h:"8",z:"2",g:[["00000000 00000000 00000000 00000000","00000000 00000000 00000000 00000009"],["5f51e65e 475f794b 1fe122d3 88b72eb3","6dc2b281 92839e4d d6163a5d 81312c14"]]})}},X448:class extends b{constructor(){super({id:"X448",ossl:"X448",type:"mont",endian:"le",hash:"SHAKE256",prime:"p448",p:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff fffffffe ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff"],a:"262a6",b:"1",n:["3fffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff 7cca23e9","c44edb49 aed63690 216cc272 8dc58f55","2378c292 ab5844f3"],h:"4",z:"-1",g:[["00000000 00000000 00000000 00000000","00000000 00000000 00000000 00000000","00000000 00000000 00000000 00000000","00000000 00000005"],["7d235d12 95f5b1f6 6c98ab6e 58326fce","cbae5d34 f55545d0 60f75dc2 8df3f6ed","b8027e23 46430d21 1312c4b1 50677af7","6fd7223d 457b5b1a"]]})}},MONT448:class extends b{constructor(){super({id:"MONT448",ossl:null,type:"mont",endian:"le",hash:"SHAKE256",prime:"p448",p:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff fffffffe ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff"],a:["b2cf97d2 d43459a9 31ed36b1 fc4e3cb5","5d93f8d2 22746997 60ccffc6 49961ed6","c5b05fca c24864ed 6fb59697 931b78da","84ddecd8 ca2b5cfb"],b:"1",n:["3fffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff 7cca23e9","c44edb49 aed63690 216cc272 8dc58f55","2378c292 ab5844f3"],h:"4",z:"-1",g:[["ac0d24cc c6c75cb0 eb71f81e 7a6edf51","48e88aee 009a2a24 e795687e c28e125a","3e6730a6 0d46367b aa7fe99d 152128dc","41321bc7 7817f059"],["5a4437f6 80c0d0db 9b061276 d5d0ffcc","e786ff33 b6a53d30 98746425 82e66f09","4433dae7 7244a6e2 6b11e905 7228f483","556c41a5 913f55fe"]]})}},ED25519:class extends _{constructor(e){super({id:"ED25519",ossl:"ED25519",type:"edwards",endian:"le",hash:"SHA512",prefix:"SigEd25519 no Ed25519 collisions",context:!1,prime:"p25519",p:["7fffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff ffffffed"],a:"-1",d:["52036cee 2b6ffe73 8cc74079 7779e898","00700a4d 4141d8ab 75eb4dca 135978a3"],n:["10000000 00000000 00000000 00000000","14def9de a2f79cd6 5812631a 5cf5d3ed"],h:"8",z:"2",g:[["216936d3 cd6e53fe c0a4e231 fdd6dc5c","692cc760 9525a7b2 c9562d60 8f25d51a"],["66666666 66666666 66666666 66666666","66666666 66666666 66666666 66666658"],e]})}},ISO448:class extends _{constructor(e){super({id:"ISO448",ossl:null,type:"edwards",endian:"le",hash:"SHAKE256",prefix:"SigEd448",context:!0,prime:"p448",p:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff fffffffe ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff"],a:"1",d:["d78b4bdc 7f0daf19 f24f38c2 9373a2cc","ad461572 42a50f37 809b1da3 412a12e7","9ccc9c81 264cfe9a d0809970 58fb61c4","243cc32d baa156b9"],n:["3fffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff 7cca23e9","c44edb49 aed63690 216cc272 8dc58f55","2378c292 ab5844f3"],h:"4",z:"-1",g:[["79a70b2b 70400553 ae7c9df4 16c792c6","1128751a c9296924 0c25a07d 728bdc93","e21f7787 ed697224 9de732f3 8496cd11","69871309 3e9c04fc"],["7fffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff 80000000","00000000 00000000 00000000 00000000","00000000 00000001"],e]})}},ED448:class extends _{constructor(e){super({id:"ED448",ossl:"ED448",type:"edwards",endian:"le",hash:"SHAKE256",prefix:"SigEd448",context:!0,prime:"p448",p:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff fffffffe ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff"],a:"1",d:["ffffffff ffffffff ffffffff ffffffff","ffffffff ffffffff fffffffe ffffffff","ffffffff ffffffff ffffffff ffffffff","ffffffff ffff6756"],n:["3fffffff ffffffff ffffffff ffffffff","ffffffff ffffffff ffffffff 7cca23e9","c44edb49 aed63690 216cc272 8dc58f55","2378c292 ab5844f3"],h:"4",z:"-1",g:[["4f1970c6 6bed0ded 221d15a6 22bf36da","9e146570 470f1767 ea6de324 a3d3a464","12ae1af7 2ab66511 433b80e1 8b00938e","2626a82b c70cc05e"],["693f4671 6eb6bc24 88762037 56c9c762","4bea7373 6ca39840 87789c1e 05a0c2d7","3ad3ff1c e67c39c4 fdbd132c 4ed7c8ad","9808795b f230fa14"],e]})}}},x={__proto__:null,P192:null,P224:null,P256:null,P384:null,P521:null,SECP256K1:null,BRAINPOOLP256:null,BRAINPOOLP384:null,BRAINPOOLP512:null,X25519:null,X448:null,MONT448:null,ED25519:null,ISO448:null,ED448:null};function R(e,t,r){P(e instanceof a),P(!e.red),P(t>>>0===t),P(r>>>0===r);const i=new Array(r),s=1<<t+1,n=e.abs(),o=1|e.sign();let h=0;for(;!n.isZero();){let e=0;n.isOdd()&&((e=n.andln(s-1))&s>>>1&&(e-=s),n.isubn(e)),i[h++]=e*o;let r=1;n.isZero()||0!==n.andln(s-1)||(r=t+1);for(let e=1;e<r;e++)i[h++]=0;n.iushrn(r)}for(P(h<=r);h<r;h++)i[h]=0;return i}function M(e,t,r){const i=function(e,t,r){P(e instanceof a),P(t instanceof a),P(!e.red),P(!t.red),P(r>>>0===r);const i=[new Array(r),new Array(r)],s=e.abs(),n=t.abs(),o=1|e.sign(),h=1|t.sign();let c=0,u=0,f=0;for(;s.cmpn(-u)>0||n.cmpn(-f)>0;){let e=s.andln(3)+u&3,t=n.andln(3)+f&3,r=0,a=0;if(3===e&&(e=-1),3===t&&(t=-1),1&e){const i=s.andln(7)+u&7;r=3!==i&&5!==i||2!==t?e:-e}if(1&t){const r=n.andln(7)+f&7;a=3!==r&&5!==r||2!==e?t:-t}i[0][c]=r*o,i[1][c]=a*h,2*u===r+1&&(u=1-u),2*f===a+1&&(f=1-f),s.iushrn(1),n.iushrn(1),c+=1}for(P(c<=r);c<r;c++)i[0][c]=0,i[1][c]=0;return i}(e,t,r),s=new Array(r);for(let e=0;e<r;e++){const t=i[0][e],r=i[1][e];s[e]=c[3*(t+1)+(r+1)]}return s}function P(e,t){if(!e){const e=new Error(t||"Assertion failed");throw Error.captureStackTrace&&Error.captureStackTrace(e,P),e}}function B(e){P(e instanceof a);try{return[1,e.redSqrt()]}catch(t){if("X is not a square mod P."===t.message)return[0,e.clone()];throw t}}function N(e,t){P(e instanceof a),P(t instanceof a);try{return[1,e.redDivSqrt(t)]}catch(t){if("Not invertible."===t.message||"X is not a square mod P."===t.message)return[0,e.clone()];throw t}}function T(e){return a.randomBits(e,32).toNumber()}function C(e,t){const r=new WeakMap;return function(i,s){const n=1&s,o=r.get(i);if(o&&null!==o[n])return o[n];const a=e.call(t,i,s);return r.has(i)||r.set(i,[null,null]),r.get(i)[n]=a,a}}e.Curve=u,e.Point=f,e.ShortCurve=l,e.ShortPoint=d,e.JPoint=p,e.MontCurve=b,e.MontPoint=g,e.XPoint=m,e.EdwardsCurve=_,e.EdwardsPoint=w,e.curves=O,e.curve=function(e,...t){P("string"==typeof e);const r=e.toUpperCase();let i=x[r];if(!i){const s=O[r];if(!s)throw new Error(`Curve not found: "${e}".`);i=new s(...t),x[r]=i}return i},e.register=function(e,t){P("string"==typeof e),P("function"==typeof t);const r=e.toUpperCase();if(O[r])throw new Error(`Curve already registered: "${e}".`);O[r]=t,x[r]=null}}],["bcrypto","/lib/js/precomputed/secp256k1.json",function(e,t,r,i,s,n){r.exports={naf:{width:8,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","0ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","02de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","02972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","0d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["049370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","091b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","0673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","0a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","09414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["078c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","04f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","073867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["0336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","060660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","0b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["04e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["0c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","021ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","0c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","09731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","0cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","0712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]},doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","04e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["06f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["0948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","0e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","067c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["0928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","0d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["08ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]}}}],["bcrypto","/lib/hash160-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(159,r)}],["bcrypto","/lib/js/hash160.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(5,r),a=__browser_require__(119,r),h=__browser_require__(160,r),c=__browser_require__(6,r),u=new h;class f{constructor(){this.ctx=new a}init(){return this.ctx.init(),this}update(e){return this.ctx.update(e),this}final(){const e=Buffer.allocUnsafe(32);return this.ctx._final(e),u.init(),u.update(e),u._final(e),e.slice(0,20)}static hash(){return new f}static hmac(){return new c(f,64)}static digest(e){return f.ctx.init().update(e).final()}static root(e,t){return o(null!=e&&!0===e._isBuffer&&20===e.length),o(null!=t&&!0===t._isBuffer&&20===t.length),f.ctx.init().update(e).update(t).final()}static multi(e,t,r){const{ctx:i}=f;return i.init(),i.update(e),i.update(t),r&&i.update(r),i.final()}static mac(e,t){return f.hmac().init(t).update(e).final()}}f.native=0,f.id="HASH160",f.size=20,f.bits=160,f.blockSize=64,f.zero=Buffer.alloc(20,0),f.ctx=new f,r.exports=f}],["bcrypto","/lib/js/ripemd160.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(5,r),a=__browser_require__(6,r),h=-1,c=Buffer.alloc(8,0),u=Buffer.alloc(64,0);u[0]=128;const f=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=new Uint8Array([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=new Uint8Array([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),p=new Uint8Array([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]);class b{constructor(){this.state=new Uint32Array(5),this.msg=new Uint32Array(16),this.block=Buffer.allocUnsafe(64),this.size=h}init(){return this.state[0]=1732584193,this.state[1]=4023233417,this.state[2]=2562383102,this.state[3]=271733878,this.state[4]=3285377520,this.size=0,this}update(e){return o(null!=e&&!0===e._isBuffer),this._update(e,e.length),this}final(){return this._final(Buffer.allocUnsafe(20))}_update(e,t){o(this.size!==h,"Context is not initialized.");let r=63&this.size,i=0;if(this.size+=t,r>0){let s=64-r;if(s>t&&(s=t),e.copy(this.block,r,i,i+s),t-=s,i+=s,(r+=s)<64)return;this._transform(this.block,0)}for(;t>=64;)this._transform(e,i),i+=64,t-=64;t>0&&e.copy(this.block,0,i,i+t)}_final(e){o(this.size!==h,"Context is not initialized.");const t=63&this.size,r=8*this.size;y(c,r>>>0,0),y(c,r*(1/4294967296)>>>0,4),this._update(u,1+(119-t&63)),this._update(c,8);for(let t=0;t<5;t++)y(e,this.state[t],4*t),this.state[t]=0;for(let e=0;e<16;e++)this.msg[e]=0;for(let e=0;e<64;e++)this.block[e]=0;return this.size=h,e}_transform(e,t){const r=this.msg;let i=this.state[0],s=this.state[1],n=this.state[2],o=this.state[3],a=this.state[4],h=i,c=s,u=n,b=o,y=a;for(let i=0;i<16;i++)r[i]=(E=t+4*i,(v=e)[E++]+256*v[E++]+65536*v[E++]+16777216*v[E]);var v,E;for(let e=0;e<80;e++){let t=i+m(e,s,n,o)+r[f[e]]+_(e),v=g(t,d[e]),E=v+a;i=a,a=o,o=g(n,10),n=s,s=E,E=(v=g(t=h+m(79-e,c,u,b)+r[l[e]]+w(e),p[e]))+y,h=y,y=b,b=g(u,10),u=c,c=E}const S=this.state[1]+n+b;this.state[1]=this.state[2]+o+y,this.state[2]=this.state[3]+a+h,this.state[3]=this.state[4]+i+c,this.state[4]=this.state[0]+s+u,this.state[0]=S}static hash(){return new b}static hmac(){return new a(b,64)}static digest(e){return b.ctx.init().update(e).final()}static root(e,t){return o(null!=e&&!0===e._isBuffer&&20===e.length),o(null!=t&&!0===t._isBuffer&&20===t.length),b.ctx.init().update(e).update(t).final()}static multi(e,t,r){const{ctx:i}=b;return i.init(),i.update(e),i.update(t),r&&i.update(r),i.final()}static mac(e,t){return b.hmac().init(t).update(e).final()}}function g(e,t){return e<<t|e>>>32-t}function m(e,t,r,i){return e<=15?t^r^i:e<=31?t&r|~t&i:e<=47?(t|~r)^i:e<=63?t&i|r&~i:t^(r|~i)}function _(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function w(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}function y(e,t,r){return e[r++]=t,t>>>=8,e[r++]=t,t>>>=8,e[r++]=t,t>>>=8,e[r++]=t,r}b.native=0,b.id="RIPEMD160",b.size=20,b.bits=160,b.blockSize=64,b.zero=Buffer.alloc(20,0),b.ctx=new b,r.exports=b}],["bledger","/lib/utils/signature.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(2,r),a=__browser_require__(141,r),h=__browser_require__(116,r),c=32,u=Buffer.alloc(32,0);class f{constructor(e,t,r){this.r=u,this.s=u,this.recid=-1,e&&this.setR(e),t&&this.setS(t),r&&this.setRecid(r)}fromOptions(e){return o("object"==typeof e),e.r&&this.setR(e.r),e.s&&this.setS(e.s),e.recid&&this.setRecid(e.recid),this}setR(e){return o(null!=e&&!0===e._isBuffer),o(e.length===c),this.r=e,this}setS(e){return o(null!=e&&!0===e._isBuffer),o(e.length===c),this.s=e,this}setRecid(e){return o("number"==typeof e,"recid must be a number."),o(e>=0&&e<=3,"recid must be a number between 0 and 3."),this.recid=e,this}equals(e){return o(e instanceof f),this.recid===e.recid&&this.s.equals(e.s)&&this.r.equals(e.r)}encode(){const e=Buffer.allocUnsafe(2*c);return this.r.copy(e,0),this.s.copy(e,c),e}decode(e){return o(null!=e&&!0===e._isBuffer,"sig must be a buffer."),o(e.length===2*c),this.r=e.slice(0,c),this.s=e.slice(c,2*c),this}fromDER(e){const t=a.signatureImport(e);return this.decode(t)}toDER(){return a.signatureExport(this.encode())}fromLedgerSignature(e){return o(null!=e&&!0===e._isBuffer),this.setRecid(3&e[0]),e[0]^=this.recid,o(48===e[0]),this.fromDER(e),e[0]^=this.recid,this}toLedgerSignature(){const e=this.toDER();return this.recid>0&&(e[0]^=this.recid),e}toCoreSignature(e=!0){const t=Buffer.allocUnsafe(2*c+1);return t[0]=this.recid+27+(e?4:0),this.r.copy(t,1),this.s.copy(t,c+1),t}fromCoreSignature(e){o(null!=e&&!0===e._isBuffer,"signature must be a buffer."),o(e.length===2*c+1,"signature must be 65 bytes.");const t=e[0]-27;return this.setRecid(3&t),this.decode(e.slice(1)),this}toString(e){return this.toLedgerSignature().toString(e)}static fromOptions(e){return(new this).fromOptions(e)}static decode(e){return(new this).decode(e)}static fromDER(e){return(new this).fromDER(e)}static fromLedgerSignature(e){return(new this).fromLedgerSignature(e)}static fromCoreSignature(e){return(new this).fromCoreSignature(e)}recoverMessage(e,t=!0,r){"string"==typeof e&&(e=Buffer.from(e,"binary")),o(null!=e&&!0===e._isBuffer,"message must be a buffer or a string.");const i=h.hashMessage(e,r);return this.recover(i,t)}recover(e,t=!0){return o(null!=e&&!0===e._isBuffer,"msg must be a buffer."),o("boolean"==typeof t,"compress must be a boolean."),this.recid<0?null:a.recover(e,this.encode(),this.recid,t)}verifyMessage(e,t,r){"string"==typeof e&&(e=Buffer.from(e,"binary")),o(null!=e&&!0===e._isBuffer,"message must be a buffer or a string.");const i=h.hashMessage(e,r);return this.verify(i,t)}verify(e,t){return o(null!=e&&!0===e._isBuffer,"hash must be a buffer."),o(null!=t&&!0===t._isBuffer,"publicKey must be a buffer."),a.verify(e,this.encode(),t)}}r.exports=f}],["bledger","/lib/ledger/ledger.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(2,r),a=__browser_require__(56,r),h=__browser_require__(75,r),{encoding:c}=h,{BufferMap:u}=__browser_require__(7,r),f=__browser_require__(85,r),l=__browser_require__(126,r),d=__browser_require__(163,r).Script,p=__browser_require__(128,r),b=__browser_require__(84,r),g=__browser_require__(115,r),m=__browser_require__(72,r),{APDUCommand:_,APDUResponse:w}=m,y=new d;class v{constructor(e){this.device=e.device,this.logger=a.global,null!=e.logger&&(o("object"==typeof e.logger),this.logger=e.logger)}async getFirmwareVersion(){this.logger.spam("get firmware version.");const e=_.getFirmwareVersion(),t=await this.device.exchange(e.toRaw());return w.getFirmwareVersion(t).data}async getOperationMode(){this.logger.spam("get operation mode.");const e=_.getOperationMode(),t=await this.device.exchange(e.toRaw());return w.getOperationMode(t).data}async setOperationMode(e){this.logger.spam("set operation mode %d.",e);const t=_.setOperationMode(e),r=await this.device.exchange(t.toRaw());return w.setOperationMode(r).data}async getRandom(e){o("number"==typeof e),o(e<=255,"size must be less than 255"),this.logger.debug("get %d random bytes:",e);const t=_.getRandom(e),r=await this.device.exchange(t.toRaw());return w.getRandom(r,e).data}async getPublicKey(e,t){this.logger.debug("getting public key for:",e),"string"==typeof e&&(e=g.parsePath(e,!0)),o(Array.isArray(e),"Path must be string or array");const r=e,i=_.getWalletPublicKey(r,t),s=await this.device.exchange(i.toRaw());return w.getWalletPublicKey(s).data}async getTrustedInput(e,t){o(f.isTX(e)),this.logger.spam("getting trusted input, tx: %h, output: %d",e.hash(),t);const r=b.splitTransaction(e),i=h.write(r[0].length+4);i.writeU32BE(t),i.writeBytes(r[0]),r[0]=i.render();const s=r.pop();let n=!0;for(const e of r){const t=_.getTrustedInput(e,n),r=await this.device.exchange(t.toRaw());w.getTrustedInput(r),n=!1}const a=_.getTrustedInput(s,!1),c=await this.device.exchange(a.toRaw());return w.getTrustedInput(c).data}async hashTransactionStart(e,t,r,i,s){o(f.isTX(e),"tx must be instanceof TX"),o(t instanceof p,"view must be instanceof CoinView"),o("object"==typeof r,"Trusted input map not found."),this.logger.spam("hashTransactionStart, start composing tx.");const n=[_.hashTransactionStart(b.splitVersionInputs(e),!0,i,s)];for(const o of e.inputs){const e=o.prevout.toRaw();let a;if(r.get(e)){const t=r.get(e),i=o.script.getSize(),s=c.sizeVarint(i);(a=h.write(2+t.length+s)).writeU8(1),a.writeU8(t.length),a.writeBytes(t),a.writeVarint(i)}else if(s){const e=o.prevout.getSize(),r=8,i=o.script.getSize(),s=c.sizeVarint(i),n=t.getCoinFor(o);(a=h.write(1+r+e+s)).writeU8(2),o.prevout.toWriter(a),a.writeI64(n.value),a.writeVarint(i)}else{const e=o.prevout.getSize(),t=o.script.getSize(),r=c.sizeVarint(t);(a=h.write(1+e+r)).writeU8(0),o.prevout.toWriter(a),a.writeVarint(t)}n.push(_.hashTransactionStart(a.render(),!1,i,s));const u=b.splitBuffer(o.script.toRaw(),b.MAX_SCRIPT_BLOCK,!0),f=u.pop(),l=h.write(f.length+4);l.writeBytes(f),l.writeU32(o.sequence),u.push(l.render());for(const e of u)n.push(_.hashTransactionStart(e,!1,i,s))}for(const e of n){const t=await this.device.exchange(e.toRaw());w.hashTransactionStart(t)}}async hashTransactionStartNullify(e,t,r,i,s,n){o(l.isMTX(e)),this.logger.spam("prepare legacy transaction."),i||(i=new u);const a=e.view,h=new f;h.inject(e);for(const e of h.inputs){e.prevout.toRaw().equals(t)?e.script=r:e.script=y}await this.hashTransactionStart(h,a,i,s,n)}async hashTransactionStartSegwit(e,t,r,i){o(f.isTX(e)),this.logger.spam("prepare witness transaction.");const s=new f;s.inject(e);const n=[];for(const e of s.inputs){if(e.prevout.toRaw().equals(r)){e.script=i,n.push(e);break}}s.inputs=n,await this.hashTransactionStart(s,t,new u,!1,!0)}async hashOutputFinalize(e){o(f.isTX(e)),this.logger.spam("send and verify outputs on the device.");let t=c.sizeVarint(e.outputs.length);for(const r of e.outputs)t+=r.getSize();const r=h.write(t);r.writeVarint(e.outputs.length);for(const t of e.outputs)t.toWriter(r);const i=b.splitBuffer(r.render(),b.MAX_SCRIPT_BLOCK),s=i.pop();for(const e of i){const t=_.hashOutputFinalize(e,!0),r=await this.device.exchange(t.toRaw());w.hashOutputFinalize(r)}const n=_.hashOutputFinalize(s,!1),a=await this.device.exchange(n.toRaw());return w.hashOutputFinalize(a).data}async hashSign(e,t,r){o(f.isTX(e)),this.logger.spam("sign the processed transaction."),"string"==typeof t&&(t=g.parsePath(t,!0));const i=_.hashSign(t,e.locktime,r),s=await this.device.exchange(i.toRaw());return w.hashSign(s).data}async signMessagePrepare0(e,t){o(Array.isArray(e),"Path must be string or array"),o(null!=t&&!0===t._isBuffer,"Message is not a buffer."),this.logger.spam("prepare message for signing.(legacy)");const r=h.write();r.writeBytes(g.encodePath(e)),r.writeU8(t.length),r.writeBytes(t),o(r.getSize()<=255,"Message + path is too big.");const i=_.signMessage(r.render(),!0,!0,!0),s=await this.device.exchange(i.toRaw());return w.signMessage0(s).data}async signMessagePrepare(e,t){let r;o(Array.isArray(e),"Path must be string or array"),o(null!=t&&!0===t._isBuffer,"Message is not a buffer."),this.logger.spam("prepare message for signing.");{const i=h.write();i.writeBytes(g.encodePath(e)),i.writeU16BE(t.length),i.writeBytes(t),r=b.splitBuffer(i.render(),255)}const i=[_.signMessage(r.shift(),!0,!0)];for(const e of r)i.push(_.signMessage(e,!0,!1));const s=i.pop();let n=Buffer.alloc(0);for(const e of i){const t=await this.device.exchange(e.toRaw());n=w.signMessage(t,n).data.encryptedOutputData}const a=await this.device.exchange(s.toRaw());return w.signMessage(a,n,!0).data}async signMessageFinal(e){let t;if(this.logger.spam("get the message signature."),e){const r=h.write(),i=Buffer.from(e,"utf8");r.writeU8(i.length),r.writeBytes(i),t=r.render()}else t=Buffer.alloc(1,0);const r=_.signMessage(t,!1,!1),i=await this.device.exchange(r.toRaw());return w.signMessageFinal(i).data}async signMessage(e,t,r){let i;o(null!=t&&!0===t._isBuffer,"Message is not a buffer."),o(t.length<65535,"Message is too big (max 0xffff)"),this.logger.debug("sign the message %h with key at %s.",t,e),"string"==typeof e&&(e=g.parsePath(e,!0));try{i=await this.signMessagePrepare(e,t)}catch(r){if(27392!==r.code)throw r;i=await this.signMessagePrepare0(e,t)}return i.confirmationNeeded&&o("string"==typeof r,"PIN is required."),await this.signMessageFinal(r)}async signMessageLegacy(e,t,r){return o(null!=t&&!0===t._isBuffer,"Message is not a buffer."),this.logger.debug("sign the message %h with key at %s. (legacy)",t,e),"string"==typeof e&&(e=g.parsePath(e,!0)),(await this.signMessagePrepare0(e,t)).confirmationNeeded&&o("string"==typeof r,"PIN is required."),await this.signMessageFinal(r)}}v.addressFlags=m.common.addressFlags,r.exports=v}],["bcoin","/lib/script/index.js",function(e,t,r,i,s,n){"use strict";e.common=__browser_require__(98,r),e.Opcode=__browser_require__(102,r),e.Program=__browser_require__(97,r),e.Script=__browser_require__(89,r),e.ScriptError=__browser_require__(101,r),e.ScriptNum=__browser_require__(99,r),e.sigcache=__browser_require__(164,r),e.Stack=__browser_require__(103,r),e.Witness=__browser_require__(110,r)}],["bcoin","/lib/script/sigcache.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),{BufferMap:a}=__browser_require__(86,r),h=__browser_require__(38,r);class c{constructor(e,t){this.sig=Buffer.from(e),this.key=Buffer.from(t)}equals(e,t){return this.sig.equals(e)&&this.key.equals(t)}}r.exports=class{constructor(e){null==e&&(e=1e4),o(e>>>0===e),this.size=e,this.keys=[],this.valid=new a}resize(e){o(e>>>0===e),this.size=e,this.keys.length=0,this.valid.clear()}add(e,t,r){if(0!==this.size)if(this.valid.set(e,new c(t,r)),this.keys.length>=this.size){const t=Math.floor(Math.random()*this.keys.length),r=this.keys[t];this.valid.delete(r),this.keys[t]=e}else this.keys.push(e)}has(e,t,r){const i=this.valid.get(e);return!!i&&i.equals(t,r)}verify(e,t,r){return 0===this.size?h.verifyDER(e,t,r):!!this.has(e,t,r)||!!h.verifyDER(e,t,r)&&(this.add(e,t,r),!0)}}}],["bledger","/lib/ledger/txstate.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(2,r),{BufferMap:a}=__browser_require__(7,r),h=__browser_require__(56,r),c=__browser_require__(126,r),u=__browser_require__(85,r),f=__browser_require__(163,r).Script,l=__browser_require__(141,r),d=__browser_require__(162,r),p=__browser_require__(166,r),b=new f;class g{constructor(e){this.ledger=null,this.mtx=new c,this.inputs=[],this.inputsByKey=new a,this.indexByInput=new a,this.trustedInputs=new a,this.witness=!1,this.new=!0,this.logger=h.global,this.signedInputs=0,this.initialized=!1,this._trustedInputs=!1,this._publicKeys=!1,e&&this.fromOptions(e)}fromOptions(e){return o(e,"LedgerTXState options are required."),o(e.mtx,"MTX is required."),o(e.ledger instanceof d,"Ledger is not LedgerBTCApp instance."),o(c.isMTX(e.mtx),"Can not use non-MTX object."),this.ledger=e.ledger,this.mtx=e.mtx,this.logger=e.logger,e.inputs&&(o(Array.isArray(e.inputs)),this.inputs=e.inputs),this}static fromOptions(e){return new this(e)}init(){o(this.ledger),o(!this.initialized);for(const e of this.inputs)this.inputsByKey.set(e.toKey(),e),e.witness&&(this.witness=!0);return this.mapTXInputs(),this.initialized=!0,this}mapTXInputs(){for(const[e,t]of this.mtx.inputs.entries()){const r=t.prevout.toRaw();o(null!=r&&!0===r._isBuffer),this.indexByInput.set(r,e)}}getIndex(e){return null!=e&&!0===e._isBuffer?this.indexByInput.get(e):(o(p.isLedgerTXInput(e)),this.indexByInput.get(e.toKey()))}hasWitness(){return this.witness}isNew(){return this.new}async collectPubkeys(){if(o(this.initialized,"Can not use uninitialized object."),!this._publicKeys){this.logger.spam("collect public keys.");for(const e of this.inputs){if(e.publicKey)continue;const t=(await this.ledger.getPublicKey(e.path)).publicKey;e.publicKey=l.publicKeyConvert(t,!0)}this._publicKeys=!0}}async collectTrustedInputs(){if(o(this.initialized,"Can not use uninitialized object."),!this._trustedInputs){this.logger.spam("collect trusted inputs.");for(const e of this.inputs){if(e.witness||e.redeem)continue;if(e.trustedInput)continue;const t=await this.ledger.getTrustedInput(e.tx,e.index),r=e.toKey();e.trustedInput=t,this.trustedInputs.set(r,t)}this._trustedInputs=!0}}async cacheWitnessInputs(){o(this.initialized,"Can not use uninitialized object."),this.witness&&(this.logger.spam("start sending witness tx inputs."),await this.ledger.hashTransactionStart(this.mtx,this.mtx.view,new a,this.isNew(),this.witness),await this.ledger.hashOutputFinalize(this.mtx),this.new=!1)}async getSignature(e){o(p.isLedgerTXInput(e)),this.logger.spam("get signature for input.");const t=e.toKey(),r=e.witness,i=e.getPrevRedeem(),s=this.mtx.view;r?await this.ledger.hashTransactionStart(function(e,t,r){const i=new u;i.inject(e);const s=[];for(const e of i.inputs){const i=e.prevout.toRaw();if(i.equals(t)){e.script=r,s.push(e);break}}return i.inputs=s,i}(this.mtx,t,i),s,this.trustedInputs,this.isNew(),this.witness):(await this.ledger.hashTransactionStart(function(e,t,r){const i=new u;i.inject(e);for(const e of i.inputs){const i=e.prevout.toRaw();i.equals(t)?e.script=r:e.script=b}return i}(this.mtx,t,i),s,this.trustedInputs,this.isNew(),r),await this.ledger.hashOutputFinalize(this.mtx));const n=await this.ledger.hashSign(this.mtx,e.path,e.type);return this.new=!1,n}destroy(){this.ledger=null,this.mtx=new c,this.inputs=[],this.inputsByKey.clear(),this.indexByInput.clear(),this.trustedInputs.clear(),this.witness=!1,this.new=!0,this.initialized=!1,this.reset()}reset(){this._publicKeys=!1,this._trustedInputs=!1}}g.LedgerTXState=g,r.exports=g}],["bledger","/lib/ledger/txinput.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(2,r),a=__browser_require__(14,r),h=__browser_require__(111,r),c=__browser_require__(127,r),u=__browser_require__(167,r),f=__browser_require__(85,r),l=__browser_require__(163,r).Script,d=__browser_require__(73,r),p=__browser_require__(115,r);class b{constructor(e){this.path=[],this.tx=null,this.index=0,this.witness=!1,this.redeem=null,this.type=l.hashType.ALL,this.publicKey=null,this.trustedInput=null,this.coin=null,this._ring=null,this._key="",this._prev=null,this._prevred=null,e&&this.fromOptions(e)}fromOptions(e){var t;return o(e,"SignInput data is required."),o(e.path,"Path is required."),"string"==typeof e.path&&(e.path=p.parsePath(e.path,!0)),o(Array.isArray(e.path),"Path must be Array or string"),this.path=e.path,null!=e.type&&(o(e.type!==l.hashType.ALL,"Ledger only supports SIGHASH_ALL"),this.type=e.type),null!=e.redeem&&(null!=e.redeem&&!0===e.redeem._isBuffer&&(e.redeem=l.fromRaw(e.redeem)),o(l.isScript(e.redeem),"Cannot use non-script redeem."),this.redeem=e.redeem),null!=e.witness&&(o("boolean"==typeof e.witness),this.witness=e.witness),(null==this.redeem&&!this.witness||e.tx)&&(o(e.tx,"Tx is required."),null!=e.tx&&!0===e.tx._isBuffer&&(e.tx=f.fromRaw(e.tx)),o(f.isTX(e.tx),"Cannot use non-transaction tx."),this.tx=e.tx,o("number"==typeof e.index,"Output index is required."),o((t=e.index)>>>0===t,"Output index must be a uint32."),this.index=e.index,this.coin=c.fromTX(this.tx,this.index,0)),null==this.coin&&(o(c.isCoin(e.coin),"LedgerInput needs Coin or previous tx"),this.coin=e.coin),null!=e.publicKey&&(o(null!=e.publicKey&&!0===e.publicKey._isBuffer,"Cannot set non-buffer public key"),this.publicKey=e.publicKey),null!=e.trustedInput&&(o(null!=e.trustedInput&&!0===e.trustedInput._isBuffer,"Can not set non-buffer trusted input."),this.trustedInput=e.trustedInput),this.isWitnessScripthash()&&o(this.redeem,"Can not sign ScriptHash without redeem."),this.witness||o(!this.isWitness(),"input script is program."),this}static fromOptions(e){return(new this).fromOptions(e)}static isLedgerTXInput(e){return e instanceof this}toKey(){return this._key||(this._key=this.getOutpoint().toRaw()),this._key}getOutpoint(){return this._outpoint||(this._outpoint=h.fromOptions({hash:this.coin.hash,index:this.coin.index})),this._outpoint}getPrev(){return this._prev||(this._prev=this.getCoin().script),this._prev}getPrevRedeem(){if(this._prevred)return this._prevred;if(this.getPrev().isScripthash()&&this.witness&&!this.redeem){const e=this.getRing().getProgram().getWitnessPubkeyhash();this._prevred=l.fromPubkeyhash(e)}else if(this.isScripthash())this._prevred=this.redeem;else if(this.witness){const e=this.getPrev().getWitnessPubkeyhash();this._prevred=l.fromPubkeyhash(e)}else this._prevred=this.getPrev();return this._prevred}getCoin(){return this.coin}getRing(e=a.primary){if(!this.publicKey)throw new d("Cannot return ring without public key");return this._ring||(this._ring=u.fromPublic(this.publicKey,e),this.redeem&&(this._ring.script=this.redeem),this.witness&&(this._ring.witness=!0)),this._ring}isScripthash(){const e=this.getPrev();return e.isWitnessScripthash()||e.isScripthash()}isWitnessScripthash(){return this.getPrev().isWitnessScripthash()}isWitness(){const e=this.getPrev();return e.isWitnessPubkeyhash()||e.isWitnessScripthash()}refresh(){this._coin=null,this._ring=null,this._key="",this._prev=null,this._outpoint=null}}b.LedgerTXInput=b,r.exports=b}],["bcoin","/lib/primitives/keyring.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(105,r),h=__browser_require__(24,r),c=__browser_require__(94,r),u=__browser_require__(33,r),f=__browser_require__(14,r),l=__browser_require__(89,r),d=__browser_require__(104,r),p=__browser_require__(112,r),b=__browser_require__(38,r),{encoding:g}=h,{inspectSymbol:m}=__browser_require__(21,r),_=Buffer.alloc(33,0);class w{constructor(e){this.witness=!1,this.nested=!1,this.publicKey=_,this.privateKey=null,this.script=null,this._keyHash=null,this._keyAddress=null,this._program=null,this._nestedHash=null,this._nestedAddress=null,this._scriptHash160=null,this._scriptHash256=null,this._scriptAddress=null,e&&this.fromOptions(e)}fromOptions(e){let t=y(e);if(null!=e.witness&&(o("boolean"==typeof e.witness),this.witness=e.witness),null!=e.nested&&(o("boolean"==typeof e.nested),this.nested=e.nested),null!=t&&!0===t._isBuffer)return this.fromKey(t);t=y(e.key),e.publicKey&&(t=y(e.publicKey)),e.privateKey&&(t=y(e.privateKey));const r=e.script,i=e.compressed;return r?this.fromScript(t,r,i):this.fromKey(t,i)}static fromOptions(e){return(new this).fromOptions(e)}refresh(){this._keyHash=null,this._keyAddress=null,this._program=null,this._nestedHash=null,this._nestedAddress=null,this._scriptHash160=null,this._scriptHash256=null,this._scriptAddress=null}fromPrivate(e,t){return o(null!=e&&!0===e._isBuffer,"Private key must be a buffer."),o(b.privateKeyVerify(e),"Not a valid private key."),this.privateKey=e,this.publicKey=b.publicKeyCreate(e,!1!==t),this}static fromPrivate(e,t){return(new this).fromPrivate(e,t)}fromPublic(e){return o(null!=e&&!0===e._isBuffer,"Public key must be a buffer."),o(b.publicKeyVerify(e),"Not a valid public key."),this.publicKey=e,this}generate(e){const t=b.privateKeyGenerate();return this.fromKey(t,e)}static generate(e){return(new this).generate(e)}static fromPublic(e){return(new this).fromPublic(e)}fromKey(e,t){return o(null!=e&&!0===e._isBuffer,"Key must be a buffer."),32===e.length?this.fromPrivate(e,!1!==t):this.fromPublic(e)}static fromKey(e,t){return(new this).fromKey(e,t)}fromScript(e,t,r){return o(t instanceof l,"Non-script passed into KeyRing."),this.fromKey(e,r),this.script=t,this}static fromScript(e,t,r){return(new this).fromScript(e,t,r)}fromMultisigScript(e,t){o(e instanceof l,"Non-script passed."),o(e.isMultisig(),"Script must be multisig");const r=e.getSmall(-2);return o(t>=1&&t<=r,"Requested `i`th key, `n` available"),this.fromKey(e.code[t].toData()),this}static fromMultisigScript(e,t){return(new this).fromMultisigScript(e,t)}getSecretSize(){let e=0;return e+=1,e+=this.privateKey.length,33===this.publicKey.length&&(e+=1),e+=4}toSecret(e){const t=this.getSecretSize(),r=h.write(t);return o(this.privateKey,"Cannot serialize without private key."),e=f.get(e),r.writeU8(e.keyPrefix.privkey),r.writeBytes(this.privateKey),33===this.publicKey.length&&r.writeU8(1),r.writeChecksum(u.digest),a.encode(r.render())}fromSecret(e,t){const r=h.read(a.decode(e),!0),i=r.readU8();f.fromWIF(i,t);const s=r.readBytes(32);let n=!1;return r.left()>4&&(o(1===r.readU8(),"Bad compression flag."),n=!0),r.verifyChecksum(u.digest),this.fromPrivate(s,n)}static fromSecret(e,t){return(new this).fromSecret(e,t)}getPrivateKey(e,t){return this.privateKey?"base58"===e?this.toSecret(t):"hex"===e?this.privateKey.toString("hex"):this.privateKey:null}getPublicKey(e){return"base58"===e?a.encode(this.publicKey):"hex"===e?this.publicKey.toString("hex"):this.publicKey}getScript(){return this.script}getProgram(){if(!this.witness)return null;if(!this._program){let e;if(this.script){const t=this.script.sha256();e=l.fromProgram(0,t)}else{const t=c.digest(this.publicKey);e=l.fromProgram(0,t)}this._program=e}return this._program}getNestedHash(e){return this.witness?(this._nestedHash||(this._nestedHash=this.getProgram().hash160()),"hex"===e?this._nestedHash.toString("hex"):this._nestedHash):null}getNestedAddress(e,t){if(!this.witness)return null;if(!this._nestedAddress){const e=this.getNestedHash(),t=d.fromScripthash(e);this._nestedAddress=t}return"base58"===e?this._nestedAddress.toBase58(t):"string"===e?this._nestedAddress.toString(t):this._nestedAddress}getScriptHash(e){return this.witness?this.getScriptHash256(e):this.getScriptHash160(e)}getScriptHash160(e){return this.script?(this._scriptHash160||(this._scriptHash160=this.script.hash160()),"hex"===e?this._scriptHash160.toString("hex"):this._scriptHash160):null}getScriptHash256(e){return this.script?(this._scriptHash256||(this._scriptHash256=this.script.sha256()),"hex"===e?this._scriptHash256.toString("hex"):this._scriptHash256):null}getScriptAddress(e,t){if(!this.script)return null;if(!this._scriptAddress){let e;if(this.witness){const t=this.getScriptHash256();e=d.fromWitnessScripthash(t)}else{const t=this.getScriptHash160();e=d.fromScripthash(t)}this._scriptAddress=e}return"base58"===e?this._scriptAddress.toBase58(t):"string"===e?this._scriptAddress.toString(t):this._scriptAddress}getKeyHash(e){return this._keyHash||(this._keyHash=c.digest(this.publicKey)),"hex"===e?this._keyHash.toString("hex"):this._keyHash}getKeyAddress(e,t){if(!this._keyAddress){const e=this.getKeyHash();let t;t=this.witness?d.fromWitnessPubkeyhash(e):d.fromPubkeyhash(e),this._keyAddress=t}return"base58"===e?this._keyAddress.toBase58(t):"string"===e?this._keyAddress.toString(t):this._keyAddress}getHash(e){return this.nested?this.getNestedHash(e):this.script?this.getScriptHash(e):this.getKeyHash(e)}getAddress(e,t){return this.nested?this.getNestedAddress(e,t):this.script?this.getScriptAddress(e,t):this.getKeyAddress(e,t)}ownHash(e){return!!e&&(!!e.equals(this.getKeyHash())||(!(!this.script||!e.equals(this.getScriptHash()))||!(!this.witness||!e.equals(this.getNestedHash()))))}ownOutput(e,t){let r;return e instanceof p?r=e:(r=e.outputs[t],o(r,"Output does not exist.")),this.ownHash(r.getHash())}getRedeem(e){if(this.witness&&e.equals(this.getNestedHash()))return this.getProgram();if(this.script){if(e.equals(this.getScriptHash160()))return this.script;if(e.equals(this.getScriptHash256()))return this.script}return null}sign(e){return o(this.privateKey,"Cannot sign without private key."),b.signDER(e,this.privateKey)}verify(e,t){return b.verifyDER(e,t,this.publicKey)}getVersion(){return this.witness?this.nested?-1:0:-1}getType(){return this.nested?d.types.SCRIPTHASH:this.witness?d.types.WITNESS:this.script?d.types.SCRIPTHASH:d.types.PUBKEYHASH}[m](){return this.toJSON()}toJSON(e){return{witness:this.witness,nested:this.nested,publicKey:this.publicKey.toString("hex"),script:this.script?this.script.toRaw().toString("hex"):null,program:this.witness?this.getProgram().toRaw().toString("hex"):null,type:d.typesByVal[this.getType()].toLowerCase(),address:this.getAddress("string",e)}}fromJSON(e){return o(e),o("boolean"==typeof e.witness),o("boolean"==typeof e.nested),o("string"==typeof e.publicKey),o(!e.script||"string"==typeof e.script),this.witness=e.witness,this.nested=e.nested,this.publicKey=Buffer.from(e.publicKey,"hex"),e.script&&(this.script=Buffer.from(e.script,"hex")),this}static fromJSON(e){return(new this).fromJSON(e)}getSize(){let e=0;return e+=1,this.privateKey?(e+=g.sizeVarBytes(this.privateKey),e+=1):e+=g.sizeVarBytes(this.publicKey),e+=this.script?this.script.getVarSize():1}toWriter(e){let t=0;return this.witness&&(t|=1),this.nested&&(t|=2),e.writeU8(t),this.privateKey?(e.writeVarBytes(this.privateKey),e.writeU8(33===this.publicKey.length?1:0)):e.writeVarBytes(this.publicKey),this.script?e.writeVarBytes(this.script.toRaw()):e.writeVarint(0),e}toRaw(){const e=this.getSize();return this.toWriter(h.write(e)).render()}fromReader(e){const t=e.readU8();this.witness=0!=(1&t),this.nested=0!=(2&t);const r=e.readVarBytes();if(32===r.length){const t=1===e.readU8();this.privateKey=r,this.publicKey=b.publicKeyCreate(r,t)}else this.publicKey=r,o(b.publicKeyVerify(r),"Invalid public key.");const i=e.readVarBytes();return i.length>0&&(this.script=l.fromRaw(i)),this}fromRaw(e){return this.fromReader(h.read(e))}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e){return(new this).fromRaw(e)}static isKeyRing(e){return e instanceof w}}function y(e){return e?e.privateKey?e.privateKey:e.publicKey?e.publicKey:e:e}r.exports=w}],["bledger","/lib/ledger/managed-ledgerbcoin.js",function(e,t,r,i,s,n){"use strict";const{enforce:o}=__browser_require__(2,r),{Device:a}=__browser_require__(121,r),h=__browser_require__(125,r);class c{constructor(e){o(e&&"object"==typeof e,"options","object"),o(e.device instanceof a,"options.device","Device"),this.device=e.device,this.bledger=new h(e)}static fromDevice(e){return new this({device:e})}async tryOpen(){this.device.opened||await this.device.open()}async tryClose(){this.device.opened&&await this.device.close()}async getFirmwareVersion(){let e;await this.tryOpen();try{e=await this.bledger.getFirmwareVersion()}finally{await this.tryClose()}return e}async getOperationMode(){let e;await this.tryOpen();try{e=await this.bledger.getOperationMode()}finally{await this.tryClose()}return e}async setOperationMode(e){let t;await this.tryOpen();try{t=await this.bledger.setOperationMode(e)}finally{await this.tryClose()}return t}async randomBytes(e){let t;await this.tryOpen();try{t=await this.bledger.randomBytes(e)}finally{await this.tryClose()}return t}async getPublicKey(e,t=!1,r=0){let i;await this.tryOpen();try{i=await this.bledger.getPublicKey(e,t,r)}finally{await this.tryClose()}return i}async getFingerPrint(e){let t;await this.tryOpen();try{t=await this.bledger.getFingerPrint(e)}finally{await this.tryClose()}return t}async getTransactionSignatures(e,t,r){let i;await this.tryOpen();try{i=await this.bledger.getTransactionSignatures(e,t,r)}finally{await this.tryClose()}return i}async signTransaction(e,t){let r;await this.tryOpen();try{r=await this.bledger.signTransaction(e,t)}finally{await this.tryClose()}return r}applySignature(e,t,r,i){return this.bledger.applySignature(e,t,r,i)}async signMessage(e,t,r){let i;await this.tryOpen();try{i=await this.bledger.signMessage(e,t,r)}finally{await this.tryClose()}return i}async signMessageLegacy(e,t,r){let i;await this.tryOpen();try{i=await this.bledger.signMessageLegacy(e,t,r)}finally{await this.tryClose()}return i}async verifyMessage(e,t,r){let i;await this.tryOpen();try{i=await this.bledger.verifyMessage(e,t,r)}finally{await this.tryClose()}return i}}c.ManagedLedgerBcoin=c,r.exports=c}],["bsigner","/lib/device/helpers/common.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(2,r),{enforce:a}=o,{BufferMap:h}=__browser_require__(7,r),c=__browser_require__(167,r),u=__browser_require__(133,r),f=__browser_require__(89,r),l=__browser_require__(170,r),{Path:d}=__browser_require__(172,r),{InputData:p}=__browser_require__(375,r),b=e;b.parsePath=function(e){if(d.isPath(e))return e.clone();if(Array.isArray(e))return d.fromList(e);if("string"==typeof e)return d.fromString(e);throw new Error("Could not parse path.")},b.prepareSignOptions=function(e){const t=new h;for(let r of e){p.isInputData(r)||(r=p.fromOptions(r));const e=r.toKey();t.set(e,r)}return t},b.injectMTX=function(e,t){o(e.inputs.length===t.inputs.length,"source and target must be the same.");for(const[r,i]of e.inputs.entries()){const e=t.inputs[r];o(i.prevout.equals(e.prevout),"source and target inputs must be the same."),i.script.fromArray(e.script.toArray()),i.witness.fromArray(e.witness.toArray())}},b.getRedeemScript=function(e,t){o(e.multisig,"Can not get redeem script for non-multisig input.");const r=[];for(const i of e.multisig.pubkeys){const e=u.fromBase58(i.xpub,t).derivePath(i.path.toString());r.push(e.publicKey)}const i=e.multisig.m,s=r.length;return f.fromMultisig(i,s,r)},b.createRing=function(e,t,r,i){a(p.isInputData(e),"inputData","InputData"),a(null!=t&&!0===t._isBuffer,"pubKey","Buffer"),a("object"==typeof r,"network","object"),i&&a(null!=i&&!0===i._isBuffer,"privKey","Buffer");const{coin:s,witness:n}=e;let o=!1;n&&"scripthash"===s.getType()&&(o=!0);let h=null;e.multisig&&(h=b.getRedeemScript(e,r));const u=c.fromOptions({witness:n,nested:o,publicKey:t,privateKey:i});return u.script=h,u},b.applyOtherSignatures=function(e,t,r){const i=l.fromMTX(e);i.view=e.view;for(const[e,s]of i.inputs.entries()){const n=s.prevout.toKey(),a=t.get(n);o(a,`Could not get metadata for input ${n.toString("hex")}.`);const{multisig:h,coin:c}=a;if(h)for(const t of h.pubkeys.values()){if(""===t)continue;const s=Buffer.from(t.signature,"hex"),n=u.fromBase58(t.xpub,r).derivePath(t.path.toString()),o=b.createRing(a,n.publicKey,r);i.template(o),i.applySignature(e,c,o,s,!1)}}const s=i.toMTX();return s.view=i.view,s}}],["bmultisig","/lib/primitives/mtx.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(171,r),{enforce:a}=o,h=__browser_require__(126,r),c=__browser_require__(127,r),u=__browser_require__(89,r),f=__browser_require__(110,r);class l extends h{constructor(e){super(e)}isWitnessCoin(e,t){o(t.ownOutput(e),"Coin does not belong to the ring.");const r=e.script;if(r.isProgram())return!0;const i=r.getScripthash();if(i){const e=t.getRedeem(i);if(!e)throw new Error("redeem script not found.");if(e.isProgram())return!0}return!1}getPrevScript(e,t){const r=e.script,i=r.getScripthash();if(i){const e=t.getRedeem(i);if(!e)return null;if(!e.isProgram())return e.clone();const r=e.getWitnessScripthash();if(r){const e=t.getRedeem(r);return e?e.clone():null}const s=e.getWitnessPubkeyhash();return s?u.fromPubkeyhash(s):null}if(!r.isProgram())return r.clone();const s=r.getWitnessScripthash();if(s){const e=t.getRedeem(s);return e?e.clone():null}const n=r.getWitnessPubkeyhash();return n?u.fromPubkeyhash(n):null}checkSignature(e,t,r,i){const s=this.inputs[e],n=t.value;o(s,"Input does not exist."),a(c.isCoin(t),"coin","Coin"),a(null!=i&&!0===i._isBuffer,"signature","buffer");const h=this.getPrevScript(t,r),u=this.isWitnessCoin(t,r)?1:0,f=r.publicKey;return this.checksig(e,h,n,i,f,u)}getInputSignature(e,t,r,i){const s=this.inputs[e];o(s,"Input does not exist."),o(t,"Input does not exist."),o(r.privateKey,"No private key available.");const n=r.privateKey,a=t.value,h=this.isWitnessCoin(t,r)?1:0,c=this.getPrevScript(t,r);return this.signature(e,c,a,n,i,h)}getSignatures(e,t){o(e.length===this.inputs.length);const r=new Array(this.inputs.length);for(let i=0;i<e.length;i++){const s=e[i];if(!s)continue;const{prevout:n}=this.inputs[i],o=this.view.getOutput(n);if(o){if(!s.ownOutput(o))throw new Error("Input does not belong to the key.");r[i]=this.getInputSignature(i,o,s,t)}}return r}applySignature(e,t,r,i,s){const n=this.inputs[e],a=r.publicKey;o(n,"Input does not exist."),o(t,"No coin passed."),o(i,"No signature passed.");const h=t.value;let c=t.script,f=n.script,l=0,d=!1;if(c.isScripthash()){if(!(c=n.script.getRedeem()))throw new Error("Input has not been templated.");d=!0}if(c.isWitnessScripthash()){if(!(c=n.witness.getRedeem()))throw new Error("Input has not been templated.");f=n.witness,d=!0,l=1}else{const e=c.getWitnessPubkeyhash();e&&(c=u.fromPubkeyhash(e),f=n.witness,d=!1,l=1)}if(s&&!this.checksig(e,c,h,i,a,l))return!1;if(d){const e=f.toStack(),t=e.pop(),s=this.signVector(c,e,i,r);return!!s&&(s.push(t),f.fromStack(s),!0)}const p=f.toStack(),b=this.signVector(c,p,i,r);return!!b&&(f.fromStack(b),!0)}applySignatures(e,t,r){o(t.length===this.inputs.length),o(t.length===e.length);for(let i=0;i<t.length;i++){const s=t[i],n=e[i];if(!s)continue;if(!n)throw new Error("Could not find key.");const{prevout:o}=this.inputs[i],a=this.view.getOutput(o);if(!a)throw new Error("Could not find coin.");if(!n.ownOutput(a))throw new Error("Coin does not belong to the key.");if(this.scriptInput(i,a,n)&&!this.applySignature(i,a,n,s,r))return!1}return!0}checkSignatures(e,t){o(t.length===this.inputs.length);let r=0;for(let i=0;i<t.length;i++){const s=t[i],n=e[i];if(!s)continue;if(!n)throw new Error("Could not find key.");const{prevout:o}=this.inputs[i],a=this.view.getCoin(o);if(!a)throw new Error("Could not find coin.");if(!n.ownOutput(a))throw new Error("Coin does not belong to the key.");this.checkSignature(i,a,n,s)&&(r+=1)}return r}emptyInputs(){for(const e of this.inputs){const{script:t,witness:r}=e;t.length>0&&(e.script=new u),r.length>0&&(e.witness=new f)}}toMTX(){return(new h).inject(this)}static fromMTX(e){return(new this).inject(e)}static isMultisigMTX(e){return e instanceof l}}r.exports=l}],["bsert","/lib/assert.js",function(e,t,r,i,s,n){"use strict";class o extends Error{constructor(e){"string"==typeof e&&(e={message:e}),null!==e&&"object"==typeof e||(e={});let t=null,r="fail",i=Boolean(e.generatedMessage);var s;if(null!=e.message&&(t="string"==typeof(s=e.message)?s:I(s)?m(s):g(s)),"string"==typeof e.operator&&(r=e.operator),null==t){if("fail"===r)t="Assertion failed.";else{t=`${g(e.actual)} ${r} ${g(e.expected)}`}i=!0}super(t);let n=this.constructor;"function"==typeof e.stackStartFunction?n=e.stackStartFunction:"function"==typeof e.stackStartFn&&(n=e.stackStartFn),this.type="AssertionError",this.name="AssertionError [ERR_ASSERTION]",this.code="ERR_ASSERTION",this.generatedMessage=i,this.actual=e.actual,this.expected=e.expected,this.operator=r,Error.captureStackTrace&&Error.captureStackTrace(this,n)}}function a(e,t){if(!e){let r=!1;if(0===arguments.length)t="No value argument passed to `assert()`.",r=!0;else if(null==t)t="Assertion failed.",r=!0;else if(I(t))throw t;throw new o({message:t,actual:e,expected:!0,operator:"==",generatedMessage:r,stackStartFn:a})}}function h(e,t,r){if(!Object.is(e,t)){if(I(r))throw r;throw new o({message:r,actual:e,expected:t,operator:"strictEqual",stackStartFn:h})}}function c(e,t,r){if(Object.is(e,t)){if(I(r))throw r;throw new o({message:r,actual:e,expected:t,operator:"notStrictEqual",stackStartFn:c})}}function u(e,t,r){"string"==typeof t&&(r=t,t=undefined);let i=!1,s=null;b("function"==typeof e,"func","function");try{e()}catch(e){i=!0,s=e}if(i){if(_(s,t,r,u)){let e=!1;throw null==r&&(r="Got unwanted exception.",e=!0),new o({message:r,actual:s,expected:t,operator:"doesNotThrow",generatedMessage:e,stackStartFn:u})}throw s}}async function f(e,t,r){"string"==typeof t&&(r=t,t=undefined);let i=!1,s=null;"function"!=typeof e&&b(A(e),"func","promise");try{A(e)?await e:await e()}catch(e){i=!0,s=e}if(!i){let e=!1;throw null==r&&(r="Missing expected rejection.",e=!0),new o({message:r,actual:undefined,expected:t,operator:"rejects",generatedMessage:e,stackStartFn:f})}if(!_(s,t,r,f))throw s}async function l(e,t,r){"string"==typeof t&&(r=t,t=undefined);let i=!1,s=null;"function"!=typeof e&&b(A(e),"func","promise");try{A(e)?await e:await e()}catch(e){i=!0,s=e}if(i){if(_(s,t,r,l)){let e=!1;throw null==r&&(r="Got unwanted rejection.",e=!0),new o({message:r,actual:undefined,expected:t,operator:"doesNotReject",generatedMessage:e,stackStartFn:l})}throw s}}function d(e,t,r){if(!w(e,t,!1)){if(I(r))throw r;throw new o({message:r,actual:e,expected:t,operator:"deepStrictEqual",stackStartFn:d})}}function p(e,t,r){if(w(e,t,!0)){if(I(r))throw r;throw new o({message:r,actual:e,expected:t,operator:"notDeepStrictEqual",stackStartFn:p})}}function b(e,t,r){if(!e){let e;e=null==t?"Invalid type for parameter.":null==r?`Invalid type for "${t}".`:`"${t}" must be a(n) ${r}.`;const i=new TypeError(e);throw Error.captureStackTrace&&Error.captureStackTrace(i,b),i}}function g(e){switch(typeof e){case"undefined":return"undefined";case"object":return null===e?"null":`[${function(e){const t=function(e){return E(e).slice(8,-1)}(e);if(null==e)return t;if("Object"!==t&&"Error"!==t)return t;let r,i;try{r=e.constructor}catch(e){}if(null==r)return t;try{i=r.name}catch(e){return t}return"string"!=typeof i||0===i.length?t:i}(e)}]`;case"boolean":case"number":return`${e}`;case"string":return e.length>80&&(e=`${e.substring(0,77)}...`),JSON.stringify(e);case"symbol":return m(e);case"function":return`[${function(e){let t;try{t=e.name}catch(e){}return"string"!=typeof t||0===t.length?"Function":`Function: ${t}`}(e)}]`;case"bigint":return`${e}n`;default:return`[${typeof e}]`}}function m(e){try{return String(e)}catch(e){return"Object"}}function _(e,t,r,i){if(null==t)return!0;if(O(t))return t.test(e);if("function"!=typeof t){if(i===u||i===l)throw new TypeError('"expected" must not be an object.');if("object"!=typeof t)throw new TypeError('"expected" must be an object.');let s=!1;if(null==r){r=`Missing expected ${i===f?"rejection":"exception"}.`,s=!0}if(null==e||"object"!=typeof e)throw new o({actual:e,expected:t,message:r,operator:i.name,generatedMessage:s,stackStartFn:i});const n=Object.keys(t);if(I(t)&&n.push("name","message"),0===n.length)throw new TypeError('"expected" may not be an empty object.');for(const a of n){const n=t[a],h=e[a];if(("string"!=typeof h||!O(n)||!n.test(h))&&!(a in e&&w(h,n,!1)))throw new o({actual:e,expected:t,message:r,operator:i.name,generatedMessage:s,stackStartFn:i})}return!0}return t.prototype!==undefined&&e instanceof t||!Error.isPrototypeOf(t)&&!0===t.call({},e)}function w(e,t,r){try{return y(e,t,null)}catch(e){return r}}function y(e,t,r){if(Object.is(e,t))return!0;if(!k(e)||!k(t))return!1;if(E(e)!==E(t))return!1;if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(S(e)&&S(t))return e.equals(t);if(e instanceof Date)return Object.is(e.getTime(),t.getTime());if(O(e))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(I(e)&&e.message!==t.message)return!1;if(function(e){return e instanceof ArrayBuffer}(e)&&(e=new Uint8Array(e),t=new Uint8Array(t)),function(e){return ArrayBuffer.isView(e)}(e)&&!S(e)){if(S(t))return!1;const r=new Uint8Array(e.buffer),i=new Uint8Array(t.buffer);if(r.length!==i.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==i[e])return!1;return!0}if(function(e){return e instanceof Set}(e)){if(e.size!==t.size)return!1;return new Set([...e,...t]).size===e.size}if(r){const i=r.a.get(e);if(null!=i){const e=r.b.get(t);if(null!=e)return i===e}r.p+=1}else r={a:new Map,b:new Map,p:0};r.a.set(e,r.p),r.b.set(t,r.p);const i=function(e,t,r){if(i=e,i instanceof Map){if(e.size!==t.size)return!1;const i=new Set([...e.keys(),...t.keys()]);if(i.size!==e.size)return!1;for(const s of i)if(!y(e.get(s),t.get(s),r))return!1;return!0}var i;if(function(e){return Array.isArray(e)}(e)){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!y(e[i],t[i],r))return!1;return!0}const s=v(e),n=v(t);if(s.length!==n.length)return!1;const o=new Set([...s,...n]);if(o.size!==s.length)return!1;for(const i of o)if(!y(e[i],t[i],r))return!1;return!0}(e,t,r);return r.a.delete(e),r.b.delete(t),i}function v(e){const t=Object.keys(e);if(!Object.getOwnPropertySymbols)return t;if(!Object.getOwnPropertyDescriptor)return t;const r=Object.getOwnPropertySymbols(e);for(const i of r){const r=Object.getOwnPropertyDescriptor(e,i);r&&r.enumerable&&t.push(i)}return t}function E(e){if(e===undefined)return"[object Undefined]";if(null===e)return"[object Null]";try{return Object.prototype.toString.call(e)}catch(e){return"[object Object]"}}function S(e){return k(e)&&"function"==typeof e.writeUInt32LE&&"function"==typeof e.equals}function I(e){return e instanceof Error}function k(e){return e&&"object"==typeof e}function A(e){return e instanceof Promise}function O(e){return e instanceof RegExp}function x(e){if("string"!=typeof e)return!1;switch(e){case"ascii":case"binary":case"base64":case"hex":case"latin1":case"ucs2":case"utf8":case"utf16le":return!0}return!1}function R(e,t,r){if("string"==typeof t){if(!S(e))return null;const{constructor:i}=e;if(!i||"function"!=typeof i.from)return null;if(!x(r))return null;if("hex"===r&&1&t.length)return null;const s=i.from(t,r);return"hex"===r&&s.length!==t.length>>>1?null:s}return t}a.AssertionError=o,a.assert=a,a.strict=a,a.ok=a,a.equal=h,a.notEqual=c,a.strictEqual=h,a.notStrictEqual=c,a.fail=function e(t){let r=!1;if(I(t))throw t;throw null==t&&(t="Assertion failed.",r=!0),new o({message:t,actual:!1,expected:!0,operator:"fail",generatedMessage:r,stackStartFn:e})},a.throws=function e(t,r,i){"string"==typeof r&&(i=r,r=undefined);let s=!1,n=null;b("function"==typeof t,"func","function");try{t()}catch(e){s=!0,n=e}if(!s){let t=!1;throw null==i&&(i="Missing expected exception.",t=!0),new o({message:i,actual:undefined,expected:r,operator:"throws",generatedMessage:t,stackStartFn:e})}if(!_(n,r,i,e))throw n},a.doesNotThrow=u,a.rejects=f,a.doesNotReject=l,a.ifError=function e(t){if(null!=t){let r="ifError got unwanted exception: ";throw"object"==typeof t&&"string"==typeof t.message?0===t.message.length&&t.constructor?r+=t.constructor.name:r+=t.message:r+=g(t),new o({message:r,actual:t,expected:null,operator:"ifError",generatedMessage:!0,stackStartFn:e})}},a.deepEqual=d,a.notDeepEqual=p,a.deepStrictEqual=d,a.notDeepStrictEqual=p,a.bufferEqual=function e(t,r,i,s){if(x(i)||(s=i,i=null),null==i&&(i="hex"),r=R(t,r,i),b(S(t),"actual","buffer"),b(S(r),"expected","buffer"),t!==r&&!t.equals(r)){if(I(s))throw s;throw new o({message:s,actual:t.toString(i),expected:r.toString(i),operator:"bufferEqual",stackStartFn:e})}},a.notBufferEqual=function e(t,r,i,s){if(x(i)||(s=i,i=null),null==i&&(i="hex"),r=R(t,r,i),b(S(t),"actual","buffer"),b(S(r),"expected","buffer"),t===r||t.equals(r)){if(I(s))throw s;throw new o({message:s,actual:t.toString(i),expected:r.toString(i),operator:"notBufferEqual",stackStartFn:e})}},a.enforce=b,a.range=function e(t,r){if(!t){const t=null!=r?`"${r}" is out of range.`:"Parameter is out of range.",i=new RangeError(t);throw Error.captureStackTrace&&Error.captureStackTrace(i,e),i}},r.exports=a}],["bsigner","/lib/path.js",function(e,t,r,i,s,n){"use strict";const{HDPublicKey:o}=__browser_require__(173,r),a=__browser_require__(373,r),h=__browser_require__(2,r),{custom:c}=__browser_require__(62,r),{parsePath:u,bip44:f,HDVersionBytes:l,harden:d}=__browser_require__(1,r);class p{constructor(){this.list=[],this.strict=!0,this.mutable=!0,this.network=null,this.depth=0,this._purpose=null,this._coin=null,this._account=null,this._branch=null,this._index=null}get purpose(){return this._purpose}set purpose(e){null!==e?("string"==typeof e&&(e=b(e)),h(0<=e),this._purpose=e,0===this.depth&&(this.depth=1),this.list[0]=e):this._purpose=null}get coin(){return this._coin}set coin(e){null!==e?("string"==typeof e&&(e=b(e)),h(0<=e),1===this.depth&&(this.depth=2),this._coin=e,this.list[1]=e):this._coin=null}get account(){return this._account}set account(e){null!==e?("string"==typeof e&&(e=b(e)),h(0<=e),this._account=e,2===this.depth&&(this.depth=3),this.list[2]=e):this._account=null}get branch(){return this._branch}set branch(e){null!==e?("string"==typeof e&&(e=b(e)),h(0<=e),this._branch=e,3===this.depth&&(this.depth=4),this.list[3]=e):this._branch=null}get index(){return this._index}set index(e){null!==e?("string"==typeof e&&(e=b(e)),h(0<=e),this._index=e,4===this.depth&&(this.depth=5),this.list[4]=e):this._index=null}fromList(e,t){h(Array.isArray(e)),h(e.length<256),t&&(e=e.map(e=>(e|f.hardened)>>>0));for(const[t,r]of Object.entries(e))switch(h(r>>>0===r),t){case"0":this.purpose=r;break;case"1":this.coin=r;break;case"2":this.account=r;break;case"3":this.branch=r;break;case"4":this.index=r}return this.list=e.slice(),this.depth=this.list.length,this.strict&&5===this.depth&&this.freeze(),this}fromOptions(e){const t=g(e.purpose),r=g(e.account),i=e.network?p.harden(f.coinType[e.network]):g(e.coin);e.network&&(this.network=e.network);const s=g(e.branch),n=g(e.index);e.strict&&(this.strict=e.strict),h(null!==t),h(null!==r),h(null!==i);const o=[t,i,r];return null!==s&&null!==n&&(o.push(s),o.push(n)),this.fromList(o)}clone(){return p.fromOptions({purpose:this.purpose,coin:this.coin,network:this.network,account:this.account,branch:this.branch,index:this.index})}fromIndex(e,t=!0){const r=null!==this.purpose?this.purpose:p.harden(44),i=null!==this.coin?this.coin:p.harden(0),s=t?p.harden(e):e;return this.fromList([r,i,s])}toList(){return this.list}fromString(e){const t=u(e,!0);return this.fromList(t),this}toString(){const e=["m"];for(const[,t]of Object.entries(this.list))h(t>>>0===t),(t&f.hardened)>>>0?e.push((t^f.hardened)+"'"):e.push(t);return e.join("/")}[c](){return`<Path bip${this.purpose^f.hardened}=${this.toString()}>`}fromType(e,t){switch(typeof e){case"string":return a.test(e)?this.fromAccountPublicKey(e):this.fromString(e);case"object":if(Array.isArray(e))return this.fromList(e,t);default:throw new Error("bad type")}}static fromType(e,t){return(new this).fromType(e,t)}static fromString(e){return(new this).fromString(e)}static fromList(e,t){return(new this).fromList(e,t)}static fromIndex(e,t){return(new this).fromIndex(e,t)}static fromOptions(e){return(new this).fromOptions(e)}static fromAccountPublicKey(e){return(new this).fromAccountPublicKey(e)}fromAccountPublicKey(e){if("string"==typeof e&&(e=a.decode(e)),o.isHDPublicKey(e))throw new Error("cannot infer from HDPublicKey");const t=e.slice(0,4),r=l.get(t);h(r,"unknown exteneded key prefix");const i=o.fromRaw(e);return h(3===i.depth),this.fromList([...r,i.childIndex])}freeze(){return this.mutable=!1,Object.freeze(this),this}isMutable(){return this.mutable}push(e,t){if(!this.mutable)throw new Error("cannot mutate finalized path");return"string"==typeof e&&(e=b(e)),h(e>>>0===e),t&&(e=p.harden(e)),this.fromList([...this.list,e])}static harden(e){return d(e)}static isPath(e){return e instanceof p}}function b(e){if("number"==typeof e)return e;if("string"==typeof e){const t=e[e.length-1];if("'"===t||"h"===t){let t=e.slice(0,e.length-1);return t=parseInt(t,10),p.harden(t)}return parseInt(e,10)}throw new Error("unexpected type")}function g(e){return function(e){if("number"==typeof e)return!0;if("string"==typeof e){const t=e[e.length-1];if("'"!==t&&"h"!==t||(e=e.slice(0,e.length-1)),!Number.isNaN(parseInt(e,10)))return!0}return!1}(e)?b(e):function(e){return null!==e&&"object"==typeof e&&"number"==typeof e.index}(e)?function(e){return h("number"==typeof e.index),e.hardened?p.harden(e.index):e.index}(e):null}e.Path=p}],["bcoin","/lib/bcoin-browser.js",function(e,t,r,i,s,n){"use strict";const o=e;o.set=function(e){return o.Network.set(e),o},o.blockchain=__browser_require__(174,r),o.Chain=__browser_require__(194,r),o.ChainEntry=__browser_require__(193,r),o.btc=__browser_require__(208,r),o.Amount=__browser_require__(88,r),o.URI=__browser_require__(209,r),o.client=__browser_require__(210,r),o.NodeClient=__browser_require__(211,r),o.WalletClient=__browser_require__(230,r),o.coins=__browser_require__(231,r),o.Coins=__browser_require__(129,r),o.CoinEntry=__browser_require__(130,r),o.CoinView=__browser_require__(128,r),o.hd=__browser_require__(232,r),o.HDPrivateKey=__browser_require__(249,r),o.HDPublicKey=__browser_require__(133,r),o.Mnemonic=__browser_require__(234,r),o.indexer=__browser_require__(250,r),o.Indexer=__browser_require__(251,r),o.TXIndexer=__browser_require__(256,r),o.AddrIndexer=__browser_require__(258,r),o.mempool=__browser_require__(259,r),o.Fees=__browser_require__(260,r),o.Mempool=__browser_require__(263,r),o.MempoolEntry=__browser_require__(262,r),o.mining=__browser_require__(272,r),o.Miner=__browser_require__(276,r),o.net=__browser_require__(278,r),o.packets=__browser_require__(300,r),o.Peer=__browser_require__(303,r),o.Pool=__browser_require__(306,r),o.node=__browser_require__(311,r),o.Node=__browser_require__(313,r),o.FullNode=__browser_require__(312,r),o.SPVNode=__browser_require__(346,r),o.primitives=__browser_require__(347,r),o.Address=__browser_require__(104,r),o.Block=__browser_require__(183,r),o.Coin=__browser_require__(127,r),o.Headers=__browser_require__(187,r),o.Input=__browser_require__(109,r),o.InvItem=__browser_require__(113,r),o.KeyRing=__browser_require__(167,r),o.MerkleBlock=__browser_require__(186,r),o.MTX=__browser_require__(126,r),o.Outpoint=__browser_require__(111,r),o.Output=__browser_require__(112,r),o.TX=__browser_require__(85,r),o.protocol=__browser_require__(348,r),o.consensus=__browser_require__(17,r),o.Network=__browser_require__(14,r),o.networks=__browser_require__(9,r),o.policy=__browser_require__(96,r),o.script=__browser_require__(163,r),o.Opcode=__browser_require__(102,r),o.Program=__browser_require__(97,r),o.Script=__browser_require__(89,r),o.ScriptNum=__browser_require__(99,r),o.SigCache=__browser_require__(164,r),o.Stack=__browser_require__(103,r),o.Witness=__browser_require__(110,r),o.utils=__browser_require__(21,r),o.util=__browser_require__(20,r),o.wallet=__browser_require__(349,r),o.WalletDB=__browser_require__(365,r),o.workers=__browser_require__(372,r),o.WorkerPool=__browser_require__(317,r),o.pkg=__browser_require__(281,r)}],["bcoin","/lib/blockchain/index.js",function(e,t,r,i,s,n){"use strict";e.ChainDB=__browser_require__(175,r),e.ChainEntry=__browser_require__(193,r),e.Chain=__browser_require__(194,r),e.common=__browser_require__(206,r),e.layout=__browser_require__(182,r)}],["bcoin","/lib/blockchain/chaindb.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(176,r),h=__browser_require__(24,r),c=__browser_require__(139,r),{BufferMap:u}=__browser_require__(86,r),f=__browser_require__(88,r),l=__browser_require__(14,r),d=__browser_require__(128,r),p=__browser_require__(132,r),b=__browser_require__(182,r),g=__browser_require__(17,r),m=__browser_require__(183,r),_=__browser_require__(111,r),w=__browser_require__(193,r),y=__browser_require__(130,r);class v{constructor(e){this.network=l.primary,this.spv=!1,this.witness=!0,this.bip91=!1,this.bip148=!1,this.prune=!1,e&&this.fromOptions(e)}fromOptions(e){return this.network=l.get(e.network),null!=e.spv&&(o("boolean"==typeof e.spv),this.spv=e.spv),null!=e.bip91&&(o("boolean"==typeof e.bip91),this.bip91=e.bip91),null!=e.bip148&&(o("boolean"==typeof e.bip148),this.bip148=e.bip148),null!=e.prune&&(o("boolean"==typeof e.prune),this.prune=e.prune),this}static fromOptions(e){return(new v).fromOptions(e)}toRaw(){const e=h.write(12);let t=0;return this.spv&&(t|=1),this.witness&&(t|=2),this.prune&&(t|=4),this.bip91&&(t|=32),this.bip148&&(t|=64),e.writeU32(this.network.magic),e.writeU32(t),e.writeU32(0),e.render()}fromRaw(e){const t=h.read(e);this.network=l.fromMagic(t.readU32());const r=t.readU32();return this.spv=0!=(1&r),this.witness=0!=(2&r),this.prune=0!=(4&r),this.bip91=0!=(32&r),this.bip148=0!=(64&r),this}static fromRaw(e){return(new v).fromRaw(e)}}class E{constructor(){this.tip=g.ZERO_HASH,this.tx=0,this.coin=0,this.value=0,this.committed=!1}clone(){const e=new E;return e.tip=this.tip,e.tx=this.tx,e.coin=this.coin,e.value=this.value,e}connect(e){this.tx+=e.txs.length}disconnect(e){this.tx-=e.txs.length}add(e){this.coin+=1,this.value+=e.value}spend(e){this.coin-=1,this.value-=e.value}commit(e){return this.tip=e,this.committed=!0,this.toRaw()}toRaw(){const e=h.write(56);return e.writeHash(this.tip),e.writeU64(this.tx),e.writeU64(this.coin),e.writeU64(this.value),e.render()}static fromRaw(e){const t=new E,r=h.read(e);return t.tip=r.readHash(),t.tx=r.readU64(),t.coin=r.readU64(),t.value=r.readU64(),t}}class S{constructor(e){this.network=e,this.bits=[],this.updates=[],this.init()}init(){for(let e=0;e<32;e++)this.bits.push(null);for(const{bit:e}of this.network.deploys)o(!this.bits[e]),this.bits[e]=new u}set(e,t,r){const i=this.bits[e];o(i),i.get(t.hash)!==r&&(i.set(t.hash,r),this.updates.push(new I(e,t.hash,r)))}get(e,t){const r=this.bits[e];o(r);const i=r.get(t.hash);return null==i?-1:i}commit(){this.updates.length=0}drop(){for(const{bit:e,hash:t}of this.updates){const r=this.bits[e];o(r),r.delete(t)}this.updates.length=0}insert(e,t,r){const i=this.bits[e];o(i),i.set(t,r)}}class I{constructor(e,t,r){this.bit=e,this.hash=t,this.state=r}toRaw(){const e=Buffer.allocUnsafe(1);return e[0]=this.state,e}}r.exports=class{constructor(e){this.options=e,this.network=this.options.network,this.logger=this.options.logger.context("chaindb"),this.blocks=this.options.blocks,this.db=a.create(this.options),this.stateCache=new S(this.network),this.state=new E,this.pending=null,this.current=null,this.cacheHash=new c(this.options.entryCache,null,u),this.cacheHeight=new c(this.options.entryCache)}async open(){this.logger.info("Opening ChainDB..."),await this.db.open(),await this.db.verify(b.V.encode(),"chain",6);const e=await this.getState();e?(await this.verifyFlags(e),await this.verifyDeployments(),this.stateCache=await this.getStateCache(),this.state=e,this.logger.info("ChainDB successfully loaded.")):(await this.saveFlags(),await this.saveDeployments(),await this.saveGenesis(),this.logger.info("ChainDB successfully initialized.")),this.logger.info("Chain State: hash=%h tx=%d coin=%d value=%s.",this.state.tip,this.state.tx,this.state.coin,f.btc(this.state.value))}async close(){return this.db.close()}start(){return o(!this.current),o(!this.pending),this.current=this.db.batch(),this.pending=this.state.clone(),this.cacheHash.start(),this.cacheHeight.start(),this.current}put(e,t){o(this.current),this.current.put(e,t)}del(e){o(this.current),this.current.del(e)}batch(){return o(this.current),this.current}drop(){const e=this.current;o(this.current),o(this.pending),this.current=null,this.pending=null,this.cacheHash.drop(),this.cacheHeight.drop(),this.stateCache.drop(),e.clear()}async commit(){o(this.current),o(this.pending);try{await this.current.write()}catch(e){throw this.current=null,this.pending=null,this.cacheHash.drop(),this.cacheHeight.drop(),e}this.pending.committed&&(this.state=this.pending),this.current=null,this.pending=null,this.cacheHash.commit(),this.cacheHeight.commit(),this.stateCache.commit()}hasCache(e){return"number"==typeof e?this.cacheHeight.has(e):(o(null!=e&&!0===e._isBuffer),this.cacheHash.has(e))}getCache(e){return"number"==typeof e?this.cacheHeight.get(e):(o(null!=e&&!0===e._isBuffer),this.cacheHash.get(e))}async getHeight(e){if("number"==typeof e)return e;if(o(null!=e&&!0===e._isBuffer),e.equals(g.ZERO_HASH))return-1;const t=this.cacheHash.get(e);if(t)return t.height;const r=await this.db.get(b.h.encode(e));return r?r.readUInt32LE(0,!0):-1}async getHash(e){if(null!=e&&!0===e._isBuffer)return e;if(o("number"==typeof e),e<0)return null;const t=this.cacheHeight.get(e);return t?t.hash:this.db.get(b.H.encode(e))}async getEntryByHeight(e){if(o("number"==typeof e),e<0)return null;const t=this.cacheHeight.get(e);if(t)return t;const r=await this.db.get(b.H.encode(e));if(!r)return null;const i=this.state,s=await this.getEntryByHash(r);return s?(this.state===i&&this.cacheHeight.set(s.height,s),s):null}async getEntryByHash(e){if(o(null!=e&&!0===e._isBuffer),e.equals(g.ZERO_HASH))return null;const t=this.cacheHash.get(e);if(t)return t;const r=await this.db.get(b.e.encode(e));if(!r)return null;const i=w.fromRaw(r);return this.cacheHash.set(i.hash,i),i}getEntry(e){return"number"==typeof e?this.getEntryByHeight(e):this.getEntryByHash(e)}async hasEntry(e){return-1!==await this.getHeight(e)}async getAncestor(e,t){if(t<0)return null;if(o(t>=0),o(t<=e.height),await this.isMainChain(e))return this.getEntryByHeight(t);for(;e.height!==t;){const t=this.getPrevCache(e);e=t||await this.getPrevious(e),o(e)}return e}getPrevious(e){return this.getEntryByHash(e.prevBlock)}getPrevCache(e){return this.cacheHash.get(e.prevBlock)||null}async getNext(e){const t=await this.getNextHash(e.hash);return t?this.getEntryByHash(t):null}async getNextEntry(e){const t=await this.getEntryByHeight(e.height+1);return t&&t.prevBlock.equals(e.hash)?t:null}getTip(){return this.getEntryByHash(this.state.tip)}async getState(){const e=await this.db.get(b.R.encode());return e?E.fromRaw(e):null}async saveGenesis(){const e=this.network.genesisBlock,t=m.fromRaw(e,"hex"),r=w.fromBlock(t);return this.logger.info("Writing genesis block to ChainDB."),this.save(r,t,new d)}async getFlags(){const e=await this.db.get(b.O.encode());return e?v.fromRaw(e):null}async verifyFlags(e){const t=this.options,r=await this.getFlags();let i=!1,s=!1;if(!r)throw new Error("No flags found.");if(t.network!==r.network)throw new Error("Network mismatch for chain.");if(t.spv&&!r.spv)throw new Error("Cannot retroactively enable SPV.");if(!t.spv&&r.spv)throw new Error("Cannot retroactively disable SPV.");if(!r.witness){if(!t.forceFlags)throw new Error("Cannot retroactively enable witness.");i=!0}if(t.bip91!==r.bip91){if(!t.forceFlags)throw new Error("Cannot retroactively alter BIP91 flag.");i=!0}if(t.bip148!==r.bip148){if(!t.forceFlags)throw new Error("Cannot retroactively alter BIP148 flag.");i=!0}if(t.prune&&!r.prune){if(!t.forceFlags)throw new Error("Cannot retroactively prune.");s=!0}if(!t.prune&&r.prune)throw new Error("Cannot retroactively unprune.");i&&(await this.logger.info("Rewriting chain flags."),await this.saveFlags()),s&&(await this.logger.info("Retroactively pruning chain."),await this.prune(e.tip))}async getStateCache(){const e=new S(this.network),t=await this.db.range({gte:b.v.min(),lte:b.v.max(),values:!0});for(const r of t){const[t,i]=b.v.decode(r.key),s=r.value[0];e.insert(t,i,s)}return e}saveDeployments(){const e=this.db.batch();return this.writeDeployments(e),e.write()}writeDeployments(e){const t=h.write(1+21*this.network.deploys.length);t.writeU8(this.network.deploys.length);for(const e of this.network.deploys)t.writeU8(e.bit),t.writeI64(e.startTime),t.writeU32(e.timeout),t.writeI32(e.threshold),t.writeI32(e.window);e.put(b.D.encode(),t.render())}async checkDeployments(){const e=await this.db.get(b.D.encode());o(e,"No deployment table found.");const t=h.read(e),r=t.readU8(),i=[];for(let e=0;e<r;e++){const e=t.readU8(),r=t.readI64(),s=t.readU32(),n=t.readI32(),o=t.readI32(),a=this.network.byBit(e);a&&r===a.startTime&&s===a.timeout&&n===a.threshold&&o===a.window||i.push(e)}return i}async verifyDeployments(){let e;try{e=await this.checkDeployments()}catch(t){if("EncodingError"!==t.type)throw t;e=[];for(let t=0;t<32;t++)e.push(t)}if(0===e.length)return!0;const t=this.db.batch();for(const r of e)this.logger.warning("Versionbit deployment params modified."),this.logger.warning("Invalidating cache for bit %d.",r),await this.invalidateCache(r,t);return this.writeDeployments(t),await t.write(),!1}async invalidateCache(e,t){const r=await this.db.keys({gte:b.v.min(e),lte:b.v.max(e)});for(const e of r)t.del(e)}async prune(){const e=this.options,t=this.network.block.keepBlocks,r=this.network.block.pruneAfterHeight;if((await this.getFlags()).prune)throw new Error("Chain is already pruned.");const i=await this.getHeight(this.state.tip);if(i<=r+t)return!1;const s=i-t;for(let e=r+1;e<=s;e++){const t=await this.getHash(e);if(!t)throw new Error(`Cannot find hash for ${e}.`);await this.blocks.pruneUndo(t),await this.blocks.prune(t)}try{e.prune=!0;const t=v.fromOptions(e);o(t.prune),await this.db.put(b.O.encode(),t.toRaw())}catch(t){throw e.prune=!1,t}return!0}async getNextHash(e){return this.db.get(b.n.encode(e))}async isMainHash(e){if(o(null!=e&&!0===e._isBuffer),e.equals(g.ZERO_HASH))return!1;if(e.equals(this.network.genesis.hash))return!0;if(e.equals(this.state.tip))return!0;const t=this.cacheHash.get(e);if(t){const r=this.cacheHeight.get(t.height);if(r)return r.hash.equals(e)}return!!await this.getNextHash(e)}async isMainChain(e){if(e.isGenesis())return!0;if(e.hash.equals(this.state.tip))return!0;const t=this.getCache(e.height);return t?e.hash.equals(t.hash):!!await this.getNextHash(e.hash)}async getHashes(e=-1,t=-1){return-1===e&&(e=0),-1===t&&(t>>>=0),o(e>>>0===e),o(t>>>0===t),this.db.values({gte:b.H.min(e),lte:b.H.max(t)})}async getEntries(){return this.db.values({gte:b.e.min(),lte:b.e.max(),parse:e=>w.fromRaw(e)})}async getTips(){return this.db.keys({gte:b.p.min(),lte:b.p.max(),parse:e=>b.p.decode(e)[0]})}async readCoin(e){if(this.options.spv)return null;const{hash:t,index:r}=e,i=await this.db.get(b.c.encode(t,r));return i?y.fromRaw(i):null}async getCoin(e,t){const r=new _(e,t),i=await this.readCoin(r);return i?i.toCoin(r):null}async hasCoins(e){for(let t=0;t<e.outputs.length;t++){const r=b.c.encode(e.hash(),t);if(await this.db.has(r))return!0}return!1}async getCoinView(e){const t=new d;for(const{prevout:r}of e.inputs){const e=await this.readCoin(r);e&&t.addEntry(r,e)}return t}async getUndoCoins(e){const t=await this.blocks.readUndo(e);return t?p.fromRaw(t):new p}async getBlock(e){const t=await this.getRawBlock(e);return t?m.fromRaw(t):null}async getRawBlock(e){if(this.options.spv)return null;const t=await this.getHash(e);return t?this.blocks.read(t):null}async getBlockView(e){const t=new d,r=await this.getUndoCoins(e.hash());if(r.isEmpty())return t;for(let i=e.txs.length-1;i>0;i--){const s=e.txs[i];for(let e=s.inputs.length-1;e>=0;e--){const i=s.inputs[e];r.apply(t,i.prevout)}}return o(r.isEmpty(),"Undo coins data inconsistency."),t}async scan(e,t,r){null==e&&(e=this.network.genesis.hash),"number"==typeof e?this.logger.info("Scanning from height %d.",e):this.logger.info("Scanning from block %h.",e);let i=await this.getEntry(e);if(!i)return;if(!await this.isMainChain(i))throw new Error("Cannot rescan an alternate chain.");let s=0;for(;i;){const e=await this.getBlock(i.hash),n=[];if(s+=1,e){this.logger.info("Scanning block %h (%d).",i.hash,i.height);for(let r=0;r<e.txs.length;r++){const i=e.txs[r];let s=!1;for(let e=0;e<i.outputs.length;e++){const r=i.outputs[e].getHash();if(r&&t.test(r)){const r=_.fromTX(i,e);t.add(r.toRaw()),s=!0}}if(s)n.push(i);else if(0!==r)for(const{prevout:e}of i.inputs)if(t.test(e.toRaw())){n.push(i);break}}await r(i,n),i=await this.getNext(i)}else{if(!this.options.spv&&!this.options.prune)throw new Error("Block not found.");await r(i,n),i=await this.getNext(i)}}this.logger.info("Finished scanning %d blocks.",s)}async save(e,t,r){this.start();try{await this._save(e,t,r)}catch(e){throw this.drop(),e}await this.commit()}async _save(e,t,r){const i=t.hash();this.put(b.h.encode(i),function(e){const t=Buffer.allocUnsafe(4);return t.writeUInt32LE(e,0,!0),t}(e.height)),this.put(b.e.encode(i),e.toRaw()),this.cacheHash.push(e.hash,e),this.del(b.p.encode(e.prevBlock)),this.put(b.p.encode(i),null),this.saveUpdates(),r?(e.isGenesis()||this.put(b.n.encode(e.prevBlock),i),this.put(b.H.encode(e.height),i),this.cacheHeight.push(e.height,e),await this.saveBlock(e,t,r),this.put(b.R.encode(),this.pending.commit(i))):await this.saveBlock(e,t)}async reconnect(e,t,r){this.start();try{await this._reconnect(e,t,r)}catch(e){throw this.drop(),e}await this.commit()}async _reconnect(e,t,r){const i=t.hash();o(!e.isGenesis()),this.put(b.n.encode(e.prevBlock),i),this.put(b.H.encode(e.height),i),this.cacheHeight.push(e.height,e),this.cacheHash.push(e.hash,e),this.saveUpdates(),await this.connectBlock(e,t,r),this.put(b.R.encode(),this.pending.commit(i))}async disconnect(e,t){let r;this.start();try{r=await this._disconnect(e,t)}catch(e){throw this.drop(),e}return await this.commit(),r}async _disconnect(e,t){this.del(b.n.encode(e.prevBlock)),this.del(b.H.encode(e.height)),this.cacheHeight.unpush(e.height),this.saveUpdates();const r=await this.disconnectBlock(e,t);return this.put(b.R.encode(),this.pending.commit(e.prevBlock)),r}saveUpdates(){const e=this.stateCache.updates;if(0!==e.length){this.logger.info("Saving %d state cache updates.",e.length);for(const t of e){const{bit:e,hash:r}=t;this.put(b.v.encode(e,r),t.toRaw())}}}async reset(e){const t=await this.getEntry(e);if(!t)throw new Error("Block not found.");if(!await this.isMainChain(t))throw new Error("Cannot reset on alternate chain.");if(this.options.prune)throw new Error("Cannot reset when pruned.");await this.removeChains();let r=await this.getTip();for(o(r),this.logger.debug("Resetting main chain to: %h",t.hash);;){if(this.start(),r.hash.equals(t.hash)){this.put(b.R.encode(),this.pending.commit(r.hash)),await this.commit();break}o(!r.isGenesis()),this.del(b.p.encode(r.hash)),this.put(b.p.encode(r.prevBlock),null),this.del(b.H.encode(r.height)),this.del(b.h.encode(r.hash)),this.del(b.e.encode(r.hash)),this.del(b.n.encode(r.prevBlock));try{await this.removeBlock(r)}catch(e){throw this.drop(),e}this.put(b.R.encode(),this.pending.commit(r.prevBlock)),await this.commit(),this.cacheHeight.remove(r.height),this.cacheHash.remove(r.hash),r=await this.getPrevious(r),o(r)}return r}async removeChains(){const e=await this.getTips();this.start();try{for(const t of e)await this._removeChain(t)}catch(e){throw this.drop(),e}await this.commit()}async _removeChain(e){let t=await this.getEntryByHash(e);if(!t)throw new Error("Alternate chain tip not found.");for(this.logger.debug("Removing alternate chain: %h.",t.hash);!await this.isMainChain(t);)o(!t.isGenesis()),this.del(b.p.encode(t.hash)),this.del(b.h.encode(t.hash)),this.del(b.e.encode(t.hash)),this.cacheHash.unpush(t.hash),t=await this.getPrevious(t),o(t)}async saveBlock(e,t,r){const i=t.hash();this.options.spv||(await this.blocks.write(i,t.toRaw()),r&&await this.connectBlock(e,t,r))}async removeBlock(e){if(this.options.spv)return new d;const t=await this.getBlock(e.hash);if(!t)throw new Error("Block not found.");return this.disconnectBlock(e,t)}saveView(e){for(const[t,r]of e.map)for(const[e,i]of r.outputs){if(i.spent){this.del(b.c.encode(t,e));continue}const r=i.toRaw();this.put(b.c.encode(t,e),r)}}async connectBlock(e,t,r){if(this.options.spv)return undefined;const i=t.hash();if(this.pending.connect(t),e.isGenesis())return undefined;for(let e=0;e<t.txs.length;e++){const i=t.txs[e];if(e>0)for(const{prevout:e}of i.inputs)this.pending.spend(r.getOutput(e));for(const e of i.outputs)e.script.isUnspendable()||this.pending.add(e)}return this.saveView(r),r.undo.isEmpty()||await this.blocks.writeUndo(i,r.undo.commit()),this.pruneBlock(e)}async disconnectBlock(e,t){const r=new d;if(this.options.spv)return r;const i=t.hash(),s=await this.getUndoCoins(i);this.pending.disconnect(t);for(let i=t.txs.length-1;i>=0;i--){const n=t.txs[i];if(i>0)for(let e=n.inputs.length-1;e>=0;e--){const{prevout:t}=n.inputs[e];s.apply(r,t),this.pending.add(r.getOutput(t))}r.removeTX(n,e.height);for(let e=n.outputs.length-1;e>=0;e--){const t=n.outputs[e];t.script.isUnspendable()||this.pending.spend(t)}}return o(s.isEmpty(),"Undo coins data inconsistency."),this.saveView(r),r}async pruneBlock(e){if(this.options.spv)return;if(!this.options.prune)return;const t=e.height-this.network.block.keepBlocks;if(t<=this.network.block.pruneAfterHeight)return;const r=await this.getHash(t);r&&(await this.blocks.pruneUndo(r),await this.blocks.prune(r))}saveFlags(){const e=v.fromOptions(this.options),t=this.db.batch();return t.put(b.O.encode(),e.toRaw()),t.write()}}}],["bdb","/lib/bdb.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(177,r),h=__browser_require__(178,r),c=__browser_require__(179,r),u=__browser_require__(181,r);e.DB=a,e.Key=h,e.create=(e=>{null==e&&(e={}),"string"==typeof e&&(e={location:e}),o(e&&"object"==typeof e);const{memory:t,location:r}=e;return t?new a(c,"memory",e):new a(u,r,e)}),e.key=((e,t)=>new h(e,t))}],["bdb","/lib/db.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=Buffer.alloc(1,0),h=Buffer.alloc(255,255);class c{constructor(e,t,r){o("function"==typeof e,"Backend is required."),o("string"==typeof t,"Filename is required."),this.options=new p(r),this.backend=e,this.location=t,this.loading=!1,this.closing=!1,this.loaded=!1,this.binding=null,this.leveldown=!1,this.init()}init(){const e=this.backend;e.leveldown?(this.binding=new e(this.location),this.leveldown=!0):this.binding=new e(this.location)}async open(){if(this.loaded)throw new Error("Database is already open.");o(!this.loading),o(!this.closing);try{this.loading=!0,await this.load()}finally{this.loading=!1}this.loaded=!0}async close(){if(!this.loaded)throw new Error("Database is already closed.");o(!this.loading),o(!this.closing);try{this.loaded=!1,this.closing=!0,await this.unload()}catch(e){throw this.loaded=!0,e}finally{this.closing=!1}}load(){return new Promise((e,t)=>{this.binding.open(this.options,g(e,t))})}unload(){return new Promise((e,t)=>{this.binding.close(g(e,t))})}destroy(){return new Promise((e,t)=>{this.loaded||this.closing?t(new Error("Cannot destroy open database.")):this.backend.destroy?this.backend.destroy(this.location,g(e,t)):t(new Error("Cannot destroy (method not available)."))})}repair(){return new Promise((e,t)=>{this.loaded||this.closing?t(new Error("Cannot repair open database.")):this.backend.repair?this.backend.repair(this.location,g(e,t)):t(new Error("Cannot repair (method not available)."))})}backup(e){return this.binding.backup?new Promise((t,r)=>{this.loaded?this.binding.backup(e,g(t,r)):r(new Error("Database is closed."))}):this.clone(e)}bucket(e){return new f(this,e)}root(){return this}child(e){return this.bucket(e)}wrap(e){return e.root()}get(e){return new Promise((t,r)=>{this.loaded?null!=e&&!0===e._isBuffer?this.binding.get(e,(e,i)=>{if(e)return(e=e)&&(e.notFound||"NotFoundError"===e.type||/not\s*found/i.test(e.message))?void t(null):void r(e);t(i)}):r(new Error("Key must be a buffer.")):r(new Error("Database is closed."))});var t}put(e,t){return null==t&&(t=a),new Promise((r,i)=>{this.loaded?null!=e&&!0===e._isBuffer&&null!=t&&!0===t._isBuffer?this.binding.put(e,t,g(r,i)):i(new Error("Key and value must be buffers.")):i(new Error("Database is closed."))})}del(e){return new Promise((t,r)=>{this.loaded?null!=e&&!0===e._isBuffer?this.binding.del(e,g(t,r)):r(new Error("Key must be a buffer.")):r(new Error("Database is closed."))})}batch(){if(!this.loaded)throw new Error("Database is closed.");return new u(this.binding.batch())}iterator(e){if(!this.loaded)throw new Error("Database is closed.");return new l(this,e)}getProperty(e){if(!this.loaded)throw new Error("Database is closed.");return this.binding.getProperty?this.binding.getProperty(e):""}approximateSize(e,t){return null==e&&(e=a),null==t&&(t=h),new Promise((r,i)=>{this.loaded?this.binding.approximateSize?null!=e&&!0===e._isBuffer&&null!=t&&!0===t._isBuffer?this.binding.approximateSize(e,t,g(r,i)):i(new Error("Start and end must be buffers.")):i(new Error("Cannot get size.")):i(new Error("Database is closed."))})}compactRange(e,t){return null==e&&(e=a),null==t&&(t=h),new Promise((r,i)=>{this.loaded?this.binding.compactRange?null!=e&&!0===e._isBuffer&&null!=t&&!0===t._isBuffer?this.binding.compactRange(e,t,g(r,i)):i(new Error("Start and end must be buffers.")):r():i(new Error("Database is closed."))})}async has(e){return null!=await this.get(e)}async range(e){return null==e&&(e={}),this.iterator({gt:e.gt,lt:e.lt,gte:e.gte,lte:e.lte,limit:e.limit,reverse:e.reverse,keys:!0,values:!0}).range(e.parse)}async keys(e){return null==e&&(e={}),this.iterator({gt:e.gt,lt:e.lt,gte:e.gte,lte:e.lte,limit:e.limit,reverse:e.reverse,keys:!0,values:!1}).keys(e.parse)}async values(e){return null==e&&(e={}),this.iterator({gt:e.gt,lt:e.lt,gte:e.gte,lte:e.lte,limit:e.limit,reverse:e.reverse,keys:!1,values:!0}).values(e.parse)}async dump(){const e=Object.create(null),t=await this.range();for(const r of t){const t=r.key.toString("hex"),i=r.value.toString("hex");e[t]=i}return e}async verify(e,t,r){o("string"==typeof t),o(r>>>0===r);const i=await this.get(e);if(!i){const i=Buffer.allocUnsafe(t.length+4);i.write(t,0,"ascii"),i.writeUInt32LE(r,t.length);const s=this.batch();return s.put(e,i),void await s.write()}if(i.length!==t.length+4)throw new Error(w(t));if(i.toString("ascii",0,t.length)!==t)throw new Error(w(t));if(i.readUInt32LE(t.length)!==r)throw new Error(w(t))}async clone(e){if(!this.loaded)throw new Error("Database is closed.");const t=new p(this.options);t.createIfMissing=!0,t.errorIfExists=!0;const r=new c(this.backend,e,t);await r.open();try{await this.cloneTo(r)}finally{await r.close()}}async cloneTo(e){const t=this.iterator({keys:!0,values:!0});let r=e.batch(),i=0;return await t.each(async(t,s)=>{r.put(t,s),i+=t.length+80,(i+=s.length+80)>=256<<20&&(i=0,await r.write(),r=e.batch())}),r.write()}}class u{constructor(e,t){this.binding=e,this.prefix=t||null}bucket(e){return new u(this.binding,e)}root(){return this.bucket(null)}child(e){return this.bucket(_(this.prefix,e))}wrap(e){return e.bucket(this.prefix)}put(e,t){return null==t&&(t=a),o(null!=t&&!0===t._isBuffer,"Value must be a buffer."),this.binding.put(_(this.prefix,e),t),this}del(e){return this.binding.del(_(this.prefix,e)),this}write(){return new Promise((e,t)=>{this.binding.write(g(e,t))})}clear(){return this.binding.clear(),this}}class f{constructor(e,t){this.db=e,o(null==t||null!=t&&!0===t._isBuffer,"Prefix must be a buffer."),this.prefix=t||null}bucket(e){return new f(this.db,e)}root(){return this.bucket(null)}child(e){return this.bucket(_(this.prefix,e))}wrap(e){return e.bucket(this.prefix)}batch(){return new u(this.db.binding.batch(),this.prefix)}has(e){return this.db.has(_(this.prefix,e))}get(e){return this.db.get(_(this.prefix,e))}iterator(e){return new l(this.db,e,this.prefix)}async range(e){return null==e&&(e={}),this.iterator({gt:e.gt,lt:e.lt,gte:e.gte,lte:e.lte,limit:e.limit,reverse:e.reverse,keys:!0,values:!0}).range(e.parse)}async keys(e){return null==e&&(e={}),this.iterator({gt:e.gt,lt:e.lt,gte:e.gte,lte:e.lte,limit:e.limit,reverse:e.reverse,keys:!0,values:!1}).keys(e.parse)}async values(e){return null==e&&(e={}),this.iterator({gt:e.gt,lt:e.lt,gte:e.gte,lte:e.lte,limit:e.limit,reverse:e.reverse,keys:!1,values:!0}).values(e.parse)}}class l{constructor(e,t,r){this.db=e,this.options=t||null,this.prefix=r||null,this.binding=null,this.cache=[],this.finished=!1,this.key=null,this.value=null}start(){if(this.binding)return;const e=new b(this.options);null!=this.prefix&&(o(null!=this.prefix&&!0===this.prefix._isBuffer),null!=e.gte&&(e.gte=_(this.prefix,e.gte)),null!=e.lte&&(e.lte=_(this.prefix,e.lte)),null!=e.gt&&(e.gt=_(this.prefix,e.gt)),null!=e.lt&&(e.lt=_(this.prefix,e.lt)),null==e.gt&&null==e.gte&&(e.gt=this.prefix),null==e.lt&&null==e.lte&&(e.lt=function(e){if(0===e.length)return null;const t=Buffer.from(e);let r=t.length-1;for(;r>=0;r--){if(255!==t[r]){t[r]+=1;break}t[r]=0}return-1===r?null:t}(this.prefix))),this.binding=this.db.binding.iterator(e)}bucket(e){return o(!this.binding),new l(this.db,this.options,e)}root(){return this.bucket(null)}child(e){return this.bucket(_(this.prefix,e))}wrap(e){return e.bucket(this.prefix)}cleanup(){this.cache=[],this.finished=!0,this.key=null,this.value=null}async each(e){for(o("function"==typeof e);!this.finished;)for(await this.read();this.cache.length>0;){const t=m(this.prefix,this.cache.pop()),r=this.cache.pop();let i=null;try{(i=e(t,r))instanceof Promise&&(i=await i)}catch(e){throw await this.end(),e}if(!1===i)return this.end()}return this.end()}async next(){return this.finished||0===this.cache.length&&await this.read(),this.cache.length>0?(this.key=m(this.prefix,this.cache.pop()),this.value=this.cache.pop(),!0):(o(this.finished),this.cleanup(),!1)}_read(e){this.db.leveldown?this.binding.next(e):this.binding.next((t,r,i)=>{t?e(t):r!==undefined||i!==undefined?e(null,[i,r],!1):e(null,[],!0)})}read(){return new Promise((e,t)=>{if(!this.binding)try{this.start()}catch(e){return void t(e)}this._read((r,i,s)=>{if(r)return this.cleanup(),void this.binding.end(()=>t(r));this.cache=i,this.finished=s,e()})})}seek(e){return o(null!=e&&!0===e._isBuffer,"Key must be a buffer."),this.start(),this.binding.seek(e),this}end(){return new Promise((e,t)=>{if(!this.binding)try{this.start()}catch(e){return void t(e)}this.cleanup(),this.binding.end(g(e,t))})}async range(e){o(!e||"function"==typeof e);const t=[];return await this.each((r,i)=>{if(e){const s=e(r,i);null!=s&&t.push(s)}else t.push(new d(r,i))}),t}async keys(e){o(!e||"function"==typeof e);const t=[];return await this.each((r,i)=>{e&&(r=e(r)),null!=r&&t.push(r)}),t}async values(e){o(!e||"function"==typeof e);const t=[];return await this.each((r,i)=>{e&&(i=e(i)),null!=i&&t.push(i)}),t}}class d{constructor(e,t){this.key=e,this.value=t}}class p{constructor(e){this.createIfMissing=!0,this.errorIfExists=!1,this.compression=!0,this.cacheSize=8<<20,this.writeBufferSize=4<<20,this.maxOpenFiles=64,this.maxFileSize=2<<20,this.paranoidChecks=!1,this.memory=!1,e&&this.fromOptions(e)}fromOptions(e){return o(e,"Options are required."),null!=e.createIfMissing&&(o("boolean"==typeof e.createIfMissing,"`createIfMissing` must be a boolean."),this.createIfMissing=e.createIfMissing),null!=e.errorIfExists&&(o("boolean"==typeof e.errorIfExists,"`errorIfExists` must be a boolean."),this.errorIfExists=e.errorIfExists),null!=e.compression&&(o("boolean"==typeof e.compression,"`compression` must be a boolean."),this.compression=e.compression),null!=e.cacheSize&&(o("number"==typeof e.cacheSize,"`cacheSize` must be a number."),o(e.cacheSize>=0),this.cacheSize=Math.floor(e.cacheSize/2),this.writeBufferSize=Math.floor(e.cacheSize/4)),null!=e.maxFiles&&(o("number"==typeof e.maxFiles,"`maxFiles` must be a number."),o(e.maxFiles>=0),this.maxOpenFiles=e.maxFiles),null!=e.maxFileSize&&(o("number"==typeof e.maxFileSize,"`maxFileSize` must be a number."),o(e.maxFileSize>=0),this.maxFileSize=e.maxFileSize),null!=e.paranoidChecks&&(o("boolean"==typeof e.paranoidChecks,"`paranoidChecks` must be a boolean."),this.paranoidChecks=e.paranoidChecks),null!=e.memory&&(o("boolean"==typeof e.memory,"`memory` must be a boolean."),this.memory=e.memory),this}}class b{constructor(e){this.gte=null,this.lte=null,this.gt=null,this.lt=null,this.keys=!0,this.values=!1,this.fillCache=!1,this.keyAsBuffer=!0,this.valueAsBuffer=!0,this.reverse=!1,this.highWaterMark=16384,e&&this.fromOptions(e)}fromOptions(e){if(o(e,"Options are required."),null!=e.gte&&(o(null!=e.gte&&!0===e.gte._isBuffer,"`gte` must be a buffer."),this.gte=e.gte),null!=e.lte&&(o(null!=e.lte&&!0===e.lte._isBuffer,"`lte` must be a buffer."),this.lte=e.lte),null!=e.gt&&(o(null!=e.gt&&!0===e.gt._isBuffer,"`gt` must be a buffer."),this.gt=e.gt),null!=e.lt&&(o(null!=e.lt&&!0===e.lt._isBuffer,"`lt` must be a buffer."),this.lt=e.lt),null!=e.keys&&(o("boolean"==typeof e.keys),this.keys=e.keys),null!=e.values&&(o("boolean"==typeof e.values),this.values=e.values),null!=e.fillCache&&(o("boolean"==typeof e.fillCache),this.fillCache=e.fillCache),null!=e.reverse&&(o("boolean"==typeof e.reverse),this.reverse=e.reverse),null!=e.limit&&(o("number"==typeof e.limit),o(e.limit>=0),this.limit=e.limit),!this.keys&&!this.values)throw new Error("Keys and/or values must be chosen.");return this}}function g(e,t){return function(r,i){r?t(r):e(i)}}function m(e,t){return null==t?t:(o(null!=t&&!0===t._isBuffer,"Key must be a buffer."),0===t.length?t:null==e?t:(o(null!=e&&!0===e._isBuffer),o(t.length>=e.length),t.slice(e.length)))}function _(e,t){if(o(null!=t&&!0===t._isBuffer,"Key must be a buffer."),null==e)return t;o(null!=e&&!0===e._isBuffer);const r=Buffer.allocUnsafe(e.length+t.length);return e.copy(r,0),t.copy(r,e.length),r}function w(e){return`Database version mismatch for database: "${e}".`+" Please run a data migration before opening."}r.exports=c}],["bdb","/lib/key.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=Object.create(null),h=Buffer.alloc(0),c=Buffer.alloc(255,255),u={char:{min:"\0",max:"",dynamic:!1,size:e=>1,read:(e,t)=>(m(t+1<=e.length),String.fromCharCode(e[t])),write:(e,t,r)=>(_("string"==typeof t),_(1===t.length),m(r+1<=e.length),e[r]=t.charCodeAt(0),1)},uint8:{min:0,max:255,dynamic:!1,size:e=>1,read:(e,t)=>(m(t+1<=e.length),e[t]),write:(e,t,r)=>(_((255&t)===t),m(r+1<=e.length),e[r]=t,1)},uint16:{min:0,max:65535,dynamic:!1,size:e=>2,read(e,t){return m(t+2<=e.length),i=t,256*(r=e)[i++]+r[i];var r,i},write(e,t,r){var i,s,n;return _((65535&t)===t),m(r+2<=e.length),s=t,n=r,(i=e)[n++]=s>>>8,i[n++]=s,2}},uint32:{min:0,max:4294967295,dynamic:!1,size:e=>4,read(e,t){return m(t+4<=e.length),i=t,16777216*(r=e)[i++]+65536*r[i++]+256*r[i++]+r[i];var r,i},write(e,t,r){var i,s,n;return _(t>>>0===t),m(r+4<=e.length),s=t,(i=e)[(n=r)+3]=s,s>>>=8,i[n+2]=s,s>>>=8,i[n+1]=s,s>>>=8,i[n]=s,4}},buffer:{min:h,max:c,dynamic:!0,size:e=>(function(e){return _(null!=e&&!0===e._isBuffer),1+e.length})(e),read:(e,t)=>(function(e,t){return m(t+1<=e.length),m(t+1+e[t]<=e.length),e.slice(t+1,t+1+e[t])})(e,t),write:(e,t,r)=>(function(e,t,r,i){return _(null!=t&&!0===t._isBuffer),m(t.length<=255),m(r+1<=e.length),e[r]=t.length,m(t.copy(e,r+1)===t.length),1+t.length})(e,t,r)},hex:{min:h.toString("hex"),max:c.toString("hex"),dynamic:!0,size:e=>l(e,"hex"),read:(e,t)=>d(e,t,"hex"),write:(e,t,r)=>p(e,t,r,"hex")},ascii:{min:h.toString("binary"),max:c.toString("binary"),dynamic:!0,size:e=>l(e,"binary"),read:(e,t)=>d(e,t,"binary"),write:(e,t,r)=>p(e,t,r,"binary")},utf8:{min:h.toString("utf8"),max:c.toString("utf8"),dynamic:!0,size:e=>l(e,"utf8"),read:(e,t)=>d(e,t,"utf8"),write:(e,t,r)=>p(e,t,r,"utf8")},hash160:{min:Buffer.alloc(20,0),max:Buffer.alloc(20,255),dynamic:!1,size:e=>20,read:(e,t)=>(m(t+20<=e.length),e.slice(t,t+20)),write:(e,t,r)=>(_(null!=t&&!0===t._isBuffer),_(20===t.copy(e,r)),20)},hash256:{min:Buffer.alloc(32,0),max:Buffer.alloc(32,255),dynamic:!1,size:e=>32,read:(e,t)=>(m(t+32<=e.length),e.slice(t,t+32)),write:(e,t,r)=>(_(null!=t&&!0===t._isBuffer),_(32===t.copy(e,r)),32)},hash:{min:Buffer.alloc(1,0),max:Buffer.alloc(64,255),dynamic:!0,size:e=>(_(null!=e&&!0===e._isBuffer),1+e.length),read:(e,t)=>(m(t+1<=e.length),m(e[t]>=1&&e[t]<=64),m(t+1+e[t]<=e.length),e.slice(t+1,t+1+e[t])),write:(e,t,r)=>(_(null!=t&&!0===t._isBuffer),_(t.length>=1&&t.length<=64),m(r+1<=e.length),e[r]=t.length,_(t.copy(e,r+1)===t.length),1+t.length)},hhash160:{min:Buffer.alloc(20,0),max:Buffer.alloc(20,255),dynamic:!1,size:e=>20,read:(e,t)=>(m(t+20<=e.length),e.toString("hex",t,t+20)),write:(e,t,r)=>(_(20===g(e,t,r)),20)},hhash256:{min:Buffer.alloc(32,0),max:Buffer.alloc(32,255),dynamic:!1,size:e=>32,read:(e,t)=>(m(t+32<=e.length),e.toString("hex",t,t+32)),write:(e,t,r)=>(_(32===g(e,t,r)),32)},hhash:{min:Buffer.alloc(1,0),max:Buffer.alloc(64,255),dynamic:!0,size:e=>1+b(e),read:(e,t)=>(m(t+1<=e.length),m(e[t]>=1&&e[t]<=64),m(t+1+e[t]<=e.length),e.toString("hex",t+1,t+1+e[t])),write(e,t,r){const i=b(t);return _(i>=1&&i<=64),m(r+1<=e.length),e[r]=i,_(g(e,t,r+1)===i),1+i}}};class f{constructor(e=[]){o(Array.isArray(e)),this.ops=[],this.size=0,this.index=-1,this.init(e)}static create(e){const t=e?e.join(":"):"",r=a[t];if(r)return r;const i=new f(e);return a[t]=i,i}init(e){for(let t=0;t<e.length;t++){const r=e[t];if(o("string"==typeof r),!u.hasOwnProperty(r))throw new Error(`Invalid type name: ${r}.`);const i=u[r];i.dynamic?-1===this.index&&(this.index=t):this.size+=i.size(),this.ops.push(i)}}getSize(e){o(e.length===this.ops.length);let t=1+this.size;if(-1===this.index)return t;for(let r=this.index;r<e.length;r++){const i=this.ops[r],s=e[r];i.dynamic&&(t+=i.size(s))}return t}encode(e,t){if(o(Array.isArray(t)),t.length!==this.ops.length)throw new Error("Wrong number of arguments passed to key.");const r=this.getSize(t),i=Buffer.allocUnsafe(r);i[0]=e;let s=1;for(let e=0;e<this.ops.length;e++){const r=this.ops[e],n=t[e];s+=r.write(i,n,s)}return i}decode(e,t){if(o(null!=t&&!0===t._isBuffer),0===this.ops.length)return t;if(0===t.length||t[0]!==e)throw new Error("Key prefix mismatch.");const r=[];let i=1;for(const e of this.ops){const s=e.read(t,i);i+=e.size(s),r.push(s)}return r}min(e,t){for(let e=t.length;e<this.ops.length;e++){const r=this.ops[e];t.push(r.min)}return this.encode(e,t)}max(e,t){for(let e=t.length;e<this.ops.length;e++){const r=this.ops[e];t.push(r.max)}return this.encode(e,t)}root(e){const t=Buffer.allocUnsafe(1);return t[0]=e,t}}function l(e,t){return _("string"==typeof e),1+Buffer.byteLength(e,t)}function d(e,t,r){return m(t+1<=e.length),m(t+1+e[t]<=e.length),e.toString(r,t+1,t+1+e[t])}function p(e,t,r,i){_("string"==typeof t);const s=Buffer.byteLength(t,i);return _(s<=255),m(r+1<=e.length),e[r]=s,s>0&&_(e.write(t,r+1,i)===s),1+s}function b(e){return null!=e&&!0===e._isBuffer?e.length:(_("string"==typeof e),e.length>>>1)}function g(e,t,r){return null!=t&&!0===t._isBuffer?t.copy(e,r):(_("string"==typeof t),e.write(t,r,"hex"))}function m(e){if(!e){const e=new RangeError("Invalid length for database key.");throw Error.captureStackTrace&&Error.captureStackTrace(e,m),e}}function _(e){if(!e){const e=new TypeError("Invalid type for database key.");throw Error.captureStackTrace&&Error.captureStackTrace(e,_),e}}r.exports=class{constructor(e,t=[]){o(Array.isArray(t)),this.id=function(e){return"string"==typeof e&&(o(1===e.length),e=e.charCodeAt(0)),o((255&e)===e),o(255!==e),e}(e),this.base=f.create(t)}encode(...e){return this.base.encode(this.id,e)}decode(e){return this.base.decode(this.id,e)}min(...e){return this.base.min(this.id,e)}max(...e){return this.base.max(this.id,e)}root(){return this.base.root(this.id)}}}],["bdb","/lib/memdb.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(180,r),h=Buffer.alloc(0);class c{constructor(e,t){this.options=t||{},this.ops=[],this.db=e,this.written=!1}put(e,t){return o(!this.written,"Already written."),this.ops.push(new u("put",e,t)),this}del(e){return o(!this.written,"Already written."),this.ops.push(new u("del",e)),this}write(e){if(this.written)return setImmediate(()=>e(new Error("Already written."))),this;for(const t of this.ops)switch(t.type){case"put":this.db.insert(t.key,t.value);break;case"del":this.db.remove(t.key);break;default:return setImmediate(()=>e(new Error("Bad op."))),this}return this.ops=[],this.written=!0,setImmediate(e),this}clear(){return o(!this.written,"Already written."),this.ops=[],this}}class u{constructor(e,t,r){this.type=e,this.key=t,this.value=r}}class f{constructor(e,t){this.db=e,this.options=new l(t),this.iter=null,this.ended=!1,this.total=0,this.init()}init(){const e=this.db.tree.snapshot(),t=this.db.tree.iterator(e);this.options.reverse?this.options.end?(t.seekMax(this.options.end),this.options.lt&&t.valid()&&0===t.compare(this.options.end)&&t.prev()):t.seekLast():this.options.start?(t.seekMin(this.options.start),this.options.gt&&t.valid()&&0===t.compare(this.options.start)&&t.next()):t.seekFirst(),this.iter=t}next(e){const t=this.options,r=this.iter;if(!this.iter)return void setImmediate(()=>e(new Error("Cannot call next.")));let i;if(t.reverse?(i=r.prev())&&t.start&&(t.gt?r.compare(t.start)<=0&&(i=!1):r.compare(t.start)<0&&(i=!1)):(i=r.next())&&t.end&&(t.lt?r.compare(t.end)>=0&&(i=!1):r.compare(t.end)>0&&(i=!1)),!i)return this.iter=null,void setImmediate(e);if(-1!==t.limit){if(this.total>=t.limit)return this.iter=null,void setImmediate(e);this.total+=1}let s=r.key,n=r.value;t.keys||(s=h),t.values||(n=h),t.keyAsBuffer||(s=s.toString("utf8")),t.valueAsBuffer||(n=n.toString("utf8")),setImmediate(()=>e(null,s,n))}seek(e){o(this.iter,"Already ended."),"string"==typeof e&&(e=Buffer.from(e,"utf8")),o(null!=e&&!0===e._isBuffer,"Key must be a Buffer."),this.options.reverse?this.iter.seekMax(e):this.iter.seekMin(e)}end(e){this.ended?setImmediate(()=>e(new Error("Already ended."))):(this.ended=!0,this.iter=null,setImmediate(e))}}class l{constructor(e){this.keys=!0,this.values=!0,this.start=null,this.end=null,this.gt=!1,this.lt=!1,this.keyAsBuffer=!0,this.valueAsBuffer=!0,this.reverse=!1,this.limit=-1,e&&this.fromOptions(e)}fromOptions(e){return null!=e.keys&&(o("boolean"==typeof e.keys),this.keys=e.keys),null!=e.values&&(o("boolean"==typeof e.values),this.values=e.values),null!=e.start&&(this.start=e.start),null!=e.end&&(this.end=e.end),null!=e.gte&&(this.start=e.gte),null!=e.lte&&(this.end=e.lte),null!=e.gt&&(this.gt=!0,this.start=e.gt),null!=e.lt&&(this.lt=!0,this.end=e.lt),null!=this.start&&("string"==typeof this.start&&(this.start=Buffer.from(this.start,"utf8")),o(null!=this.start&&!0===this.start._isBuffer,"`start` must be a Buffer.")),null!=this.end&&("string"==typeof this.end&&(this.end=Buffer.from(this.end,"utf8")),o(null!=this.end&&!0===this.end._isBuffer,"`end` must be a Buffer.")),null!=e.keyAsBuffer&&(o("boolean"==typeof e.keyAsBuffer),this.keyAsBuffer=e.keyAsBuffer),null!=e.valueAsBuffer&&(o("boolean"==typeof e.valueAsBuffer),this.valueAsBuffer=e.valueAsBuffer),null!=e.reverse&&(o("boolean"==typeof e.reverse),this.reverse=e.reverse),null!=e.limit&&(o("number"==typeof e.limit),this.limit=e.limit),this}}function d(e,t){return e.compare(t)}r.exports=class{constructor(e){this.location=e||"memory",this.options={},this.tree=new a(d,!0)}search(e){"string"==typeof e&&(e=Buffer.from(e,"utf8")),o(null!=e&&!0===e._isBuffer,"Key must be a Buffer.");const t=this.tree.search(e);return t?t.value:undefined}insert(e,t){return"string"==typeof e&&(e=Buffer.from(e,"utf8")),"string"==typeof t&&(t=Buffer.from(t,"utf8")),null==t&&(t=h),o(null!=e&&!0===e._isBuffer,"Key must be a Buffer."),o(null!=t&&!0===t._isBuffer,"Value must be a Buffer."),null!=this.tree.insert(e,t)}remove(e){return"string"==typeof e&&(e=Buffer.from(e,"utf8")),o(null!=e&&!0===e._isBuffer,"Key must be a Buffer."),null!=this.tree.remove(e)}range(e,t){return"string"==typeof e&&(e=Buffer.from(e,"utf8")),"string"==typeof t&&(t=Buffer.from(t,"utf8")),o(!e||null!=e&&!0===e._isBuffer,"Key must be a Buffer."),o(!t||null!=t&&!0===t._isBuffer,"Key must be a Buffer."),this.tree.range(e,t)}open(e,t){t||(t=e,e=null),e||(e={}),this.options=e,setImmediate(t)}close(e){setImmediate(e)}get(e,t,r){r||(r=t,t=null),t||(t={});let i=this.search(e);if(!i){const e=new Error("MEMDB_NOTFOUND: Key not found.");return e.notFound=!0,e.type="NotFoundError",void setImmediate(()=>r(e))}!1===t.asBuffer&&(i=i.toString("utf8")),setImmediate(()=>r(null,i))}put(e,t,r,i){i||(i=r,r=null),this.insert(e,t),setImmediate(i)}del(e,t,r){r||(r=t,t=null),this.remove(e),setImmediate(r)}batch(e,t,r){r||(r=t,t=null);const i=new c(this,t);return e?(i.ops=e,i.write(r),undefined):i}iterator(e){return new f(this,e)}getProperty(e){return""}approximateSize(e,t,r){const i=this.range(e,t);let s=0;for(const e of i)s+=e.key.length,s+=e.value.length;setImmediate(()=>r(null,s))}static destroy(e,t){setImmediate(t)}static repair(e,t){setImmediate(t)}}}],["bdb","/lib/rbt.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=0,h=1;let c=null;class u{constructor(e,t){this.tree=e,this.root=t,this.current=t,this.key=null,this.value=null}compare(e){return o(null!=this.key,"No key."),this.tree.compare(this.key,e)}valid(){return!this.current.isNull()}reset(){this.current=this.root,this.key=null,this.value=null}seekFirst(){this.current=this.tree.min(this.root),this.key=this.current.key,this.value=this.current.value}seekLast(){this.current=this.tree.max(this.root),this.key=this.current.key,this.value=this.current.value}seek(e){return this.seekMin(e)}seekMin(e){o(null!=e,"No key passed to seek.");let t=this.current,r=c;for(;!t.isNull();){const i=this.tree.compare(t.key,e);if(0===i){r=t;break}i>0?(r=t,t=t.left):t=t.right}this.current=r,this.key=r.key,this.value=r.value}seekMax(e){o(null!=e,"No key passed to seek.");let t=this.current,r=c;for(;!t.isNull();){const i=this.tree.compare(t.key,e);if(0===i){r=t;break}i<0?(r=t,t=t.right):t=t.left}this.current=r,this.key=r.key,this.value=r.value}prev(){return this.current.isNull()?(this.key=null,this.value=null,!1):(this.key=this.current.key,this.value=this.current.value,this.current=this.tree.predecessor(this.current),!0)}next(){return this.current.isNull()?(this.key=null,this.value=null,!1):(this.key=this.current.key,this.value=this.current.value,this.current=this.tree.successor(this.current),!0)}data(){return o(null!=this.key,"No data available."),new l(this.key,this.value)}}class f{constructor(e,t){this.key=e,this.value=t,this.color=a,this.parent=c,this.left=c,this.right=c}clone(){const e=new f(this.key,this.value);return e.color=this.color,e.parent=this.parent,e.left=this.left,e.right=this.right,e}copy(){return new l(this.key,this.value)}inspect(){return{key:this.key,value:this.value,color:this.color===a?"red":"black",left:this.left,right:this.right}}isNull(){return!1}}class l{constructor(e,t){this.key=e,this.value=t}}function d(e,t){t.isNull()||(e.left=t.clone(),e.left.parent=e,d(e.left,t.left),p(e.left,t.right))}function p(e,t){t.isNull()||(e.right=t.clone(),e.right.parent=e,d(e.right,t.left),p(e.right,t.right))}c=new class{constructor(){this.key=null,this.value=null,this.color=h,this.parent=null,this.left=null,this.right=null}inspect(){return"NIL"}isNull(){return!0}},r.exports=class{constructor(e,t){o("function"==typeof e),this.root=c,this.compare=e,this.unique=t||!1}reset(){this.root=c}search(e){let t=this.root;for(;!t.isNull();){const r=this.compare(e,t.key);if(0===r)return t;t=r<0?t.left:t.right}return null}insert(e,t){let r,i=this.root,s=!1;for(;!i.isNull();){const n=this.compare(e,i.key);if(this.unique&&0===n)return i.key=e,i.value=t,i;r=i,n<0?(s=!0,i=i.left):(s=!1,i=i.right)}const n=new f(e,t);return r?(n.parent=r,s?r.left=n:r.right=n,this.insertFixup(n),n):(this.root=n,this.insertFixup(n),n)}insertFixup(e){for(e.color=a;e!==this.root&&e.parent.color===a;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.isNull()||t.color!==a?(e===e.parent.right&&(e=e.parent,this.rotl(e)),e.parent.color=h,e.parent.parent.color=a,this.rotr(e.parent.parent)):(e.parent.color=h,t.color=h,e.parent.parent.color=a,e=e.parent.parent)}else{const t=e.parent.parent.left;t.isNull()||t.color!==a?(e===e.parent.left&&(e=e.parent,this.rotr(e)),e.parent.color=h,e.parent.parent.color=a,this.rotl(e.parent.parent)):(e.parent.color=h,t.color=h,e.parent.parent.color=a,e=e.parent.parent)}this.root.color=h}remove(e){let t=this.root;for(;!t.isNull();){const r=this.compare(e,t.key);if(0===r)return this.removeNode(t),t;t=r<0?t.left:t.right}return null}removeNode(e){let t=e;e.left.isNull()||e.right.isNull()||(t=this.successor(e));const r=t.left.isNull()?t.right:t.left;r.parent=t.parent,t.parent.isNull()?this.root=r:t===t.parent.left?t.parent.left=r:t.parent.right=r,t!==e&&(e.key=t.key,e.value=t.value),t.color===h&&this.removeFixup(r)}removeFixup(e){for(;e!==this.root&&e.color===h;)if(e===e.parent.left){let t=e.parent.right;t.color===a&&(t.color=h,e.parent.color=a,this.rotl(e.parent),t=e.parent.right),t.left.color===h&&t.right.color===h?(t.color=a,e=e.parent):(t.right.color===h&&(t.left.color=h,t.color=a,this.rotr(t),t=e.parent.right),t.color=e.parent.color,e.parent.color=h,t.right.color=h,this.rotl(e.parent),e=this.root)}else{let t=e.parent.left;t.color===a&&(t.color=h,e.parent.color=a,this.rotr(e.parent),t=e.parent.left),t.right.color===h&&t.left.color===h?(t.color=a,e=e.parent):(t.left.color===h&&(t.right.color=h,t.color=a,this.rotl(t),t=e.parent.left),t.color=e.parent.color,e.parent.color=h,t.left.color=h,this.rotr(e.parent),e=this.root)}e.color=h}rotl(e){const t=e.right;e.right=t.left,t.left.isNull()||(t.left.parent=e),t.parent=e.parent,e.parent.isNull()?this.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}rotr(e){const t=e.left;e.left=t.right,t.right.isNull()||(t.right.parent=e),t.parent=e.parent,e.parent.isNull()?this.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}min(e){if(e.isNull())return e;for(;!e.left.isNull();)e=e.left;return e}max(e){if(e.isNull())return e;for(;!e.right.isNull();)e=e.right;return e}successor(e){if(!e.right.isNull()){for(e=e.right;!e.left.isNull();)e=e.left;return e}let t=e.parent;for(;!t.isNull()&&e===t.right;)e=t,t=t.parent;return t}predecessor(e){if(!e.left.isNull()){for(e=e.left;!e.right.isNull();)e=e.right;return e}let t=e.parent;for(;!t.isNull()&&e===t.left;)e=t,t=t.parent;return t}clone(){if(this.root.isNull())return c;const e=[];let t,r,i=this.root,s=!0;for(;;)if(i.isNull()){if(0===e.length)break;t=i=e.pop(),s=!1,i=i.right}else{const n=i.clone();t&&(n.parent=t),s?t?t.left=n:r=n:t?t.right=n:r=n,e.push(n),t=n,s=!0,i=i.left}return o(r),r}snapshot(){if(this.root.isNull())return c;const e=this.root.clone();return d(e,e.left),p(e,e.right),e}iterator(e){return new u(this,e||this.root)}range(e,t){const r=this.iterator(),i=[];for(e?r.seekMin(e):r.seekFirst();r.next()&&!(t&&r.compare(t)>0);)i.push(r.data());return i}}}],["bdb","/lib/level-browser.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=global.indexedDB||global.webkitIndexedDB||global.mozIndexedDB||global.shimIndexedDB,h=global.IDBKeyRange||global.webkitIDBKeyRange||global.mozIDBKeyRange,c={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange",NEXT:"next",NEXT_UNIQUE:"nextunique",PREV:"prev",PREV_UNIQUE:"prevunique"};class u{constructor(e,t){this.db=e,this.options=t||{},this.ops=[],this.written=!1}put(e,t){return o(!this.written,"Already written."),this.ops.push(new f("put",e,t)),this}del(e){return o(!this.written,"Already written."),this.ops.push(new f("del",e)),this}write(e){if(this.written)return e(new Error("Already written.")),this;const t=g(e),r=this.db.transaction(c.READ_WRITE);let i=this.ops.length,s=!1,n=!1;r.oncomplete=(()=>{n?e():e(new Error("Operation failed."))}),r.onabort=t,r.onerror=t;const o=()=>{0!==(i-=1)||s||(s=!0,n=!0)},a=e=>{r.abort(),s||(s=!0,t(e))};for(const{type:t,key:i,value:s}of this.ops){const n=r.objectStore(this.db.location);switch(t){case"put":{const e=n.put(s,p(i));e.onsuccess=o,e.onerror=a;break}case"del":{const e=n.delete(p(i));e.onsuccess=o,e.onerror=a;break}default:return e(new Error("Bad op type.")),this}}return this}clear(){return o(!this.written,"Already written."),this.ops=[],this}}class f{constructor(e,t,r){this.type=e,this.key=t,this.value=r}}class l{constructor(e,t){this.db=e,this.options=new d(t),this.cursor=null,this.error=null,this.started=!1,this.ended=!1,this.callback=null}seek(e){throw new Error("Not implemented.")}next(e){if(this.ended)e(new Error("Iterator already ended."));else if(this.callback)e(new Error("Callback already pending."));else if(this.error)e(this.error);else{if(!this.started)return this.callback=e,void this.start();o(this.cursor),this.callback=e,this.cursor.continue(),this.cursor=null}}end(e){this.ended?e(new Error("Iterator already ended.")):(this.ended=!0,e())}start(){if(this.started)return;const e=this.options,t=this.db.transaction(c.READ_ONLY),r=t.objectStore(this.db.location);let i=!1,s=0;t.oncomplete=(()=>{i||this.error||(this.error=new Error("Iterator ended early.")),this.error?this.respond(this.error):this.respond(null,undefined,undefined)});const n=e=>{this.error=b(e),this.respond(this.error)};t.onabort=n,t.onerror=n;const o=p(e.start),a=p(e.end);let u=null;u=o&&a?h.bound(o,a,e.gt,e.lt):o?h.lowerBound(o,e.gt):a?h.upperBound(a,e.lt):h.lowerBound("\0",!0);const f=e.reverse?c.PREV:c.NEXT,l=r.openCursor(u,f);l.onerror=n,l.onsuccess=(t=>{const r=t.target.result;if(this.error)return void this.respond(this.error);if(!r)return void(i=!0);if(-1!==e.limit){if(s>=e.limit)return void(i=!0);s+=1}let n=Buffer.from(r.key,"hex"),o=r.value;o&&(null==o||!0!==o._isBuffer)&&o.buffer&&(o=Buffer.from(o.buffer)),e.keyAsBuffer||(n=n.toString("utf8")),e.valueAsBuffer||(o=o.toString("utf8")),this.cursor=r,this.respond(null,n,o)}),this.started=!0}respond(e,t,r){if(!this.callback)return;const i=this.callback;this.callback=null,i(e,t,r)}}class d{constructor(e){this.keys=!0,this.values=!0,this.start=null,this.end=null,this.gt=!1,this.lt=!1,this.keyAsBuffer=!0,this.valueAsBuffer=!0,this.reverse=!1,this.limit=-1,e&&this.fromOptions(e)}fromOptions(e){return null!=e.keys&&(o("boolean"==typeof e.keys),this.keys=e.keys),null!=e.values&&(o("boolean"==typeof e.values),this.values=e.values),null!=e.start&&(this.start=e.start),null!=e.end&&(this.end=e.end),null!=e.gte&&(this.start=e.gte),null!=e.lte&&(this.end=e.lte),null!=e.gt&&(this.gt=!0,this.start=e.gt),null!=e.lt&&(this.lt=!0,this.end=e.lt),null!=this.start&&("string"==typeof this.start&&(this.start=Buffer.from(this.start,"utf8")),o(null!=this.start&&!0===this.start._isBuffer,"`start` must be a Buffer.")),null!=this.end&&("string"==typeof this.end&&(this.end=Buffer.from(this.end,"utf8")),o(null!=this.end&&!0===this.end._isBuffer,"`end` must be a Buffer.")),null!=e.keyAsBuffer&&(o("boolean"==typeof e.keyAsBuffer),this.keyAsBuffer=e.keyAsBuffer),null!=e.valueAsBuffer&&(o("boolean"==typeof e.valueAsBuffer),this.valueAsBuffer=e.valueAsBuffer),null!=e.reverse&&(o("boolean"==typeof e.reverse),this.reverse=e.reverse),null!=e.limit&&(o("number"==typeof e.limit),this.limit=e.limit),this}}function p(e){return null==e?e:("string"==typeof e&&(e=Buffer.from(e,"utf8")),o(null!=e&&!0===e._isBuffer),e.toString("hex"))}function b(e){if(!e)return new Error("Unknown IndexedDB error (no event).");if(e instanceof Error)return e;const{target:t}=e;if(!t)return new Error("Unknown IndexedDB error (no target).");if(t.error){const{error:e}=t;return e instanceof Error?e:"VersionError"===e.name?new Error("IndexedDB version error."):new Error(String(e))}return null!=t.errorCode?12===t.errorCode?new Error("IndexedDB version error."):new Error(`IndexedDB error: ${t.errorCode}.`):new Error("Unknown IndexedDB error (no error).")}function g(e){return t=>e(b(t))}r.exports=class{constructor(e){o("string"==typeof e),this.options={},this.version=1,this.name=`bdb-${e}`,this.location=e,this.db=null,this.store=null}transaction(e){return this.db.transaction([this.location],e)}open(e,t){t||(t=e,e=null),e||(e={}),this.options=e;const r=a.open(this.name,this.version);return r.onerror=g(t),r.onsuccess=(e=>{if(this.db)return void t();if(this.db=e.target.result,"string"==typeof this.db.version)return void t(new Error("IndexedDB is out of date."));if(!this.db.objectStoreNames.contains(this.location))return void t(new Error("Could not create object store."));const r=this.transaction(c.READ_ONLY);this.store=r.objectStore(this.location),t()}),r.onupgradeneeded=(e=>{this.db=e.target.result,this.db.objectStoreNames.contains(this.location)?this.store=e.target.transaction.objectStore(this.location):this.store=this.db.createObjectStore(this.location,{autoIncrement:!1})}),this}close(e){return this.db.close(),e(),this}put(e,t,r){const i=g(r),s=this.transaction(c.READ_WRITE);let n=!1;s.oncomplete=(()=>{n?r():r(new Error("Operation failed."))}),s.onabort=i,s.onerror=i;const o=s.objectStore(this.location).put(t,p(e));return o.onsuccess=(e=>{n=!0}),o.onerror=i,this}get(e,t,r){r||(r=t,t=null),t||(t={});const i=g(r),s=this.transaction(c.READ_ONLY);let n=!1,o=null;s.oncomplete=(()=>{if(n){if(o===undefined){const e=new Error("IDB_NOTFOUND: Key not found.");return e.notFound=!0,e.type="NotFoundError",void r(e)}o&&(null==o||!0!==o._isBuffer)&&o.buffer&&(o=Buffer.from(o.buffer)),!1===t.asBuffer&&(o=o.toString("utf8")),r(null,o)}else r(new Error("Operation failed."))}),s.onabort=i,s.onerror=i;const a=s.objectStore(this.location).get(p(e));return a.onsuccess=function(e){n=!0,o=e.target.result},a.onerror=i,this}del(e,t){const r=g(t),i=this.transaction(c.READ_WRITE);let s=!1;i.oncomplete=(()=>{s?t():t(new Error("Operation failed."))}),i.onabort=r,i.onerror=r;const n=i.objectStore(this.location).delete(p(e));return n.onsuccess=(e=>{s=!0}),n.onerror=r,this}batch(e,t,r){r||(r=t,t=null);const i=new u(this,t);return e?(i.ops=e,i.write(r),undefined):i}iterator(e){return new l(this,e)}static destroy(e,t){if(!a.deleteDatabase)return void t(new Error("Destroy not supported."));const r=a.deleteDatabase(`bdb-${e}`);r.onsuccess=(()=>t()),r.onerror=g(t)}}}],["bcoin","/lib/blockchain/layout.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(176,r),a={V:o.key("V"),O:o.key("O"),R:o.key("R"),D:o.key("D"),e:o.key("e",["hash256"]),h:o.key("h",["hash256"]),H:o.key("H",["uint32"]),n:o.key("n",["hash256"]),p:o.key("p",["hash256"]),b:o.key("b",["hash256"]),t:o.key("t",["hash256"]),c:o.key("c",["hash256","uint32"]),u:o.key("u",["hash256"]),v:o.key("v",["uint8","hash256"]),T:o.key("T",["hash","hash256"]),C:o.key("C",["hash","hash256","uint32"])};r.exports=a}],["bcoin","/lib/primitives/block.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),{BufferSet:h}=__browser_require__(86,r),c=__browser_require__(33,r),u=__browser_require__(184,r),f=__browser_require__(17,r),l=__browser_require__(185,r),d=__browser_require__(85,r),p=__browser_require__(186,r),b=__browser_require__(187,r),g=__browser_require__(14,r),m=__browser_require__(20,r),{encoding:_}=a,{inspectSymbol:w}=__browser_require__(21,r),y=__browser_require__(188,r),{opcodes:v}=__browser_require__(98,r);class E extends l{constructor(e){super(),this.txs=[],this._raw=null,this._size=-1,this._witness=-1,e&&this.fromOptions(e)}fromOptions(e){if(this.parseOptions(e),e.txs){o(Array.isArray(e.txs));for(const t of e.txs)o(t instanceof d),this.txs.push(t)}return this}static fromOptions(e){return(new this).fromOptions(e)}refresh(e){if(this._refresh(),this._raw=null,this._size=-1,this._witness=-1,!e)return this;for(const e of this.txs)e.refresh();return this}toRaw(){return this.frame().data}hasRaw(){return Boolean(this._raw)}toNormal(){return this.hasWitness()?this.frameNormal().data:this.toRaw()}toWriter(e){if(this.mutable)return this.writeWitness(e);const t=this.frame();return e.writeBytes(t.data),e}toNormalWriter(e){return this.hasWitness()?(this.writeNormal(e),e):this.toWriter(e)}frame(){if(this.mutable)return o(!this._raw),this.frameWitness();if(this._raw){o(this._size>=0),o(this._witness>=0);const e=new S(this._size,this._witness);return e.data=this._raw,e}const e=this.frameWitness();return this._raw=e.data,this._size=e.size,this._witness=e.witness,e}getSizes(){return this.mutable?this.getWitnessSizes():this.frame()}getVirtualSize(){const e=f.WITNESS_SCALE_FACTOR;return(this.getWeight()+e-1)/e|0}getWeight(){const e=this.getSizes();return(e.size-e.witness)*(f.WITNESS_SCALE_FACTOR-1)+e.size}getSize(){return this.getSizes().size}getBaseSize(){const e=this.getSizes();return e.size-e.witness}hasWitness(){if(-1!==this._witness)return 0!==this._witness;for(const e of this.txs)if(e.hasWitness())return!0;return!1}hasTX(e){return-1!==this.indexOf(e)}indexOf(e){for(let t=0;t<this.txs.length;t++){if(this.txs[t].hash().equals(e))return t}return-1}createMerkleRoot(e){const t=[];for(const e of this.txs)t.push(e.hash());const[r,i]=u.createRoot(c,t);return i?null:"hex"===e?r.toString("hex"):r}createWitnessNonce(){return Buffer.from(f.ZERO_HASH)}createCommitmentHash(e){const t=this.getWitnessNonce(),r=[];o(t,"No witness nonce present."),r.push(f.ZERO_HASH);for(let e=1;e<this.txs.length;e++){const t=this.txs[e];r.push(t.witnessHash())}const[i]=u.createRoot(c,r),s=c.root(i,t);return"hex"===e?s.toString("hex"):s}getMerkleRoot(e){return"hex"===e?this.merkleRoot.toString("hex"):this.merkleRoot}getWitnessNonce(){if(0===this.txs.length)return null;const e=this.txs[0];if(1!==e.inputs.length)return null;const t=e.inputs[0];return 1!==t.witness.items.length?null:32!==t.witness.items[0].length?null:t.witness.items[0]}getCommitmentHash(e){if(0===this.txs.length)return null;const t=this.txs[0];let r=null;for(let e=t.outputs.length-1;e>=0;e--){const i=t.outputs[e];if(i.script.isCommitment()){r=i.script.getCommitment();break}}return r?"hex"===e?r.toString("hex"):r:null}verifyBody(){const[e]=this.checkBody();return e}checkBody(){if(0===this.txs.length||this.txs.length>f.MAX_BLOCK_SIZE||this.getBaseSize()>f.MAX_BLOCK_SIZE)return[!1,"bad-blk-length",100];if(0===this.txs.length||!this.txs[0].isCoinbase())return[!1,"bad-cb-missing",100];const e=this.createMerkleRoot();if(!e)return[!1,"bad-txns-duplicate",100];if(!this.merkleRoot.equals(e))return[!1,"bad-txnmrklroot",100];const t=f.WITNESS_SCALE_FACTOR;let r=0;for(let e=0;e<this.txs.length;e++){const i=this.txs[e];if(e>0&&i.isCoinbase())return[!1,"bad-cb-multiple",100];const[s,n,o]=i.checkSanity();if(!s)return[s,n,o];if((r+=i.getLegacySigops())*t>f.MAX_BLOCK_SIGOPS_COST)return[!1,"bad-blk-sigops",100]}return[!0,"valid",0]}getCoinbaseHeight(){if(this.version<2)return-1;if(0===this.txs.length)return-1;const e=this.txs[0];return 0===e.inputs.length?-1:e.inputs[0].script.getCoinbaseHeight()}getClaimed(){return o(this.txs.length>0),o(this.txs[0].isCoinbase()),this.txs[0].getOutputValue()}getPrevout(){const e=new h;for(let t=1;t<this.txs.length;t++){const r=this.txs[t];for(const t of r.inputs)e.add(t.prevout.hash)}return e.toArray()}[w](){return this.format()}format(e,t){const r=this.getCommitmentHash();return{hash:this.rhash(),height:null!=t?t:-1,size:this.getSize(),virtualSize:this.getVirtualSize(),date:m.date(this.time),version:this.version.toString(16),prevBlock:m.revHex(this.prevBlock),merkleRoot:m.revHex(this.merkleRoot),commitmentHash:r?m.revHex(r):null,time:this.time,bits:this.bits,nonce:this.nonce,txs:this.txs.map((t,r)=>t.format(e,null,r))}}toJSON(){return this.getJSON()}getJSON(e,t,r,i){return e=g.get(e),{hash:this.rhash(),height:r,depth:i,version:this.version,prevBlock:m.revHex(this.prevBlock),merkleRoot:m.revHex(this.merkleRoot),time:this.time,bits:this.bits,nonce:this.nonce,txs:this.txs.map((r,i)=>r.getJSON(e,t,null,i))}}fromJSON(e){o(e,"Block data is required."),o(Array.isArray(e.txs)),this.parseJSON(e);for(const t of e.txs)this.txs.push(d.fromJSON(t));return this}static fromJSON(e){return(new this).fromJSON(e)}fromReader(e){e.start(),this.readHead(e);const t=e.readVarint();let r=0;for(let i=0;i<t;i++){const t=d.fromReader(e,!0);r+=t._witness,this.txs.push(t)}return this.mutable||(this._raw=e.endData(),this._size=this._raw.length,this._witness=r),this}fromRaw(e){return this.fromReader(a.read(e))}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}toMerkle(e){return p.fromBlock(this,e)}writeNormal(e){this.writeHead(e),e.writeVarint(this.txs.length);for(const t of this.txs)t.toNormalWriter(e);return e}writeWitness(e){this.writeHead(e),e.writeVarint(this.txs.length);for(const t of this.txs)t.toWriter(e,!0);return e}frameNormal(){const e=this.getNormalSizes(),t=a.write(e.size);return this.writeNormal(t),e.data=t.render(),e}frameWitness(){const e=this.getWitnessSizes(),t=a.write(e.size);return this.writeWitness(t),e.data=t.render(),e}toHeaders(){return b.fromBlock(this)}getNormalSizes(){let e=0;e+=80,e+=_.sizeVarint(this.txs.length);for(const t of this.txs)e+=t.getBaseSize();return new S(e,0)}getWitnessSizes(){let e=0,t=0;e+=80,e+=_.sizeVarint(this.txs.length);for(const r of this.txs){const i=r.getSizes();e+=i.size,t+=i.witness}return new S(e,t)}static isBlock(e){return e instanceof E}toFilter(e){const t=this.hash().slice(0,16),r=new h;for(let e=0;e<this.txs.length;e++){const t=this.txs[e];for(const e of t.outputs)0!==e.script.length&&e.script.raw[0]!==v.OP_RETURN&&r.add(e.script.raw)}for(const[,t]of e.map)for(const[,e]of t.outputs)0!==e.output.script.length&&r.add(e.output.script.raw);return y.fromItems(19,t,r)}}class S{constructor(e,t){this.data=null,this.size=e,this.witness=t}}r.exports=E}],["bcrypto","/lib/merkle.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(35,r);function a(e,t){o(e&&"function"==typeof e.root),o(Array.isArray(t));const r=new Array(t.length);for(let e=0;e<t.length;e++)r[e]=t[e];let i=r.length,s=!1,n=0;if(0===i)return r.push(e.zero),[r,s];for(;i>1;){for(let t=0;t<i;t+=2){const o=Math.min(t+1,i-1),a=r[n+t],h=r[n+o];o===t+1&&o+1===i&&a.equals(h)&&(s=!0);const c=e.root(a,h);r.push(c)}n+=i,i=i+1>>>1}return[r,s]}e.createTree=a,e.createRoot=function(e,t){o(e&&"function"==typeof e.root),o(Array.isArray(t));const[r,i]=a(e,t);return[r[r.length-1],i]},e.createBranch=function(e,t,r){o(e&&"function"==typeof e.root),o(t>>>0===t),o(Array.isArray(r)),o(t<r.length);let i=r.length;const[s]=a(e,r),n=[];let h=0;for(;i>1;){const e=Math.min(1^t,i-1);n.push(s[h+e]),t>>>=1,h+=i,i=i+1>>>1}return n},e.deriveRoot=function(e,t,r,i){o(e&&"function"==typeof e.root),o(null!=t&&!0===t._isBuffer),o(Array.isArray(r)),o(i>>>0===i);let s=t;for(const t of r){if(1&i&&t.equals(s))return e.zero;s=1&i?e.root(t,s):e.root(s,t),i>>>=1}return s}}],["bcoin","/lib/primitives/abstractblock.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(33,r),h=__browser_require__(24,r),c=__browser_require__(20,r),u=__browser_require__(113,r),f=__browser_require__(17,r);r.exports=class{constructor(){this.version=1,this.prevBlock=f.ZERO_HASH,this.merkleRoot=f.ZERO_HASH,this.time=0,this.bits=0,this.nonce=0,this.mutable=!1,this._hash=null,this._hhash=null}parseOptions(e){return o(e,"Block data is required."),o(e.version>>>0===e.version),o(null!=e.prevBlock&&!0===e.prevBlock._isBuffer),o(null!=e.merkleRoot&&!0===e.merkleRoot._isBuffer),o(e.time>>>0===e.time),o(e.bits>>>0===e.bits),o(e.nonce>>>0===e.nonce),this.version=e.version,this.prevBlock=e.prevBlock,this.merkleRoot=e.merkleRoot,this.time=e.time,this.bits=e.bits,this.nonce=e.nonce,null!=e.mutable&&(o("boolean"==typeof e.mutable),this.mutable=e.mutable),this}parseJSON(e){return o(e,"Block data is required."),o(e.version>>>0===e.version),o("string"==typeof e.prevBlock),o("string"==typeof e.merkleRoot),o(e.time>>>0===e.time),o(e.bits>>>0===e.bits),o(e.nonce>>>0===e.nonce),this.version=e.version,this.prevBlock=c.fromRev(e.prevBlock),this.merkleRoot=c.fromRev(e.merkleRoot),this.time=e.time,this.bits=e.bits,this.nonce=e.nonce,this}isMemory(){return!1}_refresh(){this._hash=null,this._hhash=null}refresh(){return this._refresh()}hash(e){let t=this._hash;if(t||(t=a.digest(this.toHead()),this.mutable||(this._hash=t)),"hex"===e){let e=this._hhash;e||(e=t.toString("hex"),this.mutable||(this._hhash=e)),t=e}return t}toHead(){return this.writeHead(h.write(80)).render()}fromHead(e){return this.readHead(h.read(e))}writeHead(e){return e.writeU32(this.version),e.writeHash(this.prevBlock),e.writeHash(this.merkleRoot),e.writeU32(this.time),e.writeU32(this.bits),e.writeU32(this.nonce),e}readHead(e){return this.version=e.readU32(),this.prevBlock=e.readHash(),this.merkleRoot=e.readHash(),this.time=e.readU32(),this.bits=e.readU32(),this.nonce=e.readU32(),this}verify(){return!!this.verifyPOW()&&!!this.verifyBody()}verifyPOW(){return f.verifyPOW(this.hash(),this.bits)}verifyBody(){throw new Error("Abstract method.")}rhash(){return c.revHex(this.hash())}toInv(){return new u(u.types.BLOCK,this.hash())}}}],["bcoin","/lib/primitives/merkleblock.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),{BufferMap:h,BufferSet:c}=__browser_require__(86,r),u=__browser_require__(20,r),f=__browser_require__(33,r),l=__browser_require__(17,r),d=__browser_require__(185,r),p=__browser_require__(85,r),b=__browser_require__(187,r),g=Buffer.from([0]),{encoding:m}=a,{inspectSymbol:_}=__browser_require__(21,r);class w extends d{constructor(e){super(),this.txs=[],this.hashes=[],this.flags=g,this.totalTX=0,this._tree=null,e&&this.fromOptions(e)}fromOptions(e){if(this.parseOptions(e),o(e,"MerkleBlock data is required."),o(Array.isArray(e.hashes)),o(null!=e.flags&&!0===e.flags._isBuffer),o(e.totalTX>>>0===e.totalTX),e.hashes)for(const t of e.hashes)o(null!=t&&!0===t._isBuffer),this.hashes.push(t);return e.flags&&(o(null!=e.flags&&!0===e.flags._isBuffer),this.flags=e.flags),null!=e.totalTX&&(o(e.totalTX>>>0===e.totalTX),this.totalTX=e.totalTX),this}static fromOptions(e){return(new this).fromOptions(e)}refresh(e){if(this._refresh(),this._tree=null,e)for(const e of this.txs)e.refresh()}hasTX(e){return-1!==this.indexOf(e)}indexOf(e){const t=this.getTree().map.get(e);return null==t?-1:t}verifyBody(){const[e]=this.checkBody();return e}checkBody(){return this.getTree().root.equals(this.merkleRoot)?[!0,"valid",0]:[!1,"bad-txnmrklroot",100]}getTree(){if(!this._tree)try{this._tree=this.extractTree()}catch(e){this._tree=new y}return this._tree}extractTree(){const e=[],t=[],r=new h,i=this.hashes,s=this.flags,n=this.totalTX;let o=0,a=0,c=!1,u=0;const d=e=>n+(1<<e)-1>>>e,p=(n,h)=>{if(o>=8*s.length)return c=!0,l.ZERO_HASH;const u=s[o/8|0]>>>o%8&1;if(o+=1,0===n||!u){if(a>=i.length)return c=!0,l.ZERO_HASH;const s=i[a];return a+=1,0===n&&u&&(e.push(s),t.push(h),r.set(s,h)),s}const b=p(n-1,2*h);let g;return 2*h+1<d(n-1)?(g=p(n-1,2*h+1)).equals(b)&&(c=!0):g=b,f.root(b,g)};if(0===n)throw new Error("Zero transactions.");if(n>l.MAX_BLOCK_SIZE/60)throw new Error("Too many transactions.");if(i.length>n)throw new Error("Too many hashes.");if(8*s.length<i.length)throw new Error("Flags too small.");for(;d(u)>1;)u+=1;const b=p(u,0);if(c)throw new Error("Mutated merkle tree.");if(((o+7)/8|0)!==s.length)throw new Error("Too many flag bits.");if(a!==i.length)throw new Error("Incorrect number of hashes.");return new y(b,e,t,r)}getCoinbaseHeight(){return-1}[_](){return this.format()}format(e,t){return{hash:this.rhash(),height:null!=t?t:-1,date:u.date(this.time),version:this.version.toString(16),prevBlock:u.revHex(this.prevBlock),merkleRoot:u.revHex(this.merkleRoot),time:this.time,bits:this.bits,nonce:this.nonce,totalTX:this.totalTX,hashes:this.hashes.map(e=>e.toString("hex")),flags:this.flags,map:this.getTree().map,txs:this.txs.map((t,r)=>t.format(e,null,r))}}getSize(){let e=0;return e+=80,e+=4,e+=m.sizeVarint(this.hashes.length),e+=32*this.hashes.length,e+=m.sizeVarint(this.flags.length),e+=this.flags.length}getExtendedSize(){let e=this.getSize();e+=m.sizeVarint(this.txs.length);for(const t of this.txs)e+=t.getSize();return e}toWriter(e){this.writeHead(e),e.writeU32(this.totalTX),e.writeVarint(this.hashes.length);for(const t of this.hashes)e.writeHash(t);return e.writeVarBytes(this.flags),e}toExtendedWriter(e){this.toWriter(e),e.writeVarint(this.txs.length);for(const t of this.txs)t.toWriter(e);return e}toRaw(){const e=this.getSize();return this.toWriter(a.write(e)).render()}toExtendedRaw(){const e=this.getExtendedSize();return this.toExtendedWriter(a.write(e)).render()}fromReader(e){this.readHead(e),this.totalTX=e.readU32();const t=e.readVarint();for(let r=0;r<t;r++)this.hashes.push(e.readHash());return this.flags=e.readVarBytes(),this}fromExtendedReader(e){this.fromReader(e);const t=e.readVarint();for(let r=0;r<t;r++)this.txs.push(p.fromReader(e));return this}fromRaw(e){return this.fromReader(a.read(e))}fromExtendedRaw(e){return this.fromExtendedReader(a.read(e))}static fromReader(e){return(new this).fromReader(e)}static fromExtendedReader(e){return(new this).fromExtendedReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}static fromExtendedRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromExtendedRaw(e)}toJSON(){return this.getJSON()}getJSON(e,t,r){return{hash:this.rhash(),height:r,version:this.version,prevBlock:u.revHex(this.prevBlock),merkleRoot:u.revHex(this.merkleRoot),time:this.time,bits:this.bits,nonce:this.nonce,totalTX:this.totalTX,hashes:this.hashes.map(e=>u.revHex(e)),flags:this.flags.toString("hex")}}fromJSON(e){o(e,"MerkleBlock data is required."),o(Array.isArray(e.hashes)),o("string"==typeof e.flags),o(e.totalTX>>>0===e.totalTX),this.parseJSON(e);for(const t of e.hashes)this.hashes.push(u.fromRev(t));return this.flags=Buffer.from(e.flags,"hex"),this.totalTX=e.totalTX,this}static fromJSON(e){return(new this).fromJSON(e)}static fromBlock(e,t){const r=[];for(const i of e.txs)r.push(i.isWatched(t)?1:0);return this.fromMatches(e,r)}static fromHashes(e,t){const r=new c;for(const e of t)r.add(e);const i=[];for(const t of e.txs){const e=t.hash();i.push(r.has(e)?1:0)}return this.fromMatches(e,i)}static fromMatches(e,t){const r=[],i=[],s=[],n=[],o=e.txs.length;let a=0;const h=e=>o+(1<<e)-1>>>e,c=(e,t,r)=>{if(0===e)return r[t];const i=c(e-1,2*t,r);let s;return s=2*t+1<h(e-1)?c(e-1,2*t+1,r):i,f.root(i,s)},u=(e,t,r,i)=>{let a=0;for(let r=t<<e;r<t+1<<e&&r<o;r++)a|=i[r];s.push(a),0!==e&&a?(u(e-1,2*t,r,i),2*t+1<h(e-1)&&u(e-1,2*t+1,r,i)):n.push(c(e,t,r))};for(let s=0;s<e.txs.length;s++){const n=e.txs[s];t[s]&&r.push(n),i.push(n.hash())}for(;h(a)>1;)a+=1;u(a,0,i,t);const l=Buffer.allocUnsafe((s.length+7)/8|0);l.fill(0);for(let e=0;e<s.length;e++)l[e/8|0]|=s[e]<<e%8;const d=new this;return d._hash=e._hash,d._hhash=e._hhash,d.version=e.version,d.prevBlock=e.prevBlock,d.merkleRoot=e.merkleRoot,d.time=e.time,d.bits=e.bits,d.nonce=e.nonce,d.totalTX=o,d.hashes=n,d.flags=l,d.txs=r,d}static isMerkleBlock(e){return e instanceof w}toHeaders(){return b.fromBlock(this)}}class y{constructor(e,t,r,i){this.root=e||l.ZERO_HASH,this.matches=t||[],this.indexes=r||[],this.map=i||new h}}r.exports=w}],["bcoin","/lib/primitives/headers.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(24,r),a=__browser_require__(20,r),h=__browser_require__(185,r),{inspectSymbol:c}=__browser_require__(21,r);class u extends h{constructor(e){super(),e&&this.parseOptions(e)}verifyBody(){return!0}getSize(){return 81}toWriter(e){return this.writeHead(e),e.writeVarint(0),e}toRaw(){const e=this.getSize();return this.toWriter(o.write(e)).render()}fromReader(e){return this.readHead(e),e.readVarint(),this}fromRaw(e){return this.fromReader(o.read(e))}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}static fromHead(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromHead(e)}static fromEntry(e){const t=new this;return t.version=e.version,t.prevBlock=e.prevBlock,t.merkleRoot=e.merkleRoot,t.time=e.time,t.bits=e.bits,t.nonce=e.nonce,t._hash=e.hash,t._hhash=e.hash,t}toHeaders(){return this}static fromBlock(e){const t=new this(e);return t._hash=e._hash,t._hhash=e._hhash,t}toJSON(){return this.getJSON()}getJSON(e,t,r){return{hash:this.rhash(),height:r,version:this.version,prevBlock:a.revHex(this.prevBlock),merkleRoot:a.revHex(this.merkleRoot),time:this.time,bits:this.bits,nonce:this.nonce}}fromJSON(e){return this.parseJSON(e),this}static fromJSON(e){return(new this).fromJSON(e)}[c](){return this.format()}format(e,t){return{hash:this.rhash(),height:null!=t?t:-1,date:a.date(this.time),version:this.version.toString(16),prevBlock:a.revHex(this.prevBlock),merkleRoot:a.revHex(this.merkleRoot),time:this.time,bits:this.bits,nonce:this.nonce}}static isHeaders(e){return e instanceof u}}r.exports=u}],["bcoin","/lib/golomb/golomb.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),{U64:a}=__browser_require__(100,r),h=__browser_require__(33,r),{sipmod:c}=__browser_require__(189,r),u=__browser_require__(24,r),{BufferSet:f}=__browser_require__(86,r),l=__browser_require__(191,r),d=__browser_require__(192,r),p=Buffer.alloc(0),b=new a(-1),g=new a(784931);function m(e,t,r){const[i,s]=c(e,t,r.hi,r.lo);return a.fromBits(i,s)}function _(e,t){return e.cmp(t)}r.exports=class{constructor(){this.n=0,this.p=0,this.m=g,this.data=p}hash(e){const t=h.digest(this.toNBytes());return"hex"===e?t.toString("hex"):t}header(e){return h.root(this.hash(),e)}match(e,t){const r=new d(this.data),i=m(t,e,this.m);let s=new a(0);for(;s.lt(i);){const e=this.readU64(r);if(e===b)return!1;if(e.iadd(s),e.eq(i))return!0;s=e}return!1}matchAny(e,t){t=new f(t),o(t.size>0);const r=new d(this.data),i=new a(0),s=[];for(const r of t){const t=m(r,e,this.m);s.push(t)}s.sort(_);let n=s[0],h=1;for(;;){const e=i.cmp(n);if(0===e)break;if(e>0){if(h<s.length){n=s[h],h+=1;continue}return!1}const t=this.readU64(r);if(t===b)return!1;i.iadd(t)}return!0}readU64(e){try{return this._readU64(e)}catch(e){if("EOF"===e.message)return b;throw e}}_readU64(e){const t=new a(0);for(;e.readBit();)t.iaddn(1);const r=e.readBits64(this.p);return t.ishln(this.p).ior(r)}toBytes(){return this.data}toNBytes(){const e=u.write();return e.writeVarint(this.n),e.writeBytes(this.data),e.render()}toPBytes(){const e=Buffer.allocUnsafe(1+this.data.length);return e.writeUInt8(this.p,0),this.data.copy(e,1),e}toNPBytes(){const e=Buffer.allocUnsafe(5+this.data.length);return e.writeUInt32BE(this.n,0),e.writeUInt8(this.p,4),this.data.copy(e,5),e}toRaw(){return o(19===this.p),this.toNBytes()}fromItems(e,t,r){o("number"==typeof e&&isFinite(e)),o(e>=0&&e<=32),r=new f(r),o(null!=t&&!0===t._isBuffer),o(16===t.length),o(r.size>=0),o(r.size<=4294967295),this.p=e,this.n=r.size,this.m=g.mul(new a(this.n));const i=[];for(const e of r){o(null!=e&&!0===e._isBuffer);const r=m(e,t,this.m);i.push(r)}i.sort(_);const s=new l;let n=new a(0);for(const e of i){const t=e.sub(n).imaskn(this.p),r=e.sub(n).isub(t).ishrn(this.p);for(n=e;!r.isZero();)s.writeBit(1),r.isubn(1);s.writeBit(0),s.writeBits64(t,this.p)}return this.data=s.render(),this}fromBytes(e,t,r){return o("number"==typeof e&&isFinite(e)),o("number"==typeof t&&isFinite(t)),o(t>=0&&t<=32),o(null!=r&&!0===r._isBuffer),this.n=e,this.p=t,this.m=g.mul(new a(this.n)),this.data=r,this}fromNBytes(e,t){o("number"==typeof e&&isFinite(e));const r=u.read(t).readVarint();return this.fromBytes(r,e,t.slice(u.sizeVarint(r)))}fromPBytes(e,t){o("number"==typeof e&&isFinite(e)),o(null!=t&&!0===t._isBuffer),o(t.length>=1);const r=t.readUInt8(0);return this.fromBytes(e,r,t.slice(1))}fromNPBytes(e){o(null!=e&&!0===e._isBuffer),o(e.length>=5);const t=e.readUInt32BE(0),r=e.readUInt8(4);return this.fromBytes(t,r,e.slice(5))}fromRaw(e){return this.fromNBytes(19,e)}static fromItems(e,t,r){return(new this).fromItems(e,t,r)}static fromBytes(e,t,r){return(new this).fromBytes(e,t,r)}static fromNBytes(e,t){return(new this).fromNBytes(e,t)}static fromPBytes(e,t){return(new this).fromPBytes(e,t)}static fromNPBytes(e){return(new this).fromNPBytes(e)}static fromRaw(e){return(new this).fromRaw(e)}}}],["bcrypto","/lib/siphash-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(190,r)}],["bcrypto","/lib/js/siphash.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(35,r),a=1/4294967296;function h(e,t){o(null!=e&&!0===e._isBuffer),o(null!=t&&!0===t._isBuffer&&t.length>=16);const r=e.length>>>3,i=new f(1936682341,1886610805),s=new f(1685025377,1852075885),n=new f(1819895653,1852142177),a=new f(1952801890,2037671283),h=new f(e.length<<24,0),c=new f(0,255),u=f.decode(t,0),d=f.decode(t,8),p=i.ixor(u),b=s.ixor(d),g=n.ixor(u),m=a.ixor(d);let _=0;for(let t=0;t<r;t++){const t=f.decode(e,_);m.ixor(t),l(p,b,g,m),l(p,b,g,m),p.ixor(t),_+=8}switch(7&e.length){case 7:h.hi|=e[_+6]<<16;case 6:h.hi|=e[_+5]<<8;case 5:h.hi|=e[_+4];case 4:h.lo|=e[_+3]<<24;case 3:h.lo|=e[_+2]<<16;case 2:h.lo|=e[_+1]<<8;case 1:h.lo|=e[_]}return m.ixor(h),l(p,b,g,m),l(p,b,g,m),p.ixor(h),g.ixor(c),l(p,b,g,m),l(p,b,g,m),l(p,b,g,m),l(p,b,g,m),p.ixor(b),p.ixor(g),p.ixor(m),[p.hi,p.lo]}function c(e,t,r){o("number"==typeof e),o("number"==typeof t),o(null!=r&&!0===r._isBuffer&&r.length>=16);const i=new f(1936682341,1886610805),s=new f(1685025377,1852075885),n=new f(1819895653,1852142177),a=new f(1952801890,2037671283),h=new f(e,t),c=new f(0,255),u=f.decode(r,0),d=f.decode(r,8),p=i.ixor(u),b=s.ixor(d),g=n.ixor(u),m=a.ixor(d);return m.ixor(h),l(p,b,g,m),l(p,b,g,m),p.ixor(h),g.ixor(c),l(p,b,g,m),l(p,b,g,m),l(p,b,g,m),l(p,b,g,m),p.ixor(b),p.ixor(g),p.ixor(m),[p.hi,p.lo]}function u(e,t,r){o("number"==typeof e),o("number"==typeof t),o(null!=r&&!0===r._isBuffer&&r.length>=32);const i=new f(e,t),s=new f(0,255),n=f.decode(r,0),a=f.decode(r,8),h=f.decode(r,16),c=f.decode(r,24);return c.ixor(i),l(n,a,h,c),l(n,a,h,c),n.ixor(i),h.ixor(s),l(n,a,h,c),l(n,a,h,c),l(n,a,h,c),l(n,a,h,c),n.ixor(a),n.ixor(h),n.ixor(c),[n.hi,n.lo]}class f{constructor(e,t){this.hi=0|e,this.lo=0|t}isum(e,t){const r=this,i=r.lo+t|0,s=i>>31,n=r.lo>>31,o=t>>31,a=1&(n&o|~s&(n^o)),h=(r.hi+e|0)+a;return r.hi=0|h,r.lo=i,r}iadd(e){return this.isum(e.hi,e.lo)}ixor(e){return this.hi^=e.hi,this.lo^=e.lo,this}irotl(e){let t=this.hi,r=this.lo,i=this.hi,s=this.lo;return e<32?(t<<=e,t|=r>>>32-e,r<<=e):(t=r<<e-32,r=0),(e=64-e)<32?(s>>>=e,s|=i<<32-e,i>>>=e):(s=i>>>e-32,i=0),this.hi=t|i,this.lo=r|s,this}static mul(e,t){const r=e>>>16,i=65535&e,s=t>>>16,n=65535&t;let o=0,a=0,h=0,c=0;return h+=(c+=i*n)>>>16,a+=(h+=r*n)>>>16,h&=65535,o+=(a+=(h+=i*s)>>>16)>>>16,a&=65535,o+=(a+=r*s)>>>16,o+=(a&=65535)>>>16,new f((o&=65535)<<16|a,(h&=65535)<<16|(c&=65535))}static decode(e,t){const r=d(e,t),i=d(e,t+4);return new f(i,r)}}function l(e,t,r,i){e.iadd(t),t.irotl(13),t.ixor(e),e.irotl(32),r.iadd(i),i.irotl(16),i.ixor(r),e.iadd(i),i.irotl(21),i.ixor(e),r.iadd(t),t.irotl(17),t.ixor(r),r.irotl(32)}function d(e,t){return e[t++]+256*e[t++]+65536*e[t++]+16777216*e[t]}e.native=0,e.siphash=function(e,t){return h(e,t)},e.siphash32=function(e,t){return c(0,e,t)[1]},e.siphash64=function(e,t,r){return c(e,t,r)},e.siphash32k256=function(e,t){return u(0,e,t)[1]},e.siphash64k256=function(e,t,r){return u(e,t,r)},e.sipmod=function(e,t,r,i){const[s,n]=h(e,t);return function(e,t,r,i){const s=f.mul(e,r),n=f.mul(e,i),o=f.mul(r,t),h=f.mul(t,i),c=(n.lo>>>0)+(o.lo>>>0)+(h.hi>>>0),u=(n.hi>>>0)+(o.hi>>>0)+(c*a>>>0),{hi:l,lo:d}=s.isum(u*a|0,0|u);return[l,d]}(s,n,r,i)}}],["bcoin","/lib/golomb/writer.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r);r.exports=class{constructor(){this.stream=[],this.remain=0}writeBit(e){if(0===this.remain&&(this.stream.push(0),this.remain=8),e){const e=this.stream.length-1;this.stream[e]|=1<<this.remain-1}this.remain--}writeByte(e){0===this.remain&&(this.stream.push(0),this.remain=8);const t=this.stream.length-1;this.stream[t]|=e>>8-this.remain&255,this.stream.push(0),this.stream[t+1]=e<<this.remain&255}writeBits(e,t){for(o(t>=0),o(t<=32),e<<=32-t;t>=8;){const r=e>>>24;this.writeByte(r),e<<=8,t-=8}for(;t>0;){const r=e>>>31;this.writeBit(r),e<<=1,t-=1}}writeBits64(e,t){o(t>=0),o(t<=64),t>32?(this.writeBits(e.hi,t-32),this.writeBits(e.lo,32)):this.writeBits(e.lo,t)}render(){const e=Buffer.allocUnsafe(this.stream.length);for(let t=0;t<this.stream.length;t++)e[t]=this.stream[t];return e}}}],["bcoin","/lib/golomb/reader.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),{U64:a}=__browser_require__(100,r);r.exports=class{constructor(e){this.stream=e,this.pos=0,this.remain=8}readBit(){if(this.pos>=this.stream.length)throw new Error("EOF");if(0===this.remain){if(this.pos+=1,this.pos>=this.stream.length)throw new Error("EOF");this.remain=8}return this.remain-=1,this.stream[this.pos]>>this.remain&1}readByte(){if(this.pos>=this.stream.length)throw new Error("EOF");if(0===this.remain){if(this.pos+=1,this.pos>=this.stream.length)throw new Error("EOF");this.remain=8}if(8===this.remain){const e=this.stream[this.pos];return this.pos+=1,e}let e=this.stream[this.pos]&(1<<this.remain)-1;if(e<<=8-this.remain,this.pos+=1,this.pos>=this.stream.length)throw new Error("EOF");return e|=this.stream[this.pos]>>this.remain}readBits(e){o(e>=0),o(e<=32);let t=0;for(;e>=8;)t<<=8,t|=this.readByte(),e-=8;for(;e>0;)t<<=1,t|=this.readBit(),e-=1;return t}readBits64(e){o(e>=0),o(e<=64);const t=new a;return e>32?(t.hi=this.readBits(e-32),t.lo=this.readBits(32)):t.lo=this.readBits(e),t}}}],["bcoin","/lib/blockchain/chainentry.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(10,r),c=__browser_require__(17,r),u=__browser_require__(33,r),f=__browser_require__(20,r),l=__browser_require__(187,r),d=__browser_require__(113,r),{inspectSymbol:p}=__browser_require__(21,r),b=new h(0);class g{constructor(e){this.hash=c.ZERO_HASH,this.version=1,this.prevBlock=c.ZERO_HASH,this.merkleRoot=c.ZERO_HASH,this.time=0,this.bits=0,this.nonce=0,this.height=0,this.chainwork=b,e&&this.fromOptions(e)}fromOptions(e){return o(e,"Block data is required."),o(null!=e.hash&&!0===e.hash._isBuffer),o(e.version>>>0===e.version),o(null!=e.prevBlock&&!0===e.prevBlock._isBuffer),o(null!=e.merkleRoot&&!0===e.merkleRoot._isBuffer),o(e.time>>>0===e.time),o(e.bits>>>0===e.bits),o(e.nonce>>>0===e.nonce),o(e.height>>>0===e.height),o(!e.chainwork||h.isBN(e.chainwork)),this.hash=e.hash,this.version=e.version,this.prevBlock=e.prevBlock,this.merkleRoot=e.merkleRoot,this.time=e.time,this.bits=e.bits,this.nonce=e.nonce,this.height=e.height,this.chainwork=e.chainwork||b,this}static fromOptions(e,t){return(new this).fromOptions(e,t)}getProof(){const e=c.fromCompact(this.bits);return e.isNeg()||e.isZero()?new h(0):g.MAX_CHAINWORK.div(e.iaddn(1))}getChainwork(e){const t=this.getProof();return e?t.iadd(e.chainwork):t}isGenesis(){return 0===this.height}hasUnknown(e){const t=c.VERSION_TOP_MASK,r=c.VERSION_TOP_BITS;return(this.version&t)>>>0===r&&0!=(this.version&e.unknownBits)}hasBit(e){return c.hasBit(this.version,e)}rhash(){return f.revHex(this.hash)}fromBlock(e,t){return this.hash=e.hash(),this.version=e.version,this.prevBlock=e.prevBlock,this.merkleRoot=e.merkleRoot,this.time=e.time,this.bits=e.bits,this.nonce=e.nonce,this.height=t?t.height+1:0,this.chainwork=this.getChainwork(t),this}static fromBlock(e,t){return(new this).fromBlock(e,t)}toRaw(){const e=a.write(116);return e.writeU32(this.version),e.writeHash(this.prevBlock),e.writeHash(this.merkleRoot),e.writeU32(this.time),e.writeU32(this.bits),e.writeU32(this.nonce),e.writeU32(this.height),e.writeBytes(this.chainwork.toArrayLike(Buffer,"le",32)),e.render()}fromRaw(e){const t=a.read(e,!0),r=u.digest(t.readBytes(80));return t.seek(-80),this.hash=r,this.version=t.readU32(),this.prevBlock=t.readHash(),this.merkleRoot=t.readHash(),this.time=t.readU32(),this.bits=t.readU32(),this.nonce=t.readU32(),this.height=t.readU32(),this.chainwork=new h(t.readBytes(32),"le"),this}static fromRaw(e){return(new this).fromRaw(e)}toJSON(){return{hash:f.revHex(this.hash),version:this.version,prevBlock:f.revHex(this.prevBlock),merkleRoot:f.revHex(this.merkleRoot),time:this.time,bits:this.bits,nonce:this.nonce,height:this.height,chainwork:this.chainwork.toString("hex",64)}}fromJSON(e){return o(e,"Block data is required."),o("string"==typeof e.hash),o(e.version>>>0===e.version),o("string"==typeof e.prevBlock),o("string"==typeof e.merkleRoot),o(e.time>>>0===e.time),o(e.bits>>>0===e.bits),o(e.nonce>>>0===e.nonce),o("string"==typeof e.chainwork),this.hash=f.fromRev(e.hash),this.version=e.version,this.prevBlock=f.fromRev(e.prevBlock),this.merkleRoot=f.fromRev(e.merkleRoot),this.time=e.time,this.bits=e.bits,this.nonce=e.nonce,this.height=e.height,this.chainwork=new h(e.chainwork,"hex"),this}static fromJSON(e){return(new this).fromJSON(e)}toHeaders(){return l.fromEntry(this)}toInv(){return new d(d.types.BLOCK,this.hash)}[p](){const e=this.toJSON();return e.version=e.version.toString(16),e}static isChainEntry(e){return e instanceof g}}g.MAX_CHAINWORK=new h(1).ushln(256),r.exports=g}],["bcoin","/lib/blockchain/chain.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(195,r),h=__browser_require__(196,r),c=__browser_require__(198,r),{Lock:u}=__browser_require__(203,r),f=__browser_require__(139,r),{BufferMap:l}=__browser_require__(86,r),d=__browser_require__(14,r),p=__browser_require__(175,r),b=__browser_require__(206,r),g=__browser_require__(17,r),m=__browser_require__(20,r),_=__browser_require__(193,r),w=__browser_require__(128,r),y=__browser_require__(89,r),{VerifyError:v}=__browser_require__(207,r),E=b.thresholdStates;class S{constructor(e){this.network=d.primary,this.logger=c.global,this.blocks=null,this.workers=null,this.prefix=null,this.location=null,this.memory=!0,this.maxFiles=64,this.cacheSize=32<<20,this.compression=!0,this.spv=!1,this.bip91=!1,this.bip148=!1,this.prune=!1,this.forceFlags=!1,this.entryCache=5e3,this.maxOrphans=20,this.checkpoints=!0,e&&this.fromOptions(e)}fromOptions(e){return e.spv||o(e.blocks&&"object"==typeof e.blocks,"Chain requires a blockstore."),this.blocks=e.blocks,null!=e.network&&(this.network=d.get(e.network)),null!=e.logger&&(o("object"==typeof e.logger),this.logger=e.logger),null!=e.workers&&(o("object"==typeof e.workers),this.workers=e.workers),null!=e.spv&&(o("boolean"==typeof e.spv),this.spv=e.spv),null!=e.prefix&&(o("string"==typeof e.prefix),this.prefix=e.prefix,this.location=this.spv?a.join(this.prefix,"spvchain"):a.join(this.prefix,"chain")),null!=e.location&&(o("string"==typeof e.location),this.location=e.location),null!=e.memory&&(o("boolean"==typeof e.memory),this.memory=e.memory),null!=e.maxFiles&&(o(e.maxFiles>>>0===e.maxFiles),this.maxFiles=e.maxFiles),null!=e.cacheSize&&(o(Number.isSafeInteger(e.cacheSize)),o(e.cacheSize>=0),this.cacheSize=e.cacheSize),null!=e.compression&&(o("boolean"==typeof e.compression),this.compression=e.compression),null!=e.prune&&(o("boolean"==typeof e.prune),this.prune=e.prune),null!=e.forceFlags&&(o("boolean"==typeof e.forceFlags),this.forceFlags=e.forceFlags),null!=e.bip91&&(o("boolean"==typeof e.bip91),this.bip91=e.bip91),null!=e.bip148&&(o("boolean"==typeof e.bip148),this.bip148=e.bip148),null!=e.entryCache&&(o(e.entryCache>>>0===e.entryCache),this.entryCache=e.entryCache),null!=e.maxOrphans&&(o(e.maxOrphans>>>0===e.maxOrphans),this.maxOrphans=e.maxOrphans),null!=e.checkpoints&&(o("boolean"==typeof e.checkpoints),this.checkpoints=e.checkpoints),this}static fromOptions(e){return(new S).fromOptions(e)}}class I{constructor(){this.flags=y.flags.MANDATORY_VERIFY_FLAGS,this.flags&=~y.flags.VERIFY_P2SH,this.lockFlags=b.lockFlags.MANDATORY_LOCKTIME_FLAGS,this.bip34=!1,this.bip91=!1,this.bip148=!1}hasP2SH(){return 0!=(this.flags&y.flags.VERIFY_P2SH)}hasBIP34(){return this.bip34}hasBIP66(){return 0!=(this.flags&y.flags.VERIFY_DERSIG)}hasCLTV(){return 0!=(this.flags&y.flags.VERIFY_CHECKLOCKTIMEVERIFY)}hasMTP(){return 0!=(this.lockFlags&b.lockFlags.MEDIAN_TIME_PAST)}hasCSV(){return 0!=(this.flags&y.flags.VERIFY_CHECKSEQUENCEVERIFY)}hasWitness(){return 0!=(this.flags&y.flags.VERIFY_WITNESS)}hasBIP91(){return this.bip91}hasBIP148(){return this.bip148}}class k{constructor(e,t,r){this.block=e,this.flags=t,this.id=r,this.time=m.now()}}function A(e,t){return e-t}r.exports=class extends h{constructor(e){super(),this.opened=!1,this.options=new S(e),this.network=this.options.network,this.logger=this.options.logger.context("chain"),this.blocks=this.options.blocks,this.workers=this.options.workers,this.db=new p(this.options),this.locker=new u(!0,l),this.invalid=new f(100,null,l),this.state=new I,this.tip=new _,this.height=-1,this.synced=!1,this.orphanMap=new l,this.orphanPrev=new l}async open(){o(!this.opened,"Chain is already open."),this.opened=!0,this.logger.info("Chain is loading."),this.options.checkpoints&&this.logger.info("Checkpoints are enabled."),this.options.bip91&&this.logger.warning("BIP91 enabled. Segsignal will be enforced."),this.options.bip148&&this.logger.warning("BIP148 enabled. UASF will be enforced."),await this.db.open();const e=await this.db.getTip();o(e),this.tip=e,this.height=e.height,this.logger.info("Chain Height: %d",e.height),this.logger.memory();const t=await this.getDeploymentState();this.setDeploymentState(t),this.logger.memory(),this.emit("tip",e),this.maybeSync()}async close(){return o(this.opened,"Chain is not open."),this.opened=!1,this.db.close()}async verifyContext(e,t,r){const i=await this.verify(e,t,r);return this.options.spv?[new w,i]:this.isHistorical(t)?[await this.updateInputs(e,t),i]:(i.hasBIP34()||await this.verifyDuplicates(e,t),[await this.verifyInputs(e,t,i),i])}async verifyBlock(e){const t=await this.locker.lock();try{return await this._verifyBlock(e)}finally{t()}}async _verifyBlock(e){const t=b.flags.DEFAULT_FLAGS&~b.flags.VERIFY_POW;return this.verifyContext(e,this.tip,t)}isMainHash(e){return this.db.isMainHash(e)}isMainChain(e){return this.db.isMainChain(e)}getAncestor(e,t){return this.db.getAncestor(e,t)}getPrevious(e){return this.db.getPrevious(e)}getPrevCache(e){return this.db.getPrevCache(e)}getNext(e){return this.db.getNext(e)}getNextEntry(e){return this.db.getNextEntry(e)}async getMedianTime(e,t){let r=g.MEDIAN_TIMESPAN;const i=[];null!=t&&(i.push(t),r-=1);let s=e;for(let e=0;e<r&&s;e++){i.push(s.time);const e=this.getPrevCache(s);s=e||await this.getPrevious(s)}return i.sort(A),i[i.length>>>1]}isHistorical(e){return!!(this.options.checkpoints&&e.height+1<=this.network.lastCheckpoint)}async verify(e,t,r){if(o("number"==typeof r),!e.prevBlock.equals(t.hash))throw new v(e,"invalid","bad-prevblk",0);const i=e.hash();if(!this.verifyCheckpoint(t,i))throw new v(e,"checkpoint","checkpoint mismatch",100);if(this.isHistorical(t)){if(this.options.spv)return this.state;if(r&b.flags.VERIFY_BODY){o("function"==typeof e.createMerkleRoot);const t=e.createMerkleRoot();if(!t||!e.merkleRoot.equals(t))throw new v(e,"invalid","bad-txnmrklroot",100,!0);r&=~b.flags.VERIFY_BODY}if(!e.hasWitness()&&!e.getCommitmentHash())return new I}if(r&b.flags.VERIFY_BODY){const[t,r,i]=e.checkBody();if(!t)throw new v(e,"invalid",r,i,!0)}const s=await this.getTarget(e.time,t);if(e.bits!==s)throw new v(e,"invalid","bad-diffbits",100);if(this.options.spv)return this.state;const n=await this.getMedianTime(t);if(e.time<=n)throw new v(e,"invalid","time-too-old",0);if(e.time>this.network.now()+7200)throw new v(e,"invalid","time-too-new",0,!0);const a=t.height+1;if(e.version<2&&a>=this.network.block.bip34height)throw new v(e,"obsolete","bad-version",0);if(e.version<3&&a>=this.network.block.bip66height)throw new v(e,"obsolete","bad-version",0);if(e.version<4&&a>=this.network.block.bip65height)throw new v(e,"obsolete","bad-version",0);const h=await this.getDeployments(e.time,t);if(h.hasBIP91()||h.hasBIP148()){const{segwit:t}=this.network.deployments;if(!g.hasBit(e.version,t.bit))throw new v(e,"invalid","bad-no-segwit",0)}const c=h.hasMTP()?n:e.time;for(const t of e.txs)if(!t.isFinal(a,c))throw new v(e,"invalid","bad-txns-nonfinal",10);if(h.hasBIP34()&&e.getCoinbaseHeight()!==a)throw new v(e,"invalid","bad-cb-height",100);let u=null;if(h.hasWitness()&&(u=e.getCommitmentHash())){if(!e.getWitnessNonce())throw new v(e,"invalid","bad-witness-nonce-size",100,!0);if(!u.equals(e.createCommitmentHash()))throw new v(e,"invalid","bad-witness-merkle-match",100,!0)}if(!u&&e.hasWitness())throw new v(e,"invalid","unexpected-witness",100,!0);if(e.getWeight()>g.MAX_BLOCK_WEIGHT)throw new v(e,"invalid","bad-blk-weight",100);return h}async getDeployments(e,t){const r=this.network.deployments,i=t.height+1,s=new I;e>=g.BIP16_TIME&&(s.flags|=y.flags.VERIFY_P2SH),i>=this.network.block.bip34height&&(s.bip34=!0),i>=this.network.block.bip66height&&(s.flags|=y.flags.VERIFY_DERSIG),i>=this.network.block.bip65height&&(s.flags|=y.flags.VERIFY_CHECKLOCKTIMEVERIFY),await this.isActive(t,r.csv)&&(s.flags|=y.flags.VERIFY_CHECKSEQUENCEVERIFY,s.lockFlags|=b.lockFlags.VERIFY_SEQUENCE,s.lockFlags|=b.lockFlags.MEDIAN_TIME_PAST);const n=await this.getState(t,r.segwit);if(n===E.ACTIVE&&(s.flags|=y.flags.VERIFY_WITNESS,s.flags|=y.flags.VERIFY_NULLDUMMY),this.options.bip91&&n===E.STARTED&&await this.isActive(t,r.segsignal)&&(s.bip91=!0),this.options.bip148&&this.network===d.main&&n!==E.LOCKED_IN&&n!==E.ACTIVE){const r=await this.getMedianTime(t,e);r>=1501545600&&r<=1510704e3&&(s.bip148=!0)}return s}setDeploymentState(e){this.options.checkpoints&&this.height<this.network.lastCheckpoint?this.state=e:(!this.state.hasP2SH()&&e.hasP2SH()&&this.logger.warning("P2SH has been activated."),!this.state.hasBIP34()&&e.hasBIP34()&&this.logger.warning("BIP34 has been activated."),!this.state.hasBIP66()&&e.hasBIP66()&&this.logger.warning("BIP66 has been activated."),!this.state.hasCLTV()&&e.hasCLTV()&&this.logger.warning("BIP65 has been activated."),!this.state.hasCSV()&&e.hasCSV()&&this.logger.warning("CSV has been activated."),!this.state.hasWitness()&&e.hasWitness()&&this.logger.warning("Segwit has been activated."),!this.state.hasBIP91()&&e.hasBIP91()&&this.logger.warning("BIP91 has been activated."),!this.state.hasBIP148()&&e.hasBIP148()&&this.logger.warning("BIP148 has been activated."),this.state=e)}async verifyDuplicates(e,t){for(const r of e.txs){if(!await this.hasCoins(r))continue;const i=t.height+1,s=this.network.bip30[i];if(!s||!e.hash().equals(s))throw new v(e,"invalid","bad-txns-BIP30",100)}}async updateInputs(e,t){const r=new w,i=t.height+1,s=e.txs[0];r.addTX(s,i);for(let t=1;t<e.txs.length;t++){const s=e.txs[t];o(await r.spendInputs(this.db,s),"BUG: Spent inputs in historical data!"),r.addTX(s,i)}return r}async verifyInputs(e,t,r){const i=new w,s=t.height+1,n=this.network.halvingInterval;let o=0,a=0;for(let n=0;n<e.txs.length;n++){const h=e.txs[n];if(n>0&&!await i.spendInputs(this.db,h))throw new v(e,"invalid","bad-txns-inputs-missingorspent",100);if(n>0&&h.version>=2&&!await this.verifyLocks(t,h,i,r.lockFlags))throw new v(e,"invalid","bad-txns-nonfinal",100);if((o+=h.getSigopsCost(i,r.flags))>g.MAX_BLOCK_SIGOPS_COST)throw new v(e,"invalid","bad-blk-sigops",100);if(n>0){const[t,r,n]=h.checkInputs(i,s);if(-1===t)throw new v(e,"invalid",r,n);if((a+=t)>g.MAX_MONEY)throw new v(e,"invalid","bad-txns-accumulated-fee-outofrange",100)}i.addTX(h,s)}if(a+=g.getReward(s,n),e.getClaimed()>a)throw new v(e,"invalid","bad-cb-amount",100);const h=[];for(let t=1;t<e.txs.length;t++){const s=e.txs[t];h.push(s.verifyAsync(i,r.flags,this.workers))}const c=await Promise.all(h);for(const t of c)if(!t)throw new v(e,"invalid","mandatory-script-verify-flag-failed",100);return i}async findFork(e,t){for(;!e.hash.equals(t.hash);){for(;t.height>e.height;)if(!(t=await this.getPrevious(t)))throw new Error("No previous entry for new tip.");if(e.hash.equals(t.hash))return e;if(!(e=await this.getPrevious(e)))throw new Error("No previous entry for old tip.")}return e}async reorganize(e){const t=this.tip,r=await this.findFork(t,e);o(r,"No free space or data corruption.");const i=[];let s=t;for(;!s.hash.equals(r.hash);)i.push(s),s=await this.getPrevious(s),o(s);const n=[];for(s=e;!s.hash.equals(r.hash);)n.push(s),s=await this.getPrevious(s),o(s);for(let e=0;e<i.length;e++){const t=i[e];await this.disconnect(t)}for(let e=n.length-1;e>=1;e--){const t=n[e];await this.reconnect(t)}this.logger.warning("Chain reorganization: old=%h(%d) new=%h(%d)",t.hash,t.height,e.hash,e.height),await this.emitAsync("reorganize",t,e)}async reorganizeSPV(e){const t=this.tip,r=await this.findFork(t,e);o(r,"No free space or data corruption.");const i=[];let s=t;for(;!s.hash.equals(r.hash);)i.push(s),s=await this.getPrevious(s),o(s);await this._reset(r.hash,!0);for(const e of i){const t=e.toHeaders(),r=new w;await this.emitAsync("disconnect",e,t,r)}return this.logger.warning("SPV reorganization: old=%h(%d) new=%h(%d)",t.hash,t.height,e.hash,e.height),this.logger.warning("Chain replay from height %d necessary.",r.height),this.emitAsync("reorganize",t,e)}async disconnect(e){let t=await this.getBlock(e.hash);if(!t){if(!this.options.spv)throw new Error("Block not found.");t=e.toHeaders()}const r=await this.getPrevious(e),i=await this.db.disconnect(e,t);return o(r),this.tip=r,this.height=r.height,this.emit("tip",r),this.emitAsync("disconnect",e,t,i)}async reconnect(e){const t=b.flags.VERIFY_NONE;let r=await this.getBlock(e.hash);if(!r){if(!this.options.spv)throw new Error("Block not found.");r=e.toHeaders()}const i=await this.getPrevious(e);let s,n;o(i);try{[s,n]=await this.verifyContext(r,i,t)}catch(t){throw"VerifyError"===t.type&&(t.malleated||this.setInvalid(e.hash),this.logger.warning("Tried to reconnect invalid block: %h (%d).",e.hash,e.height)),t}return await this.db.reconnect(e,r,s),this.tip=e,this.height=e.height,this.setDeploymentState(n),this.emit("tip",e),this.emit("reconnect",e,r),this.emitAsync("connect",e,r,s)}async setBestChain(e,t,r,i){if(!e.prevBlock.equals(this.tip.hash)){if(this.logger.warning("WARNING: Reorganizing chain."),this.options.spv)return this.reorganizeSPV(e);await this.reorganize(e)}let s,n;e.hasUnknown(this.network)&&this.logger.warning("Unknown version bits in block %d: %s.",e.height,e.version.toString(16));try{[s,n]=await this.verifyContext(t,r,i)}catch(t){throw"VerifyError"===t.type&&(t.malleated||this.setInvalid(e.hash),this.logger.warning("Tried to connect invalid block: %h (%d).",e.hash,e.height)),t}return await this.db.save(e,t,s),this.tip=e,this.height=e.height,this.setDeploymentState(n),this.emit("tip",e),this.emit("block",t,e),this.emitAsync("connect",e,t,s)}async saveAlternate(e,t,r,i){if(this.options.checkpoints&&r.height+1<this.network.lastCheckpoint)throw new v(t,"checkpoint","bad-fork-prior-to-checkpoint",100);try{await this.verify(t,r,i)}catch(t){throw"VerifyError"===t.type&&(t.malleated||this.setInvalid(e.hash),this.logger.warning("Invalid block on alternate chain: %h (%d).",e.hash,e.height)),t}e.hasUnknown(this.network)&&this.logger.warning("Unknown version bits in block %d: %s.",e.height,e.version.toString(16)),await this.db.save(e,t),this.logger.warning("Heads up: Competing chain at height %d: tip-height=%d competitor-height=%d tip-hash=%h competitor-hash=%h tip-chainwork=%s competitor-chainwork=%s chainwork-diff=%s",e.height,this.tip.height,e.height,this.tip.hash,e.hash,this.tip.chainwork.toString(),e.chainwork.toString(),this.tip.chainwork.sub(e.chainwork).toString()),this.emit("competitor",t,e)}async reset(e){const t=await this.locker.lock();try{return await this._reset(e,!1)}finally{t()}}async _reset(e,t){const r=await this.db.reset(e);this.tip=r,this.height=r.height,this.synced=!1;const i=await this.getDeploymentState();this.setDeploymentState(i),this.emit("tip",r),t||await this.emitAsync("reset",r),this.purgeOrphans(),this.maybeSync()}async replay(e){const t=await this.locker.lock();try{return await this._replay(e,!0)}finally{t()}}async _replay(e,t){const r=await this.getEntry(e);if(!r)throw new Error("Block not found.");if(!await this.isMainChain(r))throw new Error("Cannot reset on alternate chain.");r.isGenesis()?await this._reset(r.hash,t):await this._reset(r.prevBlock,t)}async invalidate(e){const t=await this.locker.lock();try{return await this._invalidate(e)}finally{t()}}async _invalidate(e){await this._replay(e,!1),this.setInvalid(e)}async prune(){const e=await this.locker.lock();try{return await this.db.prune()}finally{e()}}async scan(e,t,r){const i=await this.locker.lock();try{return await this.db.scan(e,t,r)}finally{i()}}async add(e,t,r){const i=e.hash(),s=await this.locker.lock(i);try{return await this._add(e,t,r)}finally{s()}}async _add(e,t,r){const i=e.hash();if(null==t&&(t=b.flags.DEFAULT_FLAGS),null==r&&(r=-1),i.equals(this.network.genesis.hash))throw this.logger.debug("Saw genesis block: %h.",e.hash()),new v(e,"duplicate","duplicate",0);if(this.hasPending(i))throw this.logger.debug("Already have pending block: %h.",e.hash()),new v(e,"duplicate","duplicate",0);if(this.hasOrphan(i))throw this.logger.debug("Already have orphan block: %h.",e.hash()),new v(e,"duplicate","duplicate",0);if(this.hasInvalid(e))throw this.logger.debug("Invalid ancestors for block: %h.",e.hash()),new v(e,"duplicate","duplicate",100);if(t&b.flags.VERIFY_POW&&!e.verifyPOW())throw new v(e,"invalid","high-hash",50);if(await this.hasEntry(i))throw this.logger.debug("Already have block: %h.",e.hash()),new v(e,"duplicate","duplicate",0);const s=await this.getEntry(e.prevBlock);if(!s)return this.storeOrphan(e,t,r),null;const n=await this.connect(s,e,t);return this.hasNextOrphan(i)&&await this.handleOrphans(n),n}async connect(e,t,r){const i=m.bench();if(o(t.prevBlock.equals(e.hash)),t.isMemory())try{t=t.toBlock()}catch(e){throw this.logger.error(e),new v(t,"malformed","error parsing message",10,!0)}const s=_.fromBlock(t,e);return s.chainwork.lte(this.tip.chainwork)?await this.saveAlternate(s,t,e,r):await this.setBestChain(s,t,e,r),this.logStatus(i,t,s),this.maybeSync(),s}async handleOrphans(e){let t=this.resolveOrphan(e.hash);for(;t;){const{block:r,flags:i,id:s}=t;try{e=await this.connect(e,r,i)}catch(e){if("VerifyError"===e.type){this.logger.warning("Could not resolve orphan block %h: %s.",r.hash(),e.message),this.emit("bad orphan",e,s);break}throw e}this.logger.debug("Orphan block was resolved: %h (%d).",r.hash(),e.height),this.emit("resolved",r,e),t=this.resolveOrphan(e.hash)}}isSlow(){return!this.options.spv&&(!!this.synced||1===this.height||this.height%20==0||this.height>=this.network.block.slowHeight)}logStatus(e,t,r){if(!this.isSlow())return;this.logger.memory();const i=m.bench(e);this.logger.info("Block %h (%d) added to chain (size=%d txs=%d time=%d).",r.hash,r.height,t.getSize(),t.txs.length,i)}verifyCheckpoint(e,t){if(!this.options.checkpoints)return!0;const r=e.height+1,i=this.network.checkpointMap[r];return!i||(t.equals(i)?(this.logger.debug("Hit checkpoint block %h (%d).",t,r),this.emit("checkpoint",t,r),!0):(this.logger.warning("Checkpoint mismatch at height %d: expected=%h received=%h",r,i,t),this.purgeOrphans(),!1))}storeOrphan(e,t,r){const i=e.getCoinbaseHeight(),s=this.orphanPrev.get(e.prevBlock);s&&(o(!s.block.hash().equals(e.hash())),o(s.block.prevBlock.equals(e.prevBlock)),this.logger.warning("Removing forked orphan block: %h (%d).",s.block.hash(),i),this.removeOrphan(s)),this.limitOrphans(),this.addOrphan(new k(e,t,r)),this.logger.debug("Storing orphan block: %h (%d).",e.hash(),i),this.emit("orphan",e)}addOrphan(e){const t=e.block,r=t.hash();return o(!this.orphanMap.has(r)),o(!this.orphanPrev.has(t.prevBlock)),o(this.orphanMap.size>=0),this.orphanMap.set(r,e),this.orphanPrev.set(t.prevBlock,e),e}removeOrphan(e){const t=e.block,r=t.hash();return o(this.orphanMap.has(r)),o(this.orphanPrev.has(t.prevBlock)),o(this.orphanMap.size>0),this.orphanMap.delete(r),this.orphanPrev.delete(t.prevBlock),e}hasNextOrphan(e){return this.orphanPrev.has(e)}resolveOrphan(e){const t=this.orphanPrev.get(e);return t?this.removeOrphan(t):null}purgeOrphans(){const e=this.orphanMap.size;0!==e&&(this.orphanMap.clear(),this.orphanPrev.clear(),this.logger.debug("Purged %d orphans.",e))}limitOrphans(){const e=m.now();let t=null;for(const r of this.orphanMap.values())e<r.time+3600?(!t||r.time<t.time)&&(t=r):this.removeOrphan(r);this.orphanMap.size<this.options.maxOrphans||t&&this.removeOrphan(t)}hasInvalid(e){const t=e.hash();return!!this.invalid.has(t)||!!this.invalid.has(e.prevBlock)&&(this.setInvalid(t),!0)}setInvalid(e){this.invalid.set(e,!0)}removeInvalid(e){this.invalid.remove(e)}async has(e){return!!this.hasOrphan(e)||!!this.locker.has(e)||!!this.invalid.has(e)||this.hasEntry(e)}getEntry(e){return this.db.getEntry(e)}getEntryByHeight(e){return this.db.getEntryByHeight(e)}getEntryByHash(e){return this.db.getEntryByHash(e)}getHash(e){return this.db.getHash(e)}getHeight(e){return this.db.getHeight(e)}hasEntry(e){return this.db.hasEntry(e)}getNextHash(e){return this.db.getNextHash(e)}hasCoins(e){return this.db.hasCoins(e)}getTips(){return this.db.getTips()}getHashes(e=-1,t=-1){return this.db.getHashes(e,t)}readCoin(e){return this.db.readCoin(e)}getCoin(e,t){return this.db.getCoin(e,t)}getBlock(e){return this.db.getBlock(e)}getRawBlock(e){return this.db.getRawBlock(e)}getBlockView(e){return this.db.getBlockView(e)}getOrphan(e){return this.orphanMap.get(e)||null}hasOrphan(e){return this.orphanMap.has(e)}hasPending(e){return this.locker.pending(e)}getCoinView(e){return this.db.getCoinView(e)}isFull(){return this.synced}maybeSync(){this.synced||this.options.checkpoints&&this.height<this.network.lastCheckpoint||this.tip.time<m.now()-this.network.block.maxTipAge||this.hasChainwork()&&(this.synced=!0,this.emit("full"))}hasChainwork(){return this.tip.chainwork.gte(this.network.pow.chainwork)}getProgress(){const e=this.network.genesis.time,t=this.tip.time-e,r=m.now()-e-2400;return Math.min(1,t/r)}async getLocator(e){const t=await this.locker.lock();try{return await this._getLocator(e)}finally{t()}}async _getLocator(e){null==e&&(e=this.tip.hash),o(null!=e&&!0===e._isBuffer);let t=await this.getEntry(e);const r=[];t||(t=this.tip,r.push(e));let i=await this.isMainChain(t),s=t.hash,n=t.height,a=1;for(r.push(s);n>0;){if((n-=a)<0&&(n=0),r.length>10&&(a*=2),i)s=await this.getHash(n),o(s);else{const e=await this.getAncestor(t,n);o(e),i=await this.isMainChain(e),s=e.hash}r.push(s)}return r}getOrphanRoot(e){let t=null;for(o(e);;){const r=this.orphanMap.get(e);if(!r)break;t=e,e=r.block.prevBlock}return t}getProofTime(e,t){const r=this.network.pow;let i,s;return e.chainwork.gt(t.chainwork)?(s=e.chainwork.sub(t.chainwork),i=1):(s=t.chainwork.sub(e.chainwork),i=-1),(s=(s=s.imuln(r.targetSpacing)).div(this.tip.getProof())).bitLength()>53?i*Number.MAX_SAFE_INTEGER:i*s.toNumber()}async getCurrentTarget(){return this.getTarget(this.network.now(),this.tip)}async getTarget(e,t){const r=this.network.pow;if(!t)return o(e===this.network.genesis.time),r.bits;if((t.height+1)%r.retargetInterval!=0){if(r.targetReset){if(e>t.time+2*r.targetSpacing)return r.bits;for(;0!==t.height&&t.height%r.retargetInterval!=0&&t.bits===r.bits;){const e=this.getPrevCache(t);t=e||await this.getPrevious(t),o(t)}}return t.bits}const i=t.height-(r.retargetInterval-1);o(i>=0);const s=await this.getAncestor(t,i);return o(s),this.retarget(t,s)}retarget(e,t){const r=this.network.pow,i=r.targetTimespan;if(r.noRetargeting)return e.bits;const s=g.fromCompact(e.bits);let n=e.time-t.time;return n<i/4|0&&(n=i/4|0),n>4*i&&(n=4*i),s.imuln(n),s.idivn(i),s.gt(r.limit)?r.bits:g.toCompact(s)}async findLocator(e){for(const t of e)if(await this.isMainHash(t))return t;return this.network.genesis.hash}async isActive(e,t){return await this.getState(e,t)===E.ACTIVE}async getState(e,t){const r=t.bit;if(-1===t.startTime)return E.ACTIVE;let i=this.network.minerWindow,s=this.network.activationThreshold;if(-1!==t.threshold&&(s=t.threshold),-1!==t.window&&(i=t.window),(e.height+1)%i!=0){const t=e.height-(e.height+1)%i;if(!(e=await this.getAncestor(e,t)))return E.DEFINED;o(e.height===t),o((e.height+1)%i==0)}let n=e,a=E.DEFINED;const h=[];for(;n;){const e=this.db.stateCache.get(r,n);if(-1!==e){a=e;break}if(await this.getMedianTime(n)<t.startTime){a=E.DEFINED,this.db.stateCache.set(r,n,a);break}h.push(n);const s=n.height-i;n=await this.getAncestor(n,s)}for(;h.length;){const e=h.pop();switch(a){case E.DEFINED:{const r=await this.getMedianTime(e);if(r>=t.timeout){a=E.FAILED;break}if(r>=t.startTime){a=E.STARTED;break}break}case E.STARTED:{if(await this.getMedianTime(e)>=t.timeout){a=E.FAILED;break}let n=e,h=0;for(let e=0;e<i;e++){if(n.hasBit(r)&&h++,h>=s){a=E.LOCKED_IN;break}n=await this.getPrevious(n),o(n)}break}case E.LOCKED_IN:a=E.ACTIVE;break;case E.FAILED:case E.ACTIVE:break;default:o(!1,"Bad state.")}this.db.stateCache.set(r,e,a)}return a}async computeBlockVersion(e){let t=0;for(const r of this.network.deploys){const i=await this.getState(e,r);i!==E.LOCKED_IN&&i!==E.STARTED||(t|=1<<r.bit)}return t|=g.VERSION_TOP_BITS,t>>>=0}async getDeploymentState(){const e=await this.getPrevious(this.tip);return e?this.options.spv?this.state:this.getDeployments(this.tip.time,e):(o(this.tip.isGenesis()),this.state)}async verifyFinal(e,t,r){const i=e.height+1;if(t.locktime<g.LOCKTIME_THRESHOLD)return t.isFinal(i,-1);if(r&b.lockFlags.MEDIAN_TIME_PAST){const r=await this.getMedianTime(e);return t.isFinal(i,r)}return t.isFinal(i,this.network.now())}async getLocks(e,t,r,i){const s=g.SEQUENCE_GRANULARITY,n=g.SEQUENCE_DISABLE_FLAG,a=g.SEQUENCE_TYPE_FLAG,h=g.SEQUENCE_MASK;if(!(i&b.lockFlags.VERIFY_SEQUENCE))return[-1,-1];if(t.isCoinbase()||t.version<2)return[-1,-1];let c=-1,u=-1;for(const{prevout:i,sequence:f}of t.inputs){if(f&n)continue;let t=r.getHeight(i);if(-1===t&&(t=this.height+1),!(f&a)){t+=(f&h)-1,c=Math.max(c,t);continue}t=Math.max(t-1,0);const l=await this.getAncestor(e,t);o(l,"Database is corrupt.");let d=await this.getMedianTime(l);d+=((f&h)<<s)-1,u=Math.max(u,d)}return[c,u]}async verifyLocks(e,t,r,i){const[s,n]=await this.getLocks(e,t,r,i);return!(-1!==s&&s>=e.height+1)&&!(-1!==n&&n>=await this.getMedianTime(e))}}}],["bpkg","/lib/builtins/path.js",function(e,t,r,i,s,n){"use strict";function o(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function a(e,t){for(var r,i="",s=0,n=-1,o=0,a=0;a<=e.length;++a){if(a<e.length)r=e.charCodeAt(a);else{if(47===r)break;r=47}if(47===r){if(n===a-1||1===o);else if(n!==a-1&&2===o){if(i.length<2||2!==s||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){var h=i.lastIndexOf("/");if(h!==i.length-1){-1===h?(i="",s=0):s=(i=i.slice(0,h)).length-1-i.lastIndexOf("/"),n=a,o=0;continue}}else if(2===i.length||1===i.length){i="",s=0,n=a,o=0;continue}t&&(i.length>0?i+="/..":i="..",s=2)}else i.length>0?i+="/"+e.slice(n+1,a):i=e.slice(n+1,a),s=a-n-1;n=a,o=0}else 46===r&&-1!==o?++o:o=-1}return i}var h={resolve:function(){for(var e,t="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var s;i>=0?s=arguments[i]:(e===undefined&&(e=process.cwd()),s=e),o(s),0!==s.length&&(t=s+"/"+t,r=47===s.charCodeAt(0))}return t=a(t,!r),r?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(e){if(o(e),0===e.length)return".";var t=47===e.charCodeAt(0),r=47===e.charCodeAt(e.length-1);return 0!==(e=a(e,!t)).length||t||(e="."),e.length>0&&r&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return o(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var r=arguments[t];o(r),r.length>0&&(e===undefined?e=r:e+="/"+r)}return e===undefined?".":h.normalize(e)},relative:function(e,t){if(o(e),o(t),e===t)return"";if((e=h.resolve(e))===(t=h.resolve(t)))return"";for(var r=1;r<e.length&&47===e.charCodeAt(r);++r);for(var i=e.length,s=i-r,n=1;n<t.length&&47===t.charCodeAt(n);++n);for(var a=t.length-n,c=s<a?s:a,u=-1,f=0;f<=c;++f){if(f===c){if(a>c){if(47===t.charCodeAt(n+f))return t.slice(n+f+1);if(0===f)return t.slice(n+f)}else s>c&&(47===e.charCodeAt(r+f)?u=f:0===f&&(u=0));break}var l=e.charCodeAt(r+f);if(l!==t.charCodeAt(n+f))break;47===l&&(u=f)}var d="";for(f=r+u+1;f<=i;++f)f!==i&&47!==e.charCodeAt(f)||(0===d.length?d+="..":d+="/..");return d.length>0?d+t.slice(n+u):(n+=u,47===t.charCodeAt(n)&&++n,t.slice(n))},_makeLong:function(e){return e},dirname:function(e){if(o(e),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,i=-1,s=!0,n=e.length-1;n>=1;--n)if(47===(t=e.charCodeAt(n))){if(!s){i=n;break}}else s=!1;return-1===i?r?"/":".":r&&1===i?"//":e.slice(0,i)},basename:function(e,t){if(t!==undefined&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');o(e);var r,i=0,s=-1,n=!0;if(t!==undefined&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var a=t.length-1,h=-1;for(r=e.length-1;r>=0;--r){var c=e.charCodeAt(r);if(47===c){if(!n){i=r+1;break}}else-1===h&&(n=!1,h=r+1),a>=0&&(c===t.charCodeAt(a)?-1==--a&&(s=r):(a=-1,s=h))}return i===s?s=h:-1===s&&(s=e.length),e.slice(i,s)}for(r=e.length-1;r>=0;--r)if(47===e.charCodeAt(r)){if(!n){i=r+1;break}}else-1===s&&(n=!1,s=r+1);return-1===s?"":e.slice(i,s)},extname:function(e){o(e);for(var t=-1,r=0,i=-1,s=!0,n=0,a=e.length-1;a>=0;--a){var h=e.charCodeAt(a);if(47!==h)-1===i&&(s=!1,i=a+1),46===h?-1===t?t=a:1!==n&&(n=1):-1!==t&&(n=-1);else if(!s){r=a+1;break}}return-1===t||-1===i||0===n||1===n&&t===i-1&&t===r+1?"":e.slice(t,i)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,i=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+i:r+e+i:i}("/",e)},parse:function(e){o(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var r,i=e.charCodeAt(0),s=47===i;s?(t.root="/",r=1):r=0;for(var n=-1,a=0,h=-1,c=!0,u=e.length-1,f=0;u>=r;--u)if(47!==(i=e.charCodeAt(u)))-1===h&&(c=!1,h=u+1),46===i?-1===n?n=u:1!==f&&(f=1):-1!==n&&(f=-1);else if(!c){a=u+1;break}return-1===n||-1===h||0===f||1===f&&n===h-1&&n===a+1?-1!==h&&(t.base=t.name=0===a&&s?e.slice(1,h):e.slice(a,h)):(0===a&&s?(t.name=e.slice(1,n),t.base=e.slice(1,h)):(t.name=e.slice(a,n),t.base=e.slice(a,h)),t.ext=e.slice(n,h)),a>0?t.dir=e.slice(0,a-1):s&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};h.posix=h,r.exports=h}],["bevent","/lib/bevent.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(197,r)}],["bevent","/lib/asyncemitter.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r);class a{constructor(e,t){o("function"==typeof e,"`handler` must be a function."),o("boolean"==typeof t,"`once` must be a function."),this.handler=e,this.once=t}}function h(e,t){if(0===t)return void e.shift();let r=t+1;for(;r<e.length;)e[t++]=e[r++];e.pop()}r.exports=class{constructor(){this._events=Object.create(null)}addListener(e,t){return this._push(e,t,!1)}on(e,t){return this.addListener(e,t)}once(e,t){return this._push(e,t,!0)}prependListener(e,t){return this._unshift(e,t,!1)}prependOnceListener(e,t){return this._unshift(e,t,!0)}_push(e,t,r){o("string"==typeof e,"`type` must be a string."),this._events[e]||(this._events[e]=[]),this.emit("newListener",e,t),this._events[e].push(new a(t,r))}_unshift(e,t,r){o("string"==typeof e,"`type` must be a string."),this._events[e]||(this._events[e]=[]),this.emit("newListener",e,t),this._events[e].unshift(new a(t,r))}removeListener(e,t){o("string"==typeof e,"`type` must be a string.");const r=this._events[e];if(!r)return;let i=-1;for(let e=0;e<r.length;e++)if(r[e].handler===t){i=e;break}-1!==i&&(h(r,i),0===r.length&&delete this._events[e],this.emit("removeListener",e,t))}setMaxListeners(e){o("number"==typeof e,"`max` must be a number."),o(e>=0,"`max` must be non-negative."),o(Number.isSafeInteger(e),"`max` must be an integer.")}removeAllListeners(e){0!==arguments.length?(o("string"==typeof e,"`type` must be a string."),delete this._events[e]):this._events=Object.create(null)}listeners(e){o("string"==typeof e,"`type` must be a string.");const t=this._events[e];if(!t)return[];const r=[];for(const{handler:e}of t)r.push(e);return r}listenerCount(e){o("string"==typeof e,"`type` must be a string.");const t=this._events[e];return t?t.length:0}eventNames(){return Object.keys(this._events)}emit(e){try{this._emit.apply(this,arguments)}catch(t){if("error"===e)throw t;this._emit("error",t)}}_emit(e){o("string"==typeof e,"`type` must be a string.");const t=this._events[e];if(!t){if("error"===e){const e=arguments[1];if(e instanceof Error)throw e;const t=new Error(`Uncaught, unspecified "error" event. (${e})`);throw t.context=e,t}return}o(t.length>0);let r=null;for(let i=0;i<t.length;i++){const s=t[i],n=s.handler;switch(s.once&&(h(t,i),0===t.length&&delete this._events[e],i-=1),arguments.length){case 1:n();break;case 2:n(arguments[1]);break;case 3:n(arguments[1],arguments[2]);break;case 4:n(arguments[1],arguments[2],arguments[3]);break;default:if(!r){r=new Array(arguments.length-1);for(let e=1;e<arguments.length;e++)r[e-1]=arguments[e]}n.apply(null,r)}}}async emitAsync(e){try{await this._emitAsync.apply(this,arguments)}catch(t){if("error"===e)throw t;await this._emitAsync("error",t)}}async _emitAsync(e){o("string"==typeof e,"`type` must be a string.");const t=this._events[e];if(!t){if("error"===e){const e=arguments[1];if(e instanceof Error)throw e;const t=new Error(`Uncaught, unspecified "error" event. (${e})`);throw t.context=e,t}return}o(t.length>0);let r=null;for(let i=0;i<t.length;i++){const s=t[i],n=s.handler;switch(s.once&&(h(t,i),0===t.length&&delete this._events[e],i-=1),arguments.length){case 1:await n();break;case 2:await n(arguments[1]);break;case 3:await n(arguments[1],arguments[2]);break;case 4:await n(arguments[1],arguments[2],arguments[3]);break;default:if(!r){r=new Array(arguments.length-1);for(let e=1;e<arguments.length;e++)r[e-1]=arguments[e]}await n.apply(null,r)}}}}}],["blgr","/lib/blgr.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(199,r)}],["blgr","/lib/logger.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(200,r),h=__browser_require__(202,r);class c{constructor(e){this.level=c.levels.NONE,this.colors=c.HAS_TTY,this.console=!0,this.shrink=!0,this.closed=!0,this.closing=!1,this.filename=null,this.stream=null,this.contexts=Object.create(null),e&&this.set(e)}set(e){o(e),o(this.closed),"string"!=typeof e?(null!=e.level&&(o("string"==typeof e.level),this.setLevel(e.level)),null!=e.colors&&c.HAS_TTY&&(o("boolean"==typeof e.colors),this.colors=e.colors),null!=e.console&&(o("boolean"==typeof e.console),this.console=e.console),null!=e.shrink&&(o("boolean"==typeof e.shrink),this.shrink=e.shrink),null!=e.filename&&(o("string"==typeof e.filename,"Bad file."),this.filename=e.filename)):this.setLevel(e)}async open(){this.filename?this.stream?this.closed=!1:h.unsupported?this.closed=!1:(this.shrink&&await this.truncate(),this.stream=await l(this.filename),this.stream.once("error",this.handleError.bind(this)),this.closed=!1):this.closed=!1}async close(){if(null!=this.timer&&(clearTimeout(this.timer),this.timer=null),h.unsupported)return this.closed=!0,void(this.stream=null);if(this.stream){try{this.closing=!0,await(e=this.stream,new Promise((t,r)=>{const i=()=>{e.removeListener("error",s),e.removeListener("close",n)},s=e=>{i(),r(e)},n=()=>{i(),t(e)};e.removeAllListeners("error"),e.removeAllListeners("close"),e.once("error",s),e.once("close",n),e.close()}))}finally{this.closing=!1}this.stream=null}var e;this.closed=!0}async truncate(){if(!this.filename)return;if(h.unsupported)return;let e;o(!this.stream);try{e=await h.stat(this.filename)}catch(e){if("ENOENT"===e.code)return;throw e}const t=c.MAX_FILE_SIZE;if(e.size<=t+t/10)return;this.debug("Truncating log file to %dmb.",f(t));const r=await h.open(this.filename,"r+"),i=Buffer.allocUnsafe(t);await h.read(r,i,0,t,e.size-t),await h.ftruncate(r,t),await h.write(r,i,0,t,0),await h.close(r)}handleError(e){try{this.stream.close()}catch(e){}this.stream=null,this.retry()}async reopen(){if(!this.stream&&!this.closed&&!h.unsupported){try{this.stream=await l(this.filename)}catch(e){return void this.retry()}this.stream.once("error",e=>this.handleError(e))}}retry(){null==this.timer&&(this.timer=setTimeout(()=>{this.timer=null,this.reopen()},1e4))}setFile(e){o("string"==typeof e),o(!this.stream,"Log stream has already been created."),this.filename=e}setLevel(e){const t=c.levels[e.toUpperCase()];o(null!=t,"Invalid log level."),this.level=t}error(...e){if(this.level<c.levels.ERROR)return;const t=e[0];t instanceof Error?this.logError(c.levels.ERROR,null,t):this.log(c.levels.ERROR,null,e)}warning(...e){if(this.level<c.levels.WARNING)return;const t=e[0];t instanceof Error?this.logError(c.levels.WARNING,null,t):this.log(c.levels.WARNING,null,e)}info(...e){if(this.level<c.levels.INFO)return;const t=e[0];t instanceof Error?this.logError(c.levels.INFO,null,t):this.log(c.levels.INFO,null,e)}debug(...e){if(this.level<c.levels.DEBUG)return;const t=e[0];t instanceof Error?this.logError(c.levels.DEBUG,null,t):this.log(c.levels.DEBUG,null,e)}spam(...e){if(this.level<c.levels.SPAM)return;const t=e[0];t instanceof Error?this.logError(c.levels.SPAM,null,t):this.log(c.levels.SPAM,null,e)}log(e,t,r){this.closed||this.level<e||(this.writeConsole(e,t,r),this.writeStream(e,t,r))}context(e){let t=this.contexts[e];return t||(t=new u(this,e),this.contexts[e]=t),t}writeConsole(e,t,r){const i=c.levelsByVal[e];if(o(i,"Invalid log level."),!this.console)return!1;if(!process.stdout){let s=`[${i}] `;if(t&&(s+=`(${t}) `),r.length>0){const[t]=r;if(t&&"object"==typeof t)return e===c.levels.ERROR?console.error(s,t):console.log(s,t)}return s+=a(r,!1),e===c.levels.ERROR?console.error(s):console.log(s),!0}let s;if(this.colors){const t=c.styles[e];o(t),s=`[${t}m[${i}][m `}else s=`[${i}] `;return t&&(s+=`(${t}) `),s+=a(r,this.colors),s+="\n",e===c.levels.ERROR?process.stderr.write(s):process.stdout.write(s)}writeStream(e,t,r){const i=c.prefixByVal[e];if(o(i,"Invalid log level."),!this.stream)return;if(this.closing)return;let s=`[${i}:${(new Date).toISOString().slice(0,-5)+"Z"}] `;t&&(s+=`(${t}) `),s+=a(r,!1),s+="\n",this.stream.write(s)}logError(e,t,r){if(this.closed)return;h.unsupported&&this.console&&e<=c.levels.WARNING&&console.error(r);let i=String(r.message).replace(/^ *Error: */,"");e!==c.levels.ERROR&&(i=`Error: ${i}`),this.log(e,t,[i]),e<=c.levels.WARNING&&this.stream&&this.stream.write(r.stack+"\n")}memoryUsage(){if(!process.memoryUsage)return{total:0,jsHeap:0,jsHeapTotal:0,nativeHeap:0,external:0};const e=process.memoryUsage();return{total:f(e.rss),jsHeap:f(e.heapUsed),jsHeapTotal:f(e.heapTotal),nativeHeap:f(e.rss-e.heapTotal),external:f(e.external)}}memory(e){const t=this.memoryUsage();this.log(c.levels.DEBUG,e,["Memory: rss=%dmb, js-heap=%d/%dmb native-heap=%dmb",t.total,t.jsHeap,t.jsHeapTotal,t.nativeHeap])}}class u{constructor(e,t){o("string"==typeof t),this.logger=e,this.module=t}open(){return this.logger.open()}close(){return this.logger.close()}setFile(e){this.logger.setFile(e)}setLevel(e){this.logger.setLevel(e)}error(...e){if(this.logger.level<c.levels.ERROR)return;const t=e[0];t instanceof Error?this.logError(c.levels.ERROR,t):this.log(c.levels.ERROR,e)}warning(...e){if(this.logger.level<c.levels.WARNING)return;const t=e[0];t instanceof Error?this.logError(c.levels.WARNING,t):this.log(c.levels.WARNING,e)}info(...e){if(this.logger.level<c.levels.INFO)return;const t=e[0];t instanceof Error?this.logError(c.levels.INFO,t):this.log(c.levels.INFO,e)}debug(...e){if(this.logger.level<c.levels.DEBUG)return;const t=e[0];t instanceof Error?this.logError(c.levels.DEBUG,t):this.log(c.levels.DEBUG,e)}spam(...e){if(this.logger.level<c.levels.SPAM)return;const t=e[0];t instanceof Error?this.logError(c.levels.SPAM,t):this.log(c.levels.SPAM,e)}log(e,t){this.logger.log(e,this.module,t)}context(e){return new u(this.logger,e)}logError(e,t){this.logger.logError(e,this.module,t)}memoryUsage(){return this.logger.memoryUsage()}memory(){this.logger.memory(this.module)}}function f(e){return Math.floor(e/(1<<20))}function l(e){return new Promise((t,r)=>{const i=h.createWriteStream(e,{flags:"a"}),s=()=>{i.removeListener("error",n),i.removeListener("open",o)},n=e=>{try{i.close()}catch(e){}s(),r(e)},o=()=>{s(),t(i)};i.once("error",n),i.once("open",o)})}c.HAS_TTY=Boolean(process.stdout&&process.stdout.isTTY),c.MAX_FILE_SIZE=20<<20,c.levels={NONE:0,ERROR:1,WARNING:2,INFO:3,DEBUG:4,SPAM:5},c.levelsByVal=["none","error","warning","info","debug","spam"],c.prefixByVal=["N","E","W","I","D","S"],c.styles=["0","1;31","1;33","94","90","90"],c.global=new c,r.exports=c}],["blgr","/lib/format.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(201,r),a={showHidden:!1,depth:20,colors:!1,customInspect:!0,showProxy:!1,maxArrayLength:1e4,breakLength:60,compact:!0};function h(e){try{return JSON.stringify(e)}catch(e){return"[error]"}}function c(e,t){if(null==e)return"null";if(null==e||!0!==e._isBuffer){let r=(e>>>0).toString(16);for(;r.length<8;)r="0"+r;return t&&(r=u(r)),`0x${r}`}const r=e.toString("hex");return t?u(r):r}function u(e){let t="";for(let r=e.length-2;r>=0;r-=2)t+=e[r]+e[r+1];return t}function f(e){return"bigint"==typeof e?`${e}n`:`${parseInt(e)}`}r.exports=function(e,t){if(0===e.length)return"";const r=e[0];if(a.colors=t,"string"!=typeof r)return o(r,a);if(1===e.length)return r;let i,s="",n=1,u=0;for(let t=0;t<r.length-1;t++){if(37!==r.charCodeAt(t))continue;const d=r.charCodeAt(++t);if(n!==e.length){switch(d){case 115:i=String(e[n++]);break;case 106:i=h(e[n++]);break;case 100:l=e[n++],i="bigint"==typeof l?`${l}n`:`${Number(l)}`;break;case 79:case 111:i=o(e[n++],a);break;case 105:i=f(e[n++]);break;case 102:i=`${parseFloat(e[n++])}`;break;case 120:i=c(e[n++],!1);break;case 104:i=c(e[n++],!0);break;case 37:s+=r.slice(u,t),u=t+1;continue;default:continue}u!==t-1&&(s+=r.slice(u,t-1)),s+=i,u=t+1}else 37===d&&(s+=r.slice(u,t),u=t+1)}var l;for(0===u?s=r:u<r.length&&(s+=r.slice(u));n<e.length;){const t=e[n++];s+="object"!=typeof t&&"symbol"!=typeof t||null===t?` ${t}`:` ${o(t,a)}`}return s}}],["blgr","/lib/inspect-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=function(e){if(e===undefined)return"undefined";if(e!=e)return"NaN";try{return JSON.stringify(e,null,2)}catch(e){return"{}"}}}],["blgr","/lib/fs-browser.js",function(e,t,r,i,s,n){"use strict";e.unsupported=!0}],["bmutex","/lib/bmutex.js",function(e,t,r,i,s,n){"use strict";e.Lock=__browser_require__(204,r),e.MapLock=__browser_require__(205,r)}],["bmutex","/lib/lock.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r);class a{constructor(e=!1,t){o("boolean"==typeof e),o(!t||"function"==typeof t),this.named=e,this.jobs=[],this.busy=!1,this.destroyed=!1,this.map=t?new t:new Map,this.current=null,this.unlocker=this.unlock.bind(this)}static create(e,t){const r=new a(e,t);return function(e,t){return r.lock(e,t)}}has(e){if(o(this.named,"Must use named jobs."),this.current)if(null!=e&&!0===e._isBuffer){if(this.current.equals(e))return!0}else if(this.current===e)return!0;return this.pending(e)}pending(e){o(this.named,"Must use named jobs.");const t=this.map.get(e);return null!=t&&t>0}lock(e,t){let r,i;if(this.named?(r=e||null,i=t||!1):(r=null,i=e||!1),this.destroyed)return Promise.reject(new Error("Lock is destroyed."));if(i)return o(this.busy),Promise.resolve(c);if(this.busy){if(r){const e=this.map.get(r)||0;this.map.set(r,e+1)}return new Promise((e,t)=>{this.jobs.push(new h(e,t,r))})}return this.busy=!0,this.current=r,Promise.resolve(this.unlocker)}unlock(){if(o(this.destroyed||this.busy),this.busy=!1,this.current=null,0===this.jobs.length)return;o(!this.destroyed);const e=this.jobs.shift();if(e.name){let t=this.map.get(e.name);o(t>0),0==--t?this.map.delete(e.name):this.map.set(e.name,t)}this.busy=!0,this.current=e.name,e.resolve(this.unlocker)}destroy(){o(!this.destroyed,"Lock is already destroyed."),this.destroyed=!0;const e=this.jobs;this.busy=!1,this.jobs=[],this.map.clear(),this.current=null;for(const t of e)t.reject(new Error("Lock was destroyed."))}}class h{constructor(e,t,r){this.resolve=e,this.reject=t,this.name=r||null}}function c(){}r.exports=a}],["bmutex","/lib/maplock.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r);class a{constructor(e,t){o(!e||"function"==typeof e),o(!t||"function"==typeof t),this.Map=e||Map,this.Set=t||Set,this.jobs=new this.Map,this.busy=new this.Set,this.destroyed=!1}static create(e,t){const r=new a(e,t);return function(e,t){return r.lock(e,t)}}has(e){return this.busy.has(e)}pending(e){return this.jobs.has(e)}lock(e,t=!1){return this.destroyed?Promise.reject(new Error("Lock is destroyed.")):null==e?Promise.resolve(c):t?(o(this.busy.has(e)),Promise.resolve(c)):this.busy.has(e)?new Promise((t,r)=>{this.jobs.has(e)||this.jobs.set(e,[]),this.jobs.get(e).push(new h(t,r))}):(this.busy.add(e),Promise.resolve(this._unlock(e)))}_unlock(e){const t=this;return function r(){t.unlock(e,r)}}unlock(e,t=undefined){const r=this.jobs.get(e);if(o(this.destroyed||this.busy.has(e)),this.busy.delete(e),!r)return;o(!this.destroyed);const i=r.shift();o(i),0===r.length&&this.jobs.delete(e),this.busy.add(e),i.resolve(t)}destroy(){o(!this.destroyed,"Lock is already destroyed.");const e=this.jobs;this.destroyed=!0,this.jobs=new this.Map,this.busy=new this.Set;for(const t of e.values())for(const e of t)e.reject(new Error("Lock was destroyed."))}}class h{constructor(e,t){this.resolve=e,this.reject=t}}function c(){}r.exports=a}],["bcoin","/lib/blockchain/common.js",function(e,t,r,i,s,n){"use strict";e.lockFlags={VERIFY_SEQUENCE:1,MEDIAN_TIME_PAST:2},e.lockFlags.MANDATORY_LOCKTIME_FLAGS=0,e.lockFlags.STANDARD_LOCKTIME_FLAGS=0|e.lockFlags.VERIFY_SEQUENCE|e.lockFlags.MEDIAN_TIME_PAST,e.thresholdStates={DEFINED:0,STARTED:1,LOCKED_IN:2,ACTIVE:3,FAILED:4},e.flags={VERIFY_NONE:0,VERIFY_POW:1,VERIFY_BODY:2},e.flags.DEFAULT_FLAGS=0|e.flags.VERIFY_POW|e.flags.VERIFY_BODY}],["bcoin","/lib/protocol/errors.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r);class a extends Error{constructor(e,t,r,i,s){super(),o("string"==typeof t),o("string"==typeof r),o(i>=0),this.type="VerifyError",this.message="",this.code=t,this.reason=r,this.score=i,this.hash=e.hash(),this.malleated=s||!1,this.message=`Verification failure: ${r}`+` (code=${t} score=${i} hash=${e.rhash()})`,Error.captureStackTrace&&Error.captureStackTrace(this,a)}}e.VerifyError=a}],["bcoin","/lib/btc/index.js",function(e,t,r,i,s,n){"use strict";e.Amount=__browser_require__(88,r),e.URI=__browser_require__(209,r)}],["bcoin","/lib/btc/uri.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(104,r),h=__browser_require__(88,r),{inspectSymbol:c}=__browser_require__(21,r);class u{constructor(){this.amount=null,this.label=null,this.message=null,this.r=null}}function f(e){try{e=(e=decodeURIComponent(e)).replace(/\+/g," ")}catch(e){throw new Error("Malformed URI.")}if(-1!==e.indexOf("\0"))throw new Error("Malformed URI.");return e}function l(e){return e=(e=encodeURIComponent(e)).replace(/%20/g,"+")}r.exports=class{constructor(e){this.address=new a,this.amount=-1,this.label=null,this.message=null,this.request=null,e&&this.fromOptions(e)}fromOptions(e){return"string"==typeof e?this.fromString(e):(e.address&&this.address.fromOptions(e.address),null!=e.amount&&(o(Number.isSafeInteger(e.amount)&&e.amount>=0,"Amount must be a uint64."),this.amount=e.amount),e.label&&(o("string"==typeof e.label,"Label must be a string."),this.label=e.label),e.message&&(o("string"==typeof e.message,"Message must be a string."),this.message=e.message),e.request&&(o("string"==typeof e.request,"Request must be a string."),this.request=e.request),this)}static fromOptions(e){return(new this).fromOptions(e)}fromString(e,t){o("string"==typeof e),o(e.length>8,"Not a bitcoin URI.");const r=e.substring(0,8);o("bitcoin:"===r,"Not a bitcoin URI.");const i=(e=e.substring(8)).indexOf("?");let s,n;if(-1===i?s=e:(s=e.substring(0,i),n=e.substring(i+1)),this.address.fromString(s,t),!n)return this;const a=function(e){const t=e.split("&"),r=new u;let i=0;for(const e of t){const t=e.indexOf("=");let s,n;if(-1===t?(s=e,n=""):(s=e.substring(0,t),n=e.substring(t+1)),0!==s.length){switch(o(i<4,"Too many keys in querystring."),s){case"amount":o(null==r.amount,"Duplicate key in querystring (amount)."),r.amount=f(n);break;case"label":o(null==r.label,"Duplicate key in querystring (label)."),r.label=f(n);break;case"message":o(null==r.message,"Duplicate key in querystring (message)."),r.message=f(n);break;case"r":o(null==r.r,"Duplicate key in querystring (r)."),r.r=f(n);break;default:o(!1,`Unknown querystring key: ${n}.`)}i+=1}else o(0===n.length,"Empty key in querystring.")}return r}(n);return a.amount&&(o(a.amount.length>0,"Value is empty."),o("-"!==a.amount[0],"Value is negative."),this.amount=h.value(a.amount)),a.label&&(this.label=a.label),a.message&&(this.message=a.message),a.r&&(this.request=a.r),this}static fromString(e,t){return(new this).fromString(e,t)}toString(){let e="bitcoin:";e+=this.address.toString();const t=[];return-1!==this.amount&&t.push(`amount=${h.btc(this.amount)}`),this.label&&t.push(`label=${l(this.label)}`),this.message&&t.push(`message=${l(this.message)}`),this.request&&t.push(`r=${l(this.request)}`),t.length>0&&(e+="?"+t.join("&")),e}[c](){return`<URI: ${this.toString()}>`}}}],["bcoin","/lib/client/index.js",function(e,t,r,i,s,n){"use strict";e.NodeClient=__browser_require__(211,r),e.WalletClient=__browser_require__(230,r)}],["bcoin","/lib/client/node.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),{Client:a}=__browser_require__(212,r);r.exports=class extends a{constructor(e){super(e)}async auth(){await this.call("auth",this.password),await this.watchChain(),await this.watchMempool()}execute(e,t){return super.execute("/",e,t)}getMempool(){return this.get("/mempool")}getInfo(){return this.get("/")}getCoinsByAddress(e){return o("string"==typeof e),this.get(`/coin/address/${e}`)}getCoinsByAddresses(e){return o(Array.isArray(e)),this.post("/coin/address",{addresses:e})}getCoin(e,t){return o("string"==typeof e),o(t>>>0===t),this.get(`/coin/${e}/${t}`)}getTXByAddress(e){return o("string"==typeof e),this.get(`/tx/address/${e}`)}getTXByAddresses(e){return o(Array.isArray(e)),this.post("/tx/address",{addresses:e})}getTX(e){return o("string"==typeof e),this.get(`/tx/${e}`)}getBlock(e){return o("string"==typeof e||"number"==typeof e),this.get(`/block/${e}`)}getBlockHeader(e){return o("string"==typeof e||"number"==typeof e),this.get(`/header/${e}`)}getFilter(e){return o("string"==typeof e||"number"==typeof e),this.get(`/filter/${e}`)}broadcast(e){return o("string"==typeof e),this.post("/broadcast",{tx:e})}reset(e){return this.post("/reset",{height:e})}watchChain(){return this.call("watch chain")}watchMempool(){return this.call("watch mempool")}getTip(){return this.call("get tip")}getEntry(e){return this.call("get entry",e)}getHashes(e,t){return this.call("get hashes",e,t)}send(e){return o(null!=e&&!0===e._isBuffer),this.call("send",e)}setFilter(e){return o(null!=e&&!0===e._isBuffer),this.call("set filter",e)}addFilter(e){return Array.isArray(e)||(e=[e]),this.call("add filter",e)}resetFilter(){return this.call("reset filter")}estimateFee(e){o(null==e||"number"==typeof e);let t="/fee";return null!=e&&(t+=`?blocks=${e}`),this.get(t)}rescan(e){return null==e&&(e=0),o("number"==typeof e||"string"==typeof e),this.call("rescan",e)}}}],["bcurl","/lib/bcurl.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(213,r);e.Client=o,e.client=(e=>new o(e))}],["bcurl","/lib/client.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(19,r),h=__browser_require__(214,r),c=__browser_require__(217,r),u=__browser_require__(227,r);class f{constructor(e){this.ssl=!1,this.host="localhost",this.port=80,this.path="/",this.headers=null,this.username=null,this.password=null,this.id=null,this.token=null,this.timeout=5e3,this.limit=null,e&&this.fromOptions(e)}fromOptions(e){if("string"==typeof e&&(e={url:e}),o(e&&"object"==typeof e),null!=e.ssl&&(o("boolean"==typeof e.ssl),this.ssl=e.ssl,this.port=443),null!=e.host&&(o("string"==typeof e.host),this.host=e.host),null!=e.port&&(o((65535&e.port)===e.port),o(0!==e.port),this.port=e.port),null!=e.path&&(o("string"==typeof e.path),this.path=e.path),null!=e.headers&&(o("object"==typeof e.headers),this.headers=e.headers),null!=e.apiKey&&(o("string"==typeof e.apiKey),this.password=e.apiKey),null!=e.key&&(o("string"==typeof e.key),this.password=e.key),null!=e.username&&(o("string"==typeof e.username),this.username=e.username),null!=e.password&&(o("string"==typeof e.password),this.password=e.password),null!=e.url){o("string"==typeof e.url);let t=e.url;-1===t.indexOf("://")&&(t=`http://${t}`);const r=h.parse(t);if("http:"!==r.protocol&&"https:"!==r.protocol)throw new Error("Malformed URL.");if(!r.hostname)throw new Error("Malformed URL.");if("https:"===r.protocol&&(this.ssl=!0,this.port=443),this.host=r.hostname,r.port){const e=parseInt(r.port,10);o((65535&e)===e),o(0!==e),this.port=e}if(this.path=r.pathname,r.auth){const e=r.auth.split(":");this.username=e.shift(),this.password=e.join(":")}}return null!=e.id&&(o("string"==typeof e.id),this.id=e.id),null!=e.token&&(o("string"==typeof e.token),this.token=e.token),null!=e.timeout&&(o("number"==typeof e.timeout),this.timeout=e.timeout),null!=e.limit&&(o("number"==typeof e.limit),this.limit=e.limit),this}}class l extends Error{constructor(e,t){super(),this.type="RPCError",this.message=String(e),this.code=t>>>0,Error.captureStackTrace&&Error.captureStackTrace(this,l)}}r.exports=class extends a{constructor(e){super();const t=new f(e);this.ssl=t.ssl,this.host=t.host,this.port=t.port,this.path=t.path,this.headers=t.headers,this.username=t.username,this.password=t.password,this.id=t.id,this.token=t.token,this.timeout=t.timeout,this.limit=t.limit,this.sequence=0,this.opened=!1,this.socket=c.socket()}clone(){const e=new this.constructor;return e.ssl=this.ssl,e.host=this.host,e.port=this.port,e.path=this.path,e.headers=this.headers,e.username=this.username,e.password=this.password,e.id=this.id,e.token=this.token,e.sequence=this.sequence,e.timeout=this.timeout,e.limit=this.limit,e.opened=this.opened,e.socket=this.socket,e}async open(){const{port:e,host:t,ssl:r}=this;o(!this.opened,"Already opened."),this.opened=!0,this.socket.on("connect",async()=>{try{await this.auth()}catch(e){return void this.emit("error",e)}this.emit("connect")}),this.socket.on("error",e=>{this.emit("error",e)}),this.socket.on("disconnect",()=>{this.emit("disconnect")}),this.socket.connect(e,t,r)}async close(){o(this.opened,"Not opened."),this.opened=!1,this.socket.destroy(),this.socket=c.socket()}async auth(){}hook(...e){return this.socket.hook(...e)}async call(...e){return this.socket.call(...e)}bind(...e){return this.socket.bind(...e)}fire(...e){return this.socket.fire(...e)}async request(e,t,r){o("string"==typeof e),o("string"==typeof t);let i=null;null==r&&(r={}),o(r&&"object"==typeof r),this.token&&(r.token=this.token),"GET"===e&&(i=r,r=null);const s=await u({method:e,ssl:this.ssl,host:this.host,port:this.port,path:this.path+t,username:this.username,password:this.password,headers:this.headers,timeout:this.timeout,limit:this.limit,query:i,pool:!0,json:r});if(404===s.statusCode)return null;if(401===s.statusCode)throw new Error("Unauthorized (bad API key).");if("json"!==s.type)throw new Error("Bad response (wrong content-type).");const n=s.json();if(!n)throw new Error("Bad response (no body).");if(n.error){const{error:e}=n,t=new Error(e.message);throw t.type=String(e.type),t.code=e.code,t}if(200!==s.statusCode)throw new Error(`Status code: ${s.statusCode}.`);return n}get(e,t){return this.request("GET",e,t)}post(e,t){return this.request("POST",e,t)}put(e,t){return this.request("PUT",e,t)}del(e,t){return this.request("DELETE",e,t)}async execute(e,t,r){o("string"==typeof e),o("string"==typeof t),null==r&&(r=null),this.sequence+=1;const i=await u({method:"POST",ssl:this.ssl,host:this.host,port:this.port,path:this.path+e,username:this.username,password:this.password,headers:this.headers,timeout:this.timeout,limit:this.limit,pool:!0,query:this.token?{token:this.token}:undefined,json:{method:t,params:r,id:this.sequence}});if(401===i.statusCode)throw new l("Unauthorized (bad API key).",-1);if("json"!==i.type)throw new Error("Bad response (wrong content-type).");const s=i.json();if(!s)throw new Error("No body for JSON-RPC response.");if(s.error){const{message:e,code:t}=s.error;throw new l(e,t)}if(200!==i.statusCode)throw new Error(`Status code: ${i.statusCode}.`);return s.result}}}],["bpkg","/lib/builtins/url.js",function(e,t,r,i,s,n){var o=[["url","/url.js",function(e,t,r,i,s){"use strict";var n=__browser_require__(215,t),o=h(1);function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=E,e.resolve=function(e,t){return E(e,!1,!0).resolve(t)},e.resolveObject=function(e,t){return e?E(e,!1,!0).resolveObject(t):t},e.format=function(e){o.isString(e)&&(e=E(e));return e instanceof a?e.format():a.prototype.format.call(e)},e.Url=a;var c=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),d=["'"].concat(l),p=["%","/","?",";","#"].concat(d),b=["/","?","#"],g=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=__browser_require__(216,t);function E(e,t,r){if(e&&o.isObject(e)&&e instanceof a)return e;var i=new a;return i.parse(e,t,r),i}a.prototype.parse=function(e,t,r){if(!o.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),s=-1!==i&&i<e.indexOf("#")?"?":"#",a=e.split(s);a[0]=a[0].replace(/\\/g,"/");var h=e=a.join(s);if(h=h.trim(),!r&&1===e.split("#").length){var u=f.exec(h);if(u)return this.path=h,this.href=h,this.pathname=u[1],u[2]?(this.search=u[2],this.query=t?v.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var l=c.exec(h);if(l){var E=(l=l[0]).toLowerCase();this.protocol=E,h=h.substr(l.length)}if(r||l||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===h.substr(0,2);!S||l&&w[l]||(h=h.substr(2),this.slashes=!0)}if(!w[l]&&(S||l&&!y[l])){for(var I,k,A=-1,O=0;O<b.length;O++){-1!==(x=h.indexOf(b[O]))&&(-1===A||x<A)&&(A=x)}-1!==(k=-1===A?h.lastIndexOf("@"):h.lastIndexOf("@",A))&&(I=h.slice(0,k),h=h.slice(k+1),this.auth=decodeURIComponent(I)),A=-1;for(O=0;O<p.length;O++){var x;-1!==(x=h.indexOf(p[O]))&&(-1===A||x<A)&&(A=x)}-1===A&&(A=h.length),this.host=h.slice(0,A),h=h.slice(A),this.parseHost(),this.hostname=this.hostname||"";var R="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!R)for(var M=this.hostname.split(/\./),P=(O=0,M.length);O<P;O++){var B=M[O];if(B&&!B.match(g)){for(var N="",T=0,C=B.length;T<C;T++)B.charCodeAt(T)>127?N+="x":N+=B[T];if(!N.match(g)){var q=M.slice(0,O),j=M.slice(O+1),D=B.match(m);D&&(q.push(D[1]),j.unshift(D[2])),j.length&&(h="/"+j.join(".")+h),this.hostname=q.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),R||(this.hostname=n.toASCII(this.hostname));var U=this.port?":"+this.port:"",L=this.hostname||"";this.host=L+U,this.href+=this.host,R&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==h[0]&&(h="/"+h))}if(!_[E])for(O=0,P=d.length;O<P;O++){var z=d[O];if(-1!==h.indexOf(z)){var F=encodeURIComponent(z);F===z&&(F=escape(z)),h=h.split(z).join(F)}}var H=h.indexOf("#");-1!==H&&(this.hash=h.substr(H),h=h.slice(0,H));var V=h.indexOf("?");if(-1!==V?(this.search=h.substr(V),this.query=h.substr(V+1),t&&(this.query=v.parse(this.query)),h=h.slice(0,V)):t&&(this.search="",this.query={}),h&&(this.pathname=h),y[E]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var K=this.search||"";this.path=U+K}return this.href=this.format(),this},a.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",i=this.hash||"",s=!1,n="";this.host?s=e+this.host:this.hostname&&(s=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(n=v.stringify(this.query));var a=this.search||n&&"?"+n||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==s?(s="//"+(s||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):s||(s=""),i&&"#"!==i.charAt(0)&&(i="#"+i),a&&"?"!==a.charAt(0)&&(a="?"+a),t+s+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(a=a.replace("#","%23"))+i},a.prototype.resolve=function(e){return this.resolveObject(E(e,!1,!0)).format()},a.prototype.resolveObject=function(e){if(o.isString(e)){var t=new a;t.parse(e,!1,!0),e=t}for(var r=new a,i=Object.keys(this),s=0;s<i.length;s++){var n=i[s];r[n]=this[n]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var h=Object.keys(e),c=0;c<h.length;c++){var u=h[c];"protocol"!==u&&(r[u]=e[u])}return y[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!y[e.protocol]){for(var f=Object.keys(e),l=0;l<f.length;l++){var d=f[l];r[d]=e[d]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||w[e.protocol])r.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),r.pathname=p.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var b=r.pathname||"",g=r.search||"";r.path=b+g}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var m=r.pathname&&"/"===r.pathname.charAt(0),_=e.host||e.pathname&&"/"===e.pathname.charAt(0),v=_||m||r.host&&e.pathname,E=v,S=r.pathname&&r.pathname.split("/")||[],I=(p=e.pathname&&e.pathname.split("/")||[],r.protocol&&!y[r.protocol]);if(I&&(r.hostname="",r.port=null,r.host&&(""===S[0]?S[0]=r.host:S.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),v=v&&(""===p[0]||""===S[0])),_)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,S=p;else if(p.length)S||(S=[]),S.pop(),S=S.concat(p),r.search=e.search,r.query=e.query;else if(!o.isNullOrUndefined(e.search)){if(I)r.hostname=r.host=S.shift(),(R=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=R.shift(),r.host=r.hostname=R.shift());return r.search=e.search,r.query=e.query,o.isNull(r.pathname)&&o.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!S.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var k=S.slice(-1)[0],A=(r.host||e.host||S.length>1)&&("."===k||".."===k)||""===k,O=0,x=S.length;x>=0;x--)"."===(k=S[x])?S.splice(x,1):".."===k?(S.splice(x,1),O++):O&&(S.splice(x,1),O--);if(!v&&!E)for(;O--;O)S.unshift("..");!v||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),A&&"/"!==S.join("/").substr(-1)&&S.push("");var R,M=""===S[0]||S[0]&&"/"===S[0].charAt(0);I&&(r.hostname=r.host=M?"":S.length?S.shift():"",(R=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=R.shift(),r.host=r.hostname=R.shift()));return(v=v||r.host&&S.length)&&!M&&S.unshift(""),S.length?r.pathname=S.join("/"):(r.pathname=null,r.path=null),o.isNull(r.pathname)&&o.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},a.prototype.parseHost=function(){var e=this.host,t=u.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}}],["url","/util.js",function(e,t,r,i,s){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}}]],a=[];function h(t){if(t>>>0!==t||t>o.length)return function(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}(t);for(;a.length<=t;)a.push(null);var n=a[t];if(n)return n.exports;var h=o[t],c=h[0],u=h[1],f=h[2],l=e,d=r;0!==t&&(d={id:"/"+c+u,exports:l={},parent:r.parent,filename:r.filename,loaded:!1,children:r.children,paths:r.paths}),a[t]=d;try{f.call(l,l,d,i,s,void 0)}catch(e){throw a[t]=null,e}return o[t]=null,0!==t&&(d.loaded=!0),d.exports}h(0)}],["bpkg","/lib/builtins/punycode.js",function(e,t,r,i,s,n){"use strict";const o=2147483647,a=/^xn--/,h=/[^\0-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,u={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,l=String.fromCharCode;function d(e){throw new RangeError(u[e])}function p(e,t){const r=e.split("@");let i="";r.length>1&&(i=r[0]+"@",e=r[1]);const s=function(e,t){const r=[];let i=e.length;for(;i--;)r[i]=t(e[i]);return r}((e=e.replace(c,".")).split("."),t).join(".");return i+s}function b(e){const t=[];let r=0;const i=e.length;for(;r<i;){const s=e.charCodeAt(r++);if(s>=55296&&s<=56319&&r<i){const i=e.charCodeAt(r++);56320==(64512&i)?t.push(((1023&s)<<10)+(1023&i)+65536):(t.push(s),r--)}else t.push(s)}return t}const g=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},m=function(e,t,r){let i=0;for(e=r?f(e/700):e>>1,e+=f(e/t);e>455;i+=36)e=f(e/35);return f(i+36*e/(e+38))},_=function(e){const t=[],r=e.length;let i=0,s=128,n=72,a=e.lastIndexOf("-");a<0&&(a=0);for(let r=0;r<a;++r)e.charCodeAt(r)>=128&&d("not-basic"),t.push(e.charCodeAt(r));for(let c=a>0?a+1:0;c<r;){let a=i;for(let t=1,s=36;;s+=36){c>=r&&d("invalid-input");const a=(h=e.charCodeAt(c++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:36;(a>=36||a>f((o-i)/t))&&d("overflow"),i+=a*t;const u=s<=n?1:s>=n+26?26:s-n;if(a<u)break;const l=36-u;t>f(o/l)&&d("overflow"),t*=l}const u=t.length+1;n=m(i-a,u,0==a),f(i/u)>o-s&&d("overflow"),s+=f(i/u),i%=u,t.splice(i++,0,s)}var h;return String.fromCodePoint(...t)},w=function(e){const t=[];let r=(e=b(e)).length,i=128,s=0,n=72;for(const r of e)r<128&&t.push(l(r));let a=t.length,h=a;for(a&&t.push("-");h<r;){let r=o;for(const t of e)t>=i&&t<r&&(r=t);const c=h+1;r-i>f((o-s)/c)&&d("overflow"),s+=(r-i)*c,i=r;for(const r of e)if(r<i&&++s>o&&d("overflow"),r==i){let e=s;for(let r=36;;r+=36){const i=r<=n?1:r>=n+26?26:r-n;if(e<i)break;const s=e-i,o=36-i;t.push(l(g(i+s%o,0))),e=f(s/o)}t.push(l(g(e,0))),n=m(s,c,h==a),s=0,++h}++s,++i}return t.join("")},y={version:"2.1.0",ucs2:{decode:b,encode:e=>String.fromCodePoint(...e)},decode:_,encode:w,toASCII:function(e){return p(e,function(e){return h.test(e)?"xn--"+w(e):e})},toUnicode:function(e){return p(e,function(e){return a.test(e)?_(e.slice(4).toLowerCase()):e})}};r.exports=y}],["bpkg","/lib/builtins/querystring.js",function(e,t,r,i,s,n){var o=[["querystring","/index.js",function(e,t,r,i,s){"use strict";e.decode=e.parse=h(1),e.encode=e.stringify=h(2)}],["querystring","/decode.js",function(e,t,r,i,s){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,i){t=t||"&",r=r||"=";var s={};if("string"!=typeof e||0===e.length)return s;var o=/\+/g;e=e.split(t);var a=1e3;i&&"number"==typeof i.maxKeys&&(a=i.maxKeys);var h=e.length;a>0&&h>a&&(h=a);for(var c=0;c<h;++c){var u,f,l,d,p=e[c].replace(o,"%20"),b=p.indexOf(r);b>=0?(u=p.substr(0,b),f=p.substr(b+1)):(u=p,f=""),l=decodeURIComponent(u),d=decodeURIComponent(f),n(s,l)?Array.isArray(s[l])?s[l].push(d):s[l]=[s[l],d]:s[l]=d}return s}}],["querystring","/encode.js",function(e,t,r,i,s){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,r,i){return t=t||"&",r=r||"=",null===e&&(e=undefined),"object"==typeof e?Object.keys(e).map(function(i){var s=encodeURIComponent(n(i))+r;return Array.isArray(e[i])?e[i].map(function(e){return s+encodeURIComponent(n(e))}).join(t):s+encodeURIComponent(n(e[i]))}).join(t):i?encodeURIComponent(n(i))+r+encodeURIComponent(n(e)):""}}]],a=[];function h(t){if(t>>>0!==t||t>o.length)return function(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}(t);for(;a.length<=t;)a.push(null);var n=a[t];if(n)return n.exports;var h=o[t],c=h[0],u=h[1],f=h[2],l=e,d=r;0!==t&&(d={id:"/"+c+u,exports:l={},parent:r.parent,filename:r.filename,loaded:!1,children:r.children,paths:r.paths}),a[t]=d;try{f.call(l,l,d,i,s,void 0)}catch(e){throw a[t]=null,e}return o[t]=null,0!==t&&(d.loaded=!0),d.exports}h(0)}],["bsock","/lib/bsock.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(218,r),a=__browser_require__(219,r),h=__browser_require__(220,r);e.WebSocket=o,e.Server=a,e.server=(()=>new a),e.createServer=a.createServer.bind(a),e.attach=a.attach.bind(a),e.Socket=h,e.socket=(()=>new h),e.connect=h.connect.bind(h)}],["bsock","/lib/backend-browser.js",function(e,t,r,i,s,n){"use strict";r.exports={Client:global.WebSocket||global.MozWebSocket,EventSource:global.EventSource}}],["bsock","/lib/server-browser.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(19,r);r.exports=class extends o{constructor(e){super(),this.sockets=new Set,this.channels=new Map,this.mounts=[]}attach(){return this}mount(){}async open(){}async close(){}join(){return!0}leave(){return!0}channel(){return null}to(){}all(){}static attach(e,t){return new this(t).attach(e)}static createServer(e){return new this(e)}}}],["bsock","/lib/socket.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(19,r),h=__browser_require__(218,r).Client,c=__browser_require__(221,r),u=__browser_require__(222,r),f=__browser_require__(223,r),l=__browser_require__(224,r),d=__browser_require__(225,r),p=__browser_require__(226,r);class b{constructor(e,t,r){this.resolve=e,this.reject=t,this.time=r}}function g(e){return null!==e&&"number"!=typeof e&&"string"!=typeof e?null:e}function m(e){return"string"!=typeof e?"No message.":e}function _(e){return"string"!=typeof e?null:e}function w(e,t,r){if(!e){const e=new TypeError(`'${t}' must be a(n) ${r}.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,w),e}}r.exports=class extends a{constructor(){super(),this.server=null,this.ws=null,this.protocol="",this.url="ws://127.0.0.1:80/socket.io/?transport=websocket",this.ssl=!1,this.host="127.0.0.1",this.port=80,this.inbound=!1,this.handshake=!1,this.opened=!1,this.connected=!1,this.challenge=!1,this.destroyed=!1,this.reconnection=!0,this.time=0,this.sequence=0,this.pingInterval=25e3,this.pingTimeout=6e4,this.lastPing=0,this.parser=new l,this.binary=!1,this.packet=null,this.timer=null,this.jobs=new Map,this.hooks=new Map,this.channels=new Set,this.events=new a,this.buffer=[],this.admin=!1,this.auth=!1}accept(e,t,r,i){o(!this.ws,"Cannot accept twice."),o(e),o(t),o(r),o(r.remoteAddress),o(null!=r.remotePort),o(i);let s="ws",n=r.remoteAddress,a=r.remotePort;return r.encrypted&&(s="wss"),-1!==n.indexOf(":")&&(n=`[${n}]`),a||(a=0),this.server=e,this.binary=-1===t.url.indexOf("b64=1"),this.url=`${s}://${n}:${a}/socket.io/?transport=websocket`,this.ssl="wss"===s,this.host=r.remoteAddress,this.port=r.remotePort,this.inbound=!0,this.ws=i,this.init(),this}connect(e,t,r,i){o(!this.ws,"Cannot connect twice."),"string"==typeof e&&(i=t,[e,t,r]=f.parseURL(e));let s="ws";r&&(s="wss"),t||(t="127.0.0.1"),o("string"==typeof t),o((65535&e)===e,"Must pass a port."),o(!r||"boolean"==typeof r),o(!i||Array.isArray(i));let n=t;-1!==t.indexOf(":")&&"["!==t[0]&&(n=`[${t}]`);const a=`${s}://${n}:${e}/socket.io/?transport=websocket`;return this.binary=!0,this.url=a,this.ssl=r,this.host=t,this.port=e,this.inbound=!1,this.ws=new h(a,i),this.init(),this}init(){this.protocol=this.ws.protocol,this.time=Date.now(),this.observe(),this.parser.on("error",e=>{this.emit("error",e)}),this.parser.on("frame",async e=>{try{await this.handleFrame(e)}catch(e){this.emit("error",e)}}),this.start()}observe(){const e=this.ws;o(e),e.binaryType="arraybuffer",e.onopen=(async()=>{await this.onOpen()}),e.onmessage=(async e=>{await this.onMessage(e)}),e.onerror=(async e=>{await this.onError(e)}),e.onclose=(async e=>{await this.onClose(e)})}async onOpen(){this.destroyed||this.inbound&&(o(!this.opened),o(!this.connected),o(!this.handshake),this.opened=!0,this.handshake=!0,await this.emitAsync("open"),this.sendHandshake(),this.connected=!0,await this.emitAsync("connect"),this.sendConnect())}async emitAsync(e,...t){const r=this.listeners(e);for(const e of r)try{await e(...t)}catch(e){this.emit("error",e)}}async onMessage(e){if(this.destroyed)return;let t;try{t=await function(e){return new Promise((t,r)=>{if("string"!=typeof e)if(e&&"object"==typeof e)if(null==e||!0!==e._isBuffer)if(e instanceof ArrayBuffer){const r=Buffer.from(e);t(r)}else if(e.buffer instanceof ArrayBuffer){const r=Buffer.from(e.buffer,e.byteOffset,e.byteLength);t(r)}else{if("undefined"!=typeof Blob&&Blob&&e instanceof Blob){const r=new FileReader;return r.onloadend=(()=>{const e=Buffer.from(r.result);t(e)}),void r.readAsArrayBuffer(e)}r(new Error("Bad data object."))}else t(e);else r(new Error("Bad data object."));else t(e)})}(e.data)}catch(e){return void this.emit("error",e)}"string"!=typeof t?this.parser.feedBinary(t):this.parser.feedString(t)}async onError(e){this.destroyed||(this.emit("error",new Error(e.message)),this.inbound?this.destroy():this.close())}async onClose(e){if(this.destroyed)return;if(1e3===e.code||1001===e.code)return this.connected||this.emit("error",new Error("Could not connect.")),this.inbound?void this.destroy():void this.close();const t=d[e.code]||"UNKNOWN_CODE",r=`Websocket Closed: ${e.reason||"Unknown reason"} (code=${t}).`,i=new Error(r);i.reason=e.reason||"",i.code=e.code||0,this.emit("error",i),this.inbound?this.destroy():this.reconnection?this.close():this.destroy()}close(){if(!this.destroyed){this.time=Date.now(),this.packet=null,this.handshake=!1,this.connected=!1,this.challenge=!1,this.sequence=0,this.lastPing=0;for(const[e,t]of this.jobs)this.jobs.delete(e),t.reject(new Error("Job timed out."));o(this.ws),this.ws.onopen=(()=>{}),this.ws.onmessage=(()=>{}),this.ws.onerror=(()=>{}),this.ws.onclose=(()=>{}),this.ws.close(),this.emitAsync("disconnect")}}error(e){this.destroyed||this.emit("error",new Error(e))}destroy(){this.destroyed||(this.close(),this.stop(),this.opened=!1,this.destroyed=!0,this.buffer.length=0,this.emitAsync("close"),this.removeAllListeners(),this.on("error",()=>{}))}send(e){this.destroyed||(o(this.ws),e.binary&&this.binary?this.ws.send(e.toRaw()):this.ws.send(e.toString()))}reconnect(){o(!this.inbound),this.close(),this.ws=new h(this.url),this.time=Date.now(),this.observe()}start(){o(this.ws),o(null==this.timer),this.timer=setInterval(()=>this.stall(),5e3)}stop(){null!=this.timer&&(clearInterval(this.timer),this.timer=null)}stall(){const e=Date.now();if(o(this.ws),!this.connected)return e-this.time>1e4?this.inbound||!this.reconnection?(this.error("Timed out waiting for connection."),void this.destroy()):(this.error("Timed out waiting for connection. Reconnecting..."),void this.reconnect()):void 0;for(const[t,r]of this.jobs)e-r.time>6e5&&(this.jobs.delete(t),r.reject(new Error("Job timed out.")));return this.inbound||this.challenge?!this.inbound&&e-this.lastPing>this.pingTimeout?(this.error("Connection is stalling (ping)."),this.inbound?void this.destroy():void this.close()):void 0:(this.challenge=!0,this.lastPing=e,void this.sendPing())}async handleFrame(e){if(this.destroyed)return undefined;switch(e.type){case u.types.OPEN:return this.handleOpen(e);case u.types.CLOSE:return this.handleClose(e);case u.types.PING:return this.handlePing(e);case u.types.PONG:return this.handlePong(e);case u.types.MESSAGE:return this.handleMessage(e);case u.types.UPGRADE:return this.handleUpgrade(e);case u.types.NOOP:return this.handleNoop(e);default:throw new Error("Unknown frame.")}}async handleOpen(e){if(this.inbound)throw new Error("Inbound socket sent an open frame.");if(e.binary)throw new Error("Received a binary open frame.");if(this.handshake)throw new Error("Duplicate open frame.");const t=JSON.parse(e.data);w(t&&"object"==typeof t,"open","object");const{pingInterval:r,pingTimeout:i}=t;w(r>>>0===r,"interval","uint32"),w(i>>>0===i,"timeout","uint32"),this.pingInterval=r,this.pingTimeout=i,this.handshake=!0,this.opened||(this.opened=!0,await this.emitAsync("open"))}async handleClose(e){if(this.inbound)throw new Error("Inbound socket sent a close frame.");this.close()}async handlePing(){if(!this.inbound)throw new Error("Outbound socket sent a ping frame.");this.sendPong()}async handlePong(){if(this.inbound)throw new Error("Inbound socket sent a pong frame.");if(!this.challenge)return this.error("Remote node sent bad pong."),void this.destroy();this.challenge=!1}async handleMessage(e){if(this.packet){const t=this.packet;if(!e.binary)throw new Error("Received non-binary frame as attachment.");return t.buffers.push(e.data),t.buffers.length===t.attachments?(this.packet=null,this.handlePacket(t)):undefined}if(e.binary)throw new Error("Received binary frame as a message.");const t=c.fromString(e.data);return t.attachments>0?(this.packet=t,undefined):this.handlePacket(t)}async handleUpgrade(e){if(!this.inbound)throw new Error("Outbound socket sent an upgrade frame.");throw new Error("Cannot upgrade from websocket.")}async handleNoop(e){}sendFrame(e,t,r){this.send(new u(e,t,r))}sendOpen(e){this.sendFrame(u.types.OPEN,e,!1)}sendClose(e){this.sendFrame(u.types.CLOSE,e,!1)}sendPing(e){this.sendFrame(u.types.PING,e,!1)}sendPong(e){this.sendFrame(u.types.PONG,e,!1)}sendMessage(e){this.sendFrame(u.types.MESSAGE,e,!1)}sendBinary(e){this.sendFrame(u.types.MESSAGE,e,!0)}sendHandshake(){const e=JSON.stringify({sid:"00000000000000000000",upgrades:[],pingInterval:this.pingInterval,pingTimeout:this.pingTimeout});this.sendOpen(e)}async handlePacket(e){if(this.destroyed)return undefined;switch(e.type){case c.types.CONNECT:return this.handleConnect();case c.types.DISCONNECT:return this.handleDisconnect();case c.types.EVENT:case c.types.BINARY_EVENT:{const t=e.getData();return w(Array.isArray(t),"args","array"),w(t.length>0,"args","array"),w("string"==typeof t[0],"event","string"),-1!==e.id?this.handleCall(e.id,t):this.handleEvent(t)}case c.types.ACK:case c.types.BINARY_ACK:{w(-1!==e.id,"id","uint32");const t=e.getData();w(null==t||Array.isArray(t),"args","array");let r=null,i=null;return t&&t.length>0&&(r=t[0]),t&&t.length>1&&(i=t[1]),null==i&&(i=null),r?(w("object"==typeof r,"error","object"),this.handleError(e.id,r)):this.handleAck(e.id,i)}case c.types.ERROR:{const t=e.getData();return w(t&&"object"==typeof t,"error","object"),this.handleError(-1,t)}default:throw new Error("Unknown packet.")}}async handleConnect(){if(this.inbound)throw new Error("Inbound socket sent connect packet.");this.connected=!0,await this.emitAsync("connect");for(const e of this.buffer)this.sendPacket(e);this.buffer.length=0}async handleDisconnect(){this.close()}async handleEvent(e){try{const t=e[0];if(p.hasOwnProperty(t))throw new Error(`Cannot emit blacklisted event: ${t}.`);this.events.emit(...e)}catch(e){this.emit("error",e),this.sendError(-1,e)}}async handleCall(e,t){let r;try{const i=t.shift();if(p.hasOwnProperty(i))throw new Error(`Cannot emit blacklisted event: ${i}.`);const s=this.hooks.get(i);if(!s)throw new Error(`Call not found: ${i}.`);r=await s(...t)}catch(t){return this.emit("error",t),void this.sendError(e,t)}null==r&&(r=null),this.sendAck(e,r)}async handleAck(e,t){const r=this.jobs.get(e);if(!r)throw new Error(`Job not found for ${e}.`);this.jobs.delete(e),r.resolve(t)}async handleError(e,t){const r=m(t.message),i=_(t.name),s=_(t.type),n=g(t.code);if(-1===e){const e=new Error(r);return e.name=i,e.type=s,e.code=n,void this.emit("error",e)}const o=this.jobs.get(e);if(!o)throw new Error(`Job not found for ${e}.`);this.jobs.delete(e);const a=new Error(r);a.name=i,a.type=s,a.code=n,o.reject(a)}sendPacket(e){this.sendMessage(e.toString());for(const t of e.buffers)this.sendBinary(t)}sendConnect(){this.sendPacket(new c(c.types.CONNECT))}sendDisconnect(){this.sendPacket(new c(c.types.DISCONNECT))}sendEvent(e){const t=new c;t.type=c.types.EVENT,t.setData(e),this.connected?this.sendPacket(t):this.buffer.push(t)}sendCall(e,t){const r=new c;r.type=c.types.EVENT,r.id=e,r.setData(t),this.connected?this.sendPacket(r):this.buffer.push(r)}sendAck(e,t){const r=new c;r.type=c.types.ACK,r.id=e,r.setData([null,t]),this.sendPacket(r)}sendError(e,t){const r=m(t.message),i=_(t.name),s=_(t.type),n=g(t.code);if(-1===e){const e=new c;return e.type=c.types.ERROR,e.setData({message:r,name:i,type:s,code:n}),void this.sendPacket(e)}const o=new c;o.type=c.types.ACK,o.id=e,o.setData([{message:r,name:i,type:s,code:n}]),this.sendPacket(o)}bind(e,t){w("string"==typeof e,"event","string"),w("function"==typeof t,"handler","function"),o(!p.hasOwnProperty(e),"Blacklisted event."),this.events.on(e,t)}unbind(e,t){w("string"==typeof e,"event","string"),w("function"==typeof t,"handler","function"),o(!p.hasOwnProperty(e),"Blacklisted event."),this.events.removeListener(e,t)}fire(...e){w(e.length>0,"event","string"),w("string"==typeof e[0],"event","string"),this.sendEvent(e)}hook(e,t){w("string"==typeof e,"event","string"),w("function"==typeof t,"handler","function"),o(!this.hooks.has(e),"Hook already bound."),o(!p.hasOwnProperty(e),"Blacklisted event."),this.hooks.set(e,t)}unhook(e){w("string"==typeof e,"event","string"),o(!p.hasOwnProperty(e),"Blacklisted event."),this.hooks.delete(e)}call(...e){w(e.length>0,"event","string"),w("string"==typeof e[0],"event","string");const t=this.sequence;return this.sequence+=1,this.sequence>>>=0,o(!this.jobs.has(t),"ID collision."),this.sendCall(t,e),new Promise((e,r)=>{this.jobs.set(t,new b(e,r,Date.now()))})}channel(e){return this.channels.has(e)}join(e){return!!this.server&&this.server.join(this,e)}leave(e){return!!this.server&&this.server.leave(this,e)}static accept(e,t,r,i){return(new this).accept(e,t,r,i)}static connect(e,t,r,i){return(new this).connect(e,t,r,i)}}}],["bsock","/lib/packet.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a={CONNECT:0,DISCONNECT:1,EVENT:2,ACK:3,ERROR:4,BINARY_EVENT:5,BINARY_ACK:6};class h{constructor(e){this.type=e||0,this.attachments=0,this.nsp="/",this.id=-1,this.data="",this.buffers=[]}setData(e){o(e!==undefined),o("number"!=typeof e),o("function"!=typeof e);const[t,r]=function(e){const t=[],r=function e(t,r,i,s){if(null===r||"object"!=typeof r)return r;if(null!=r&&!0===r._isBuffer){const e=s.get(r);if(null!=e)return e;const t={_placeholder:!0,num:i.length};return s.set(r,t),i.push(r),t}if(s.has(r))throw new TypeError("Converting circular structure to JSON.");if(Array.isArray(r)){const t=[];s.set(r,null);for(let n=0;n<r.length;n++)t.push(e(n,r[n],i,s));return s.delete(r),t}const n=Object.create(null);const o="function"==typeof r.toJSON?r.toJSON(t):r;s.set(r,null);for(const t of Object.keys(o))n[t]=e(t,o[t],i,s);s.delete(r);return n}("",e,t,new Map);return[JSON.stringify(r),t]}(e);if(this.data=t,this.buffers=r,this.attachments=r.length,this.attachments>0)switch(this.type){case a.EVENT:this.type=a.BINARY_EVENT;break;case a.ACK:this.type=a.BINARY_ACK}return this}getData(){return 0===this.data.length?null:(e=this.data,t=this.buffers,JSON.parse(e,(e,i)=>null!==(r=i)&&"object"==typeof r&&!0===r._placeholder&&r.num>>>0===r.num&&i.num<t.length?t[i.num]:i));var e,t,r}toString(){let e=this.type.toString(10);switch(this.type){case a.BINARY_EVENT:case a.BINARY_ACK:e+=this.attachments.toString(10)+"-"}return"/"!==this.nsp&&(e+=this.nsp+","),-1!==this.id&&(e+=this.id.toString(10)),e+=this.data}static fromString(e){o("string"==typeof e),o(e.length>0);let t=0,r=0,i=0,s="/",n=-1,h="";switch([t,r]=function(e,t){const r=e.charCodeAt(t)-48;return r<0||r>9?-1:[t+1,r]}(e,t),o(-1!==r),o(r<=a.BINARY_ACK),r){case a.BINARY_EVENT:case a.BINARY_ACK:[t,i]=c(e,t),o(-1!==i),o(t<e.length),o("-"===e[t]),t+=1}t<e.length&&"/"===e[t]&&([t,s]=function(e,t,r){let i=t;for(;i<e.length&&e[i]!==r;i++);return o(i<e.length),[i+1,e.substring(t,i)]}(e,t,",")),[t,n]=c(e,t),t<e.length&&(h=e.substring(t));const u=new this;return u.type=r,u.attachments=i,u.nsp=s,u.id=n,u.data=h,u}}function c(e,t){let r=0,i=0;for(;t<e.length;t++){const s=e.charCodeAt(t)-48;if(s<0||s>9)break;i*=10,i+=s,o((r+=1)<=10)}return o(i<=4294967295),0===r&&(i=-1),[t,i]}h.types=a,r.exports=h}],["bsock","/lib/frame.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=Buffer.alloc(0),h={OPEN:0,CLOSE:1,PING:2,PONG:3,MESSAGE:4,UPGRADE:5,NOOP:6};class c{constructor(e,t,r){o("number"==typeof e),o(e>>>0===e),o(e<=h.NOOP),o("boolean"==typeof r),r?(null==t&&(t=a),o(null!=t&&!0===t._isBuffer)):(null==t&&(t=""),o("string"==typeof t)),this.type=e,this.data=t,this.binary=r}toString(){let e="";return this.binary?(e+="b",e+=this.type.toString(10),e+=this.data.toString("base64")):(e+=this.type.toString(10),e+=this.data),e}static fromString(e){o("string"==typeof e);let t,r=e.charCodeAt(0),i=!1;return 98===r?(o(e.length>1),r=e.charCodeAt(1),t=Buffer.from(e.substring(2),"base64"),i=!0):t=e.substring(1),o((r-=48)>=0&&r<=9),o(r<=h.NOOP),new this(r,t,i)}size(){let e=1;return this.binary?e+=this.data.length:e+=Buffer.byteLength(this.data,"utf8"),e}toRaw(){const e=Buffer.allocUnsafe(this.size());return e[0]=this.type,this.binary?this.data.copy(e,1):this.data.length>0&&e.write(this.data,1,"utf8"),e}static fromRaw(e){o(null!=e&&!0===e._isBuffer),o(e.length>0);const t=e[0];return o(t<=h.NOOP),new this(t,e.slice(1),!0)}}c.types=h,c.table=["open","close","ping","pong","message","upgrade","noop"],r.exports=c}],["bsock","/lib/util.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(214,r);e.parseURL=function(e){-1===e.indexOf("://")&&(e=`ws://${e}`);const t=a.parse(e);if("http:"!==t.protocol&&"https:"!==t.protocol&&"ws:"!==t.protocol&&"wss:"!==t.protocol)throw new Error("Invalid protocol for websocket URL.");if(!t.hostname)throw new Error("Malformed URL.");const r=t.hostname;let i=80,s=!1;return"https:"!==t.protocol&&"wss:"!==t.protocol||(i=443,s=!0),t.port&&(i=parseInt(t.port,10),o((65535&i)===i),o(0!==i)),[i,r,s]}}],["bsock","/lib/parser.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(19,r),h=__browser_require__(222,r),c=1e8;r.exports=class extends a{constructor(){super()}error(e){this.emit("error",new Error(e))}feedBinary(e){if(o(null!=e&&!0===e._isBuffer),e.length>c)return void this.error("Frame too large.");let t;try{t=h.fromRaw(e)}catch(e){return void this.emit("error",e)}this.emit("frame",t)}feedString(e){if(o("string"==typeof e),Buffer.byteLength(e,"utf8")>c)return void this.error("Frame too large.");let t;try{t=h.fromString(e)}catch(e){return void this.emit("error",e)}this.emit("frame",t)}}}],["bsock","/lib/codes.js",function(e,t,r,i,s,n){"use strict";r.exports={1000:"NORMAL_CLOSURE",1001:"GOING_AWAY",1002:"PROTOCOL_ERROR",1003:"UNSUPPORTED_DATA",1004:"RESERVED",1005:"NO_STATUS_RECVD",1006:"ABNORMAL_CLOSURE",1007:"INVALID_FRAME_PAYLOAD_DATA",1008:"POLICY_VIOLATION",1009:"MESSAGE_TOO_BIG",1010:"MISSING_EXTENSION",1011:"INTERNAL_ERROR",1012:"SERVICE_RESTART",1013:"TRY_AGAIN_LATER",1014:"BAD_GATEWAY",1015:"TLS_HANDSHAKE"}}],["bsock","/lib/blacklist.js",function(e,t,r,i,s,n){"use strict";r.exports={connect:!0,connect_error:!0,connect_timeout:!0,connecting:!0,disconnect:!0,error:!0,reconnect:!0,reconnect_attempt:!0,reconnect_failed:!0,reconnect_error:!0,reconnecting:!0,ping:!0,pong:!0}}],["brq","/lib/brq.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(228,r)}],["brq","/lib/request-browser.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(19,r),h=__browser_require__(214,r),c=__browser_require__(216,r),u=__browser_require__(229,r),f=global.fetch,l=global.Headers;class d{constructor(e,t){this.method="GET",this.ssl=!1,this.host="localhost",this.port=80,this.path="/",this.query="",this.agent="brq",this.lookup=null,this.type=null,this.expect=null,this.body=null,this.username="",this.password="",this.limit=20<<20,this.timeout=5e3,this.buffer=t||!1,this.headers=Object.create(null),e&&this.fromOptions(e)}fromOptions(e){return"string"==typeof e&&(e={url:e}),null!=e.method&&(o("string"==typeof e.method),this.method=e.method.toUpperCase()),null!=e.uri&&this.navigate(e.uri),null!=e.url&&this.navigate(e.url),null!=e.ssl&&(o("boolean"==typeof e.ssl),this.ssl=e.ssl,this.port=443),null!=e.host&&(o("string"==typeof e.host),this.host=e.host),null!=e.port&&(o((65535&e.port)===e.port),o(0!==e.port),this.port=e.port),null!=e.path&&(o("string"==typeof e.path),this.path=e.path),null!=e.query&&("string"==typeof e.query?this.query=e.query:(o("object"==typeof e.query),this.query=c.stringify(e.query))),null!=e.username&&(o("string"==typeof e.username),this.username=e.username),null!=e.password&&(o("string"==typeof e.password),this.password=e.password),null!=e.agent&&(o("string"==typeof e.agent),this.agent=e.agent),null!=e.json&&(o("object"==typeof e.json),this.body=Buffer.from(JSON.stringify(e.json),"utf8"),this.type="json"),null!=e.form&&(o("object"==typeof e.form),this.body=Buffer.from(c.stringify(e.form),"utf8"),this.type="form"),null!=e.type&&(o("string"==typeof e.type),this.type=e.type),null!=e.expect&&(o("string"==typeof e.expect),this.expect=e.expect),null!=e.body&&("string"==typeof e.body?this.body=Buffer.from(e.body,"utf8"):(o(null!=e.body&&!0===e.body._isBuffer),this.body=e.body)),null!=e.extra&&(o(null!=e.extra&&!0===e.extra._isBuffer),this.body?this.body=Buffer.concat([this.body,e.extra]):this.body=e.extra),null!=e.timeout&&(o("number"==typeof e.timeout),this.timeout=e.timeout),null!=e.limit&&(o("number"==typeof e.limit),this.limit=e.limit),null!=e.headers&&(o("object"==typeof e.headers),this.headers=e.headers),null!=e.lookup&&(o("function"==typeof e.lookup),this.lookup=e.lookup),this}navigate(e){o("string"==typeof e),-1===e.indexOf("://")&&(e="http://"+e);const t=h.parse(e);if("http:"!==t.protocol&&"https:"!==t.protocol)throw new Error("Malformed URL.");if(!t.hostname)throw new Error("Malformed URL.");if(this.ssl="https:"===t.protocol,this.host=t.hostname,this.port=this.ssl?443:80,null!=t.port){const e=parseInt(t.port,10);o((65535&e)===e),this.port=e}if(this.path=t.pathname,this.query=t.query,t.auth){const e=t.auth.split(":");this.username=e.shift(),this.password=e.join(":")}return this}isExpected(e){return o("string"==typeof e),!this.expect||this.expect===e}isOverflow(e){if(null==e)return!1;if(o("string"==typeof e),!this.buffer)return!1;if(e=e.trim(),!/^\d+$/.test(e))return!1;if(0===(e=e.replace(/^0+/g,"")).length&&(e="0"),e.length>15)return!1;const t=parseInt(e,10);return!Number.isSafeInteger(t)||t>this.limit}getHeaders(){const e=new l;if(e.append("User-Agent",this.agent),this.type&&e.append("Content-Type",u.type(this.type)),this.body&&e.append("Content-Length",this.body.length.toString(10)),this.username||this.password){const t=`${this.username}:${this.password}`,r=Buffer.from(t,"utf8");e.append("Authorization",`Basic ${r.toString("base64")}`)}for(const t of Object.keys(this.headers))e.append(t,this.headers[t]);return e}toURL(){let e="";return this.ssl?e+="https://":e+="http://",-1!==this.host.indexOf(":")?e+=`[${this.host}]`:e+=this.host,e+=":"+this.port,e+=this.path,this.query&&(e+="?"+this.query),e}toHTTP(){return{method:this.method,headers:this.getHeaders(),body:this.body?new Uint8Array(this.body.buffer,this.body.byteOffset,this.body.byteLength):null,mode:"cors",credentials:"include",cache:"no-cache",redirect:"follow",referrer:"no-referrer"}}}class p{constructor(){this.statusCode=0,this.headers=Object.create(null),this.type="bin",this.str="",this.buf=null}text(){return this.buf?this.buf.toString("utf8"):this.str}buffer(){return this.buf?this.buf:Buffer.from(this.str,"utf8")}json(){const e=this.text().trim();if(0===e.length)return Object.create(null);const t=JSON.parse(e);if(!t||"object"!=typeof t)throw new Error("JSON body is a non-object.");return t}form(){return c.parse(this.text())}static fromFetch(e){const t=new p;t.statusCode=e.status;for(const[r,i]of e.headers.entries())t.headers[r.toLowerCase()]=i;return t}}async function b(e,t){if("function"!=typeof f)throw new Error("Fetch API not available.");const r=new d(e,t),i=await f(r.toURL(),r.toHTTP()),s=p.fromFetch(i),n=u.ext(s.headers["content-type"]),o=s.headers["content-length"];if(!r.isExpected(n))throw new Error("Wrong content-type for response.");if(r.isOverflow(o))throw new Error("Response exceeded limit.");if(s.type=n,u.textual(n)){const e=await i.text();if(r.limit&&e.length>r.limit)throw new Error("Response exceeded limit.");s.str=e}else{const e=await i.arrayBuffer();if(r.limit&&e.byteLength>r.limit)throw new Error("Response exceeded limit.");s.buf=Buffer.from(e,0,e.byteLength)}return s}async function g(e){return"string"==typeof e&&(e={url:e}),b(e,!0)}g.stream=function(e){"string"==typeof e&&(e={url:e});const t=new a,r=[];return t.write=((e,t)=>(null!=e&&!0===e._isBuffer||(o("string"==typeof e),e=Buffer.from(e,t)),r.push(e),!0)),t.end=(()=>(e.extra=Buffer.concat(r),b(e,!1).then(e=>{t.emit("headers",e.headers),t.emit("type",e.type),t.emit("response",e),t.emit("data",e.buffer()),t.emit("end"),t.emit("close")}).catch(e=>{t.emit("error",e)}),!0)),t},r.exports=g}],["brq","/lib/mime.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a={atom:["application/atom+xml",!0],bin:["application/octet-stream",!1],bmp:["image/bmp",!1],cjs:["application/javascript",!0],css:["text/css",!0],dat:["application/octet-stream",!1],form:["application/x-www-form-urlencoded",!0],gif:["image/gif",!1],gz:["application/x-gzip",!1],htc:["text/x-component",!0],html:["text/html",!0],ico:["image/x-icon",!1],jpg:["image/jpeg",!1],jpeg:["image/jpeg",!1],js:["application/javascript",!0],json:["application/json",!0],log:["text/plain",!0],manifest:["text/cache-manifest",!1],mathml:["application/mathml+xml",!0],md:["text/plain",!0],mjs:["application/javascript",!0],mkv:["video/x-matroska",!1],mml:["application/mathml+xml",!0],mp3:["audio/mpeg",!1],mp4:["video/mp4",!1],mpeg:["video/mpeg",!1],mpg:["video/mpeg",!1],oga:["audio/ogg",!1],ogg:["application/ogg",!1],ogv:["video/ogg",!1],otf:["font/otf",!1],pdf:["application/pdf",!1],png:["image/png",!1],rdf:["application/rdf+xml",!0],rss:["application/rss+xml",!0],svg:["image/svg+xml",!1],swf:["application/x-shockwave-flash",!1],tar:["application/x-tar",!1],torrent:["application/x-bittorrent",!1],txt:["text/plain",!0],ttf:["font/ttf",!1],wav:["audio/wav",!1],webm:["video/webm",!1],woff:["font/x-woff",!1],xhtml:["application/xhtml+xml",!0],xbl:["application/xml",!0],xml:["application/xml",!0],xsl:["application/xml",!0],xslt:["application/xslt+xml",!0],zip:["application/zip",!1]},h={"application/atom+xml":"atom","application/octet-stream":"bin","image/bmp":"bmp","text/css":"css","application/x-www-form-urlencoded":"form","image/gif":"gif","application/x-gzip":"gz","text/x-component":"htc","text/html":"html","text/xml":"xml","image/x-icon":"ico","image/jpeg":"jpeg","text/javascript":"js","application/javascript":"js","text/x-json":"json","application/json":"json","text/json":"json","text/plain":"txt","text/cache-manifest":"manifest","application/mathml+xml":"mml","video/x-matroska":"mkv","audio/x-matroska":"mkv","audio/mpeg":"mp3","audio/mpa":"mp3","video/mp4":"mp4","video/mpeg":"mpg","audio/ogg":"oga","application/ogg":"ogg","video/ogg":"ogv","font/otf":"otf","application/pdf":"pdf","application/x-pdf":"pdf","image/png":"png","application/rdf+xml":"rdf","application/rss+xml":"rss","image/svg+xml":"svg","application/x-shockwave-flash":"swf","application/x-tar":"tar","application/x-bittorrent":"torrent","font/ttf":"ttf","audio/wav":"wav","audio/wave":"wav","video/webm":"webm","audio/webm":"webm","font/x-woff":"woff","application/xhtml+xml":"xhtml","application/xml":"xsl","application/xslt+xml":"xslt","application/zip":"zip"};e.file=function(e){o("string"==typeof e);const t=e.split("/").pop().split(".");if(t.length<2)return"bin";if(2===t.length&&""===t[0])return"txt";const r=t[t.length-1];return a[r]?r:"bin"},e.textual=function(e){const t=a[e];return!!t&&t[1]},e.type=function(e){if(o("string"==typeof e),-1!==e.indexOf("/"))return e;const t=a[e];if(!t)return"application/octet-stream";let[r,i]=t;return i&&(r+="; charset=utf-8"),r},e.ext=function(e){return null==e?"bin":(o("string"==typeof e),[e]=e.split(";"),e=(e=e.toLowerCase()).trim(),h[e]||"bin")}}],["bcoin","/lib/client/wallet.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(19,r),{Client:h}=__browser_require__(212,r);class c extends a{constructor(e,t,r){super(),this.parent=e,this.client=e.clone(),this.client.token=r,this.id=t,this.token=r}async open(){await this.parent.join(this.id,this.token),this.parent.wallets.set(this.id,this)}async close(){await this.parent.leave(this.id),this.parent.wallets.delete(this.id)}getHistory(e){return this.client.getHistory(this.id,e)}getCoins(e){return this.client.getCoins(this.id,e)}getPending(e){return this.client.getPending(this.id,e)}getBalance(e){return this.client.getBalance(this.id,e)}getLast(e,t){return this.client.getLast(this.id,e,t)}getRange(e,t){return this.client.getRange(this.id,e,t)}getTX(e){return this.client.getTX(this.id,e)}getBlocks(){return this.client.getBlocks(this.id)}getBlock(e){return this.client.getBlock(this.id,e)}getCoin(e,t){return this.client.getCoin(this.id,e,t)}zap(e,t){return this.client.zap(this.id,e,t)}abandon(e){return this.client.abandon(this.id,e)}createTX(e){return this.client.createTX(this.id,e)}send(e){return this.client.send(this.id,e)}sign(e){return this.client.sign(this.id,e)}getInfo(){return this.client.getInfo(this.id)}getAccounts(){return this.client.getAccounts(this.id)}getMaster(){return this.client.getMaster(this.id)}getAccount(e){return this.client.getAccount(this.id,e)}createAccount(e,t){return this.client.createAccount(this.id,e,t)}createAddress(e){return this.client.createAddress(this.id,e)}createChange(e){return this.client.createChange(this.id,e)}createNested(e){return this.client.createNested(this.id,e)}setPassphrase(e,t){return this.client.setPassphrase(this.id,e,t)}async retoken(e){const t=await this.client.retoken(this.id,e);return o(t),o("string"==typeof t.token),this.token=t.token,t}importPrivate(e,t,r){return this.client.importPrivate(this.id,e,t,r)}importPublic(e,t){return this.client.importPublic(this.id,e,t)}importAddress(e,t){return this.client.importAddress(this.id,e,t)}lockCoin(e,t){return this.client.lockCoin(this.id,e,t)}unlockCoin(e,t){return this.client.unlockCoin(this.id,e,t)}getLocked(){return this.client.getLocked(this.id)}lock(){return this.client.lock(this.id)}unlock(e,t){return this.client.unlock(this.id,e,t)}getKey(e){return this.client.getKey(this.id,e)}getWIF(e,t){return this.client.getWIF(this.id,e,t)}addSharedKey(e,t){return this.client.addSharedKey(this.id,e,t)}removeSharedKey(e,t){return this.client.removeSharedKey(this.id,e,t)}resend(){return this.client.resendWallet(this.id)}}r.exports=class extends h{constructor(e){super(e),this.wallets=new Map}init(){this.bind("tx",(e,t)=>{this.dispatch(e,"tx",t)}),this.bind("confirmed",(e,t)=>{this.dispatch(e,"confirmed",t)}),this.bind("unconfirmed",(e,t)=>{this.dispatch(e,"unconfirmed",t)}),this.bind("conflict",(e,t)=>{this.dispatch(e,"conflict",t)}),this.bind("updated",(e,t)=>{this.dispatch(e,"updated",t)}),this.bind("address",(e,t)=>{this.dispatch(e,"address",t)}),this.bind("balance",(e,t)=>{this.dispatch(e,"balance",t)})}dispatch(e,t,...r){const i=this.wallets.get(e);i&&i.emit(t,...r)}async open(){await super.open(),this.init()}async close(){await super.close(),this.wallets=new Map}async auth(){await this.call("auth",this.password)}execute(e,t){return super.execute("/",e,t)}wallet(e,t){return new c(this,e,t)}all(e){return this.call("join","*",e)}none(){return this.call("leave","*")}join(e,t){return this.call("join",e,t)}leave(e){return this.call("leave",e)}rescan(e){return this.post("/rescan",{height:e})}resend(){return this.post("/resend")}backup(e){return this.post("/backup",{path:e})}getWallets(){return this.get("/wallet")}createWallet(e,t){return this.put(`/wallet/${e}`,t)}getHistory(e,t){return this.get(`/wallet/${e}/tx/history`,{account:t})}getCoins(e,t){return this.get(`/wallet/${e}/coin`,{account:t})}getPending(e,t){return this.get(`/wallet/${e}/tx/unconfirmed`,{account:t})}getBalance(e,t){return this.get(`/wallet/${e}/balance`,{account:t})}getLast(e,t,r){return this.get(`/wallet/${e}/tx/last`,{account:t,limit:r})}getRange(e,t,r){return this.get(`/wallet/${e}/tx/range`,{account:t,start:r.start,end:r.end,limit:r.limit,reverse:r.reverse})}getTX(e,t){return this.get(`/wallet/${e}/tx/${t}`)}getBlocks(e){return this.get(`/wallet/${e}/block`)}getBlock(e,t){return this.get(`/wallet/${e}/block/${t}`)}getCoin(e,t,r){return this.get(`/wallet/${e}/coin/${t}/${r}`)}zap(e,t,r){return this.post(`/wallet/${e}/zap`,{account:t,age:r})}abandon(e,t){return this.del(`/wallet/${e}/tx/${t}`)}createTX(e,t){return this.post(`/wallet/${e}/create`,t)}send(e,t){return this.post(`/wallet/${e}/send`,t)}sign(e,t){return this.post(`/wallet/${e}/sign`,t)}getInfo(e){return this.get(`/wallet/${e}`)}getAccounts(e){return this.get(`/wallet/${e}/account`)}getMaster(e){return this.get(`/wallet/${e}/master`)}getAccount(e,t){return this.get(`/wallet/${e}/account/${t}`)}createAccount(e,t,r){return this.put(`/wallet/${e}/account/${t}`,r)}createAddress(e,t){return this.post(`/wallet/${e}/address`,{account:t})}createChange(e,t){return this.post(`/wallet/${e}/change`,{account:t})}createNested(e,t){return this.post(`/wallet/${e}/nested`,{account:t})}setPassphrase(e,t,r){return this.post(`/wallet/${e}/passphrase`,{passphrase:t,old:r})}retoken(e,t){return this.post(`/wallet/${e}/retoken`,{passphrase:t})}importPrivate(e,t,r,i){return this.post(`/wallet/${e}/import`,{account:t,privateKey:r,passphrase:i})}importPublic(e,t,r){return this.post(`/wallet/${e}/import`,{account:t,publicKey:r})}importAddress(e,t,r){return this.post(`/wallet/${e}/import`,{account:t,address:r})}lockCoin(e,t,r){return this.put(`/wallet/${e}/locked/${t}/${r}`)}unlockCoin(e,t,r){return this.del(`/wallet/${e}/locked/${t}/${r}`)}getLocked(e){return this.get(`/wallet/${e}/locked`)}lock(e){return this.post(`/wallet/${e}/lock`)}unlock(e,t,r){return this.post(`/wallet/${e}/unlock`,{passphrase:t,timeout:r})}getKey(e,t){return this.get(`/wallet/${e}/key/${t}`)}getWIF(e,t,r){return this.get(`/wallet/${e}/wif/${t}`,{passphrase:r})}addSharedKey(e,t,r){return this.put(`/wallet/${e}/shared-key`,{account:t,accountKey:r})}removeSharedKey(e,t,r){return this.del(`/wallet/${e}/shared-key`,{account:t,accountKey:r})}resendWallet(e){return this.post(`/wallet/${e}/resend`)}}}],["bcoin","/lib/coins/index.js",function(e,t,r,i,s,n){"use strict";e.Coins=__browser_require__(129,r),e.CoinView=__browser_require__(128,r),e.compress=__browser_require__(131,r),e.UndoCoins=__browser_require__(132,r)}],["bcoin","/lib/hd/index.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(233,r)}],["bcoin","/lib/hd/hd.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(138,r),h=__browser_require__(234,r),c=__browser_require__(249,r),u=__browser_require__(133,r),f=__browser_require__(237,r),l=e;l.fromBase58=function(e,t){return c.isBase58(e)?c.fromBase58(e,t):u.fromBase58(e,t)},l.generate=function(){return c.generate()},l.fromSeed=function(e){return c.fromSeed(e)},l.fromMnemonic=function(e){return c.fromMnemonic(e)},l.fromJSON=function(e,t){return e.xprivkey?c.fromJSON(e,t):u.fromJSON(e,t)},l.fromRaw=function(e,t){return c.isRaw(e,t)?c.fromRaw(e,t):u.fromRaw(e,t)},l.from=function(e,t){if(o(e,"Options required."),l.isHD(e))return e;if(l.isBase58(e,t))return l.fromBase58(e,t);if(l.isRaw(e,t))return l.fromRaw(e,t);if(e&&"object"==typeof e)return l.fromMnemonic(e);throw new Error("Cannot create HD key from bad options.")},l.isBase58=function(e,t){return c.isBase58(e,t)||u.isBase58(e,t)},l.isRaw=function(e,t){return c.isRaw(e,t)||u.isRaw(e,t)},l.isHD=function(e){return c.isHDPrivateKey(e)||u.isHDPublicKey(e)},l.isPrivate=function(e){return c.isHDPrivateKey(e)},l.isPublic=function(e){return u.isHDPublicKey(e)},l.common=a,l.HD=l,l.Mnemonic=h,l.PrivateKey=c,l.PublicKey=u,l.HDPrivateKey=c,l.HDPublicKey=u,l.wordlist=f}],["bcoin","/lib/hd/mnemonic.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(51,r),c=__browser_require__(136,r),u=__browser_require__(41,r),f=__browser_require__(235,r),l=__browser_require__(134,r),d=__browser_require__(237,r),p=__browser_require__(138,r),b=__browser_require__(246,r),{inspectSymbol:g}=__browser_require__(21,r),m=Object.create(null);class _{constructor(e){this.bits=p.MIN_ENTROPY,this.language="english",this.entropy=null,this.phrase=null,e&&this.fromOptions(e)}fromOptions(e){return"string"==typeof e&&(e={phrase:e}),null!=e.bits&&(o((65535&e.bits)===e.bits),o(e.bits>=p.MIN_ENTROPY),o(e.bits<=p.MAX_ENTROPY),o(e.bits%32==0),this.bits=e.bits),e.language&&(o("string"==typeof e.language),o(-1!==_.languages.indexOf(e.language)),this.language=e.language),e.phrase?(this.fromPhrase(e.phrase),this):e.entropy?(this.fromEntropy(e.entropy),this):this}static fromOptions(e){return(new this).fromOptions(e)}destroy(){this.bits=p.MIN_ENTROPY,this.language="english",this.entropy&&(c(this.entropy),this.entropy=null),this.phrase=null}toSeed(e){e||(e="");const t=b(this.getPhrase()),r=b(`mnemonic${e}`);return f.derive(l,Buffer.from(t,"utf8"),Buffer.from(r,"utf8"),2048,64)}getEntropy(){return this.entropy||(this.entropy=u.randomBytes(this.bits/8)),o(this.bits/8===this.entropy.length),this.entropy}getPhrase(){if(this.phrase)return this.phrase;const e=this.bits+this.bits/32,t=this.getEntropy(),r=h.digest(t),i=Math.ceil(e/8),s=Buffer.allocUnsafe(i);t.copy(s,0),r.copy(s,t.length);const n=_.getWordlist(this.language);let o=[];for(let t=0;t<e/11;t++){let e=0;for(let r=0;r<11;r++){const i=11*t+r,n=i%8;e<<=1,e|=s[(i-n)/8]>>>7-n&1}o.push(n.words[e])}return o="japanese"===this.language?o.join(""):o.join(" "),this.phrase=o,o}fromPhrase(e){o("string"==typeof e),o(e.length<=1e3);const t=e.trim().split(/[\s\u3000]+/),r=11*t.length,i=r%32;o(0!==i,"Invalid checksum.");const s=r-i;o(s>=p.MIN_ENTROPY),o(s<=p.MAX_ENTROPY),o(s%32==0);const n=Math.ceil(r/8),a=Buffer.allocUnsafe(n);a.fill(0);const c=_.getLanguage(t[0]),u=_.getWordlist(c);for(let e=0;e<t.length;e++){const r=t[e],i=u.map[r];if(null==i)throw new Error("Could not find word.");for(let t=0;t<11;t++){const r=11*e+t,s=r%8,n=i>>>10-t&1;a[(r-s)/8]|=n<<7-s}}const f=Math.ceil(i/8),l=a.slice(0,a.length-f),d=a.slice(a.length-f),b=h.digest(l);for(let e=0;e<i;e++){const t=e%8,r=(e-t)/8;if((d[r]>>>7-t&1)!==(b[r]>>>7-t&1))throw new Error("Invalid checksum.")}return o(s/8===l.length),this.bits=s,this.language=c,this.entropy=l,this.phrase=e,this}static fromPhrase(e){return(new this).fromPhrase(e)}fromEntropy(e,t){return o(null!=e&&!0===e._isBuffer),o(8*e.length>=p.MIN_ENTROPY),o(8*e.length<=p.MAX_ENTROPY),o(8*e.length%32==0),o(!t||-1!==_.languages.indexOf(t)),this.entropy=e,this.bits=8*e.length,t&&(this.language=t),this}static fromEntropy(e,t){return(new this).fromEntropy(e,t)}static getLanguage(e){for(const t of _.languages){if(null!=_.getWordlist(t).map[e])return t}throw new Error("Could not determine language.")}static getWordlist(e){const t=m[e];if(t)return t;const r=d.get(e),i=new w(r);return m[e]=i,i}toJSON(){return{bits:this.bits,language:this.language,entropy:this.getEntropy().toString("hex"),phrase:this.getPhrase()}}fromJSON(e){return o(e),o((65535&e.bits)===e.bits),o("string"==typeof e.language),o("string"==typeof e.entropy),o("string"==typeof e.phrase),o(e.bits>=p.MIN_ENTROPY),o(e.bits<=p.MAX_ENTROPY),o(e.bits%32==0),o(e.bits/8==e.entropy.length/2),this.bits=e.bits,this.language=e.language,this.entropy=Buffer.from(e.entropy,"hex"),this.phrase=e.phrase,this}static fromJSON(e){return(new this).fromJSON(e)}getSize(){let e=0;return e+=3,e+=this.getEntropy().length}toWriter(e){const t=_.languages.indexOf(this.language);return o(-1!==t),e.writeU16(this.bits),e.writeU8(t),e.writeBytes(this.getEntropy()),e}toRaw(e){const t=this.getSize();return this.toWriter(a.write(t)).render()}fromReader(e){const t=e.readU16();o(t>=p.MIN_ENTROPY),o(t<=p.MAX_ENTROPY),o(t%32==0);const r=_.languages[e.readU8()];return o(r),this.bits=t,this.language=r,this.entropy=e.readBytes(t/8),this}fromRaw(e){return this.fromReader(a.read(e))}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e){return(new this).fromRaw(e)}toString(){return this.getPhrase()}[g](){return`<Mnemonic: ${this.getPhrase()}>`}static isMnemonic(e){return e instanceof _}}_.languages=["simplified chinese","traditional chinese","english","french","italian","japanese","spanish"];class w{constructor(e){this.words=e,this.map=Object.create(null);for(let t=0;t<e.length;t++){const r=e[t];this.map[r]=t}}}r.exports=_}],["bcrypto","/lib/pbkdf2-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(236,r)}],["bcrypto","/lib/js/pbkdf2.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(35,r),a=(global.crypto||global.msCrypto||{}).subtle||{};function h(e,t,r,i,s){"string"==typeof t&&(t=Buffer.from(t,"utf8")),"string"==typeof r&&(r=Buffer.from(r,"utf8")),null==r&&(r=Buffer.alloc(0)),o(e&&"string"==typeof e.id),o(null!=t&&!0===t._isBuffer),o(null!=r&&!0===r._isBuffer),o(i>>>0===i),o(s>>>0===s);const n=e.size,a=Math.ceil(s/n),h=Buffer.allocUnsafe(a*n),c=Buffer.allocUnsafe(r.length+4);r.copy(c,0),t.length>e.blockSize&&(t=e.digest(t),o(t.length<=e.blockSize));for(let s=0;s<a;s++){const o=s+1;c[r.length+0]=o>>>24,c[r.length+1]=o>>>16,c[r.length+2]=o>>>8,c[r.length+3]=o;const a=e.mac(c,t);let u=a;for(let r=1;r<i;r++){u=e.mac(u,t);for(let e=0;e<n;e++)a[e]^=u[e]}a.copy(h,s*n)}return h.slice(0,s)}e.native=0,e.derive=h,e.deriveAsync=async function(e,t,r,i,s){"string"==typeof t&&(t=Buffer.from(t,"utf8")),"string"==typeof r&&(r=Buffer.from(r,"utf8")),null==r&&(r=Buffer.alloc(0)),o(e&&"string"==typeof e.id),o(null!=t&&!0===t._isBuffer),o(null!=r&&!0===r._isBuffer),o(i>>>0===i),o(s>>>0===s);const n=function(e){switch(e.id){case"SHA1":return"SHA-1";case"SHA256":return"SHA-256";case"SHA384":return"SHA-384";case"SHA512":return"SHA-512";default:return null}}(e);if(!a.importKey||!a.deriveBits||!n)return h(e,t,r,i,s);const c={name:"PBKDF2",salt:r,iterations:i,hash:n},u=await a.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]),f=await a.deriveBits(c,u,8*s);return Buffer.from(f)}}],["bcoin","/lib/hd/wordlist-browser.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(238,r);e.get=function(e){switch(e){case"simplified chinese":return o.chinese.simplified;case"traditional chinese":return o.chinese.traditional;case"english":return o.english;case"french":return o.french;case"italian":return o.italian;case"japanese":return o.japanese;case"spanish":return o.spanish;default:throw new Error(`Unknown language: ${e}.`)}}}],["bcoin","/lib/hd/words/index.js",function(e,t,r,i,s,n){"use strict";e.chinese={simplified:__browser_require__(239,r),traditional:__browser_require__(240,r)},e.english=__browser_require__(241,r),e.french=__browser_require__(242,r),e.italian=__browser_require__(243,r),e.japanese=__browser_require__(244,r),e.spanish=__browser_require__(245,r)}],["bcoin","/lib/hd/words/chinese-simplified.js",function(e,t,r,i,s,n){"use strict";r.exports=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]}],["bcoin","/lib/hd/words/chinese-traditional.js",function(e,t,r,i,s,n){"use strict";r.exports=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]}],["bcoin","/lib/hd/words/english.js",function(e,t,r,i,s,n){"use strict";r.exports=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"]}],["bcoin","/lib/hd/words/french.js",function(e,t,r,i,s,n){"use strict";r.exports=["abaisser","abandon","abdiquer","abeille","abolir","aborder","aboutir","aboyer","abrasif","abreuver","abriter","abroger","abrupt","absence","absolu","absurde","abusif","abyssal","academie","acajou","acarien","accabler","accepter","acclamer","accolade","accroche","accuser","acerbe","achat","acheter","aciduler","acier","acompte","acquerir","acronyme","acteur","actif","actuel","adepte","adequat","adhesif","adjectif","adjuger","admettre","admirer","adopter","adorer","adoucir","adresse","adroit","adulte","adverbe","aerer","aeronef","affaire","affecter","affiche","affreux","affubler","agacer","agencer","agile","agiter","agrafer","agreable","agrume","aider","aiguille","ailier","aimable","aisance","ajouter","ajuster","alarmer","alchimie","alerte","algebre","algue","aliener","aliment","alleger","alliage","allouer","allumer","alourdir","alpaga","altesse","alveole","amateur","ambigu","ambre","amenager","amertume","amidon","amiral","amorcer","amour","amovible","amphibie","ampleur","amusant","analyse","anaphore","anarchie","anatomie","ancien","aneantir","angle","angoisse","anguleux","animal","annexer","annonce","annuel","anodin","anomalie","anonyme","anormal","antenne","antidote","anxieux","apaiser","aperitif","aplanir","apologie","appareil","appeler","apporter","appuyer","aquarium","aqueduc","arbitre","arbuste","ardeur","ardoise","argent","arlequin","armature","armement","armoire","armure","arpenter","arracher","arriver","arroser","arsenic","arteriel","article","aspect","asphalte","aspirer","assaut","asservir","assiette","associer","assurer","asticot","astre","astuce","atelier","atome","atrium","atroce","attaque","attentif","attirer","attraper","aubaine","auberge","audace","audible","augurer","aurore","automne","autruche","avaler","avancer","avarice","avenir","averse","aveugle","aviateur","avide","avion","aviser","avoine","avouer","avril","axial","axiome","badge","bafouer","bagage","baguette","baignade","balancer","balcon","baleine","balisage","bambin","bancaire","bandage","banlieue","banniere","banquier","barbier","baril","baron","barque","barrage","bassin","bastion","bataille","bateau","batterie","baudrier","bavarder","belette","belier","belote","benefice","berceau","berger","berline","bermuda","besace","besogne","betail","beurre","biberon","bicycle","bidule","bijou","bilan","bilingue","billard","binaire","biologie","biopsie","biotype","biscuit","bison","bistouri","bitume","bizarre","blafard","blague","blanchir","blessant","blinder","blond","bloquer","blouson","bobard","bobine","boire","boiser","bolide","bonbon","bondir","bonheur","bonifier","bonus","bordure","borne","botte","boucle","boueux","bougie","boulon","bouquin","bourse","boussole","boutique","boxeur","branche","brasier","brave","brebis","breche","breuvage","bricoler","brigade","brillant","brioche","brique","brochure","broder","bronzer","brousse","broyeur","brume","brusque","brutal","bruyant","buffle","buisson","bulletin","bureau","burin","bustier","butiner","butoir","buvable","buvette","cabanon","cabine","cachette","cadeau","cadre","cafeine","caillou","caisson","calculer","calepin","calibre","calmer","calomnie","calvaire","camarade","camera","camion","campagne","canal","caneton","canon","cantine","canular","capable","caporal","caprice","capsule","capter","capuche","carabine","carbone","caresser","caribou","carnage","carotte","carreau","carton","cascade","casier","casque","cassure","causer","caution","cavalier","caverne","caviar","cedille","ceinture","celeste","cellule","cendrier","censurer","central","cercle","cerebral","cerise","cerner","cerveau","cesser","chagrin","chaise","chaleur","chambre","chance","chapitre","charbon","chasseur","chaton","chausson","chavirer","chemise","chenille","chequier","chercher","cheval","chien","chiffre","chignon","chimere","chiot","chlorure","chocolat","choisir","chose","chouette","chrome","chute","cigare","cigogne","cimenter","cinema","cintrer","circuler","cirer","cirque","citerne","citoyen","citron","civil","clairon","clameur","claquer","classe","clavier","client","cligner","climat","clivage","cloche","clonage","cloporte","cobalt","cobra","cocasse","cocotier","coder","codifier","coffre","cogner","cohesion","coiffer","coincer","colere","colibri","colline","colmater","colonel","combat","comedie","commande","compact","concert","conduire","confier","congeler","connoter","consonne","contact","convexe","copain","copie","corail","corbeau","cordage","corniche","corpus","correct","cortege","cosmique","costume","coton","coude","coupure","courage","couteau","couvrir","coyote","crabe","crainte","cravate","crayon","creature","crediter","cremeux","creuser","crevette","cribler","crier","cristal","critere","croire","croquer","crotale","crucial","cruel","crypter","cubique","cueillir","cuillere","cuisine","cuivre","culminer","cultiver","cumuler","cupide","curatif","curseur","cyanure","cycle","cylindre","cynique","daigner","damier","danger","danseur","dauphin","debattre","debiter","deborder","debrider","debutant","decaler","decembre","dechirer","decider","declarer","decorer","decrire","decupler","dedale","deductif","deesse","defensif","defiler","defrayer","degager","degivrer","deglutir","degrafer","dejeuner","delice","deloger","demander","demeurer","demolir","denicher","denouer","dentelle","denuder","depart","depenser","dephaser","deplacer","deposer","deranger","derober","desastre","descente","desert","designer","desobeir","dessiner","destrier","detacher","detester","detourer","detresse","devancer","devenir","deviner","devoir","diable","dialogue","diamant","dicter","differer","digerer","digital","digne","diluer","dimanche","diminuer","dioxyde","directif","diriger","discuter","disposer","dissiper","distance","divertir","diviser","docile","docteur","dogme","doigt","domaine","domicile","dompter","donateur","donjon","donner","dopamine","dortoir","dorure","dosage","doseur","dossier","dotation","douanier","double","douceur","douter","doyen","dragon","draper","dresser","dribbler","droiture","duperie","duplexe","durable","durcir","dynastie","eblouir","ecarter","echarpe","echelle","eclairer","eclipse","eclore","ecluse","ecole","economie","ecorce","ecouter","ecraser","ecremer","ecrivain","ecrou","ecume","ecureuil","edifier","eduquer","effacer","effectif","effigie","effort","effrayer","effusion","egaliser","egarer","ejecter","elaborer","elargir","electron","elegant","elephant","eleve","eligible","elitisme","eloge","elucider","eluder","emballer","embellir","embryon","emeraude","emission","emmener","emotion","emouvoir","empereur","employer","emporter","emprise","emulsion","encadrer","enchere","enclave","encoche","endiguer","endosser","endroit","enduire","energie","enfance","enfermer","enfouir","engager","engin","englober","enigme","enjamber","enjeu","enlever","ennemi","ennuyeux","enrichir","enrobage","enseigne","entasser","entendre","entier","entourer","entraver","enumerer","envahir","enviable","envoyer","enzyme","eolien","epaissir","epargne","epatant","epaule","epicerie","epidemie","epier","epilogue","epine","episode","epitaphe","epoque","epreuve","eprouver","epuisant","equerre","equipe","eriger","erosion","erreur","eruption","escalier","espadon","espece","espiegle","espoir","esprit","esquiver","essayer","essence","essieu","essorer","estime","estomac","estrade","etagere","etaler","etanche","etatique","eteindre","etendoir","eternel","ethanol","ethique","ethnie","etirer","etoffer","etoile","etonnant","etourdir","etrange","etroit","etude","euphorie","evaluer","evasion","eventail","evidence","eviter","evolutif","evoquer","exact","exagerer","exaucer","exceller","excitant","exclusif","excuse","executer","exemple","exercer","exhaler","exhorter","exigence","exiler","exister","exotique","expedier","explorer","exposer","exprimer","exquis","extensif","extraire","exulter","fable","fabuleux","facette","facile","facture","faiblir","falaise","fameux","famille","farceur","farfelu","farine","farouche","fasciner","fatal","fatigue","faucon","fautif","faveur","favori","febrile","feconder","federer","felin","femme","femur","fendoir","feodal","fermer","feroce","ferveur","festival","feuille","feutre","fevrier","fiasco","ficeler","fictif","fidele","figure","filature","filetage","filiere","filleul","filmer","filou","filtrer","financer","finir","fiole","firme","fissure","fixer","flairer","flamme","flasque","flatteur","fleau","fleche","fleur","flexion","flocon","flore","fluctuer","fluide","fluvial","folie","fonderie","fongible","fontaine","forcer","forgeron","formuler","fortune","fossile","foudre","fougere","fouiller","foulure","fourmi","fragile","fraise","franchir","frapper","frayeur","fregate","freiner","frelon","fremir","frenesie","frere","friable","friction","frisson","frivole","froid","fromage","frontal","frotter","fruit","fugitif","fuite","fureur","furieux","furtif","fusion","futur","gagner","galaxie","galerie","gambader","garantir","gardien","garnir","garrigue","gazelle","gazon","geant","gelatine","gelule","gendarme","general","genie","genou","gentil","geologie","geometre","geranium","germe","gestuel","geyser","gibier","gicler","girafe","givre","glace","glaive","glisser","globe","gloire","glorieux","golfeur","gomme","gonfler","gorge","gorille","goudron","gouffre","goulot","goupille","gourmand","goutte","graduel","graffiti","graine","grand","grappin","gratuit","gravir","grenat","griffure","griller","grimper","grogner","gronder","grotte","groupe","gruger","grutier","gruyere","guepard","guerrier","guide","guimauve","guitare","gustatif","gymnaste","gyrostat","habitude","hachoir","halte","hameau","hangar","hanneton","haricot","harmonie","harpon","hasard","helium","hematome","herbe","herisson","hermine","heron","hesiter","heureux","hiberner","hibou","hilarant","histoire","hiver","homard","hommage","homogene","honneur","honorer","honteux","horde","horizon","horloge","hormone","horrible","houleux","housse","hublot","huileux","humain","humble","humide","humour","hurler","hydromel","hygiene","hymne","hypnose","idylle","ignorer","iguane","illicite","illusion","image","imbiber","imiter","immense","immobile","immuable","impact","imperial","implorer","imposer","imprimer","imputer","incarner","incendie","incident","incliner","incolore","indexer","indice","inductif","inedit","ineptie","inexact","infini","infliger","informer","infusion","ingerer","inhaler","inhiber","injecter","injure","innocent","inoculer","inonder","inscrire","insecte","insigne","insolite","inspirer","instinct","insulter","intact","intense","intime","intrigue","intuitif","inutile","invasion","inventer","inviter","invoquer","ironique","irradier","irreel","irriter","isoler","ivoire","ivresse","jaguar","jaillir","jambe","janvier","jardin","jauger","jaune","javelot","jetable","jeton","jeudi","jeunesse","joindre","joncher","jongler","joueur","jouissif","journal","jovial","joyau","joyeux","jubiler","jugement","junior","jupon","juriste","justice","juteux","juvenile","kayak","kimono","kiosque","label","labial","labourer","lacerer","lactose","lagune","laine","laisser","laitier","lambeau","lamelle","lampe","lanceur","langage","lanterne","lapin","largeur","larme","laurier","lavabo","lavoir","lecture","legal","leger","legume","lessive","lettre","levier","lexique","lezard","liasse","liberer","libre","licence","licorne","liege","lievre","ligature","ligoter","ligue","limer","limite","limonade","limpide","lineaire","lingot","lionceau","liquide","lisiere","lister","lithium","litige","littoral","livreur","logique","lointain","loisir","lombric","loterie","louer","lourd","loutre","louve","loyal","lubie","lucide","lucratif","lueur","lugubre","luisant","lumiere","lunaire","lundi","luron","lutter","luxueux","machine","magasin","magenta","magique","maigre","maillon","maintien","mairie","maison","majorer","malaxer","malefice","malheur","malice","mallette","mammouth","mandater","maniable","manquant","manteau","manuel","marathon","marbre","marchand","mardi","maritime","marqueur","marron","marteler","mascotte","massif","materiel","matiere","matraque","maudire","maussade","mauve","maximal","mechant","meconnu","medaille","medecin","mediter","meduse","meilleur","melange","melodie","membre","memoire","menacer","mener","menhir","mensonge","mentor","mercredi","merite","merle","messager","mesure","metal","meteore","methode","metier","meuble","miauler","microbe","miette","mignon","migrer","milieu","million","mimique","mince","mineral","minimal","minorer","minute","miracle","miroiter","missile","mixte","mobile","moderne","moelleux","mondial","moniteur","monnaie","monotone","monstre","montagne","monument","moqueur","morceau","morsure","mortier","moteur","motif","mouche","moufle","moulin","mousson","mouton","mouvant","multiple","munition","muraille","murene","murmure","muscle","museum","musicien","mutation","muter","mutuel","myriade","myrtille","mystere","mythique","nageur","nappe","narquois","narrer","natation","nation","nature","naufrage","nautique","navire","nebuleux","nectar","nefaste","negation","negliger","negocier","neige","nerveux","nettoyer","neurone","neutron","neveu","niche","nickel","nitrate","niveau","noble","nocif","nocturne","noirceur","noisette","nomade","nombreux","nommer","normatif","notable","notifier","notoire","nourrir","nouveau","novateur","novembre","novice","nuage","nuancer","nuire","nuisible","numero","nuptial","nuque","nutritif","obeir","objectif","obliger","obscur","observer","obstacle","obtenir","obturer","occasion","occuper","ocean","octobre","octroyer","octupler","oculaire","odeur","odorant","offenser","officier","offrir","ogive","oiseau","oisillon","olfactif","olivier","ombrage","omettre","onctueux","onduler","onereux","onirique","opale","opaque","operer","opinion","opportun","opprimer","opter","optique","orageux","orange","orbite","ordonner","oreille","organe","orgueil","orifice","ornement","orque","ortie","osciller","osmose","ossature","otarie","ouragan","ourson","outil","outrager","ouvrage","ovation","oxyde","oxygene","ozone","paisible","palace","palmares","palourde","palper","panache","panda","pangolin","paniquer","panneau","panorama","pantalon","papaye","papier","papoter","papyrus","paradoxe","parcelle","paresse","parfumer","parler","parole","parrain","parsemer","partager","parure","parvenir","passion","pasteque","paternel","patience","patron","pavillon","pavoiser","payer","paysage","peigne","peintre","pelage","pelican","pelle","pelouse","peluche","pendule","penetrer","penible","pensif","penurie","pepite","peplum","perdrix","perforer","periode","permuter","perplexe","persil","perte","peser","petale","petit","petrir","peuple","pharaon","phobie","phoque","photon","phrase","physique","piano","pictural","piece","pierre","pieuvre","pilote","pinceau","pipette","piquer","pirogue","piscine","piston","pivoter","pixel","pizza","placard","plafond","plaisir","planer","plaque","plastron","plateau","pleurer","plexus","pliage","plomb","plonger","pluie","plumage","pochette","poesie","poete","pointe","poirier","poisson","poivre","polaire","policier","pollen","polygone","pommade","pompier","ponctuel","ponderer","poney","portique","position","posseder","posture","potager","poteau","potion","pouce","poulain","poumon","pourpre","poussin","pouvoir","prairie","pratique","precieux","predire","prefixe","prelude","prenom","presence","pretexte","prevoir","primitif","prince","prison","priver","probleme","proceder","prodige","profond","progres","proie","projeter","prologue","promener","propre","prospere","proteger","prouesse","proverbe","prudence","pruneau","psychose","public","puceron","puiser","pulpe","pulsar","punaise","punitif","pupitre","purifier","puzzle","pyramide","quasar","querelle","question","quietude","quitter","quotient","racine","raconter","radieux","ragondin","raideur","raisin","ralentir","rallonge","ramasser","rapide","rasage","ratisser","ravager","ravin","rayonner","reactif","reagir","realiser","reanimer","recevoir","reciter","reclamer","recolter","recruter","reculer","recycler","rediger","redouter","refaire","reflexe","reformer","refrain","refuge","regalien","region","reglage","regulier","reiterer","rejeter","rejouer","relatif","relever","relief","remarque","remede","remise","remonter","remplir","remuer","renard","renfort","renifler","renoncer","rentrer","renvoi","replier","reporter","reprise","reptile","requin","reserve","resineux","resoudre","respect","rester","resultat","retablir","retenir","reticule","retomber","retracer","reunion","reussir","revanche","revivre","revolte","revulsif","richesse","rideau","rieur","rigide","rigoler","rincer","riposter","risible","risque","rituel","rival","riviere","rocheux","romance","rompre","ronce","rondin","roseau","rosier","rotatif","rotor","rotule","rouge","rouille","rouleau","routine","royaume","ruban","rubis","ruche","ruelle","rugueux","ruiner","ruisseau","ruser","rustique","rythme","sabler","saboter","sabre","sacoche","safari","sagesse","saisir","salade","salive","salon","saluer","samedi","sanction","sanglier","sarcasme","sardine","saturer","saugrenu","saumon","sauter","sauvage","savant","savonner","scalpel","scandale","scelerat","scenario","sceptre","schema","science","scinder","score","scrutin","sculpter","seance","secable","secher","secouer","secreter","sedatif","seduire","seigneur","sejour","selectif","semaine","sembler","semence","seminal","senateur","sensible","sentence","separer","sequence","serein","sergent","serieux","serrure","serum","service","sesame","sevir","sevrage","sextuple","sideral","siecle","sieger","siffler","sigle","signal","silence","silicium","simple","sincere","sinistre","siphon","sirop","sismique","situer","skier","social","socle","sodium","soigneux","soldat","soleil","solitude","soluble","sombre","sommeil","somnoler","sonde","songeur","sonnette","sonore","sorcier","sortir","sosie","sottise","soucieux","soudure","souffle","soulever","soupape","source","soutirer","souvenir","spacieux","spatial","special","sphere","spiral","stable","station","sternum","stimulus","stipuler","strict","studieux","stupeur","styliste","sublime","substrat","subtil","subvenir","succes","sucre","suffixe","suggerer","suiveur","sulfate","superbe","supplier","surface","suricate","surmener","surprise","sursaut","survie","suspect","syllabe","symbole","symetrie","synapse","syntaxe","systeme","tabac","tablier","tactile","tailler","talent","talisman","talonner","tambour","tamiser","tangible","tapis","taquiner","tarder","tarif","tartine","tasse","tatami","tatouage","taupe","taureau","taxer","temoin","temporel","tenaille","tendre","teneur","tenir","tension","terminer","terne","terrible","tetine","texte","theme","theorie","therapie","thorax","tibia","tiede","timide","tirelire","tiroir","tissu","titane","titre","tituber","toboggan","tolerant","tomate","tonique","tonneau","toponyme","torche","tordre","tornade","torpille","torrent","torse","tortue","totem","toucher","tournage","tousser","toxine","traction","trafic","tragique","trahir","train","trancher","travail","trefle","tremper","tresor","treuil","triage","tribunal","tricoter","trilogie","triomphe","tripler","triturer","trivial","trombone","tronc","tropical","troupeau","tuile","tulipe","tumulte","tunnel","turbine","tuteur","tutoyer","tuyau","tympan","typhon","typique","tyran","ubuesque","ultime","ultrason","unanime","unifier","union","unique","unitaire","univers","uranium","urbain","urticant","usage","usine","usuel","usure","utile","utopie","vacarme","vaccin","vagabond","vague","vaillant","vaincre","vaisseau","valable","valise","vallon","valve","vampire","vanille","vapeur","varier","vaseux","vassal","vaste","vecteur","vedette","vegetal","vehicule","veinard","veloce","vendredi","venerer","venger","venimeux","ventouse","verdure","verin","vernir","verrou","verser","vertu","veston","veteran","vetuste","vexant","vexer","viaduc","viande","victoire","vidange","video","vignette","vigueur","vilain","village","vinaigre","violon","vipere","virement","virtuose","virus","visage","viseur","vision","visqueux","visuel","vital","vitesse","viticole","vitrine","vivace","vivipare","vocation","voguer","voile","voisin","voiture","volaille","volcan","voltiger","volume","vorace","vortex","voter","vouloir","voyage","voyelle","wagon","xenon","yacht","zebre","zenith","zeste","zoologie"]}],["bcoin","/lib/hd/words/italian.js",function(e,t,r,i,s,n){"use strict";r.exports=["abaco","abbaglio","abbinato","abete","abisso","abolire","abrasivo","abrogato","accadere","accenno","accusato","acetone","achille","acido","acqua","acre","acrilico","acrobata","acuto","adagio","addebito","addome","adeguato","aderire","adipe","adottare","adulare","affabile","affetto","affisso","affranto","aforisma","afoso","africano","agave","agente","agevole","aggancio","agire","agitare","agonismo","agricolo","agrumeto","aguzzo","alabarda","alato","albatro","alberato","albo","albume","alce","alcolico","alettone","alfa","algebra","aliante","alibi","alimento","allagato","allegro","allievo","allodola","allusivo","almeno","alogeno","alpaca","alpestre","altalena","alterno","alticcio","altrove","alunno","alveolo","alzare","amalgama","amanita","amarena","ambito","ambrato","ameba","america","ametista","amico","ammasso","ammenda","ammirare","ammonito","amore","ampio","ampliare","amuleto","anacardo","anagrafe","analista","anarchia","anatra","anca","ancella","ancora","andare","andrea","anello","angelo","angolare","angusto","anima","annegare","annidato","anno","annuncio","anonimo","anticipo","anzi","apatico","apertura","apode","apparire","appetito","appoggio","approdo","appunto","aprile","arabica","arachide","aragosta","araldica","arancio","aratura","arazzo","arbitro","archivio","ardito","arenile","argento","argine","arguto","aria","armonia","arnese","arredato","arringa","arrosto","arsenico","arso","artefice","arzillo","asciutto","ascolto","asepsi","asettico","asfalto","asino","asola","aspirato","aspro","assaggio","asse","assoluto","assurdo","asta","astenuto","astice","astratto","atavico","ateismo","atomico","atono","attesa","attivare","attorno","attrito","attuale","ausilio","austria","autista","autonomo","autunno","avanzato","avere","avvenire","avviso","avvolgere","azione","azoto","azzimo","azzurro","babele","baccano","bacino","baco","badessa","badilata","bagnato","baita","balcone","baldo","balena","ballata","balzano","bambino","bandire","baraonda","barbaro","barca","baritono","barlume","barocco","basilico","basso","batosta","battuto","baule","bava","bavosa","becco","beffa","belgio","belva","benda","benevole","benigno","benzina","bere","berlina","beta","bibita","bici","bidone","bifido","biga","bilancia","bimbo","binocolo","biologo","bipede","bipolare","birbante","birra","biscotto","bisesto","bisnonno","bisonte","bisturi","bizzarro","blando","blatta","bollito","bonifico","bordo","bosco","botanico","bottino","bozzolo","braccio","bradipo","brama","branca","bravura","bretella","brevetto","brezza","briglia","brillante","brindare","broccolo","brodo","bronzina","brullo","bruno","bubbone","buca","budino","buffone","buio","bulbo","buono","burlone","burrasca","bussola","busta","cadetto","caduco","calamaro","calcolo","calesse","calibro","calmo","caloria","cambusa","camerata","camicia","cammino","camola","campale","canapa","candela","cane","canino","canotto","cantina","capace","capello","capitolo","capogiro","cappero","capra","capsula","carapace","carcassa","cardo","carisma","carovana","carretto","cartolina","casaccio","cascata","caserma","caso","cassone","castello","casuale","catasta","catena","catrame","cauto","cavillo","cedibile","cedrata","cefalo","celebre","cellulare","cena","cenone","centesimo","ceramica","cercare","certo","cerume","cervello","cesoia","cespo","ceto","chela","chiaro","chicca","chiedere","chimera","china","chirurgo","chitarra","ciao","ciclismo","cifrare","cigno","cilindro","ciottolo","circa","cirrosi","citrico","cittadino","ciuffo","civetta","civile","classico","clinica","cloro","cocco","codardo","codice","coerente","cognome","collare","colmato","colore","colposo","coltivato","colza","coma","cometa","commando","comodo","computer","comune","conciso","condurre","conferma","congelare","coniuge","connesso","conoscere","consumo","continuo","convegno","coperto","copione","coppia","copricapo","corazza","cordata","coricato","cornice","corolla","corpo","corredo","corsia","cortese","cosmico","costante","cottura","covato","cratere","cravatta","creato","credere","cremoso","crescita","creta","criceto","crinale","crisi","critico","croce","cronaca","crostata","cruciale","crusca","cucire","cuculo","cugino","cullato","cupola","curatore","cursore","curvo","cuscino","custode","dado","daino","dalmata","damerino","daniela","dannoso","danzare","datato","davanti","davvero","debutto","decennio","deciso","declino","decollo","decreto","dedicato","definito","deforme","degno","delegare","delfino","delirio","delta","demenza","denotato","dentro","deposito","derapata","derivare","deroga","descritto","deserto","desiderio","desumere","detersivo","devoto","diametro","dicembre","diedro","difeso","diffuso","digerire","digitale","diluvio","dinamico","dinnanzi","dipinto","diploma","dipolo","diradare","dire","dirotto","dirupo","disagio","discreto","disfare","disgelo","disposto","distanza","disumano","dito","divano","divelto","dividere","divorato","doblone","docente","doganale","dogma","dolce","domato","domenica","dominare","dondolo","dono","dormire","dote","dottore","dovuto","dozzina","drago","druido","dubbio","dubitare","ducale","duna","duomo","duplice","duraturo","ebano","eccesso","ecco","eclissi","economia","edera","edicola","edile","editoria","educare","egemonia","egli","egoismo","egregio","elaborato","elargire","elegante","elencato","eletto","elevare","elfico","elica","elmo","elsa","eluso","emanato","emblema","emesso","emiro","emotivo","emozione","empirico","emulo","endemico","enduro","energia","enfasi","enoteca","entrare","enzima","epatite","epilogo","episodio","epocale","eppure","equatore","erario","erba","erboso","erede","eremita","erigere","ermetico","eroe","erosivo","errante","esagono","esame","esanime","esaudire","esca","esempio","esercito","esibito","esigente","esistere","esito","esofago","esortato","esoso","espanso","espresso","essenza","esso","esteso","estimare","estonia","estroso","esultare","etilico","etnico","etrusco","etto","euclideo","europa","evaso","evidenza","evitato","evoluto","evviva","fabbrica","faccenda","fachiro","falco","famiglia","fanale","fanfara","fango","fantasma","fare","farfalla","farinoso","farmaco","fascia","fastoso","fasullo","faticare","fato","favoloso","febbre","fecola","fede","fegato","felpa","feltro","femmina","fendere","fenomeno","fermento","ferro","fertile","fessura","festivo","fetta","feudo","fiaba","fiducia","fifa","figurato","filo","finanza","finestra","finire","fiore","fiscale","fisico","fiume","flacone","flamenco","flebo","flemma","florido","fluente","fluoro","fobico","focaccia","focoso","foderato","foglio","folata","folclore","folgore","fondente","fonetico","fonia","fontana","forbito","forchetta","foresta","formica","fornaio","foro","fortezza","forzare","fosfato","fosso","fracasso","frana","frassino","fratello","freccetta","frenata","fresco","frigo","frollino","fronde","frugale","frutta","fucilata","fucsia","fuggente","fulmine","fulvo","fumante","fumetto","fumoso","fune","funzione","fuoco","furbo","furgone","furore","fuso","futile","gabbiano","gaffe","galateo","gallina","galoppo","gambero","gamma","garanzia","garbo","garofano","garzone","gasdotto","gasolio","gastrico","gatto","gaudio","gazebo","gazzella","geco","gelatina","gelso","gemello","gemmato","gene","genitore","gennaio","genotipo","gergo","ghepardo","ghiaccio","ghisa","giallo","gilda","ginepro","giocare","gioiello","giorno","giove","girato","girone","gittata","giudizio","giurato","giusto","globulo","glutine","gnomo","gobba","golf","gomito","gommone","gonfio","gonna","governo","gracile","grado","grafico","grammo","grande","grattare","gravoso","grazia","greca","gregge","grifone","grigio","grinza","grotta","gruppo","guadagno","guaio","guanto","guardare","gufo","guidare","ibernato","icona","identico","idillio","idolo","idra","idrico","idrogeno","igiene","ignaro","ignorato","ilare","illeso","illogico","illudere","imballo","imbevuto","imbocco","imbuto","immane","immerso","immolato","impacco","impeto","impiego","importo","impronta","inalare","inarcare","inattivo","incanto","incendio","inchino","incisivo","incluso","incontro","incrocio","incubo","indagine","india","indole","inedito","infatti","infilare","inflitto","ingaggio","ingegno","inglese","ingordo","ingrosso","innesco","inodore","inoltrare","inondato","insano","insetto","insieme","insonnia","insulina","intasato","intero","intonaco","intuito","inumidire","invalido","invece","invito","iperbole","ipnotico","ipotesi","ippica","iride","irlanda","ironico","irrigato","irrorare","isolato","isotopo","isterico","istituto","istrice","italia","iterare","labbro","labirinto","lacca","lacerato","lacrima","lacuna","laddove","lago","lampo","lancetta","lanterna","lardoso","larga","laringe","lastra","latenza","latino","lattuga","lavagna","lavoro","legale","leggero","lembo","lentezza","lenza","leone","lepre","lesivo","lessato","lesto","letterale","leva","levigato","libero","lido","lievito","lilla","limatura","limitare","limpido","lineare","lingua","liquido","lira","lirica","lisca","lite","litigio","livrea","locanda","lode","logica","lombare","londra","longevo","loquace","lorenzo","loto","lotteria","luce","lucidato","lumaca","luminoso","lungo","lupo","luppolo","lusinga","lusso","lutto","macabro","macchina","macero","macinato","madama","magico","maglia","magnete","magro","maiolica","malafede","malgrado","malinteso","malsano","malto","malumore","mana","mancia","mandorla","mangiare","manifesto","mannaro","manovra","mansarda","mantide","manubrio","mappa","maratona","marcire","maretta","marmo","marsupio","maschera","massaia","mastino","materasso","matricola","mattone","maturo","mazurca","meandro","meccanico","mecenate","medesimo","meditare","mega","melassa","melis","melodia","meninge","meno","mensola","mercurio","merenda","merlo","meschino","mese","messere","mestolo","metallo","metodo","mettere","miagolare","mica","micelio","michele","microbo","midollo","miele","migliore","milano","milite","mimosa","minerale","mini","minore","mirino","mirtillo","miscela","missiva","misto","misurare","mitezza","mitigare","mitra","mittente","mnemonico","modello","modifica","modulo","mogano","mogio","mole","molosso","monastero","monco","mondina","monetario","monile","monotono","monsone","montato","monviso","mora","mordere","morsicato","mostro","motivato","motosega","motto","movenza","movimento","mozzo","mucca","mucosa","muffa","mughetto","mugnaio","mulatto","mulinello","multiplo","mummia","munto","muovere","murale","musa","muscolo","musica","mutevole","muto","nababbo","nafta","nanometro","narciso","narice","narrato","nascere","nastrare","naturale","nautica","naviglio","nebulosa","necrosi","negativo","negozio","nemmeno","neofita","neretto","nervo","nessuno","nettuno","neutrale","neve","nevrotico","nicchia","ninfa","nitido","nobile","nocivo","nodo","nome","nomina","nordico","normale","norvegese","nostrano","notare","notizia","notturno","novella","nucleo","nulla","numero","nuovo","nutrire","nuvola","nuziale","oasi","obbedire","obbligo","obelisco","oblio","obolo","obsoleto","occasione","occhio","occidente","occorrere","occultare","ocra","oculato","odierno","odorare","offerta","offrire","offuscato","oggetto","oggi","ognuno","olandese","olfatto","oliato","oliva","ologramma","oltre","omaggio","ombelico","ombra","omega","omissione","ondoso","onere","onice","onnivoro","onorevole","onta","operato","opinione","opposto","oracolo","orafo","ordine","orecchino","orefice","orfano","organico","origine","orizzonte","orma","ormeggio","ornativo","orologio","orrendo","orribile","ortensia","ortica","orzata","orzo","osare","oscurare","osmosi","ospedale","ospite","ossa","ossidare","ostacolo","oste","otite","otre","ottagono","ottimo","ottobre","ovale","ovest","ovino","oviparo","ovocito","ovunque","ovviare","ozio","pacchetto","pace","pacifico","padella","padrone","paese","paga","pagina","palazzina","palesare","pallido","palo","palude","pandoro","pannello","paolo","paonazzo","paprica","parabola","parcella","parere","pargolo","pari","parlato","parola","partire","parvenza","parziale","passivo","pasticca","patacca","patologia","pattume","pavone","peccato","pedalare","pedonale","peggio","peloso","penare","pendice","penisola","pennuto","penombra","pensare","pentola","pepe","pepita","perbene","percorso","perdonato","perforare","pergamena","periodo","permesso","perno","perplesso","persuaso","pertugio","pervaso","pesatore","pesista","peso","pestifero","petalo","pettine","petulante","pezzo","piacere","pianta","piattino","piccino","picozza","piega","pietra","piffero","pigiama","pigolio","pigro","pila","pilifero","pillola","pilota","pimpante","pineta","pinna","pinolo","pioggia","piombo","piramide","piretico","pirite","pirolisi","pitone","pizzico","placebo","planare","plasma","platano","plenario","pochezza","poderoso","podismo","poesia","poggiare","polenta","poligono","pollice","polmonite","polpetta","polso","poltrona","polvere","pomice","pomodoro","ponte","popoloso","porfido","poroso","porpora","porre","portata","posa","positivo","possesso","postulato","potassio","potere","pranzo","prassi","pratica","precluso","predica","prefisso","pregiato","prelievo","premere","prenotare","preparato","presenza","pretesto","prevalso","prima","principe","privato","problema","procura","produrre","profumo","progetto","prolunga","promessa","pronome","proposta","proroga","proteso","prova","prudente","prugna","prurito","psiche","pubblico","pudica","pugilato","pugno","pulce","pulito","pulsante","puntare","pupazzo","pupilla","puro","quadro","qualcosa","quasi","querela","quota","raccolto","raddoppio","radicale","radunato","raffica","ragazzo","ragione","ragno","ramarro","ramingo","ramo","randagio","rantolare","rapato","rapina","rappreso","rasatura","raschiato","rasente","rassegna","rastrello","rata","ravveduto","reale","recepire","recinto","recluta","recondito","recupero","reddito","redimere","regalato","registro","regola","regresso","relazione","remare","remoto","renna","replica","reprimere","reputare","resa","residente","responso","restauro","rete","retina","retorica","rettifica","revocato","riassunto","ribadire","ribelle","ribrezzo","ricarica","ricco","ricevere","riciclato","ricordo","ricreduto","ridicolo","ridurre","rifasare","riflesso","riforma","rifugio","rigare","rigettato","righello","rilassato","rilevato","rimanere","rimbalzo","rimedio","rimorchio","rinascita","rincaro","rinforzo","rinnovo","rinomato","rinsavito","rintocco","rinuncia","rinvenire","riparato","ripetuto","ripieno","riportare","ripresa","ripulire","risata","rischio","riserva","risibile","riso","rispetto","ristoro","risultato","risvolto","ritardo","ritegno","ritmico","ritrovo","riunione","riva","riverso","rivincita","rivolto","rizoma","roba","robotico","robusto","roccia","roco","rodaggio","rodere","roditore","rogito","rollio","romantico","rompere","ronzio","rosolare","rospo","rotante","rotondo","rotula","rovescio","rubizzo","rubrica","ruga","rullino","rumine","rumoroso","ruolo","rupe","russare","rustico","sabato","sabbiare","sabotato","sagoma","salasso","saldatura","salgemma","salivare","salmone","salone","saltare","saluto","salvo","sapere","sapido","saporito","saraceno","sarcasmo","sarto","sassoso","satellite","satira","satollo","saturno","savana","savio","saziato","sbadiglio","sbalzo","sbancato","sbarra","sbattere","sbavare","sbendare","sbirciare","sbloccato","sbocciato","sbrinare","sbruffone","sbuffare","scabroso","scadenza","scala","scambiare","scandalo","scapola","scarso","scatenare","scavato","scelto","scenico","scettro","scheda","schiena","sciarpa","scienza","scindere","scippo","sciroppo","scivolo","sclerare","scodella","scolpito","scomparto","sconforto","scoprire","scorta","scossone","scozzese","scriba","scrollare","scrutinio","scuderia","scultore","scuola","scuro","scusare","sdebitare","sdoganare","seccatura","secondo","sedano","seggiola","segnalato","segregato","seguito","selciato","selettivo","sella","selvaggio","semaforo","sembrare","seme","seminato","sempre","senso","sentire","sepolto","sequenza","serata","serbato","sereno","serio","serpente","serraglio","servire","sestina","setola","settimana","sfacelo","sfaldare","sfamato","sfarzoso","sfaticato","sfera","sfida","sfilato","sfinge","sfocato","sfoderare","sfogo","sfoltire","sforzato","sfratto","sfruttato","sfuggito","sfumare","sfuso","sgabello","sgarbato","sgonfiare","sgorbio","sgrassato","sguardo","sibilo","siccome","sierra","sigla","signore","silenzio","sillaba","simbolo","simpatico","simulato","sinfonia","singolo","sinistro","sino","sintesi","sinusoide","sipario","sisma","sistole","situato","slitta","slogatura","sloveno","smarrito","smemorato","smentito","smeraldo","smilzo","smontare","smottato","smussato","snellire","snervato","snodo","sobbalzo","sobrio","soccorso","sociale","sodale","soffitto","sogno","soldato","solenne","solido","sollazzo","solo","solubile","solvente","somatico","somma","sonda","sonetto","sonnifero","sopire","soppeso","sopra","sorgere","sorpasso","sorriso","sorso","sorteggio","sorvolato","sospiro","sosta","sottile","spada","spalla","spargere","spatola","spavento","spazzola","specie","spedire","spegnere","spelatura","speranza","spessore","spettrale","spezzato","spia","spigoloso","spillato","spinoso","spirale","splendido","sportivo","sposo","spranga","sprecare","spronato","spruzzo","spuntino","squillo","sradicare","srotolato","stabile","stacco","staffa","stagnare","stampato","stantio","starnuto","stasera","statuto","stelo","steppa","sterzo","stiletto","stima","stirpe","stivale","stizzoso","stonato","storico","strappo","stregato","stridulo","strozzare","strutto","stuccare","stufo","stupendo","subentro","succoso","sudore","suggerito","sugo","sultano","suonare","superbo","supporto","surgelato","surrogato","sussurro","sutura","svagare","svedese","sveglio","svelare","svenuto","svezia","sviluppo","svista","svizzera","svolta","svuotare","tabacco","tabulato","tacciare","taciturno","tale","talismano","tampone","tannino","tara","tardivo","targato","tariffa","tarpare","tartaruga","tasto","tattico","taverna","tavolata","tazza","teca","tecnico","telefono","temerario","tempo","temuto","tendone","tenero","tensione","tentacolo","teorema","terme","terrazzo","terzetto","tesi","tesserato","testato","tetro","tettoia","tifare","tigella","timbro","tinto","tipico","tipografo","tiraggio","tiro","titanio","titolo","titubante","tizio","tizzone","toccare","tollerare","tolto","tombola","tomo","tonfo","tonsilla","topazio","topologia","toppa","torba","tornare","torrone","tortora","toscano","tossire","tostatura","totano","trabocco","trachea","trafila","tragedia","tralcio","tramonto","transito","trapano","trarre","trasloco","trattato","trave","treccia","tremolio","trespolo","tributo","tricheco","trifoglio","trillo","trincea","trio","tristezza","triturato","trivella","tromba","trono","troppo","trottola","trovare","truccato","tubatura","tuffato","tulipano","tumulto","tunisia","turbare","turchino","tuta","tutela","ubicato","uccello","uccisore","udire","uditivo","uffa","ufficio","uguale","ulisse","ultimato","umano","umile","umorismo","uncinetto","ungere","ungherese","unicorno","unificato","unisono","unitario","unte","uovo","upupa","uragano","urgenza","urlo","usanza","usato","uscito","usignolo","usuraio","utensile","utilizzo","utopia","vacante","vaccinato","vagabondo","vagliato","valanga","valgo","valico","valletta","valoroso","valutare","valvola","vampata","vangare","vanitoso","vano","vantaggio","vanvera","vapore","varano","varcato","variante","vasca","vedetta","vedova","veduto","vegetale","veicolo","velcro","velina","velluto","veloce","venato","vendemmia","vento","verace","verbale","vergogna","verifica","vero","verruca","verticale","vescica","vessillo","vestale","veterano","vetrina","vetusto","viandante","vibrante","vicenda","vichingo","vicinanza","vidimare","vigilia","vigneto","vigore","vile","villano","vimini","vincitore","viola","vipera","virgola","virologo","virulento","viscoso","visione","vispo","vissuto","visura","vita","vitello","vittima","vivanda","vivido","viziare","voce","voga","volatile","volere","volpe","voragine","vulcano","zampogna","zanna","zappato","zattera","zavorra","zefiro","zelante","zelo","zenzero","zerbino","zibetto","zinco","zircone","zitto","zolla","zotico","zucchero","zufolo","zulu","zuppa"]}],["bcoin","/lib/hd/words/japanese.js",function(e,t,r,i,s,n){"use strict";r.exports=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]}],["bcoin","/lib/hd/words/spanish.js",function(e,t,r,i,s,n){"use strict";r.exports=["abaco","abdomen","abeja","abierto","abogado","abono","aborto","abrazo","abrir","abuelo","abuso","acabar","academia","acceso","accion","aceite","acelga","acento","aceptar","acido","aclarar","acne","acoger","acoso","activo","acto","actriz","actuar","acudir","acuerdo","acusar","adicto","admitir","adoptar","adorno","aduana","adulto","aereo","afectar","aficion","afinar","afirmar","agil","agitar","agonia","agosto","agotar","agregar","agrio","agua","agudo","aguila","aguja","ahogo","ahorro","aire","aislar","ajedrez","ajeno","ajuste","alacran","alambre","alarma","alba","album","alcalde","aldea","alegre","alejar","alerta","aleta","alfiler","alga","algodon","aliado","aliento","alivio","alma","almeja","almibar","altar","alteza","altivo","alto","altura","alumno","alzar","amable","amante","amapola","amargo","amasar","ambar","ambito","ameno","amigo","amistad","amor","amparo","amplio","ancho","anciano","ancla","andar","anden","anemia","angulo","anillo","animo","anis","anotar","antena","antiguo","antojo","anual","anular","anuncio","anadir","anejo","ano","apagar","aparato","apetito","apio","aplicar","apodo","aporte","apoyo","aprender","aprobar","apuesta","apuro","arado","arana","arar","arbitro","arbol","arbusto","archivo","arco","arder","ardilla","arduo","area","arido","aries","armonia","arnes","aroma","arpa","arpon","arreglo","arroz","arruga","arte","artista","asa","asado","asalto","ascenso","asegurar","aseo","asesor","asiento","asilo","asistir","asno","asombro","aspero","astilla","astro","astuto","asumir","asunto","atajo","ataque","atar","atento","ateo","atico","atleta","atomo","atraer","atroz","atun","audaz","audio","auge","aula","aumento","ausente","autor","aval","avance","avaro","ave","avellana","avena","avestruz","avion","aviso","ayer","ayuda","ayuno","azafran","azar","azote","azucar","azufre","azul","baba","babor","bache","bahia","baile","bajar","balanza","balcon","balde","bambu","banco","banda","bano","barba","barco","barniz","barro","bascula","baston","basura","batalla","bateria","batir","batuta","baul","bazar","bebe","bebida","bello","besar","beso","bestia","bicho","bien","bingo","blanco","bloque","blusa","boa","bobina","bobo","boca","bocina","boda","bodega","boina","bola","bolero","bolsa","bomba","bondad","bonito","bono","bonsai","borde","borrar","bosque","bote","botin","boveda","bozal","bravo","brazo","brecha","breve","brillo","brinco","brisa","broca","broma","bronce","brote","bruja","brusco","bruto","buceo","bucle","bueno","buey","bufanda","bufon","buho","buitre","bulto","burbuja","burla","burro","buscar","butaca","buzon","caballo","cabeza","cabina","cabra","cacao","cadaver","cadena","caer","cafe","caida","caiman","caja","cajon","cal","calamar","calcio","caldo","calidad","calle","calma","calor","calvo","cama","cambio","camello","camino","campo","cancer","candil","canela","canguro","canica","canto","cana","canon","caoba","caos","capaz","capitan","capote","captar","capucha","cara","carbon","carcel","careta","carga","carino","carne","carpeta","carro","carta","casa","casco","casero","caspa","castor","catorce","catre","caudal","causa","cazo","cebolla","ceder","cedro","celda","celebre","celoso","celula","cemento","ceniza","centro","cerca","cerdo","cereza","cero","cerrar","certeza","cesped","cetro","chacal","chaleco","champu","chancla","chapa","charla","chico","chiste","chivo","choque","choza","chuleta","chupar","ciclon","ciego","cielo","cien","cierto","cifra","cigarro","cima","cinco","cine","cinta","cipres","circo","ciruela","cisne","cita","ciudad","clamor","clan","claro","clase","clave","cliente","clima","clinica","cobre","coccion","cochino","cocina","coco","codigo","codo","cofre","coger","cohete","cojin","cojo","cola","colcha","colegio","colgar","colina","collar","colmo","columna","combate","comer","comida","comodo","compra","conde","conejo","conga","conocer","consejo","contar","copa","copia","corazon","corbata","corcho","cordon","corona","correr","coser","cosmos","costa","craneo","crater","crear","crecer","creido","crema","cria","crimen","cripta","crisis","cromo","cronica","croqueta","crudo","cruz","cuadro","cuarto","cuatro","cubo","cubrir","cuchara","cuello","cuento","cuerda","cuesta","cueva","cuidar","culebra","culpa","culto","cumbre","cumplir","cuna","cuneta","cuota","cupon","cupula","curar","curioso","curso","curva","cutis","dama","danza","dar","dardo","datil","deber","debil","decada","decir","dedo","defensa","definir","dejar","delfin","delgado","delito","demora","denso","dental","deporte","derecho","derrota","desayuno","deseo","desfile","desnudo","destino","desvio","detalle","detener","deuda","dia","diablo","diadema","diamante","diana","diario","dibujo","dictar","diente","dieta","diez","dificil","digno","dilema","diluir","dinero","directo","dirigir","disco","diseno","disfraz","diva","divino","doble","doce","dolor","domingo","don","donar","dorado","dormir","dorso","dos","dosis","dragon","droga","ducha","duda","duelo","dueno","dulce","duo","duque","durar","dureza","duro","ebano","ebrio","echar","eco","ecuador","edad","edicion","edificio","editor","educar","efecto","eficaz","eje","ejemplo","elefante","elegir","elemento","elevar","elipse","elite","elixir","elogio","eludir","embudo","emitir","emocion","empate","empeno","empleo","empresa","enano","encargo","enchufe","encia","enemigo","enero","enfado","enfermo","engano","enigma","enlace","enorme","enredo","ensayo","ensenar","entero","entrar","envase","envio","epoca","equipo","erizo","escala","escena","escolar","escribir","escudo","esencia","esfera","esfuerzo","espada","espejo","espia","esposa","espuma","esqui","estar","este","estilo","estufa","etapa","eterno","etica","etnia","evadir","evaluar","evento","evitar","exacto","examen","exceso","excusa","exento","exigir","exilio","existir","exito","experto","explicar","exponer","extremo","fabrica","fabula","fachada","facil","factor","faena","faja","falda","fallo","falso","faltar","fama","familia","famoso","faraon","farmacia","farol","farsa","fase","fatiga","fauna","favor","fax","febrero","fecha","feliz","feo","feria","feroz","fertil","fervor","festin","fiable","fianza","fiar","fibra","ficcion","ficha","fideo","fiebre","fiel","fiera","fiesta","figura","fijar","fijo","fila","filete","filial","filtro","fin","finca","fingir","finito","firma","flaco","flauta","flecha","flor","flota","fluir","flujo","fluor","fobia","foca","fogata","fogon","folio","folleto","fondo","forma","forro","fortuna","forzar","fosa","foto","fracaso","fragil","franja","frase","fraude","freir","freno","fresa","frio","frito","fruta","fuego","fuente","fuerza","fuga","fumar","funcion","funda","furgon","furia","fusil","futbol","futuro","gacela","gafas","gaita","gajo","gala","galeria","gallo","gamba","ganar","gancho","ganga","ganso","garaje","garza","gasolina","gastar","gato","gavilan","gemelo","gemir","gen","genero","genio","gente","geranio","gerente","germen","gesto","gigante","gimnasio","girar","giro","glaciar","globo","gloria","gol","golfo","goloso","golpe","goma","gordo","gorila","gorra","gota","goteo","gozar","grada","grafico","grano","grasa","gratis","grave","grieta","grillo","gripe","gris","grito","grosor","grua","grueso","grumo","grupo","guante","guapo","guardia","guerra","guia","guino","guion","guiso","guitarra","gusano","gustar","haber","habil","hablar","hacer","hacha","hada","hallar","hamaca","harina","haz","hazana","hebilla","hebra","hecho","helado","helio","hembra","herir","hermano","heroe","hervir","hielo","hierro","higado","higiene","hijo","himno","historia","hocico","hogar","hoguera","hoja","hombre","hongo","honor","honra","hora","hormiga","horno","hostil","hoyo","hueco","huelga","huerta","hueso","huevo","huida","huir","humano","humedo","humilde","humo","hundir","huracan","hurto","icono","ideal","idioma","idolo","iglesia","iglu","igual","ilegal","ilusion","imagen","iman","imitar","impar","imperio","imponer","impulso","incapaz","indice","inerte","infiel","informe","ingenio","inicio","inmenso","inmune","innato","insecto","instante","interes","intimo","intuir","inutil","invierno","ira","iris","ironia","isla","islote","jabali","jabon","jamon","jarabe","jardin","jarra","jaula","jazmin","jefe","jeringa","jinete","jornada","joroba","joven","joya","juerga","jueves","juez","jugador","jugo","juguete","juicio","junco","jungla","junio","juntar","jupiter","jurar","justo","juvenil","juzgar","kilo","koala","labio","lacio","lacra","lado","ladron","lagarto","lagrima","laguna","laico","lamer","lamina","lampara","lana","lancha","langosta","lanza","lapiz","largo","larva","lastima","lata","latex","latir","laurel","lavar","lazo","leal","leccion","leche","lector","leer","legion","legumbre","lejano","lengua","lento","lena","leon","leopardo","lesion","letal","letra","leve","leyenda","libertad","libro","licor","lider","lidiar","lienzo","liga","ligero","lima","limite","limon","limpio","lince","lindo","linea","lingote","lino","linterna","liquido","liso","lista","litera","litio","litro","llaga","llama","llanto","llave","llegar","llenar","llevar","llorar","llover","lluvia","lobo","locion","loco","locura","logica","logro","lombriz","lomo","lonja","lote","lucha","lucir","lugar","lujo","luna","lunes","lupa","lustro","luto","luz","maceta","macho","madera","madre","maduro","maestro","mafia","magia","mago","maiz","maldad","maleta","malla","malo","mama","mambo","mamut","manco","mando","manejar","manga","maniqui","manjar","mano","manso","manta","manana","mapa","maquina","mar","marco","marea","marfil","margen","marido","marmol","marron","martes","marzo","masa","mascara","masivo","matar","materia","matiz","matriz","maximo","mayor","mazorca","mecha","medalla","medio","medula","mejilla","mejor","melena","melon","memoria","menor","mensaje","mente","menu","mercado","merengue","merito","mes","meson","meta","meter","metodo","metro","mezcla","miedo","miel","miembro","miga","mil","milagro","militar","millon","mimo","mina","minero","minimo","minuto","miope","mirar","misa","miseria","misil","mismo","mitad","mito","mochila","mocion","moda","modelo","moho","mojar","molde","moler","molino","momento","momia","monarca","moneda","monja","monto","mono","morada","morder","moreno","morir","morro","morsa","mortal","mosca","mostrar","motivo","mover","movil","mozo","mucho","mudar","mueble","muela","muerte","muestra","mugre","mujer","mula","muleta","multa","mundo","muneca","mural","muro","musculo","museo","musgo","musica","muslo","nacar","nacion","nadar","naipe","naranja","nariz","narrar","nasal","natal","nativo","natural","nausea","naval","nave","navidad","necio","nectar","negar","negocio","negro","neon","nervio","neto","neutro","nevar","nevera","nicho","nido","niebla","nieto","ninez","nino","nitido","nivel","nobleza","noche","nomina","noria","norma","norte","nota","noticia","novato","novela","novio","nube","nuca","nucleo","nudillo","nudo","nuera","nueve","nuez","nulo","numero","nutria","oasis","obeso","obispo","objeto","obra","obrero","observar","obtener","obvio","oca","ocaso","oceano","ochenta","ocho","ocio","ocre","octavo","octubre","oculto","ocupar","ocurrir","odiar","odio","odisea","oeste","ofensa","oferta","oficio","ofrecer","ogro","oido","oir","ojo","ola","oleada","olfato","olivo","olla","olmo","olor","olvido","ombligo","onda","onza","opaco","opcion","opera","opinar","oponer","optar","optica","opuesto","oracion","orador","oral","orbita","orca","orden","oreja","organo","orgia","orgullo","oriente","origen","orilla","oro","orquesta","oruga","osadia","oscuro","osezno","oso","ostra","otono","otro","oveja","ovulo","oxido","oxigeno","oyente","ozono","pacto","padre","paella","pagina","pago","pais","pajaro","palabra","palco","paleta","palido","palma","paloma","palpar","pan","panal","panico","pantera","panuelo","papa","papel","papilla","paquete","parar","parcela","pared","parir","paro","parpado","parque","parrafo","parte","pasar","paseo","pasion","paso","pasta","pata","patio","patria","pausa","pauta","pavo","payaso","peaton","pecado","pecera","pecho","pedal","pedir","pegar","peine","pelar","peldano","pelea","peligro","pellejo","pelo","peluca","pena","pensar","penon","peon","peor","pepino","pequeno","pera","percha","perder","pereza","perfil","perico","perla","permiso","perro","persona","pesa","pesca","pesimo","pestana","petalo","petroleo","pez","pezuna","picar","pichon","pie","piedra","pierna","pieza","pijama","pilar","piloto","pimienta","pino","pintor","pinza","pina","piojo","pipa","pirata","pisar","piscina","piso","pista","piton","pizca","placa","plan","plata","playa","plaza","pleito","pleno","plomo","pluma","plural","pobre","poco","poder","podio","poema","poesia","poeta","polen","policia","pollo","polvo","pomada","pomelo","pomo","pompa","poner","porcion","portal","posada","poseer","posible","poste","potencia","potro","pozo","prado","precoz","pregunta","premio","prensa","preso","previo","primo","principe","prision","privar","proa","probar","proceso","producto","proeza","profesor","programa","prole","promesa","pronto","propio","proximo","prueba","publico","puchero","pudor","pueblo","puerta","puesto","pulga","pulir","pulmon","pulpo","pulso","puma","punto","punal","puno","pupa","pupila","pure","quedar","queja","quemar","querer","queso","quieto","quimica","quince","quitar","rabano","rabia","rabo","racion","radical","raiz","rama","rampa","rancho","rango","rapaz","rapido","rapto","rasgo","raspa","rato","rayo","raza","razon","reaccion","realidad","rebano","rebote","recaer","receta","rechazo","recoger","recreo","recto","recurso","red","redondo","reducir","reflejo","reforma","refran","refugio","regalo","regir","regla","regreso","rehen","reino","reir","reja","relato","relevo","relieve","relleno","reloj","remar","remedio","remo","rencor","rendir","renta","reparto","repetir","reposo","reptil","res","rescate","resina","respeto","resto","resumen","retiro","retorno","retrato","reunir","reves","revista","rey","rezar","rico","riego","rienda","riesgo","rifa","rigido","rigor","rincon","rinon","rio","riqueza","risa","ritmo","rito","rizo","roble","roce","rociar","rodar","rodeo","rodilla","roer","rojizo","rojo","romero","romper","ron","ronco","ronda","ropa","ropero","rosa","rosca","rostro","rotar","rubi","rubor","rudo","rueda","rugir","ruido","ruina","ruleta","rulo","rumbo","rumor","ruptura","ruta","rutina","sabado","saber","sabio","sable","sacar","sagaz","sagrado","sala","saldo","salero","salir","salmon","salon","salsa","salto","salud","salvar","samba","sancion","sandia","sanear","sangre","sanidad","sano","santo","sapo","saque","sardina","sarten","sastre","satan","sauna","saxofon","seccion","seco","secreto","secta","sed","seguir","seis","sello","selva","semana","semilla","senda","sensor","senal","senor","separar","sepia","sequia","ser","serie","sermon","servir","sesenta","sesion","seta","setenta","severo","sexo","sexto","sidra","siesta","siete","siglo","signo","silaba","silbar","silencio","silla","simbolo","simio","sirena","sistema","sitio","situar","sobre","socio","sodio","sol","solapa","soldado","soledad","solido","soltar","solucion","sombra","sondeo","sonido","sonoro","sonrisa","sopa","soplar","soporte","sordo","sorpresa","sorteo","sosten","sotano","suave","subir","suceso","sudor","suegra","suelo","sueno","suerte","sufrir","sujeto","sultan","sumar","superar","suplir","suponer","supremo","sur","surco","sureno","surgir","susto","sutil","tabaco","tabique","tabla","tabu","taco","tacto","tajo","talar","talco","talento","talla","talon","tamano","tambor","tango","tanque","tapa","tapete","tapia","tapon","taquilla","tarde","tarea","tarifa","tarjeta","tarot","tarro","tarta","tatuaje","tauro","taza","tazon","teatro","techo","tecla","tecnica","tejado","tejer","tejido","tela","telefono","tema","temor","templo","tenaz","tender","tener","tenis","tenso","teoria","terapia","terco","termino","ternura","terror","tesis","tesoro","testigo","tetera","texto","tez","tibio","tiburon","tiempo","tienda","tierra","tieso","tigre","tijera","tilde","timbre","timido","timo","tinta","tio","tipico","tipo","tira","tiron","titan","titere","titulo","tiza","toalla","tobillo","tocar","tocino","todo","toga","toldo","tomar","tono","tonto","topar","tope","toque","torax","torero","tormenta","torneo","toro","torpedo","torre","torso","tortuga","tos","tosco","toser","toxico","trabajo","tractor","traer","trafico","trago","traje","tramo","trance","trato","trauma","trazar","trebol","tregua","treinta","tren","trepar","tres","tribu","trigo","tripa","triste","triunfo","trofeo","trompa","tronco","tropa","trote","trozo","truco","trueno","trufa","tuberia","tubo","tuerto","tumba","tumor","tunel","tunica","turbina","turismo","turno","tutor","ubicar","ulcera","umbral","unidad","unir","universo","uno","untar","una","urbano","urbe","urgente","urna","usar","usuario","util","utopia","uva","vaca","vacio","vacuna","vagar","vago","vaina","vajilla","vale","valido","valle","valor","valvula","vampiro","vara","variar","varon","vaso","vecino","vector","vehiculo","veinte","vejez","vela","velero","veloz","vena","vencer","venda","veneno","vengar","venir","venta","venus","ver","verano","verbo","verde","vereda","verja","verso","verter","via","viaje","vibrar","vicio","victima","vida","video","vidrio","viejo","viernes","vigor","vil","villa","vinagre","vino","vinedo","violin","viral","virgo","virtud","visor","vispera","vista","vitamina","viudo","vivaz","vivero","vivir","vivo","volcan","volumen","volver","voraz","votar","voto","voz","vuelo","vulgar","yacer","yate","yegua","yema","yerno","yeso","yodo","yoga","yogur","zafiro","zanja","zapato","zarza","zona","zorro","zumo","zurdo"]}],["bcoin","/lib/hd/nfkd-compat.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(247,r);r.exports=function(e){return e.normalize?e.normalize("NFKD"):o.nfkd(e)}}],["bcoin","/lib/hd/unorm.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(248,r),a=[null,0,{}],h=10,c=44032,u=4352,f=4449,l=4519,d=19,p=21,b=28,g=p*b,m=d*g,_={},w=[];for(let e=0;e<=255;e++)w[e]=0;let y=null;class v{constructor(e,t){this.codepoint=e,this.feature=t}static isHighSurrogate(e){return e>=55296&&e<=56319}static isLowSurrogate(e){return e>=56320&&e<=57343}prepFeature(){this.feature||(this.feature=y(this.codepoint,!0).feature)}toString(){if(this.codepoint<65536)return String.fromCharCode(this.codepoint);const e=this.codepoint-65536;return String.fromCharCode(Math.floor(e/1024)+55296,e%1024+56320)}getDecomp(){return this.prepFeature(),this.feature[0]||null}isCompatibility(){return this.prepFeature(),Boolean(this.feature[1])&&0!=(256&this.feature[1])}isExclude(){return this.prepFeature(),Boolean(this.feature[1])&&0!=(512&this.feature[1])}getCanonicalClass(){return this.prepFeature(),this.feature[1]?255&this.feature[1]:0}getComposite(e){if(this.prepFeature(),!this.feature[2])return null;const t=this.feature[2][e.codepoint];return t?y(t):null}}y=[function(e,t,r){return t<60||13311<t&&t<42607?new v(t,a):e(t,r)},function(e,t,r){let i=_[t];return i||(i=e(t,r)).feature&&++w[t>>8&255]>h&&(_[t]=i),i},function(e,t,r){return r?e(t,r):new v(t,null)},function(e,t,r){if(t<u||u+d<=t&&t<c||c+m<t)return e(t,r);if(u<=t&&t<u+d){const e={},r=(t-u)*p;for(let t=0;t<p;t++)e[f+t]=c+b*(t+r);return new v(t,[null,null,e])}const i=t-c,s=i%b,n=[];if(0!==s)n[0]=[c+i-s,l+s];else{n[0]=[u+Math.floor(i/g),f+Math.floor(i%g/b)],n[2]={};for(let e=1;e<b;e++)n[2][l+e]=t+e}return new v(t,n)},function(e,t,r){const i=(o[65280&t]||{})[t];return new v(t,i||a)}].reduceRight((e,t)=>(r,i)=>t(e,r,i),null);class E{constructor(e){this.str=e,this.cursor=0}next(){if(this.str&&this.cursor<this.str.length){let e=this.str.charCodeAt(this.cursor++);if(v.isHighSurrogate(e)&&this.cursor<this.str.length){const t=this.str.charCodeAt(this.cursor);v.isLowSurrogate(t)&&(e=1024*(e-55296)+(t-56320)+65536,this.cursor+=1)}return y(e)}return this.str=null,null}}class S{constructor(e,t){this.it=e,this.canonical=t,this.resBuf=[]}recursiveDecomp(e){const t=this.canonical,r=e.getDecomp();if(r&&(!t||!e.isCompatibility())){let e=[];for(let t=0;t<r.length;t++){const i=this.recursiveDecomp(y(r[t]));e=e.concat(i)}return e}return[e]}next(){if(0===this.resBuf.length){const e=this.it.next();if(!e)return null;this.resBuf=this.recursiveDecomp(e)}return this.resBuf.shift()}}class I{constructor(e){this.it=e,this.resBuf=[]}next(){if(0===this.resBuf.length)for(;;){const e=this.it.next();if(!e)break;const t=e.getCanonicalClass();let r=this.resBuf.length;if(0!==t)for(;r>0;){if(this.resBuf[r-1].getCanonicalClass()<=t)break;r-=1}if(this.resBuf.splice(r,0,e),0===t)break}return this.resBuf.shift()}}class k{constructor(e){this.it=e,this.procBuf=[],this.resBuf=[],this.lastClass=null}next(){for(;0===this.resBuf.length;){const e=this.it.next();if(!e){this.resBuf=this.procBuf,this.procBuf=[];break}if(0===this.procBuf.length){this.lastClass=e.getCanonicalClass(),this.procBuf.push(e);continue}const t=this.procBuf[0].getComposite(e),r=e.getCanonicalClass();t&&(this.lastClass<r||0===this.lastClass)?this.procBuf[0]=t:(0===r&&(this.resBuf=this.procBuf,this.procBuf=[]),this.lastClass=r,this.procBuf.push(e))}return this.resBuf.shift()}}function A(e,t){const r=function(e,t){switch(e){case"NFD":{const e=new E(t),r=new S(e,!0);return new I(r)}case"NFKD":{const e=new E(t),r=new S(e,!1);return new I(r)}case"NFC":{const e=new E(t),r=new S(e,!0),i=new I(r);return new k(i)}case"NFKC":{const e=new E(t),r=new S(e,!1),i=new I(r);return new k(i)}}throw new Error(`${e} is invalid.`)}(e,t);let i,s="";for(;i=r.next();)s+=i.toString();return s}e.nfc=function(e){return A("NFC",e)},e.nfd=function(e){return A("NFD",e)},e.nfkc=function(e){return A("NFKC",e)},e.nfkd=function(e){return A("NFKD",e)}}],["bcoin","/lib/hd/udata.json",function(e,t,r,i,s,n){r.exports={0:{60:[null,null,{824:8814}],61:[null,null,{824:8800}],62:[null,null,{824:8815}],65:[null,null,{768:192,769:193,770:194,771:195,772:256,774:258,775:550,776:196,777:7842,778:197,780:461,783:512,785:514,803:7840,805:7680,808:260}],66:[null,null,{775:7682,803:7684,817:7686}],67:[null,null,{769:262,770:264,775:266,780:268,807:199}],68:[null,null,{775:7690,780:270,803:7692,807:7696,813:7698,817:7694}],69:[null,null,{768:200,769:201,770:202,771:7868,772:274,774:276,775:278,776:203,777:7866,780:282,783:516,785:518,803:7864,807:552,808:280,813:7704,816:7706}],70:[null,null,{775:7710}],71:[null,null,{769:500,770:284,772:7712,774:286,775:288,780:486,807:290}],72:[null,null,{770:292,775:7714,776:7718,780:542,803:7716,807:7720,814:7722}],73:[null,null,{768:204,769:205,770:206,771:296,772:298,774:300,775:304,776:207,777:7880,780:463,783:520,785:522,803:7882,808:302,816:7724}],74:[null,null,{770:308}],75:[null,null,{769:7728,780:488,803:7730,807:310,817:7732}],76:[null,null,{769:313,780:317,803:7734,807:315,813:7740,817:7738}],77:[null,null,{769:7742,775:7744,803:7746}],78:[null,null,{768:504,769:323,771:209,775:7748,780:327,803:7750,807:325,813:7754,817:7752}],79:[null,null,{768:210,769:211,770:212,771:213,772:332,774:334,775:558,776:214,777:7886,779:336,780:465,783:524,785:526,795:416,803:7884,808:490}],80:[null,null,{769:7764,775:7766}],82:[null,null,{769:340,775:7768,780:344,783:528,785:530,803:7770,807:342,817:7774}],83:[null,null,{769:346,770:348,775:7776,780:352,803:7778,806:536,807:350}],84:[null,null,{775:7786,780:356,803:7788,806:538,807:354,813:7792,817:7790}],85:[null,null,{768:217,769:218,770:219,771:360,772:362,774:364,776:220,777:7910,778:366,779:368,780:467,783:532,785:534,795:431,803:7908,804:7794,808:370,813:7798,816:7796}],86:[null,null,{771:7804,803:7806}],87:[null,null,{768:7808,769:7810,770:372,775:7814,776:7812,803:7816}],88:[null,null,{775:7818,776:7820}],89:[null,null,{768:7922,769:221,770:374,771:7928,772:562,775:7822,776:376,777:7926,803:7924}],90:[null,null,{769:377,770:7824,775:379,780:381,803:7826,817:7828}],97:[null,null,{768:224,769:225,770:226,771:227,772:257,774:259,775:551,776:228,777:7843,778:229,780:462,783:513,785:515,803:7841,805:7681,808:261}],98:[null,null,{775:7683,803:7685,817:7687}],99:[null,null,{769:263,770:265,775:267,780:269,807:231}],100:[null,null,{775:7691,780:271,803:7693,807:7697,813:7699,817:7695}],101:[null,null,{768:232,769:233,770:234,771:7869,772:275,774:277,775:279,776:235,777:7867,780:283,783:517,785:519,803:7865,807:553,808:281,813:7705,816:7707}],102:[null,null,{775:7711}],103:[null,null,{769:501,770:285,772:7713,774:287,775:289,780:487,807:291}],104:[null,null,{770:293,775:7715,776:7719,780:543,803:7717,807:7721,814:7723,817:7830}],105:[null,null,{768:236,769:237,770:238,771:297,772:299,774:301,776:239,777:7881,780:464,783:521,785:523,803:7883,808:303,816:7725}],106:[null,null,{770:309,780:496}],107:[null,null,{769:7729,780:489,803:7731,807:311,817:7733}],108:[null,null,{769:314,780:318,803:7735,807:316,813:7741,817:7739}],109:[null,null,{769:7743,775:7745,803:7747}],110:[null,null,{768:505,769:324,771:241,775:7749,780:328,803:7751,807:326,813:7755,817:7753}],111:[null,null,{768:242,769:243,770:244,771:245,772:333,774:335,775:559,776:246,777:7887,779:337,780:466,783:525,785:527,795:417,803:7885,808:491}],112:[null,null,{769:7765,775:7767}],114:[null,null,{769:341,775:7769,780:345,783:529,785:531,803:7771,807:343,817:7775}],115:[null,null,{769:347,770:349,775:7777,780:353,803:7779,806:537,807:351}],116:[null,null,{775:7787,776:7831,780:357,803:7789,806:539,807:355,813:7793,817:7791}],117:[null,null,{768:249,769:250,770:251,771:361,772:363,774:365,776:252,777:7911,778:367,779:369,780:468,783:533,785:535,795:432,803:7909,804:7795,808:371,813:7799,816:7797}],118:[null,null,{771:7805,803:7807}],119:[null,null,{768:7809,769:7811,770:373,775:7815,776:7813,778:7832,803:7817}],120:[null,null,{775:7819,776:7821}],121:[null,null,{768:7923,769:253,770:375,771:7929,772:563,775:7823,776:255,777:7927,778:7833,803:7925}],122:[null,null,{769:378,770:7825,775:380,780:382,803:7827,817:7829}],160:[[32],256],168:[[32,776],256,{768:8173,769:901,834:8129}],170:[[97],256],175:[[32,772],256],178:[[50],256],179:[[51],256],180:[[32,769],256],181:[[956],256],184:[[32,807],256],185:[[49],256],186:[[111],256],188:[[49,8260,52],256],189:[[49,8260,50],256],190:[[51,8260,52],256],192:[[65,768]],193:[[65,769]],194:[[65,770],null,{768:7846,769:7844,771:7850,777:7848}],195:[[65,771]],196:[[65,776],null,{772:478}],197:[[65,778],null,{769:506}],198:[null,null,{769:508,772:482}],199:[[67,807],null,{769:7688}],200:[[69,768]],201:[[69,769]],202:[[69,770],null,{768:7872,769:7870,771:7876,777:7874}],203:[[69,776]],204:[[73,768]],205:[[73,769]],206:[[73,770]],207:[[73,776],null,{769:7726}],209:[[78,771]],210:[[79,768]],211:[[79,769]],212:[[79,770],null,{768:7890,769:7888,771:7894,777:7892}],213:[[79,771],null,{769:7756,772:556,776:7758}],214:[[79,776],null,{772:554}],216:[null,null,{769:510}],217:[[85,768]],218:[[85,769]],219:[[85,770]],220:[[85,776],null,{768:475,769:471,772:469,780:473}],221:[[89,769]],224:[[97,768]],225:[[97,769]],226:[[97,770],null,{768:7847,769:7845,771:7851,777:7849}],227:[[97,771]],228:[[97,776],null,{772:479}],229:[[97,778],null,{769:507}],230:[null,null,{769:509,772:483}],231:[[99,807],null,{769:7689}],232:[[101,768]],233:[[101,769]],234:[[101,770],null,{768:7873,769:7871,771:7877,777:7875}],235:[[101,776]],236:[[105,768]],237:[[105,769]],238:[[105,770]],239:[[105,776],null,{769:7727}],241:[[110,771]],242:[[111,768]],243:[[111,769]],244:[[111,770],null,{768:7891,769:7889,771:7895,777:7893}],245:[[111,771],null,{769:7757,772:557,776:7759}],246:[[111,776],null,{772:555}],248:[null,null,{769:511}],249:[[117,768]],250:[[117,769]],251:[[117,770]],252:[[117,776],null,{768:476,769:472,772:470,780:474}],253:[[121,769]],255:[[121,776]]},256:{256:[[65,772]],257:[[97,772]],258:[[65,774],null,{768:7856,769:7854,771:7860,777:7858}],259:[[97,774],null,{768:7857,769:7855,771:7861,777:7859}],260:[[65,808]],261:[[97,808]],262:[[67,769]],263:[[99,769]],264:[[67,770]],265:[[99,770]],266:[[67,775]],267:[[99,775]],268:[[67,780]],269:[[99,780]],270:[[68,780]],271:[[100,780]],274:[[69,772],null,{768:7700,769:7702}],275:[[101,772],null,{768:7701,769:7703}],276:[[69,774]],277:[[101,774]],278:[[69,775]],279:[[101,775]],280:[[69,808]],281:[[101,808]],282:[[69,780]],283:[[101,780]],284:[[71,770]],285:[[103,770]],286:[[71,774]],287:[[103,774]],288:[[71,775]],289:[[103,775]],290:[[71,807]],291:[[103,807]],292:[[72,770]],293:[[104,770]],296:[[73,771]],297:[[105,771]],298:[[73,772]],299:[[105,772]],300:[[73,774]],301:[[105,774]],302:[[73,808]],303:[[105,808]],304:[[73,775]],306:[[73,74],256],307:[[105,106],256],308:[[74,770]],309:[[106,770]],310:[[75,807]],311:[[107,807]],313:[[76,769]],314:[[108,769]],315:[[76,807]],316:[[108,807]],317:[[76,780]],318:[[108,780]],319:[[76,183],256],320:[[108,183],256],323:[[78,769]],324:[[110,769]],325:[[78,807]],326:[[110,807]],327:[[78,780]],328:[[110,780]],329:[[700,110],256],332:[[79,772],null,{768:7760,769:7762}],333:[[111,772],null,{768:7761,769:7763}],334:[[79,774]],335:[[111,774]],336:[[79,779]],337:[[111,779]],340:[[82,769]],341:[[114,769]],342:[[82,807]],343:[[114,807]],344:[[82,780]],345:[[114,780]],346:[[83,769],null,{775:7780}],347:[[115,769],null,{775:7781}],348:[[83,770]],349:[[115,770]],350:[[83,807]],351:[[115,807]],352:[[83,780],null,{775:7782}],353:[[115,780],null,{775:7783}],354:[[84,807]],355:[[116,807]],356:[[84,780]],357:[[116,780]],360:[[85,771],null,{769:7800}],361:[[117,771],null,{769:7801}],362:[[85,772],null,{776:7802}],363:[[117,772],null,{776:7803}],364:[[85,774]],365:[[117,774]],366:[[85,778]],367:[[117,778]],368:[[85,779]],369:[[117,779]],370:[[85,808]],371:[[117,808]],372:[[87,770]],373:[[119,770]],374:[[89,770]],375:[[121,770]],376:[[89,776]],377:[[90,769]],378:[[122,769]],379:[[90,775]],380:[[122,775]],381:[[90,780]],382:[[122,780]],383:[[115],256,{775:7835}],416:[[79,795],null,{768:7900,769:7898,771:7904,777:7902,803:7906}],417:[[111,795],null,{768:7901,769:7899,771:7905,777:7903,803:7907}],431:[[85,795],null,{768:7914,769:7912,771:7918,777:7916,803:7920}],432:[[117,795],null,{768:7915,769:7913,771:7919,777:7917,803:7921}],439:[null,null,{780:494}],452:[[68,381],256],453:[[68,382],256],454:[[100,382],256],455:[[76,74],256],456:[[76,106],256],457:[[108,106],256],458:[[78,74],256],459:[[78,106],256],460:[[110,106],256],461:[[65,780]],462:[[97,780]],463:[[73,780]],464:[[105,780]],465:[[79,780]],466:[[111,780]],467:[[85,780]],468:[[117,780]],469:[[220,772]],470:[[252,772]],471:[[220,769]],472:[[252,769]],473:[[220,780]],474:[[252,780]],475:[[220,768]],476:[[252,768]],478:[[196,772]],479:[[228,772]],480:[[550,772]],481:[[551,772]],482:[[198,772]],483:[[230,772]],486:[[71,780]],487:[[103,780]],488:[[75,780]],489:[[107,780]],490:[[79,808],null,{772:492}],491:[[111,808],null,{772:493}],492:[[490,772]],493:[[491,772]],494:[[439,780]],495:[[658,780]],496:[[106,780]],497:[[68,90],256],498:[[68,122],256],499:[[100,122],256],500:[[71,769]],501:[[103,769]],504:[[78,768]],505:[[110,768]],506:[[197,769]],507:[[229,769]],508:[[198,769]],509:[[230,769]],510:[[216,769]],511:[[248,769]],66045:[null,220]},512:{512:[[65,783]],513:[[97,783]],514:[[65,785]],515:[[97,785]],516:[[69,783]],517:[[101,783]],518:[[69,785]],519:[[101,785]],520:[[73,783]],521:[[105,783]],522:[[73,785]],523:[[105,785]],524:[[79,783]],525:[[111,783]],526:[[79,785]],527:[[111,785]],528:[[82,783]],529:[[114,783]],530:[[82,785]],531:[[114,785]],532:[[85,783]],533:[[117,783]],534:[[85,785]],535:[[117,785]],536:[[83,806]],537:[[115,806]],538:[[84,806]],539:[[116,806]],542:[[72,780]],543:[[104,780]],550:[[65,775],null,{772:480}],551:[[97,775],null,{772:481}],552:[[69,807],null,{774:7708}],553:[[101,807],null,{774:7709}],554:[[214,772]],555:[[246,772]],556:[[213,772]],557:[[245,772]],558:[[79,775],null,{772:560}],559:[[111,775],null,{772:561}],560:[[558,772]],561:[[559,772]],562:[[89,772]],563:[[121,772]],658:[null,null,{780:495}],688:[[104],256],689:[[614],256],690:[[106],256],691:[[114],256],692:[[633],256],693:[[635],256],694:[[641],256],695:[[119],256],696:[[121],256],728:[[32,774],256],729:[[32,775],256],730:[[32,778],256],731:[[32,808],256],732:[[32,771],256],733:[[32,779],256],736:[[611],256],737:[[108],256],738:[[115],256],739:[[120],256],740:[[661],256],66272:[null,220]},768:{768:[null,230],769:[null,230],770:[null,230],771:[null,230],772:[null,230],773:[null,230],774:[null,230],775:[null,230],776:[null,230,{769:836}],777:[null,230],778:[null,230],779:[null,230],780:[null,230],781:[null,230],782:[null,230],783:[null,230],784:[null,230],785:[null,230],786:[null,230],787:[null,230],788:[null,230],789:[null,232],790:[null,220],791:[null,220],792:[null,220],793:[null,220],794:[null,232],795:[null,216],796:[null,220],797:[null,220],798:[null,220],799:[null,220],800:[null,220],801:[null,202],802:[null,202],803:[null,220],804:[null,220],805:[null,220],806:[null,220],807:[null,202],808:[null,202],809:[null,220],810:[null,220],811:[null,220],812:[null,220],813:[null,220],814:[null,220],815:[null,220],816:[null,220],817:[null,220],818:[null,220],819:[null,220],820:[null,1],821:[null,1],822:[null,1],823:[null,1],824:[null,1],825:[null,220],826:[null,220],827:[null,220],828:[null,220],829:[null,230],830:[null,230],831:[null,230],832:[[768],230],833:[[769],230],834:[null,230],835:[[787],230],836:[[776,769],230],837:[null,240],838:[null,230],839:[null,220],840:[null,220],841:[null,220],842:[null,230],843:[null,230],844:[null,230],845:[null,220],846:[null,220],848:[null,230],849:[null,230],850:[null,230],851:[null,220],852:[null,220],853:[null,220],854:[null,220],855:[null,230],856:[null,232],857:[null,220],858:[null,220],859:[null,230],860:[null,233],861:[null,234],862:[null,234],863:[null,233],864:[null,234],865:[null,234],866:[null,233],867:[null,230],868:[null,230],869:[null,230],870:[null,230],871:[null,230],872:[null,230],873:[null,230],874:[null,230],875:[null,230],876:[null,230],877:[null,230],878:[null,230],879:[null,230],884:[[697]],890:[[32,837],256],894:[[59]],900:[[32,769],256],901:[[168,769]],902:[[913,769]],903:[[183]],904:[[917,769]],905:[[919,769]],906:[[921,769]],908:[[927,769]],910:[[933,769]],911:[[937,769]],912:[[970,769]],913:[null,null,{768:8122,769:902,772:8121,774:8120,787:7944,788:7945,837:8124}],917:[null,null,{768:8136,769:904,787:7960,788:7961}],919:[null,null,{768:8138,769:905,787:7976,788:7977,837:8140}],921:[null,null,{768:8154,769:906,772:8153,774:8152,776:938,787:7992,788:7993}],927:[null,null,{768:8184,769:908,787:8008,788:8009}],929:[null,null,{788:8172}],933:[null,null,{768:8170,769:910,772:8169,774:8168,776:939,788:8025}],937:[null,null,{768:8186,769:911,787:8040,788:8041,837:8188}],938:[[921,776]],939:[[933,776]],940:[[945,769],null,{837:8116}],941:[[949,769]],942:[[951,769],null,{837:8132}],943:[[953,769]],944:[[971,769]],945:[null,null,{768:8048,769:940,772:8113,774:8112,787:7936,788:7937,834:8118,837:8115}],949:[null,null,{768:8050,769:941,787:7952,788:7953}],951:[null,null,{768:8052,769:942,787:7968,788:7969,834:8134,837:8131}],953:[null,null,{768:8054,769:943,772:8145,774:8144,776:970,787:7984,788:7985,834:8150}],959:[null,null,{768:8056,769:972,787:8e3,788:8001}],961:[null,null,{787:8164,788:8165}],965:[null,null,{768:8058,769:973,772:8161,774:8160,776:971,787:8016,788:8017,834:8166}],969:[null,null,{768:8060,769:974,787:8032,788:8033,834:8182,837:8179}],970:[[953,776],null,{768:8146,769:912,834:8151}],971:[[965,776],null,{768:8162,769:944,834:8167}],972:[[959,769]],973:[[965,769]],974:[[969,769],null,{837:8180}],976:[[946],256],977:[[952],256],978:[[933],256,{769:979,776:980}],979:[[978,769]],980:[[978,776]],981:[[966],256],982:[[960],256],1008:[[954],256],1009:[[961],256],1010:[[962],256],1012:[[920],256],1013:[[949],256],1017:[[931],256],66422:[null,230],66423:[null,230],66424:[null,230],66425:[null,230],66426:[null,230]},1024:{1024:[[1045,768]],1025:[[1045,776]],1027:[[1043,769]],1030:[null,null,{776:1031}],1031:[[1030,776]],1036:[[1050,769]],1037:[[1048,768]],1038:[[1059,774]],1040:[null,null,{774:1232,776:1234}],1043:[null,null,{769:1027}],1045:[null,null,{768:1024,774:1238,776:1025}],1046:[null,null,{774:1217,776:1244}],1047:[null,null,{776:1246}],1048:[null,null,{768:1037,772:1250,774:1049,776:1252}],1049:[[1048,774]],1050:[null,null,{769:1036}],1054:[null,null,{776:1254}],1059:[null,null,{772:1262,774:1038,776:1264,779:1266}],1063:[null,null,{776:1268}],1067:[null,null,{776:1272}],1069:[null,null,{776:1260}],1072:[null,null,{774:1233,776:1235}],1075:[null,null,{769:1107}],1077:[null,null,{768:1104,774:1239,776:1105}],1078:[null,null,{774:1218,776:1245}],1079:[null,null,{776:1247}],1080:[null,null,{768:1117,772:1251,774:1081,776:1253}],1081:[[1080,774]],1082:[null,null,{769:1116}],1086:[null,null,{776:1255}],1091:[null,null,{772:1263,774:1118,776:1265,779:1267}],1095:[null,null,{776:1269}],1099:[null,null,{776:1273}],1101:[null,null,{776:1261}],1104:[[1077,768]],1105:[[1077,776]],1107:[[1075,769]],1110:[null,null,{776:1111}],1111:[[1110,776]],1116:[[1082,769]],1117:[[1080,768]],1118:[[1091,774]],1140:[null,null,{783:1142}],1141:[null,null,{783:1143}],1142:[[1140,783]],1143:[[1141,783]],1155:[null,230],1156:[null,230],1157:[null,230],1158:[null,230],1159:[null,230],1217:[[1046,774]],1218:[[1078,774]],1232:[[1040,774]],1233:[[1072,774]],1234:[[1040,776]],1235:[[1072,776]],1238:[[1045,774]],1239:[[1077,774]],1240:[null,null,{776:1242}],1241:[null,null,{776:1243}],1242:[[1240,776]],1243:[[1241,776]],1244:[[1046,776]],1245:[[1078,776]],1246:[[1047,776]],1247:[[1079,776]],1250:[[1048,772]],1251:[[1080,772]],1252:[[1048,776]],1253:[[1080,776]],1254:[[1054,776]],1255:[[1086,776]],1256:[null,null,{776:1258}],1257:[null,null,{776:1259}],1258:[[1256,776]],1259:[[1257,776]],1260:[[1069,776]],1261:[[1101,776]],1262:[[1059,772]],1263:[[1091,772]],1264:[[1059,776]],1265:[[1091,776]],1266:[[1059,779]],1267:[[1091,779]],1268:[[1063,776]],1269:[[1095,776]],1272:[[1067,776]],1273:[[1099,776]]},1280:{1415:[[1381,1410],256],1425:[null,220],1426:[null,230],1427:[null,230],1428:[null,230],1429:[null,230],1430:[null,220],1431:[null,230],1432:[null,230],1433:[null,230],1434:[null,222],1435:[null,220],1436:[null,230],1437:[null,230],1438:[null,230],1439:[null,230],1440:[null,230],1441:[null,230],1442:[null,220],1443:[null,220],1444:[null,220],1445:[null,220],1446:[null,220],1447:[null,220],1448:[null,230],1449:[null,230],1450:[null,220],1451:[null,230],1452:[null,230],1453:[null,222],1454:[null,228],1455:[null,230],1456:[null,10],1457:[null,11],1458:[null,12],1459:[null,13],1460:[null,14],1461:[null,15],1462:[null,16],1463:[null,17],1464:[null,18],1465:[null,19],1466:[null,19],1467:[null,20],1468:[null,21],1469:[null,22],1471:[null,23],1473:[null,24],1474:[null,25],1476:[null,230],1477:[null,220],1479:[null,18]},1536:{1552:[null,230],1553:[null,230],1554:[null,230],1555:[null,230],1556:[null,230],1557:[null,230],1558:[null,230],1559:[null,230],1560:[null,30],1561:[null,31],1562:[null,32],1570:[[1575,1619]],1571:[[1575,1620]],1572:[[1608,1620]],1573:[[1575,1621]],1574:[[1610,1620]],1575:[null,null,{1619:1570,1620:1571,1621:1573}],1608:[null,null,{1620:1572}],1610:[null,null,{1620:1574}],1611:[null,27],1612:[null,28],1613:[null,29],1614:[null,30],1615:[null,31],1616:[null,32],1617:[null,33],1618:[null,34],1619:[null,230],1620:[null,230],1621:[null,220],1622:[null,220],1623:[null,230],1624:[null,230],1625:[null,230],1626:[null,230],1627:[null,230],1628:[null,220],1629:[null,230],1630:[null,230],1631:[null,220],1648:[null,35],1653:[[1575,1652],256],1654:[[1608,1652],256],1655:[[1735,1652],256],1656:[[1610,1652],256],1728:[[1749,1620]],1729:[null,null,{1620:1730}],1730:[[1729,1620]],1746:[null,null,{1620:1747}],1747:[[1746,1620]],1749:[null,null,{1620:1728}],1750:[null,230],1751:[null,230],1752:[null,230],1753:[null,230],1754:[null,230],1755:[null,230],1756:[null,230],1759:[null,230],1760:[null,230],1761:[null,230],1762:[null,230],1763:[null,220],1764:[null,230],1767:[null,230],1768:[null,230],1770:[null,220],1771:[null,230],1772:[null,230],1773:[null,220]},1792:{1809:[null,36],1840:[null,230],1841:[null,220],1842:[null,230],1843:[null,230],1844:[null,220],1845:[null,230],1846:[null,230],1847:[null,220],1848:[null,220],1849:[null,220],1850:[null,230],1851:[null,220],1852:[null,220],1853:[null,230],1854:[null,220],1855:[null,230],1856:[null,230],1857:[null,230],1858:[null,220],1859:[null,230],1860:[null,220],1861:[null,230],1862:[null,220],1863:[null,230],1864:[null,220],1865:[null,230],1866:[null,230],2027:[null,230],2028:[null,230],2029:[null,230],2030:[null,230],2031:[null,230],2032:[null,230],2033:[null,230],2034:[null,220],2035:[null,230]},2048:{2070:[null,230],2071:[null,230],2072:[null,230],2073:[null,230],2075:[null,230],2076:[null,230],2077:[null,230],2078:[null,230],2079:[null,230],2080:[null,230],2081:[null,230],2082:[null,230],2083:[null,230],2085:[null,230],2086:[null,230],2087:[null,230],2089:[null,230],2090:[null,230],2091:[null,230],2092:[null,230],2093:[null,230],2137:[null,220],2138:[null,220],2139:[null,220],2276:[null,230],2277:[null,230],2278:[null,220],2279:[null,230],2280:[null,230],2281:[null,220],2282:[null,230],2283:[null,230],2284:[null,230],2285:[null,220],2286:[null,220],2287:[null,220],2288:[null,27],2289:[null,28],2290:[null,29],2291:[null,230],2292:[null,230],2293:[null,230],2294:[null,220],2295:[null,230],2296:[null,230],2297:[null,220],2298:[null,220],2299:[null,230],2300:[null,230],2301:[null,230],2302:[null,230],2303:[null,230]},2304:{2344:[null,null,{2364:2345}],2345:[[2344,2364]],2352:[null,null,{2364:2353}],2353:[[2352,2364]],2355:[null,null,{2364:2356}],2356:[[2355,2364]],2364:[null,7],2381:[null,9],2385:[null,230],2386:[null,220],2387:[null,230],2388:[null,230],2392:[[2325,2364],512],2393:[[2326,2364],512],2394:[[2327,2364],512],2395:[[2332,2364],512],2396:[[2337,2364],512],2397:[[2338,2364],512],2398:[[2347,2364],512],2399:[[2351,2364],512],2492:[null,7],2503:[null,null,{2494:2507,2519:2508}],2507:[[2503,2494]],2508:[[2503,2519]],2509:[null,9],2524:[[2465,2492],512],2525:[[2466,2492],512],2527:[[2479,2492],512]},2560:{2611:[[2610,2620],512],2614:[[2616,2620],512],2620:[null,7],2637:[null,9],2649:[[2582,2620],512],2650:[[2583,2620],512],2651:[[2588,2620],512],2654:[[2603,2620],512],2748:[null,7],2765:[null,9],68109:[null,220],68111:[null,230],68152:[null,230],68153:[null,1],68154:[null,220],68159:[null,9],68325:[null,230],68326:[null,220]},2816:{2876:[null,7],2887:[null,null,{2878:2891,2902:2888,2903:2892}],2888:[[2887,2902]],2891:[[2887,2878]],2892:[[2887,2903]],2893:[null,9],2908:[[2849,2876],512],2909:[[2850,2876],512],2962:[null,null,{3031:2964}],2964:[[2962,3031]],3014:[null,null,{3006:3018,3031:3020}],3015:[null,null,{3006:3019}],3018:[[3014,3006]],3019:[[3015,3006]],3020:[[3014,3031]],3021:[null,9]},3072:{3142:[null,null,{3158:3144}],3144:[[3142,3158]],3149:[null,9],3157:[null,84],3158:[null,91],3260:[null,7],3263:[null,null,{3285:3264}],3264:[[3263,3285]],3270:[null,null,{3266:3274,3285:3271,3286:3272}],3271:[[3270,3285]],3272:[[3270,3286]],3274:[[3270,3266],null,{3285:3275}],3275:[[3274,3285]],3277:[null,9]},3328:{3398:[null,null,{3390:3402,3415:3404}],3399:[null,null,{3390:3403}],3402:[[3398,3390]],3403:[[3399,3390]],3404:[[3398,3415]],3405:[null,9],3530:[null,9],3545:[null,null,{3530:3546,3535:3548,3551:3550}],3546:[[3545,3530]],3548:[[3545,3535],null,{3530:3549}],3549:[[3548,3530]],3550:[[3545,3551]]},3584:{3635:[[3661,3634],256],3640:[null,103],3641:[null,103],3642:[null,9],3656:[null,107],3657:[null,107],3658:[null,107],3659:[null,107],3763:[[3789,3762],256],3768:[null,118],3769:[null,118],3784:[null,122],3785:[null,122],3786:[null,122],3787:[null,122],3804:[[3755,3737],256],3805:[[3755,3745],256]},3840:{3852:[[3851],256],3864:[null,220],3865:[null,220],3893:[null,220],3895:[null,220],3897:[null,216],3907:[[3906,4023],512],3917:[[3916,4023],512],3922:[[3921,4023],512],3927:[[3926,4023],512],3932:[[3931,4023],512],3945:[[3904,4021],512],3953:[null,129],3954:[null,130],3955:[[3953,3954],512],3956:[null,132],3957:[[3953,3956],512],3958:[[4018,3968],512],3959:[[4018,3969],256],3960:[[4019,3968],512],3961:[[4019,3969],256],3962:[null,130],3963:[null,130],3964:[null,130],3965:[null,130],3968:[null,130],3969:[[3953,3968],512],3970:[null,230],3971:[null,230],3972:[null,9],3974:[null,230],3975:[null,230],3987:[[3986,4023],512],3997:[[3996,4023],512],4002:[[4001,4023],512],4007:[[4006,4023],512],4012:[[4011,4023],512],4025:[[3984,4021],512],4038:[null,220]},4096:{4133:[null,null,{4142:4134}],4134:[[4133,4142]],4151:[null,7],4153:[null,9],4154:[null,9],4237:[null,220],4348:[[4316],256],69702:[null,9],69759:[null,9],69785:[null,null,{69818:69786}],69786:[[69785,69818]],69787:[null,null,{69818:69788}],69788:[[69787,69818]],69797:[null,null,{69818:69803}],69803:[[69797,69818]],69817:[null,9],69818:[null,7]},4352:{69888:[null,230],69889:[null,230],69890:[null,230],69934:[[69937,69927]],69935:[[69938,69927]],69937:[null,null,{69927:69934}],69938:[null,null,{69927:69935}],69939:[null,9],69940:[null,9],70003:[null,7],70080:[null,9]},4608:{70197:[null,9],70198:[null,7],70377:[null,7],70378:[null,9]},4864:{4957:[null,230],4958:[null,230],4959:[null,230],70460:[null,7],70471:[null,null,{70462:70475,70487:70476}],70475:[[70471,70462]],70476:[[70471,70487]],70477:[null,9],70502:[null,230],70503:[null,230],70504:[null,230],70505:[null,230],70506:[null,230],70507:[null,230],70508:[null,230],70512:[null,230],70513:[null,230],70514:[null,230],70515:[null,230],70516:[null,230]},5120:{70841:[null,null,{70832:70844,70842:70843,70845:70846}],70843:[[70841,70842]],70844:[[70841,70832]],70846:[[70841,70845]],70850:[null,9],70851:[null,7]},5376:{71096:[null,null,{71087:71098}],71097:[null,null,{71087:71099}],71098:[[71096,71087]],71099:[[71097,71087]],71103:[null,9],71104:[null,7]},5632:{71231:[null,9],71350:[null,9],71351:[null,7]},5888:{5908:[null,9],5940:[null,9],6098:[null,9],6109:[null,230]},6144:{6313:[null,228]},6400:{6457:[null,222],6458:[null,230],6459:[null,220]},6656:{6679:[null,230],6680:[null,220],6752:[null,9],6773:[null,230],6774:[null,230],6775:[null,230],6776:[null,230],6777:[null,230],6778:[null,230],6779:[null,230],6780:[null,230],6783:[null,220],6832:[null,230],6833:[null,230],6834:[null,230],6835:[null,230],6836:[null,230],6837:[null,220],6838:[null,220],6839:[null,220],6840:[null,220],6841:[null,220],6842:[null,220],6843:[null,230],6844:[null,230],6845:[null,220]},6912:{6917:[null,null,{6965:6918}],6918:[[6917,6965]],6919:[null,null,{6965:6920}],6920:[[6919,6965]],6921:[null,null,{6965:6922}],6922:[[6921,6965]],6923:[null,null,{6965:6924}],6924:[[6923,6965]],6925:[null,null,{6965:6926}],6926:[[6925,6965]],6929:[null,null,{6965:6930}],6930:[[6929,6965]],6964:[null,7],6970:[null,null,{6965:6971}],6971:[[6970,6965]],6972:[null,null,{6965:6973}],6973:[[6972,6965]],6974:[null,null,{6965:6976}],6975:[null,null,{6965:6977}],6976:[[6974,6965]],6977:[[6975,6965]],6978:[null,null,{6965:6979}],6979:[[6978,6965]],6980:[null,9],7019:[null,230],7020:[null,220],7021:[null,230],7022:[null,230],7023:[null,230],7024:[null,230],7025:[null,230],7026:[null,230],7027:[null,230],7082:[null,9],7083:[null,9],7142:[null,7],7154:[null,9],7155:[null,9]},7168:{7223:[null,7],7376:[null,230],7377:[null,230],7378:[null,230],7380:[null,1],7381:[null,220],7382:[null,220],7383:[null,220],7384:[null,220],7385:[null,220],7386:[null,230],7387:[null,230],7388:[null,220],7389:[null,220],7390:[null,220],7391:[null,220],7392:[null,230],7394:[null,1],7395:[null,1],7396:[null,1],7397:[null,1],7398:[null,1],7399:[null,1],7400:[null,1],7405:[null,220],7412:[null,230],7416:[null,230],7417:[null,230]},7424:{7468:[[65],256],7469:[[198],256],7470:[[66],256],7472:[[68],256],7473:[[69],256],7474:[[398],256],7475:[[71],256],7476:[[72],256],7477:[[73],256],7478:[[74],256],7479:[[75],256],7480:[[76],256],7481:[[77],256],7482:[[78],256],7484:[[79],256],7485:[[546],256],7486:[[80],256],7487:[[82],256],7488:[[84],256],7489:[[85],256],7490:[[87],256],7491:[[97],256],7492:[[592],256],7493:[[593],256],7494:[[7426],256],7495:[[98],256],7496:[[100],256],7497:[[101],256],7498:[[601],256],7499:[[603],256],7500:[[604],256],7501:[[103],256],7503:[[107],256],7504:[[109],256],7505:[[331],256],7506:[[111],256],7507:[[596],256],7508:[[7446],256],7509:[[7447],256],7510:[[112],256],7511:[[116],256],7512:[[117],256],7513:[[7453],256],7514:[[623],256],7515:[[118],256],7516:[[7461],256],7517:[[946],256],7518:[[947],256],7519:[[948],256],7520:[[966],256],7521:[[967],256],7522:[[105],256],7523:[[114],256],7524:[[117],256],7525:[[118],256],7526:[[946],256],7527:[[947],256],7528:[[961],256],7529:[[966],256],7530:[[967],256],7544:[[1085],256],7579:[[594],256],7580:[[99],256],7581:[[597],256],7582:[[240],256],7583:[[604],256],7584:[[102],256],7585:[[607],256],7586:[[609],256],7587:[[613],256],7588:[[616],256],7589:[[617],256],7590:[[618],256],7591:[[7547],256],7592:[[669],256],7593:[[621],256],7594:[[7557],256],7595:[[671],256],7596:[[625],256],7597:[[624],256],7598:[[626],256],7599:[[627],256],7600:[[628],256],7601:[[629],256],7602:[[632],256],7603:[[642],256],7604:[[643],256],7605:[[427],256],7606:[[649],256],7607:[[650],256],7608:[[7452],256],7609:[[651],256],7610:[[652],256],7611:[[122],256],7612:[[656],256],7613:[[657],256],7614:[[658],256],7615:[[952],256],7616:[null,230],7617:[null,230],7618:[null,220],7619:[null,230],7620:[null,230],7621:[null,230],7622:[null,230],7623:[null,230],7624:[null,230],7625:[null,230],7626:[null,220],7627:[null,230],7628:[null,230],7629:[null,234],7630:[null,214],7631:[null,220],7632:[null,202],7633:[null,230],7634:[null,230],7635:[null,230],7636:[null,230],7637:[null,230],7638:[null,230],7639:[null,230],7640:[null,230],7641:[null,230],7642:[null,230],7643:[null,230],7644:[null,230],7645:[null,230],7646:[null,230],7647:[null,230],7648:[null,230],7649:[null,230],7650:[null,230],7651:[null,230],7652:[null,230],7653:[null,230],7654:[null,230],7655:[null,230],7656:[null,230],7657:[null,230],7658:[null,230],7659:[null,230],7660:[null,230],7661:[null,230],7662:[null,230],7663:[null,230],7664:[null,230],7665:[null,230],7666:[null,230],7667:[null,230],7668:[null,230],7669:[null,230],7676:[null,233],7677:[null,220],7678:[null,230],7679:[null,220]},7680:{7680:[[65,805]],7681:[[97,805]],7682:[[66,775]],7683:[[98,775]],7684:[[66,803]],7685:[[98,803]],7686:[[66,817]],7687:[[98,817]],7688:[[199,769]],7689:[[231,769]],7690:[[68,775]],7691:[[100,775]],7692:[[68,803]],7693:[[100,803]],7694:[[68,817]],7695:[[100,817]],7696:[[68,807]],7697:[[100,807]],7698:[[68,813]],7699:[[100,813]],7700:[[274,768]],7701:[[275,768]],7702:[[274,769]],7703:[[275,769]],7704:[[69,813]],7705:[[101,813]],7706:[[69,816]],7707:[[101,816]],7708:[[552,774]],7709:[[553,774]],7710:[[70,775]],7711:[[102,775]],7712:[[71,772]],7713:[[103,772]],7714:[[72,775]],7715:[[104,775]],7716:[[72,803]],7717:[[104,803]],7718:[[72,776]],7719:[[104,776]],7720:[[72,807]],7721:[[104,807]],7722:[[72,814]],7723:[[104,814]],7724:[[73,816]],7725:[[105,816]],7726:[[207,769]],7727:[[239,769]],7728:[[75,769]],7729:[[107,769]],7730:[[75,803]],7731:[[107,803]],7732:[[75,817]],7733:[[107,817]],7734:[[76,803],null,{772:7736}],7735:[[108,803],null,{772:7737}],7736:[[7734,772]],7737:[[7735,772]],7738:[[76,817]],7739:[[108,817]],7740:[[76,813]],7741:[[108,813]],7742:[[77,769]],7743:[[109,769]],7744:[[77,775]],7745:[[109,775]],7746:[[77,803]],7747:[[109,803]],7748:[[78,775]],7749:[[110,775]],7750:[[78,803]],7751:[[110,803]],7752:[[78,817]],7753:[[110,817]],7754:[[78,813]],7755:[[110,813]],7756:[[213,769]],7757:[[245,769]],7758:[[213,776]],7759:[[245,776]],7760:[[332,768]],7761:[[333,768]],7762:[[332,769]],7763:[[333,769]],7764:[[80,769]],7765:[[112,769]],7766:[[80,775]],7767:[[112,775]],7768:[[82,775]],7769:[[114,775]],7770:[[82,803],null,{772:7772}],7771:[[114,803],null,{772:7773}],7772:[[7770,772]],7773:[[7771,772]],7774:[[82,817]],7775:[[114,817]],7776:[[83,775]],7777:[[115,775]],7778:[[83,803],null,{775:7784}],7779:[[115,803],null,{775:7785}],7780:[[346,775]],7781:[[347,775]],7782:[[352,775]],7783:[[353,775]],7784:[[7778,775]],7785:[[7779,775]],7786:[[84,775]],7787:[[116,775]],7788:[[84,803]],7789:[[116,803]],7790:[[84,817]],7791:[[116,817]],7792:[[84,813]],7793:[[116,813]],7794:[[85,804]],7795:[[117,804]],7796:[[85,816]],7797:[[117,816]],7798:[[85,813]],7799:[[117,813]],7800:[[360,769]],7801:[[361,769]],7802:[[362,776]],7803:[[363,776]],7804:[[86,771]],7805:[[118,771]],7806:[[86,803]],7807:[[118,803]],7808:[[87,768]],7809:[[119,768]],7810:[[87,769]],7811:[[119,769]],7812:[[87,776]],7813:[[119,776]],7814:[[87,775]],7815:[[119,775]],7816:[[87,803]],7817:[[119,803]],7818:[[88,775]],7819:[[120,775]],7820:[[88,776]],7821:[[120,776]],7822:[[89,775]],7823:[[121,775]],7824:[[90,770]],7825:[[122,770]],7826:[[90,803]],7827:[[122,803]],7828:[[90,817]],7829:[[122,817]],7830:[[104,817]],7831:[[116,776]],7832:[[119,778]],7833:[[121,778]],7834:[[97,702],256],7835:[[383,775]],7840:[[65,803],null,{770:7852,774:7862}],7841:[[97,803],null,{770:7853,774:7863}],7842:[[65,777]],7843:[[97,777]],7844:[[194,769]],7845:[[226,769]],7846:[[194,768]],7847:[[226,768]],7848:[[194,777]],7849:[[226,777]],7850:[[194,771]],7851:[[226,771]],7852:[[7840,770]],7853:[[7841,770]],7854:[[258,769]],7855:[[259,769]],7856:[[258,768]],7857:[[259,768]],7858:[[258,777]],7859:[[259,777]],7860:[[258,771]],7861:[[259,771]],7862:[[7840,774]],7863:[[7841,774]],7864:[[69,803],null,{770:7878}],7865:[[101,803],null,{770:7879}],7866:[[69,777]],7867:[[101,777]],7868:[[69,771]],7869:[[101,771]],7870:[[202,769]],7871:[[234,769]],7872:[[202,768]],7873:[[234,768]],7874:[[202,777]],7875:[[234,777]],7876:[[202,771]],7877:[[234,771]],7878:[[7864,770]],7879:[[7865,770]],7880:[[73,777]],7881:[[105,777]],7882:[[73,803]],7883:[[105,803]],7884:[[79,803],null,{770:7896}],7885:[[111,803],null,{770:7897}],7886:[[79,777]],7887:[[111,777]],7888:[[212,769]],7889:[[244,769]],7890:[[212,768]],7891:[[244,768]],7892:[[212,777]],7893:[[244,777]],7894:[[212,771]],7895:[[244,771]],7896:[[7884,770]],7897:[[7885,770]],7898:[[416,769]],7899:[[417,769]],7900:[[416,768]],7901:[[417,768]],7902:[[416,777]],7903:[[417,777]],7904:[[416,771]],7905:[[417,771]],7906:[[416,803]],7907:[[417,803]],7908:[[85,803]],7909:[[117,803]],7910:[[85,777]],7911:[[117,777]],7912:[[431,769]],7913:[[432,769]],7914:[[431,768]],7915:[[432,768]],7916:[[431,777]],7917:[[432,777]],7918:[[431,771]],7919:[[432,771]],7920:[[431,803]],7921:[[432,803]],7922:[[89,768]],7923:[[121,768]],7924:[[89,803]],7925:[[121,803]],7926:[[89,777]],7927:[[121,777]],7928:[[89,771]],7929:[[121,771]]},7936:{7936:[[945,787],null,{768:7938,769:7940,834:7942,837:8064}],7937:[[945,788],null,{768:7939,769:7941,834:7943,837:8065}],7938:[[7936,768],null,{837:8066}],7939:[[7937,768],null,{837:8067}],7940:[[7936,769],null,{837:8068}],7941:[[7937,769],null,{837:8069}],7942:[[7936,834],null,{837:8070}],7943:[[7937,834],null,{837:8071}],7944:[[913,787],null,{768:7946,769:7948,834:7950,837:8072}],7945:[[913,788],null,{768:7947,769:7949,834:7951,837:8073}],7946:[[7944,768],null,{837:8074}],7947:[[7945,768],null,{837:8075}],7948:[[7944,769],null,{837:8076}],7949:[[7945,769],null,{837:8077}],7950:[[7944,834],null,{837:8078}],7951:[[7945,834],null,{837:8079}],7952:[[949,787],null,{768:7954,769:7956}],7953:[[949,788],null,{768:7955,769:7957}],7954:[[7952,768]],7955:[[7953,768]],7956:[[7952,769]],7957:[[7953,769]],7960:[[917,787],null,{768:7962,769:7964}],7961:[[917,788],null,{768:7963,769:7965}],7962:[[7960,768]],7963:[[7961,768]],7964:[[7960,769]],7965:[[7961,769]],7968:[[951,787],null,{768:7970,769:7972,834:7974,837:8080}],7969:[[951,788],null,{768:7971,769:7973,834:7975,837:8081}],7970:[[7968,768],null,{837:8082}],7971:[[7969,768],null,{837:8083}],7972:[[7968,769],null,{837:8084}],7973:[[7969,769],null,{837:8085}],7974:[[7968,834],null,{837:8086}],7975:[[7969,834],null,{837:8087}],7976:[[919,787],null,{768:7978,769:7980,834:7982,837:8088}],7977:[[919,788],null,{768:7979,769:7981,834:7983,837:8089}],7978:[[7976,768],null,{837:8090}],7979:[[7977,768],null,{837:8091}],7980:[[7976,769],null,{837:8092}],7981:[[7977,769],null,{837:8093}],7982:[[7976,834],null,{837:8094}],7983:[[7977,834],null,{837:8095}],7984:[[953,787],null,{768:7986,769:7988,834:7990}],7985:[[953,788],null,{768:7987,769:7989,834:7991}],7986:[[7984,768]],7987:[[7985,768]],7988:[[7984,769]],7989:[[7985,769]],7990:[[7984,834]],7991:[[7985,834]],7992:[[921,787],null,{768:7994,769:7996,834:7998}],7993:[[921,788],null,{768:7995,769:7997,834:7999}],7994:[[7992,768]],7995:[[7993,768]],7996:[[7992,769]],7997:[[7993,769]],7998:[[7992,834]],7999:[[7993,834]],8000:[[959,787],null,{768:8002,769:8004}],8001:[[959,788],null,{768:8003,769:8005}],8002:[[8e3,768]],8003:[[8001,768]],8004:[[8e3,769]],8005:[[8001,769]],8008:[[927,787],null,{768:8010,769:8012}],8009:[[927,788],null,{768:8011,769:8013}],8010:[[8008,768]],8011:[[8009,768]],8012:[[8008,769]],8013:[[8009,769]],8016:[[965,787],null,{768:8018,769:8020,834:8022}],8017:[[965,788],null,{768:8019,769:8021,834:8023}],8018:[[8016,768]],8019:[[8017,768]],8020:[[8016,769]],8021:[[8017,769]],8022:[[8016,834]],8023:[[8017,834]],8025:[[933,788],null,{768:8027,769:8029,834:8031}],8027:[[8025,768]],8029:[[8025,769]],8031:[[8025,834]],8032:[[969,787],null,{768:8034,769:8036,834:8038,837:8096}],8033:[[969,788],null,{768:8035,769:8037,834:8039,837:8097}],8034:[[8032,768],null,{837:8098}],8035:[[8033,768],null,{837:8099}],8036:[[8032,769],null,{837:8100}],8037:[[8033,769],null,{837:8101}],8038:[[8032,834],null,{837:8102}],8039:[[8033,834],null,{837:8103}],8040:[[937,787],null,{768:8042,769:8044,834:8046,837:8104}],8041:[[937,788],null,{768:8043,769:8045,834:8047,837:8105}],8042:[[8040,768],null,{837:8106}],8043:[[8041,768],null,{837:8107}],8044:[[8040,769],null,{837:8108}],8045:[[8041,769],null,{837:8109}],8046:[[8040,834],null,{837:8110}],8047:[[8041,834],null,{837:8111}],8048:[[945,768],null,{837:8114}],8049:[[940]],8050:[[949,768]],8051:[[941]],8052:[[951,768],null,{837:8130}],8053:[[942]],8054:[[953,768]],8055:[[943]],8056:[[959,768]],8057:[[972]],8058:[[965,768]],8059:[[973]],8060:[[969,768],null,{837:8178}],8061:[[974]],8064:[[7936,837]],8065:[[7937,837]],8066:[[7938,837]],8067:[[7939,837]],8068:[[7940,837]],8069:[[7941,837]],8070:[[7942,837]],8071:[[7943,837]],8072:[[7944,837]],8073:[[7945,837]],8074:[[7946,837]],8075:[[7947,837]],8076:[[7948,837]],8077:[[7949,837]],8078:[[7950,837]],8079:[[7951,837]],8080:[[7968,837]],8081:[[7969,837]],8082:[[7970,837]],8083:[[7971,837]],8084:[[7972,837]],8085:[[7973,837]],8086:[[7974,837]],8087:[[7975,837]],8088:[[7976,837]],8089:[[7977,837]],8090:[[7978,837]],8091:[[7979,837]],8092:[[7980,837]],8093:[[7981,837]],8094:[[7982,837]],8095:[[7983,837]],8096:[[8032,837]],8097:[[8033,837]],8098:[[8034,837]],8099:[[8035,837]],8100:[[8036,837]],8101:[[8037,837]],8102:[[8038,837]],8103:[[8039,837]],8104:[[8040,837]],8105:[[8041,837]],8106:[[8042,837]],8107:[[8043,837]],8108:[[8044,837]],8109:[[8045,837]],8110:[[8046,837]],8111:[[8047,837]],8112:[[945,774]],8113:[[945,772]],8114:[[8048,837]],8115:[[945,837]],8116:[[940,837]],8118:[[945,834],null,{837:8119}],8119:[[8118,837]],8120:[[913,774]],8121:[[913,772]],8122:[[913,768]],8123:[[902]],8124:[[913,837]],8125:[[32,787],256],8126:[[953]],8127:[[32,787],256,{768:8141,769:8142,834:8143}],8128:[[32,834],256],8129:[[168,834]],8130:[[8052,837]],8131:[[951,837]],8132:[[942,837]],8134:[[951,834],null,{837:8135}],8135:[[8134,837]],8136:[[917,768]],8137:[[904]],8138:[[919,768]],8139:[[905]],8140:[[919,837]],8141:[[8127,768]],8142:[[8127,769]],8143:[[8127,834]],8144:[[953,774]],8145:[[953,772]],8146:[[970,768]],8147:[[912]],8150:[[953,834]],8151:[[970,834]],8152:[[921,774]],8153:[[921,772]],8154:[[921,768]],8155:[[906]],8157:[[8190,768]],8158:[[8190,769]],8159:[[8190,834]],8160:[[965,774]],8161:[[965,772]],8162:[[971,768]],8163:[[944]],8164:[[961,787]],8165:[[961,788]],8166:[[965,834]],8167:[[971,834]],8168:[[933,774]],8169:[[933,772]],8170:[[933,768]],8171:[[910]],8172:[[929,788]],8173:[[168,768]],8174:[[901]],8175:[[96]],8178:[[8060,837]],8179:[[969,837]],8180:[[974,837]],8182:[[969,834],null,{837:8183}],8183:[[8182,837]],8184:[[927,768]],8185:[[908]],8186:[[937,768]],8187:[[911]],8188:[[937,837]],8189:[[180]],8190:[[32,788],256,{768:8157,769:8158,834:8159}]},8192:{8192:[[8194]],8193:[[8195]],8194:[[32],256],8195:[[32],256],8196:[[32],256],8197:[[32],256],8198:[[32],256],8199:[[32],256],8200:[[32],256],8201:[[32],256],8202:[[32],256],8209:[[8208],256],8215:[[32,819],256],8228:[[46],256],8229:[[46,46],256],8230:[[46,46,46],256],8239:[[32],256],8243:[[8242,8242],256],8244:[[8242,8242,8242],256],8246:[[8245,8245],256],8247:[[8245,8245,8245],256],8252:[[33,33],256],8254:[[32,773],256],8263:[[63,63],256],8264:[[63,33],256],8265:[[33,63],256],8279:[[8242,8242,8242,8242],256],8287:[[32],256],8304:[[48],256],8305:[[105],256],8308:[[52],256],8309:[[53],256],8310:[[54],256],8311:[[55],256],8312:[[56],256],8313:[[57],256],8314:[[43],256],8315:[[8722],256],8316:[[61],256],8317:[[40],256],8318:[[41],256],8319:[[110],256],8320:[[48],256],8321:[[49],256],8322:[[50],256],8323:[[51],256],8324:[[52],256],8325:[[53],256],8326:[[54],256],8327:[[55],256],8328:[[56],256],8329:[[57],256],8330:[[43],256],8331:[[8722],256],8332:[[61],256],8333:[[40],256],8334:[[41],256],8336:[[97],256],8337:[[101],256],8338:[[111],256],8339:[[120],256],8340:[[601],256],8341:[[104],256],8342:[[107],256],8343:[[108],256],8344:[[109],256],8345:[[110],256],8346:[[112],256],8347:[[115],256],8348:[[116],256],8360:[[82,115],256],8400:[null,230],8401:[null,230],8402:[null,1],8403:[null,1],8404:[null,230],8405:[null,230],8406:[null,230],8407:[null,230],8408:[null,1],8409:[null,1],8410:[null,1],8411:[null,230],8412:[null,230],8417:[null,230],8421:[null,1],8422:[null,1],8423:[null,230],8424:[null,220],8425:[null,230],8426:[null,1],8427:[null,1],8428:[null,220],8429:[null,220],8430:[null,220],8431:[null,220],8432:[null,230]},8448:{8448:[[97,47,99],256],8449:[[97,47,115],256],8450:[[67],256],8451:[[176,67],256],8453:[[99,47,111],256],8454:[[99,47,117],256],8455:[[400],256],8457:[[176,70],256],8458:[[103],256],8459:[[72],256],8460:[[72],256],8461:[[72],256],8462:[[104],256],8463:[[295],256],8464:[[73],256],8465:[[73],256],8466:[[76],256],8467:[[108],256],8469:[[78],256],8470:[[78,111],256],8473:[[80],256],8474:[[81],256],8475:[[82],256],8476:[[82],256],8477:[[82],256],8480:[[83,77],256],8481:[[84,69,76],256],8482:[[84,77],256],8484:[[90],256],8486:[[937]],8488:[[90],256],8490:[[75]],8491:[[197]],8492:[[66],256],8493:[[67],256],8495:[[101],256],8496:[[69],256],8497:[[70],256],8499:[[77],256],8500:[[111],256],8501:[[1488],256],8502:[[1489],256],8503:[[1490],256],8504:[[1491],256],8505:[[105],256],8507:[[70,65,88],256],8508:[[960],256],8509:[[947],256],8510:[[915],256],8511:[[928],256],8512:[[8721],256],8517:[[68],256],8518:[[100],256],8519:[[101],256],8520:[[105],256],8521:[[106],256],8528:[[49,8260,55],256],8529:[[49,8260,57],256],8530:[[49,8260,49,48],256],8531:[[49,8260,51],256],8532:[[50,8260,51],256],8533:[[49,8260,53],256],8534:[[50,8260,53],256],8535:[[51,8260,53],256],8536:[[52,8260,53],256],8537:[[49,8260,54],256],8538:[[53,8260,54],256],8539:[[49,8260,56],256],8540:[[51,8260,56],256],8541:[[53,8260,56],256],8542:[[55,8260,56],256],8543:[[49,8260],256],8544:[[73],256],8545:[[73,73],256],8546:[[73,73,73],256],8547:[[73,86],256],8548:[[86],256],8549:[[86,73],256],8550:[[86,73,73],256],8551:[[86,73,73,73],256],8552:[[73,88],256],8553:[[88],256],8554:[[88,73],256],8555:[[88,73,73],256],8556:[[76],256],8557:[[67],256],8558:[[68],256],8559:[[77],256],8560:[[105],256],8561:[[105,105],256],8562:[[105,105,105],256],8563:[[105,118],256],8564:[[118],256],8565:[[118,105],256],8566:[[118,105,105],256],8567:[[118,105,105,105],256],8568:[[105,120],256],8569:[[120],256],8570:[[120,105],256],8571:[[120,105,105],256],8572:[[108],256],8573:[[99],256],8574:[[100],256],8575:[[109],256],8585:[[48,8260,51],256],8592:[null,null,{824:8602}],8594:[null,null,{824:8603}],8596:[null,null,{824:8622}],8602:[[8592,824]],8603:[[8594,824]],8622:[[8596,824]],8653:[[8656,824]],8654:[[8660,824]],8655:[[8658,824]],8656:[null,null,{824:8653}],8658:[null,null,{824:8655}],8660:[null,null,{824:8654}]},8704:{8707:[null,null,{824:8708}],8708:[[8707,824]],8712:[null,null,{824:8713}],8713:[[8712,824]],8715:[null,null,{824:8716}],8716:[[8715,824]],8739:[null,null,{824:8740}],8740:[[8739,824]],8741:[null,null,{824:8742}],8742:[[8741,824]],8748:[[8747,8747],256],8749:[[8747,8747,8747],256],8751:[[8750,8750],256],8752:[[8750,8750,8750],256],8764:[null,null,{824:8769}],8769:[[8764,824]],8771:[null,null,{824:8772}],8772:[[8771,824]],8773:[null,null,{824:8775}],8775:[[8773,824]],8776:[null,null,{824:8777}],8777:[[8776,824]],8781:[null,null,{824:8813}],8800:[[61,824]],8801:[null,null,{824:8802}],8802:[[8801,824]],8804:[null,null,{824:8816}],8805:[null,null,{824:8817}],8813:[[8781,824]],8814:[[60,824]],8815:[[62,824]],8816:[[8804,824]],8817:[[8805,824]],8818:[null,null,{824:8820}],8819:[null,null,{824:8821}],8820:[[8818,824]],8821:[[8819,824]],8822:[null,null,{824:8824}],8823:[null,null,{824:8825}],8824:[[8822,824]],8825:[[8823,824]],8826:[null,null,{824:8832}],8827:[null,null,{824:8833}],8828:[null,null,{824:8928}],8829:[null,null,{824:8929}],8832:[[8826,824]],8833:[[8827,824]],8834:[null,null,{824:8836}],8835:[null,null,{824:8837}],8836:[[8834,824]],8837:[[8835,824]],8838:[null,null,{824:8840}],8839:[null,null,{824:8841}],8840:[[8838,824]],8841:[[8839,824]],8849:[null,null,{824:8930}],8850:[null,null,{824:8931}],8866:[null,null,{824:8876}],8872:[null,null,{824:8877}],8873:[null,null,{824:8878}],8875:[null,null,{824:8879}],8876:[[8866,824]],8877:[[8872,824]],8878:[[8873,824]],8879:[[8875,824]],8882:[null,null,{824:8938}],8883:[null,null,{824:8939}],8884:[null,null,{824:8940}],8885:[null,null,{824:8941}],8928:[[8828,824]],8929:[[8829,824]],8930:[[8849,824]],8931:[[8850,824]],8938:[[8882,824]],8939:[[8883,824]],8940:[[8884,824]],8941:[[8885,824]]},8960:{9001:[[12296]],9002:[[12297]]},9216:{9312:[[49],256],9313:[[50],256],9314:[[51],256],9315:[[52],256],9316:[[53],256],9317:[[54],256],9318:[[55],256],9319:[[56],256],9320:[[57],256],9321:[[49,48],256],9322:[[49,49],256],9323:[[49,50],256],9324:[[49,51],256],9325:[[49,52],256],9326:[[49,53],256],9327:[[49,54],256],9328:[[49,55],256],9329:[[49,56],256],9330:[[49,57],256],9331:[[50,48],256],9332:[[40,49,41],256],9333:[[40,50,41],256],9334:[[40,51,41],256],9335:[[40,52,41],256],9336:[[40,53,41],256],9337:[[40,54,41],256],9338:[[40,55,41],256],9339:[[40,56,41],256],9340:[[40,57,41],256],9341:[[40,49,48,41],256],9342:[[40,49,49,41],256],9343:[[40,49,50,41],256],9344:[[40,49,51,41],256],9345:[[40,49,52,41],256],9346:[[40,49,53,41],256],9347:[[40,49,54,41],256],9348:[[40,49,55,41],256],9349:[[40,49,56,41],256],9350:[[40,49,57,41],256],9351:[[40,50,48,41],256],9352:[[49,46],256],9353:[[50,46],256],9354:[[51,46],256],9355:[[52,46],256],9356:[[53,46],256],9357:[[54,46],256],9358:[[55,46],256],9359:[[56,46],256],9360:[[57,46],256],9361:[[49,48,46],256],9362:[[49,49,46],256],9363:[[49,50,46],256],9364:[[49,51,46],256],9365:[[49,52,46],256],9366:[[49,53,46],256],9367:[[49,54,46],256],9368:[[49,55,46],256],9369:[[49,56,46],256],9370:[[49,57,46],256],9371:[[50,48,46],256],9372:[[40,97,41],256],9373:[[40,98,41],256],9374:[[40,99,41],256],9375:[[40,100,41],256],9376:[[40,101,41],256],9377:[[40,102,41],256],9378:[[40,103,41],256],9379:[[40,104,41],256],9380:[[40,105,41],256],9381:[[40,106,41],256],9382:[[40,107,41],256],9383:[[40,108,41],256],9384:[[40,109,41],256],9385:[[40,110,41],256],9386:[[40,111,41],256],9387:[[40,112,41],256],9388:[[40,113,41],256],9389:[[40,114,41],256],9390:[[40,115,41],256],9391:[[40,116,41],256],9392:[[40,117,41],256],9393:[[40,118,41],256],9394:[[40,119,41],256],9395:[[40,120,41],256],9396:[[40,121,41],256],9397:[[40,122,41],256],9398:[[65],256],9399:[[66],256],9400:[[67],256],9401:[[68],256],9402:[[69],256],9403:[[70],256],9404:[[71],256],9405:[[72],256],9406:[[73],256],9407:[[74],256],9408:[[75],256],9409:[[76],256],9410:[[77],256],9411:[[78],256],9412:[[79],256],9413:[[80],256],9414:[[81],256],9415:[[82],256],9416:[[83],256],9417:[[84],256],9418:[[85],256],9419:[[86],256],9420:[[87],256],9421:[[88],256],9422:[[89],256],9423:[[90],256],9424:[[97],256],9425:[[98],256],9426:[[99],256],9427:[[100],256],9428:[[101],256],9429:[[102],256],9430:[[103],256],9431:[[104],256],9432:[[105],256],9433:[[106],256],9434:[[107],256],9435:[[108],256],9436:[[109],256],9437:[[110],256],9438:[[111],256],9439:[[112],256],9440:[[113],256],9441:[[114],256],9442:[[115],256],9443:[[116],256],9444:[[117],256],9445:[[118],256],9446:[[119],256],9447:[[120],256],9448:[[121],256],9449:[[122],256],9450:[[48],256]},10752:{10764:[[8747,8747,8747,8747],256],10868:[[58,58,61],256],10869:[[61,61],256],10870:[[61,61,61],256],10972:[[10973,824],512]},11264:{11388:[[106],256],11389:[[86],256],11503:[null,230],11504:[null,230],11505:[null,230]},11520:{11631:[[11617],256],11647:[null,9],11744:[null,230],11745:[null,230],11746:[null,230],11747:[null,230],11748:[null,230],11749:[null,230],11750:[null,230],11751:[null,230],11752:[null,230],11753:[null,230],11754:[null,230],11755:[null,230],11756:[null,230],11757:[null,230],11758:[null,230],11759:[null,230],11760:[null,230],11761:[null,230],11762:[null,230],11763:[null,230],11764:[null,230],11765:[null,230],11766:[null,230],11767:[null,230],11768:[null,230],11769:[null,230],11770:[null,230],11771:[null,230],11772:[null,230],11773:[null,230],11774:[null,230],11775:[null,230]},11776:{11935:[[27597],256],12019:[[40863],256]},12032:{12032:[[19968],256],12033:[[20008],256],12034:[[20022],256],12035:[[20031],256],12036:[[20057],256],12037:[[20101],256],12038:[[20108],256],12039:[[20128],256],12040:[[20154],256],12041:[[20799],256],12042:[[20837],256],12043:[[20843],256],12044:[[20866],256],12045:[[20886],256],12046:[[20907],256],12047:[[20960],256],12048:[[20981],256],12049:[[20992],256],12050:[[21147],256],12051:[[21241],256],12052:[[21269],256],12053:[[21274],256],12054:[[21304],256],12055:[[21313],256],12056:[[21340],256],12057:[[21353],256],12058:[[21378],256],12059:[[21430],256],12060:[[21448],256],12061:[[21475],256],12062:[[22231],256],12063:[[22303],256],12064:[[22763],256],12065:[[22786],256],12066:[[22794],256],12067:[[22805],256],12068:[[22823],256],12069:[[22899],256],12070:[[23376],256],12071:[[23424],256],12072:[[23544],256],12073:[[23567],256],12074:[[23586],256],12075:[[23608],256],12076:[[23662],256],12077:[[23665],256],12078:[[24027],256],12079:[[24037],256],12080:[[24049],256],12081:[[24062],256],12082:[[24178],256],12083:[[24186],256],12084:[[24191],256],12085:[[24308],256],12086:[[24318],256],12087:[[24331],256],12088:[[24339],256],12089:[[24400],256],12090:[[24417],256],12091:[[24435],256],12092:[[24515],256],12093:[[25096],256],12094:[[25142],256],12095:[[25163],256],12096:[[25903],256],12097:[[25908],256],12098:[[25991],256],12099:[[26007],256],12100:[[26020],256],12101:[[26041],256],12102:[[26080],256],12103:[[26085],256],12104:[[26352],256],12105:[[26376],256],12106:[[26408],256],12107:[[27424],256],12108:[[27490],256],12109:[[27513],256],12110:[[27571],256],12111:[[27595],256],12112:[[27604],256],12113:[[27611],256],12114:[[27663],256],12115:[[27668],256],12116:[[27700],256],12117:[[28779],256],12118:[[29226],256],12119:[[29238],256],12120:[[29243],256],12121:[[29247],256],12122:[[29255],256],12123:[[29273],256],12124:[[29275],256],12125:[[29356],256],12126:[[29572],256],12127:[[29577],256],12128:[[29916],256],12129:[[29926],256],12130:[[29976],256],12131:[[29983],256],12132:[[29992],256],12133:[[3e4],256],12134:[[30091],256],12135:[[30098],256],12136:[[30326],256],12137:[[30333],256],12138:[[30382],256],12139:[[30399],256],12140:[[30446],256],12141:[[30683],256],12142:[[30690],256],12143:[[30707],256],12144:[[31034],256],12145:[[31160],256],12146:[[31166],256],12147:[[31348],256],12148:[[31435],256],12149:[[31481],256],12150:[[31859],256],12151:[[31992],256],12152:[[32566],256],12153:[[32593],256],12154:[[32650],256],12155:[[32701],256],12156:[[32769],256],12157:[[32780],256],12158:[[32786],256],12159:[[32819],256],12160:[[32895],256],12161:[[32905],256],12162:[[33251],256],12163:[[33258],256],12164:[[33267],256],12165:[[33276],256],12166:[[33292],256],12167:[[33307],256],12168:[[33311],256],12169:[[33390],256],12170:[[33394],256],12171:[[33400],256],12172:[[34381],256],12173:[[34411],256],12174:[[34880],256],12175:[[34892],256],12176:[[34915],256],12177:[[35198],256],12178:[[35211],256],12179:[[35282],256],12180:[[35328],256],12181:[[35895],256],12182:[[35910],256],12183:[[35925],256],12184:[[35960],256],12185:[[35997],256],12186:[[36196],256],12187:[[36208],256],12188:[[36275],256],12189:[[36523],256],12190:[[36554],256],12191:[[36763],256],12192:[[36784],256],12193:[[36789],256],12194:[[37009],256],12195:[[37193],256],12196:[[37318],256],12197:[[37324],256],12198:[[37329],256],12199:[[38263],256],12200:[[38272],256],12201:[[38428],256],12202:[[38582],256],12203:[[38585],256],12204:[[38632],256],12205:[[38737],256],12206:[[38750],256],12207:[[38754],256],12208:[[38761],256],12209:[[38859],256],12210:[[38893],256],12211:[[38899],256],12212:[[38913],256],12213:[[39080],256],12214:[[39131],256],12215:[[39135],256],12216:[[39318],256],12217:[[39321],256],12218:[[39340],256],12219:[[39592],256],12220:[[39640],256],12221:[[39647],256],12222:[[39717],256],12223:[[39727],256],12224:[[39730],256],12225:[[39740],256],12226:[[39770],256],12227:[[40165],256],12228:[[40565],256],12229:[[40575],256],12230:[[40613],256],12231:[[40635],256],12232:[[40643],256],12233:[[40653],256],12234:[[40657],256],12235:[[40697],256],12236:[[40701],256],12237:[[40718],256],12238:[[40723],256],12239:[[40736],256],12240:[[40763],256],12241:[[40778],256],12242:[[40786],256],12243:[[40845],256],12244:[[40860],256],12245:[[40864],256]},12288:{12288:[[32],256],12330:[null,218],12331:[null,228],12332:[null,232],12333:[null,222],12334:[null,224],12335:[null,224],12342:[[12306],256],12344:[[21313],256],12345:[[21316],256],12346:[[21317],256],12358:[null,null,{12441:12436}],12363:[null,null,{12441:12364}],12364:[[12363,12441]],12365:[null,null,{12441:12366}],12366:[[12365,12441]],12367:[null,null,{12441:12368}],12368:[[12367,12441]],12369:[null,null,{12441:12370}],12370:[[12369,12441]],12371:[null,null,{12441:12372}],12372:[[12371,12441]],12373:[null,null,{12441:12374}],12374:[[12373,12441]],12375:[null,null,{12441:12376}],12376:[[12375,12441]],12377:[null,null,{12441:12378}],12378:[[12377,12441]],12379:[null,null,{12441:12380}],12380:[[12379,12441]],12381:[null,null,{12441:12382}],12382:[[12381,12441]],12383:[null,null,{12441:12384}],12384:[[12383,12441]],12385:[null,null,{12441:12386}],12386:[[12385,12441]],12388:[null,null,{12441:12389}],12389:[[12388,12441]],12390:[null,null,{12441:12391}],12391:[[12390,12441]],12392:[null,null,{12441:12393}],12393:[[12392,12441]],12399:[null,null,{12441:12400,12442:12401}],12400:[[12399,12441]],12401:[[12399,12442]],12402:[null,null,{12441:12403,12442:12404}],12403:[[12402,12441]],12404:[[12402,12442]],12405:[null,null,{12441:12406,12442:12407}],12406:[[12405,12441]],12407:[[12405,12442]],12408:[null,null,{12441:12409,12442:12410}],12409:[[12408,12441]],12410:[[12408,12442]],12411:[null,null,{12441:12412,12442:12413}],12412:[[12411,12441]],12413:[[12411,12442]],12436:[[12358,12441]],12441:[null,8],12442:[null,8],12443:[[32,12441],256],12444:[[32,12442],256],12445:[null,null,{12441:12446}],12446:[[12445,12441]],12447:[[12424,12426],256],12454:[null,null,{12441:12532}],12459:[null,null,{12441:12460}],12460:[[12459,12441]],12461:[null,null,{12441:12462}],12462:[[12461,12441]],12463:[null,null,{12441:12464}],12464:[[12463,12441]],12465:[null,null,{12441:12466}],12466:[[12465,12441]],12467:[null,null,{12441:12468}],12468:[[12467,12441]],12469:[null,null,{12441:12470}],12470:[[12469,12441]],12471:[null,null,{12441:12472}],12472:[[12471,12441]],12473:[null,null,{12441:12474}],12474:[[12473,12441]],12475:[null,null,{12441:12476}],12476:[[12475,12441]],12477:[null,null,{12441:12478}],12478:[[12477,12441]],12479:[null,null,{12441:12480}],12480:[[12479,12441]],12481:[null,null,{12441:12482}],12482:[[12481,12441]],12484:[null,null,{12441:12485}],12485:[[12484,12441]],12486:[null,null,{12441:12487}],12487:[[12486,12441]],12488:[null,null,{12441:12489}],12489:[[12488,12441]],12495:[null,null,{12441:12496,12442:12497}],12496:[[12495,12441]],12497:[[12495,12442]],12498:[null,null,{12441:12499,12442:12500}],12499:[[12498,12441]],12500:[[12498,12442]],12501:[null,null,{12441:12502,12442:12503}],12502:[[12501,12441]],12503:[[12501,12442]],12504:[null,null,{12441:12505,12442:12506}],12505:[[12504,12441]],12506:[[12504,12442]],12507:[null,null,{12441:12508,12442:12509}],12508:[[12507,12441]],12509:[[12507,12442]],12527:[null,null,{12441:12535}],12528:[null,null,{12441:12536}],12529:[null,null,{12441:12537}],12530:[null,null,{12441:12538}],12532:[[12454,12441]],12535:[[12527,12441]],12536:[[12528,12441]],12537:[[12529,12441]],12538:[[12530,12441]],12541:[null,null,{12441:12542}],12542:[[12541,12441]],12543:[[12467,12488],256]},12544:{12593:[[4352],256],12594:[[4353],256],12595:[[4522],256],12596:[[4354],256],12597:[[4524],256],12598:[[4525],256],12599:[[4355],256],12600:[[4356],256],12601:[[4357],256],12602:[[4528],256],12603:[[4529],256],12604:[[4530],256],12605:[[4531],256],12606:[[4532],256],12607:[[4533],256],12608:[[4378],256],12609:[[4358],256],12610:[[4359],256],12611:[[4360],256],12612:[[4385],256],12613:[[4361],256],12614:[[4362],256],12615:[[4363],256],12616:[[4364],256],12617:[[4365],256],12618:[[4366],256],12619:[[4367],256],12620:[[4368],256],12621:[[4369],256],12622:[[4370],256],12623:[[4449],256],12624:[[4450],256],12625:[[4451],256],12626:[[4452],256],12627:[[4453],256],12628:[[4454],256],12629:[[4455],256],12630:[[4456],256],12631:[[4457],256],12632:[[4458],256],12633:[[4459],256],12634:[[4460],256],12635:[[4461],256],12636:[[4462],256],12637:[[4463],256],12638:[[4464],256],12639:[[4465],256],12640:[[4466],256],12641:[[4467],256],12642:[[4468],256],12643:[[4469],256],12644:[[4448],256],12645:[[4372],256],12646:[[4373],256],12647:[[4551],256],12648:[[4552],256],12649:[[4556],256],12650:[[4558],256],12651:[[4563],256],12652:[[4567],256],12653:[[4569],256],12654:[[4380],256],12655:[[4573],256],12656:[[4575],256],12657:[[4381],256],12658:[[4382],256],12659:[[4384],256],12660:[[4386],256],12661:[[4387],256],12662:[[4391],256],12663:[[4393],256],12664:[[4395],256],12665:[[4396],256],12666:[[4397],256],12667:[[4398],256],12668:[[4399],256],12669:[[4402],256],12670:[[4406],256],12671:[[4416],256],12672:[[4423],256],12673:[[4428],256],12674:[[4593],256],12675:[[4594],256],12676:[[4439],256],12677:[[4440],256],12678:[[4441],256],12679:[[4484],256],12680:[[4485],256],12681:[[4488],256],12682:[[4497],256],12683:[[4498],256],12684:[[4500],256],12685:[[4510],256],12686:[[4513],256],12690:[[19968],256],12691:[[20108],256],12692:[[19977],256],12693:[[22235],256],12694:[[19978],256],12695:[[20013],256],12696:[[19979],256],12697:[[30002],256],12698:[[20057],256],12699:[[19993],256],12700:[[19969],256],12701:[[22825],256],12702:[[22320],256],12703:[[20154],256]},12800:{12800:[[40,4352,41],256],12801:[[40,4354,41],256],12802:[[40,4355,41],256],12803:[[40,4357,41],256],12804:[[40,4358,41],256],12805:[[40,4359,41],256],12806:[[40,4361,41],256],12807:[[40,4363,41],256],12808:[[40,4364,41],256],12809:[[40,4366,41],256],12810:[[40,4367,41],256],12811:[[40,4368,41],256],12812:[[40,4369,41],256],12813:[[40,4370,41],256],12814:[[40,4352,4449,41],256],12815:[[40,4354,4449,41],256],12816:[[40,4355,4449,41],256],12817:[[40,4357,4449,41],256],12818:[[40,4358,4449,41],256],12819:[[40,4359,4449,41],256],12820:[[40,4361,4449,41],256],12821:[[40,4363,4449,41],256],12822:[[40,4364,4449,41],256],12823:[[40,4366,4449,41],256],12824:[[40,4367,4449,41],256],12825:[[40,4368,4449,41],256],12826:[[40,4369,4449,41],256],12827:[[40,4370,4449,41],256],12828:[[40,4364,4462,41],256],12829:[[40,4363,4457,4364,4453,4523,41],256],12830:[[40,4363,4457,4370,4462,41],256],12832:[[40,19968,41],256],12833:[[40,20108,41],256],12834:[[40,19977,41],256],12835:[[40,22235,41],256],12836:[[40,20116,41],256],12837:[[40,20845,41],256],12838:[[40,19971,41],256],12839:[[40,20843,41],256],12840:[[40,20061,41],256],12841:[[40,21313,41],256],12842:[[40,26376,41],256],12843:[[40,28779,41],256],12844:[[40,27700,41],256],12845:[[40,26408,41],256],12846:[[40,37329,41],256],12847:[[40,22303,41],256],12848:[[40,26085,41],256],12849:[[40,26666,41],256],12850:[[40,26377,41],256],12851:[[40,31038,41],256],12852:[[40,21517,41],256],12853:[[40,29305,41],256],12854:[[40,36001,41],256],12855:[[40,31069,41],256],12856:[[40,21172,41],256],12857:[[40,20195,41],256],12858:[[40,21628,41],256],12859:[[40,23398,41],256],12860:[[40,30435,41],256],12861:[[40,20225,41],256],12862:[[40,36039,41],256],12863:[[40,21332,41],256],12864:[[40,31085,41],256],12865:[[40,20241,41],256],12866:[[40,33258,41],256],12867:[[40,33267,41],256],12868:[[21839],256],12869:[[24188],256],12870:[[25991],256],12871:[[31631],256],12880:[[80,84,69],256],12881:[[50,49],256],12882:[[50,50],256],12883:[[50,51],256],12884:[[50,52],256],12885:[[50,53],256],12886:[[50,54],256],12887:[[50,55],256],12888:[[50,56],256],12889:[[50,57],256],12890:[[51,48],256],12891:[[51,49],256],12892:[[51,50],256],12893:[[51,51],256],12894:[[51,52],256],12895:[[51,53],256],12896:[[4352],256],12897:[[4354],256],12898:[[4355],256],12899:[[4357],256],12900:[[4358],256],12901:[[4359],256],12902:[[4361],256],12903:[[4363],256],12904:[[4364],256],12905:[[4366],256],12906:[[4367],256],12907:[[4368],256],12908:[[4369],256],12909:[[4370],256],12910:[[4352,4449],256],12911:[[4354,4449],256],12912:[[4355,4449],256],12913:[[4357,4449],256],12914:[[4358,4449],256],12915:[[4359,4449],256],12916:[[4361,4449],256],12917:[[4363,4449],256],12918:[[4364,4449],256],12919:[[4366,4449],256],12920:[[4367,4449],256],12921:[[4368,4449],256],12922:[[4369,4449],256],12923:[[4370,4449],256],12924:[[4366,4449,4535,4352,4457],256],12925:[[4364,4462,4363,4468],256],12926:[[4363,4462],256],12928:[[19968],256],12929:[[20108],256],12930:[[19977],256],12931:[[22235],256],12932:[[20116],256],12933:[[20845],256],12934:[[19971],256],12935:[[20843],256],12936:[[20061],256],12937:[[21313],256],12938:[[26376],256],12939:[[28779],256],12940:[[27700],256],12941:[[26408],256],12942:[[37329],256],12943:[[22303],256],12944:[[26085],256],12945:[[26666],256],12946:[[26377],256],12947:[[31038],256],12948:[[21517],256],12949:[[29305],256],12950:[[36001],256],12951:[[31069],256],12952:[[21172],256],12953:[[31192],256],12954:[[30007],256],12955:[[22899],256],12956:[[36969],256],12957:[[20778],256],12958:[[21360],256],12959:[[27880],256],12960:[[38917],256],12961:[[20241],256],12962:[[20889],256],12963:[[27491],256],12964:[[19978],256],12965:[[20013],256],12966:[[19979],256],12967:[[24038],256],12968:[[21491],256],12969:[[21307],256],12970:[[23447],256],12971:[[23398],256],12972:[[30435],256],12973:[[20225],256],12974:[[36039],256],12975:[[21332],256],12976:[[22812],256],12977:[[51,54],256],12978:[[51,55],256],12979:[[51,56],256],12980:[[51,57],256],12981:[[52,48],256],12982:[[52,49],256],12983:[[52,50],256],12984:[[52,51],256],12985:[[52,52],256],12986:[[52,53],256],12987:[[52,54],256],12988:[[52,55],256],12989:[[52,56],256],12990:[[52,57],256],12991:[[53,48],256],12992:[[49,26376],256],12993:[[50,26376],256],12994:[[51,26376],256],12995:[[52,26376],256],12996:[[53,26376],256],12997:[[54,26376],256],12998:[[55,26376],256],12999:[[56,26376],256],13000:[[57,26376],256],13001:[[49,48,26376],256],13002:[[49,49,26376],256],13003:[[49,50,26376],256],13004:[[72,103],256],13005:[[101,114,103],256],13006:[[101,86],256],13007:[[76,84,68],256],13008:[[12450],256],13009:[[12452],256],13010:[[12454],256],13011:[[12456],256],13012:[[12458],256],13013:[[12459],256],13014:[[12461],256],13015:[[12463],256],13016:[[12465],256],13017:[[12467],256],13018:[[12469],256],13019:[[12471],256],13020:[[12473],256],13021:[[12475],256],13022:[[12477],256],13023:[[12479],256],13024:[[12481],256],13025:[[12484],256],13026:[[12486],256],13027:[[12488],256],13028:[[12490],256],13029:[[12491],256],13030:[[12492],256],13031:[[12493],256],13032:[[12494],256],13033:[[12495],256],13034:[[12498],256],13035:[[12501],256],13036:[[12504],256],13037:[[12507],256],13038:[[12510],256],13039:[[12511],256],13040:[[12512],256],13041:[[12513],256],13042:[[12514],256],13043:[[12516],256],13044:[[12518],256],13045:[[12520],256],13046:[[12521],256],13047:[[12522],256],13048:[[12523],256],13049:[[12524],256],13050:[[12525],256],13051:[[12527],256],13052:[[12528],256],13053:[[12529],256],13054:[[12530],256]},13056:{13056:[[12450,12497,12540,12488],256],13057:[[12450,12523,12501,12449],256],13058:[[12450,12531,12506,12450],256],13059:[[12450,12540,12523],256],13060:[[12452,12491,12531,12464],256],13061:[[12452,12531,12481],256],13062:[[12454,12457,12531],256],13063:[[12456,12473,12463,12540,12489],256],13064:[[12456,12540,12459,12540],256],13065:[[12458,12531,12473],256],13066:[[12458,12540,12512],256],13067:[[12459,12452,12522],256],13068:[[12459,12521,12483,12488],256],13069:[[12459,12525,12522,12540],256],13070:[[12460,12525,12531],256],13071:[[12460,12531,12510],256],13072:[[12462,12460],256],13073:[[12462,12491,12540],256],13074:[[12461,12517,12522,12540],256],13075:[[12462,12523,12480,12540],256],13076:[[12461,12525],256],13077:[[12461,12525,12464,12521,12512],256],13078:[[12461,12525,12513,12540,12488,12523],256],13079:[[12461,12525,12527,12483,12488],256],13080:[[12464,12521,12512],256],13081:[[12464,12521,12512,12488,12531],256],13082:[[12463,12523,12476,12452,12525],256],13083:[[12463,12525,12540,12493],256],13084:[[12465,12540,12473],256],13085:[[12467,12523,12490],256],13086:[[12467,12540,12509],256],13087:[[12469,12452,12463,12523],256],13088:[[12469,12531,12481,12540,12512],256],13089:[[12471,12522,12531,12464],256],13090:[[12475,12531,12481],256],13091:[[12475,12531,12488],256],13092:[[12480,12540,12473],256],13093:[[12487,12471],256],13094:[[12489,12523],256],13095:[[12488,12531],256],13096:[[12490,12494],256],13097:[[12494,12483,12488],256],13098:[[12495,12452,12484],256],13099:[[12497,12540,12475,12531,12488],256],13100:[[12497,12540,12484],256],13101:[[12496,12540,12524,12523],256],13102:[[12500,12450,12473,12488,12523],256],13103:[[12500,12463,12523],256],13104:[[12500,12467],256],13105:[[12499,12523],256],13106:[[12501,12449,12521,12483,12489],256],13107:[[12501,12451,12540,12488],256],13108:[[12502,12483,12471,12455,12523],256],13109:[[12501,12521,12531],256],13110:[[12504,12463,12479,12540,12523],256],13111:[[12506,12477],256],13112:[[12506,12491,12498],256],13113:[[12504,12523,12484],256],13114:[[12506,12531,12473],256],13115:[[12506,12540,12472],256],13116:[[12505,12540,12479],256],13117:[[12509,12452,12531,12488],256],13118:[[12508,12523,12488],256],13119:[[12507,12531],256],13120:[[12509,12531,12489],256],13121:[[12507,12540,12523],256],13122:[[12507,12540,12531],256],13123:[[12510,12452,12463,12525],256],13124:[[12510,12452,12523],256],13125:[[12510,12483,12495],256],13126:[[12510,12523,12463],256],13127:[[12510,12531,12471,12519,12531],256],13128:[[12511,12463,12525,12531],256],13129:[[12511,12522],256],13130:[[12511,12522,12496,12540,12523],256],13131:[[12513,12460],256],13132:[[12513,12460,12488,12531],256],13133:[[12513,12540,12488,12523],256],13134:[[12516,12540,12489],256],13135:[[12516,12540,12523],256],13136:[[12518,12450,12531],256],13137:[[12522,12483,12488,12523],256],13138:[[12522,12521],256],13139:[[12523,12500,12540],256],13140:[[12523,12540,12502,12523],256],13141:[[12524,12512],256],13142:[[12524,12531,12488,12466,12531],256],13143:[[12527,12483,12488],256],13144:[[48,28857],256],13145:[[49,28857],256],13146:[[50,28857],256],13147:[[51,28857],256],13148:[[52,28857],256],13149:[[53,28857],256],13150:[[54,28857],256],13151:[[55,28857],256],13152:[[56,28857],256],13153:[[57,28857],256],13154:[[49,48,28857],256],13155:[[49,49,28857],256],13156:[[49,50,28857],256],13157:[[49,51,28857],256],13158:[[49,52,28857],256],13159:[[49,53,28857],256],13160:[[49,54,28857],256],13161:[[49,55,28857],256],13162:[[49,56,28857],256],13163:[[49,57,28857],256],13164:[[50,48,28857],256],13165:[[50,49,28857],256],13166:[[50,50,28857],256],13167:[[50,51,28857],256],13168:[[50,52,28857],256],13169:[[104,80,97],256],13170:[[100,97],256],13171:[[65,85],256],13172:[[98,97,114],256],13173:[[111,86],256],13174:[[112,99],256],13175:[[100,109],256],13176:[[100,109,178],256],13177:[[100,109,179],256],13178:[[73,85],256],13179:[[24179,25104],256],13180:[[26157,21644],256],13181:[[22823,27491],256],13182:[[26126,27835],256],13183:[[26666,24335,20250,31038],256],13184:[[112,65],256],13185:[[110,65],256],13186:[[956,65],256],13187:[[109,65],256],13188:[[107,65],256],13189:[[75,66],256],13190:[[77,66],256],13191:[[71,66],256],13192:[[99,97,108],256],13193:[[107,99,97,108],256],13194:[[112,70],256],13195:[[110,70],256],13196:[[956,70],256],13197:[[956,103],256],13198:[[109,103],256],13199:[[107,103],256],13200:[[72,122],256],13201:[[107,72,122],256],13202:[[77,72,122],256],13203:[[71,72,122],256],13204:[[84,72,122],256],13205:[[956,8467],256],13206:[[109,8467],256],13207:[[100,8467],256],13208:[[107,8467],256],13209:[[102,109],256],13210:[[110,109],256],13211:[[956,109],256],13212:[[109,109],256],13213:[[99,109],256],13214:[[107,109],256],13215:[[109,109,178],256],13216:[[99,109,178],256],13217:[[109,178],256],13218:[[107,109,178],256],13219:[[109,109,179],256],13220:[[99,109,179],256],13221:[[109,179],256],13222:[[107,109,179],256],13223:[[109,8725,115],256],13224:[[109,8725,115,178],256],13225:[[80,97],256],13226:[[107,80,97],256],13227:[[77,80,97],256],13228:[[71,80,97],256],13229:[[114,97,100],256],13230:[[114,97,100,8725,115],256],13231:[[114,97,100,8725,115,178],256],13232:[[112,115],256],13233:[[110,115],256],13234:[[956,115],256],13235:[[109,115],256],13236:[[112,86],256],13237:[[110,86],256],13238:[[956,86],256],13239:[[109,86],256],13240:[[107,86],256],13241:[[77,86],256],13242:[[112,87],256],13243:[[110,87],256],13244:[[956,87],256],13245:[[109,87],256],13246:[[107,87],256],13247:[[77,87],256],13248:[[107,937],256],13249:[[77,937],256],13250:[[97,46,109,46],256],13251:[[66,113],256],13252:[[99,99],256],13253:[[99,100],256],13254:[[67,8725,107,103],256],13255:[[67,111,46],256],13256:[[100,66],256],13257:[[71,121],256],13258:[[104,97],256],13259:[[72,80],256],13260:[[105,110],256],13261:[[75,75],256],13262:[[75,77],256],13263:[[107,116],256],13264:[[108,109],256],13265:[[108,110],256],13266:[[108,111,103],256],13267:[[108,120],256],13268:[[109,98],256],13269:[[109,105,108],256],13270:[[109,111,108],256],13271:[[80,72],256],13272:[[112,46,109,46],256],13273:[[80,80,77],256],13274:[[80,82],256],13275:[[115,114],256],13276:[[83,118],256],13277:[[87,98],256],13278:[[86,8725,109],256],13279:[[65,8725,109],256],13280:[[49,26085],256],13281:[[50,26085],256],13282:[[51,26085],256],13283:[[52,26085],256],13284:[[53,26085],256],13285:[[54,26085],256],13286:[[55,26085],256],13287:[[56,26085],256],13288:[[57,26085],256],13289:[[49,48,26085],256],13290:[[49,49,26085],256],13291:[[49,50,26085],256],13292:[[49,51,26085],256],13293:[[49,52,26085],256],13294:[[49,53,26085],256],13295:[[49,54,26085],256],13296:[[49,55,26085],256],13297:[[49,56,26085],256],13298:[[49,57,26085],256],13299:[[50,48,26085],256],13300:[[50,49,26085],256],13301:[[50,50,26085],256],13302:[[50,51,26085],256],13303:[[50,52,26085],256],13304:[[50,53,26085],256],13305:[[50,54,26085],256],13306:[[50,55,26085],256],13307:[[50,56,26085],256],13308:[[50,57,26085],256],13309:[[51,48,26085],256],13310:[[51,49,26085],256],13311:[[103,97,108],256]},27136:{92912:[null,1],92913:[null,1],92914:[null,1],92915:[null,1],92916:[null,1]},27392:{92976:[null,230],92977:[null,230],92978:[null,230],92979:[null,230],92980:[null,230],92981:[null,230],92982:[null,230]},42496:{42607:[null,230],42612:[null,230],42613:[null,230],42614:[null,230],42615:[null,230],42616:[null,230],42617:[null,230],42618:[null,230],42619:[null,230],42620:[null,230],42621:[null,230],42652:[[1098],256],42653:[[1100],256],42655:[null,230],42736:[null,230],42737:[null,230]},42752:{42864:[[42863],256],43000:[[294],256],43001:[[339],256]},43008:{43014:[null,9],43204:[null,9],43232:[null,230],43233:[null,230],43234:[null,230],43235:[null,230],43236:[null,230],43237:[null,230],43238:[null,230],43239:[null,230],43240:[null,230],43241:[null,230],43242:[null,230],43243:[null,230],43244:[null,230],43245:[null,230],43246:[null,230],43247:[null,230],43248:[null,230],43249:[null,230]},43264:{43307:[null,220],43308:[null,220],43309:[null,220],43347:[null,9],43443:[null,7],43456:[null,9]},43520:{43696:[null,230],43698:[null,230],43699:[null,230],43700:[null,220],43703:[null,230],43704:[null,230],43710:[null,230],43711:[null,230],43713:[null,230],43766:[null,9]},43776:{43868:[[42791],256],43869:[[43831],256],43870:[[619],256],43871:[[43858],256],44013:[null,9]},48128:{113822:[null,1]},53504:{119134:[[119127,119141],512],119135:[[119128,119141],512],119136:[[119135,119150],512],119137:[[119135,119151],512],119138:[[119135,119152],512],119139:[[119135,119153],512],119140:[[119135,119154],512],119141:[null,216],119142:[null,216],119143:[null,1],119144:[null,1],119145:[null,1],119149:[null,226],119150:[null,216],119151:[null,216],119152:[null,216],119153:[null,216],119154:[null,216],119163:[null,220],119164:[null,220],119165:[null,220],119166:[null,220],119167:[null,220],119168:[null,220],119169:[null,220],119170:[null,220],119173:[null,230],119174:[null,230],119175:[null,230],119176:[null,230],119177:[null,230],119178:[null,220],119179:[null,220],119210:[null,230],119211:[null,230],119212:[null,230],119213:[null,230],119227:[[119225,119141],512],119228:[[119226,119141],512],119229:[[119227,119150],512],119230:[[119228,119150],512],119231:[[119227,119151],512],119232:[[119228,119151],512]},53760:{119362:[null,230],119363:[null,230],119364:[null,230]},54272:{119808:[[65],256],119809:[[66],256],119810:[[67],256],119811:[[68],256],119812:[[69],256],119813:[[70],256],119814:[[71],256],119815:[[72],256],119816:[[73],256],119817:[[74],256],119818:[[75],256],119819:[[76],256],119820:[[77],256],119821:[[78],256],119822:[[79],256],119823:[[80],256],119824:[[81],256],119825:[[82],256],119826:[[83],256],119827:[[84],256],119828:[[85],256],119829:[[86],256],119830:[[87],256],119831:[[88],256],119832:[[89],256],119833:[[90],256],119834:[[97],256],119835:[[98],256],119836:[[99],256],119837:[[100],256],119838:[[101],256],119839:[[102],256],119840:[[103],256],119841:[[104],256],119842:[[105],256],119843:[[106],256],119844:[[107],256],119845:[[108],256],119846:[[109],256],119847:[[110],256],119848:[[111],256],119849:[[112],256],119850:[[113],256],119851:[[114],256],119852:[[115],256],119853:[[116],256],119854:[[117],256],119855:[[118],256],119856:[[119],256],119857:[[120],256],119858:[[121],256],119859:[[122],256],119860:[[65],256],119861:[[66],256],119862:[[67],256],119863:[[68],256],119864:[[69],256],119865:[[70],256],119866:[[71],256],119867:[[72],256],119868:[[73],256],119869:[[74],256],119870:[[75],256],119871:[[76],256],119872:[[77],256],119873:[[78],256],119874:[[79],256],119875:[[80],256],119876:[[81],256],119877:[[82],256],119878:[[83],256],119879:[[84],256],119880:[[85],256],119881:[[86],256],119882:[[87],256],119883:[[88],256],119884:[[89],256],119885:[[90],256],119886:[[97],256],119887:[[98],256],119888:[[99],256],119889:[[100],256],119890:[[101],256],119891:[[102],256],119892:[[103],256],119894:[[105],256],119895:[[106],256],119896:[[107],256],119897:[[108],256],119898:[[109],256],119899:[[110],256],119900:[[111],256],119901:[[112],256],119902:[[113],256],119903:[[114],256],119904:[[115],256],119905:[[116],256],119906:[[117],256],119907:[[118],256],119908:[[119],256],119909:[[120],256],119910:[[121],256],119911:[[122],256],119912:[[65],256],119913:[[66],256],119914:[[67],256],119915:[[68],256],119916:[[69],256],119917:[[70],256],119918:[[71],256],119919:[[72],256],119920:[[73],256],119921:[[74],256],119922:[[75],256],119923:[[76],256],119924:[[77],256],119925:[[78],256],119926:[[79],256],119927:[[80],256],119928:[[81],256],119929:[[82],256],119930:[[83],256],119931:[[84],256],119932:[[85],256],119933:[[86],256],119934:[[87],256],119935:[[88],256],119936:[[89],256],119937:[[90],256],119938:[[97],256],119939:[[98],256],119940:[[99],256],119941:[[100],256],119942:[[101],256],119943:[[102],256],119944:[[103],256],119945:[[104],256],119946:[[105],256],119947:[[106],256],119948:[[107],256],119949:[[108],256],119950:[[109],256],119951:[[110],256],119952:[[111],256],119953:[[112],256],119954:[[113],256],119955:[[114],256],119956:[[115],256],119957:[[116],256],119958:[[117],256],119959:[[118],256],119960:[[119],256],119961:[[120],256],119962:[[121],256],119963:[[122],256],119964:[[65],256],119966:[[67],256],119967:[[68],256],119970:[[71],256],119973:[[74],256],119974:[[75],256],119977:[[78],256],119978:[[79],256],119979:[[80],256],119980:[[81],256],119982:[[83],256],119983:[[84],256],119984:[[85],256],119985:[[86],256],119986:[[87],256],119987:[[88],256],119988:[[89],256],119989:[[90],256],119990:[[97],256],119991:[[98],256],119992:[[99],256],119993:[[100],256],119995:[[102],256],119997:[[104],256],119998:[[105],256],119999:[[106],256],120000:[[107],256],120001:[[108],256],120002:[[109],256],120003:[[110],256],120005:[[112],256],120006:[[113],256],120007:[[114],256],120008:[[115],256],120009:[[116],256],120010:[[117],256],120011:[[118],256],120012:[[119],256],120013:[[120],256],120014:[[121],256],120015:[[122],256],120016:[[65],256],120017:[[66],256],120018:[[67],256],120019:[[68],256],120020:[[69],256],120021:[[70],256],120022:[[71],256],120023:[[72],256],120024:[[73],256],120025:[[74],256],120026:[[75],256],120027:[[76],256],120028:[[77],256],120029:[[78],256],120030:[[79],256],120031:[[80],256],120032:[[81],256],120033:[[82],256],120034:[[83],256],120035:[[84],256],120036:[[85],256],120037:[[86],256],120038:[[87],256],120039:[[88],256],120040:[[89],256],120041:[[90],256],120042:[[97],256],120043:[[98],256],120044:[[99],256],120045:[[100],256],120046:[[101],256],120047:[[102],256],120048:[[103],256],120049:[[104],256],120050:[[105],256],120051:[[106],256],120052:[[107],256],120053:[[108],256],120054:[[109],256],120055:[[110],256],120056:[[111],256],120057:[[112],256],120058:[[113],256],120059:[[114],256],120060:[[115],256],120061:[[116],256],120062:[[117],256],120063:[[118],256]},54528:{120064:[[119],256],120065:[[120],256],120066:[[121],256],120067:[[122],256],120068:[[65],256],120069:[[66],256],120071:[[68],256],120072:[[69],256],120073:[[70],256],120074:[[71],256],120077:[[74],256],120078:[[75],256],120079:[[76],256],120080:[[77],256],120081:[[78],256],120082:[[79],256],120083:[[80],256],120084:[[81],256],120086:[[83],256],120087:[[84],256],120088:[[85],256],120089:[[86],256],120090:[[87],256],120091:[[88],256],120092:[[89],256],120094:[[97],256],120095:[[98],256],120096:[[99],256],120097:[[100],256],120098:[[101],256],120099:[[102],256],120100:[[103],256],120101:[[104],256],120102:[[105],256],120103:[[106],256],120104:[[107],256],120105:[[108],256],120106:[[109],256],120107:[[110],256],120108:[[111],256],120109:[[112],256],120110:[[113],256],120111:[[114],256],120112:[[115],256],120113:[[116],256],120114:[[117],256],120115:[[118],256],120116:[[119],256],120117:[[120],256],120118:[[121],256],120119:[[122],256],120120:[[65],256],120121:[[66],256],120123:[[68],256],120124:[[69],256],120125:[[70],256],120126:[[71],256],120128:[[73],256],120129:[[74],256],120130:[[75],256],120131:[[76],256],120132:[[77],256],120134:[[79],256],120138:[[83],256],120139:[[84],256],120140:[[85],256],120141:[[86],256],120142:[[87],256],120143:[[88],256],120144:[[89],256],120146:[[97],256],120147:[[98],256],120148:[[99],256],120149:[[100],256],120150:[[101],256],120151:[[102],256],120152:[[103],256],120153:[[104],256],120154:[[105],256],120155:[[106],256],120156:[[107],256],120157:[[108],256],120158:[[109],256],120159:[[110],256],120160:[[111],256],120161:[[112],256],120162:[[113],256],120163:[[114],256],120164:[[115],256],120165:[[116],256],120166:[[117],256],120167:[[118],256],120168:[[119],256],120169:[[120],256],120170:[[121],256],120171:[[122],256],120172:[[65],256],120173:[[66],256],120174:[[67],256],120175:[[68],256],120176:[[69],256],120177:[[70],256],120178:[[71],256],120179:[[72],256],120180:[[73],256],120181:[[74],256],120182:[[75],256],120183:[[76],256],120184:[[77],256],120185:[[78],256],120186:[[79],256],120187:[[80],256],120188:[[81],256],120189:[[82],256],120190:[[83],256],120191:[[84],256],120192:[[85],256],120193:[[86],256],120194:[[87],256],120195:[[88],256],120196:[[89],256],120197:[[90],256],120198:[[97],256],120199:[[98],256],120200:[[99],256],120201:[[100],256],120202:[[101],256],120203:[[102],256],120204:[[103],256],120205:[[104],256],120206:[[105],256],120207:[[106],256],120208:[[107],256],120209:[[108],256],120210:[[109],256],120211:[[110],256],120212:[[111],256],120213:[[112],256],120214:[[113],256],120215:[[114],256],120216:[[115],256],120217:[[116],256],120218:[[117],256],120219:[[118],256],120220:[[119],256],120221:[[120],256],120222:[[121],256],120223:[[122],256],120224:[[65],256],120225:[[66],256],120226:[[67],256],120227:[[68],256],120228:[[69],256],120229:[[70],256],120230:[[71],256],120231:[[72],256],120232:[[73],256],120233:[[74],256],120234:[[75],256],120235:[[76],256],120236:[[77],256],120237:[[78],256],120238:[[79],256],120239:[[80],256],120240:[[81],256],120241:[[82],256],120242:[[83],256],120243:[[84],256],120244:[[85],256],120245:[[86],256],120246:[[87],256],120247:[[88],256],120248:[[89],256],120249:[[90],256],120250:[[97],256],120251:[[98],256],120252:[[99],256],120253:[[100],256],120254:[[101],256],120255:[[102],256],120256:[[103],256],120257:[[104],256],120258:[[105],256],120259:[[106],256],120260:[[107],256],120261:[[108],256],120262:[[109],256],120263:[[110],256],120264:[[111],256],120265:[[112],256],120266:[[113],256],120267:[[114],256],120268:[[115],256],120269:[[116],256],120270:[[117],256],120271:[[118],256],120272:[[119],256],120273:[[120],256],120274:[[121],256],120275:[[122],256],120276:[[65],256],120277:[[66],256],120278:[[67],256],120279:[[68],256],120280:[[69],256],120281:[[70],256],120282:[[71],256],120283:[[72],256],120284:[[73],256],120285:[[74],256],120286:[[75],256],120287:[[76],256],120288:[[77],256],120289:[[78],256],120290:[[79],256],120291:[[80],256],120292:[[81],256],120293:[[82],256],120294:[[83],256],120295:[[84],256],120296:[[85],256],120297:[[86],256],120298:[[87],256],120299:[[88],256],120300:[[89],256],120301:[[90],256],120302:[[97],256],120303:[[98],256],120304:[[99],256],120305:[[100],256],120306:[[101],256],120307:[[102],256],120308:[[103],256],120309:[[104],256],120310:[[105],256],120311:[[106],256],120312:[[107],256],120313:[[108],256],120314:[[109],256],120315:[[110],256],120316:[[111],256],120317:[[112],256],120318:[[113],256],120319:[[114],256]},54784:{120320:[[115],256],120321:[[116],256],120322:[[117],256],120323:[[118],256],120324:[[119],256],120325:[[120],256],120326:[[121],256],120327:[[122],256],120328:[[65],256],120329:[[66],256],120330:[[67],256],120331:[[68],256],120332:[[69],256],120333:[[70],256],120334:[[71],256],120335:[[72],256],120336:[[73],256],120337:[[74],256],120338:[[75],256],120339:[[76],256],120340:[[77],256],120341:[[78],256],120342:[[79],256],120343:[[80],256],120344:[[81],256],120345:[[82],256],120346:[[83],256],120347:[[84],256],120348:[[85],256],120349:[[86],256],120350:[[87],256],120351:[[88],256],120352:[[89],256],120353:[[90],256],120354:[[97],256],120355:[[98],256],120356:[[99],256],120357:[[100],256],120358:[[101],256],120359:[[102],256],120360:[[103],256],120361:[[104],256],120362:[[105],256],120363:[[106],256],120364:[[107],256],120365:[[108],256],120366:[[109],256],120367:[[110],256],120368:[[111],256],120369:[[112],256],120370:[[113],256],120371:[[114],256],120372:[[115],256],120373:[[116],256],120374:[[117],256],120375:[[118],256],120376:[[119],256],120377:[[120],256],120378:[[121],256],120379:[[122],256],120380:[[65],256],120381:[[66],256],120382:[[67],256],120383:[[68],256],120384:[[69],256],120385:[[70],256],120386:[[71],256],120387:[[72],256],120388:[[73],256],120389:[[74],256],120390:[[75],256],120391:[[76],256],120392:[[77],256],120393:[[78],256],120394:[[79],256],120395:[[80],256],120396:[[81],256],120397:[[82],256],120398:[[83],256],120399:[[84],256],120400:[[85],256],120401:[[86],256],120402:[[87],256],120403:[[88],256],120404:[[89],256],120405:[[90],256],120406:[[97],256],120407:[[98],256],120408:[[99],256],120409:[[100],256],120410:[[101],256],120411:[[102],256],120412:[[103],256],120413:[[104],256],120414:[[105],256],120415:[[106],256],120416:[[107],256],120417:[[108],256],120418:[[109],256],120419:[[110],256],120420:[[111],256],120421:[[112],256],120422:[[113],256],120423:[[114],256],120424:[[115],256],120425:[[116],256],120426:[[117],256],120427:[[118],256],120428:[[119],256],120429:[[120],256],120430:[[121],256],120431:[[122],256],120432:[[65],256],120433:[[66],256],120434:[[67],256],120435:[[68],256],120436:[[69],256],120437:[[70],256],120438:[[71],256],120439:[[72],256],120440:[[73],256],120441:[[74],256],120442:[[75],256],120443:[[76],256],120444:[[77],256],120445:[[78],256],120446:[[79],256],120447:[[80],256],120448:[[81],256],120449:[[82],256],120450:[[83],256],120451:[[84],256],120452:[[85],256],120453:[[86],256],120454:[[87],256],120455:[[88],256],120456:[[89],256],120457:[[90],256],120458:[[97],256],120459:[[98],256],120460:[[99],256],120461:[[100],256],120462:[[101],256],120463:[[102],256],120464:[[103],256],120465:[[104],256],120466:[[105],256],120467:[[106],256],120468:[[107],256],120469:[[108],256],120470:[[109],256],120471:[[110],256],120472:[[111],256],120473:[[112],256],120474:[[113],256],120475:[[114],256],120476:[[115],256],120477:[[116],256],120478:[[117],256],120479:[[118],256],120480:[[119],256],120481:[[120],256],120482:[[121],256],120483:[[122],256],120484:[[305],256],120485:[[567],256],120488:[[913],256],120489:[[914],256],120490:[[915],256],120491:[[916],256],120492:[[917],256],120493:[[918],256],120494:[[919],256],120495:[[920],256],120496:[[921],256],120497:[[922],256],120498:[[923],256],120499:[[924],256],120500:[[925],256],120501:[[926],256],120502:[[927],256],120503:[[928],256],120504:[[929],256],120505:[[1012],256],120506:[[931],256],120507:[[932],256],120508:[[933],256],120509:[[934],256],120510:[[935],256],120511:[[936],256],120512:[[937],256],120513:[[8711],256],120514:[[945],256],120515:[[946],256],120516:[[947],256],120517:[[948],256],120518:[[949],256],120519:[[950],256],120520:[[951],256],120521:[[952],256],120522:[[953],256],120523:[[954],256],120524:[[955],256],120525:[[956],256],120526:[[957],256],120527:[[958],256],120528:[[959],256],120529:[[960],256],120530:[[961],256],120531:[[962],256],120532:[[963],256],120533:[[964],256],120534:[[965],256],120535:[[966],256],120536:[[967],256],120537:[[968],256],120538:[[969],256],120539:[[8706],256],120540:[[1013],256],120541:[[977],256],120542:[[1008],256],120543:[[981],256],120544:[[1009],256],120545:[[982],256],120546:[[913],256],120547:[[914],256],120548:[[915],256],120549:[[916],256],120550:[[917],256],120551:[[918],256],120552:[[919],256],120553:[[920],256],120554:[[921],256],120555:[[922],256],120556:[[923],256],120557:[[924],256],120558:[[925],256],120559:[[926],256],120560:[[927],256],120561:[[928],256],120562:[[929],256],120563:[[1012],256],120564:[[931],256],120565:[[932],256],120566:[[933],256],120567:[[934],256],120568:[[935],256],120569:[[936],256],120570:[[937],256],120571:[[8711],256],120572:[[945],256],120573:[[946],256],120574:[[947],256],120575:[[948],256]},55040:{120576:[[949],256],120577:[[950],256],120578:[[951],256],120579:[[952],256],120580:[[953],256],120581:[[954],256],120582:[[955],256],120583:[[956],256],120584:[[957],256],120585:[[958],256],120586:[[959],256],120587:[[960],256],120588:[[961],256],120589:[[962],256],120590:[[963],256],120591:[[964],256],120592:[[965],256],120593:[[966],256],120594:[[967],256],120595:[[968],256],120596:[[969],256],120597:[[8706],256],120598:[[1013],256],120599:[[977],256],120600:[[1008],256],120601:[[981],256],120602:[[1009],256],120603:[[982],256],120604:[[913],256],120605:[[914],256],120606:[[915],256],120607:[[916],256],120608:[[917],256],120609:[[918],256],120610:[[919],256],120611:[[920],256],120612:[[921],256],120613:[[922],256],120614:[[923],256],120615:[[924],256],120616:[[925],256],120617:[[926],256],120618:[[927],256],120619:[[928],256],120620:[[929],256],120621:[[1012],256],120622:[[931],256],120623:[[932],256],120624:[[933],256],120625:[[934],256],120626:[[935],256],120627:[[936],256],120628:[[937],256],120629:[[8711],256],120630:[[945],256],120631:[[946],256],120632:[[947],256],120633:[[948],256],120634:[[949],256],120635:[[950],256],120636:[[951],256],120637:[[952],256],120638:[[953],256],120639:[[954],256],120640:[[955],256],120641:[[956],256],120642:[[957],256],120643:[[958],256],120644:[[959],256],120645:[[960],256],120646:[[961],256],120647:[[962],256],120648:[[963],256],120649:[[964],256],120650:[[965],256],120651:[[966],256],120652:[[967],256],120653:[[968],256],120654:[[969],256],120655:[[8706],256],120656:[[1013],256],120657:[[977],256],120658:[[1008],256],120659:[[981],256],120660:[[1009],256],120661:[[982],256],120662:[[913],256],120663:[[914],256],120664:[[915],256],120665:[[916],256],120666:[[917],256],120667:[[918],256],120668:[[919],256],120669:[[920],256],120670:[[921],256],120671:[[922],256],120672:[[923],256],120673:[[924],256],120674:[[925],256],120675:[[926],256],120676:[[927],256],120677:[[928],256],120678:[[929],256],120679:[[1012],256],120680:[[931],256],120681:[[932],256],120682:[[933],256],120683:[[934],256],120684:[[935],256],120685:[[936],256],120686:[[937],256],120687:[[8711],256],120688:[[945],256],120689:[[946],256],120690:[[947],256],120691:[[948],256],120692:[[949],256],120693:[[950],256],120694:[[951],256],120695:[[952],256],120696:[[953],256],120697:[[954],256],120698:[[955],256],120699:[[956],256],120700:[[957],256],120701:[[958],256],120702:[[959],256],120703:[[960],256],120704:[[961],256],120705:[[962],256],120706:[[963],256],120707:[[964],256],120708:[[965],256],120709:[[966],256],120710:[[967],256],120711:[[968],256],120712:[[969],256],120713:[[8706],256],120714:[[1013],256],120715:[[977],256],120716:[[1008],256],120717:[[981],256],120718:[[1009],256],120719:[[982],256],120720:[[913],256],120721:[[914],256],120722:[[915],256],120723:[[916],256],120724:[[917],256],120725:[[918],256],120726:[[919],256],120727:[[920],256],120728:[[921],256],120729:[[922],256],120730:[[923],256],120731:[[924],256],120732:[[925],256],120733:[[926],256],120734:[[927],256],120735:[[928],256],120736:[[929],256],120737:[[1012],256],120738:[[931],256],120739:[[932],256],120740:[[933],256],120741:[[934],256],120742:[[935],256],120743:[[936],256],120744:[[937],256],120745:[[8711],256],120746:[[945],256],120747:[[946],256],120748:[[947],256],120749:[[948],256],120750:[[949],256],120751:[[950],256],120752:[[951],256],120753:[[952],256],120754:[[953],256],120755:[[954],256],120756:[[955],256],120757:[[956],256],120758:[[957],256],120759:[[958],256],120760:[[959],256],120761:[[960],256],120762:[[961],256],120763:[[962],256],120764:[[963],256],120765:[[964],256],120766:[[965],256],120767:[[966],256],120768:[[967],256],120769:[[968],256],120770:[[969],256],120771:[[8706],256],120772:[[1013],256],120773:[[977],256],120774:[[1008],256],120775:[[981],256],120776:[[1009],256],120777:[[982],256],120778:[[988],256],120779:[[989],256],120782:[[48],256],120783:[[49],256],120784:[[50],256],120785:[[51],256],120786:[[52],256],120787:[[53],256],120788:[[54],256],120789:[[55],256],120790:[[56],256],120791:[[57],256],120792:[[48],256],120793:[[49],256],120794:[[50],256],120795:[[51],256],120796:[[52],256],120797:[[53],256],120798:[[54],256],120799:[[55],256],120800:[[56],256],120801:[[57],256],120802:[[48],256],120803:[[49],256],120804:[[50],256],120805:[[51],256],120806:[[52],256],120807:[[53],256],120808:[[54],256],120809:[[55],256],120810:[[56],256],120811:[[57],256],120812:[[48],256],120813:[[49],256],120814:[[50],256],120815:[[51],256],120816:[[52],256],120817:[[53],256],120818:[[54],256],120819:[[55],256],120820:[[56],256],120821:[[57],256],120822:[[48],256],120823:[[49],256],120824:[[50],256],120825:[[51],256],120826:[[52],256],120827:[[53],256],120828:[[54],256],120829:[[55],256],120830:[[56],256],120831:[[57],256]},59392:{125136:[null,220],125137:[null,220],125138:[null,220],125139:[null,220],125140:[null,220],125141:[null,220],125142:[null,220]},60928:{126464:[[1575],256],126465:[[1576],256],126466:[[1580],256],126467:[[1583],256],126469:[[1608],256],126470:[[1586],256],126471:[[1581],256],126472:[[1591],256],126473:[[1610],256],126474:[[1603],256],126475:[[1604],256],126476:[[1605],256],126477:[[1606],256],126478:[[1587],256],126479:[[1593],256],126480:[[1601],256],126481:[[1589],256],126482:[[1602],256],126483:[[1585],256],126484:[[1588],256],126485:[[1578],256],126486:[[1579],256],126487:[[1582],256],126488:[[1584],256],126489:[[1590],256],126490:[[1592],256],126491:[[1594],256],126492:[[1646],256],126493:[[1722],256],126494:[[1697],256],126495:[[1647],256],126497:[[1576],256],126498:[[1580],256],126500:[[1607],256],126503:[[1581],256],126505:[[1610],256],126506:[[1603],256],126507:[[1604],256],126508:[[1605],256],126509:[[1606],256],126510:[[1587],256],126511:[[1593],256],126512:[[1601],256],126513:[[1589],256],126514:[[1602],256],126516:[[1588],256],126517:[[1578],256],126518:[[1579],256],126519:[[1582],256],126521:[[1590],256],126523:[[1594],256],126530:[[1580],256],126535:[[1581],256],126537:[[1610],256],126539:[[1604],256],126541:[[1606],256],126542:[[1587],256],126543:[[1593],256],126545:[[1589],256],126546:[[1602],256],126548:[[1588],256],126551:[[1582],256],126553:[[1590],256],126555:[[1594],256],126557:[[1722],256],126559:[[1647],256],126561:[[1576],256],126562:[[1580],256],126564:[[1607],256],126567:[[1581],256],126568:[[1591],256],126569:[[1610],256],126570:[[1603],256],126572:[[1605],256],126573:[[1606],256],126574:[[1587],256],126575:[[1593],256],126576:[[1601],256],126577:[[1589],256],126578:[[1602],256],126580:[[1588],256],126581:[[1578],256],126582:[[1579],256],126583:[[1582],256],126585:[[1590],256],126586:[[1592],256],126587:[[1594],256],126588:[[1646],256],126590:[[1697],256],126592:[[1575],256],126593:[[1576],256],126594:[[1580],256],126595:[[1583],256],126596:[[1607],256],126597:[[1608],256],126598:[[1586],256],126599:[[1581],256],126600:[[1591],256],126601:[[1610],256],126603:[[1604],256],126604:[[1605],256],126605:[[1606],256],126606:[[1587],256],126607:[[1593],256],126608:[[1601],256],126609:[[1589],256],126610:[[1602],256],126611:[[1585],256],126612:[[1588],256],126613:[[1578],256],126614:[[1579],256],126615:[[1582],256],126616:[[1584],256],126617:[[1590],256],126618:[[1592],256],126619:[[1594],256],126625:[[1576],256],126626:[[1580],256],126627:[[1583],256],126629:[[1608],256],126630:[[1586],256],126631:[[1581],256],126632:[[1591],256],126633:[[1610],256],126635:[[1604],256],126636:[[1605],256],126637:[[1606],256],126638:[[1587],256],126639:[[1593],256],126640:[[1601],256],126641:[[1589],256],126642:[[1602],256],126643:[[1585],256],126644:[[1588],256],126645:[[1578],256],126646:[[1579],256],126647:[[1582],256],126648:[[1584],256],126649:[[1590],256],126650:[[1592],256],126651:[[1594],256]},61696:{127232:[[48,46],256],127233:[[48,44],256],127234:[[49,44],256],127235:[[50,44],256],127236:[[51,44],256],127237:[[52,44],256],127238:[[53,44],256],127239:[[54,44],256],127240:[[55,44],256],127241:[[56,44],256],127242:[[57,44],256],127248:[[40,65,41],256],127249:[[40,66,41],256],127250:[[40,67,41],256],127251:[[40,68,41],256],127252:[[40,69,41],256],127253:[[40,70,41],256],127254:[[40,71,41],256],127255:[[40,72,41],256],127256:[[40,73,41],256],127257:[[40,74,41],256],127258:[[40,75,41],256],127259:[[40,76,41],256],127260:[[40,77,41],256],127261:[[40,78,41],256],127262:[[40,79,41],256],127263:[[40,80,41],256],127264:[[40,81,41],256],127265:[[40,82,41],256],127266:[[40,83,41],256],127267:[[40,84,41],256],127268:[[40,85,41],256],127269:[[40,86,41],256],127270:[[40,87,41],256],127271:[[40,88,41],256],127272:[[40,89,41],256],127273:[[40,90,41],256],127274:[[12308,83,12309],256],127275:[[67],256],127276:[[82],256],127277:[[67,68],256],127278:[[87,90],256],127280:[[65],256],127281:[[66],256],127282:[[67],256],127283:[[68],256],127284:[[69],256],127285:[[70],256],127286:[[71],256],127287:[[72],256],127288:[[73],256],127289:[[74],256],127290:[[75],256],127291:[[76],256],127292:[[77],256],127293:[[78],256],127294:[[79],256],127295:[[80],256],127296:[[81],256],127297:[[82],256],127298:[[83],256],127299:[[84],256],127300:[[85],256],127301:[[86],256],127302:[[87],256],127303:[[88],256],127304:[[89],256],127305:[[90],256],127306:[[72,86],256],127307:[[77,86],256],127308:[[83,68],256],127309:[[83,83],256],127310:[[80,80,86],256],127311:[[87,67],256],127338:[[77,67],256],127339:[[77,68],256],127376:[[68,74],256]},61952:{127488:[[12411,12363],256],127489:[[12467,12467],256],127490:[[12469],256],127504:[[25163],256],127505:[[23383],256],127506:[[21452],256],127507:[[12487],256],127508:[[20108],256],127509:[[22810],256],127510:[[35299],256],127511:[[22825],256],127512:[[20132],256],127513:[[26144],256],127514:[[28961],256],127515:[[26009],256],127516:[[21069],256],127517:[[24460],256],127518:[[20877],256],127519:[[26032],256],127520:[[21021],256],127521:[[32066],256],127522:[[29983],256],127523:[[36009],256],127524:[[22768],256],127525:[[21561],256],127526:[[28436],256],127527:[[25237],256],127528:[[25429],256],127529:[[19968],256],127530:[[19977],256],127531:[[36938],256],127532:[[24038],256],127533:[[20013],256],127534:[[21491],256],127535:[[25351],256],127536:[[36208],256],127537:[[25171],256],127538:[[31105],256],127539:[[31354],256],127540:[[21512],256],127541:[[28288],256],127542:[[26377],256],127543:[[26376],256],127544:[[30003],256],127545:[[21106],256],127546:[[21942],256],127552:[[12308,26412,12309],256],127553:[[12308,19977,12309],256],127554:[[12308,20108,12309],256],127555:[[12308,23433,12309],256],127556:[[12308,28857,12309],256],127557:[[12308,25171,12309],256],127558:[[12308,30423,12309],256],127559:[[12308,21213,12309],256],127560:[[12308,25943,12309],256],127568:[[24471],256],127569:[[21487],256]},63488:{194560:[[20029]],194561:[[20024]],194562:[[20033]],194563:[[131362]],194564:[[20320]],194565:[[20398]],194566:[[20411]],194567:[[20482]],194568:[[20602]],194569:[[20633]],194570:[[20711]],194571:[[20687]],194572:[[13470]],194573:[[132666]],194574:[[20813]],194575:[[20820]],194576:[[20836]],194577:[[20855]],194578:[[132380]],194579:[[13497]],194580:[[20839]],194581:[[20877]],194582:[[132427]],194583:[[20887]],194584:[[20900]],194585:[[20172]],194586:[[20908]],194587:[[20917]],194588:[[168415]],194589:[[20981]],194590:[[20995]],194591:[[13535]],194592:[[21051]],194593:[[21062]],194594:[[21106]],194595:[[21111]],194596:[[13589]],194597:[[21191]],194598:[[21193]],194599:[[21220]],194600:[[21242]],194601:[[21253]],194602:[[21254]],194603:[[21271]],194604:[[21321]],194605:[[21329]],194606:[[21338]],194607:[[21363]],194608:[[21373]],194609:[[21375]],194610:[[21375]],194611:[[21375]],194612:[[133676]],194613:[[28784]],194614:[[21450]],194615:[[21471]],194616:[[133987]],194617:[[21483]],194618:[[21489]],194619:[[21510]],194620:[[21662]],194621:[[21560]],194622:[[21576]],194623:[[21608]],194624:[[21666]],194625:[[21750]],194626:[[21776]],194627:[[21843]],194628:[[21859]],194629:[[21892]],194630:[[21892]],194631:[[21913]],194632:[[21931]],194633:[[21939]],194634:[[21954]],194635:[[22294]],194636:[[22022]],194637:[[22295]],194638:[[22097]],194639:[[22132]],194640:[[20999]],194641:[[22766]],194642:[[22478]],194643:[[22516]],194644:[[22541]],194645:[[22411]],194646:[[22578]],194647:[[22577]],194648:[[22700]],194649:[[136420]],194650:[[22770]],194651:[[22775]],194652:[[22790]],194653:[[22810]],194654:[[22818]],194655:[[22882]],194656:[[136872]],194657:[[136938]],194658:[[23020]],194659:[[23067]],194660:[[23079]],194661:[[23e3]],194662:[[23142]],194663:[[14062]],194664:[[14076]],194665:[[23304]],194666:[[23358]],194667:[[23358]],194668:[[137672]],194669:[[23491]],194670:[[23512]],194671:[[23527]],194672:[[23539]],194673:[[138008]],194674:[[23551]],194675:[[23558]],194676:[[24403]],194677:[[23586]],194678:[[14209]],194679:[[23648]],194680:[[23662]],194681:[[23744]],194682:[[23693]],194683:[[138724]],194684:[[23875]],194685:[[138726]],194686:[[23918]],194687:[[23915]],194688:[[23932]],194689:[[24033]],194690:[[24034]],194691:[[14383]],194692:[[24061]],194693:[[24104]],194694:[[24125]],194695:[[24169]],194696:[[14434]],194697:[[139651]],194698:[[14460]],194699:[[24240]],194700:[[24243]],194701:[[24246]],194702:[[24266]],194703:[[172946]],194704:[[24318]],194705:[[140081]],194706:[[140081]],194707:[[33281]],194708:[[24354]],194709:[[24354]],194710:[[14535]],194711:[[144056]],194712:[[156122]],194713:[[24418]],194714:[[24427]],194715:[[14563]],194716:[[24474]],194717:[[24525]],194718:[[24535]],194719:[[24569]],194720:[[24705]],194721:[[14650]],194722:[[14620]],194723:[[24724]],194724:[[141012]],194725:[[24775]],194726:[[24904]],194727:[[24908]],194728:[[24910]],194729:[[24908]],194730:[[24954]],194731:[[24974]],194732:[[25010]],194733:[[24996]],194734:[[25007]],194735:[[25054]],194736:[[25074]],194737:[[25078]],194738:[[25104]],194739:[[25115]],194740:[[25181]],194741:[[25265]],194742:[[25300]],194743:[[25424]],194744:[[142092]],194745:[[25405]],194746:[[25340]],194747:[[25448]],194748:[[25475]],194749:[[25572]],194750:[[142321]],194751:[[25634]],194752:[[25541]],194753:[[25513]],194754:[[14894]],194755:[[25705]],194756:[[25726]],194757:[[25757]],194758:[[25719]],194759:[[14956]],194760:[[25935]],194761:[[25964]],194762:[[143370]],194763:[[26083]],194764:[[26360]],194765:[[26185]],194766:[[15129]],194767:[[26257]],194768:[[15112]],194769:[[15076]],194770:[[20882]],194771:[[20885]],194772:[[26368]],194773:[[26268]],194774:[[32941]],194775:[[17369]],194776:[[26391]],194777:[[26395]],194778:[[26401]],194779:[[26462]],194780:[[26451]],194781:[[144323]],194782:[[15177]],194783:[[26618]],194784:[[26501]],194785:[[26706]],194786:[[26757]],194787:[[144493]],194788:[[26766]],194789:[[26655]],194790:[[26900]],194791:[[15261]],194792:[[26946]],194793:[[27043]],194794:[[27114]],194795:[[27304]],194796:[[145059]],194797:[[27355]],194798:[[15384]],194799:[[27425]],194800:[[145575]],194801:[[27476]],194802:[[15438]],194803:[[27506]],194804:[[27551]],194805:[[27578]],194806:[[27579]],194807:[[146061]],194808:[[138507]],194809:[[146170]],194810:[[27726]],194811:[[146620]],194812:[[27839]],194813:[[27853]],194814:[[27751]],194815:[[27926]]},63744:{63744:[[35912]],63745:[[26356]],63746:[[36554]],63747:[[36040]],63748:[[28369]],63749:[[20018]],63750:[[21477]],63751:[[40860]],63752:[[40860]],63753:[[22865]],63754:[[37329]],63755:[[21895]],63756:[[22856]],63757:[[25078]],63758:[[30313]],63759:[[32645]],63760:[[34367]],63761:[[34746]],63762:[[35064]],63763:[[37007]],63764:[[27138]],63765:[[27931]],63766:[[28889]],63767:[[29662]],63768:[[33853]],63769:[[37226]],63770:[[39409]],63771:[[20098]],63772:[[21365]],63773:[[27396]],63774:[[29211]],63775:[[34349]],63776:[[40478]],63777:[[23888]],63778:[[28651]],63779:[[34253]],63780:[[35172]],63781:[[25289]],63782:[[33240]],63783:[[34847]],63784:[[24266]],63785:[[26391]],63786:[[28010]],63787:[[29436]],63788:[[37070]],63789:[[20358]],63790:[[20919]],63791:[[21214]],63792:[[25796]],63793:[[27347]],63794:[[29200]],63795:[[30439]],63796:[[32769]],63797:[[34310]],63798:[[34396]],63799:[[36335]],63800:[[38706]],63801:[[39791]],63802:[[40442]],63803:[[30860]],63804:[[31103]],63805:[[32160]],63806:[[33737]],63807:[[37636]],63808:[[40575]],63809:[[35542]],63810:[[22751]],63811:[[24324]],63812:[[31840]],63813:[[32894]],63814:[[29282]],63815:[[30922]],63816:[[36034]],63817:[[38647]],63818:[[22744]],63819:[[23650]],63820:[[27155]],63821:[[28122]],63822:[[28431]],63823:[[32047]],63824:[[32311]],63825:[[38475]],63826:[[21202]],63827:[[32907]],63828:[[20956]],63829:[[20940]],63830:[[31260]],63831:[[32190]],63832:[[33777]],63833:[[38517]],63834:[[35712]],63835:[[25295]],63836:[[27138]],63837:[[35582]],63838:[[20025]],63839:[[23527]],63840:[[24594]],63841:[[29575]],63842:[[30064]],63843:[[21271]],63844:[[30971]],63845:[[20415]],63846:[[24489]],63847:[[19981]],63848:[[27852]],63849:[[25976]],63850:[[32034]],63851:[[21443]],63852:[[22622]],63853:[[30465]],63854:[[33865]],63855:[[35498]],63856:[[27578]],63857:[[36784]],63858:[[27784]],63859:[[25342]],63860:[[33509]],63861:[[25504]],63862:[[30053]],63863:[[20142]],63864:[[20841]],63865:[[20937]],63866:[[26753]],63867:[[31975]],63868:[[33391]],63869:[[35538]],63870:[[37327]],63871:[[21237]],63872:[[21570]],63873:[[22899]],63874:[[24300]],63875:[[26053]],63876:[[28670]],63877:[[31018]],63878:[[38317]],63879:[[39530]],63880:[[40599]],63881:[[40654]],63882:[[21147]],63883:[[26310]],63884:[[27511]],63885:[[36706]],63886:[[24180]],63887:[[24976]],63888:[[25088]],63889:[[25754]],63890:[[28451]],63891:[[29001]],63892:[[29833]],63893:[[31178]],63894:[[32244]],63895:[[32879]],63896:[[36646]],63897:[[34030]],63898:[[36899]],63899:[[37706]],63900:[[21015]],63901:[[21155]],63902:[[21693]],63903:[[28872]],63904:[[35010]],63905:[[35498]],63906:[[24265]],63907:[[24565]],63908:[[25467]],63909:[[27566]],63910:[[31806]],63911:[[29557]],63912:[[20196]],63913:[[22265]],63914:[[23527]],63915:[[23994]],63916:[[24604]],63917:[[29618]],63918:[[29801]],63919:[[32666]],63920:[[32838]],63921:[[37428]],63922:[[38646]],63923:[[38728]],63924:[[38936]],63925:[[20363]],63926:[[31150]],63927:[[37300]],63928:[[38584]],63929:[[24801]],63930:[[20102]],63931:[[20698]],63932:[[23534]],63933:[[23615]],63934:[[26009]],63935:[[27138]],63936:[[29134]],63937:[[30274]],63938:[[34044]],63939:[[36988]],63940:[[40845]],63941:[[26248]],63942:[[38446]],63943:[[21129]],63944:[[26491]],63945:[[26611]],63946:[[27969]],63947:[[28316]],63948:[[29705]],63949:[[30041]],63950:[[30827]],63951:[[32016]],63952:[[39006]],63953:[[20845]],63954:[[25134]],63955:[[38520]],63956:[[20523]],63957:[[23833]],63958:[[28138]],63959:[[36650]],63960:[[24459]],63961:[[24900]],63962:[[26647]],63963:[[29575]],63964:[[38534]],63965:[[21033]],63966:[[21519]],63967:[[23653]],63968:[[26131]],63969:[[26446]],63970:[[26792]],63971:[[27877]],63972:[[29702]],63973:[[30178]],63974:[[32633]],63975:[[35023]],63976:[[35041]],63977:[[37324]],63978:[[38626]],63979:[[21311]],63980:[[28346]],63981:[[21533]],63982:[[29136]],63983:[[29848]],63984:[[34298]],63985:[[38563]],63986:[[40023]],63987:[[40607]],63988:[[26519]],63989:[[28107]],63990:[[33256]],63991:[[31435]],63992:[[31520]],63993:[[31890]],63994:[[29376]],63995:[[28825]],63996:[[35672]],63997:[[20160]],63998:[[33590]],63999:[[21050]],194816:[[27966]],194817:[[28023]],194818:[[27969]],194819:[[28009]],194820:[[28024]],194821:[[28037]],194822:[[146718]],194823:[[27956]],194824:[[28207]],194825:[[28270]],194826:[[15667]],194827:[[28363]],194828:[[28359]],194829:[[147153]],194830:[[28153]],194831:[[28526]],194832:[[147294]],194833:[[147342]],194834:[[28614]],194835:[[28729]],194836:[[28702]],194837:[[28699]],194838:[[15766]],194839:[[28746]],194840:[[28797]],194841:[[28791]],194842:[[28845]],194843:[[132389]],194844:[[28997]],194845:[[148067]],194846:[[29084]],194847:[[148395]],194848:[[29224]],194849:[[29237]],194850:[[29264]],194851:[[149e3]],194852:[[29312]],194853:[[29333]],194854:[[149301]],194855:[[149524]],194856:[[29562]],194857:[[29579]],194858:[[16044]],194859:[[29605]],194860:[[16056]],194861:[[16056]],194862:[[29767]],194863:[[29788]],194864:[[29809]],194865:[[29829]],194866:[[29898]],194867:[[16155]],194868:[[29988]],194869:[[150582]],194870:[[30014]],194871:[[150674]],194872:[[30064]],194873:[[139679]],194874:[[30224]],194875:[[151457]],194876:[[151480]],194877:[[151620]],194878:[[16380]],194879:[[16392]],194880:[[30452]],194881:[[151795]],194882:[[151794]],194883:[[151833]],194884:[[151859]],194885:[[30494]],194886:[[30495]],194887:[[30495]],194888:[[30538]],194889:[[16441]],194890:[[30603]],194891:[[16454]],194892:[[16534]],194893:[[152605]],194894:[[30798]],194895:[[30860]],194896:[[30924]],194897:[[16611]],194898:[[153126]],194899:[[31062]],194900:[[153242]],194901:[[153285]],194902:[[31119]],194903:[[31211]],194904:[[16687]],194905:[[31296]],194906:[[31306]],194907:[[31311]],194908:[[153980]],194909:[[154279]],194910:[[154279]],194911:[[31470]],194912:[[16898]],194913:[[154539]],194914:[[31686]],194915:[[31689]],194916:[[16935]],194917:[[154752]],194918:[[31954]],194919:[[17056]],194920:[[31976]],194921:[[31971]],194922:[[32e3]],194923:[[155526]],194924:[[32099]],194925:[[17153]],194926:[[32199]],194927:[[32258]],194928:[[32325]],194929:[[17204]],194930:[[156200]],194931:[[156231]],194932:[[17241]],194933:[[156377]],194934:[[32634]],194935:[[156478]],194936:[[32661]],194937:[[32762]],194938:[[32773]],194939:[[156890]],194940:[[156963]],194941:[[32864]],194942:[[157096]],194943:[[32880]],194944:[[144223]],194945:[[17365]],194946:[[32946]],194947:[[33027]],194948:[[17419]],194949:[[33086]],194950:[[23221]],194951:[[157607]],194952:[[157621]],194953:[[144275]],194954:[[144284]],194955:[[33281]],194956:[[33284]],194957:[[36766]],194958:[[17515]],194959:[[33425]],194960:[[33419]],194961:[[33437]],194962:[[21171]],194963:[[33457]],194964:[[33459]],194965:[[33469]],194966:[[33510]],194967:[[158524]],194968:[[33509]],194969:[[33565]],194970:[[33635]],194971:[[33709]],194972:[[33571]],194973:[[33725]],194974:[[33767]],194975:[[33879]],194976:[[33619]],194977:[[33738]],194978:[[33740]],194979:[[33756]],194980:[[158774]],194981:[[159083]],194982:[[158933]],194983:[[17707]],194984:[[34033]],194985:[[34035]],194986:[[34070]],194987:[[160714]],194988:[[34148]],194989:[[159532]],194990:[[17757]],194991:[[17761]],194992:[[159665]],194993:[[159954]],194994:[[17771]],194995:[[34384]],194996:[[34396]],194997:[[34407]],194998:[[34409]],194999:[[34473]],195000:[[34440]],195001:[[34574]],195002:[[34530]],195003:[[34681]],195004:[[34600]],195005:[[34667]],195006:[[34694]],195007:[[17879]],195008:[[34785]],195009:[[34817]],195010:[[17913]],195011:[[34912]],195012:[[34915]],195013:[[161383]],195014:[[35031]],195015:[[35038]],195016:[[17973]],195017:[[35066]],195018:[[13499]],195019:[[161966]],195020:[[162150]],195021:[[18110]],195022:[[18119]],195023:[[35488]],195024:[[35565]],195025:[[35722]],195026:[[35925]],195027:[[162984]],195028:[[36011]],195029:[[36033]],195030:[[36123]],195031:[[36215]],195032:[[163631]],195033:[[133124]],195034:[[36299]],195035:[[36284]],195036:[[36336]],195037:[[133342]],195038:[[36564]],195039:[[36664]],195040:[[165330]],195041:[[165357]],195042:[[37012]],195043:[[37105]],195044:[[37137]],195045:[[165678]],195046:[[37147]],195047:[[37432]],195048:[[37591]],195049:[[37592]],195050:[[37500]],195051:[[37881]],195052:[[37909]],195053:[[166906]],195054:[[38283]],195055:[[18837]],195056:[[38327]],195057:[[167287]],195058:[[18918]],195059:[[38595]],195060:[[23986]],195061:[[38691]],195062:[[168261]],195063:[[168474]],195064:[[19054]],195065:[[19062]],195066:[[38880]],195067:[[168970]],195068:[[19122]],195069:[[169110]],195070:[[38923]],195071:[[38923]]},64000:{64000:[[20999]],64001:[[24230]],64002:[[25299]],64003:[[31958]],64004:[[23429]],64005:[[27934]],64006:[[26292]],64007:[[36667]],64008:[[34892]],64009:[[38477]],64010:[[35211]],64011:[[24275]],64012:[[20800]],64013:[[21952]],64016:[[22618]],64018:[[26228]],64021:[[20958]],64022:[[29482]],64023:[[30410]],64024:[[31036]],64025:[[31070]],64026:[[31077]],64027:[[31119]],64028:[[38742]],64029:[[31934]],64030:[[32701]],64032:[[34322]],64034:[[35576]],64037:[[36920]],64038:[[37117]],64042:[[39151]],64043:[[39164]],64044:[[39208]],64045:[[40372]],64046:[[37086]],64047:[[38583]],64048:[[20398]],64049:[[20711]],64050:[[20813]],64051:[[21193]],64052:[[21220]],64053:[[21329]],64054:[[21917]],64055:[[22022]],64056:[[22120]],64057:[[22592]],64058:[[22696]],64059:[[23652]],64060:[[23662]],64061:[[24724]],64062:[[24936]],64063:[[24974]],64064:[[25074]],64065:[[25935]],64066:[[26082]],64067:[[26257]],64068:[[26757]],64069:[[28023]],64070:[[28186]],64071:[[28450]],64072:[[29038]],64073:[[29227]],64074:[[29730]],64075:[[30865]],64076:[[31038]],64077:[[31049]],64078:[[31048]],64079:[[31056]],64080:[[31062]],64081:[[31069]],64082:[[31117]],64083:[[31118]],64084:[[31296]],64085:[[31361]],64086:[[31680]],64087:[[32244]],64088:[[32265]],64089:[[32321]],64090:[[32626]],64091:[[32773]],64092:[[33261]],64093:[[33401]],64094:[[33401]],64095:[[33879]],64096:[[35088]],64097:[[35222]],64098:[[35585]],64099:[[35641]],64100:[[36051]],64101:[[36104]],64102:[[36790]],64103:[[36920]],64104:[[38627]],64105:[[38911]],64106:[[38971]],64107:[[24693]],64108:[[148206]],64109:[[33304]],64112:[[20006]],64113:[[20917]],64114:[[20840]],64115:[[20352]],64116:[[20805]],64117:[[20864]],64118:[[21191]],64119:[[21242]],64120:[[21917]],64121:[[21845]],64122:[[21913]],64123:[[21986]],64124:[[22618]],64125:[[22707]],64126:[[22852]],64127:[[22868]],64128:[[23138]],64129:[[23336]],64130:[[24274]],64131:[[24281]],64132:[[24425]],64133:[[24493]],64134:[[24792]],64135:[[24910]],64136:[[24840]],64137:[[24974]],64138:[[24928]],64139:[[25074]],64140:[[25140]],64141:[[25540]],64142:[[25628]],64143:[[25682]],64144:[[25942]],64145:[[26228]],64146:[[26391]],64147:[[26395]],64148:[[26454]],64149:[[27513]],64150:[[27578]],64151:[[27969]],64152:[[28379]],64153:[[28363]],64154:[[28450]],64155:[[28702]],64156:[[29038]],64157:[[30631]],64158:[[29237]],64159:[[29359]],64160:[[29482]],64161:[[29809]],64162:[[29958]],64163:[[30011]],64164:[[30237]],64165:[[30239]],64166:[[30410]],64167:[[30427]],64168:[[30452]],64169:[[30538]],64170:[[30528]],64171:[[30924]],64172:[[31409]],64173:[[31680]],64174:[[31867]],64175:[[32091]],64176:[[32244]],64177:[[32574]],64178:[[32773]],64179:[[33618]],64180:[[33775]],64181:[[34681]],64182:[[35137]],64183:[[35206]],64184:[[35222]],64185:[[35519]],64186:[[35576]],64187:[[35531]],64188:[[35585]],64189:[[35582]],64190:[[35565]],64191:[[35641]],64192:[[35722]],64193:[[36104]],64194:[[36664]],64195:[[36978]],64196:[[37273]],64197:[[37494]],64198:[[38524]],64199:[[38627]],64200:[[38742]],64201:[[38875]],64202:[[38911]],64203:[[38923]],64204:[[38971]],64205:[[39698]],64206:[[40860]],64207:[[141386]],64208:[[141380]],64209:[[144341]],64210:[[15261]],64211:[[16408]],64212:[[16441]],64213:[[152137]],64214:[[154832]],64215:[[163539]],64216:[[40771]],64217:[[40846]],195072:[[38953]],195073:[[169398]],195074:[[39138]],195075:[[19251]],195076:[[39209]],195077:[[39335]],195078:[[39362]],195079:[[39422]],195080:[[19406]],195081:[[170800]],195082:[[39698]],195083:[[4e4]],195084:[[40189]],195085:[[19662]],195086:[[19693]],195087:[[40295]],195088:[[172238]],195089:[[19704]],195090:[[172293]],195091:[[172558]],195092:[[172689]],195093:[[40635]],195094:[[19798]],195095:[[40697]],195096:[[40702]],195097:[[40709]],195098:[[40719]],195099:[[40726]],195100:[[40763]],195101:[[173568]]},64256:{64256:[[102,102],256],64257:[[102,105],256],64258:[[102,108],256],64259:[[102,102,105],256],64260:[[102,102,108],256],64261:[[383,116],256],64262:[[115,116],256],64275:[[1396,1398],256],64276:[[1396,1381],256],64277:[[1396,1387],256],64278:[[1406,1398],256],64279:[[1396,1389],256],64285:[[1497,1460],512],64286:[null,26],64287:[[1522,1463],512],64288:[[1506],256],64289:[[1488],256],64290:[[1491],256],64291:[[1492],256],64292:[[1499],256],64293:[[1500],256],64294:[[1501],256],64295:[[1512],256],64296:[[1514],256],64297:[[43],256],64298:[[1513,1473],512],64299:[[1513,1474],512],64300:[[64329,1473],512],64301:[[64329,1474],512],64302:[[1488,1463],512],64303:[[1488,1464],512],64304:[[1488,1468],512],64305:[[1489,1468],512],64306:[[1490,1468],512],64307:[[1491,1468],512],64308:[[1492,1468],512],64309:[[1493,1468],512],64310:[[1494,1468],512],64312:[[1496,1468],512],64313:[[1497,1468],512],64314:[[1498,1468],512],64315:[[1499,1468],512],64316:[[1500,1468],512],64318:[[1502,1468],512],64320:[[1504,1468],512],64321:[[1505,1468],512],64323:[[1507,1468],512],64324:[[1508,1468],512],64326:[[1510,1468],512],64327:[[1511,1468],512],64328:[[1512,1468],512],64329:[[1513,1468],512],64330:[[1514,1468],512],64331:[[1493,1465],512],64332:[[1489,1471],512],64333:[[1499,1471],512],64334:[[1508,1471],512],64335:[[1488,1500],256],64336:[[1649],256],64337:[[1649],256],64338:[[1659],256],64339:[[1659],256],64340:[[1659],256],64341:[[1659],256],64342:[[1662],256],64343:[[1662],256],64344:[[1662],256],64345:[[1662],256],64346:[[1664],256],64347:[[1664],256],64348:[[1664],256],64349:[[1664],256],64350:[[1658],256],64351:[[1658],256],64352:[[1658],256],64353:[[1658],256],64354:[[1663],256],64355:[[1663],256],64356:[[1663],256],64357:[[1663],256],64358:[[1657],256],64359:[[1657],256],64360:[[1657],256],64361:[[1657],256],64362:[[1700],256],64363:[[1700],256],64364:[[1700],256],64365:[[1700],256],64366:[[1702],256],64367:[[1702],256],64368:[[1702],256],64369:[[1702],256],64370:[[1668],256],64371:[[1668],256],64372:[[1668],256],64373:[[1668],256],64374:[[1667],256],64375:[[1667],256],64376:[[1667],256],64377:[[1667],256],64378:[[1670],256],64379:[[1670],256],64380:[[1670],256],64381:[[1670],256],64382:[[1671],256],64383:[[1671],256],64384:[[1671],256],64385:[[1671],256],64386:[[1677],256],64387:[[1677],256],64388:[[1676],256],64389:[[1676],256],64390:[[1678],256],64391:[[1678],256],64392:[[1672],256],64393:[[1672],256],64394:[[1688],256],64395:[[1688],256],64396:[[1681],256],64397:[[1681],256],64398:[[1705],256],64399:[[1705],256],64400:[[1705],256],64401:[[1705],256],64402:[[1711],256],64403:[[1711],256],64404:[[1711],256],64405:[[1711],256],64406:[[1715],256],64407:[[1715],256],64408:[[1715],256],64409:[[1715],256],64410:[[1713],256],64411:[[1713],256],64412:[[1713],256],64413:[[1713],256],64414:[[1722],256],64415:[[1722],256],64416:[[1723],256],64417:[[1723],256],64418:[[1723],256],64419:[[1723],256],64420:[[1728],256],64421:[[1728],256],64422:[[1729],256],64423:[[1729],256],64424:[[1729],256],64425:[[1729],256],64426:[[1726],256],64427:[[1726],256],64428:[[1726],256],64429:[[1726],256],64430:[[1746],256],64431:[[1746],256],64432:[[1747],256],64433:[[1747],256],64467:[[1709],256],64468:[[1709],256],64469:[[1709],256],64470:[[1709],256],64471:[[1735],256],64472:[[1735],256],64473:[[1734],256],64474:[[1734],256],64475:[[1736],256],64476:[[1736],256],64477:[[1655],256],64478:[[1739],256],64479:[[1739],256],64480:[[1733],256],64481:[[1733],256],64482:[[1737],256],64483:[[1737],256],64484:[[1744],256],64485:[[1744],256],64486:[[1744],256],64487:[[1744],256],64488:[[1609],256],64489:[[1609],256],64490:[[1574,1575],256],64491:[[1574,1575],256],64492:[[1574,1749],256],64493:[[1574,1749],256],64494:[[1574,1608],256],64495:[[1574,1608],256],64496:[[1574,1735],256],64497:[[1574,1735],256],64498:[[1574,1734],256],64499:[[1574,1734],256],64500:[[1574,1736],256],64501:[[1574,1736],256],64502:[[1574,1744],256],64503:[[1574,1744],256],64504:[[1574,1744],256],64505:[[1574,1609],256],64506:[[1574,1609],256],64507:[[1574,1609],256],64508:[[1740],256],64509:[[1740],256],64510:[[1740],256],64511:[[1740],256]},64512:{64512:[[1574,1580],256],64513:[[1574,1581],256],64514:[[1574,1605],256],64515:[[1574,1609],256],64516:[[1574,1610],256],64517:[[1576,1580],256],64518:[[1576,1581],256],64519:[[1576,1582],256],64520:[[1576,1605],256],64521:[[1576,1609],256],64522:[[1576,1610],256],64523:[[1578,1580],256],64524:[[1578,1581],256],64525:[[1578,1582],256],64526:[[1578,1605],256],64527:[[1578,1609],256],64528:[[1578,1610],256],64529:[[1579,1580],256],64530:[[1579,1605],256],64531:[[1579,1609],256],64532:[[1579,1610],256],64533:[[1580,1581],256],64534:[[1580,1605],256],64535:[[1581,1580],256],64536:[[1581,1605],256],64537:[[1582,1580],256],64538:[[1582,1581],256],64539:[[1582,1605],256],64540:[[1587,1580],256],64541:[[1587,1581],256],64542:[[1587,1582],256],64543:[[1587,1605],256],64544:[[1589,1581],256],64545:[[1589,1605],256],64546:[[1590,1580],256],64547:[[1590,1581],256],64548:[[1590,1582],256],64549:[[1590,1605],256],64550:[[1591,1581],256],64551:[[1591,1605],256],64552:[[1592,1605],256],64553:[[1593,1580],256],64554:[[1593,1605],256],64555:[[1594,1580],256],64556:[[1594,1605],256],64557:[[1601,1580],256],64558:[[1601,1581],256],64559:[[1601,1582],256],64560:[[1601,1605],256],64561:[[1601,1609],256],64562:[[1601,1610],256],64563:[[1602,1581],256],64564:[[1602,1605],256],64565:[[1602,1609],256],64566:[[1602,1610],256],64567:[[1603,1575],256],64568:[[1603,1580],256],64569:[[1603,1581],256],64570:[[1603,1582],256],64571:[[1603,1604],256],64572:[[1603,1605],256],64573:[[1603,1609],256],64574:[[1603,1610],256],64575:[[1604,1580],256],64576:[[1604,1581],256],64577:[[1604,1582],256],64578:[[1604,1605],256],64579:[[1604,1609],256],64580:[[1604,1610],256],64581:[[1605,1580],256],64582:[[1605,1581],256],64583:[[1605,1582],256],64584:[[1605,1605],256],64585:[[1605,1609],256],64586:[[1605,1610],256],64587:[[1606,1580],256],64588:[[1606,1581],256],64589:[[1606,1582],256],64590:[[1606,1605],256],64591:[[1606,1609],256],64592:[[1606,1610],256],64593:[[1607,1580],256],64594:[[1607,1605],256],64595:[[1607,1609],256],64596:[[1607,1610],256],64597:[[1610,1580],256],64598:[[1610,1581],256],64599:[[1610,1582],256],64600:[[1610,1605],256],64601:[[1610,1609],256],64602:[[1610,1610],256],64603:[[1584,1648],256],64604:[[1585,1648],256],64605:[[1609,1648],256],64606:[[32,1612,1617],256],64607:[[32,1613,1617],256],64608:[[32,1614,1617],256],64609:[[32,1615,1617],256],64610:[[32,1616,1617],256],64611:[[32,1617,1648],256],64612:[[1574,1585],256],64613:[[1574,1586],256],64614:[[1574,1605],256],64615:[[1574,1606],256],64616:[[1574,1609],256],64617:[[1574,1610],256],64618:[[1576,1585],256],64619:[[1576,1586],256],64620:[[1576,1605],256],64621:[[1576,1606],256],64622:[[1576,1609],256],64623:[[1576,1610],256],64624:[[1578,1585],256],64625:[[1578,1586],256],64626:[[1578,1605],256],64627:[[1578,1606],256],64628:[[1578,1609],256],64629:[[1578,1610],256],64630:[[1579,1585],256],64631:[[1579,1586],256],64632:[[1579,1605],256],64633:[[1579,1606],256],64634:[[1579,1609],256],64635:[[1579,1610],256],64636:[[1601,1609],256],64637:[[1601,1610],256],64638:[[1602,1609],256],64639:[[1602,1610],256],64640:[[1603,1575],256],64641:[[1603,1604],256],64642:[[1603,1605],256],64643:[[1603,1609],256],64644:[[1603,1610],256],64645:[[1604,1605],256],64646:[[1604,1609],256],64647:[[1604,1610],256],64648:[[1605,1575],256],64649:[[1605,1605],256],64650:[[1606,1585],256],64651:[[1606,1586],256],64652:[[1606,1605],256],64653:[[1606,1606],256],64654:[[1606,1609],256],64655:[[1606,1610],256],64656:[[1609,1648],256],64657:[[1610,1585],256],64658:[[1610,1586],256],64659:[[1610,1605],256],64660:[[1610,1606],256],64661:[[1610,1609],256],64662:[[1610,1610],256],64663:[[1574,1580],256],64664:[[1574,1581],256],64665:[[1574,1582],256],64666:[[1574,1605],256],64667:[[1574,1607],256],64668:[[1576,1580],256],64669:[[1576,1581],256],64670:[[1576,1582],256],64671:[[1576,1605],256],64672:[[1576,1607],256],64673:[[1578,1580],256],64674:[[1578,1581],256],64675:[[1578,1582],256],64676:[[1578,1605],256],64677:[[1578,1607],256],64678:[[1579,1605],256],64679:[[1580,1581],256],64680:[[1580,1605],256],64681:[[1581,1580],256],64682:[[1581,1605],256],64683:[[1582,1580],256],64684:[[1582,1605],256],64685:[[1587,1580],256],64686:[[1587,1581],256],64687:[[1587,1582],256],64688:[[1587,1605],256],64689:[[1589,1581],256],64690:[[1589,1582],256],64691:[[1589,1605],256],64692:[[1590,1580],256],64693:[[1590,1581],256],64694:[[1590,1582],256],64695:[[1590,1605],256],64696:[[1591,1581],256],64697:[[1592,1605],256],64698:[[1593,1580],256],64699:[[1593,1605],256],64700:[[1594,1580],256],64701:[[1594,1605],256],64702:[[1601,1580],256],64703:[[1601,1581],256],64704:[[1601,1582],256],64705:[[1601,1605],256],64706:[[1602,1581],256],64707:[[1602,1605],256],64708:[[1603,1580],256],64709:[[1603,1581],256],64710:[[1603,1582],256],64711:[[1603,1604],256],64712:[[1603,1605],256],64713:[[1604,1580],256],64714:[[1604,1581],256],64715:[[1604,1582],256],64716:[[1604,1605],256],64717:[[1604,1607],256],64718:[[1605,1580],256],64719:[[1605,1581],256],64720:[[1605,1582],256],64721:[[1605,1605],256],64722:[[1606,1580],256],64723:[[1606,1581],256],64724:[[1606,1582],256],64725:[[1606,1605],256],64726:[[1606,1607],256],64727:[[1607,1580],256],64728:[[1607,1605],256],64729:[[1607,1648],256],64730:[[1610,1580],256],64731:[[1610,1581],256],64732:[[1610,1582],256],64733:[[1610,1605],256],64734:[[1610,1607],256],64735:[[1574,1605],256],64736:[[1574,1607],256],64737:[[1576,1605],256],64738:[[1576,1607],256],64739:[[1578,1605],256],64740:[[1578,1607],256],64741:[[1579,1605],256],64742:[[1579,1607],256],64743:[[1587,1605],256],64744:[[1587,1607],256],64745:[[1588,1605],256],64746:[[1588,1607],256],64747:[[1603,1604],256],64748:[[1603,1605],256],64749:[[1604,1605],256],64750:[[1606,1605],256],64751:[[1606,1607],256],64752:[[1610,1605],256],64753:[[1610,1607],256],64754:[[1600,1614,1617],256],64755:[[1600,1615,1617],256],64756:[[1600,1616,1617],256],64757:[[1591,1609],256],64758:[[1591,1610],256],64759:[[1593,1609],256],64760:[[1593,1610],256],64761:[[1594,1609],256],64762:[[1594,1610],256],64763:[[1587,1609],256],64764:[[1587,1610],256],64765:[[1588,1609],256],64766:[[1588,1610],256],64767:[[1581,1609],256]},64768:{64768:[[1581,1610],256],64769:[[1580,1609],256],64770:[[1580,1610],256],64771:[[1582,1609],256],64772:[[1582,1610],256],64773:[[1589,1609],256],64774:[[1589,1610],256],64775:[[1590,1609],256],64776:[[1590,1610],256],64777:[[1588,1580],256],64778:[[1588,1581],256],64779:[[1588,1582],256],64780:[[1588,1605],256],64781:[[1588,1585],256],64782:[[1587,1585],256],64783:[[1589,1585],256],64784:[[1590,1585],256],64785:[[1591,1609],256],64786:[[1591,1610],256],64787:[[1593,1609],256],64788:[[1593,1610],256],64789:[[1594,1609],256],64790:[[1594,1610],256],64791:[[1587,1609],256],64792:[[1587,1610],256],64793:[[1588,1609],256],64794:[[1588,1610],256],64795:[[1581,1609],256],64796:[[1581,1610],256],64797:[[1580,1609],256],64798:[[1580,1610],256],64799:[[1582,1609],256],64800:[[1582,1610],256],64801:[[1589,1609],256],64802:[[1589,1610],256],64803:[[1590,1609],256],64804:[[1590,1610],256],64805:[[1588,1580],256],64806:[[1588,1581],256],64807:[[1588,1582],256],64808:[[1588,1605],256],64809:[[1588,1585],256],64810:[[1587,1585],256],64811:[[1589,1585],256],64812:[[1590,1585],256],64813:[[1588,1580],256],64814:[[1588,1581],256],64815:[[1588,1582],256],64816:[[1588,1605],256],64817:[[1587,1607],256],64818:[[1588,1607],256],64819:[[1591,1605],256],64820:[[1587,1580],256],64821:[[1587,1581],256],64822:[[1587,1582],256],64823:[[1588,1580],256],64824:[[1588,1581],256],64825:[[1588,1582],256],64826:[[1591,1605],256],64827:[[1592,1605],256],64828:[[1575,1611],256],64829:[[1575,1611],256],64848:[[1578,1580,1605],256],64849:[[1578,1581,1580],256],64850:[[1578,1581,1580],256],64851:[[1578,1581,1605],256],64852:[[1578,1582,1605],256],64853:[[1578,1605,1580],256],64854:[[1578,1605,1581],256],64855:[[1578,1605,1582],256],64856:[[1580,1605,1581],256],64857:[[1580,1605,1581],256],64858:[[1581,1605,1610],256],64859:[[1581,1605,1609],256],64860:[[1587,1581,1580],256],64861:[[1587,1580,1581],256],64862:[[1587,1580,1609],256],64863:[[1587,1605,1581],256],64864:[[1587,1605,1581],256],64865:[[1587,1605,1580],256],64866:[[1587,1605,1605],256],64867:[[1587,1605,1605],256],64868:[[1589,1581,1581],256],64869:[[1589,1581,1581],256],64870:[[1589,1605,1605],256],64871:[[1588,1581,1605],256],64872:[[1588,1581,1605],256],64873:[[1588,1580,1610],256],64874:[[1588,1605,1582],256],64875:[[1588,1605,1582],256],64876:[[1588,1605,1605],256],64877:[[1588,1605,1605],256],64878:[[1590,1581,1609],256],64879:[[1590,1582,1605],256],64880:[[1590,1582,1605],256],64881:[[1591,1605,1581],256],64882:[[1591,1605,1581],256],64883:[[1591,1605,1605],256],64884:[[1591,1605,1610],256],64885:[[1593,1580,1605],256],64886:[[1593,1605,1605],256],64887:[[1593,1605,1605],256],64888:[[1593,1605,1609],256],64889:[[1594,1605,1605],256],64890:[[1594,1605,1610],256],64891:[[1594,1605,1609],256],64892:[[1601,1582,1605],256],64893:[[1601,1582,1605],256],64894:[[1602,1605,1581],256],64895:[[1602,1605,1605],256],64896:[[1604,1581,1605],256],64897:[[1604,1581,1610],256],64898:[[1604,1581,1609],256],64899:[[1604,1580,1580],256],64900:[[1604,1580,1580],256],64901:[[1604,1582,1605],256],64902:[[1604,1582,1605],256],64903:[[1604,1605,1581],256],64904:[[1604,1605,1581],256],64905:[[1605,1581,1580],256],64906:[[1605,1581,1605],256],64907:[[1605,1581,1610],256],64908:[[1605,1580,1581],256],64909:[[1605,1580,1605],256],64910:[[1605,1582,1580],256],64911:[[1605,1582,1605],256],64914:[[1605,1580,1582],256],64915:[[1607,1605,1580],256],64916:[[1607,1605,1605],256],64917:[[1606,1581,1605],256],64918:[[1606,1581,1609],256],64919:[[1606,1580,1605],256],64920:[[1606,1580,1605],256],64921:[[1606,1580,1609],256],64922:[[1606,1605,1610],256],64923:[[1606,1605,1609],256],64924:[[1610,1605,1605],256],64925:[[1610,1605,1605],256],64926:[[1576,1582,1610],256],64927:[[1578,1580,1610],256],64928:[[1578,1580,1609],256],64929:[[1578,1582,1610],256],64930:[[1578,1582,1609],256],64931:[[1578,1605,1610],256],64932:[[1578,1605,1609],256],64933:[[1580,1605,1610],256],64934:[[1580,1581,1609],256],64935:[[1580,1605,1609],256],64936:[[1587,1582,1609],256],64937:[[1589,1581,1610],256],64938:[[1588,1581,1610],256],64939:[[1590,1581,1610],256],64940:[[1604,1580,1610],256],64941:[[1604,1605,1610],256],64942:[[1610,1581,1610],256],64943:[[1610,1580,1610],256],64944:[[1610,1605,1610],256],64945:[[1605,1605,1610],256],64946:[[1602,1605,1610],256],64947:[[1606,1581,1610],256],64948:[[1602,1605,1581],256],64949:[[1604,1581,1605],256],64950:[[1593,1605,1610],256],64951:[[1603,1605,1610],256],64952:[[1606,1580,1581],256],64953:[[1605,1582,1610],256],64954:[[1604,1580,1605],256],64955:[[1603,1605,1605],256],64956:[[1604,1580,1605],256],64957:[[1606,1580,1581],256],64958:[[1580,1581,1610],256],64959:[[1581,1580,1610],256],64960:[[1605,1580,1610],256],64961:[[1601,1605,1610],256],64962:[[1576,1581,1610],256],64963:[[1603,1605,1605],256],64964:[[1593,1580,1605],256],64965:[[1589,1605,1605],256],64966:[[1587,1582,1610],256],64967:[[1606,1580,1610],256],65008:[[1589,1604,1746],256],65009:[[1602,1604,1746],256],65010:[[1575,1604,1604,1607],256],65011:[[1575,1603,1576,1585],256],65012:[[1605,1581,1605,1583],256],65013:[[1589,1604,1593,1605],256],65014:[[1585,1587,1608,1604],256],65015:[[1593,1604,1610,1607],256],65016:[[1608,1587,1604,1605],256],65017:[[1589,1604,1609],256],65018:[[1589,1604,1609,32,1575,1604,1604,1607,32,1593,1604,1610,1607,32,1608,1587,1604,1605],256],65019:[[1580,1604,32,1580,1604,1575,1604,1607],256],65020:[[1585,1740,1575,1604],256]},65024:{65040:[[44],256],65041:[[12289],256],65042:[[12290],256],65043:[[58],256],65044:[[59],256],65045:[[33],256],65046:[[63],256],65047:[[12310],256],65048:[[12311],256],65049:[[8230],256],65056:[null,230],65057:[null,230],65058:[null,230],65059:[null,230],65060:[null,230],65061:[null,230],65062:[null,230],65063:[null,220],65064:[null,220],65065:[null,220],65066:[null,220],65067:[null,220],65068:[null,220],65069:[null,220],65072:[[8229],256],65073:[[8212],256],65074:[[8211],256],65075:[[95],256],65076:[[95],256],65077:[[40],256],65078:[[41],256],65079:[[123],256],65080:[[125],256],65081:[[12308],256],65082:[[12309],256],65083:[[12304],256],65084:[[12305],256],65085:[[12298],256],65086:[[12299],256],65087:[[12296],256],65088:[[12297],256],65089:[[12300],256],65090:[[12301],256],65091:[[12302],256],65092:[[12303],256],65095:[[91],256],65096:[[93],256],65097:[[8254],256],65098:[[8254],256],65099:[[8254],256],65100:[[8254],256],65101:[[95],256],65102:[[95],256],65103:[[95],256],65104:[[44],256],65105:[[12289],256],65106:[[46],256],65108:[[59],256],65109:[[58],256],65110:[[63],256],65111:[[33],256],65112:[[8212],256],65113:[[40],256],65114:[[41],256],65115:[[123],256],65116:[[125],256],65117:[[12308],256],65118:[[12309],256],65119:[[35],256],65120:[[38],256],65121:[[42],256],65122:[[43],256],65123:[[45],256],65124:[[60],256],65125:[[62],256],65126:[[61],256],65128:[[92],256],65129:[[36],256],65130:[[37],256],65131:[[64],256],65136:[[32,1611],256],65137:[[1600,1611],256],65138:[[32,1612],256],65140:[[32,1613],256],65142:[[32,1614],256],65143:[[1600,1614],256],65144:[[32,1615],256],65145:[[1600,1615],256],65146:[[32,1616],256],65147:[[1600,1616],256],65148:[[32,1617],256],65149:[[1600,1617],256],65150:[[32,1618],256],65151:[[1600,1618],256],65152:[[1569],256],65153:[[1570],256],65154:[[1570],256],65155:[[1571],256],65156:[[1571],256],65157:[[1572],256],65158:[[1572],256],65159:[[1573],256],65160:[[1573],256],65161:[[1574],256],65162:[[1574],256],65163:[[1574],256],65164:[[1574],256],65165:[[1575],256],65166:[[1575],256],65167:[[1576],256],65168:[[1576],256],65169:[[1576],256],65170:[[1576],256],65171:[[1577],256],65172:[[1577],256],65173:[[1578],256],65174:[[1578],256],65175:[[1578],256],65176:[[1578],256],65177:[[1579],256],65178:[[1579],256],65179:[[1579],256],65180:[[1579],256],65181:[[1580],256],65182:[[1580],256],65183:[[1580],256],65184:[[1580],256],65185:[[1581],256],65186:[[1581],256],65187:[[1581],256],65188:[[1581],256],65189:[[1582],256],65190:[[1582],256],65191:[[1582],256],65192:[[1582],256],65193:[[1583],256],65194:[[1583],256],65195:[[1584],256],65196:[[1584],256],65197:[[1585],256],65198:[[1585],256],65199:[[1586],256],65200:[[1586],256],65201:[[1587],256],65202:[[1587],256],65203:[[1587],256],65204:[[1587],256],65205:[[1588],256],65206:[[1588],256],65207:[[1588],256],65208:[[1588],256],65209:[[1589],256],65210:[[1589],256],65211:[[1589],256],65212:[[1589],256],65213:[[1590],256],65214:[[1590],256],65215:[[1590],256],65216:[[1590],256],65217:[[1591],256],65218:[[1591],256],65219:[[1591],256],65220:[[1591],256],65221:[[1592],256],65222:[[1592],256],65223:[[1592],256],65224:[[1592],256],65225:[[1593],256],65226:[[1593],256],65227:[[1593],256],65228:[[1593],256],65229:[[1594],256],65230:[[1594],256],65231:[[1594],256],65232:[[1594],256],65233:[[1601],256],65234:[[1601],256],65235:[[1601],256],65236:[[1601],256],65237:[[1602],256],65238:[[1602],256],65239:[[1602],256],65240:[[1602],256],65241:[[1603],256],65242:[[1603],256],65243:[[1603],256],65244:[[1603],256],65245:[[1604],256],65246:[[1604],256],65247:[[1604],256],65248:[[1604],256],65249:[[1605],256],65250:[[1605],256],65251:[[1605],256],65252:[[1605],256],65253:[[1606],256],65254:[[1606],256],65255:[[1606],256],65256:[[1606],256],65257:[[1607],256],65258:[[1607],256],65259:[[1607],256],65260:[[1607],256],65261:[[1608],256],65262:[[1608],256],65263:[[1609],256],65264:[[1609],256],65265:[[1610],256],65266:[[1610],256],65267:[[1610],256],65268:[[1610],256],65269:[[1604,1570],256],65270:[[1604,1570],256],65271:[[1604,1571],256],65272:[[1604,1571],256],65273:[[1604,1573],256],65274:[[1604,1573],256],65275:[[1604,1575],256],65276:[[1604,1575],256]},65280:{65281:[[33],256],65282:[[34],256],65283:[[35],256],65284:[[36],256],65285:[[37],256],65286:[[38],256],65287:[[39],256],65288:[[40],256],65289:[[41],256],65290:[[42],256],65291:[[43],256],65292:[[44],256],65293:[[45],256],65294:[[46],256],65295:[[47],256],65296:[[48],256],65297:[[49],256],65298:[[50],256],65299:[[51],256],65300:[[52],256],65301:[[53],256],65302:[[54],256],65303:[[55],256],65304:[[56],256],65305:[[57],256],65306:[[58],256],65307:[[59],256],65308:[[60],256],65309:[[61],256],65310:[[62],256],65311:[[63],256],65312:[[64],256],65313:[[65],256],65314:[[66],256],65315:[[67],256],65316:[[68],256],65317:[[69],256],65318:[[70],256],65319:[[71],256],65320:[[72],256],65321:[[73],256],65322:[[74],256],65323:[[75],256],65324:[[76],256],65325:[[77],256],65326:[[78],256],65327:[[79],256],65328:[[80],256],65329:[[81],256],65330:[[82],256],65331:[[83],256],65332:[[84],256],65333:[[85],256],65334:[[86],256],65335:[[87],256],65336:[[88],256],65337:[[89],256],65338:[[90],256],65339:[[91],256],65340:[[92],256],65341:[[93],256],65342:[[94],256],65343:[[95],256],65344:[[96],256],65345:[[97],256],65346:[[98],256],65347:[[99],256],65348:[[100],256],65349:[[101],256],65350:[[102],256],65351:[[103],256],65352:[[104],256],65353:[[105],256],65354:[[106],256],65355:[[107],256],65356:[[108],256],65357:[[109],256],65358:[[110],256],65359:[[111],256],65360:[[112],256],65361:[[113],256],65362:[[114],256],65363:[[115],256],65364:[[116],256],65365:[[117],256],65366:[[118],256],65367:[[119],256],65368:[[120],256],65369:[[121],256],65370:[[122],256],65371:[[123],256],65372:[[124],256],65373:[[125],256],65374:[[126],256],65375:[[10629],256],65376:[[10630],256],65377:[[12290],256],65378:[[12300],256],65379:[[12301],256],65380:[[12289],256],65381:[[12539],256],65382:[[12530],256],65383:[[12449],256],65384:[[12451],256],65385:[[12453],256],65386:[[12455],256],65387:[[12457],256],65388:[[12515],256],65389:[[12517],256],65390:[[12519],256],65391:[[12483],256],65392:[[12540],256],65393:[[12450],256],65394:[[12452],256],65395:[[12454],256],65396:[[12456],256],65397:[[12458],256],65398:[[12459],256],65399:[[12461],256],65400:[[12463],256],65401:[[12465],256],65402:[[12467],256],65403:[[12469],256],65404:[[12471],256],65405:[[12473],256],65406:[[12475],256],65407:[[12477],256],65408:[[12479],256],65409:[[12481],256],65410:[[12484],256],65411:[[12486],256],65412:[[12488],256],65413:[[12490],256],65414:[[12491],256],65415:[[12492],256],65416:[[12493],256],65417:[[12494],256],65418:[[12495],256],65419:[[12498],256],65420:[[12501],256],65421:[[12504],256],65422:[[12507],256],65423:[[12510],256],65424:[[12511],256],65425:[[12512],256],65426:[[12513],256],65427:[[12514],256],65428:[[12516],256],65429:[[12518],256],65430:[[12520],256],65431:[[12521],256],65432:[[12522],256],65433:[[12523],256],65434:[[12524],256],65435:[[12525],256],65436:[[12527],256],65437:[[12531],256],65438:[[12441],256],65439:[[12442],256],65440:[[12644],256],65441:[[12593],256],65442:[[12594],256],65443:[[12595],256],65444:[[12596],256],65445:[[12597],256],65446:[[12598],256],65447:[[12599],256],65448:[[12600],256],65449:[[12601],256],65450:[[12602],256],65451:[[12603],256],65452:[[12604],256],65453:[[12605],256],65454:[[12606],256],65455:[[12607],256],65456:[[12608],256],65457:[[12609],256],65458:[[12610],256],65459:[[12611],256],65460:[[12612],256],65461:[[12613],256],65462:[[12614],256],65463:[[12615],256],65464:[[12616],256],65465:[[12617],256],65466:[[12618],256],65467:[[12619],256],65468:[[12620],256],65469:[[12621],256],65470:[[12622],256],65474:[[12623],256],65475:[[12624],256],65476:[[12625],256],65477:[[12626],256],65478:[[12627],256],65479:[[12628],256],65482:[[12629],256],65483:[[12630],256],65484:[[12631],256],65485:[[12632],256],65486:[[12633],256],65487:[[12634],256],65490:[[12635],256],65491:[[12636],256],65492:[[12637],256],65493:[[12638],256],65494:[[12639],256],65495:[[12640],256],65498:[[12641],256],65499:[[12642],256],65500:[[12643],256],65504:[[162],256],65505:[[163],256],65506:[[172],256],65507:[[175],256],65508:[[166],256],65509:[[165],256],65510:[[8361],256],65512:[[9474],256],65513:[[8592],256],65514:[[8593],256],65515:[[8594],256],65516:[[8595],256],65517:[[9632],256],65518:[[9675],256]}}}],["bcoin","/lib/hd/private.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(105,r),c=__browser_require__(134,r),u=__browser_require__(94,r),f=__browser_require__(33,r),l=__browser_require__(136,r),d=__browser_require__(41,r),p=__browser_require__(38,r),b=__browser_require__(14,r),g=__browser_require__(17,r),m=__browser_require__(138,r),_=__browser_require__(234,r),w=__browser_require__(133,r),y=Buffer.from("Bitcoin seed","ascii");class v{constructor(e){this.depth=0,this.parentFingerPrint=0,this.childIndex=0,this.chainCode=g.ZERO_HASH,this.privateKey=g.ZERO_HASH,this.publicKey=m.ZERO_KEY,this.fingerPrint=-1,this._hdPublicKey=null,e&&this.fromOptions(e)}fromOptions(e){return o(e,"No options for HD private key."),o((255&e.depth)===e.depth),o(e.parentFingerPrint>>>0===e.parentFingerPrint),o(e.childIndex>>>0===e.childIndex),o(null!=e.chainCode&&!0===e.chainCode._isBuffer),o(null!=e.privateKey&&!0===e.privateKey._isBuffer),this.depth=e.depth,this.parentFingerPrint=e.parentFingerPrint,this.childIndex=e.childIndex,this.chainCode=e.chainCode,this.privateKey=e.privateKey,this.publicKey=p.publicKeyCreate(e.privateKey,!0),this}static fromOptions(e){return(new this).fromOptions(e)}toPublic(){let e=this._hdPublicKey;return e||((e=new w).depth=this.depth,e.parentFingerPrint=this.parentFingerPrint,e.childIndex=this.childIndex,e.chainCode=this.chainCode,e.publicKey=this.publicKey,this._hdPublicKey=e),e}xprivkey(e){return this.toBase58(e)}xpubkey(e){return this.toPublic().xpubkey(e)}destroy(e){this.depth=0,this.childIndex=0,this.parentFingerPrint=0,l(this.chainCode),l(this.privateKey),l(this.publicKey),this.fingerPrint=-1,this._hdPublicKey&&(e&&this._hdPublicKey.destroy(),this._hdPublicKey=null)}derive(e,t){if(o("number"==typeof e),e>>>0!==e)throw new Error("Index out of range.");if(this.depth>=255)throw new Error("Depth too high.");t&&(e|=m.HARDENED,e>>>=0);const r=this.getID(e),i=m.cache.get(r);if(i)return i;const s=a.pool(37);e&m.HARDENED?(s.writeU8(0),s.writeBytes(this.privateKey),s.writeU32BE(e)):(s.writeBytes(this.publicKey),s.writeU32BE(e));const n=s.render(),h=c.mac(n,this.chainCode),f=h.slice(0,32),l=h.slice(32,64);let d;try{d=p.privateKeyTweakAdd(this.privateKey,f)}catch(t){return this.derive(e+1)}if(-1===this.fingerPrint){const e=u.digest(this.publicKey);this.fingerPrint=e.readUInt32BE(0,!0)}const b=new this.constructor;return b.depth=this.depth+1,b.parentFingerPrint=this.fingerPrint,b.childIndex=e,b.chainCode=l,b.privateKey=d,b.publicKey=p.publicKeyCreate(d,!0),m.cache.set(r,b),b}getID(e){return"v"+this.publicKey.toString("hex")+e}deriveAccount(e,t,r){return o(e>>>0===e,"Purpose must be a number."),o(t>>>0===t,"Coin type must be a number."),o(r>>>0===r,"Account index must be a number."),o(this.isMaster(),"Cannot derive account index."),this.derive(e,!0).derive(t,!0).derive(r,!0)}isMaster(){return m.isMaster(this)}isAccount(e){return m.isAccount(this,e)}static isBase58(e,t){if("string"!=typeof e)return!1;if(e.length<4)return!1;const r=e.substring(0,4);try{return b.fromPrivate58(r,t),!0}catch(e){return!1}}static isRaw(e,t){if(null==e||!0!==e._isBuffer)return!1;if(e.length<4)return!1;const r=e.readUInt32BE(0,!0);try{return b.fromPrivate(r,t),!0}catch(e){return!1}}static isValidPath(e){try{return m.parsePath(e,!0),!0}catch(e){return!1}}derivePath(e){const t=m.parsePath(e,!0);let r=this;for(const e of t)r=r.derive(e);return r}equals(e){return o(v.isHDPrivateKey(e)),this.depth===e.depth&&this.parentFingerPrint===e.parentFingerPrint&&this.childIndex===e.childIndex&&this.chainCode.equals(e.chainCode)&&this.privateKey.equals(e.privateKey)}compare(e){o(v.isHDPrivateKey(e));let t=this.depth-e.depth;return 0!==t?t:0!==(t=this.parentFingerPrint-e.parentFingerPrint)?t:0!==(t=this.childIndex-e.childIndex)?t:0!==(t=this.chainCode.compare(e.chainCode))?t:0!==(t=this.privateKey.compare(e.privateKey))?t:0}fromSeed(e){if(o(null!=e&&!0===e._isBuffer),8*e.length<m.MIN_ENTROPY||8*e.length>m.MAX_ENTROPY)throw new Error("Entropy not in range.");const t=c.mac(e,y),r=t.slice(0,32),i=t.slice(32,64);if(!p.privateKeyVerify(r))throw new Error("Master private key is invalid.");return this.depth=0,this.parentFingerPrint=0,this.childIndex=0,this.chainCode=i,this.privateKey=r,this.publicKey=p.publicKeyCreate(r,!0),this}static fromSeed(e){return(new this).fromSeed(e)}fromMnemonic(e,t){return o(e instanceof _),this.fromSeed(e.toSeed(t))}static fromMnemonic(e,t){return(new this).fromMnemonic(e,t)}fromPhrase(e){const t=_.fromPhrase(e);return this.fromMnemonic(t),this}static fromPhrase(e){return(new this).fromPhrase(e)}fromKey(e,t){return o(null!=e&&!0===e._isBuffer&&32===e.length),o(null!=t&&!0===t._isBuffer&&32===t.length),this.depth=0,this.parentFingerPrint=0,this.childIndex=0,this.chainCode=t,this.privateKey=e,this.publicKey=p.publicKeyCreate(e,!0),this}static fromKey(e,t){return(new this).fromKey(e,t)}static generate(){const e=p.privateKeyGenerate(),t=d.randomBytes(32);return v.fromKey(e,t)}fromBase58(e,t){return o("string"==typeof e),this.fromRaw(h.decode(e),t)}fromReader(e,t){const r=e.readU32BE();return b.fromPrivate(r,t),this.depth=e.readU8(),this.parentFingerPrint=e.readU32BE(),this.childIndex=e.readU32BE(),this.chainCode=e.readBytes(32),o(0===e.readU8()),this.privateKey=e.readBytes(32),this.publicKey=p.publicKeyCreate(this.privateKey,!0),e.verifyChecksum(f.digest),this}fromRaw(e,t){return this.fromReader(a.read(e),t)}toBase58(e){return h.encode(this.toRaw(e))}getSize(){return 82}toWriter(e,t){return t=b.get(t),e.writeU32BE(t.keyPrefix.xprivkey),e.writeU8(this.depth),e.writeU32BE(this.parentFingerPrint),e.writeU32BE(this.childIndex),e.writeBytes(this.chainCode),e.writeU8(0),e.writeBytes(this.privateKey),e.writeChecksum(f.digest),e}toRaw(e){return this.toWriter(a.write(82),e).render()}static fromBase58(e,t){return(new this).fromBase58(e,t)}static fromReader(e,t){return(new this).fromReader(e,t)}static fromRaw(e,t){return(new this).fromRaw(e,t)}toJSON(e){return{xprivkey:this.xprivkey(e)}}fromJSON(e,t){return o(e.xprivkey,"Could not handle key JSON."),this.fromBase58(e.xprivkey,t),this}static fromJSON(e,t){return(new this).fromJSON(e,t)}static isHDPrivateKey(e){return e instanceof v}}r.exports=v}],["bcoin","/lib/indexer/index.js",function(e,t,r,i,s,n){"use strict";e.Indexer=__browser_require__(251,r),e.TXIndexer=__browser_require__(256,r),e.AddrIndexer=__browser_require__(258,r)}],["bcoin","/lib/indexer/indexer.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(44,r),a=__browser_require__(195,r),h=__browser_require__(252,r),c=__browser_require__(24,r),u=__browser_require__(19,r),f=__browser_require__(198,r),l=__browser_require__(14,r),d=__browser_require__(20,r),p=__browser_require__(255,r),b=__browser_require__(128,r),g=__browser_require__(183,r),{ZERO_HASH:m}=__browser_require__(17,r);class _{constructor(e,t){this.hash=e||m,this.height=t||0,o(null!=this.hash&&!0===this.hash._isBuffer&&32===this.hash.length),o(Number.isInteger(this.height))}}class w{constructor(e,t){this.module=e,this.network=l.primary,this.logger=f.global,this.blocks=null,this.chain=null,this.prefix=null,this.location=null,this.memory=!0,this.maxFiles=64,this.cacheSize=16<<20,this.compression=!0,t&&this.fromOptions(t)}fromOptions(e){return o(e.blocks&&"object"==typeof e.blocks,"Indexer requires a blockstore."),o(e.chain&&"object"==typeof e.chain,"Indexer requires chain."),o(!e.prune,"Can not index while pruned."),this.blocks=e.blocks,this.chain=e.chain,null!=e.network&&(this.network=l.get(e.network)),null!=e.logger&&(o("object"==typeof e.logger),this.logger=e.logger),null!=e.prefix&&(o("string"==typeof e.prefix),this.prefix=e.prefix,this.prefix=a.join(this.prefix,"index"),this.location=a.join(this.prefix,this.module)),null!=e.location&&(o("string"==typeof e.location),this.location=e.location),null!=e.memory&&(o("boolean"==typeof e.memory),this.memory=e.memory),null!=e.maxFiles&&(o(e.maxFiles>>>0===e.maxFiles),this.maxFiles=e.maxFiles),null!=e.cacheSize&&(o(Number.isSafeInteger(e.cacheSize)&&e.cacheSize>=0),this.cacheSize=e.cacheSize),null!=e.compression&&(o("boolean"==typeof e.compression),this.compression=e.compression),this}static fromOptions(e){return(new this).fromOptions(e)}}r.exports=class extends u{constructor(e,t){super(),o("string"==typeof e),o(e.length>0),this.options=new w(e,t),this.network=this.options.network,this.logger=this.options.logger.context(`${e}indexer`),this.blocks=this.options.blocks,this.chain=this.options.chain,this.closing=!1,this.db=null,this.batch=null,this.bound=[],this.syncing=!1,this.height=0}start(){return o(null===this.batch,"Already started."),this.batch=this.db.batch(),this.batch}put(e,t){this.batch.put(e,t)}del(e){this.batch.del(e)}async commit(){await this.batch.write(),this.batch=null}async open(){this.logger.info("Indexer is loading."),this.closing=!1,await this.ensure(),await this.db.open(),await this.db.verify(p.V.encode(),"index",0),await this.verifyNetwork();const e=await this.db.get(p.R.encode());e?this.height=c.readU32(e,0):await this.saveGenesis(),this.bind()}async close(){this.closing=!0,await this.db.close();for(const[e,t]of this.bound)this.chain.removeListener(e,t);this.bound.length=0,this.closing=!1}async ensure(){h.unsupported||this.options.memory||await h.mkdirp(this.options.prefix)}async verifyNetwork(){let e=await this.db.get(p.O.encode());if(!e)return e=c.write(4).writeU32(this.network.magic).render(),void await this.db.put(p.O.encode(),e);if(c.readU32(e,0)!==this.network.magic)throw new Error("Indexer: Network mismatch.")}async saveGenesis(){this.start();const e=g.fromRaw(Buffer.from(this.network.genesisBlock,"hex")),t=new _(e.hash(),0);await this.indexBlock(t,e,new b),await this._setTip(t),await this.commit(),this.height=0}bind(){const e=async(e,t,r)=>{const i=new _(e.hash,e.height);try{await this.sync(i,t,r)}catch(e){this.emit("error",e)}};for(const t of["connect","disconnect","reset"])this.bound.push([t,e]),this.chain.on(t,e)}async getEntry(e){const t=await this.chain.getEntry(e);return t&&await this.chain.isMainChain(t)?t:null}async getBlockMeta(e){const t=await this.db.get(p.h.encode(e));return t?new _(t,e):null}async sync(e,t,r){this.syncing||(this.syncing=!0,await this._syncBlock(e,t,r)?this.syncing=!1:(async()=>{try{await this._syncChain()}catch(e){this.emit("error",e)}finally{this.syncing=!1}})())}async _syncBlock(e,t,r){if(e&&t&&r){if(e.height===this.height+1)return 0===(await this.getBlockMeta(this.height)).hash.compare(t.prevBlock)&&(await this._addBlock(e,t,r),!0);if(e.height===this.height)return 0===(await this.getBlockMeta(this.height)).hash.compare(t.hash())&&(await this._removeBlock(e,t,r),!0)}return!1}async _syncChain(){let e=this.height;if(e){for(;e>0;){const t=await this.getBlockMeta(e);if(o(t),await this.getEntry(t.hash))break;e-=1}e<this.height?(await this._rollback(e),await this._rollforward()):await this._rollforward()}else await this._rollforward()}async _rollforward(){this.logger.info("Indexing to best height from height (%d).",this.height);for(let e=this.height+1;;e++){const t=await this.getEntry(e);if(!t)break;const r=new _(t.hash,e),i=await this.chain.getBlock(t.hash);o(i);const s=await this.chain.getBlockView(i);if(o(s),this.closing)return;await this._addBlock(r,i,s)}}async _rollback(e){if(e>this.height)this.logger.warning("Ignoring rollback to future height (%d).",e);else for(this.logger.info("Rolling back to height %d.",e);this.height>e&&this.height>1;){const e=await this.getBlockMeta(this.height);o(e);const t=await this.chain.getBlock(e.hash);o(t);const r=await this.chain.getBlockView(t);o(r),await this._removeBlock(e,t,r)}}async _addBlock(e,t,r){const i=d.bench();if(e.height!==this.height+1)throw new Error("Indexer: Can not add block.");this.start(),await this.indexBlock(e,t,r);const s=await this._setTip(e);await this.commit(),this.height=s,this.logStatus(i,t,e)}async indexBlock(e,t,r){}async unindexBlock(e,t,r){}async pruneBlock(e,t,r){}async _removeBlock(e,t,r){const i=d.bench();if(e.height!==this.height)throw new Error("Indexer: Can not remove block.");this.start(),await this.unindexBlock(e,t,r);const s=await this.getBlockMeta(e.height-1);o(s);const n=await this._setTip(s);await this.commit(),await this.pruneBlock(e),this.height=n,this.logStatus(i,t,e,!0)}async _setTip(e){e.height<this.height?(o(e.height===this.height-1),this.del(p.h.encode(this.height))):e.height>this.height&&o(e.height===this.height+1),this.put(p.h.encode(e.height),e.hash);const t=c.write(4).writeU32(e.height).render();return this.put(p.R.encode(),t),e.height}isSlow(){return 1===this.height||this.height%20==0||this.height>=this.network.block.slowHeight}logStatus(e,t,r,i){if(!this.isSlow())return;const s=d.bench(e),n=i?"removed from":"added to";this.logger.info("Block (%d) %s indexer (txs=%d time=%d).",r.height,n,t.txs.length,s)}}}],["bfile","/lib/bfile.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(253,r)}],["bfile","/lib/fs-browser.js",function(e,t,r,i,s,n){"use strict";const{FSError:o}=__browser_require__(254,r),{ENOENT:a,EBADF:h}=o;function c(e){return async t=>{throw new o(a,e,t)}}function u(e){return t=>{throw new o(a,e,t)}}function f(e){return async()=>{throw new o(h,e)}}function l(e){return()=>{throw new o(h,e)}}function d(e,t,r){setTimeout(()=>{e(new o(t,r))},1)}async function p(){}function b(){}const g={emit:b,on:(e,t)=>{"error"===e&&d(t,a,"stat")},once:(e,t)=>{"error"===e&&d(t,a,"stat")},addListener:(e,t)=>{"error"===e&&d(t,a,"stat")},off:b,removeListener:b,removeAllListeners:b,listeners:()=>[],listenerCount:()=>0,readable:!0,writable:!1,pipe:u("stat"),write:b,end:b,close:b,destroy:b},m={emit:b,on:b,once:b,addListener:b,off:b,removeListener:b,removeAllListeners:b,listeners:()=>[],listenerCount:()=>0,readable:!1,writable:!0,write:()=>!0,end:()=>!0,close:b,destroy:b};e.access=c("stat"),e.accessSync=u("stat"),e.appendFile=c("open"),e.appendFileSync=u("open"),e.chmod=p,e.chmodSync=b,e.chown=p,e.chownSync=b,e.close=f("close"),e.closeSync=l("close"),e.constants={UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,O_RDONLY:0,O_WRONLY:1,O_RDWR:2,UV_DIRENT_UNKNOWN:0,UV_DIRENT_FILE:1,UV_DIRENT_DIR:2,UV_DIRENT_LINK:3,UV_DIRENT_FIFO:4,UV_DIRENT_SOCKET:5,UV_DIRENT_CHAR:6,UV_DIRENT_BLOCK:7,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DSYNC:4096,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_COPYFILE_EXCL:1,COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_FICLONE_FORCE:4},e.copyFile=p,e.copyFileSync=b,e.createReadStream=(()=>g),e.createWriteStream=(()=>m),e.exists=null,e.existsSync=null,e.fchmod=f("fchmod"),e.fchmodSync=l("fchmod"),e.fchown=f("fchown"),e.fchownSync=l("fchown"),e.fdatasync=f("fdatasync"),e.fdatasyncSync=l("fdatasync"),e.fstat=f("fstat"),e.fstatSync=l("fstat"),e.fsync=f("fsync"),e.fsyncSync=l("fsync"),e.ftruncate=f("ftruncate"),e.ftruncateSync=l("ftruncate"),e.futimes=f("futimes"),e.futimesSync=l("futimes"),e.lchmod=p,e.lchmodSync=b,e.lchown=p,e.lchownSync=b,e.link=p,e.linkSync=b,e.lstat=c("lstat"),e.lstatSync=u("lstat"),e.mkdir=p,e.mkdirSync=b,e.mkdtemp=(async()=>`/tmp/${Math.random().toString(36)}`),e.mkdtempSync=(()=>`/tmp/${Math.random().toString(36)}`),e.open=c("open"),e.openSync=u("open"),e.opendir=c("opendir"),e.opendirSync=u("opendir"),e.read=f("read"),e.readSync=l("read"),e.readdir=c("readdir"),e.readdirSync=u("readdir"),e.readFile=c("open"),e.readFileSync=u("open"),e.readlink=c("readlink"),e.readlinkSync=u("readlink"),e.realpath=c("stat"),e.realpath.native=c("stat"),e.realpathSync=u("stat"),e.realpathSync.native=u("stat"),e.rename=p,e.renameSync=b,e.rmdir=p,e.rmdirSync=b,e.stat=c("stat"),e.statSync=u("stat"),e.symlink=p,e.symlinkSync=b,e.truncate=p,e.truncateSync=b,e.unlink=p,e.unlinkSync=b,e.unwatchFile=b,e.utimes=p,e.utimesSync=b,e.watch=(()=>g),e.watchFile=b,e.write=f("write"),e.writeSync=l("write"),e.writeFile=p,e.writeFileSync=b,e.writev=f("writev"),e.writevSync=l("writev"),e.F_OK=e.constants.F_OK||0,e.R_OK=e.constants.R_OK||0,e.W_OK=e.constants.W_OK||0,e.X_OK=e.constants.X_OK||0,e.Dir=class{},e.Dirent=class{},e.Stats=class{},e.ReadStream=class{},e.WriteStream=class{},e.FileReadStream=class{},e.FileWriteStream=class{},e.promises=e,e.copy=p,e.copySync=b,e.empty=p,e.emptySync=b,e.exists=(async()=>!1),e.existsSync=(()=>!1),e.lstatTry=(()=>null),e.lstatTrySync=(async()=>null),e.mkdirp=p,e.mkdirpSync=b,e.move=p,e.moveSync=b,e.outputFile=p,e.outputFileSync=b,e.readJSON=c("open"),e.readJSONSync=u("open"),e.remove=p,e.removeSync=b,e.rimraf=p,e.rimrafSync=b,e.statTry=(async()=>null),e.statTrySync=(()=>null),e.stats=c("stat"),e.statsSync=u("stat"),e.statsTry=(async()=>null),e.statsTrySync=(()=>null),e.traverse=(async()=>undefined),e.traverseSync=(()=>undefined),e.walk=(()=>[]),e.walkSync=(()=>[]),e.writeJSON=p,e.writeJSONSync=b,e.handle=e.open,e.features={VERSION:0,HAS_STAT_NUMBERS:!1,HAS_COPY_FILE:!1,HAS_COPY_FILE_IMPL:!1,HAS_REALPATH_NATIVE:!1,HAS_REALPATH_NATIVE_IMPL:!1,HAS_RW_READY:!1,HAS_WATCHER_CLOSE:!1,HAS_PROMISES:!1,HAS_PROMISES_IMPL:!1,HAS_STAT_BIGINTS:!1,HAS_DEPRECATED_LCHOWN:!1,HAS_DIRENT:!1,HAS_DIRENT_IMPL:!1,HAS_RW_TYPED_ARRAY:!1,HAS_RECURSIVE_MKDIR:!1,HAS_OPTIONAL_FLAGS:!1,HAS_WRITE_PENDING:!1,HAS_STABLE_PROMISES:!1,USE_STABLE_PROMISES:!1,HAS_WRITEV:!1,HAS_WRITEV_IMPL:!1,HAS_STAT_NANO:!1,HAS_RECURSIVE_RMDIR:!1,HAS_OPENDIR:!1,HAS_OPENDIR_IMPL:!1,HAS_ALL:!1},e.unsupported=!0}],["bfile","/lib/error.js",function(e,t,r,i,s,n){"use strict";class o extends Error{constructor(e,...t){let r,i,s;if(null==e||"object"!=typeof e)throw new TypeError("invalid arguments for fs error");r=e.message,3===t.length?[r,i,s]=t:2===t.length?[i,s]=t:1===t.length&&([i]=t);let n=`${e.code}:`;r&&(n+=` ${r},`),i&&(n+=` ${i}`),s&&(n+=` ${s}`),super(n),this.code=e.code,this.errno=e.errno,i&&(this.syscall=i),s&&(this.path=s),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}o.EPERM={code:"EPERM",errno:-1,message:"operation not permitted"},o.ENOENT={code:"ENOENT",errno:-2,message:"no such file or directory"},o.EIO={code:"EIO",errno:-5,message:"I/O error"},o.EBADF={code:"EBADF",errno:-9,message:"bad file descriptor"},o.EACCES={code:"EACCES",errno:-13,message:"permission denied"},o.EEXIST={code:"EEXIST",errno:-17,message:"file already exists"},o.ENOTDIR={code:"ENOTDIR",errno:-20,message:"not a directory"},o.EISDIR={code:"EISDIR",errno:-21,message:"file is a directory"},e.ArgError=class extends TypeError{constructor(e,t,r){let i;if(Array.isArray(r)&&1===r.length&&([r]=r),Array.isArray(r)){const s=r.pop();i=`The "${e}" argument must be one of type `+`${r.join(", ")}, or ${s}. `+`Received type ${typeof t}`}else i=`The "${e}" argument must be of type ${r}. `+`Received type ${typeof t}`;super(i),this.code="ERR_INVALID_ARG_TYPE",this.name=`TypeError [${this.code}]`,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},e.FSError=o}],["bcoin","/lib/indexer/layout.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(176,r),a={V:o.key("V"),O:o.key("O"),h:o.key("h",["uint32"]),R:o.key("R")};r.exports=a}],["bcoin","/lib/indexer/txindexer.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(176,r),h=__browser_require__(24,r),c=__browser_require__(255,r),u=__browser_require__(17,r),f=__browser_require__(85,r),l=__browser_require__(257,r),d=__browser_require__(251,r);Object.assign(c,{t:a.key("t",["hash256"]),b:a.key("b",["uint32"])});class p{constructor(e={}){this.block=e.block||u.ZERO_HASH,this.time=e.time||0,o(32===this.block.length),o(this.time>>>0===this.time)}fromRaw(e){const t=h.read(e);return this.block=t.readHash(),this.time=t.readU32(),this}static fromRaw(e){return(new this).fromRaw(e)}toRaw(){const e=h.write(36);return e.writeHash(this.block),e.writeU32(this.time),e.render()}}class b{constructor(e={}){this.height=e.height||0,this.index=e.index||0,this.offset=e.offset||0,this.length=e.length||0,o(this.height>>>0===this.height),o(this.index>>>0===this.index),o(this.offset>>>0===this.offset),o(this.length>>>0===this.length)}fromRaw(e){const t=h.read(e);return this.height=t.readU32(),this.index=t.readU32(),this.offset=t.readU32(),this.length=t.readU32(),this}static fromRaw(e){return(new this).fromRaw(e)}toRaw(){const e=h.write(16);return e.writeU32(this.height),e.writeU32(this.index),e.writeU32(this.offset),e.writeU32(this.length),e.render()}}r.exports=class extends d{constructor(e){super("tx",e),this.db=a.create(this.options)}async indexBlock(e,t,r){o(t.hasRaw(),"Expected raw data for block.");const i=new p({block:e.hash,time:t.time});this.put(c.b.encode(e.height),i.toRaw());for(let r=0;r<t.txs.length;r++){const i=t.txs[r],s=i.hash(),{offset:n,size:o}=i.getPosition(),a=new b({height:e.height,index:r,offset:n,length:o});this.put(c.t.encode(s),a.toRaw())}}async unindexBlock(e,t,r){this.del(c.b.encode(e.height));for(let e=0;e<t.txs.length;e++){const r=t.txs[e].hash();this.del(c.t.encode(r))}}async getMeta(e){const t=await this.db.get(c.t.encode(e));if(!t)return null;const r=b.fromRaw(t),{height:i,index:s,offset:n,length:o}=r,a=await this.db.get(c.b.encode(i));if(!a)return null;const h=p.fromRaw(a),{block:u,time:d}=h,g=await this.blocks.read(u,n,o),m=f.fromRaw(g),_=l.fromTX(m);return _.height=i,_.block=u,_.time=d,_.index=s,_}async getTX(e){const t=await this.getMeta(e);return t?t.tx:null}async hasTX(e){return this.db.has(c.t.encode(e))}async getSpentView(e){const t=await this.chain.getCoinView(e);for(const{prevout:r}of e.inputs){if(t.hasEntry(r))continue;const{hash:e,index:i}=r,s=await this.getMeta(e);if(!s)continue;const{tx:n,height:o}=s;i<n.outputs.length&&t.addIndex(n,i,o)}return t}}}],["bcoin","/lib/primitives/txmeta.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(20,r),c=__browser_require__(85,r),{inspectSymbol:u}=__browser_require__(21,r);class f{constructor(e){this.tx=new c,this.mtime=h.now(),this.height=-1,this.block=null,this.time=0,this.index=-1,e&&this.fromOptions(e)}fromOptions(e){return e.tx&&(o(e.tx instanceof c),this.tx=e.tx),null!=e.mtime&&(o(e.mtime>>>0===e.mtime),this.mtime=e.mtime),null!=e.height&&(o(Number.isSafeInteger(e.height)),this.height=e.height),e.block!==undefined&&(o(null==e.block||null!=e.block&&!0===e.block._isBuffer),this.block=e.block),null!=e.time&&(o(e.time>>>0===e.time),this.time=e.time),null!=e.index&&(o(Number.isSafeInteger(e.index)),this.index=e.index),this}static fromOptions(e){return(new this).fromOptions(e)}fromTX(e,t,r){return this.tx=e,t&&(this.height=t.height,this.block=t.hash,this.time=t.time,this.index=r),this}static fromTX(e,t,r){return(new this).fromTX(e,t,r)}[u](){return this.format()}format(e){const t=this.tx.format(e,null,this.index);return t.mtime=this.mtime,t.height=this.height,t.block=this.block?h.revHex(this.block):null,t.time=this.time,t}toJSON(){return this.getJSON()}getJSON(e,t,r){const i=this.tx.getJSON(e,t,null,this.index);return i.mtime=this.mtime,i.height=this.height,i.block=this.block?h.revHex(this.block):null,i.time=this.time,i.confirmations=0,null!=r&&-1!==this.height&&(i.confirmations=r-this.height+1),i}fromJSON(e){return this.tx.fromJSON(e),o(e.mtime>>>0===e.mtime),o(Number.isSafeInteger(e.height)),o(!e.block||"string"==typeof e.block),o(e.time>>>0===e.time),o(Number.isSafeInteger(e.index)),this.mtime=e.mtime,this.height=e.height,this.block=h.fromRev(e.block),this.index=e.index,this}static fromJSON(e){return(new this).fromJSON(e)}getSize(){let e=0;return e+=this.tx.getSize(),e+=4,this.block?(e+=1,e+=32,e+=12):e+=1,e}toRaw(){const e=this.getSize(),t=a.write(e);return this.tx.toWriter(t),t.writeU32(this.mtime),this.block?(t.writeU8(1),t.writeHash(this.block),t.writeU32(this.height),t.writeU32(this.time),t.writeU32(this.index)):t.writeU8(0),t.render()}fromRaw(e){const t=a.read(e);return this.tx.fromReader(t),this.mtime=t.readU32(),1===t.readU8()&&(this.block=t.readHash(),this.height=t.readU32(),this.time=t.readU32(),this.index=t.readU32(),2147483647===this.index&&(this.index=-1)),this}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}static isTXMeta(e){return e instanceof f}}r.exports=f}],["bcoin","/lib/indexer/addrindexer.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(44,r),a=__browser_require__(176,r),h=__browser_require__(24,r),c=__browser_require__(255,r),u=__browser_require__(104,r),f=__browser_require__(251,r);Object.assign(c,{A:a.key("A",["uint8","hash","uint32","uint32"]),C:a.key("C",["uint32","uint32"]),c:a.key("c",["hash256"])});class l{constructor(e,t){this.height=e||0,this.index=t||0,o(this.height>>>0===this.height),o(this.index>>>0===this.index)}toRaw(){const e=h.write(8);return e.writeU32(this.height),e.writeU32(this.index),e.render()}fromRaw(e){const t=h.read(e);return this.height=t.readU32(),this.index=t.readU32(),this}static fromRaw(e){return(new this).fromRaw(e)}}r.exports=class extends f{constructor(e){super("addr",e),this.db=a.create(this.options),this.maxTxs=e.maxTxs||100}async indexBlock(e,t,r){const i=e.height;for(let e=0;e<t.txs.length;e++){const s=t.txs[e],n=s.hash(),o=new l(i,e);let a=!1;for(const t of s.getAddresses(r)){const r=t.getPrefix(this.network);if(r<0)continue;const s=t.getHash();this.put(c.A.encode(r,s,i,e),null),a=!0}a&&(this.put(c.C.encode(i,e),n),this.put(c.c.encode(n),o.toRaw()))}}async unindexBlock(e,t,r){const i=e.height;for(let e=0;e<t.txs.length;e++){const s=t.txs[e],n=s.hash();let o=!1;for(const t of s.getAddresses(r)){const r=t.getPrefix(this.network);if(r<0)continue;const s=t.getHash();this.del(c.A.encode(r,s,i,e)),o=!0}o&&(this.del(c.C.encode(i,e)),this.del(c.c.encode(n)))}}async getHashesByAddress(e,t={}){const{after:r,reverse:i}=t;let{limit:s}=t;if(s||(s=this.maxTxs),s>this.maxTxs)throw new Error(`Limit above max of ${this.maxTxs}.`);const n=u.getHash(e),o=e.getPrefix(this.network),a={limit:s,reverse:i,parse:e=>{const[,,t,r]=c.A.decode(e);return[t,r]}},h=r&&await this.db.has(c.c.encode(r));if(r&&!h&&!i)return[];if(r&&h){const e=await this.db.get(c.c.encode(r)),t=l.fromRaw(e),{height:s,index:h}=t;i?(a.gte=c.A.min(o,n),a.lt=c.A.max(o,n,s,h)):(a.gt=c.A.min(o,n,s,h),a.lte=c.A.max(o,n))}else a.gte=c.A.min(o,n),a.lte=c.A.max(o,n);const f=await this.db.keys(a),d=[];for(const[e,t]of f)d.push(await this.db.get(c.C.encode(e,t)));return d}}}],["bcoin","/lib/mempool/index.js",function(e,t,r,i,s,n){"use strict";e.Fees=__browser_require__(260,r),e.layout=__browser_require__(261,r),e.MempoolEntry=__browser_require__(262,r),e.Mempool=__browser_require__(263,r)}],["bcoin","/lib/mempool/fees.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(198,r),{BufferMap:c}=__browser_require__(86,r),u=__browser_require__(16,r),f=__browser_require__(17,r),l=__browser_require__(96,r),{encoding:d}=a,p=15,b=.998,g=.95,m=.5,_=1,w=.2,y=10,v=1e6,E=f.MAX_MONEY,S=10,I=1e16,k=1e9*f.MAX_MONEY,A=1.1,O=2;class x{constructor(e,t){this.logger=h.global,this.type=e,this.decay=0,this.maxConfirms=0,this.buckets=new Float64Array(0),this.bucketMap=new P,this.confAvg=[],this.curBlockConf=[],this.unconfTX=[],this.oldUnconfTX=new Int32Array(0),this.curBlockTX=new Int32Array(0),this.txAvg=new Float64Array(0),this.curBlockVal=new Float64Array(0),this.avg=new Float64Array(0),t&&(o("object"==typeof t),this.logger=t.context("fees"))}init(e,t,r){this.maxConfirms=t,this.decay=r,this.buckets=new Float64Array(e.length),this.bucketMap=new P;for(let t=0;t<e.length;t++)this.buckets[t]=e[t],this.bucketMap.insert(e[t],t);this.confAvg=new Array(t),this.curBlockConf=new Array(t),this.unconfTX=new Array(t);for(let r=0;r<t;r++)this.confAvg[r]=new Float64Array(e.length),this.curBlockConf[r]=new Int32Array(e.length),this.unconfTX[r]=new Int32Array(e.length);this.oldUnconfTX=new Int32Array(e.length),this.curBlockTX=new Int32Array(e.length),this.txAvg=new Float64Array(e.length),this.curBlockVal=new Float64Array(e.length),this.avg=new Float64Array(e.length)}clearCurrent(e){for(let t=0;t<this.buckets.length;t++){this.oldUnconfTX[t]=this.unconfTX[e%this.unconfTX.length][t],this.unconfTX[e%this.unconfTX.length][t]=0;for(let e=0;e<this.curBlockConf.length;e++)this.curBlockConf[e][t]=0;this.curBlockTX[t]=0,this.curBlockVal[t]=0}}record(e,t){if(e<1)return;const r=this.bucketMap.search(t);for(let t=e;t<=this.curBlockConf.length;t++)this.curBlockConf[t-1][r]++;this.curBlockTX[r]++,this.curBlockVal[r]+=t}updateAverages(){for(let e=0;e<this.buckets.length;e++){for(let t=0;t<this.confAvg.length;t++)this.confAvg[t][e]=this.confAvg[t][e]*this.decay+this.curBlockConf[t][e];this.avg[e]=this.avg[e]*this.decay+this.curBlockVal[e],this.txAvg[e]=this.txAvg[e]*this.decay+this.curBlockTX[e]}}estimateMedian(e,t,r,i,s){const n=this.buckets.length-1,o=i?n:0,a=i?-1:1,h=this.unconfTX.length;let c=0,u=0,f=0,l=o,d=o,p=o,b=o,g=!1,m=-1,_=0;for(let m=o;m>=0&&m<=n;m+=a){d=m,c+=this.confAvg[e-1][m],u+=this.txAvg[m];for(let t=e;t<this.maxConfirms;t++)f+=this.unconfTX[Math.max(s-t,0)%h][m];if(f+=this.oldUnconfTX[m],u>=t/(1-this.decay)){const e=c/(u+f);if(i&&e<r)break;if(!i&&e>r)break;g=!0,c=0,u=0,f=0,p=l,b=d,l=m+a}}const w=p<b?p:b,y=p>b?p:b;for(let e=w;e<=y;e++)_+=this.txAvg[e];if(g&&0!==_){_/=2;for(let e=w;e<=y;e++){if(!(this.txAvg[e]<_)){m=this.avg[e]/this.txAvg[e];break}_-=this.txAvg[e]}}return m}addTX(e,t){const r=this.bucketMap.search(t),i=e%this.unconfTX.length;return this.unconfTX[i][r]++,this.logger.spam("Adding tx to %s.",this.type),r}removeTX(e,t,r){let i=t-e;if(0===t&&(i=0),i<0)this.logger.debug("Blocks ago is negative for mempool tx.");else if(i>=this.unconfTX.length)this.oldUnconfTX[r]>0?this.oldUnconfTX[r]--:this.logger.debug("Mempool tx removed >25 blocks (bucket=%d).",r);else{const t=e%this.unconfTX.length;this.unconfTX[t][r]>0?this.unconfTX[t][r]--:this.logger.debug("Mempool tx removed (block=%d, bucket=%d).",t,r)}}getSize(){let e=0;e+=8,e+=N(this.buckets),e+=N(this.avg),e+=N(this.txAvg),e+=d.sizeVarint(this.maxConfirms);for(let t=0;t<this.maxConfirms;t++)e+=N(this.confAvg[t]);return e}toRaw(){const e=this.getSize(),t=a.write(e);t.writeDouble(this.decay),T(t,this.buckets),T(t,this.avg),T(t,this.txAvg),t.writeVarint(this.maxConfirms);for(let e=0;e<this.maxConfirms;e++)T(t,this.confAvg[e]);return t.render()}fromRaw(e){const t=a.read(e),r=t.readDouble(),i=C(t),s=C(t),n=C(t),o=t.readVarint(),h=new Array(o);for(let e=0;e<o;e++)h[e]=C(t);if(r<=0||r>=1)throw new Error("Decay must be between 0 and 1 (non-inclusive).");if(i.length<=1||i.length>1e3)throw new Error("Must have between 2 and 1000 fee/pri buckets.");if(s.length!==i.length)throw new Error("Mismatch in fee/pri average bucket count.");if(n.length!==i.length)throw new Error("Mismatch in tx count bucket count.");if(o<=0||o>1008)throw new Error("Must maintain estimates for between 1-1008 confirms.");for(let e=0;e<o;e++)if(h[e].length!==i.length)throw new Error("Mismatch in fee/pri conf average bucket count.");return this.init(i,o,r),this.avg=s,this.txAvg=n,this.confAvg=h,this}static fromRaw(e,t,r){return new this(t,r).fromRaw(e)}}class R{constructor(e){this.logger=h.global,this.minTrackedFee=y,this.minTrackedPri=S,this.feeStats=new x("FeeRate"),this.priStats=new x("Priority"),this.feeUnlikely=0,this.feeLikely=E,this.priUnlikely=0,this.priLikely=k,this.map=new c,this.bestHeight=0,l.MIN_RELAY>=y&&(this.minTrackedFee=l.MIN_RELAY),l.FREE_THRESHOLD>=S&&(this.minTrackedPri=l.FREE_THRESHOLD),e&&(o("object"==typeof e),this.logger=e.context("fees"),this.feeStats.logger=this.logger,this.priStats.logger=this.logger)}init(){const e=this.minTrackedFee,t=this.minTrackedPri,r=[];for(let t=e;t<=v;t*=A)r.push(t);r.push(E);const i=[];for(let e=t;e<=I;e*=O)i.push(e);i.push(k),this.feeStats.init(r,p,b),this.priStats.init(i,p,b)}reset(){this.feeUnlikely=0,this.feeLikely=E,this.priUnlikely=0,this.priLikely=k,this.map.clear(),this.bestHeight=0,this.init()}removeTX(e){const t=this.map.get(e);t?(this.feeStats.removeTX(t.blockHeight,this.bestHeight,t.bucketIndex),this.map.delete(e)):this.logger.spam("Mempool tx %h not found.",e)}isFeePoint(e,t){return t<this.minTrackedPri&&e>=this.minTrackedFee||t<this.priUnlikely&&e>this.feeLikely}isPriPoint(e,t){return e<this.minTrackedFee&&t>=this.minTrackedPri||e<this.feeUnlikely&&t>this.priLikely}processTX(e,t){const r=e.height,i=e.hash();if(this.map.has(i))return void this.logger.debug("Mempool tx %h already tracked.",e.hash());if(r<this.bestHeight)return;if(!t)return;if(e.dependencies)return;const s=e.getFee(),n=e.getRate(),o=e.getPriority(r);if(this.logger.spam("Processing mempool tx %h.",e.hash()),0===s||this.isPriPoint(n,o)){const e=new M;e.blockHeight=r,e.bucketIndex=this.priStats.addTX(r,o),this.map.set(i,e)}else if(this.isFeePoint(n,o)){const e=new M;e.blockHeight=r,e.bucketIndex=this.feeStats.addTX(r,n),this.map.set(i,e)}else this.logger.spam("Not adding tx %h.",e.hash())}processBlockTX(e,t){if(t.dependencies)return;const r=e-t.height;if(r<=0)return void this.logger.debug("Block tx %h had negative blocks to confirm (%d, %d).",t.hash(),e,t.height);const i=t.getFee(),s=t.getRate(),n=t.getPriority(e);0===i||this.isPriPoint(s,n)?this.priStats.record(r,n):this.isFeePoint(s,n)&&this.feeStats.record(r,s)}processBlock(e,t,r){if(!(e<=this.bestHeight)&&(this.bestHeight=e,0!==t.length&&r)){this.logger.debug("Recalculating dynamic cutoffs."),this.feeLikely=this.feeStats.estimateMedian(2,_,g,!0,e),-1===this.feeLikely&&(this.feeLikely=E),this.feeUnlikely=this.feeStats.estimateMedian(10,_,m,!1,e),-1===this.feeUnlikely&&(this.feeUnlikely=0),this.priLikely=this.priStats.estimateMedian(2,w,g,!0,e),-1===this.priLikely&&(this.priLikely=k),this.priUnlikely=this.priStats.estimateMedian(10,w,m,!1,e),-1===this.priUnlikely&&(this.priUnlikely=0),this.feeStats.clearCurrent(e),this.priStats.clearCurrent(e);for(const r of t)this.processBlockTX(e,r);this.feeStats.updateAverages(),this.priStats.updateAverages(),this.logger.debug("Done updating estimates for %d confirmed entries. New mempool map size %d.",t.length,this.map.size),this.logger.debug("New fee rate: %d.",this.estimateFee())}}estimateFee(e,t){if(e||(e=1),null==t&&(t=!0),o(e>>>0===e,"Target must be a number."),o(e<=this.feeStats.maxConfirms,"Too many confirmations for estimate."),!t){const t=this.feeStats.estimateMedian(e,_,g,!0,this.bestHeight);return t<0?0:Math.floor(t)}let r=-1;for(;r<0&&e<=this.feeStats.maxConfirms;)r=this.feeStats.estimateMedian(e++,_,g,!0,this.bestHeight);return e-=1,r<0?0:Math.floor(r)}estimatePriority(e,t){if(e||(e=1),null==t&&(t=!0),o(e>>>0===e,"Target must be a number."),o(e<=this.priStats.maxConfirms,"Too many confirmations for estimate."),!t){const t=this.priStats.estimateMedian(e,w,g,!0,this.bestHeight);return Math.floor(t)}let r=-1;for(;r<0&&e<=this.priStats.maxConfirms;)r=this.priStats.estimateMedian(e++,w,g,!0,this.bestHeight);return e-=1,r<0?0:Math.floor(r)}getSize(){let e=0;return e+=5,e+=d.sizeVarlen(this.feeStats.getSize())}toRaw(){const e=this.getSize(),t=a.write(e);return t.writeU8(R.VERSION),t.writeU32(this.bestHeight),t.writeVarBytes(this.feeStats.toRaw()),t.render()}fromRaw(e){const t=a.read(e);if(t.readU8()!==R.VERSION)throw new Error("Bad serialization version for estimator.");return this.bestHeight=t.readU32(),this.feeStats.fromRaw(t.readVarBytes()),this}static fromRaw(e,t){return new this(t).fromRaw(e)}inject(e){return this.bestHeight=e.bestHeight,this.feeStats=e.feeStats,this}}R.VERSION=0;class M{constructor(){this.blockHeight=-1,this.bucketIndex=-1}}class P{constructor(){this.buckets=[]}insert(e,t){const r=u.search(this.buckets,e,B,!0);this.buckets.splice(r,0,[e,t])}search(e){o(0!==this.buckets.length,"Cannot search.");const t=u.search(this.buckets,e,B,!0);return this.buckets[t][1]}}function B(e,t){return e[0]-t}function N(e){return d.sizeVarint(e.length)+8*e.length}function T(e,t){e.writeVarint(t.length);for(let r=0;r<t.length;r++)e.writeDouble(t[r])}function C(e){const t=new Float64Array(e.readVarint());for(let r=0;r<t.length;r++)t[r]=e.readDouble();return t}r.exports=R}],["bcoin","/lib/mempool/layout.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(176,r),a={V:o.key("V"),v:o.key("v"),R:o.key("R"),F:o.key("F"),e:o.key("e",["hash256"])};r.exports=a}],["bcoin","/lib/mempool/mempoolentry.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(24,r),a=__browser_require__(96,r),h=__browser_require__(20,r),c=__browser_require__(89,r),u=__browser_require__(85,r);r.exports=class{constructor(e){this.tx=null,this.height=-1,this.size=0,this.sigops=0,this.priority=0,this.fee=0,this.deltaFee=0,this.time=0,this.value=0,this.coinbase=!1,this.dependencies=!1,this.descFee=0,this.descSize=0,e&&this.fromOptions(e)}fromOptions(e){return this.tx=e.tx,this.height=e.height,this.size=e.size,this.sigops=e.sigops,this.priority=e.priority,this.fee=e.fee,this.deltaFee=e.deltaFee,this.time=e.time,this.value=e.value,this.coinbase=e.coinbase,this.dependencies=e.dependencies,this.descFee=e.descFee,this.descSize=e.descSize,this}static fromOptions(e){return(new this).fromOptions(e)}fromTX(e,t,r){const i=c.flags.STANDARD_VERIFY_FLAGS,s=e.getChainValue(t),n=e.getSigopsCost(t,i),o=e.getSigopsSize(n),a=e.getPriority(t,r,o),u=e.getFee(t);let f=!1,l=!1;for(const{prevout:r}of e.inputs)t.isCoinbase(r)&&(l=!0),-1===t.getHeight(r)&&(f=!0);return this.tx=e,this.height=r,this.size=o,this.sigops=n,this.priority=a,this.fee=u,this.deltaFee=u,this.time=h.now(),this.value=s,this.coinbase=l,this.dependencies=f,this.descFee=u,this.descSize=o,this}static fromTX(e,t,r){return(new this).fromTX(e,t,r)}hash(e){return this.tx.hash(e)}txid(){return this.tx.txid()}getPriority(e){const t=(e-this.height)*this.value/this.size;let r=this.priority+Math.floor(t);return r<0&&(r=0),r}getFee(){return this.fee}getDeltaFee(){return this.deltaFee}getRate(){return a.getRate(this.size,this.fee)}getDeltaRate(){return a.getRate(this.size,this.deltaFee)}getDescRate(){return a.getRate(this.descSize,this.descFee)}memUsage(){const e=this.tx;let t=0;t+=176,t+=48,t+=48,t+=208,t+=80,t+=88,t+=80,t+=80,t+=48,t+=32;for(const r of e.inputs){t+=120,t+=104,t+=88,t+=40,t+=80,t+=32,t+=40*r.script.code.length;for(const e of r.script.code)e.data&&(t+=80);t+=96,t+=32,t+=80*r.witness.items.length}t+=32;for(const r of e.outputs){t+=104,t+=40,t+=80,t+=32,t+=40*r.script.code.length;for(const e of r.script.code)e.data&&(t+=80)}return t}isFree(e){return this.getPriority(e)>a.FREE_THRESHOLD}getSize(){return this.tx.getSize()+42}toRaw(){const e=o.write(this.getSize());return e.writeBytes(this.tx.toRaw()),e.writeU32(this.height),e.writeU32(this.size),e.writeU32(this.sigops),e.writeDouble(this.priority),e.writeU64(this.fee),e.writeU32(this.time),e.writeU64(this.value),e.writeU8(this.coinbase?1:0),e.writeU8(this.dependencies?1:0),e.render()}fromRaw(e){const t=o.read(e);return this.tx=u.fromReader(t),this.height=t.readU32(),this.size=t.readU32(),this.sigops=t.readU32(),this.priority=t.readDouble(),this.fee=t.readU64(),this.deltaFee=this.fee,this.time=t.readU32(),this.value=t.readU64(),this.coinbase=1===t.readU8(),this.dependencies=1===t.readU8(),this.descFee=this.fee,this.descSize=this.size,this}static fromRaw(e){return(new this).fromRaw(e)}}}],["bcoin","/lib/mempool/mempool.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(195,r),h=__browser_require__(19,r),c=__browser_require__(176,r),{RollingFilter:u}=__browser_require__(264,r),f=__browser_require__(269,r),{BufferMap:l,BufferSet:d}=__browser_require__(86,r),p=__browser_require__(206,r),b=__browser_require__(17,r),g=__browser_require__(96,r),m=__browser_require__(20,r),_=__browser_require__(41,r),{VerifyError:w}=__browser_require__(207,r),y=__browser_require__(89,r),v=__browser_require__(111,r),E=__browser_require__(85,r),S=__browser_require__(127,r),I=__browser_require__(257,r),k=__browser_require__(262,r),A=__browser_require__(14,r),O=__browser_require__(261,r),x=__browser_require__(271,r),R=__browser_require__(260,r),M=__browser_require__(128,r);class P{constructor(e){this.network=A.primary,this.chain=null,this.logger=null,this.workers=null,this.fees=null,this.limitFree=!0,this.limitFreeRelay=15,this.relayPriority=!0,this.requireStandard=this.network.requireStandard,this.rejectAbsurdFees=!0,this.prematureWitness=!1,this.paranoidChecks=!1,this.replaceByFee=!1,this.maxSize=g.MEMPOOL_MAX_SIZE,this.maxOrphans=g.MEMPOOL_MAX_ORPHANS,this.maxAncestors=g.MEMPOOL_MAX_ANCESTORS,this.expiryTime=g.MEMPOOL_EXPIRY_TIME,this.minRelay=this.network.minRelay,this.prefix=null,this.location=null,this.memory=!0,this.maxFiles=64,this.cacheSize=32<<20,this.compression=!0,this.persistent=!1,this.fromOptions(e)}fromOptions(e){return o(e,"Mempool requires options."),o(e.chain&&"object"==typeof e.chain,"Mempool requires a blockchain."),this.chain=e.chain,this.network=e.chain.network,this.logger=e.chain.logger,this.workers=e.chain.workers,this.requireStandard=this.network.requireStandard,this.minRelay=this.network.minRelay,null!=e.logger&&(o("object"==typeof e.logger),this.logger=e.logger),null!=e.workers&&(o("object"==typeof e.workers),this.workers=e.workers),null!=e.fees&&(o("object"==typeof e.fees),this.fees=e.fees),null!=e.limitFree&&(o("boolean"==typeof e.limitFree),this.limitFree=e.limitFree),null!=e.limitFreeRelay&&(o(e.limitFreeRelay>>>0===e.limitFreeRelay),this.limitFreeRelay=e.limitFreeRelay),null!=e.relayPriority&&(o("boolean"==typeof e.relayPriority),this.relayPriority=e.relayPriority),null!=e.requireStandard&&(o("boolean"==typeof e.requireStandard),this.requireStandard=e.requireStandard),null!=e.rejectAbsurdFees&&(o("boolean"==typeof e.rejectAbsurdFees),this.rejectAbsurdFees=e.rejectAbsurdFees),null!=e.prematureWitness&&(o("boolean"==typeof e.prematureWitness),this.prematureWitness=e.prematureWitness),null!=e.paranoidChecks&&(o("boolean"==typeof e.paranoidChecks),this.paranoidChecks=e.paranoidChecks),null!=e.replaceByFee&&(o("boolean"==typeof e.replaceByFee),this.replaceByFee=e.replaceByFee),null!=e.maxSize&&(o(e.maxSize>>>0===e.maxSize),this.maxSize=e.maxSize),null!=e.maxOrphans&&(o(e.maxOrphans>>>0===e.maxOrphans),this.maxOrphans=e.maxOrphans),null!=e.maxAncestors&&(o(e.maxAncestors>>>0===e.maxAncestors),this.maxAncestors=e.maxAncestors),null!=e.expiryTime&&(o(e.expiryTime>>>0===e.expiryTime),this.expiryTime=e.expiryTime),null!=e.minRelay&&(o(e.minRelay>>>0===e.minRelay),this.minRelay=e.minRelay),null!=e.prefix&&(o("string"==typeof e.prefix),this.prefix=e.prefix,this.location=a.join(this.prefix,"mempool")),null!=e.location&&(o("string"==typeof e.location),this.location=e.location),null!=e.memory&&(o("boolean"==typeof e.memory),this.memory=e.memory),null!=e.maxFiles&&(o(e.maxFiles>>>0===e.maxFiles),this.maxFiles=e.maxFiles),null!=e.cacheSize&&(o(Number.isSafeInteger(e.cacheSize)),o(e.cacheSize>=0),this.cacheSize=e.cacheSize),null!=e.compression&&(o("boolean"==typeof e.compression),this.compression=e.compression),null!=e.persistent&&(o("boolean"==typeof e.persistent),this.persistent=e.persistent),null!=e.indexAddress&&(o("boolean"==typeof e.indexAddress),this.indexAddress=e.indexAddress),this}static fromOptions(e){return(new P).fromOptions(e)}}class B{constructor(e,t,r){this.raw=e.toRaw(),this.missing=t,this.id=r}toTX(){return E.fromRaw(this.raw)}}class N{constructor(e){this.logger=e.logger,this.chain=e.chain,this.network=e.network,this.db=null,this.batch=null,e.persistent&&(this.db=c.create(e))}async getVersion(){const e=await this.db.get(O.v.encode());return e?e.readUInt32LE(0,!0):-1}async getTip(){return this.db.get(O.R.encode())}async getFees(){const e=await this.db.get(O.F.encode());if(!e)return null;let t=null;try{t=R.fromRaw(e)}catch(e){this.logger.warning("Fee data failed deserialization: %s.",e.message)}return t}getEntries(){return this.db.values({gte:O.e.min(),lte:O.e.max(),parse:e=>k.fromRaw(e)})}getKeys(){return this.db.keys({gte:O.e.min(),lte:O.e.max()})}async open(){this.db&&(await this.db.open(),await this.db.verify(O.V.encode(),"mempool",0),await this.verify(),this.batch=this.db.batch())}async close(){this.db&&(await this.db.close(),this.batch=null)}save(e){this.db&&this.batch.put(O.e.encode(e.hash()),e.toRaw())}remove(e){this.db&&this.batch.del(O.e.encode(e))}sync(e){this.db&&this.batch.put(O.R.encode(),e)}writeFees(e){this.db&&this.batch.put(O.F.encode(),e.toRaw())}clear(){this.batch.clear(),this.batch=this.db.batch()}async flush(){this.db&&(await this.batch.write(),this.batch=this.db.batch())}async init(e){const t=this.db.batch();t.put(O.v.encode(),z(N.VERSION)),t.put(O.R.encode(),e),await t.write()}async verify(){let e,t=await this.getVersion();return-1===t&&(t=N.VERSION,e=this.chain.tip.hash,this.logger.info("Mempool cache is empty. Writing tip %h.",e),await this.init(e)),t!==N.VERSION?(this.logger.warning("Mempool cache version mismatch (%d != %d)!",t,N.VERSION),this.logger.warning("Invalidating mempool cache."),await this.wipe(),!1):!(!(e=await this.getTip())||!e.equals(this.chain.tip.hash))||(this.logger.warning("Mempool tip not consistent with chain tip (%h != %h)!",e,this.chain.tip.hash),this.logger.warning("Invalidating mempool cache."),await this.wipe(),!1)}async wipe(){const e=this.db.batch(),t=await this.getKeys();for(const r of t)e.del(r);e.put(O.v.encode(),z(N.VERSION)),e.put(O.R.encode(),this.chain.tip.hash),e.del(O.F.encode()),await e.write(),this.logger.info("Removed %d mempool entries from disk.",t.length)}}function T(e,t){}function C(e,t){e.descFee+=t.deltaFee,e.descSize+=t.size}function q(e,t){e.descFee-=t.descFee,e.descSize-=t.descSize}function j(e,t){e.descFee-=t.deltaFee}function D(e,t){e.descFee+=t.deltaFee}function U(e,t){let r,i,s=e.deltaFee,n=e.size,o=t.deltaFee,a=t.size;return L(e)&&(s=e.descFee,n=e.descSize),L(t)&&(o=t.descFee,a=t.descSize),(r=s*a)===(i=n*o)&&(r=e.time,i=t.time),r-i}function L(e){const t=e.deltaFee*e.descSize;return e.descFee*e.size>t}function z(e){const t=Buffer.allocUnsafe(4);return t.writeUInt32LE(e,0,!0),t}N.VERSION=2,r.exports=class extends h{constructor(e){super(),this.opened=!1,this.options=new P(e),this.network=this.options.network,this.logger=this.options.logger.context("mempool"),this.workers=this.options.workers,this.chain=this.options.chain,this.fees=this.options.fees,this.locker=this.chain.locker,this.cache=new N(this.options),this.size=0,this.freeCount=0,this.lastTime=0,this.lastFlush=0,this.tip=this.network.genesis.hash,this.waiting=new l,this.orphans=new l,this.map=new l,this.spents=new l,this.rejects=new u(12e4,1e-6),this.addrindex=new x(this.network)}async open(){if(o(!this.opened,"Mempool is already open."),this.opened=!0,await this.cache.open(),this.options.persistent){const e=await this.cache.getEntries();for(const t of e)this.trackEntry(t);for(const t of e)if(this.updateAncestors(t,C),this.options.indexAddress){const e=await this.getCoinView(t.tx);this.indexEntry(t,e)}if(this.logger.info("Loaded mempool from disk (%d entries).",e.length),this.fees){const e=await this.cache.getFees();e&&(this.fees.inject(e),this.logger.info("Loaded mempool fee data (rate=%d).",this.fees.estimateFee()))}}this.tip=this.chain.tip.hash;const e=(this.options.maxSize/1024).toFixed(2);this.logger.info("Mempool loaded (maxsize=%dkb).",e)}async close(){return o(this.opened,"Mempool is not open."),this.opened=!1,this.cache.close()}async addBlock(e,t){const r=await this.locker.lock();try{return await this._addBlock(e,t)}finally{r()}}async _addBlock(e,t){if(0===this.map.size)return void(this.tip=e.hash);const r=[];for(let i=t.length-1;i>=1;i--){const s=t[i],n=s.hash(),o=this.getEntry(n);o?(this.removeEntry(o),this.emit("confirmed",s,e),r.push(o)):(this.removeOrphan(n),this.removeDoubleSpends(s),this.waiting.has(n)&&await this.handleOrphans(s))}this.rejects.reset(),this.fees&&(this.fees.processBlock(e.height,r,this.chain.synced),this.cache.writeFees(this.fees)),this.cache.sync(e.hash),await this.cache.flush(),this.tip=e.hash,0!==r.length&&this.logger.debug("Removed %d txs from mempool for block %d.",r.length,e.height)}async removeBlock(e,t){const r=await this.locker.lock();try{return await this._removeBlock(e,t)}finally{r()}}async _removeBlock(e,t){if(0===this.map.size)return void(this.tip=e.prevBlock);let r=0;for(let i=1;i<t.length;i++){const s=t[i],n=s.hash();if(!this.hasEntry(n)){try{await this.insertTX(s,-1),r++}catch(e){this.emit("error",e);continue}this.emit("unconfirmed",s,e)}}this.rejects.reset(),this.cache.sync(e.prevBlock),await this.cache.flush(),this.tip=e.prevBlock,0!==r&&this.logger.debug("Added %d txs back into the mempool for block %d.",r,e.height)}async _handleReorg(){const e=this.chain.height+1,t=await this.chain.getMedianTime(this.chain.tip),r=[];for(const[i,s]of this.map){const{tx:n}=s;if(n.isFinal(e,t)){if(n.version>1){let e=!1;for(const{sequence:t}of n.inputs)if(!(t&b.SEQUENCE_DISABLE_FLAG)){e=!0;break}if(e){r.push(i);continue}}s.coinbase&&r.push(i)}else r.push(i)}for(const e of r){const t=this.getEntry(e);t&&this.evictEntry(t)}}async reset(){const e=await this.locker.lock();try{return await this._reset()}finally{e()}}async _reset(){this.logger.info("Mempool reset (%d txs removed).",this.map.size),this.size=0,this.waiting.clear(),this.orphans.clear(),this.map.clear(),this.spents.clear(),this.addrindex.reset(),this.freeCount=0,this.lastTime=0,this.fees&&this.fees.reset(),this.rejects.reset(),this.options.persistent&&(await this.cache.wipe(),this.cache.clear()),this.tip=this.chain.tip.hash}limitSize(e){const t=this.options.maxSize;if(this.size<=t)return!1;const r=t-t/10,i=this.options.expiryTime,s=m.now();let n=m.bench();const a=new f(U);for(const e of this.map.values())this.hasDepends(e.tx)||(s<e.time+i?a.insert(e):(this.logger.debug("Removing package %h from mempool (too old).",e.hash()),this.evictEntry(e)));if(this.size<=r)return!this.hasEntry(e);for(this.logger.debug("(bench) Heap mempool traversal: %d.",m.bench(n)),n=m.bench(),this.logger.debug("(bench) Heap mempool queue size: %d.",a.size());a.size()>0;){const e=a.shift(),t=e.hash();if(o(this.hasEntry(t)),this.logger.debug("Removing package %h from mempool (low fee).",e.hash()),this.evictEntry(e),this.size<=r)break}return this.logger.debug("(bench) Heap mempool map removal: %d.",m.bench(n)),!this.hasEntry(e)}getTX(e){const t=this.map.get(e);return t?t.tx:null}getEntry(e){return this.map.get(e)}getCoin(e,t){const r=this.map.get(e);return r?this.isSpent(e,t)?null:t>=r.tx.outputs.length?null:S.fromTX(r.tx,t,-1):null}hasCoin(e,t){const r=this.map.get(e);return!(!r||this.isSpent(e,t)||t>=r.tx.outputs.length)}isSpent(e,t){const r=v.toKey(e,t);return this.spents.has(r)}getSpent(e,t){const r=v.toKey(e,t);return this.spents.get(r)}getSpentTX(e,t){const r=v.toKey(e,t),i=this.spents.get(r);return i?i.tx:null}getTXByAddress(e,t){return this.addrindex.get(e,t)}getMetaByAddress(e,t){return this.addrindex.getMeta(e,t)}getMeta(e){const t=this.getEntry(e);if(!t)return null;const r=I.fromTX(t.tx);return r.mtime=t.time,r}hasEntry(e){return this.map.has(e)}has(e){return!!this.locker.has(e)||!!this.hasOrphan(e)||this.hasEntry(e)}exists(e){return!!this.locker.pending(e)||!!this.hasOrphan(e)||this.hasEntry(e)}hasReject(e){return this.rejects.test(e)}async addTX(e,t){const r=e.hash(),i=await this.locker.lock(r);try{return await this._addTX(e,t)}finally{i()}}async _addTX(e,t){let r;null==t&&(t=-1);try{r=await this.insertTX(e,t)}catch(t){throw"VerifyError"===t.type&&(e.hasWitness()||t.malleated||this.rejects.add(e.hash())),t}return m.now()-this.lastFlush>10&&(await this.cache.flush(),this.lastFlush=m.now()),r}async insertTX(e,t){o(!e.mutable,"Cannot add mutable TX to mempool.");const r=p.lockFlags.STANDARD_LOCKTIME_FLAGS,i=this.chain.height,s=e.hash(),[n,a,h]=e.checkSanity();if(!n)throw new w(e,"invalid",a,h);if(e.isCoinbase())throw new w(e,"invalid","coinbase",100);if(this.options.requireStandard&&!this.chain.state.hasCSV()&&e.version>=2)throw new w(e,"nonstandard","premature-version2-tx",0);if(!this.chain.state.hasWitness()&&!this.options.prematureWitness&&e.hasWitness())throw new w(e,"nonstandard","no-witness-yet",0,!0);if(this.options.requireStandard){const[t,r,i]=e.checkStandard();if(!t)throw new w(e,"nonstandard",r,i);if(!this.options.replaceByFee&&e.isRBF())throw new w(e,"nonstandard","replace-by-fee",0)}if(!await this.verifyFinal(e,r))throw new w(e,"nonstandard","non-final",0);if(this.exists(s))throw new w(e,"alreadyknown","txn-already-in-mempool",0);if(await this.chain.hasCoins(e))throw new w(e,"alreadyknown","txn-already-known",0);if(this.isDoubleSpend(e))throw this.emit("conflict",e),new w(e,"duplicate","bad-txns-inputs-spent",0);const c=await this.getCoinView(e),u=this.maybeOrphan(e,c,t);if(u)return u;const f=k.fromTX(e,c,i);if(await this.verify(f,c),await this.addEntry(f,c),this.limitSize(s))throw new w(e,"insufficientfee","mempool full",0);return null}async verify(e,t){const r=this.chain.height+1,i=p.lockFlags.STANDARD_LOCKTIME_FLAGS,s=e.tx;if(!await this.verifyLocks(s,t,i))throw new w(s,"nonstandard","non-BIP68-final",0);if(this.options.requireStandard){if(!s.hasStandardInputs(t))throw new w(s,"nonstandard","bad-txns-nonstandard-inputs",0);if(this.chain.state.hasWitness()&&!s.hasStandardWitness(t))throw new w(s,"nonstandard","bad-witness-nonstandard",0,!0)}if(e.sigops>g.MAX_TX_SIGOPS_COST)throw new w(s,"nonstandard","bad-txns-too-many-sigops",0);const n=g.getMinFee(e.size,this.options.minRelay);if(this.options.relayPriority&&e.fee<n&&!e.isFree(r))throw new w(s,"insufficientfee","insufficient priority",0);if(this.options.limitFree&&e.fee<n){const t=m.now();if(this.freeCount*=Math.pow(1-1/600,t-this.lastTime),this.lastTime=t,this.freeCount>10*this.options.limitFreeRelay*1e3)throw new w(s,"insufficientfee","rate limited free transaction",0);this.freeCount+=e.size}if(this.options.rejectAbsurdFees&&e.fee>1e4*n)throw new w(s,"highfee","absurdly-high-fee",0);if(this.countAncestors(e)+1>this.options.maxAncestors)throw new w(s,"nonstandard","too-long-mempool-chain",0);const[a,h,c]=s.checkInputs(t,r);if(-1===a)throw new w(s,"invalid",h,c);let u=y.flags.STANDARD_VERIFY_FLAGS;try{await this.verifyInputs(s,t,u)}catch(e){if(s.hasWitness())throw e;if(u&=~y.flags.VERIFY_WITNESS,u&=~y.flags.VERIFY_CLEANSTACK,!await this.verifyResult(s,t,u))throw e;if(u|=y.flags.VERIFY_WITNESS,await this.verifyResult(s,t,u))throw e;throw e.malleated=!0,e}if(this.options.paranoidChecks){const e=y.flags.MANDATORY_VERIFY_FLAGS;o(await this.verifyResult(s,t,e),"BUG: Verify failed for mandatory but not standard.")}}async verifyResult(e,t,r){try{await this.verifyInputs(e,t,r)}catch(e){if("VerifyError"===e.type)return!1;throw e}return!0}async verifyInputs(e,t,r){if(!await e.verifyAsync(t,r,this.workers)){if(r&y.flags.ONLY_STANDARD_VERIFY_FLAGS&&(r&=~y.flags.ONLY_STANDARD_VERIFY_FLAGS,await e.verifyAsync(t,r,this.workers)))throw new w(e,"nonstandard","non-mandatory-script-verify-flag",0);throw new w(e,"nonstandard","mandatory-script-verify-flag",100)}}async addEntry(e,t){const r=e.tx;this.trackEntry(e,t),this.updateAncestors(e,C),this.emit("tx",r,t),this.emit("add entry",e),this.fees&&this.fees.processTX(e,this.chain.synced),this.logger.debug("Added %h to mempool (txs=%d).",r.hash(),this.map.size),this.cache.save(e),await this.handleOrphans(r)}removeEntry(e){const t=e.tx.hash();this.untrackEntry(e),this.fees&&this.fees.removeTX(t),this.cache.remove(t),this.emit("remove entry",e)}evictEntry(e){this.removeSpenders(e),this.updateAncestors(e,q),this.removeEntry(e)}removeSpenders(e){const t=e.tx,r=t.hash();for(let e=0;e<t.outputs.length;e++){const t=this.getSpent(r,e);t&&(this.removeSpenders(t),this.removeEntry(t))}}countAncestors(e){return this._countAncestors(e,new d,e,T)}updateAncestors(e,t){return this._countAncestors(e,new d,e,t)}_countAncestors(e,t,r,i){const s=e.tx;for(const{prevout:e}of s.inputs){const s=e.hash,n=this.getEntry(s);if(n&&!t.has(s)){if(t.add(s),i(n,r),t.size>this.options.maxAncestors)break;if(this._countAncestors(n,t,r,i),t.size>this.options.maxAncestors)break}}return t.size}countDescendants(e){return this._countDescendants(e,new d)}_countDescendants(e,t){const r=e.tx,i=r.hash();for(let e=0;e<r.outputs.length;e++){const r=this.getSpent(i,e);if(!r)continue;const s=r.hash();t.has(s)||(t.add(s),this._countDescendants(r,t))}return t.size}getAncestors(e){return this._getAncestors(e,[],new d)}_getAncestors(e,t,r){const i=e.tx;for(const{prevout:e}of i.inputs){const i=e.hash,s=this.getEntry(i);s&&(r.has(i)||(r.add(i),t.push(s),this._getAncestors(s,t,r)))}return t}getDescendants(e){return this._getDescendants(e,[],new d)}_getDescendants(e,t,r){const i=e.tx,s=i.hash();for(let e=0;e<i.outputs.length;e++){const i=this.getSpent(s,e);if(!i)continue;const n=i.hash();r.has(n)||(r.add(n),t.push(i),this._getDescendants(i,t,r))}return t}getDepends(e){const t=e.getPrevout(),r=[];for(const e of t)this.hasEntry(e)&&r.push(e);return r}hasDepends(e){for(const{prevout:t}of e.inputs)if(this.hasEntry(t.hash))return!0;return!1}getBalance(){let e=0;for(const[t,r]of this.map){const i=r.tx;for(let r=0;r<i.outputs.length;r++){const i=this.getCoin(t,r);i&&(e+=i.value)}}return e}getHistory(){const e=[];for(const t of this.map.values())e.push(t.tx);return e}getOrphan(e){return this.orphans.get(e)}hasOrphan(e){return this.orphans.has(e)}maybeOrphan(e,t,r){const i=new d,s=[];for(const{prevout:r}of e.inputs)if(!t.hasEntry(r)){if(this.hasReject(r.hash))return this.logger.debug("Not storing orphan %h (rejected parents).",e.hash()),this.rejects.add(e.hash()),s;if(this.hasEntry(r.hash))return this.logger.debug("Not storing orphan %h (non-existent output).",e.hash()),this.rejects.add(e.hash()),s;i.add(r.hash)}if(0===i.size)return null;if(e.getWeight()>g.MAX_TX_WEIGHT)return this.logger.debug("Ignoring large orphan: %h",e.hash()),e.hasWitness()||this.rejects.add(e.hash()),s;if(0===this.options.maxOrphans)return s;this.limitOrphans();const n=e.hash();for(const e of i.keys())this.waiting.has(e)||this.waiting.set(e,new d),this.waiting.get(e).add(n),s.push(e);return this.orphans.set(n,new B(e,s.length,r)),this.logger.debug("Added orphan %h to mempool.",e.hash()),this.emit("add orphan",e),s}async handleOrphans(e){const t=this.resolveOrphans(e);for(const e of t){let t,r;try{t=e.toTX()}catch(e){this.logger.warning("%s %s","Warning: possible memory corruption.","Orphan failed deserialization.");continue}try{r=await this.insertTX(t,e.id)}catch(r){if("VerifyError"===r.type){this.logger.debug("Could not resolve orphan %h: %s.",t.hash(),r.message),t.hasWitness()||r.malleated||this.rejects.add(t.hash()),this.emit("bad orphan",r,e.id);continue}throw r}r&&r.length>0?(this.logger.debug("Transaction %h was double-orphaned in mempool.",t.hash()),this.removeOrphan(t.hash())):this.logger.debug("Resolved orphan %h in mempool.",t.hash())}}resolveOrphans(e){const t=e.hash(),r=this.waiting.get(t);if(!r)return[];o(r.size>0);const i=[];for(const e of r.keys()){const t=this.getOrphan(e);o(t),0==--t.missing&&(this.orphans.delete(e),i.push(t))}return this.waiting.delete(t),i}removeOrphan(e){const t=this.getOrphan(e);if(!t)return!1;let r;try{r=t.toTX()}catch(t){return this.orphans.delete(e),this.logger.warning("%s %s","Warning: possible memory corruption.","Orphan failed deserialization."),!1}for(const t of r.getPrevout()){const r=this.waiting.get(t);r&&(o(r.has(e)),r.delete(e),0===r.size&&this.waiting.delete(t))}return this.orphans.delete(e),this.emit("remove orphan",r),!0}limitOrphans(){if(this.orphans.size<this.options.maxOrphans)return!1;let e,t=_.randomRange(0,this.orphans.size);for(e of this.orphans.keys()){if(0===t)break;t--}return o(e),this.logger.debug("Removing orphan %h from mempool.",e),this.removeOrphan(e),!0}isDoubleSpend(e){for(const{prevout:t}of e.inputs){const{hash:e,index:r}=t;if(this.isSpent(e,r))return!0}return!1}async getSpentView(e){const t=await this.locker.lock();try{return await this._getSpentView(e)}finally{t()}}async _getSpentView(e){const t=new M;for(const{prevout:r}of e.inputs){const{hash:e,index:i}=r,s=this.getTX(e);if(s){i<s.outputs.length&&t.addIndex(s,i,-1);continue}const n=await this.chain.readCoin(r);n&&t.addEntry(r,n)}return t}async getCoinView(e){const t=new M;for(const{prevout:r}of e.inputs){const{hash:e,index:i}=r,s=this.getTX(e);if(s){this.hasCoin(e,i)&&t.addIndex(s,i,-1);continue}const n=await this.chain.readCoin(r);n&&t.addEntry(r,n)}return t}getSnapshot(){const e=[];for(const t of this.map.keys())e.push(t);return e}verifyLocks(e,t,r){return this.chain.verifyLocks(this.chain.tip,e,t,r)}verifyFinal(e,t){return this.chain.verifyFinal(this.chain.tip,e,t)}trackEntry(e,t){const r=e.tx,i=r.hash();o(!this.map.has(i)),this.map.set(i,e),o(!r.isCoinbase());for(const{prevout:t}of r.inputs){const r=t.toKey();this.spents.set(r,e)}this.options.indexAddress&&t&&this.indexEntry(e,t),this.size+=e.memUsage()}untrackEntry(e){const t=e.tx,r=t.hash();o(this.map.has(r)),this.map.delete(r),o(!t.isCoinbase());for(const{prevout:e}of t.inputs){const t=e.toKey();this.spents.delete(t)}this.options.indexAddress&&this.unindexEntry(e),this.size-=e.memUsage()}indexEntry(e,t){this.addrindex.insert(e,t)}unindexEntry(e){const t=e.tx.hash();this.addrindex.remove(t)}removeDoubleSpends(e){for(const{prevout:t}of e.inputs){const{hash:e,index:r}=t,i=this.getSpent(e,r);i&&(this.logger.debug("Removing double spender from mempool: %h.",i.hash()),this.evictEntry(i),this.emit("double spend",i))}}getSize(){return this.size}prioritise(e,t,r){-t>e.priority&&(t=-e.priority),e.priority+=t,-r>e.deltaFee&&(r=-e.deltaFee),0!==r&&(this.updateAncestors(e,j),e.deltaFee+=r,e.descFee+=r,this.updateAncestors(e,D))}}}],["bfilter","/lib/bfilter.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(265,r),a=__browser_require__(268,r);e.BloomFilter=o,e.RollingFilter=a}],["bfilter","/lib/bloom.js",function(e,t,r,i,s,n){"use strict";const{enforce:o}=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(266,r),c=Buffer.alloc(0),u=.48045301391820144,f=.6931471805599453;class l extends a.Struct{constructor(e,t,r,i){super(),this.filter=c,this.size=0,this.n=0,this.tweak=0,this.update=l.flags.NONE,null!=e&&this.fromOptions(e,t,r,i)}fromOptions(e,t,r,i){return null!=r&&-1!==r||(r=4294967296*Math.random()>>>0),null!=i&&-1!==i||(i=l.flags.NONE),"string"==typeof i&&(i=l.flags[i.toUpperCase()],o(null!=i,"update","flag")),o(Number.isSafeInteger(e)&&e>=0,"size","integer"),o(Number.isSafeInteger(t)&&t>=0,"n","integer"),o(r>>>0===r,"tweak","integer"),o(i>>>0===i,"update","integer"),o(i<=2,"update","range between 0 and 2"),e<8&&(e=8),0===t&&(t=1),e-=7&e,this.filter=Buffer.alloc(e/8,0),this.size=e,this.n=t,this.tweak=r,this.update=i,this}static fromOptions(e,t,r,i){return(new this).fromOptions(e,t,r,i)}hash(e,t){return h.tweak(e,t,this.tweak)%this.size}reset(){this.filter.fill(0)}add(e,t){const r=d(e,t);for(let e=0;e<this.n;e++){const t=this.hash(r,e);this.filter[t>>>3]|=1<<(7&t)}}test(e,t){const r=d(e,t);for(let e=0;e<this.n;e++){const t=this.hash(r,e);if(0==(this.filter[t>>>3]&1<<(7&t)))return!1}return!0}added(e,t){const r=d(e,t);let i=!1;for(let e=0;e<this.n;e++){const t=this.hash(r,e);i||0!=(this.filter[t>>>3]&1<<(7&t))||(i=!0),this.filter[t>>>3]|=1<<(7&t)}return i}static fromRate(e,t,r){o(Number.isSafeInteger(e)&&e>0,"items","integer"),o("number"==typeof t&&isFinite(t),"rate","number"),o(t>=0&&t<=1,"rate","range between 0.1 and 1.0.");const i=-1/u*e*Math.log(t)|0,s=Math.max(8,i);if(-1!==r&&s>8*l.MAX_BLOOM_FILTER_SIZE)throw new Error("Bloom filter size violates policy limits!");const n=Math.max(1,s/e*f|0);if(-1!==r&&n>l.MAX_HASH_FUNCS)throw new Error("Bloom filter size violates policy limits!");return new this(s,n,-1,r)}isWithinConstraints(){return!(this.size>8*l.MAX_BLOOM_FILTER_SIZE)&&!(this.n>l.MAX_HASH_FUNCS)}getSize(){return a.sizeVarBytes(this.filter)+9}write(e){return e.writeVarBytes(this.filter),e.writeU32(this.n),e.writeU32(this.tweak),e.writeU8(this.update),e}read(e){if(this.filter=e.readVarBytes(),this.size=8*this.filter.length,this.n=e.readU32(),this.tweak=e.readU32(),this.update=e.readU8(),this.update>2)throw new Error("Invalid update flag.");return this}}function d(e,t){return"string"!=typeof e?(o(null!=e&&!0===e._isBuffer,"value","buffer"),e):(o("string"==typeof t,"enc","string"),Buffer.from(e,t))}l.MAX_BLOOM_FILTER_SIZE=36e3,l.MAX_HASH_FUNCS=50,l.flags={NONE:0,ALL:1,PUBKEY_ONLY:2},l.flagsByVal=["NONE","ALL","PUBKEY_ONLY"],r.exports=l}],["bcrypto","/lib/murmur3-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(267,r)}],["bcrypto","/lib/js/murmur3.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(35,r);function a(e,t){o(null!=e&&!0===e._isBuffer),o("number"==typeof t);const r=e.length-e.length%4,i=3432918353,s=461845907;let n=0|t;for(let t=0;t<r;t+=4){let r=u(e,t);n=h(n=c(n^=r=h(r=c(r=h(r,i),15),s),13),5)+3864292196|0}let a=0;switch(3&e.length){case 3:a^=e[r+2]<<16;case 2:a^=e[r+1]<<8;case 1:n^=a=h(a=c(a=h(a^=e[r+0],i),15),s)}return n^=e.length,n=h(n^=n>>>16,2246822507),n=h(n^=n>>>13,3266489909),(n^=n>>>16)>>>0}function h(e,t){const r=65535&e,i=65535&t,s=r*i;return(e>>>16)*i+(t>>>16)*r+(s>>>16)<<16|65535&s}function c(e,t){return e<<t|e>>>32-t}function u(e,t){return e[t++]+256*e[t++]+65536*e[t++]+16777216*e[t]}e.native=0,e.sum=a,e.tweak=function(e,t,r){return o("number"==typeof t),o("number"==typeof r),a(e,h(t,4221880213)+(0|r))}}],["bfilter","/lib/rolling.js",function(e,t,r,i,s,n){"use strict";const{enforce:o}=__browser_require__(15,r),{encoding:a}=__browser_require__(24,r),h=__browser_require__(266,r),c=Buffer.alloc(0);class u{constructor(e,t){this.hi=e,this.lo=t}}function f(e,t){const r=a.readU32(e,t+4),i=a.readU32(e,t);return new u(r,i)}function l(e,t,r){a.writeU32(e,t.hi,r+4),a.writeU32(e,t.lo,r)}function d(e,t){return"string"!=typeof e?(o(null!=e&&!0===e._isBuffer,"value","buffer"),e):(o("string"==typeof t,"enc","string"),Buffer.from(e,t))}r.exports=class{constructor(e,t){this.entries=0,this.generation=1,this.n=0,this.limit=0,this.size=0,this.items=0,this.tweak=0,this.filter=c,null!=e&&this.fromRate(e,t)}fromRate(e,t){o(Number.isSafeInteger(e)&&e>0,"items","integer"),o("number"==typeof t&&isFinite(t),"rate","number"),o(t>=0&&t<=1,"rate","range between 0.1 and 1.0.");const r=Math.log(t),i=Math.max(1,Math.min(Math.round(r/Math.log(.5)),50)),s=(e+1)/2|0;let n=-1*i*(3*s)/Math.log(1-Math.exp(r/i));e=(((n=Math.ceil(n))+63)/64|0)<<1,e>>>=0,e=Math.max(1,e);const a=4294967296*Math.random()>>>0,h=Buffer.alloc(8*e,0);return this.n=i,this.limit=s,this.size=n,this.items=e,this.tweak=a,this.filter=h,this}static fromRate(e,t){return(new this).fromRate(e,t)}hash(e,t){return h.tweak(e,t,this.tweak)}reset(){0!==this.entries&&(this.entries=0,this.generation=1,this.filter.fill(0))}add(e,t){const r=d(e,t);if(this.entries===this.limit){this.entries=0,this.generation+=1,4===this.generation&&(this.generation=1);const e=4294967295*(1&this.generation),t=4294967295*(this.generation>>>1);for(let r=0;r<this.items;r+=2){const i=8*r,s=8*(r+1),n=f(this.filter,i),o=f(this.filter,s),a=n.hi^e|o.hi^t,h=n.lo^e|o.lo^t;n.hi&=a,n.lo&=h,o.hi&=a,o.lo&=h,l(this.filter,n,i),l(this.filter,o,s)}}this.entries+=1;for(let e=0;e<this.n;e++){const t=this.hash(r,e),i=63&t,s=(t>>>6)%this.items,n=8*(-2&s),o=8*(1|s),a=i%8,h=(i-a)/8;this.filter[n+h]&=~(1<<a),this.filter[n+h]|=(1&this.generation)<<a,this.filter[o+h]&=~(1<<a),this.filter[o+h]|=this.generation>>>1<<a}}test(e,t){if(0===this.entries)return!1;const r=d(e,t);for(let e=0;e<this.n;e++){const t=this.hash(r,e),i=63&t,s=(t>>>6)%this.items,n=8*(-2&s),o=8*(1|s),a=i%8,h=(i-a)/8;if(0==(this.filter[n+h]>>>a&1|this.filter[o+h]>>>a&1))return!1}return!0}added(e,t){const r=d(e,t);return!this.test(r)&&(this.add(r),!0)}}}],["bheep","/lib/bheep.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(270,r)}],["bheep","/lib/heap.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r);class a{constructor(e){this.compare=h,this.items=[],e&&this.set(e)}init(){const e=this.items.length;if(!(e<=1))for(let t=(e/2|0)-1;t>=0;t--)this.down(t,e)}size(){return this.items.length}set(e){o("function"==typeof e,"Comparator must be a function."),this.compare=e}insert(e){return this.items.push(e),this.up(this.items.length-1),this.items.length}shift(){if(0===this.items.length)return null;const e=this.items.length-1;return this.swap(0,e),this.down(0,e),this.items.pop()}remove(e){if(0===this.items.length)return null;const t=this.items.length-1;return e<0||e>t?null:(t!==e&&(this.swap(e,t),this.down(e,t),this.up(e)),this.items.pop())}swap(e,t){const r=this.items[e],i=this.items[t];this.items[e]=i,this.items[t]=r}less(e,t){return this.compare(this.items[e],this.items[t])<0}down(e,t){for(;;){const r=2*e+1;if(o(r>=0),r<0||r>=t)break;let i=r;const s=r+1;if(s<t&&!this.less(r,s)&&(i=s),!this.less(i,e))break;this.swap(e,i),e=i}}up(e){for(;;){const t=(e-1)/2|0;if(o(t>=0),t<0||t===e)break;if(!this.less(e,t))break;this.swap(t,e),e=t}}toArray(){const e=new a,t=[];for(e.compare=this.compare,e.items=this.items.slice();e.size()>0;)t.push(e.shift());return t}static fromArray(e,t){const r=new a;return r.set(e),r.items=t,r.init(),r}}function h(e,t){throw new Error("No heap comparator set.")}r.exports=a}],["bcoin","/lib/mempool/addrindexer.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),{BufferMap:a}=__browser_require__(86,r),h=__browser_require__(257,r);r.exports=class{constructor(e){this.network=e,this.index=new a,this.map=new a}reset(){this.index.clear(),this.map.clear()}getKey(e){const t=e.getPrefix(this.network);if(t<0)return null;const r=e.getHash(),i=r.length+1,s=Buffer.allocUnsafe(i);let n=s.writeUInt8(t);return n+=r.copy(s,1),o(n===i),s}get(e,t={}){const r=this.getEntries(e,t),i=[];for(const e of r)i.push(e.tx);return i}getMeta(e,t={}){const r=this.getEntries(e,t),i=[];for(const e of r){const t=h.fromTX(e.tx);t.mtime=e.time,i.push(t)}return i}getEntries(e,t={}){const{limit:r,reverse:i,after:s}=t,n=this.getKey(e);if(!n)return[];const o=this.index.get(n);if(!o)return[];let a=[];if(s&&!o.has(s)&&i)return a;if(s&&o.has(s)){let e=0;for(const t of o.keys()){if(0===t.compare(s))break;e+=1}let t=e+1,n=(a=Array.from(o.values())).length;n-t>r&&(n=t+r),i&&(t=0,(n=e)>r&&(t=n-r)),a=a.slice(t,n)}else if((a=Array.from(o.values())).length>r){let e=0,t=r;i&&(e=a.length-r,t=a.length),a=a.slice(e,t)}return i&&a.reverse(),a}insert(e,t){const r=e.tx,i=r.hash(),s=r.getAddresses(t);if(0!==s.length){for(const t of s){const r=this.getKey(t);if(!r)continue;let s=this.index.get(r);s||(s=new a,this.index.set(r,s)),o(!s.has(i)),s.set(i,e)}this.map.set(i,s)}}remove(e){const t=this.map.get(e);if(t){for(const r of t){const t=this.getKey(r);if(!t)continue;const i=this.index.get(t);o(i),o(i.has(e)),i.delete(e),0===i.size&&this.index.delete(t)}this.map.delete(e)}}}}],["bcoin","/lib/mining/index.js",function(e,t,r,i,s,n){"use strict";e.common=__browser_require__(273,r),e.CPUMiner=__browser_require__(274,r),e.mine=__browser_require__(275,r),e.Miner=__browser_require__(276,r),e.BlockTemplate=__browser_require__(277,r)}],["bcoin","/lib/mining/common.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(17,r),h=__browser_require__(10,r),c=e;c.swap32=function(e){for(let t=0;t<e.length;t+=4){const r=e.readUInt32LE(t,!0);e.writeUInt32BE(r,t,!0)}return e},c.rcmp=function(e,t){o(e.length===t.length);for(let r=e.length-1;r>=0;r--){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0},c.double256=function(e){let t,r,i=0;return o(32===e.length),i+=6.277101735386681e57*(4294967296*(t=e.readUInt32LE(28,!0))+(r=e.readUInt32LE(24,!0))),i+=3.402823669209385e38*(4294967296*(t=e.readUInt32LE(20,!0))+(r=e.readUInt32LE(16,!0))),i+=0x10000000000000000*(4294967296*(t=e.readUInt32LE(12,!0))+(r=e.readUInt32LE(8,!0))),i+=1*(4294967296*(t=e.readUInt32LE(4,!0))+(r=e.readUInt32LE(0,!0)))},c.getDifficulty=function(e){const t=2.695953529101131e67,r=c.double256(e);return 0===r?t:Math.floor(t/r)},c.getTarget=function(e){const t=a.fromCompact(e);if(t.isNeg())throw new Error("Target is negative.");if(t.isZero())throw new Error("Target is zero.");return t.toArrayLike(Buffer,"le",32)},c.getBits=function(e){const t=new h(e,"le");if(t.isZero())throw new Error("Target is zero.");return a.toCompact(t)}}],["bcoin","/lib/mining/cpuminer.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(19,r),{Lock:h}=__browser_require__(203,r),c=__browser_require__(20,r),u=__browser_require__(275,r);class f extends a{constructor(e){super(),this.opened=!1,this.miner=e,this.network=this.miner.network,this.logger=this.miner.logger.context("cpuminer"),this.workers=this.miner.workers,this.chain=this.miner.chain,this.locker=new h,this.running=!1,this.stopping=!1,this.job=null,this.stopJob=null,this.init()}init(){this.chain.on("tip",e=>{this.job&&this.job.attempt.prevBlock.equals(e.prevBlock)&&this.job.destroy()})}async open(){o(!this.opened,"CPUMiner is already open."),this.opened=!0}async close(){return o(this.opened,"CPUMiner is not open."),this.opened=!1,this.stop()}start(){o(!this.running,"Miner is already running."),this._start().catch(()=>{})}async _start(){for(o(!this.running,"Miner is already running."),this.running=!0,this.stopping=!1;;){this.job=null;try{this.job=await this.createJob()}catch(e){if(this.stopping)break;this.emit("error",e);break}if(this.stopping)break;let e,t;try{e=await this.mineAsync(this.job)}catch(e){if(this.stopping)break;this.emit("error",e);break}if(this.stopping)break;if(e){try{t=await this.chain.add(e)}catch(e){if(this.stopping)break;if("VerifyError"===e.type){this.logger.warning("Mined an invalid block!"),this.logger.error(e);continue}this.emit("error",e);break}if(t){if(this.stopping)break;this.logger.info("Found block: %d (%h).",t.height,t.hash),this.emit("block",e,t)}else this.logger.warning("Mined a bad-prevblk (race condition?)")}}const e=this.stopJob;e&&(this.stopJob=null,e.resolve())}async stop(){const e=await this.locker.lock();try{return await this._stop()}finally{e()}}async _stop(){this.running&&(o(this.running,"Miner is not running."),o(!this.stopping,"Miner is already stopping."),this.stopping=!0,this.job&&(this.job.destroy(),this.job=null),await this.wait(),this.running=!1,this.stopping=!1,this.job=null)}wait(){return new Promise((e,t)=>{o(!this.stopJob),this.stopJob={resolve:e,reject:t}})}async createJob(e,t){const r=await this.miner.createBlock(e,t);return new l(this,r)}async mineBlock(e,t){const r=await this.createJob(e,t);return await this.mineAsync(r)}notifyEntry(){this.running&&this.job&&c.now()-this.job.start>10&&(this.job.destroy(),this.job=null)}findNonce(e){const t=e.getHeader(),r=e.attempt.target,i=f.INTERVAL;let s,n=0,o=i;for(;o<=4294967295&&-1===(s=u(t,r,n,o));)this.sendStatus(e,o),n+=i,o+=i;return s}async findNonceAsync(e){if(!this.workers)return this.findNonce(e);const t=e.getHeader(),r=e.attempt.target,i=f.INTERVAL;let s,n=0,o=i;for(;o<=4294967295&&-1===(s=await this.workers.mine(t,r,n,o));){if(e.destroyed)return s;this.sendStatus(e,o),n+=i,o+=i}return s}mine(e){let t;for(e.start=c.now();-1===(t=this.findNonce(e));)e.updateNonce(),this.sendStatus(e,0);return e.commit(t)}async mineAsync(e){let t;for(e.start=c.now();-1===(t=await this.findNonceAsync(e));){if(e.destroyed)return null;e.updateNonce(),this.sendStatus(e,0)}return e.commit(t)}sendStatus(e,t){const r=e.attempt,i=r.prevBlock,s=e.getHashes(t),n=e.getRate(t);this.logger.info("Status: hashrate=%dkhs hashes=%d target=%d height=%d tip=%h",Math.floor(n/1e3),s,r.bits,r.height,i),this.emit("status",e,s,n)}}f.INTERVAL=2863311;class l{constructor(e,t){this.miner=e,this.attempt=t,this.destroyed=!1,this.committed=!1,this.start=c.now(),this.nonce1=0,this.nonce2=0,this.refresh()}getHeader(){const e=this.attempt,t=this.nonce1,r=this.nonce2,i=e.time,s=e.getRoot(t,r);return e.getHeader(s,i,0)}commit(e){const t=this.attempt,r=this.nonce1,i=this.nonce2,s=t.time;o(!this.committed,"Job already committed."),this.committed=!0;const n=t.getProof(r,i,s,e);return t.commit(n)}mine(){return this.miner.mine(this)}mineAsync(){return this.miner.mineAsync(this)}refresh(){return this.attempt.refresh()}updateNonce(){4294967296==++this.nonce2&&(this.nonce2=0,this.nonce1++)}destroy(){o(!this.destroyed,"Job already destroyed."),this.destroyed=!0}getHashes(e){return 4294967295*(4294967296*this.nonce1+this.nonce2)+e}getRate(e){const t=this.getHashes(e),r=c.now()-this.start;return Math.floor(t/Math.max(1,r))}addTX(e,t){return this.attempt.addTX(e,t)}pushTX(e,t){return this.attempt.pushTX(e,t)}}r.exports=f}],["bcoin","/lib/mining/mine.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(33,r);function h(e,t){o(e.length===t.length);for(let r=e.length-1;r>=0;r--){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0}r.exports=function(e,t,r,i){let s=r;for(e.writeUInt32LE(s,76,!0);s<=i;){if(h(a.digest(e),t)<=0)return s;s+=1,e.writeUInt32LE(s,76,!0)}return-1}}],["bcoin","/lib/mining/miner.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(19,r),h=__browser_require__(269,r),{BufferMap:c}=__browser_require__(86,r),u=__browser_require__(41,r),f=__browser_require__(88,r),l=__browser_require__(104,r),d=__browser_require__(277,r),p=__browser_require__(14,r),b=__browser_require__(17,r),g=__browser_require__(96,r),m=__browser_require__(274,r),{BlockEntry:_}=d;class w{constructor(e){this.network=p.primary,this.logger=null,this.workers=null,this.chain=null,this.mempool=null,this.version=-1,this.addresses=[],this.coinbaseFlags=Buffer.from("mined by bcoin","ascii"),this.preverify=!1,this.minWeight=g.MIN_BLOCK_WEIGHT,this.maxWeight=g.MAX_BLOCK_WEIGHT,this.priorityWeight=g.BLOCK_PRIORITY_WEIGHT,this.priorityThreshold=g.BLOCK_PRIORITY_THRESHOLD,this.maxSigops=b.MAX_BLOCK_SIGOPS_COST,this.reservedWeight=4e3,this.reservedSigops=400,this.fromOptions(e)}fromOptions(e){if(o(e,"Miner requires options."),o(e.chain&&"object"==typeof e.chain,"Miner requires a blockchain."),this.chain=e.chain,this.network=e.chain.network,this.logger=e.chain.logger,this.workers=e.chain.workers,null!=e.logger&&(o("object"==typeof e.logger),this.logger=e.logger),null!=e.workers&&(o("object"==typeof e.workers),this.workers=e.workers),null!=e.mempool&&(o("object"==typeof e.mempool),this.mempool=e.mempool),null!=e.version&&(o(e.version>>>0===e.version),this.version=e.version),e.address)if(Array.isArray(e.address))for(const t of e.address)this.addresses.push(new l(t));else this.addresses.push(new l(e.address));if(e.addresses){o(Array.isArray(e.addresses));for(const t of e.addresses)this.addresses.push(new l(t))}if(e.coinbaseFlags){let t=e.coinbaseFlags;"string"==typeof t&&(t=Buffer.from(t,"utf8")),o(null!=t&&!0===t._isBuffer),o(t.length<=20,"Coinbase flags > 20 bytes."),this.coinbaseFlags=t}return null!=e.preverify&&(o("boolean"==typeof e.preverify),this.preverify=e.preverify),null!=e.minWeight&&(o(e.minWeight>>>0===e.minWeight),this.minWeight=e.minWeight),null!=e.maxWeight&&(o(e.maxWeight>>>0===e.maxWeight),o(e.maxWeight<=b.MAX_BLOCK_WEIGHT,"Max weight must be below MAX_BLOCK_WEIGHT"),this.maxWeight=e.maxWeight),null!=e.maxSigops&&(o(e.maxSigops>>>0===e.maxSigops),o(e.maxSigops<=b.MAX_BLOCK_SIGOPS_COST,"Max sigops must be below MAX_BLOCK_SIGOPS_COST"),this.maxSigops=e.maxSigops),null!=e.priorityWeight&&(o(e.priorityWeight>>>0===e.priorityWeight),this.priorityWeight=e.priorityWeight),null!=e.priorityThreshold&&(o(e.priorityThreshold>>>0===e.priorityThreshold),this.priorityThreshold=e.priorityThreshold),null!=e.reservedWeight&&(o(e.reservedWeight>>>0===e.reservedWeight),this.reservedWeight=e.reservedWeight),null!=e.reservedSigops&&(o(e.reservedSigops>>>0===e.reservedSigops),this.reservedSigops=e.reservedSigops),this}static fromOptions(e){return(new this).fromOptions(e)}}function y(e,t){return e.priority===t.priority?v(e,t):t.priority-e.priority}function v(e,t){let r=e.rate,i=t.rate;return e.descRate>e.rate&&(r=e.descRate),t.descRate>t.rate&&(i=t.descRate),r===i&&(r=e.priority,i=t.priority),i-r}r.exports=class extends a{constructor(e){super(),this.opened=!1,this.options=new w(e),this.network=this.options.network,this.logger=this.options.logger.context("miner"),this.workers=this.options.workers,this.chain=this.options.chain,this.mempool=this.options.mempool,this.addresses=this.options.addresses,this.locker=this.chain.locker,this.cpu=new m(this),this.init()}init(){this.cpu.on("error",e=>{this.emit("error",e)})}async open(){o(!this.opened,"Miner is already open."),this.opened=!0,await this.cpu.open(),this.logger.info("Miner loaded (flags=%s).",this.options.coinbaseFlags.toString("utf8")),0===this.addresses.length&&this.logger.warning("No reward address is set for miner!")}async close(){return o(this.opened,"Miner is not open."),this.opened=!1,this.cpu.close()}async createBlock(e,t){const r=await this.locker.lock();try{return await this._createBlock(e,t)}finally{r()}}async _createBlock(e,t){let r=this.options.version;e||(e=this.chain.tip),t||(t=this.getAddress()),-1===r&&(r=await this.chain.computeBlockVersion(e));const i=await this.chain.getMedianTime(e),s=Math.max(this.network.now(),i+1),n=await this.chain.getDeployments(s,e),o=await this.chain.getTarget(s,e),a=n.hasMTP()?i:s,h=new d({prevBlock:e.hash,height:e.height+1,version:r,time:s,bits:o,locktime:a,mtp:i,flags:n.flags,address:t,coinbaseFlags:this.options.coinbaseFlags,witness:n.hasWitness(),interval:this.network.halvingInterval,weight:this.options.reservedWeight,sigops:this.options.reservedSigops});if(this.assemble(h),this.logger.debug("Created block tmpl (height=%d, weight=%d, fees=%d, txs=%s, diff=%d).",h.height,h.weight,f.btc(h.fees),h.items.length+1,h.getDifficulty()),this.options.preverify){const e=h.toBlock();try{await this.chain._verifyBlock(e)}catch(e){if("VerifyError"===e.type)throw this.logger.warning("Miner created invalid block!"),this.logger.error(e),new Error("BUG: Miner created invalid block.");throw e}this.logger.debug("Preverified block %d successfully!",h.height)}return h}updateTime(e){e.time=Math.max(this.network.now(),e.mtp+1)}createJob(e,t){return this.cpu.createJob(e,t)}mineBlock(e,t){return this.cpu.mineBlock(e,t)}addAddress(e){this.addresses.push(new l(e))}getAddress(){return 0===this.addresses.length?new l:this.addresses[u.randomRange(0,this.addresses.length)]}assemble(e){if(!this.mempool)return void e.refresh();o(this.mempool.tip.equals(this.chain.tip.hash),"Mempool/chain tip mismatch! Unsafe to create block.");const t=new c,r=new h(v);let i=this.options.priorityWeight>0;i&&r.set(y);for(const i of this.mempool.map.values()){const s=_.fromEntry(i,e),n=s.tx;if(n.isCoinbase())throw new Error("Cannot add coinbase to block.");for(const{prevout:e}of n.inputs){const r=e.hash;this.mempool.hasEntry(r)&&(s.depCount+=1,t.has(r)||t.set(r,[]),t.get(r).push(s))}s.depCount>0||r.insert(s)}for(;r.size()>0;){const s=r.shift(),n=s.tx,o=s.hash;let a=e.weight,h=e.sigops;if(!n.isFinal(e.height,e.locktime))continue;if(!e.witness&&n.hasWitness())continue;if((a+=n.getWeight())>this.options.maxWeight)continue;if((h+=s.sigops)>this.options.maxSigops)continue;if(i){if(a>this.options.priorityWeight||s.priority<this.options.priorityThreshold){i=!1,r.set(v),r.init(),r.insert(s);continue}}else if(s.free&&a>=this.options.minWeight)continue;e.weight=a,e.sigops=h,e.fees+=s.fee,e.items.push(s);const c=t.get(o);if(c)for(const e of c)0==--e.depCount&&r.insert(e)}if(e.refresh(),o(e.weight<=b.MAX_BLOCK_WEIGHT,"Block exceeds reserved weight!"),this.options.preverify){const t=e.toBlock();o(t.getWeight()<=e.weight,"Block exceeds reserved weight!"),o(t.getBaseSize()<=b.MAX_BLOCK_SIZE,"Block exceeds max block size.")}}}}],["bcoin","/lib/mining/template.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(33,r),c=__browser_require__(184,r),u=__browser_require__(41,r),f=__browser_require__(20,r),l=__browser_require__(104,r),d=__browser_require__(85,r),p=__browser_require__(183,r),b=__browser_require__(109,r),g=__browser_require__(112,r),m=__browser_require__(17,r),_=__browser_require__(96,r),w=__browser_require__(128,r),y=__browser_require__(89,r),v=__browser_require__(273,r),E=Buffer.alloc(0);class S{constructor(e){this.prevBlock=m.ZERO_HASH,this.version=1,this.height=0,this.time=0,this.bits=0,this.target=m.ZERO_HASH,this.locktime=0,this.mtp=0,this.flags=0,this.coinbaseFlags=E,this.witness=!1,this.address=new l,this.sigops=400,this.weight=4e3,this.interval=21e4,this.fees=0,this.tree=new A,this.commitment=m.ZERO_HASH,this.left=E,this.right=E,this.items=[],e&&this.fromOptions(e)}fromOptions(e){return o(e),null!=e.prevBlock&&(o(null!=e.prevBlock&&!0===e.prevBlock._isBuffer),this.prevBlock=e.prevBlock),null!=e.version&&(o("number"==typeof e.version),this.version=e.version),null!=e.height&&(o("number"==typeof e.height),this.height=e.height),null!=e.time&&(o("number"==typeof e.time),this.time=e.time),null!=e.bits&&this.setBits(e.bits),null!=e.target&&this.setTarget(e.target),null!=e.locktime&&(o("number"==typeof e.locktime),this.locktime=e.locktime),null!=e.mtp&&(o("number"==typeof e.mtp),this.mtp=e.mtp),null!=e.flags&&(o("number"==typeof e.flags),this.flags=e.flags),null!=e.coinbaseFlags&&(o(null!=e.coinbaseFlags&&!0===e.coinbaseFlags._isBuffer),this.coinbaseFlags=e.coinbaseFlags),null!=e.witness&&(o("boolean"==typeof e.witness),this.witness=e.witness),null!=e.address&&this.address.fromOptions(e.address),null!=e.sigops&&(o("number"==typeof e.sigops),this.sigops=e.sigops),null!=e.weight&&(o("number"==typeof e.weight),this.weight=e.weight),null!=e.interval&&(o("number"==typeof e.interval),this.interval=e.interval),null!=e.fees&&(o("number"==typeof e.fees),this.fees=e.fees),null!=e.items&&(o(Array.isArray(e.items)),this.items=e.items),this}static fromOptions(e){return(new this).fromOptions(e)}getWitnessHash(){const e=m.ZERO_HASH,t=[];t.push(m.ZERO_HASH);for(const{tx:e}of this.items)t.push(e.witnessHash());const[r,i]=c.createRoot(h,t);return o(!i),h.root(r,e)}getWitnessScript(){return y.fromCommitment(this.commitment)}setBits(e){o("number"==typeof e),this.bits=e,this.target=v.getTarget(e)}setTarget(e){o(null!=e&&!0===e._isBuffer),this.bits=v.getBits(e),this.target=e}getReward(){return m.getReward(this.height,this.interval)+this.fees}createCoinbase(e){const t=m.WITNESS_SCALE_FACTOR,r=new d,i=new b;i.script.pushInt(this.height),i.script.pushData(Buffer.alloc(20,0));const s=Buffer.allocUnsafe(4);s.writeUInt32LE(u.randomInt(),0,!0),i.script.pushData(s),i.script.pushData(Buffer.alloc(8,0)),i.script.compile(),this.witness&&(i.witness.push(m.ZERO_HASH),i.witness.compile()),r.inputs.push(i);const n=new g;if(n.script.fromPubkeyhash(Buffer.alloc(20,0)),n.value=this.getReward(),r.outputs.push(n),this.witness){const t=new g;t.script.fromCommitment(e),r.outputs.push(t)}const a=i.script.get(0);o(a);const h=5-a.getSize();return o(h>=0),this.witness?(o.strictEqual(r.getWeight()+h*t,724),o.strictEqual(r.getBaseSize()+h,172),o.strictEqual(r.getSize()+h,208)):(o.strictEqual(r.getWeight()+h*t,500),o.strictEqual(r.getBaseSize()+h,125),o.strictEqual(r.getSize()+h,125)),i.script.setData(1,this.coinbaseFlags),i.script.compile(),n.script.fromAddress(this.address),r.refresh(),o(i.script.getSize()<=100,"Coinbase input script is too large!"),r}refresh(){const e=this.getWitnessHash(),t=this.createCoinbase(e),r=t.toNormal();let i=0;i+=4,i+=1,i+=t.inputs[0].getSize(),i-=12;const s=r.slice(0,i);i+=8;const n=r.slice(i);this.commitment=e,this.left=s,this.right=n,this.tree=A.fromItems(this.items)}getRawCoinbase(e,t){let r=0;r+=this.left.length,r+=8,r+=this.right.length;const i=a.write(r);return i.writeBytes(this.left),i.writeU32BE(e),i.writeU32BE(t),i.writeBytes(this.right),i.render()}getRoot(e,t){const r=this.getRawCoinbase(e,t),i=h.digest(r);return this.tree.withFirst(i)}getHeader(e,t,r){const i=a.write(80);return i.writeU32(this.version),i.writeHash(this.prevBlock),i.writeHash(e),i.writeU32(t),i.writeU32(this.bits),i.writeU32(r),i.render()}getProof(e,t,r,i){const s=this.getRoot(e,t),n=this.getHeader(s,r,i),o=h.digest(n);return new k(o,s,e,t,r,i)}getCoinbase(e,t){const r=this.getRawCoinbase(e,t),i=d.fromRaw(r);if(this.witness){const e=i.inputs[0];e.witness.push(m.ZERO_HASH),e.witness.compile(),i.refresh()}return i}commit(e){const t=e.root,r=e.nonce1,i=e.nonce2,s=e.time,n=e.nonce,o=new p;o.version=this.version,o.prevBlock=this.prevBlock,o.merkleRoot=t,o.time=s,o.bits=this.bits,o.nonce=n;const a=this.getCoinbase(r,i);o.txs.push(a);for(const e of this.items)o.txs.push(e.tx);return o}toCoinbase(){return this.getCoinbase(0,0)}toBlock(){const e=this.getProof(0,0,this.time,0);return this.commit(e)}getDifficulty(){return v.getDifficulty(this.target)}setAddress(e){this.address=new l(e),this.refresh()}addTX(e,t){o(!e.mutable,"Cannot add mutable TX to block.");const r=I.fromTX(e,t,this),i=r.tx.getWeight(),s=r.sigops;return!!e.isFinal(this.height,this.locktime)&&(!(this.weight+i>m.MAX_BLOCK_WEIGHT)&&(!(this.sigops+s>m.MAX_BLOCK_SIGOPS_COST)&&(!(!this.witness&&e.hasWitness())&&(this.weight+=i,this.sigops+=s,this.fees+=r.fee,this.items.push(r),!0))))}pushTX(e,t){o(!e.mutable,"Cannot add mutable TX to block."),t||(t=new w);const r=I.fromTX(e,t,this),i=r.tx.getWeight(),s=r.sigops;return this.weight+=i,this.sigops+=s,this.fees+=r.fee,this.items.push(r),!0}}class I{constructor(e){this.tx=e,this.hash=e.hash(),this.fee=0,this.rate=0,this.priority=0,this.free=!1,this.sigops=0,this.descRate=0,this.depCount=0}static fromTX(e,t,r){const i=new this(e);return i.fee=e.getFee(t),i.rate=e.getRate(t),i.priority=e.getPriority(t,r.height),i.free=!1,i.sigops=e.getSigopsCost(t,r.flags),i.descRate=i.rate,i}static fromEntry(e,t){const r=new this(e.tx);return r.fee=e.getFee(),r.rate=e.getDeltaRate(),r.priority=e.getPriority(t.height),r.free=e.getDeltaFee()<_.getMinFee(e.size),r.sigops=e.sigops,r.descRate=e.getDescRate(),r}}class k{constructor(e,t,r,i,s,n){this.hash=e,this.root=t,this.nonce1=r,this.nonce2=i,this.time=s,this.nonce=n}rhash(){return f.revHex(this.hash)}verify(e){return v.rcmp(this.hash,e)<=0}getDifficulty(){return v.getDifficulty(this.hash)}}class A{constructor(){this.steps=[]}withFirst(e){for(const t of this.steps)e=h.root(e,t);return e}toJSON(){const e=[];for(const t of this.steps)e.push(t.toString("hex"));return e}fromItems(e){const t=[];t.push(m.ZERO_HASH);for(const r of e)t.push(r.tx.hash());return this.fromLeaves(t)}static fromItems(e){return(new this).fromItems(e)}fromBlock(e){const t=[];t.push(m.ZERO_HASH);for(let r=1;r<e.length;r++){const i=e[r];t.push(i.hash())}return this.fromLeaves(t)}static fromBlock(e){return(new this).fromBlock(e)}fromLeaves(e){let t=e.length;for(;t>1;){const r=[m.ZERO_HASH];this.steps.push(e[1]),t%2&&e.push(e[t-1]);for(let i=2;i<t;i+=2){const t=h.root(e[i],e[i+1]);r.push(t)}t=(e=r).length}return this}static fromLeaves(e){return(new this).fromLeaves(e)}}(e=S).BlockTemplate=S,e.BlockEntry=I,r.exports=e}],["bcoin","/lib/net/index.js",function(e,t,r,i,s,n){"use strict";e.bip152=__browser_require__(279,r),e.common=__browser_require__(280,r),e.Framer=__browser_require__(283,r),e.HostList=__browser_require__(284,r),e.NetAddress=__browser_require__(296,r),e.packets=__browser_require__(300,r),e.Parser=__browser_require__(302,r),e.Peer=__browser_require__(303,r),e.Pool=__browser_require__(306,r)}],["bcoin","/lib/net/bip152.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(17,r),c=__browser_require__(51,r),{siphash:u}=__browser_require__(189,r),f=__browser_require__(185,r),l=__browser_require__(85,r),d=__browser_require__(187,r),p=__browser_require__(183,r),b=__browser_require__(280,r),{encoding:g}=a;class m{constructor(e){this.hash=h.ZERO_HASH,this.indexes=[],e&&this.fromOptions(e)}fromOptions(e){return this.hash=e.hash,e.indexes&&(this.indexes=e.indexes),this}static fromOptions(e){return(new this).fromOptions(e)}fromCompact(e){this.hash=e.hash();for(let t=0;t<e.available.length;t++)e.available[t]||this.indexes.push(t);return this}static fromCompact(e){return(new this).fromCompact(e)}fromReader(e){this.hash=e.readHash();const t=e.readVarint();for(let r=0;r<t;r++){const t=e.readVarint();o(t<=65535),this.indexes.push(t)}let r=0;for(let e=0;e<t;e++){let t=this.indexes[e];o((t+=r)<=65535),this.indexes[e]=t,r=t+1}return this}fromRaw(e){return this.fromReader(a.read(e))}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e){return(new this).fromRaw(e)}getSize(){let e=0;e+=32,e+=g.sizeVarint(this.indexes.length);for(let t=0;t<this.indexes.length;t++){let r=this.indexes[t];t>0&&(r-=this.indexes[t-1]+1),e+=g.sizeVarint(r)}return e}toWriter(e){e.writeHash(this.hash),e.writeVarint(this.indexes.length);for(let t=0;t<this.indexes.length;t++){let r=this.indexes[t];t>0&&(r-=this.indexes[t-1]+1),e.writeVarint(r)}return e}toRaw(){const e=this.getSize();return this.toWriter(a.write(e)).render()}}e.CompactBlock=class extends f{constructor(e){super(),this.keyNonce=null,this.ids=[],this.ptx=[],this.available=[],this.idMap=new Map,this.count=0,this.sipKey=null,this.totalTX=0,this.now=0,e&&this.fromOptions(e)}fromOptions(e){return this.parseOptions(e),o(null!=e.keyNonce&&!0===e.keyNonce._isBuffer),o(Array.isArray(e.ids)),o(Array.isArray(e.ptx)),this.keyNonce=e.keyNonce,this.ids=e.ids,this.ptx=e.ptx,e.available&&(this.available=e.available),e.idMap&&(this.idMap=e.idMap),e.count&&(this.count=e.count),null!=e.totalTX&&(this.totalTX=e.totalTX),this.sipKey=this.getKey(),this}static fromOptions(e){return(new this).fromOptions(e)}verifyBody(){return!0}fromRaw(e){const t=a.read(e);this.readHead(t),this.keyNonce=t.readBytes(8),this.sipKey=this.getKey();const r=t.readVarint();this.totalTX+=r;for(let e=0;e<r;e++){const e=t.readU32(),r=t.readU16();this.ids.push(4294967296*r+e)}const i=t.readVarint();this.totalTX+=i;for(let e=0;e<i;e++){const e=t.readVarint();o(e<=65535),o(e<this.totalTX);const r=l.fromReader(t);this.ptx.push([e,r])}return this}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}toRaw(){return this.frameRaw(!0)}toNormal(){return this.frameRaw(!1)}toWriter(e){return this.writeRaw(e,!0)}toNormalWriter(e){return this.writeRaw(e,!1)}frameRaw(e){const t=this.getSize(e);return this.writeRaw(a.write(t),e).render()}getSize(e){let t=0;t+=80,t+=8,t+=g.sizeVarint(this.ids.length),t+=6*this.ids.length,t+=g.sizeVarint(this.ptx.length);for(const[r,i]of this.ptx)t+=g.sizeVarint(r),t+=e?i.getSize():i.getBaseSize();return t}writeRaw(e,t){this.writeHead(e),e.writeBytes(this.keyNonce),e.writeVarint(this.ids.length);for(const t of this.ids){const r=t%4294967296,i=(t-r)/4294967296;o(i<=65535),e.writeU32(r),e.writeU16(i)}e.writeVarint(this.ptx.length);for(const[r,i]of this.ptx)e.writeVarint(r),t?i.toWriter(e):i.toNormalWriter(e);return e}toRequest(){return m.fromCompact(this)}fillMempool(e,t){if(this.count===this.totalTX)return!0;const r=new Set;for(const{tx:i}of t.map.values()){let t=i.hash();e&&(t=i.witnessHash());const s=this.sid(t),n=this.idMap.get(s);if(null!=n)if(r.has(n))this.available[n]=null,this.count-=1;else if(this.available[n]=i,r.add(n),this.count+=1,this.count===this.totalTX)return!0}return!1}fillMissing(e){let t=0;for(let r=0;r<this.available.length;r++)if(!this.available[r]){if(t>=e.txs.length)return!1;this.available[r]=e.txs[t++]}return t===e.txs.length}sid(e){const[t,r]=u(e,this.sipKey);return 4294967296*(65535&t)+(r>>>0)}hasIndex(e){return null!=this.available[e]}getKey(){const e=Buffer.concat([this.toHead(),this.keyNonce]);return c.digest(e).slice(0,16)}init(){if(0===this.totalTX)throw new Error("Empty vectors.");if(this.totalTX>h.MAX_BLOCK_SIZE/10)throw new Error("Compact block too big.");if(this.totalTX>(h.MAX_BLOCK_SIZE-81)/60)throw new Error("Compact block too big.");for(let e=0;e<this.totalTX;e++)this.available.push(null);let e=-1,t=0;for(let t=0;t<this.ptx.length;t++){const[r,i]=this.ptx[t];o((e+=r+1)<=65535),o(e<=this.ids.length+t),this.available[e]=i,this.count+=1}for(let e=0;e<this.ids.length;e++){const r=this.ids[e];for(;this.available[e+t];)t+=1;if(this.idMap.has(r))return!1;this.idMap.set(r,e+t)}return!0}toBlock(){const e=new p;e.version=this.version,e.prevBlock=this.prevBlock,e.merkleRoot=this.merkleRoot,e.time=this.time,e.bits=this.bits,e.nonce=this.nonce,e._hash=this._hash,e._hhash=this._hhash;for(const t of this.available)o(t,"Compact block is not full."),e.txs.push(t);return e}fromBlock(e,t,r){this.version=e.version,this.prevBlock=e.prevBlock,this.merkleRoot=e.merkleRoot,this.time=e.time,this.bits=e.bits,this.nonce=e.nonce,this.totalTX=e.txs.length,this._hash=e._hash,this._hhash=e._hhash,r||(r=b.nonce()),this.keyNonce=r,this.sipKey=this.getKey();for(let r=1;r<e.txs.length;r++){const i=e.txs[r];let s=i.hash();t&&(s=i.witnessHash());const n=this.sid(s);this.ids.push(n)}return this.ptx.push([0,e.txs[0]]),this}static fromBlock(e,t,r){return(new this).fromBlock(e,t,r)}toHeaders(){return d.fromBlock(this)}},e.TXRequest=m,e.TXResponse=class{constructor(e){this.hash=h.ZERO_HASH,this.txs=[],e&&this.fromOptions(e)}fromOptions(e){return this.hash=e.hash,e.txs&&(this.txs=e.txs),this}static fromOptions(e){return(new this).fromOptions(e)}fromReader(e){this.hash=e.readHash();const t=e.readVarint();for(let r=0;r<t;r++)this.txs.push(l.fromReader(e));return this}fromRaw(e){return this.fromReader(a.read(e))}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e){return(new this).fromRaw(e)}fromBlock(e,t){this.hash=t.hash;for(const r of t.indexes){if(r>=e.txs.length)break;this.txs.push(e.txs[r])}return this}static fromBlock(e,t){return(new this).fromBlock(e,t)}toRaw(){return this.frameRaw(!0)}toNormal(){return this.frameRaw(!1)}toWriter(e){return this.writeRaw(e,!0)}toNormalWriter(e){return this.writeRaw(e,!1)}getSize(e){let t=0;t+=32,t+=g.sizeVarint(this.txs.length);for(const r of this.txs)t+=e?r.getSize():r.getBaseSize();return t}writeRaw(e,t){e.writeHash(this.hash),e.writeVarint(this.txs.length);for(const r of this.txs)t?r.toWriter(e):r.toNormalWriter(e);return e}frameRaw(e){const t=this.getSize(e);return this.writeRaw(a.write(t),e).render()}}}],["bcoin","/lib/net/common.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(41,r),a=__browser_require__(281,r);e.PROTOCOL_VERSION=70015,e.MIN_VERSION=70001,e.HEADERS_VERSION=31800,e.PONG_VERSION=6e4,e.BLOOM_VERSION=70011,e.SENDHEADERS_VERSION=7012,e.COMPACT_VERSION=70014,e.COMPACT_WITNESS_VERSION=70015,e.services={NETWORK:1,GETUTXO:2,BLOOM:4,WITNESS:8},e.LOCAL_SERVICES=0|e.services.NETWORK|e.services.WITNESS,e.REQUIRED_SERVICES=0|e.services.NETWORK,e.USER_AGENT=`/bcoin:${a.version}/`,e.MAX_MESSAGE=4e6,e.BAN_TIME=86400,e.BAN_SCORE=100,e.nonce=function(){return o.randomBytes(8)},e.ZERO_KEY=Buffer.alloc(33,0),e.ZERO_SIG=Buffer.alloc(64,0),e.ZERO_NONCE=Buffer.alloc(8,0),e.MAX_INV=5e4,e.MAX_REQUEST=5e3,e.MAX_BLOCK_REQUEST=51e3,e.MAX_TX_REQUEST=1e4}],["bcoin","/lib/pkg.js",function(e,t,r,i,s,n){"use strict";const o=e;o.name=__browser_require__(282,r).name,o.core="bcoin",o.organization="bcoin-org",o.currency="bitcoin",o.unit="btc",o.base="satoshi",o.cfg=`${o.core}.conf`,o.url=`https://github.com/${o.organization}/${o.name}`,o.version=__browser_require__(282,r).version}],["bcoin","/package.json",function(e,t,r,i,s,n){r.exports={author:{name:"Fedor Indutny",email:"fedor@indutny.com"},bin:{bcoin:"./bin/bcoin","bcoin-node":"./bin/node","bcoin-spvnode":"./bin/spvnode",bwallet:"./bin/bwallet","bcoin-cli":"./bin/bcoin-cli","bwallet-cli":"./bin/bwallet-cli"},browser:{"./lib/hd/nfkd":"./lib/hd/nfkd-compat.js","./lib/hd/wordlist":"./lib/hd/wordlist-browser.js","./lib/workers/child":"./lib/workers/child-browser.js","./lib/workers/parent":"./lib/workers/parent-browser.js","./lib/bcoin":"./lib/bcoin-browser.js"},bugs:{url:"https://github.com/bcoin-org/bcoin/issues"},bundleDependencies:["bcfg","bcrypto","bcurl","bdb","bdns","bevent","bfile","bfilter","bheep","binet","blgr","blru","blst","bmutex","brq","bs32","bsert","bsock","bsocks","btcp","buffer-map","bufio","bupnp","bval","bweb","loady","n64","nan"],contributors:[{name:"Christopher Jeffrey",email:"chjjeffrey@gmail.com"}],dependencies:{bcfg:"git+https://github.com/bcoin-org/bcfg.git#semver:~0.1.6",bcrypto:"git+https://github.com/bcoin-org/bcrypto.git#semver:~5.0.4",bcurl:"git+https://github.com/bcoin-org/bcurl.git#semver:^0.1.6",bdb:"git+https://github.com/bcoin-org/bdb.git#semver:~1.2.1",bdns:"git+https://github.com/bcoin-org/bdns.git#semver:~0.1.5",bevent:"git+https://github.com/bcoin-org/bevent.git#semver:~0.1.5",bfile:"git+https://github.com/bcoin-org/bfile.git#semver:~0.2.1",bfilter:"git+https://github.com/bcoin-org/bfilter.git#semver:~2.0.0",bheep:"git+https://github.com/bcoin-org/bheep.git#semver:~0.1.5",binet:"git+https://github.com/bcoin-org/binet.git#semver:~0.3.5",blgr:"git+https://github.com/bcoin-org/blgr.git#semver:~0.1.7",blru:"git+https://github.com/bcoin-org/blru.git#semver:~0.1.6",blst:"git+https://github.com/bcoin-org/blst.git#semver:~0.1.5",bmutex:"git+https://github.com/bcoin-org/bmutex.git#semver:~0.1.6",brq:"git+https://github.com/bcoin-org/brq.git#semver:~0.1.7",bs32:"git+https://github.com/bcoin-org/bs32.git#semver:=0.1.6",bsert:"git+https://github.com/chjj/bsert.git#semver:~0.0.10",bsock:"git+https://github.com/bcoin-org/bsock.git#semver:~0.1.9",bsocks:"git+https://github.com/bcoin-org/bsocks.git#semver:~0.2.6",btcp:"git+https://github.com/bcoin-org/btcp.git#semver:~0.1.5","buffer-map":"git+https://github.com/chjj/buffer-map.git#semver:~0.0.7",bufio:"git+https://github.com/bcoin-org/bufio.git#semver:~1.0.6",bupnp:"git+https://github.com/bcoin-org/bupnp.git#semver:~0.2.6",bval:"git+https://github.com/bcoin-org/bval.git#semver:~0.1.6",bweb:"git+https://github.com/bcoin-org/bweb.git#semver:=0.1.9",loady:"git+https://github.com/chjj/loady.git#semver:~0.0.1",n64:"git+https://github.com/chjj/n64.git#semver:~0.2.10",nan:"git+https://github.com/braydonf/nan.git#semver:=2.14.0"},deprecated:!1,description:"Bitcoin bike-shed",devDependencies:{bmocha:"git+https://github.com/bcoin-org/bmocha.git#semver:=2.1.2"},engines:{node:">=10.0.0"},homepage:"https://github.com/bcoin-org/bcoin",keywords:["bcoin","bitcoin","blockchain","cryptocurrency","wallet"],license:"MIT",main:"./lib/bcoin.js",name:"bcoin",repository:{type:"git",url:"git://github.com/bcoin-org/bcoin.git"},scripts:{browserify:"browserify -s bcoin lib/bcoin-browser.js | uglifyjs -c > bcoin.js",clean:"rm -f {browser/,}{bcoin.js,bcoin-worker.js,app.js,worker.js}",docs:"jsdoc -c jsdoc.json",lint:"eslint $(cat .eslintfiles) || exit 0","lint-ci":"eslint $(cat .eslintfiles)","lint-file":"eslint",test:"bmocha --reporter spec test/*.js","test-browser":"NODE_BACKEND=js bmocha --reporter spec test/*.js","test-ci":"nyc -a -n 'lib/**/*.js' --reporter=lcov --reporter=text npm run test","test-file":"bmocha --reporter spec","test-file-browser":"NODE_BACKEND=js bmocha --reporter spec"},version:"2.0.0"}}],["bcoin","/lib/net/framer.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(14,r),h=__browser_require__(33,r);r.exports=class{constructor(e){this.network=a.get(e)}packet(e,t,r){o(t,"No payload."),o(e.length<12),o(t.length<=4294967295);const i=Buffer.allocUnsafe(24+t.length);i.writeUInt32LE(this.network.magic,0,!0),i.write(e,4,"ascii");for(let t=4+e.length;t<16;t++)i[t]=0;return i.writeUInt32LE(t.length,16,!0),r||(r=h.digest(t)),r.copy(i,20,0,4),t.copy(i,24),i}}}],["bcoin","/lib/net/hostlist.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(195,r),h=__browser_require__(252,r),c=__browser_require__(285,r),u=__browser_require__(292,r),f=__browser_require__(198,r),l=__browser_require__(266,r),d=__browser_require__(294,r),{randomRange:p}=__browser_require__(41,r),b=__browser_require__(20,r),g=__browser_require__(14,r),m=__browser_require__(296,r),_=__browser_require__(280,r),w=__browser_require__(297,r),{inspectSymbol:y}=__browser_require__(21,r),v=Buffer.allocUnsafe(32);class E{constructor(e){this.options=new k(e),this.network=this.options.network,this.logger=this.options.logger.context("hostlist"),this.address=this.options.address,this.resolve=this.options.resolve,this.dnsSeeds=[],this.dnsNodes=[],this.map=new Map,this.fresh=[],this.totalFresh=0,this.used=[],this.totalUsed=0,this.nodes=[],this.local=new Map,this.banned=new Map,this.timer=null,this.needsFlush=!1,this.flushing=!1,this.init()}init(){const e=this.options,t=E.scores;for(let t=0;t<e.maxBuckets;t++)this.fresh.push(new Map);for(let t=0;t<e.maxBuckets;t++)this.used.push(new d);this.setSeeds(e.seeds),this.setNodes(e.nodes),this.pushLocal(this.address,t.MANUAL),this.addLocal(e.host,e.port,t.BIND);const r=c.getPublic(),i=this.address.port;for(const e of r)this.addLocal(e,i,t.IF)}async open(){try{await this.loadFile()}catch(e){this.logger.warning("Hosts deserialization failed."),this.logger.error(e)}0===this.size()&&this.injectSeeds(),await this.discoverNodes(),this.start()}async close(){this.stop(),await this.flush(),this.reset()}start(){this.options.memory||this.options.filename&&(o(null==this.timer),this.timer=setInterval(()=>this.flush(),this.options.flushInterval))}stop(){this.options.memory||this.options.filename&&(o(null!=this.timer),clearInterval(this.timer),this.timer=null)}injectSeeds(){const e=w.get(this.network.type);for(const t of e){const e=m.fromHostname(t,this.network);e.isRoutable()&&(!this.options.onion&&e.isOnion()||0!==e.port&&this.add(e))}}async loadFile(){const e=this.options.filename;if(h.unsupported)return;if(this.options.memory)return;if(!e)return;let t;try{t=await h.readFile(e,"utf8")}catch(e){if("ENOENT"===e.code)return;throw e}const r=JSON.parse(t);this.fromJSON(r)}async flush(){const e=this.options.filename;if(h.unsupported)return;if(this.options.memory)return;if(!e)return;if(!this.needsFlush)return;if(this.flushing)return;this.needsFlush=!1,this.logger.debug("Writing hosts to %s.",e);const t=this.toJSON(),r=JSON.stringify(t);this.flushing=!0;try{await h.writeFile(e,r,"utf8")}catch(e){this.logger.warning("Writing hosts failed."),this.logger.error(e)}this.flushing=!1}size(){return this.totalFresh+this.totalUsed}isFull(){const e=this.options.maxBuckets*this.options.maxEntries;return this.size()>=e}reset(){this.map.clear();for(const e of this.fresh)e.clear();for(const e of this.used)e.reset();this.totalFresh=0,this.totalUsed=0,this.nodes.length=0}ban(e){this.banned.set(e,b.now())}unban(e){this.banned.delete(e)}clearBanned(){this.banned.clear()}isBanned(e){const t=this.banned.get(e);return null!=t&&(!(b.now()>t+this.options.banTime)||(this.banned.delete(e),!1))}getHost(){let e=null;if(this.totalFresh>0&&(e=this.fresh),this.totalUsed>0&&(0!==this.totalFresh&&0!==A(2)||(e=this.used)),!e)return null;const t=this.network.now();let r=1;for(;;){const i=e[A(e.length)];if(0===i.size)continue;let s,n=A(i.size);if(e===this.used)for(s=i.head;n--;)s=s.next;else for(s of i.values()){if(0===n)break;n-=1}if(A(1<<30)<r*s.chance(t)*(1<<30))return s;r*=1.2}}freshBucket(e){const t=e.addr,r=e.src,i=function(e,t){const r=v;return e.copy(r,0),t.copy(r,32),r}(t.raw,r.raw),s=l.sum(i,4221880213)%this.fresh.length;return this.fresh[s]}usedBucket(e){const t=e.addr,r=l.sum(t.raw,4221880213)%this.used.length;return this.used[r]}add(e,t){o(0!==e.port);let r=this.map.get(e.hostname);if(r){let i=7200,s=86400;if(t||(i=0),r.addr.services|=e.services,r.addr.services>>>=0,this.network.now()-e.time<86400&&(s=3600),r.addr.time<e.time-s-i&&(r.addr.time=e.time,this.needsFlush=!0),r.addr.time&&e.time<=r.addr.time)return!1;if(r.used)return!1;if(o(r.refCount>0),r.refCount===E.MAX_REFS)return!1;o(r.refCount<E.MAX_REFS);let n=1;for(let e=0;e<r.refCount;e++)n*=2;if(0!==A(n))return!1}else{if(this.isFull())return!1;t||(t=this.address),r=new S(e,t),this.totalFresh+=1}const i=this.freshBucket(r);return!i.has(r.key())&&(i.size>=this.options.maxEntries&&this.evictFresh(i),i.set(r.key(),r),r.refCount+=1,this.map.set(r.key(),r),this.needsFlush=!0,!0)}evictFresh(e){let t=null;for(const r of e.values())this.isStale(r)?(e.delete(r.key()),0==--r.refCount&&(this.map.delete(r.key()),this.totalFresh-=1)):t?r.addr.time<t.addr.time&&(t=r):t=r;t&&(e.delete(t.key()),0==--t.refCount&&(this.map.delete(t.key()),this.totalFresh-=1))}isStale(e){const t=this.network.now();return!(e.lastAttempt&&e.lastAttempt>=t-60)&&(e.addr.time>t+600||(0===e.addr.time||(t-e.addr.time>24*E.HORIZON_DAYS*60*60||(0===e.lastSuccess&&e.attempts>=E.RETRIES||t-e.lastSuccess>24*E.MIN_FAIL_DAYS*60*60&&e.attempts>=E.MAX_FAILURES))))}remove(e){const t=this.map.get(e);if(!t)return null;if(t.used){let e=t;for(o(0===t.refCount);e.prev;)e=e.prev;for(const r of this.used)if(r.head===e){r.remove(t),this.totalUsed-=1,e=null;break}o(!e)}else{for(const e of this.fresh)e.delete(t.key())&&(t.refCount-=1);this.totalFresh-=1,o(0===t.refCount)}return this.map.delete(t.key()),t.addr}markAttempt(e){const t=this.map.get(e),r=this.network.now();t&&(t.attempts+=1,t.lastAttempt=r)}markSuccess(e){const t=this.map.get(e),r=this.network.now();t&&r-t.addr.time>1200&&(t.addr.time=r)}markAck(e,t){const r=this.map.get(e);if(!r)return;const i=this.network.now();if(r.addr.services|=t,r.addr.services>>>=0,r.lastSuccess=i,r.lastAttempt=i,r.attempts=0,r.used)return;o(r.refCount>0);let s=null;for(const e of this.fresh)e.delete(r.key())&&(r.refCount-=1,s=e);o(s),o(0===r.refCount),this.totalFresh-=1;const n=this.usedBucket(r);if(n.size<this.options.maxEntries)return r.used=!0,n.push(r),void(this.totalUsed+=1);const a=this.evictUsed(n);let h=this.freshBucket(a);h.size>=this.options.maxEntries&&(h=s),r.used=!0,n.replace(a,r),a.used=!1,h.set(a.key(),a),o(0===a.refCount),a.refCount+=1,this.totalFresh+=1}evictUsed(e){let t=e.head;for(let r=e.head;r;r=r.next)r.addr.time<t.addr.time&&(t=r);return t}toArray(){const e=[];for(const t of this.map.values())e.push(t.addr);return o.strictEqual(e.length,this.size()),e}addSeed(e){const t=c.fromHostname(e,this.network.port);if(t.type===c.types.DNS)return this.dnsSeeds.push(t),null;const r=m.fromHost(t.host,t.port,this.network);return this.add(r),r}addNode(e){const t=c.fromHostname(e,this.network.port);if(t.type===c.types.DNS)return this.dnsNodes.push(t),null;const r=m.fromHost(t.host,t.port,this.network);return this.nodes.push(r),this.add(r),r}removeNode(e){const t=c.fromHostname(e,this.network.port);for(let e=0;e<this.nodes.length;e++){const r=this.nodes[e];if(r.host===t.host&&r.port===t.port)return this.nodes.splice(e,1),!0}return!1}setSeeds(e){this.dnsSeeds.length=0;for(const t of e)this.addSeed(t)}setNodes(e){this.dnsNodes.length=0,this.nodes.length=0;for(const t of e)this.addNode(t)}addLocal(e,t,r){const i=m.fromHost(e,t,this.network);return i.services=this.options.services,this.pushLocal(i,r)}pushLocal(e,t){if(!e.isRoutable())return!1;if(this.local.has(e.hostname))return!1;const r=new I(e,t);return this.local.set(e.hostname,r),!0}getLocal(e){let t=-1,r=-1,i=null;if(e||(e=this.address),0===this.local.size)return null;for(const s of this.local.values()){const n=e.getReachability(s.addr);n<t||(n>t||s.score>r)&&(t=n,r=s.score,i=s.addr)}return i.time=this.network.now(),i}markLocal(e){const t=this.local.get(e.hostname);return!!t&&(t.score+=1,!0)}async discoverSeeds(){const e=[];for(const t of this.dnsSeeds)e.push(this.populateSeed(t));return Promise.all(e)}async discoverNodes(){const e=[];for(const t of this.dnsNodes)e.push(this.populateNode(t));return Promise.all(e)}async populateNode(e){const t=await this.populate(e);0!==t.length&&(this.nodes.push(t[0]),this.add(t[0]))}async populateSeed(e){const t=await this.populate(e);for(const e of t)this.add(e)}async populate(e){const t=[];let r;o(e.type===c.types.DNS,"Resolved host passed."),this.logger.info("Resolving host: %s.",e.host);try{r=await this.resolve(e.host)}catch(e){return this.logger.error(e),t}for(const i of r){const r=m.fromHost(i,e.port,this.network);t.push(r)}return t}toJSON(){const e=[],t=[],r=[];for(const t of this.map.values())e.push(t.toJSON());for(const e of this.fresh){const r=[];for(const t of e.keys())r.push(t);t.push(r)}for(const e of this.used){const t=[];for(let r=e.head;r;r=r.next)t.push(r.key());r.push(t)}return{version:E.VERSION,network:this.network.type,addrs:e,fresh:t,used:r}}fromJSON(e){const t=new Map,r=new Map,i=[],s=[];let n=0,a=0;o(e&&"object"==typeof e),o(!e.network||e.network===this.network.type,"Network mistmatch."),o(e.version===E.VERSION,"Bad address serialization version."),o(Array.isArray(e.addrs));for(const i of e.addrs){const e=S.fromJSON(i,this.network);let s=t.get(e.src.hostname);s||(s=e.src,t.set(s.hostname,s)),e.src=s,r.set(e.key(),e)}o(Array.isArray(e.fresh)),o(e.fresh.length<=this.options.maxBuckets,"Buckets mismatch.");for(const t of e.fresh){const e=new Map;for(const i of t){const t=r.get(i);o(t),0===t.refCount&&(n+=1),t.refCount+=1,e.set(i,t)}o(e.size<=this.options.maxEntries,"Bucket size mismatch."),i.push(e)}o(i.length===this.fresh.length,"Buckets mismatch."),o(Array.isArray(e.used)),o(e.used.length<=this.options.maxBuckets,"Buckets mismatch.");for(const t of e.used){const e=new d;for(const i of t){const t=r.get(i);o(t),o(0===t.refCount),o(!t.used),t.used=!0,a+=1,e.push(t)}o(e.size<=this.options.maxEntries,"Bucket size mismatch."),s.push(e)}o(s.length===this.used.length,"Buckets mismatch.");for(const e of r.values())o(e.used||e.refCount>0);return this.map=r,this.fresh=i,this.totalFresh=n,this.used=s,this.totalUsed=a,this}static fromJSON(e,t){return new this(e).fromJSON(t)}}E.HORIZON_DAYS=30,E.RETRIES=3,E.MIN_FAIL_DAYS=7,E.MAX_FAILURES=10,E.MAX_REFS=8,E.VERSION=0,E.scores={NONE:0,IF:1,BIND:2,UPNP:3,DNS:3,MANUAL:4,MAX:5};class S{constructor(e,t){this.addr=e||new m,this.src=t||new m,this.prev=null,this.next=null,this.used=!1,this.refCount=0,this.attempts=0,this.lastSuccess=0,this.lastAttempt=0,e&&this.fromOptions(e,t)}fromOptions(e,t){return o(e instanceof m),o(t instanceof m),this.addr=e,this.src=t,this}static fromOptions(e,t){return(new this).fromOptions(e,t)}key(){return this.addr.hostname}chance(e){let t=1;return e-this.lastAttempt<600&&(t*=.01),t*=Math.pow(.66,Math.min(this.attempts,8))}[y](){return{addr:this.addr,src:this.src,used:this.used,refCount:this.refCount,attempts:this.attempts,lastSuccess:b.date(this.lastSuccess),lastAttempt:b.date(this.lastAttempt)}}toJSON(){return{addr:this.addr.hostname,src:this.src.hostname,services:this.addr.services.toString(2),time:this.addr.time,attempts:this.attempts,lastSuccess:this.lastSuccess,lastAttempt:this.lastAttempt}}fromJSON(e,t){if(o(e&&"object"==typeof e),o("string"==typeof e.addr),o("string"==typeof e.src),this.addr.fromHostname(e.addr,t),null!=e.services){o("string"==typeof e.services),o(e.services.length>0),o(e.services.length<=32);const t=parseInt(e.services,2);o(t>>>0===t),this.addr.services=t}return null!=e.time&&(o(Number.isSafeInteger(e.time)),o(e.time>=0),this.addr.time=e.time),null!=e.src&&(o("string"==typeof e.src),this.src.fromHostname(e.src,t)),null!=e.attempts&&(o(e.attempts>>>0===e.attempts),this.attempts=e.attempts),null!=e.lastSuccess&&(o(Number.isSafeInteger(e.lastSuccess)),o(e.lastSuccess>=0),this.lastSuccess=e.lastSuccess),null!=e.lastAttempt&&(o(Number.isSafeInteger(e.lastAttempt)),o(e.lastAttempt>=0),this.lastAttempt=e.lastAttempt),this}static fromJSON(e,t){return(new this).fromJSON(e,t)}}class I{constructor(e,t){this.addr=e,this.score=t||0}}class k{constructor(e){this.network=g.primary,this.logger=f.global,this.resolve=u.lookup,this.host="0.0.0.0",this.port=this.network.port,this.services=_.LOCAL_SERVICES,this.onion=!1,this.banTime=_.BAN_TIME,this.address=new m,this.address.services=this.services,this.address.time=this.network.now(),this.seeds=this.network.seeds,this.nodes=[],this.maxBuckets=20,this.maxEntries=50,this.prefix=null,this.filename=null,this.memory=!0,this.flushInterval=12e4,e&&this.fromOptions(e)}fromOptions(e){if(o(e,"Options are required."),null!=e.network&&(this.network=g.get(e.network),this.seeds=this.network.seeds,this.address.port=this.network.port,this.port=this.network.port),null!=e.logger&&(o("object"==typeof e.logger),this.logger=e.logger),null!=e.resolve&&(o("function"==typeof e.resolve),this.resolve=e.resolve),null!=e.banTime&&(o(e.banTime>=0),this.banTime=e.banTime),e.seeds&&(o(Array.isArray(e.seeds)),this.seeds=e.seeds),e.nodes&&(o(Array.isArray(e.nodes)),this.nodes=e.nodes),null!=e.host){o("string"==typeof e.host);const t=c.toBuffer(e.host);this.host=c.toString(t),c.isRoutable(t)&&this.address.setHost(this.host)}return null!=e.port&&(o("number"==typeof e.port),o(e.port>0&&e.port<=65535),this.port=e.port,this.address.setPort(this.port)),null!=e.publicHost&&(o("string"==typeof e.publicHost),this.address.setHost(e.publicHost)),null!=e.publicPort&&(o("number"==typeof e.publicPort),o(e.publicPort>0&&e.publicPort<=65535),this.address.setPort(e.publicPort)),null!=e.services&&(o("number"==typeof e.services),this.services=e.services),null!=e.onion&&(o("boolean"==typeof e.onion),this.onion=e.onion),null!=e.maxBuckets&&(o("number"==typeof e.maxBuckets),this.maxBuckets=e.maxBuckets),null!=e.maxEntries&&(o("number"==typeof e.maxEntries),this.maxEntries=e.maxEntries),null!=e.memory&&(o("boolean"==typeof e.memory),this.memory=e.memory),null!=e.prefix&&(o("string"==typeof e.prefix),this.prefix=e.prefix,this.filename=a.join(this.prefix,"hosts.json")),null!=e.filename&&(o("string"==typeof e.filename),this.filename=e.filename),null!=e.flushInterval&&(o(e.flushInterval>=0),this.flushInterval=e.flushInterval),this.address.time=this.network.now(),this.address.services=this.services,this}}function A(e){return p(0,e)}r.exports=E}],["binet","/lib/binet.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(286,r)}],["binet","/lib/ip.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(287,r),h=__browser_require__(288,r),c=__browser_require__(290,r),u=__browser_require__(291,r),f=e,l=Buffer.from("00000000000000000000000000000000","hex"),d=Buffer.from("00000000000000000000000000000001","hex"),p=Buffer.from("0064ff9b0000000000000000","hex"),b=Buffer.from("fe80000000000000","hex"),g=Buffer.from("0000000000000000ffff0000","hex"),m=Buffer.from("00000000000000ffff","hex"),_=Buffer.from("fd87d87eeb43","hex"),w=Buffer.alloc(33,0),y=Buffer.alloc(16,0),v=Buffer.alloc(16,0),E=Buffer.alloc(16,0),S={NONE:0,INET4:4,INET6:6,ONION:10},I={NONE:0,INET4:1,INET6:2,ONION:3,TEREDO:4};function k(e,t){o(null!=e&&!0===e._isBuffer),o(null!=t&&!0===t._isBuffer),o(e.length>=t.length);for(let r=0;r<t.length;r++)if(e[r]!==t[r])return!1;return!0}function A(e){if(null==e)return S.NONE;if(e>>>0===e)return e;switch(o("string"==typeof e),o(e.length<=4),e.toLowerCase()){case"all":return S.NONE;case"ipv4":return S.INET4;case"ipv6":return S.INET6}throw new Error(`Invalid address family: ${e}.`)}f.encode=function(e){return o(null!=e&&!0===e._isBuffer),f.read(e,0,e.length)},f.decode=function(e){const t=Buffer.allocUnsafe(16);return f.write(t,e,0,16),t},f.read=function(e,t,r){if(null==t&&(t=0),null==r&&(r=16),o(null!=e&&!0===e._isBuffer),o(t>>>0===t),o(r>>>0===r),t+r>e.length)throw new Error("Out of bounds read.");if(4===r){const r=c.ntop4(e,t);if(!r)throw new Error("Invalid IPv4 address.");return r}if(16===r){if(c.onion(e,t)){const r=e.slice(t+6,t+16);return u.encodeLegacy(r)}let r;if(!(r=c.mapped(e,t)?c.ntop4(e,t+12):c.ntop6(e,t)))throw new Error("Invalid IPv6 address.");return r}throw new Error("Invalid IP address.")},f.write=function(e,t,r,i){if(null==r&&(r=0),null==i&&(i=16),o(null!=e&&!0===e._isBuffer),o("string"==typeof t),o(r>>>0===r),o(i>>>0===i),r+i>e.length)throw new Error("Out of bounds write.");if(4===i){if(c.pton4(t,e,r)>=0)return r+4;const i=y;if(c.pton6(t,i,0)<0)throw new Error("Invalid IPv4 address.");if(!c.mapped(i,0))throw new Error("Out of bounds write.");return r+=i.copy(e,r,12,16)}if(16===i){if(u.isLegacyString(t)){const i=_,s=u.decodeLegacy(t);return r+=i.copy(e,r),r+=s.copy(e,r)}if(c.pton4(t,e,r+12)>=0)return e.fill(0,r,r+10),r+=10,e[r++]=255,e[r++]=255,r;if(c.pton6(t,e,r)>=0)return r+16;throw new Error("Invalid IPv6 address.")}throw new Error("Invalid IP address.")},f.writeBW=function(e,t,r){return o(e&&"object"==typeof e),e.offset=f.write(e.data,t,e.offset,r),e},f.readBR=function(e,t){null==t&&(t=16),o(e&&"object"==typeof e);const r=f.read(e.data,e.offset,t);return e.offset+=t,r},f.normalize=function(e){if(u.isLegacyString(e))return u.normalizeLegacy(e);const t=y;if(c.pton4(e,t,0)>=0)return c.ntop4(t,0);if(c.pton6(e,t,0)>=0)return f.isMapped(t)?c.ntop4(t,12):c.ntop6(t,0);throw new Error("Invalid IP address.")},f.map=function(e){if(o(null!=e&&!0===e._isBuffer),16===e.length)return e;if(4!==e.length)throw new Error("Not an IPv4 address.");const t=Buffer.allocUnsafe(16);return t.fill(0,0,10),t[10]=255,t[11]=255,e.copy(t,12),t},f.unmap=function(e){if(o(null!=e&&!0===e._isBuffer),4===e.length)return e;if(16!==e.length)throw new Error("Not an IPv6 address.");if(!f.isMapped(e))throw new Error("Not an IPv4 mapped address.");return e.slice(12,16)},f.toHost=function(e,t,r){if(null==r&&(r=null),o("string"==typeof e),o((65535&t)===t),o(null===r||null!=r&&!0===r._isBuffer),o(!r||33===r.length),0===e.length)throw new Error("Invalid host (zero length).");if(e.length>261)throw new Error("Invalid host (too large).");let i=!1;for(let t=0;t<e.length;t++){const r=e.charCodeAt(t);switch(r){case 58:i=!0;break;case 64:case 91:case 93:throw new Error("Bad host.");default:if(r<32||r>126)throw new Error("Bad host.")}}if(i&&c.pton6(e,null,0)<0)throw new Error("Unexpected colon.");const s=f.getTypeString(e);s!==S.NONE&&(e=f.normalize(e));let n="";return r&&!r.equals(w)&&(n=`${h.encode(r)}@`),s===S.INET6?`${n}[${e}]:${t}`:`${n}${e}:${t}`},f.fromHost=function(e,t,r){if(null==t&&(t=0),null==r&&(r=null),o("string"==typeof e),o((65535&t)===t),o(null===r||null!=r&&!0===r._isBuffer),0===e.length)throw new Error("Invalid host (zero length).");if(e.length>315)throw new Error("Invalid host (too large).");if(r&&33!==r.length)throw new Error("Invalid fallback key (bad size).");let i=r,s="",n=null,a=!1;const u=e.indexOf("@");if(-1!==u){const t=e.substring(0,u),r=e.substring(u+1);if(t.length>53)throw new Error("Invalid identity key (too large).");if(33!==(i=h.decode(t)).length)throw new Error("Invalid identity key (bad size).");e=r}if("["===e[0])if("]"===e[e.length-1])s=e.slice(1,-1),n=null,a=!0;else{const t=e.indexOf("]:");if(-1===t)throw new Error("IPv6 bracket mismatch.");s=e.substring(1,t),n=e.substring(t+2),a=!0}else{const t=e.indexOf(":");if(-1!==t){const r=e.substring(0,t),i=e.substring(t+1);-1!==i.indexOf(":")?(s=e,n=null,a=!0):(s=r,n=i)}else s=e,n=null}if(0===s.length)throw new Error("Invalid host (zero length).");if(null!=n){let e=0,t=0;for(let r=0;r<n.length;r++){const i=n.charCodeAt(r);if(i<48||i>57)throw new Error("Invalid port (bad character).");if(t>0&&0===e)throw new Error("Invalid port (leading zero).");if(e*=10,e+=i-48,(t+=1)>5||e>65535)throw new Error("Invalid port (overflow).")}if(0===t)throw new Error("Invalid port (bad size).");n=e}else n=t;if(a&&c.pton6(s,null,0)<0)throw new Error("Invalid IPv6 address.");let l,d=null,p=S.NONE;try{d=f.decode(s)}catch(e){}return d&&(s=f.encode(d),p=f.getType(d)),{host:s,port:n,type:p,hostname:l=p===S.INET6?`[${s}]:${n}`:`${s}:${n}`,raw:d,key:i}},f.getTypeString=function(e){if(o("string"==typeof e),0===e.length)return S.NONE;if(e.length>255)return S.NONE;if(u.isLegacyString(e))return S.ONION;if(c.pton4(e,null,0)>=0)return S.INET4;const t=y;return c.pton6(e,t,0)>=0?f.getType(t):S.NONE},f.isMappedString=function(e){const t=y;return!!(c.pton6(e,t,0)>=0&&f.isMapped(t))},f.isIPv4String=function(e){return f.getTypeString(e)===S.INET4},f.isIPv6String=function(e){return f.getTypeString(e)===S.INET6},f.isOnionString=function(e){return f.getTypeString(e)===S.ONION},f.isUnknownString=function(e){return f.getTypeString(e)===S.NONE},f.isIPString=function(e){const t=f.getTypeString(e);switch(t){case S.INET4:case S.INET6:return t;default:return S.NONE}},f.isEqualString=function(e,t){const r=v,i=E;return f.write(r,e,0,16),f.write(i,t,0,16),r.equals(i)},f.maskString=function(e,t){const r=v,i=E;return f.write(r,e,0,16),f.write(i,t,0,16),f.mask(r,i,r),f.encode(r)},f.cidrString=function(e,t){const r=v;return f.write(r,e,0,16),f.cidr(r,t,r),f.encode(r)},f.getType=function(e){return f.isMapped(e)?S.INET4:f.isOnion(e)?S.ONION:S.INET6},f.isMapped=function(e){return o(null!=e&&!0===e._isBuffer),o(16===e.length),c.mapped(e,0)},f.isIPv4=function(e){return f.isMapped(e)},f.isIPv6=function(e){return!f.isMapped(e)&&!f.isOnion(e)},f.isOnion=function(e){return o(null!=e&&!0===e._isBuffer),o(16===e.length),c.onion(e,0)},f.isIP=function(e){return f.isIPv4(e)?S.INET4:f.isIPv6(e)?S.INET6:S.NONE},f.isEqual=function(e,t){return o(null!=e&&!0===e._isBuffer),o(null!=t&&!0===t._isBuffer),o(16===e.length),o(16===t.length),e.equals(t)},f.mask=function(e,t,r){null==r&&(r=Buffer.allocUnsafe(16)),o(null!=e&&!0===e._isBuffer),o(null!=t&&!0===t._isBuffer),o(null!=r&&!0===r._isBuffer),o(16===e.length),o(16===t.length),o(16===r.length);const i=f.isMapped(e)?12:0;e!==r&&e.copy(r,0,0,16);for(let s=i;s<16;s++)r[s]=e[s]&t[s];return r},f.cidr=function(e,t,r){o(null!=e&&!0===e._isBuffer),o(16===e.length),o((255&t)===t);const i=y;let s=0,n=128;if(f.isMapped(e)&&(s=12,n=32,i.fill(0,0,10),i[10]=255,i[11]=255),t>n)throw new Error("Too many CIDR bits.");for(let e=s;e<16;e++){let r=8;t<8&&(r=t),t-=r,i[e]=255&~(255>>r)}return f.mask(e,i,r)},f.isNull=function(e){return f.isIPv4(e)?0===e[12]&&0===e[13]&&0===e[14]&&0===e[15]:f.isEqual(e,l)},f.isBroadcast=function(e){return!!f.isIPv4(e)&&(255===e[12]&&255===e[13]&&255===e[14]&&255===e[15])},f.isRFC1918=function(e){return!!f.isIPv4(e)&&(10===e[12]||(192===e[12]&&168===e[13]||172===e[12]&&e[13]>=16&&e[13]<=31))},f.isRFC2544=function(e){return!!f.isIPv4(e)&&(198===e[12]&&(18===e[13]||19===e[13])||169===e[12]&&254===e[13])},f.isRFC3927=function(e){return!!f.isIPv4(e)&&(169===e[12]&&254===e[13])},f.isRFC6598=function(e){return!!f.isIPv4(e)&&(100===e[12]&&e[13]>=64&&e[13]<=127)},f.isRFC5737=function(e){return!!f.isIPv4(e)&&(192===e[12]&&0===e[13]&&2===e[14]||(198===e[12]&&51===e[13]&&100===e[14]||203===e[12]&&0===e[13]&&113===e[14]))},f.isRFC3849=function(e){return o(null!=e&&!0===e._isBuffer),o(16===e.length),32===e[0]&&1===e[1]&&13===e[2]&&184===e[3]},f.isRFC3964=function(e){return o(null!=e&&!0===e._isBuffer),o(16===e.length),32===e[0]&&2===e[1]},f.isRFC6052=function(e){return k(e,p)},f.isRFC4380=function(e){return o(null!=e&&!0===e._isBuffer),o(16===e.length),32===e[0]&&1===e[1]&&0===e[2]&&0===e[3]},f.isRFC4862=function(e){return k(e,b)},f.isRFC4193=function(e){return o(null!=e&&!0===e._isBuffer),o(16===e.length),252==(254&e[0])},f.isRFC6145=function(e){return k(e,g)},f.isRFC4843=function(e){return o(null!=e&&!0===e._isBuffer),o(16===e.length),32===e[0]&&1===e[1]&&0===e[2]&&16==(240&e[3])},f.isLocal=function(e){return f.isIPv4(e)?127===e[12]&&0===e[13]:!!f.isEqual(e,d)},f.isMulticast=function(e){return f.isIPv4(e)?224==(240&e[12]):255===e[0]},f.isValid=function(e){return!k(e,m)&&(!f.isNull(e)&&(!f.isBroadcast(e)&&!f.isRFC3849(e)))},f.isRoutable=function(e){return!!f.isValid(e)&&(!f.isRFC1918(e)&&(!f.isRFC2544(e)&&(!f.isRFC3927(e)&&(!f.isRFC4862(e)&&(!f.isRFC6598(e)&&(!f.isRFC5737(e)&&(!(f.isRFC4193(e)&&!f.isOnion(e))&&(!f.isRFC4843(e)&&!f.isLocal(e)))))))))},f.getNetwork=function(e){return f.isIPv4(e)?I.INET4:f.isRFC4380(e)?I.TEREDO:f.isOnion(e)?I.ONION:I.INET6},f.getReachability=function(e,t){if(!f.isRoutable(e))return 0;const r=f.getNetwork(e);switch(f.getNetwork(t)){case I.IPV4:switch(r){case I.IPV4:return 4;default:return 1}break;case I.INET6:switch(r){case I.TEREDO:return 2;case I.IPV4:return 4;case I.INET6:return f.isRFC3964(e)||f.isRFC6052(e)||f.isRFC6145(e)?3:5;default:return 1}break;case I.ONION:switch(r){case I.IPV4:return 4;case I.ONION:return 6;default:return 1}break;case I.TEREDO:switch(r){case I.TEREDO:return 2;case I.INET6:return 3;case I.IPV4:return 4;default:return 1}break;default:switch(r){case I.TEREDO:return 2;case I.INET6:return 3;case I.IPV4:return 4;case I.ONION:return 6;default:return 1}}},f._interfaces=function(e,t){if("function"!=typeof a.networkInterfaces)return[];o(e>>>0===e);const r=function(e){switch(o(e>>>0===e),e){case S.NONE:return null;case S.INET4:return"IPv4";case S.INET6:return"IPv6"}throw new Error(`Invalid address family: ${e}.`)}(t),i=a.networkInterfaces(),s=[],n=y;for(const o of Object.keys(i)){const a=i[o];for(const i of a)if(!r||i.family===r){try{f.write(n,i.address,0,16)}catch(e){continue}if(f.isValid(n)){switch(t){case S.NONE:break;case S.INET4:if(!f.isIPv4(n))continue;break;case S.INET6:if(f.isIPv4(n))continue}switch(e){case 0:break;case 1:if(!f.isLocal(n))continue;break;case 2:if(f.isLocal(n))continue;break;case 3:if(f.isLocal(n))continue;if(f.isRoutable(n))continue;break;case 4:if(f.isLocal(n))continue;if(!f.isRoutable(n))continue}s.push(f.encode(n))}}}return s},f.getInterfaces=function(e){return f._interfaces(0,A(e))},f.getLocal=function(e){return f._interfaces(1,A(e))},f.getNonlocal=function(e){return f._interfaces(2,A(e))},f.getPrivate=function(e){return f._interfaces(3,A(e))},f.getPublic=function(e){return f._interfaces(4,A(e))},f.type=f.getTypeString,f.family=f.isIPString,f.test=f.getTypeString,f.equal=f.isEqualString,S.NAME=0,S.DNS=0,S.IPV4=4,S.IPV6=6,f.toString=f.encode,f.toBuffer=f.decode,f.toMapped=f.map,f.isNameString=f.isUnknownString,f.hasPrefix=k,f.getStringType=f.getTypeString,f.isV4String=f.isIPv4String,f.isV6String=f.isIPv6String,f.isDNSString=f.isUnknownString,f.fromHostname=f.fromHost,f.toHostname=f.toHost,f.IP=f,f.ip=f,f.types=S,f.networks=I,f.ZERO_IP=l,f.onion=u,f.inet=c}],["bpkg","/lib/builtins/os.js",function(e,t,r,i,s,n){"use strict";var o=e,a=Number(new Date),h="function"==typeof Int8Array&&0===new Int8Array(new Int16Array([1]).buffer)[0];o.constants={},o.EOL="\n",o.arch=function(){return"javascript"},o.cpus=function(){return[]},o.endianness=function(){return h?"BE":"LE"},o.freemem=function(){return 9007199254740991},o.getPriority=function(e){return 0},o.homedir=function(){return"/"},o.hostname=function(){return"object"==typeof location&&null!==location&&"string"==typeof location.hostname?location.hostname:"localhost"},o.loadavg=function(){return[0,0,0]},o.networkInterfaces=function(){return{}},o.getNetworkInterfaces=o.networkInterfaces,o.platform=function(){return"browser"},o.release=function(){return"object"==typeof navigator&&null!==navigator&&"string"==typeof navigator.appVersion?navigator.appVersion:""},o.setPriority=function(e,t){},o.tmpdir=function(){return"/tmp"},o.tmpDir=o.tmpdir,o.totalmem=function(){return 9007199254740991},o.type=function(){return"Browser"},o.uptime=function(){var e=Number(new Date)-a;return e<0&&(a=Number(new Date),e=0),e/1e3},o.userInfo=function(e){return{uid:0,gid:0,username:"root",homedir:"/",shell:"/bin/sh"}}}],["bs32","/lib/bs32.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(289,r)}],["bs32","/lib/base32.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a="abcdefghijklmnopqrstuvwxyz234567",h=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1],c="0123456789abcdefghijklmnopqrstuv",u=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,-1,-1,-1,-1,-1,-1,-1,-1,-1],f=[0,6,4,3,1];function l(e,t,r=!1){o(null!=e&&!0===e._isBuffer),o("boolean"==typeof r);let i="",s=0,n=0;for(let r=0;r<e.length;r++){const o=e[r];switch(s){case 0:i+=t[o>>>3],n=(7&o)<<2,s=1;break;case 1:i+=t[n|o>>>6],i+=t[o>>>1&31],n=(1&o)<<4,s=2;break;case 2:i+=t[n|o>>>4],n=(15&o)<<1,s=3;break;case 3:i+=t[n|o>>>7],i+=t[o>>>2&31],n=(3&o)<<3,s=4;break;case 4:i+=t[n|o>>>5],i+=t[31&o],s=0}}if(s>0&&(i+=t[n],r))for(let e=0;e<f[s];e++)i+="=";return i}function d(e,t=!1){return b(e,h,t)}function p(e,t=!1){return b(e,u,t)}function b(e,t,r){o("string"==typeof e),o("boolean"==typeof r);const i=Buffer.allocUnsafe((5*e.length+7)/8|0);let s=0,n=0,a=0,h=0;for(;h<e.length;h++){const r=e.charCodeAt(h),o=65408&r?-1:t[r];if(-1===o)break;switch(s){case 0:n=o,s=1;break;case 1:i[a++]=n<<3|o>>>2,n=3&o,s=2;break;case 2:n=n<<5|o,s=3;break;case 3:i[a++]=n<<1|o>>>4,n=15&o,s=4;break;case 4:i[a++]=n<<4|o>>>1,n=1&o,s=5;break;case 5:n=n<<5|o,s=6;break;case 6:i[a++]=n<<2|o>>>3,n=7&o,s=7;break;case 7:i[a++]=n<<5|o,n=0,s=0}}if(1===s||3===s||6===s)throw new Error("Invalid base32 string.");if(n>0)throw new Error("Invalid base32 string.");if(e.length!==h+(7&-s)*r)throw new Error("Invalid base32 string.");for(;h<e.length;h++){if(61!==e.charCodeAt(h))throw new Error("Invalid base32 string.")}return i.slice(0,a)}e.encode=function(e,t=!1){return l(e,a,t)},e.encodeHex=function(e,t=!1){return l(e,c,t)},e.decode=d,e.decodeHex=p,e.test=function(e,t=!1){try{return d(e,t),!0}catch(e){return!1}},e.testHex=function(e,t=!1){try{return p(e,t),!0}catch(e){return!1}}}],["binet","/lib/inet.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=1,h=2,c=Buffer.allocUnsafe(16),u=Buffer.allocUnsafe(16),f=new Uint16Array(8),l=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],d=new Int8Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]);function p(e,t,r){null==t&&(t=null),null==r&&(r=0),o("string"==typeof e),o(null===t||null!=t&&!0===t._isBuffer),o(r>>>0===r);const i=r;let s=0,n=-1,c=-1;if(t&&r+4>t.length)return-a;if(function(e,t){if(t+3>e.length)return!1;if(48!==_(e,t))return!1;const r=_(e,t+1);if(88!==r&&120!==r)return!1;const i=_(e,t+2);return-1!==d[i]}(e,s)){s+=2;let o=0,u=0,f=0;for(;s<e.length;s++){n=_(e,s);const l=d[n];if(-1===l)break;if(u=0===o?l:u<<4|l,o+=1,(f+=1)>8)return-a;if(2===o){if(r+1-i>4)return-h;t&&(t[r]=u),-1===c&&(c=u),r+=1,o=0}n=-1}if(o){if(r+1-i>4)return-h;t&&(t[r]=u<<4),-1===c&&(c=u<<4),r+=1}}else{if(!function(e,t){if(t+1>e.length)return!1;const r=_(e,t);return r>=48&&r<=57}(e,s))return-a;{let o=0;for(;;){let u=0,f=0;for(;s<e.length&&!((n=_(e,s))<48||n>57);s++){if(u*=10,u+=n-48,(f+=1)>3||u>255)return-a;n=-1}if((o+=f)>12)return-a;if(r+1-i>4)return-h;if(t&&(t[r]=u),-1===c&&(c=u),r+=1,-1===n||47===n)break;if(46!==n)return-a;if((n=_(e,s+=1))<48||n>57)return-a}}}let u=-1;if(function(e,t){if(t+2>e.length)return!1;if(47!==_(e,t))return!1;const r=_(e,t+1);return!(r<48||r>57)}(e,s)&&r>i){s+=1,u=0,n=-1;let t=0;for(;s<e.length&&!((n=_(e,s))<48||n>57);s++){if(u*=10,u+=n-48,(t+=1)>3||u>32)return-a;n=-1}}if(-1!==n)return-a;if(r===i)return-a;-1===u&&(o(-1!==c),(u=c>=240?32:c>=224?8:c>=192?24:c>=128?16:8)<8*(r-i)&&(u=8*(r-i)),8===u&&224===c&&(u=4)),o(u<=32);const f=4-(r-i);return o(f>=0&&f<=4),t&&(o(r+f<=t.length),t.fill(0,r,r+f)),r+=f,u}function b(e,t,r){null==t&&(t=null),null==r&&(r=0),o("string"==typeof e),o(null===t||null!=t&&!0===t._isBuffer),o(r>>>0===r);const i=c;let s=0,n=0,u=16,f=-1,l=0,p=!1,b=0,g=0,m=-1,w=!1;if(t&&r+16>t.length)return-h;if(v(e,s)){if(!v(e,s+1))return-a;s+=1}for(i.fill(0,0,16),l=s;s<e.length;s++){const t=_(e,s),r=d[t];if(-1===r){if(58!==t){if(46===t&&n+4<=u){const t=S(e,l,i,n);if(-1!==t){0!==t&&(m=t),n+=4,p=!1,w=!0;break}}if(47===t){const t=E(e,s+1);if(-1!==t){m=t;break}}return-a}if(l=s+1,!p){if(-1!==f)return-a;f=n;continue}if(s===e.length)return-a;if(n+2>u)return-a;i[n++]=b>>>8&255,i[n++]=255&b,p=!1,g=0,b=0}else{if(b<<=4,b|=r,(g+=1)>4)return-a;p=!0}}if(p){if(n+2>u)return-a;i[n++]=b>>>8&255,i[n++]=255&b}-1===m&&(m=128),o(m<=128);let y=(m+15)/16|0;if(y<2&&(y=2),w&&(y=8),u=2*y,-1!==f){const e=n-f;let t;if(n===u)return-a;for(t=1;t<=e;t++)i[u-t]=i[f+e-t],i[f+e-t]=0;n=u}if(n!==u)return-a;const I=(m+7)/8|0,k=16-I;return o(I>=0&&I<=16),t?(o(r+I+k<=t.length),r+=i.copy(t,r,0,I),t.fill(0,r,r+k),r+=k):(r+=I,r+=k),m}function g(e,t){if(null==t&&(t=0),o(null!=e&&!0===e._isBuffer),o(t>>>0===t),t+4>e.length)return"";let r="";return r+=w(e[t+0]),r+=".",r+=w(e[t+1]),r+=".",r+=w(e[t+2]),r+=".",r+=w(e[t+3])}function m(e,t){if(null==t&&(t=0),o(null!=e&&!0===e._isBuffer),o(t>>>0===t),t+16>e.length)return"";let r=-1,i=0,s=-1,n=0,a="";const h=f;for(let e=0;e<16;e++)h[e]=0;for(let r=0;r<16;r++)h[r>>>1]|=e[t+r]<<(1-(1&r)<<3);for(let e=0;e<8;e++)0===h[e]?-1===s?(s=e,n=1):n+=1:-1!==s&&((-1===r||n>i)&&(r=s,i=n),s=-1);-1!==s&&(-1===r||n>i)&&(r=s,i=n),-1!==r&&i<2&&(r=-1);for(let s=0;s<8;s++)if(-1!==r&&s>=r&&s<r+i)s===r&&(a+=":");else{if(0!==s&&(a+=":"),6===s&&0===r&&(6===i||7===i&&1!==h[7]||5===i&&65535===h[5])){const r=g(e,t+12);if(!r)return"";a+=r;break}a+=y(h[s])}return-1!==r&&r+i===8&&(a+=":"),a}function _(e,t){const r=e.charCodeAt(t);return 65408&r?0:r}function w(e,t){return e.toString(10)}function y(e){let t="";for(let r=3;r>=0;r--){const i=e>>>4*r&15;0===i&&0===t.length||(t+=l[i])}return 0===t.length&&(t+=l[0]),t}function v(e,t){return!(t+1>e.length)&&58===_(e,t)}function E(e,t){let r=0,i=0;for(;t<e.length;t++){const s=_(e,t);if(s<48||s>57)return-1;if(i>0&&0===r)return-1;if(r*=10,r+=s-48,(i+=1)>3||r>128)return-1}return 0===i?-1:r}function S(e,t,r,i){const s=i;let n=0,o=0;for(;t<e.length;t++){const a=_(e,t);if(a>=48&&a<=57){if(o>0&&0===n)return-1;if(n*=10,n+=a-48,(o+=1)>3||n>255)return-1}else{if(46!==a&&47!==a)return-1;if(i-s>3)return-1;if(r){if(i+1>r.length)return-1;r[i]=n}if(i+=1,47===a)return E(e,t+1);n=0,o=0}}if(0===o)return-1;if(i-s>3)return-1;if(r){if(i+1>r.length)return-1;r[i]=n}return i+=1,0}e.pton4=p,e.pton6=b,e.pton=function(e,t,r,i){return null==r&&(r=null),null==i&&(i=0),o(e>>>0===e),o("string"==typeof t),o(null===r||null!=r&&!0===r._isBuffer),o(i>>>0===i),4===e?p(t,r,i):6===e?b(t,r,i):-a},e.ntop4=g,e.ntop6=m,e.ntop=function(e,t,r){return null==r&&(r=0),o(e>>>0===e),o(null!=t&&!0===t._isBuffer),o(r>>>0===r),4===e?g(t,r):6===e?m(t,r):""},e.family=function(e){return p(e,null,0)>=0?4:b(e,null,0)>=0?6:0},e.mapped=function(e,t){return null==t&&(t=0),o(null!=e&&!0===e._isBuffer),o(t>>>0===t),!(t+12>e.length)&&0===e[t++]&&0===e[t++]&&0===e[t++]&&0===e[t++]&&0===e[t++]&&0===e[t++]&&0===e[t++]&&0===e[t++]&&0===e[t++]&&0===e[t++]&&255===e[t++]&&255===e[t++]},e.onion=function(e,t){return null==t&&(t=0),o(null!=e&&!0===e._isBuffer),o(t>>>0===t),!(t+6>e.length)&&253===e[t++]&&135===e[t++]&&216===e[t++]&&126===e[t++]&&235===e[t++]&&67===e[t++]},e.normalize=function(e){const t=u;return p(e,t,0)>=0?g(t,0):b(e,t,0)>=0?m(t,0):""}}],["binet","/lib/onion.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(288,r),h=e;function c(e,t){if(o(null!=e&&!0===e._isBuffer),o(33===e.length),null==t)return 0;o("function"==typeof t);const r=Buffer.alloc(48);return r.write(".onion checksum",0,15,"ascii"),e.copy(r,15,1,33),r[47]=e[0],t(r).readUInt16BE(0)}h.isString=function(e){return h.isLegacyString(e)||h.isNGString(e)},h.is=function(e){return h.isLegacy(e)||h.isNG(e)},h.encode=function(e,t){if(h.isLegacy(e))return h.encodeLegacy(e);if(h.isNG(e))return h.encodeNG(e,t);throw new Error("Not an onion buffer.")},h.decode=function(e,t){if(h.isLegacyString(e))return h.decodeLegacy(e);if(h.isNGString(e))return h.decodeNG(e,t);throw new Error("Not an onion string.")},h.normalize=function(e,t){if(h.isLegacyString(e))return h.normalizeLegacy(e);if(h.isNGString(e))return h.normalizeNG(e,t);throw new Error("Not an onion string.")},h.isLegacyString=function(e){return o("string"==typeof e),22===e.length&&".onion"===e.slice(-6).toLowerCase()},h.isLegacy=function(e){return o(null!=e&&!0===e._isBuffer),10===e.length},h.encodeLegacy=function(e){return o(h.isLegacy(e)),`${a.encode(e)}.onion`},h.decodeLegacy=function(e){o(h.isLegacyString(e));const t=a.decode(e.slice(0,-6));return o(10===t.length,"Invalid onion address."),t},h.normalizeLegacy=function(e){return h.encodeLegacy(h.decodeLegacy(e))},h.isNGString=function(e){return o("string"==typeof e),62===e.length&&".onion"===e.slice(-6).toLowerCase()},h.isNG=function(e){return o(null!=e&&!0===e._isBuffer),33===e.length},h.encodeNG=function(e,t){o(null!=e&&!0===e._isBuffer),o(33===e.length);const r=Buffer.alloc(35);e.copy(r,0,1,33);const i=c(e,t);return r[32]=i>>>8,r[33]=255&i,r[34]=e[0],`${a.encode(r)}.onion`},h.decodeNG=function(e,t){o(h.isNGString(e),"Invalid onion address.");const r=a.decode(e.slice(0,-6));o(35===r.length,"Invalid onion address.");const i=Buffer.alloc(33);return i[0]=r[34],r.copy(i,1,0,32),o(function(e,t,r){if(o(null!=t&&!0===t._isBuffer),o(35===t.length),null==r)return!0;return t.readUInt16BE(32)===c(e,r)}(i,r,t),"Invalid checksum for onion address."),i},h.normalizeNG=function(e,t){return h.encodeNG(h.decodeNG(e,t),t)}}],["bdns","/lib/bdns.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(293,r)}],["bdns","/lib/dns-browser.js",function(e,t,r,i,s,n){"use strict";e.unsupported=!0,e.Resolver=class{constructor(){throw new Error("DNS resolver not available.")}},e.resolve=async function(e,t,r){throw new Error("DNS not supported.")},e.reverse=async function(e,t){throw new Error("DNS not supported.")},e.lookup=async function(e,t,r){throw new Error("DNS not supported.")},e.lookupService=async function(e,t,r){throw new Error("DNS not supported.")},e.getIPv4=async function(e){throw new Error("DNS not supported.")},e.getIPv6=async function(e){throw new Error("DNS not supported.")}}],["blst","/lib/blst.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(295,r)}],["blst","/lib/list.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r);class a{constructor(){this.head=null,this.tail=null,this.size=0}reset(){let e,t;for(e=this.head;e;e=t)t=e.next,e.prev=null,e.next=null;o(!e),this.head=null,this.tail=null,this.size=0}shift(){const e=this.head;return e?(this.remove(e),e):null}unshift(e){return this.insert(null,e)}push(e){return this.insert(this.tail,e)}pop(){const e=this.tail;return e?(this.remove(e),e):null}insert(e,t){return!t.prev&&!t.next&&t!==this.head&&(o(!t.prev),o(!t.next),null==e?(this.head?(this.head.prev=t,t.next=this.head,this.head=t):(this.head=t,this.tail=t),this.size+=1,!0):(t.next=e.next,t.prev=e,e.next=t,t.next&&(t.next.prev=t),e===this.tail&&(this.tail=t),this.size+=1,!0))}remove(e){return!(!e.prev&&!e.next&&e!==this.head)&&(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev||this.head),this.head||o(!this.tail),this.tail||o(!this.head),e.prev=null,e.next=null,this.size-=1,!0)}replace(e,t){e.prev&&(e.prev.next=t),e.next&&(e.next.prev=t),t.prev=e.prev,t.next=e.next,e.next=null,e.prev=null,this.head===e&&(this.head=t),this.tail===e&&(this.tail=t)}slice(e){null==e&&(e=-1);const t=[];let r=null;for(let i=this.head;i&&(r=i.next,i.prev=null,i.next=null,this.size-=1,t.push(i),t.length!==e);i=r);return r?(this.head=r,r.prev=null):(this.head=null,this.tail=null),t}toArray(){const e=[];for(let t=this.head;t;t=t.next)e.push(t);return e}}class h{constructor(e){this.next=null,this.prev=null,this.value=e}}(e=a).List=a,e.ListItem=h,e.Item=h,r.exports=e}],["bcoin","/lib/net/netaddress.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(285,r),c=__browser_require__(14,r),u=__browser_require__(20,r),f=__browser_require__(280,r),{inspectSymbol:l}=__browser_require__(21,r);class d{constructor(e){this.host="0.0.0.0",this.port=0,this.services=0,this.time=0,this.hostname="0.0.0.0:0",this.raw=h.ZERO_IP,e&&this.fromOptions(e)}fromOptions(e){return o("string"==typeof e.host),o("number"==typeof e.port),this.raw=h.toBuffer(e.host),this.host=h.toString(this.raw),this.port=e.port,e.services&&(o("number"==typeof e.services),this.services=e.services),e.time&&(o("number"==typeof e.time),this.time=e.time),this.hostname=h.toHostname(this.host,this.port),this}static fromOptions(e){return(new this).fromOptions(e)}hasServices(e){return(this.services&e)===e}isIPv4(){return h.isIPv4(this.raw)}isIPv6(){return h.isIPv6(this.raw)}isNull(){return h.isNull(this.raw)}isLocal(){return h.isLocal(this.raw)}isValid(){return h.isValid(this.raw)}isRoutable(){return h.isRoutable(this.raw)}isOnion(){return h.isOnion(this.raw)}equal(e){return 0===this.compare(e)}compare(e){const t=this.raw.compare(e.raw);return 0!==t?t:this.port-e.port}getReachability(e){return h.getReachability(this.raw,e.raw)}setNull(){this.raw=h.ZERO_IP,this.host="0.0.0.0",this.hostname=h.toHostname(this.host,this.port)}setHost(e){this.raw=h.toBuffer(e),this.host=h.toString(this.raw),this.hostname=h.toHostname(this.host,this.port)}setPort(e){o(e>=0&&e<=65535),this.port=e,this.hostname=h.toHostname(this.host,e)}fromHost(e,t,r){return r=c.get(r),o(t>=0&&t<=65535),this.raw=h.toBuffer(e),this.host=h.toString(this.raw),this.port=t,this.services=d.DEFAULT_SERVICES,this.time=r.now(),this.hostname=h.toHostname(this.host,this.port),this}static fromHost(e,t,r){return(new this).fromHost(e,t,r)}fromHostname(e,t){t=c.get(t);const r=h.fromHostname(e,t.port);return this.fromHost(r.host,r.port,t)}static fromHostname(e,t){return(new this).fromHostname(e,t)}fromSocket(e,t){const r=e.remoteAddress,i=e.remotePort;return o("string"==typeof r),o("number"==typeof i),this.fromHost(h.normalize(r),i,t)}static fromSocket(e,t){return(new this).fromSocket(e,t)}fromReader(e,t){return this.time=t?e.readU32():0,this.services=e.readU32(),e.readU32(),this.raw=e.readBytes(16),this.host=h.toString(this.raw),this.port=e.readU16BE(),this.hostname=h.toHostname(this.host,this.port),this}fromRaw(e,t){return this.fromReader(a.read(e),t)}static fromReader(e,t){return(new this).fromReader(e,t)}static fromRaw(e,t){return(new this).fromRaw(e,t)}toWriter(e,t){return t&&e.writeU32(this.time),e.writeU32(this.services),e.writeU32(0),e.writeBytes(this.raw),e.writeU16BE(this.port),e}getSize(e){return 26+(e?4:0)}toRaw(e){const t=this.getSize(e);return this.toWriter(a.write(t),e).render()}toJSON(){return{host:this.host,port:this.port,services:this.services,time:this.time}}fromJSON(e){return o((65535&e.port)===e.port),o(e.services>>>0===e.services),o(e.time>>>0===e.time),this.raw=h.toBuffer(e.host),this.host=e.host,this.port=e.port,this.services=e.services,this.time=e.time,this.hostname=h.toHostname(this.host,this.port),this}static fromJSON(e){return(new this).fromJSON(e)}[l](){return"<NetAddress:"+` hostname=${this.hostname}`+` services=${this.services.toString(2)}`+` date=${u.date(this.time)}`+">"}}d.DEFAULT_SERVICES=0|f.services.NETWORK|f.services.WITNESS|f.services.BLOOM,r.exports=d}],["bcoin","/lib/net/seeds/index.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(298,r),a=__browser_require__(299,r);e.get=function(e){switch(e){case"main":return o;case"testnet":return a;default:return[]}}}],["bcoin","/lib/net/seeds/main.js",function(e,t,r,i,s,n){"use strict";r.exports=["2.24.141.73:8333","5.8.18.29:8333","5.43.228.99:8333","5.145.10.122:8333","5.166.35.47:8333","5.188.187.130:8333","5.199.133.193:8333","5.206.226.216:8333","5.206.226.231:8333","13.92.254.226:8335","13.125.188.128:8333","18.228.144.20:8333","23.175.0.200:8333","23.226.90.172:8333","23.233.107.28:8333","23.245.24.154:8333","24.121.16.35:8333","24.150.94.79:8333","24.188.200.170:8333","24.246.31.205:8333","27.102.102.157:8333","31.6.98.94:8333","31.20.226.115:8333","31.21.182.79:8333","31.43.140.190:8333","31.132.135.134:8333","31.173.48.61:8333","32.214.183.114:8333","34.231.234.150:8333","35.209.114.159:8333","35.213.18.190:8333","37.97.228.224:8333","37.116.95.41:8333","37.123.132.33:8333","37.133.140.169:8334","37.134.165.205:8333","37.191.253.125:8333","39.108.68.237:7781","40.78.19.149:8333","42.60.217.183:8333","43.229.132.102:8333","45.58.126.138:8333","46.28.132.34:8333","46.166.162.45:20001","46.166.176.137:8333","46.227.68.104:8333","46.227.68.105:8333","47.74.32.190:8885","47.89.19.134:30303","47.97.117.250:8333","50.2.13.166:8333","50.5.163.139:8333","50.34.65.217:8333","50.66.209.54:8333","50.67.179.36:8333","51.15.166.138:8333","51.15.239.164:8333","51.154.60.34:8333","51.154.136.60:8333","52.116.159.247:8333","54.167.232.37:8333","58.22.123.120:8333","58.158.0.86:8333","62.45.159.66:8333","62.75.191.166:8333","62.75.210.81:8333","62.97.244.242:8333","62.107.200.30:8333","62.138.0.217:8333","62.213.214.207:8333","64.98.18.21:8333","65.79.145.209:8333","66.151.242.154:8335","66.206.13.51:8333","66.248.206.86:8333","67.40.207.169:8333","67.149.252.79:8333","67.193.189.42:8333","67.210.228.203:8333","67.220.22.78:8333","67.222.131.151:8333","68.168.122.2:8333","68.202.128.19:8333","68.206.21.144:8333","69.30.215.42:8333","69.59.18.22:8333","69.70.170.178:8333","69.132.150.43:8333","69.145.122.160:8333","70.26.149.104:8333","70.51.142.43:8333","70.63.170.86:8333","71.57.73.173:8333","71.237.255.140:8333","72.24.235.10:8333","72.95.104.94:8333","72.231.187.25:8333","72.253.239.246:8333","74.78.140.178:8333","74.83.234.97:8333","74.84.128.158:9333","74.197.236.58:8333","74.208.94.172:8333","74.220.255.190:8333","75.101.96.6:8333","75.157.77.34:8333","76.93.183.209:8333","76.174.129.203:8333","77.53.158.137:8333","77.85.204.149:8333","77.120.119.27:8433","77.134.172.81:8333","78.42.12.201:8333","78.58.140.102:8333","78.108.108.162:8333","78.119.180.62:8333","78.128.62.52:8333","78.130.148.218:8885","78.130.161.76:8333","78.143.214.223:8333","79.77.33.128:8333","79.175.125.210:8333","79.175.154.228:8333","80.79.114.34:8333","80.89.203.172:8001","80.100.128.128:8333","80.122.43.78:8333","80.151.124.127:8333","80.167.79.174:8333","80.211.191.11:8333","80.229.151.187:8333","81.4.102.69:8333","81.4.102.91:8333","81.6.34.154:8333","81.7.16.182:8333","81.7.17.202:8333","81.25.71.68:8444","81.235.185.150:8333","82.23.106.56:8333","82.29.58.109:8333","82.117.166.77:8333","82.145.41.24:8333","82.146.153.130:8333","82.149.97.25:17567","82.150.180.30:8333","82.177.176.24:8333","82.194.153.233:8333","82.197.215.125:8333","82.197.218.97:8333","82.199.102.133:8333","82.200.205.30:8333","82.221.111.136:8333","83.32.70.197:8333","83.58.134.138:8333","83.85.131.168:8333","83.163.211.75:8333","83.208.254.182:8333","83.243.191.199:8333","84.46.116.71:8333","84.52.255.147:8333","84.56.105.17:8333","84.59.243.22:8333","84.197.198.167:8333","84.214.74.65:8333","84.217.160.164:8333","84.227.14.62:8333","84.246.200.122:8333","85.14.79.26:8333","85.119.83.25:8333","85.190.0.5:8333","85.192.173.14:8333","85.214.80.203:8333","85.214.204.63:8333","85.229.166.15:8333","85.233.38.5:8333","86.76.7.132:8333","86.80.62.194:8333","86.107.204.50:8333","86.139.248.102:8333","87.79.68.86:8333","87.79.94.221:8333","87.99.79.123:8333","87.104.127.153:8333","87.117.19.226:8333","87.120.8.5:20008","87.224.163.66:8333","87.233.181.146:8333","87.249.207.89:8333","88.86.116.140:8333","88.86.116.141:8333","88.86.243.241:8333","88.87.93.52:1691","88.98.198.130:8333","88.99.109.66:8333","88.119.128.36:8333","88.129.253.46:8333","88.212.44.33:8333","89.23.35.9:8333","89.47.217.222:8333","89.106.199.38:8333","89.142.75.60:8333","89.179.126.97:8333","89.212.9.96:8333","89.218.198.46:8333","89.230.96.42:8333","90.125.157.153:8333","90.146.97.100:8333","90.182.165.18:8333","90.227.130.6:8333","91.92.128.32:8333","91.123.82.15:8333","91.135.0.187:8333","91.152.121.138:8333","91.178.131.108:8333","91.185.198.234:8333","91.193.237.88:8333","91.202.133.75:8885","91.204.99.178:8333","91.204.149.5:8333","91.216.149.28:8333","91.219.25.232:8333","91.222.128.59:8333","92.62.231.253:8333","92.63.192.206:8333","92.63.197.243:8333","92.63.197.245:8333","92.119.112.59:8333","92.243.244.101:8333","92.255.176.109:8333","93.38.119.141:8333","93.50.177.66:8333","93.79.204.222:10333","93.115.28.30:11100","93.115.89.76:8333","93.115.240.26:8333","93.123.180.164:8333","93.126.94.192:8333","93.170.128.106:8333","93.185.103.70:8333","93.189.145.169:8333","93.190.142.127:8333","93.228.3.234:8333","94.19.128.204:8333","94.26.49.71:8333","94.63.65.127:8333","94.72.143.28:8333","94.104.217.250:8333","94.209.115.52:8333","94.237.72.166:8333","94.242.255.31:8333","95.24.48.84:15426","95.69.249.63:8333","95.79.35.133:8333","95.87.226.56:8333","95.91.80.140:8333","95.102.60.168:8333","95.154.90.99:8333","95.156.252.34:8333","95.165.175.75:8333","95.174.125.24:18333","95.183.54.101:12853","95.211.189.3:8333","95.213.143.13:8333","95.213.184.109:778","96.9.80.109:8333","96.47.122.171:8333","97.81.244.191:8333","97.99.13.150:8333","97.104.206.3:8333","98.116.105.49:8333","99.224.131.4:8333","101.92.39.116:8333","101.100.163.118:8327","101.100.174.24:8333","101.251.68.146:12337","102.132.229.253:8333","103.14.244.190:8333","103.16.128.63:8333","103.59.144.135:8333","103.59.144.238:8333","103.99.168.100:8333","103.99.168.130:8333","103.100.220.46:8333","103.105.56.82:8333","103.106.208.207:8333","103.106.211.107:8333","103.108.228.51:8333","104.11.144.71:8333","104.128.228.252:8333","104.152.204.204:8333","104.153.30.236:8333","104.155.233.13:8333","104.198.126.116:8333","104.245.125.251:8333","106.12.57.72:8333","106.72.36.96:46289","106.163.158.127:8333","107.150.41.179:8333","107.191.116.103:8333","108.15.243.207:8333","108.58.252.82:8333","108.160.202.208:8333","108.213.205.103:8333","109.72.83.127:8333","109.99.63.159:8333","109.104.8.48:8333","109.183.251.77:8333","109.198.191.22:8333","109.236.90.122:58333","109.238.81.82:8333","109.248.206.13:8333","109.252.133.57:8333","111.90.145.57:8333","111.90.159.184:50001","113.35.179.149:8333","113.52.135.125:8333","115.47.141.250:8885","115.70.110.4:8333","116.58.171.67:8333","118.1.96.81:8333","118.103.126.140:28333","119.29.54.159:8333","119.207.78.152:8333","121.211.151.99:8333","122.112.148.153:8339","124.160.119.93:8333","128.197.128.222:8333","129.13.189.212:8333","129.97.243.18:8333","130.185.77.105:8333","130.255.187.86:8333","131.114.10.236:8333","131.188.40.34:8333","132.249.239.163:8333","133.18.1.114:8333","134.19.186.195:8333","136.36.123.20:8333","136.56.42.119:8333","137.226.34.46:8333","138.68.20.137:8333","141.101.8.36:8333","145.239.9.3:8333","145.249.106.103:8333","146.255.227.182:4033","147.192.18.175:8333","147.253.54.26:8333","148.66.58.58:8333","148.70.82.85:8333","149.90.34.119:8333","150.143.231.72:8333","153.92.127.216:8333","153.120.115.15:8333","153.124.187.220:8333","154.209.1.138:8333","154.211.159.200:8333","155.4.52.45:8333","156.19.19.90:8333","157.7.211.107:8333","159.100.248.234:8333","159.138.45.220:22235","160.16.0.30:8333","162.154.207.147:8333","163.158.243.230:8333","166.62.82.103:32771","166.62.100.55:8333","167.179.136.11:8333","168.235.74.110:8333","169.55.182.185:8333","171.33.177.9:8333","172.99.120.113:8333","172.105.112.233:8333","172.110.30.81:8333","173.21.218.95:8333","173.23.103.30:8000","173.51.177.2:8333","173.89.28.137:8333","173.208.128.10:8333","173.249.11.207:18333","174.65.135.60:8333","176.38.7.43:8333","176.92.150.12:8333","176.99.2.207:8333","176.126.167.10:8333","176.212.185.153:8333","176.223.136.171:8333","177.52.173.62:8333","178.33.136.162:8333","178.128.39.110:8333","178.143.50.8:8333","178.198.60.155:8333","178.236.137.63:8333","179.48.251.41:8333","180.150.52.37:8333","183.230.93.139:8333","184.80.255.250:8333","184.95.58.166:8336","184.180.129.98:8333","185.19.28.195:8333","185.25.48.184:8333","185.25.60.199:8333","185.50.68.64:8333","185.53.158.12:8333","185.61.79.213:8333","185.64.116.15:8333","185.95.219.53:8333","185.130.215.73:8333","185.130.215.187:8333","185.141.60.127:8333","185.147.11.108:8333","185.154.159.164:9992","185.198.56.77:8333","185.198.59.183:8333","185.216.140.33:8333","185.217.241.142:8333","185.249.199.106:8333","188.42.40.234:18333","188.65.212.138:8333","188.65.212.211:8333","188.68.45.143:8333","188.120.246.125:8333","188.134.5.47:8333","188.134.6.84:8333","188.167.101.51:8333","188.175.77.16:8333","188.213.168.152:8333","188.230.245.188:8333","189.121.185.148:8333","190.104.249.44:8333","190.184.198.34:8333","190.210.234.38:8333","190.218.190.85:8333","192.3.11.20:8333","192.3.11.24:8333","192.166.47.32:8333","192.167.149.143:8333","192.169.94.29:8333","192.169.94.70:8333","192.198.90.98:8333","192.254.89.134:8333","192.254.89.220:8333","193.41.78.125:8333","193.46.83.8:8333","193.59.41.11:8333","193.77.135.181:8333","193.84.116.22:8333","193.194.163.53:8333","194.71.225.55:8333","194.135.135.69:8333","194.158.92.150:8333","195.13.220.165:8333","195.56.63.10:8333","195.135.194.8:8333","195.168.36.20:8333","195.201.33.0:8333","195.202.169.149:8333","195.242.93.189:8333","198.1.231.6:8333","198.44.231.160:6333","198.54.113.59:8333","198.251.83.19:8333","199.68.199.4:8333","199.247.1.117:8333","199.247.10.26:8333","200.76.194.7:8333","201.241.2.85:8333","202.185.45.110:8333","203.86.207.53:8333","203.130.48.117:8885","204.14.245.180:8333","204.111.241.195:8333","204.152.203.98:8333","205.185.122.150:8333","206.124.149.66:8333","207.182.154.178:8333","208.81.1.105:8333","209.133.201.114:8333","209.173.25.140:8333","209.180.174.200:8333","209.190.36.13:8333","210.54.38.227:8333","210.54.39.99:8333","210.203.222.52:8223","211.104.154.140:8333","212.24.103.20:8333","212.33.204.190:8333","212.51.156.139:8333","212.109.198.126:8333","212.237.96.98:8333","212.241.70.213:8333","213.37.92.163:8333","213.89.98.199:8333","213.89.150.13:8333","213.174.156.72:8333","213.209.123.165:8333","213.227.152.108:8333","216.38.129.164:8333","216.86.154.215:8333","216.93.139.63:8333","216.186.250.53:8333","216.194.165.98:8333","217.22.132.220:8333","217.43.72.105:8333","217.64.47.138:8333","217.69.145.234:8333","217.158.9.102:8333","220.130.142.178:33389","220.233.138.130:8333","[2001:1ba8:401:32:b842:3891:5915:c68f]:8333","[2001:1bc0:cc::a001]:8333","[2001:250:200:7:d6a9:fcf4:e78d:2d82]:8333","[2001:4128:6135:e001:5054:ff:fe37:e9eb]:8333","[2001:41d0:fc63:9c00:1acc:d22f:3f5c:ef7f]:8333","[2001:44b8:4195:1801:5c73:5d67:d2a6:9910]:8333","[2001:4800:7821:101:be76:4eff:fe04:9f50]:8333","[2001:4801:7819:74:b745:b9d5:ff10:a61a]:8333","[2001:4801:7821:77:be76:4eff:fe10:c7f6]:8333","[2001:48d0:1:2163:0:ff:febe:5a80]:8333","[2001:48f8:1003::3ba]:8333","[2001:4ba0:fffa:5d::93]:8333","[2001:4c48:2:a328:d8a7:e0ff:fe96:403a]:8333","[2001:56b:dda9:4b00:49f9:121b:aa9e:de30]:8333","[2001:638:a000:4140::ffff:191]:8333","[2001:678:7dc:8::2]:8333","[2001:678:ec:1:250:56ff:fea7:47e9]:8333","[2001:67c:16dc:1201:5054:ff:fe17:4dac]:8333","[2001:67c:21ec:1000::a]:8333","[2001:67c:22fc:1337::5]:8333","[2001:67c:2824:8001:225:90ff:fe67:9830]:7777","[2001:67c:2b5c:101:216:3eff:fea3:5234]:8333","[2001:67c:2db8:13::83]:8333","[2001:718:801:311:5054:ff:fe19:c483]:8333","[2001:8003:d136:1001::11:ffd1]:8333","[2001:8d8:96a:9300::ad:ae2c]:8333","[2001:8f1:1602:700:1b28:a3e3:bb08:a708]:9444","[2001:8f8:1327:1587:3f10:5ab:804d:4039]:8333","[2001:ba8:1f1:f069::2]:8333","[2001:e42:103:100::30]:8333","[2400:2650:480:bc00:bcaf:7c49:8c9e:7cdf]:8333","[2400:4052:e20:4f00:69fe:bb33:7b1c:a1ca]:8333","[2400:8902::f03c:91ff:fea5:ebb7]:8333","[2401:1800:7800:102:be76:4eff:fe1c:a7d]:8333","[2401:2500:203:184::15]:8333","[2401:3900:2:1::2]:8333","[2402:7340:1:56::d0d]:8333","[2405:9800:ba01:251a:c53c:b80a:320d:5b41]:8333","[2405:aa00:2::40]:8333","[2409:10:ca20:1df0:224:e8ff:fe1f:60d9]:8333","[2409:13:1200:d200:16da:e9ff:fee9:b19a]:8333","[240d:1a:3c0:ab00:e9f1:87c:93ac:7687]:8333","[2602:ffc5:1f::1f:9211]:8333","[2604:2000:ffc0:0:5862:b6f8:fe72:762f]:8333","[2604:4300:a:2e:21b:21ff:fe11:392]:8333","[2604:5500:c2a3:7b00:cc6:373b:44a8:caa4]:8333","[2605:9880:201:17::4b7c]:8333","[2605:ae00:203::203]:8333","[2605:c000:2a0a:1::102]:8333","[2605:f700:100:400::131:5b54]:8333","[2606:c680:0:b:3830:34ff:fe66:6663]:8333","[2607:9280:b:73b:250:56ff:fe21:bf32]:8333","[2607:f128:40:1703::2]:8333","[2607:f3a0:1000:9:f82a:fdff:fea1:3315]:8333","[2607:f470:8:1048:ae1f:6bff:fe68:5e42]:8333","[2607:fd70:4a:babe:b00b:1e5:1bd5:f78]:8333","[2607:ff50:0:71::13]:8333","[2620:6e:a000:1:42:42:42:42]:8333","[2804:14d:baa7:9674:3615:9eff:fe23:d610]:8333","[2a00:1328:e101:c00::163]:8333","[2a00:1398:4:2a03:215:5dff:fed6:1033]:8333","[2a00:13a0:3015:1:85:14:79:26]:8333","[2a00:1630:14::101]:8333","[2a00:1768:2001:27::ef6a]:8333","[2a00:1828:a004:2::666]:8333","[2a00:1838:36:2c::3e95]:8333","[2a00:1b60:2:4:40d0:eff:fe88:ebd4]:8333","[2a00:7b80:452:2000::138]:8333","[2a00:7b80:454:2000::101]:8333","[2a00:8a60:e012:a00::21]:8333","[2a01:4240:5f52:9246::1]:8333","[2a01:430:17:1::ffff:1153]:8333","[2a01:488:66:1000:53a9:1573:0:1]:8333","[2a01:6f0:ffff:120::8dcb]:8333","[2a01:7a0:2:137a::11]:8333","[2a01:7a7:2:131b:20c:29ff:fe9a:3922]:8333","[2a01:7c8:d002:318:5054:ff:febe:cbb1]:8333","[2a01:cb00:d3d:7700:227:eff:fe28:c565]:8333","[2a01:d0:ffff:7368::2]:8333","[2a01:e0a:182:1300:591e:529:b376:c654]:8333","[2a01:e34:ee6b:2ab0:88c2:1c12:f4eb:c26c]:8333","[2a02:1205:34c3:d890:c0e:741e:c45f:3605]:8333","[2a02:2c8:1:400:34::184]:8333","[2a02:2f0d:202:f900:5e9a:d8ff:fe57:8bc5]:8333","[2a02:390:9000:0:218:7dff:fe10:be33]:8333","[2a02:4780:9:0:2:f928:f280:9a6f]:8333","[2a02:578:4f07:24:76ad:cef7:93c1:b9b9]:8333","[2a02:7aa0:1619::590:eba2]:8333","[2a02:7aa0:1619::adc:8de0]:8333","[2a02:8108:95bf:eae3:211:32ff:fe8e:b5b8]:8333","[2a02:c207:2014:9913::1]:18333","[2a02:e00:fff0:23f::1]:8333","[2a02:f680:1:1100::5453]:8333","[2a03:1b20:1:f410:40::3e]:16463","[2a03:2260:11e:301::8]:8333","[2a03:2260:11e:302::3]:8333","[2a03:4000:6:416c::43]:8333","[2a04:2180:1:c:f000::15]:8333","[2a04:3543:1000:2310:8492:b8ff:fe91:22e8]:8333","[2a05:6d40:b94e:d100:225:90ff:fe0d:cfc2]:8333","[2a05:fc87:4::6]:8333","[2a07:7200:ffff:c53f::e1:17]:8333","[2a0b:2ac0:1:0:d6ae:52ff:fe7b:741c]:8333","[2a0b:2ac0:1:0:d6ae:52ff:fe7b:88eb]:8333","25lhwv6jaqbtek5x.onion:8333","2empatdfea6vwete.onion:8333","2hpjn6ndxjafgoej.onion:8333","34aqcwnnuiqh234f.onion:8333","3frtobxxkgkhwjx7.onion:8333","3gxqibajrtysyp5o.onion:8333","3lf37sdzhpxh6fpv.onion:8333","3q5iydjrrutqjb2y.onion:8333","3qzrkpxduf44jqg5.onion:8333","3sami4tg4yhctjyc.onion:8333","3w77hrilg6q64opl.onion:8333","46xh2sbjsjiyl4fu.onion:8333","4ee44qsamrjpywju.onion:8333","4gwvtoppsaffaxg7.onion:8333","4haplrtkprjqhm2j.onion:8333","4u3y3zf2emynt6ui.onion:8333","4wx34hn3kybujklg.onion:8333","56czufbruq46sb2c.onion:8333","57dytizbai7o4kq7.onion:8333","5guaeulc7xm4g2mm.onion:8334","5mtvd4dk62ccdk4v.onion:8333","5nsfm4nqqzzprjrp.onion:8333","5pmjz6mmikyabaw5.onion:8333","6eurcxoqsa4qpiqq.onion:8333","6ivvkeseojsmpby4.onion:8333","6luc7owlbbaj52lr.onion:8333","6tlha6njtcuwpfa3.onion:8333","6ymgbvnn6d5nfmv4.onion:8333","6z5cyaswulhxcvhj.onion:8333","72y2n5rary4mywkz.onion:8333","7a354g25lnvry4ic.onion:8333","7b75ub5dapphemit.onion:8333","7xaqpr7exrtlnjbb.onion:8333","a64haiqsl76l25gv.onion:8333","ab7ftdfw6qhdx3re.onion:8333","aiupgbtdqpmwfpuz.onion:8333","akeg56rzkg7rsyyg.onion:8333","akinbo7tlegsnsxn.onion:8333","anem5aq4cr2zl7tz.onion:8333","at3w5qisczgguije.onion:8333","auo4zjsp44vydv6c.onion:8333","b6vrxhrrle7jxiua.onion:8333","bitcoinranliixsu.onion:8333","blcktrgve5vetjsk.onion:8333","bowg4prf63givea4.onion:8333","cj2nexmwocyy5unq.onion:8333","cjuek22p4vv4hzbu.onion:8333","cklaa2xdawrb75fg.onion:8333","coxiru76nnfw3vdj.onion:8333","cqwcyvvk5xnqv3yw.onion:8333","cwq2fuc54mlp3ojc.onion:8333","dganr7dffsacayml.onion:8333","djbsspmvlc6ijiis.onion:8333","dmfwov5ycnpvulij.onion:8333","dp2ekfbxubpdfrt4.onion:8333","dw2ufbybrgtzssts.onion:4333","dxv5u4xaeydpbrrp.onion:8333","edkmfeaapvavhtku.onion:8333","ejdoey3uay3cz7bs.onion:8333","eladlvwflaahxomr.onion:8333","ffhx6ttq7ejbodua.onion:8333","fqdzxl4kjboae35b.onion:8333","hbnnzteon75un65y.onion:8333","hcyxhownxdv7yybw.onion:8333","hdfcxll2tqs2l4jc.onion:8333","hdld2bxyvzy45ds4.onion:8333","hnqwmqikfmnkpdja.onion:8333","hvmjovdasoin43wn.onion:8333","hwzcbnenp6dsp6ow.onion:8333","hz26wamjlbd7arrl.onion:8333","i5ellwzndjuke242.onion:8333","iapvpwzs4gpbl6fk.onion:8885","if7fsvgyqwowxkcn.onion:8333","ilukzjazxlxrbuwy.onion:8333","ju5duo3r6p6diznc.onion:8333","k3i3suxlg4w27uas.onion:8333","k7omfveynnjg674e.onion:8333","ko37ti7twplktxqu.onion:8333","kswfyurnglm65u7b.onion:8333","ldu2hbiorkvdymja.onion:8333","lftugyhf6vnouikf.onion:8333","ln3csnn6774nzgyn.onion:8333","lvh7k53s62frc6ro.onion:8333","lvvgedppmpigudhz.onion:8333","mbjkotfqcn5gnsrm.onion:8333","mk3bnep5ubou7i44.onion:8333","muhp42ytbwi6qf62.onion:8333","n5khsbd6whw7ooip.onion:8333","na6otugfitr7pnlv.onion:8333","nclrhbeertvin7cu.onion:8333","ndmbrjcvu2s6jcom.onion:8333","nf4iypnyjwfpcjm7.onion:8333","nkdw6ywzt3dqwxuf.onion:8333","nqmxpgrpuysullkq.onion:8333","ntml2aeumyglyjlk.onion:8333","o4sl5na6jeqgi3l6.onion:8333","opencubebqqx3buj.onion:8333","oudab5q7ruclifdv.onion:8333","ovbkvgdllk3xxeah.onion:8333","pg2jeh62fkq3byps.onion:8333","pgufebhe6mt7knqz.onion:8333","pkcgxf23ws3lwqvq.onion:8333","po3j2hfkmf7sh36o.onion:8333","qdtau72ifwauot6b.onion:8333","qidnrqy2ozz3nzqq.onion:8333","qpebweackyztorrm.onion:8333","qsl3x63225alx4bt.onion:8333","readybit5veyche6.onion:8333","rjw6vpw5ffoncxuh.onion:8333","s2epxac7ovy36ruj.onion:8333","srkgyv5edn2pa7il.onion:8333","sv5oitfnsmfoc3wu.onion:8333","tdlpmqnpfqehqj7c.onion:8333","ttx7ddwltrixannm.onion:8333","uftbw4zi5wlzcwho.onion:8333","uoailgcebjuws47e.onion:8333","uqvucqhplwqbjrsb.onion:8333","uz3pvdhie3372vxw.onion:8333","v2x7gpj3shxfnl25.onion:8333","vdhrg3k2akmf6kek.onion:8333","vov46htt6gyixdmb.onion:8333","vrfs5jwtfzj2ss6n.onion:8333","vwpcfguewxhky4iy.onion:8333","wg3b3qxcwcrraq2o.onion:8333","wgeecjm4w4ko66f7.onion:8333","wmxc6ask4a5xyaxh.onion:8333","wqrafn4zal3bbbhr.onion:8333","xagzqmjgwgdvl2di.onion:8333","xhi5x5qc44elydk4.onion:8333","xk6bjlmgvwojvozj.onion:8333","xmgr7fsmp7bgburk.onion:8333","xocvz3dzyu2kzu6f.onion:8333","xv7pt6etwxiygss6.onion:8444","xz563swdjd7yqymb.onion:8333","yumx7asj7feoozic.onion:8333","yzmyolvp55rydnsm.onion:8333","z3forfpyjyxxgfr5.onion:8333","z5x2wes6mhbml2t5.onion:8333","zmaddsqelw2oywfb.onion:8444","zqlojwtc4lsurgie.onion:8333","zvwc7ad4m2dvc74x.onion:8333"]}],["bcoin","/lib/net/seeds/testnet.js",function(e,t,r,i,s,n){"use strict";r.exports=["thfsmmn2jbitcoin.onion","it2pj4f7657g3rhi.onion","nkf5e6b7pl4jfd4a.onion","4zhkir2ofl7orfom.onion","t6xj6wilh4ytvcs7.onion","i6y6ivorwakd7nw3.onion","ubqj4rsu3nqtxmtp.onion","206.189.210.107:18333","[2a02:c207:2020:2583::1]:18333","52.59.254.220:18333","195.201.139.202:18333","186.24.252.114:18333","99.62.184.68:18333","[2a01:4f8:c17:199c::2]:18333","139.162.90.51:18333","185.211.58.68:18333","54.249.51.109:18333","159.65.238.250:18333","128.199.150.233:18334","18.215.126.20:18333","104.198.116.20:18333","45.76.111.197:18333","59.27.21.157:18333","106.75.224.68:18333","138.201.238.212:18333","52.1.65.208:18333","59.110.12.12:18333","188.166.57.16:18333","93.242.120.15:18333","104.130.253.244:18333","[2a01:7c8:d001:4be:5054:ff:fef6:95db]:18333","35.195.234.115:18333","[2001:0:9d38:90d7:24a9:2680:86b1:2041]:18333","178.44.0.188:18333","132.68.60.150:18333","[2601:186:c100:6bcd:219:d1ff:fe75:dc2f]:18333","18.218.202.222:18333","35.198.156.243:18333","54.250.226.223:18333","202.32.183.71:18333","52.243.61.218:18333","43.247.163.162:18333","195.218.178.122:18333","78.41.192.10:18333","122.165.21.214:18333","62.77.152.212:18333","91.209.51.90:18333","217.182.197.109:18333","93.40.7.67:18333","[2001:638:a000:4140::ffff:191]:18333","41.210.147.78:18333","[2a01:4f8:151:30c9::2]:18333","100.26.189.204:18333","195.201.131.199:18333","18.208.215.27:18333","95.216.35.252:18333","119.139.196.90:18333","52.79.236.4:18333","18.237.204.203:9343","35.185.183.88:18333","38.96.155.198:18333","13.125.214.173:18333","141.223.85.156:18333","47.74.48.92:18333","24.232.218.134:18333","213.239.212.79:25010","202.32.183.87:18333","173.212.194.197:18333","62.210.113.130:18333","23.241.161.131:18333","142.112.184.102:18333","47.75.70.201:18333","206.189.166.210:18333","85.216.75.225:18333","192.250.236.149:18333","202.32.183.72:18333","178.128.112.159:18333","92.210.111.119:18333","78.46.44.138:8343","[2a01:4f8:221:4689::2]:18333","92.222.39.78:18333","18.179.1.217:18333","54.165.195.4:18333","82.214.94.14:18333","34.222.102.24:18333","109.190.44.233:18333","178.63.49.222:18333","[2400:8901::f03c:91ff:fe81:6f9b]:18333","[2a02:7b40:b0df:8401::1]:18333","198.27.208.77:18333","121.196.211.239:12002","106.75.224.88:18333","132.232.11.31:18333","112.166.245.2:18333","34.207.108.77:18333","159.65.254.106:18333","181.30.30.53:18333","95.216.36.232:18333","100.24.50.66:18333","169.1.13.216:18333","120.79.73.209:18333","203.104.158.165:18000","140.143.140.78:18333","82.221.111.136:18333","13.115.115.90:18352","[2a01:4f8:160:4425::2]:18333","[2002:b2c9:e697:10:8de0:efc6:f8af:45ec]:18333","35.198.232.206:18333","88.208.3.158:18333","64.15.128.128:19000","188.154.144.206:18333","54.66.200.174:18333","13.78.35.128:18333","159.203.183.112:18333","23.105.240.44:18333","89.47.165.232:18333","54.92.98.67:18333","35.196.227.21:18333","188.225.18.57:18333","158.69.226.187:18333","35.241.203.98:18333","47.254.33.91:18333","[2a01:4f9:2a:2768::2]:18333","[2a02:7b40:b0df:8682::1]:18333","112.222.87.222:18333","18.136.144.35:18333","69.61.93.254:18333","59.56.110.11:18333","13.229.105.16:18333","172.104.24.78:18333","34.205.125.180:18333","104.248.206.83:18333","[2a01:4f9:2b:628::2]:18333","142.93.57.143:18333","176.233.134.238:18333","159.65.131.43:18333","89.248.168.43:18333","35.167.57.238:18333","193.70.127.197:18333","93.94.252.175:18333","213.133.103.178:18333","[2001:999:11:5d72:6425:89fa:fa63:445e]:18333","216.221.61.175:18333","149.28.179.14:18333","18.209.104.24:18333","64.147.90.37:18333","66.220.116.3:18333","52.80.239.210:18336","193.0.217.2:18333","24.35.243.25:18333","[2a02:a03f:4721:2200:5c7c:282:aafa:5d98]:18333","96.95.43.147:18333","195.201.81.229:18333","13.230.27.206:18333","18.130.66.235:18333","136.144.129.222:18333","[2a02:2698:7022:166e:3978:80df:7098:5723]:18333","[2a00:7c80:0:71::8]:18333","34.228.37.151:18333","139.162.90.51:18333","[2a01:4f8:190:320c::2]:18333","144.76.27.145:18333","157.97.106.250:18333","35.198.197.205:18333","145.239.6.138:18333","209.58.171.72:18333","[2607:1a00:0:19::fe]:18333","176.223.132.1:18333","[2a01:4f8:221:e49::2]:18333","18.212.212.24:18333","37.187.126.235:18333","52.221.194.9:18333","[2a01:4f8:190:5176::123]:18333","78.47.80.251:18333","84.209.52.208:18333","35.226.233.60:18333","[2a02:c207:2014:5152::1]:18333","159.69.123.83:18333","120.76.201.4:18333","93.190.142.127:18333","186.24.252.114:18333","144.76.71.57:18333","104.248.46.141:18333","159.89.34.110:18333","[2001:41d0:1008:2752::]:9343","188.166.104.86:18333","52.231.157.20:18333","[2a01:4f8:202:626f::2]:18333","167.99.38.203:18333","138.201.252.11:18333","5.9.157.150:18333","51.140.13.130:18333","[2001:41d0:602:e27::]:18333","121.196.197.246:18333","54.183.185.30:18333","183.14.135.209:18333","95.236.56.118:18333","112.133.236.150:18333","176.160.250.226:18333","124.159.172.18:18333","82.116.203.100:18333","54.38.70.176:18333","198.199.76.171:18333","18.191.17.25:18333","5.9.113.104:18333","47.100.227.247:18326","134.175.205.126:18333","58.229.208.152:18333","47.97.70.25:18333","34.246.89.159:18333","158.174.118.167:18333","120.79.250.108:18333","[2a01:4f8:120:918c::2]:18333","159.65.3.215:18333","[2a02:c207:3002:1287::1]:18333","58.107.227.226:18333","176.185.193.160:18333","35.241.186.53:18333","174.142.192.197:19000","35.158.243.90:18333","18.205.96.229:18333","178.128.244.253:18333","47.94.4.179:18333","66.190.107.222:18333","[2a01:7e01::f03c:91ff:fe4d:761d]:18333","119.28.227.248:18333","46.105.108.104:8444","[2a01:4f9:2a:1c85::2]:18333","52.60.133.166:18333","94.130.35.43:18333","103.57.147.217:18333","[2a01:4f8:192:826f::2]:18333","40.115.138.202:18333","142.93.98.153:18333","[2a02:c207:2016:395::1]:18333","38.99.144.10:18333","[2a01:4f8:c0c:1fee::2]:18333","123.185.66.20:18333","104.248.241.134:18333","[2001:470:26:52:58df:b18a:48be:e30e]:18333","[2002:a938:723a::a938:723a]:18333","46.4.157.54:18333","ocasutxnvl4lwegq.onion:18333","35.200.107.60:18333","52.197.170.28:18333","[2600:3c01::f03c:91ff:fee4:ff34]:18333","119.137.52.21:18333","183.14.134.216:18333","203.173.116.91:18333","85.76.2.119:18333","34.219.43.200:18333","142.93.135.102:18333","175.126.163.102:18333","159.203.67.44:18333","35.199.85.227:18333","[2001:19f0:5:eec:ec4:7aff:fe8e:f776]:18333","175.28.136.111:18333","209.97.171.251:18333","88.99.216.98:18333","95.216.36.212:18333","131.188.40.191:18333","13.250.173.230:20333","35.158.243.90:18333","54.250.250.108:18333","39.105.54.203:18333","[2401:a400:3200:5600:b618:d673:f3d9:60da]:18333","85.214.199.24:18333","52.1.65.208:18333","142.44.244.65:18333","[f00d::ae4:100:0:8b15]:18333","5.189.173.60:18333","47.75.70.201:18333","164.132.229.117:18333","13.80.154.5:18333","94.130.14.223:18334","149.28.176.234:18333","54.93.252.1:18333","159.89.159.50:18333","142.93.182.203:18333","94.130.14.223:18333","47.92.119.144:18333","148.251.245.240:18333","52.56.223.26:18333","198.50.128.9:18333","[2a01:4f8:231:915::2]:18333","47.75.57.4:18333","159.65.130.79:18333","51.15.3.210:18333","p7cymjceyfabl45d.onion:18333","192.99.21.101:18333","128.199.43.159:18333","223.72.46.82:18333","84.44.192.184:18333","59.53.22.24:18333","92.53.120.80:18333","78.46.93.242:18333","[2a01:4f8:1c1c:7747::1]:18333","5.9.148.201:18333","95.216.28.122:18333","149.28.163.40:18333","195.201.17.162:18333","47.75.70.201:16333","34.242.160.29:18333","195.177.209.31:18333","136.144.177.25:18333","124.239.252.50:18333","166.87.251.238:18333","108.20.200.187:18333","94.130.215.188:18333","54.37.194.57:18333","178.128.242.54:18333","103.76.36.113:18333","13.59.126.171:18333","95.216.36.212:18333","62.113.245.45:18333","45.79.136.38:18333","178.128.251.37:18333","[2a07:5740:600::e21:3981]:18333","159.65.232.228:18333","95.164.65.194:18333","203.156.197.136:18333","217.182.81.231:18333","18.219.185.29:18333","35.229.134.217:18333","52.62.107.245:18333","58.229.6.99:18333","104.130.141.235:18333","34.244.115.230:18333","52.78.61.161:8332","69.61.93.240:18333","85.214.51.188:18333","180.181.208.42:18333","198.251.83.19:18333","18.203.176.193:18333","88.198.54.148:18333","80.100.203.151:18333","78.24.185.211:18333","52.185.151.112:18333","86.157.22.196:18333","54.185.138.211:18333","165.227.46.200:18333","[2607:5300:60:122a::1]:18333","[2a01:4f8:1c1c:13d6::1]:18333","197.231.221.211:18333","45.32.169.150:18333","64.15.128.128:19000","[2a01:4f8:160:60aa::2]:18333","142.114.29.146:18333","62.210.252.112:18333","203.162.80.96:18333","5.153.129.229:18333","54.154.229.14:18333","5.9.2.145:18333","183.15.179.183:18333","94.130.196.179:18333","185.142.236.46:18333","52.79.83.91:8332","162.212.158.172:18333","[2a02:c207:2019:6174::1]:18333","188.127.231.188:18333","176.9.158.59:18333","176.9.28.202:18333","188.40.93.205:8433","67.40.207.136:18333","52.56.193.245:18333","172.105.194.235:18333","[2001:19f0:5:5e0a:5400:1ff:feb3:fe70]:18333","[2607:5300:60:97bb::]:18333","27.255.83.134:18333","118.163.74.161:18333","35.237.7.206:18333","5.189.155.167:18333","5.9.41.203:18333","106.14.187.240:18333","18.203.142.189:18333","5.35.240.94:18333","149.202.114.201:18333","89.39.107.219:18333","[2a01:4f8:1c1c:5b33::1]:18333","5.9.41.195:18333","34.248.224.68:18333","46.101.124.20:18333","206.189.152.173:18333","94.23.196.189:18333","51.68.152.207:18333","18.215.126.20:18333","198.58.102.18:18333","118.243.116.125:18333","198.245.50.69:8306","35.176.132.216:18333","[2001:0:dedd:5fc:34f0:1efa:3f57:ff74]:18333","206.189.224.183:18333","18.102.228.25:18333","179.125.29.69:18333","13.125.228.145:18333","[2601:182:ce00:991a::95e0]:18333","88.99.162.254:18333","71.232.134.0:18333","[2001:0:9d38:953c:38d1:dd9d:8c11:3dcb]:18333","123.112.109.89:18333","[2600:1700:57f0:8050:552b:b508:b8f8:eec3]:18333","119.59.98.71:18333","183.14.30.236:18333","[2001:0:5ef5:79fd:38c4:138c:41eb:e85c]:18333","50.28.99.81:18333","77.180.163.37:18333","150.249.209.137:18333","13.78.35.128:18333","52.80.239.210:18336","52.80.239.210:18332","195.201.108.3:18333","178.128.171.81:18333","163.172.183.126:18333","67.205.179.161:18333","173.212.235.217:18333","109.236.91.15:18333","104.198.116.20:18333","[2a01:4f9:2b:4ca::2]:18333","212.32.231.161:18333","116.125.120.98:18333","52.209.118.89:18333","104.196.153.160:18333","58.229.6.99:18333","13.125.190.124:18333","88.198.207.38:18333","13.251.176.17:18333","188.163.43.20:18333","91.121.95.47:18333","88.208.3.158:18333","85.214.213.86:18333","47.94.219.233:18333","51.15.81.77:18333","151.62.194.236:18333","[2a00:1370:8114:a60d:35e8:b8ee:a828:43f8]:18333","95.179.141.44:18333","47.91.237.127:18333","18.212.60.14:18333","47.75.96.152:18333","207.180.231.27:18333","[2a01:4f8:190:5095::2]:18333","139.59.69.9:18333","118.178.237.177:18333","[2001:470:1f06:15b4::2]:18333","142.93.184.212:18333","13.66.220.73:18333","188.166.99.121:18333","111.231.81.157:18333","95.216.10.46:18333","[2a01:4f9:2a:2510::2]:18333","39.59.36.92:18333","188.40.93.205:8433","173.115.51.70:18333","158.174.118.167:18333","94.49.173.156:18333","178.128.206.237:18333","118.178.237.177:18445","188.165.6.48:18333","176.107.130.62:18333","[2001:4800:7818:103:be76:4eff:fe05:ebaf]:18333","13.78.12.166:18333","96.126.122.163:18333","190.85.201.38:18333","198.211.121.134:18333","18.136.201.7:18333","[2a01:4f8:161:30c9::2]:18333","[2001:41d0:800:664::]:18333","193.200.173.204:18221","188.87.137.254:18333","54.39.22.4:18333","95.216.15.164:18333","104.196.184.214:18333","76.169.37.102:18333","159.89.230.135:18333","213.32.48.249:18333","89.23.35.9:18333","34.245.220.108:18333","168.63.150.180:18333","138.201.206.36:18333","[2a01:7c8:fff9:16a:5054:ff:fe2e:c06b]:18333","210.181.103.62:18333","163.172.142.212:18333","206.189.157.197:18333","223.223.192.26:18333","123.59.42.129:18333","104.46.63.228:18333","162.213.248.69:18333","13.209.80.208:18333","34.242.236.161:8333","178.128.22.240:18333","112.133.222.171:18333","18.216.130.155:18333","159.69.58.121:18333","35.200.137.255:18333","188.225.18.57:18333","194.118.44.233:18333","35.204.175.155:18333","34.241.225.111:18333","47.75.26.227:8331","[2a01:4f9:2a:2518::2]:18333","183.15.178.126:18333","121.35.102.43:18333","83.163.113.102:18333","88.198.101.22:18333","[2a01:4f8:13a:189b::2]:18333","[2a02:c207:2019:3730::1]:18333","[2a02:810d:13c0:1254:4dfa:38bb:362f:f9e0]:18333","18.204.135.109:18333","[2001:41d0:a:f7eb::1]:18333","195.201.110.218:18333","163.172.172.58:18333","[2a01:4f8:191:840b::2]:18333","147.135.136.189:18333","139.162.156.64:18333","167.114.64.228:18333","40.115.180.81:18333","209.133.215.145:18333","188.165.6.48:18333","34.250.169.52:18333","192.241.158.203:18333","172.104.211.121:18333","160.16.79.6:18333","172.92.140.254:18333","213.186.121.88:18333","37.135.36.102:18333","163.172.94.64:18333","109.236.91.15:18333","213.207.92.204:18333","217.182.86.135:18333","206.189.152.173:18333","18.205.18.126:18333","46.4.95.69:18333","142.4.213.42:18333","111.230.249.75:18333","52.25.126.192:18333","85.214.245.126:18333","167.99.194.65:18333","173.249.21.93:18333","162.212.156.23:18333","18.182.65.187:18333","217.182.75.186:18333","209.97.167.61:18333","35.205.134.126:18333","[2a03:b0c0:3:e0::24:3001]:18333","[2600:1700:3fa0:d4c0::43]:18333","34.217.79.203:9343","82.116.44.10:18333","34.242.97.159:18333","4.28.137.195:18333","89.139.187.39:18333","[2600:3c00::f03c:91ff:fefe:2fb4]:18333","82.116.32.74:18333","206.189.72.149:18333","213.133.110.173:18333","91.185.7.50:18333","198.179.121.215:18333","212.92.122.106:18333","173.212.235.217:18333","52.68.170.149:18333","52.11.139.19:8333","159.203.84.97:18333","76.95.133.92:18333","185.35.137.175:18333","104.198.114.254:18333","104.248.45.147:18333","195.201.198.52:18333","52.26.68.12:34821","[2002:5bec:ef5e::5bec:ef5e]:18333","52.53.225.38:18333","52.221.246.188:18333","147.135.136.189:18333","38.99.144.10:18333","[2001:e68:6dc3:1901:14b1:3ca8:c388:5184]:18333","54.245.43.178:18333","34.212.171.224:18333","[2a02:120b:2c13:a510:5054:ff:fe38:c4e7]:18333","95.216.25.125:18333","[2a02:c207:2021:3648::1]:18333","47.92.203.183:18333","18.102.228.28:18333","52.231.31.213:18333","[2a01:4f8:150:6369::2]:18333","85.25.95.141:18333","47.94.243.77:18333","207.154.224.115:18333","47.52.36.209:18333","115.159.103.200:18333","35.187.163.198:18333","70.180.7.114:18333","159.69.195.220:18333","45.33.38.168:18333","213.189.209.34:18333","130.211.48.5:18333","103.196.124.252:18333","114.215.66.15:18333","5.9.141.84:18333","193.200.241.55:18333","175.205.153.99:18333","95.79.117.175:18333","167.114.64.228:18333","59.63.206.56:18333","37.131.211.212:18333","18.30.107.114:18333","66.240.223.231:18333","34.246.89.159:18333","188.72.207.114:18333","ky6peumxtc5gkog4.onion:18333","121.78.223.190:18333","195.201.60.234:18333","163.172.94.64:18333","176.9.27.174:18333","38.96.155.198:18333","159.65.70.143:18333","35.198.197.205:18333","[2001:19f0:5:eec:ec4:7aff:fe8e:f776]:18333","13.57.215.93:18333","174.142.192.197:19000","165.227.55.124:18333","34.235.253.194:18333","141.223.85.171:18333","206.189.135.167:18333","27.120.85.91:18333","[2a01:4f8:1c1c:5b33::1]:18333","163.44.170.170:18333","13.70.180.136:18333","[2600:1f1c:c1e:ee3c:7855:3fcf:f351:9cb2]:18333","106.75.224.68:18333","[2a01:4f8:a0:2239::2]:18333","lkiggf5esgs7d5z6.onion:18333","[2a01:4f8:151:41cc::2]:18333","93.175.9.92:18333","52.64.217.88:18333","47.98.124.48:18333","5.9.5.135:18333","45.77.127.10:18333","159.69.94.63:18333","95.216.68.181:18333","13.78.8.218:18333","159.89.221.66:18333","138.68.61.172:18333","184.167.15.34:18333","52.53.231.136:18333","139.199.201.38:18333","52.52.157.63:18333","[2400:8902::f03c:91ff:fe60:a4fe]:18333","159.69.91.38:18333","217.23.8.64:18333","95.216.69.201:18333","176.9.204.213:18333","173.206.91.166:18333","34.250.169.52:18333","203.138.170.52:18333","35.157.221.0:20010","54.180.102.216:18333","35.203.163.50:18333","124.150.205.221:18333","211.184.136.132:18333","[2001:0:dcfa:40e1:14a6:14b2:53ea:f543]:18333"]}],["bcoin","/lib/net/packets.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),{BloomFilter:h}=__browser_require__(264,r),c=__browser_require__(280,r),u=__browser_require__(20,r),f=__browser_require__(279,r),l=__browser_require__(296,r),d=__browser_require__(17,r),p=__browser_require__(187,r),b=__browser_require__(113,r),g=__browser_require__(301,r),m=__browser_require__(186,r),_=__browser_require__(85,r),{encoding:w}=a,y=Buffer.alloc(0),{inspectSymbol:v}=__browser_require__(21,r);e.types={VERSION:0,VERACK:1,PING:2,PONG:3,GETADDR:4,ADDR:5,INV:6,GETDATA:7,NOTFOUND:8,GETBLOCKS:9,GETHEADERS:10,HEADERS:11,SENDHEADERS:12,BLOCK:13,TX:14,REJECT:15,MEMPOOL:16,FILTERLOAD:17,FILTERADD:18,FILTERCLEAR:19,MERKLEBLOCK:20,FEEFILTER:21,SENDCMPCT:22,CMPCTBLOCK:23,GETBLOCKTXN:24,BLOCKTXN:25,UNKNOWN:26,INTERNAL:27,DATA:28},e.typesByVal=["VERSION","VERACK","PING","PONG","GETADDR","ADDR","INV","GETDATA","NOTFOUND","GETBLOCKS","GETHEADERS","HEADERS","SENDHEADERS","BLOCK","TX","REJECT","MEMPOOL","FILTERLOAD","FILTERADD","FILTERCLEAR","MERKLEBLOCK","FEEFILTER","SENDCMPCT","CMPCTBLOCK","GETBLOCKTXN","BLOCKTXN","UNKNOWN","INTERNAL","DATA"];class E{constructor(){this.type=-1,this.cmd=""}getSize(){return 0}toWriter(e){return e}toRaw(){return y}fromReader(e){return this}fromRaw(e){return this}}class S extends E{constructor(t){super(),this.cmd="version",this.type=e.types.VERSION,this.version=c.PROTOCOL_VERSION,this.services=c.LOCAL_SERVICES,this.time=u.now(),this.remote=new l,this.local=new l,this.nonce=c.ZERO_NONCE,this.agent=c.USER_AGENT,this.height=0,this.noRelay=!1,t&&this.fromOptions(t)}fromOptions(e){return null!=e.version&&(this.version=e.version),null!=e.services&&(this.services=e.services),null!=e.time&&(this.time=e.time),e.remote&&this.remote.fromOptions(e.remote),e.local&&this.local.fromOptions(e.local),e.nonce&&(this.nonce=e.nonce),e.agent&&(this.agent=e.agent),null!=e.height&&(this.height=e.height),null!=e.noRelay&&(this.noRelay=e.noRelay),this}static fromOptions(e){return(new this).fromOptions(e)}getSize(){let e=0;return e+=20,e+=this.remote.getSize(!1),e+=this.local.getSize(!1),e+=8,e+=w.sizeVarString(this.agent,"ascii"),e+=5}toWriter(e){return e.writeI32(this.version),e.writeU32(this.services),e.writeU32(0),e.writeI64(this.time),this.remote.toWriter(e,!1),this.local.toWriter(e,!1),e.writeBytes(this.nonce),e.writeVarString(this.agent,"ascii"),e.writeI32(this.height),e.writeU8(this.noRelay?0:1),e}toRaw(){const e=this.getSize();return this.toWriter(a.write(e)).render()}fromReader(e){return this.version=e.readI32(),this.services=e.readU32(),e.readU32(),this.time=e.readI64(),this.remote.fromReader(e,!1),e.left()>0&&(this.local.fromReader(e,!1),this.nonce=e.readBytes(8)),e.left()>0&&(this.agent=e.readVarString("ascii",256)),e.left()>0&&(this.height=e.readI32()),e.left()>0&&(this.noRelay=0===e.readU8()),10300===this.version&&(this.version=300),o(this.version>=0,"Version is negative."),o(this.time>=0,"Timestamp is negative."),this.height<0&&(this.height=0),this}static fromReader(e){return(new this).fromReader(e)}fromRaw(e){return this.fromReader(a.read(e))}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e,t)}}class I extends E{constructor(){super(),this.cmd="verack",this.type=e.types.VERACK}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}}class k extends E{constructor(t){super(),this.cmd="ping",this.type=e.types.PING,this.nonce=t||null}getSize(){return this.nonce?8:0}toRaw(){const e=this.getSize();return this.toWriter(a.write(e)).render()}toWriter(e){return this.nonce&&e.writeBytes(this.nonce),e}fromReader(e){return e.left()>=8&&(this.nonce=e.readBytes(8)),this}fromRaw(e){return this.fromReader(a.read(e))}static fromReader(e){return(new this).fromRaw(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}}class A extends E{constructor(t){super(),this.cmd="pong",this.type=e.types.PONG,this.nonce=t||c.ZERO_NONCE}getSize(){return 8}toWriter(e){return e.writeBytes(this.nonce),e}toRaw(){return this.toWriter(a.write(8)).render()}fromReader(e){return this.nonce=e.readBytes(8),this}fromRaw(e){return this.fromReader(a.read(e))}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}}class O extends E{constructor(){super(),this.cmd="getaddr",this.type=e.types.GETADDR}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}}class x extends E{constructor(t){super(),this.cmd="addr",this.type=e.types.ADDR,this.items=t||[]}getSize(){let e=0;return e+=w.sizeVarint(this.items.length),e+=30*this.items.length}toWriter(e){e.writeVarint(this.items.length);for(const t of this.items)t.toWriter(e,!0);return e}toRaw(){const e=this.getSize();return this.toWriter(a.write(e)).render()}fromRaw(e){const t=a.read(e),r=t.readVarint();for(let e=0;e<r;e++)this.items.push(l.fromReader(t,!0));return this}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}}class R extends E{constructor(t){super(),this.cmd="inv",this.type=e.types.INV,this.items=t||[]}getSize(){let e=0;return e+=w.sizeVarint(this.items.length),e+=36*this.items.length}toWriter(e){o(this.items.length<=c.MAX_INV),e.writeVarint(this.items.length);for(const t of this.items)t.toWriter(e);return e}toRaw(){const e=this.getSize();return this.toWriter(a.write(e)).render()}fromReader(e){const t=e.readVarint();o(t<=c.MAX_INV,"Inv item count too high.");for(let r=0;r<t;r++)this.items.push(b.fromReader(e));return this}fromRaw(e){return this.fromReader(a.read(e))}static fromReader(e){return(new this).fromRaw(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}}class M extends R{constructor(t){super(t),this.cmd="getdata",this.type=e.types.GETDATA}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}}class P extends R{constructor(t){super(t),this.cmd="notfound",this.type=e.types.NOTFOUND}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}}class B extends E{constructor(t,r){super(),this.cmd="getblocks",this.type=e.types.GETBLOCKS,this.version=c.PROTOCOL_VERSION,this.locator=t||[],this.stop=r||null}getSize(){let e=0;return e+=4,e+=w.sizeVarint(this.locator.length),e+=32*this.locator.length,e+=32}toWriter(e){o(this.locator.length<=c.MAX_INV,"Too many block hashes."),e.writeU32(this.version),e.writeVarint(this.locator.length);for(const t of this.locator)e.writeHash(t);return e.writeHash(this.stop||d.ZERO_HASH),e}toRaw(){const e=this.getSize();return this.toWriter(a.write(e)).render()}fromReader(e){this.version=e.readU32();const t=e.readVarint();o(t<=c.MAX_INV,"Too many block hashes.");for(let r=0;r<t;r++)this.locator.push(e.readHash());return this.stop=e.readHash(),this.stop.equals(d.ZERO_HASH)&&(this.stop=null),this}fromRaw(e){return this.fromReader(a.read(e))}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}}class N extends B{constructor(t,r){super(t,r),this.cmd="getheaders",this.type=e.types.GETHEADERS}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}}class T extends E{constructor(t){super(),this.cmd="headers",this.type=e.types.HEADERS,this.items=t||[]}getSize(){let e=0;e+=w.sizeVarint(this.items.length);for(const t of this.items)e+=t.getSize();return e}toWriter(e){o(this.items.length<=2e3,"Too many headers."),e.writeVarint(this.items.length);for(const t of this.items)t.toWriter(e);return e}toRaw(){const e=this.getSize();return this.toWriter(a.write(e)).render()}fromReader(e){const t=e.readVarint();o(t<=2e3,"Too many headers.");for(let r=0;r<t;r++)this.items.push(p.fromReader(e));return this}fromRaw(e){return this.fromReader(a.read(e))}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}}class C extends E{constructor(){super(),this.cmd="sendheaders",this.type=e.types.SENDHEADERS}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}}class q extends E{constructor(t,r){super(),this.cmd="block",this.type=e.types.BLOCK,this.block=t||new g,this.witness=r||!1}getSize(){return this.witness?this.block.getSize():this.block.getBaseSize()}toWriter(e){return this.witness?this.block.toWriter(e):this.block.toNormalWriter(e)}toRaw(){return this.witness?this.block.toRaw():this.block.toNormal()}fromReader(e){return this.block.fromReader(e),this}fromRaw(e){return this.block.fromRaw(e),this}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}}class j extends E{constructor(t,r){super(),this.cmd="tx",this.type=e.types.TX,this.tx=t||new _,this.witness=r||!1}getSize(){return this.witness?this.tx.getSize():this.tx.getBaseSize()}toWriter(e){return this.witness?this.tx.toWriter(e):this.tx.toNormalWriter(e)}toRaw(){return this.witness?this.tx.toRaw():this.tx.toNormal()}fromReader(e){return this.tx.fromRaw(e),this}fromRaw(e){return this.tx.fromRaw(e),this}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}}class D extends E{constructor(t){super(),this.cmd="reject",this.type=e.types.REJECT,this.message="",this.code=D.codes.INVALID,this.reason="",this.hash=null,t&&this.fromOptions(t)}fromOptions(e){let t=e.code;return e.message&&(this.message=e.message),null!=t&&("string"==typeof t&&(t=D.codes[t.toUpperCase()]),t>=D.codes.INTERNAL&&(t=D.codes.INVALID),this.code=t),e.reason&&(this.reason=e.reason),e.hash&&(this.hash=e.hash),this}static fromOptions(e){return(new this).fromOptions(e)}rhash(){return this.hash?u.revHex(this.hash):null}getCode(){const e=D.codesByVal[this.code];return e?e.toLowerCase():this.code.toString(10)}getSize(){let e=0;return e+=w.sizeVarString(this.message,"ascii"),e+=1,e+=w.sizeVarString(this.reason,"ascii"),this.hash&&(e+=32),e}toWriter(e){return o(this.message.length<=12),o(this.reason.length<=111),e.writeVarString(this.message,"ascii"),e.writeU8(this.code),e.writeVarString(this.reason,"ascii"),this.hash&&e.writeHash(this.hash),e}toRaw(){const e=this.getSize();return this.toWriter(a.write(e)).render()}fromReader(e){switch(this.message=e.readVarString("ascii",12),this.code=e.readU8(),this.reason=e.readVarString("ascii",111),this.message){case"block":case"tx":this.hash=e.readHash();break;default:this.hash=null}return this}fromRaw(e){return this.fromReader(a.read(e))}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e,t)}fromReason(e,t,r,i){return"string"==typeof e&&(e=D.codes[e.toUpperCase()]),e||(e=D.codes.INVALID),e>=D.codes.INTERNAL&&(e=D.codes.INVALID),this.message="",this.code=e,this.reason=t,r&&(o(i),this.message=r,this.hash=i),this}static fromReason(e,t,r,i){return(new this).fromReason(e,t,r,i)}static fromError(e,t){return this.fromReason(e.code,e.reason,t)}[v](){const e=D.codesByVal[this.code]||this.code,t=this.hash?u.revHex(this.hash):null;return"<Reject:"+` msg=${this.message}`+` code=${e}`+` reason=${this.reason}`+` hash=${t}`+">"}}D.codes={MALFORMED:1,INVALID:16,OBSOLETE:17,DUPLICATE:18,NONSTANDARD:64,DUST:65,INSUFFICIENTFEE:66,CHECKPOINT:67,INTERNAL:256,HIGHFEE:257,ALREADYKNOWN:258,CONFLICT:259},D.codesByVal={1:"MALFORMED",16:"INVALID",17:"OBSOLETE",18:"DUPLICATE",64:"NONSTANDARD",65:"DUST",66:"INSUFFICIENTFEE",67:"CHECKPOINT",256:"INTERNAL",257:"HIGHFEE",258:"ALREADYKNOWN",259:"CONFLICT"};class U extends E{constructor(){super(),this.cmd="mempool",this.type=e.types.MEMPOOL}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}}class L extends E{constructor(t){super(),this.cmd="filterload",this.type=e.types.FILTERLOAD,this.filter=t||new h}getSize(){return this.filter.getSize()}toWriter(e){return this.filter.toWriter(e)}toRaw(){return this.filter.toRaw()}fromReader(e){return this.filter.fromReader(e),this}fromRaw(e){return this.filter.fromRaw(e),this}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}isWithinConstraints(){return this.filter.isWithinConstraints()}}class z extends E{constructor(t){super(),this.cmd="filteradd",this.type=e.types.FILTERADD,this.data=t||y}getSize(){return w.sizeVarBytes(this.data)}toWriter(e){return e.writeVarBytes(this.data),e}toRaw(){const e=this.getSize();return this.toWriter(a.write(e)).render()}fromReader(e){return this.data=e.readVarBytes(),this}fromRaw(e){return this.fromReader(a.read(e))}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}}class F extends E{constructor(){super(),this.cmd="filterclear",this.type=e.types.FILTERCLEAR}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}}class H extends E{constructor(t){super(),this.cmd="merkleblock",this.type=e.types.MERKLEBLOCK,this.block=t||new m}getSize(){return this.block.getSize()}toWriter(e){return this.block.toWriter(e)}toRaw(){return this.block.toRaw()}fromReader(e){return this.block.fromReader(e),this}fromRaw(e){return this.block.fromRaw(e),this}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}}class V extends E{constructor(t){super(),this.cmd="feefilter",this.type=e.types.FEEFILTER,this.rate=t||0}getSize(){return 8}toWriter(e){return e.writeI64(this.rate),e}toRaw(){return this.toWriter(a.write(8)).render()}fromReader(e){return this.rate=e.readI64(),this}fromRaw(e){return this.fromReader(a.read(e))}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}}class K extends E{constructor(t,r){super(),this.cmd="sendcmpct",this.type=e.types.SENDCMPCT,this.mode=t||0,this.version=r||1}getSize(){return 9}toWriter(e){return e.writeU8(this.mode),e.writeU64(this.version),e}toRaw(){return this.toWriter(a.write(9)).render()}fromReader(e){return this.mode=e.readU8(),this.version=e.readU64(),this}fromRaw(e){return this.fromReader(a.read(e))}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}}class W extends E{constructor(t,r){super(),this.cmd="cmpctblock",this.type=e.types.CMPCTBLOCK,this.block=t||new f.CompactBlock,this.witness=r||!1}getSize(){return this.witness?this.block.getSize(!0):this.block.getSize(!1)}toWriter(e){return this.witness?this.block.toWriter(e):this.block.toNormalWriter(e)}toRaw(){return this.witness?this.block.toRaw():this.block.toNormal()}fromReader(e){return this.block.fromReader(e),this}fromRaw(e){return this.block.fromRaw(e),this}static fromReader(e){return(new this).fromRaw(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}}class G extends E{constructor(t){super(),this.cmd="getblocktxn",this.type=e.types.GETBLOCKTXN,this.request=t||new f.TXRequest}getSize(){return this.request.getSize()}toWriter(e){return this.request.toWriter(e)}toRaw(){return this.request.toRaw()}fromReader(e){return this.request.fromReader(e),this}fromRaw(e){return this.request.fromRaw(e),this}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}}class Y extends E{constructor(t,r){super(),this.cmd="blocktxn",this.type=e.types.BLOCKTXN,this.response=t||new f.TXResponse,this.witness=r||!1}getSize(){return this.witness?this.response.getSize(!0):this.response.getSize(!1)}toWriter(e){return this.witness?this.response.toWriter(e):this.response.toNormalWriter(e)}toRaw(){return this.witness?this.response.toRaw():this.response.toNormal()}fromReader(e){return this.response.fromReader(e),this}fromRaw(e){return this.response.fromRaw(e),this}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e,t){return"string"==typeof e&&(e=Buffer.from(e,t)),(new this).fromRaw(e)}}class X extends E{constructor(t,r){super(),this.cmd=t,this.type=e.types.UNKNOWN,this.data=r}getSize(){return this.data.length}toWriter(e){return e.writeBytes(this.data),e}toRaw(){return this.data}fromRaw(e,t){return o(null!=t&&!0===t._isBuffer),this.cmd=e,this.data=t,this}static fromRaw(e,t,r){return"string"==typeof t&&(t=Buffer.from(t,r)),(new this).fromRaw(e,t)}}e.fromRaw=function(e,t){switch(e){case"version":return S.fromRaw(t);case"verack":return I.fromRaw(t);case"ping":return k.fromRaw(t);case"pong":return A.fromRaw(t);case"getaddr":return O.fromRaw(t);case"addr":return x.fromRaw(t);case"inv":return R.fromRaw(t);case"getdata":return M.fromRaw(t);case"notfound":return P.fromRaw(t);case"getblocks":return B.fromRaw(t);case"getheaders":return N.fromRaw(t);case"headers":return T.fromRaw(t);case"sendheaders":return C.fromRaw(t);case"block":return q.fromRaw(t);case"tx":return j.fromRaw(t);case"reject":return D.fromRaw(t);case"mempool":return U.fromRaw(t);case"filterload":return L.fromRaw(t);case"filteradd":return z.fromRaw(t);case"filterclear":return F.fromRaw(t);case"merkleblock":return H.fromRaw(t);case"feefilter":return V.fromRaw(t);case"sendcmpct":return K.fromRaw(t);case"cmpctblock":return W.fromRaw(t);case"getblocktxn":return G.fromRaw(t);case"blocktxn":return Y.fromRaw(t);default:return X.fromRaw(e,t)}},e.Packet=E,e.VersionPacket=S,e.VerackPacket=I,e.PingPacket=k,e.PongPacket=A,e.GetAddrPacket=O,e.AddrPacket=x,e.InvPacket=R,e.GetDataPacket=M,e.NotFoundPacket=P,e.GetBlocksPacket=B,e.GetHeadersPacket=N,e.HeadersPacket=T,e.SendHeadersPacket=C,e.BlockPacket=q,e.TXPacket=j,e.RejectPacket=D,e.MempoolPacket=U,e.FilterLoadPacket=L,e.FilterAddPacket=z,e.FilterClearPacket=F,e.MerkleBlockPacket=H,e.FeeFilterPacket=V,e.SendCmpctPacket=K,e.CmpctBlockPacket=W,e.GetBlockTxnPacket=G,e.BlockTxnPacket=Y,e.UnknownPacket=X}],["bcoin","/lib/primitives/memblock.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(24,r),a=__browser_require__(185,r),h=__browser_require__(183,r),c=__browser_require__(187,r),u=__browser_require__(89,r),f=Buffer.alloc(0);class l extends a{constructor(){super(),this._raw=f}isMemory(){return!0}toHead(){return this._raw.slice(0,80)}getSize(){return this._raw.length}verifyBody(){return!0}getCoinbaseHeight(){if(this.version<2)return-1;try{return this.parseCoinbaseHeight()}catch(e){return-1}}parseCoinbaseHeight(){const e=o.read(this._raw,!0);if(e.seek(80),0===e.readVarint())return-1;e.seek(4);let t=e.readVarint();if(0===t&&0!==e.readU8()&&(t=e.readVarint()),0===t)return-1;e.seek(36);const r=e.readVarBytes();return u.getCoinbaseHeight(r)}fromRaw(e){const t=o.read(e,!0);return this.readHead(t),this._raw=t.data,this}static fromRaw(e){return(new this).fromRaw(e)}toRaw(){return this._raw}toNormal(){return this._raw}toBlock(){const e=h.fromRaw(this._raw);return e._hash=this._hash,e._hhash=this._hhash,e}toHeaders(){return c.fromBlock(this)}static isMemBlock(e){return e instanceof l}}r.exports=l}],["bcoin","/lib/net/parser.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(19,r),{format:h}=__browser_require__(55,r),c=__browser_require__(14,r),u=__browser_require__(33,r),f=__browser_require__(280,r),l=__browser_require__(300,r);class d{constructor(e,t,r){this.cmd=e,this.size=t,this.checksum=r}}r.exports=class extends a{constructor(e){super(),this.network=c.get(e),this.pending=[],this.total=0,this.waiting=24,this.header=null}error(){const e=h.apply(null,arguments);this.emit("error",new Error(e))}feed(e){for(this.total+=e.length,this.pending.push(e);this.total>=this.waiting;){const e=Buffer.allocUnsafe(this.waiting);let t=0;for(;t<e.length;){const r=this.pending[0].copy(e,t);r===this.pending[0].length?this.pending.shift():this.pending[0]=this.pending[0].slice(r),t+=r}o.strictEqual(t,e.length),this.total-=e.length,this.parse(e)}}parse(e){if(o(e.length<=f.MAX_MESSAGE),!this.header)return void(this.header=this.parseHeader(e));const t=u.digest(e).readUInt32LE(0,!0);if(t!==this.header.checksum)return this.waiting=24,this.header=null,void this.error("Invalid checksum: %s.",t.toString(16));let r;try{r=this.parsePayload(this.header.cmd,e)}catch(e){return this.waiting=24,this.header=null,void this.emit("error",e)}this.waiting=24,this.header=null,this.emit("packet",r)}parseHeader(e){const t=e.readUInt32LE(0,!0);if(t!==this.network.magic)return this.error("Invalid magic value: %s.",t.toString(16)),null;let r=0;for(;0!==e[r+4]&&r<12;r++);if(12===r)return this.error("Non NULL-terminated command."),null;const i=e.toString("ascii",4,4+r),s=e.readUInt32LE(16,!0);if(s>f.MAX_MESSAGE)return this.waiting=24,this.error("Packet length too large: %d.",s),null;this.waiting=s;const n=e.readUInt32LE(20,!0);return new d(i,s,n)}parsePayload(e,t){return l.fromRaw(e,t)}}}],["bcoin","/lib/net/peer.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(19,r),{Lock:h}=__browser_require__(203,r),{format:c}=__browser_require__(55,r),u=__browser_require__(304,r),f=__browser_require__(292,r),l=__browser_require__(198,r),{RollingFilter:d}=__browser_require__(264,r),{BufferMap:p}=__browser_require__(86,r),b=__browser_require__(302,r),g=__browser_require__(283,r),m=__browser_require__(300,r),_=__browser_require__(17,r),w=__browser_require__(280,r),y=__browser_require__(113,r),v=__browser_require__(279,r),E=__browser_require__(183,r),S=__browser_require__(85,r),I=__browser_require__(296,r),k=__browser_require__(14,r),A=w.services,O=y.types,x=m.types,{inspectSymbol:R}=__browser_require__(21,r);class M extends a{constructor(e){super(),this.options=e,this.network=this.options.network,this.logger=this.options.logger.context("peer"),this.locker=new h,this.parser=new b(this.network),this.framer=new g(this.network),this.id=-1,this.socket=null,this.opened=!1,this.outbound=!1,this.loader=!1,this.address=new I,this.local=new I,this.name=null,this.connected=!1,this.destroyed=!1,this.ack=!1,this.handshake=!1,this.time=0,this.lastSend=0,this.lastRecv=0,this.drainSize=0,this.drainQueue=[],this.banScore=0,this.invQueue=[],this.onPacket=null,this.next=null,this.prev=null,this.version=-1,this.services=0,this.height=-1,this.agent=null,this.noRelay=!1,this.preferHeaders=!1,this.hashContinue=null,this.spvFilter=null,this.feeRate=-1,this.compactMode=-1,this.compactWitness=!1,this.merkleBlock=null,this.merkleTime=-1,this.merkleMatches=0,this.merkleMap=null,this.syncing=!1,this.sentAddr=!1,this.sentGetAddr=!1,this.challenge=null,this.lastPong=-1,this.lastPing=-1,this.minPing=-1,this.blockTime=-1,this.bestHash=null,this.bestHeight=-1,this.connectTimeout=null,this.pingTimer=null,this.invTimer=null,this.stallTimer=null,this.addrFilter=new d(5e3,.001),this.invFilter=new d(5e4,1e-6),this.blockMap=new p,this.txMap=new p,this.responseMap=new Map,this.compactBlocks=new p,this.init()}static fromInbound(e,t){const r=new this(e);return r.accept(t),r}static fromOutbound(e,t){const r=new this(e);return r.connect(t),r}static fromOptions(e){return new this(new P(e))}init(){this.parser.on("packet",async e=>{try{await this.readPacket(e)}catch(e){this.error(e),this.destroy()}}),this.parser.on("error",e=>{this.destroyed||(this.error(e),this.sendReject("malformed","error parsing message"),this.increaseBan(10))})}hostname(){return this.address.hostname}framePacket(e,t,r){return this.framer.packet(e,t,r)}feedParser(e){return this.parser.feed(e)}_bind(e){o(!this.socket),this.socket=e,this.socket.once("error",e=>{this.connected&&(this.error(e),this.destroy())}),this.socket.once("close",()=>{this.error("Socket hangup."),this.destroy()}),this.socket.on("drain",()=>{this.handleDrain()}),this.socket.on("data",e=>{this.lastRecv=Date.now(),this.feedParser(e)}),this.socket.setNoDelay(!0)}accept(e){return o(!this.socket),this.address=I.fromSocket(e,this.network),this.address.services=0,this.time=Date.now(),this.outbound=!1,this.connected=!0,this._bind(e),e}connect(e){o(!this.socket);const t=this.options.createSocket(e.port,e.host);return this.address=e,this.outbound=!0,this.connected=!1,this._bind(t),t}async getName(){try{if(!this.name){const{host:e,port:t}=this.address,{hostname:r}=await f.lookupService(e,t);this.name=r}}catch(e){}return this.name}async tryOpen(){try{await this.open()}catch(e){}}async open(){try{await this._open()}catch(e){throw this.error(e),this.destroy(),e}}async _open(){this.opened=!0,await this.initConnect(),await this.initStall(),await this.initVersion(),await this.finalize(),o(!this.destroyed),this.emit("open")}initConnect(){return this.connected?(o(!this.outbound),Promise.resolve()):new Promise((e,t)=>{const r=()=>{null!=this.connectTimeout&&(clearTimeout(this.connectTimeout),this.connectTimeout=null),this.socket.removeListener("error",i)},i=e=>{r(),t(e)};this.socket.once("connect",()=>{this.time=Date.now(),this.connected=!0,this.emit("connect"),r(),e()}),this.socket.once("error",i),this.connectTimeout=setTimeout(()=>{this.connectTimeout=null,r(),t(new Error("Connection timed out."))},1e4)})}initStall(){return o(!this.stallTimer),o(!this.destroyed),this.stallTimer=setInterval(()=>{this.maybeTimeout()},M.STALL_INTERVAL),Promise.resolve()}async initVersion(){if(o(!this.destroyed),this.sendVersion(),this.ack||(await this.wait(x.VERACK,1e4),o(this.ack)),-1===this.version&&(this.logger.debug("Peer sent a verack without a version (%s).",this.hostname()),await this.wait(x.VERSION,1e4),o(-1!==this.version)),this.destroyed)throw new Error("Peer was destroyed during handshake.");this.handshake=!0,this.logger.debug("Version handshake complete (%s).",this.hostname())}async finalize(){o(!this.destroyed),this.pingTimer=setInterval(()=>{this.sendPing()},M.PING_INTERVAL),this.invTimer=setInterval(()=>{this.flushInv()},M.INV_INTERVAL)}announceBlock(e){if(!this.handshake)return;if(this.destroyed)return;Array.isArray(e)||(e=[e]);const t=[];for(const r of e)o(r instanceof E),this.invFilter.test(r.hash())||(1!==this.compactMode?this.preferHeaders?t.push(r.toHeaders()):t.push(r.toInv()):(this.invFilter.add(r.hash()),this.sendCompactBlock(r)));this.preferHeaders?this.sendHeaders(t):this.queueInv(t)}announceTX(e){if(!this.handshake)return;if(this.destroyed)return;if(this.noRelay)return;Array.isArray(e)||(e=[e]);const t=[];for(const r of e)if(o(r instanceof S),!this.invFilter.test(r.hash())&&(!this.spvFilter||r.isWatched(this.spvFilter))){if(-1!==this.feeRate){const e=r.hash(),t=this.options.getRate(e);if(-1!==t&&t<this.feeRate)continue}t.push(r.toInv())}this.queueInv(t)}queueInv(e){if(!this.handshake)return;if(this.destroyed)return;Array.isArray(e)||(e=[e]);let t=!1;for(const r of e)r.type===O.BLOCK&&(t=!0),this.invQueue.push(r);(this.invQueue.length>=500||t)&&this.flushInv()}flushInv(){if(this.destroyed)return;const e=this.invQueue;if(0===e.length)return;this.invQueue=[],this.logger.spam("Serving %d inv items to %s.",e.length,this.hostname());const t=[];for(const r of e)this.invFilter.added(r.hash)&&t.push(r);for(let e=0;e<t.length;e+=1e3){const r=t.slice(e,e+1e3);this.send(new m.InvPacket(r))}}sendInv(e){if(this.handshake&&!this.destroyed){Array.isArray(e)||(e=[e]);for(const t of e)this.invFilter.add(t.hash);if(0!==e.length){this.logger.spam("Serving %d inv items to %s.",e.length,this.hostname());for(let t=0;t<e.length;t+=1e3){const r=e.slice(t,t+1e3);this.send(new m.InvPacket(r))}}}}sendHeaders(e){if(this.handshake&&!this.destroyed){Array.isArray(e)||(e=[e]);for(const t of e)this.invFilter.add(t.hash());if(0!==e.length){this.logger.spam("Serving %d headers to %s.",e.length,this.hostname());for(let t=0;t<e.length;t+=2e3){const r=e.slice(t,t+2e3);this.send(new m.HeadersPacket(r))}}}}sendCompactBlock(e){const t=this.compactWitness,r=v.CompactBlock.fromBlock(e,t);this.send(new m.CmpctBlockPacket(r,t))}sendVersion(){const e=new m.VersionPacket;e.version=this.options.version,e.services=this.options.services,e.time=this.network.now(),e.remote=this.address,e.local.setNull(),e.local.services=this.options.services,e.nonce=this.options.createNonce(this.hostname()),e.agent=this.options.agent,e.height=this.options.getHeight(),e.noRelay=this.options.noRelay,this.send(e)}sendGetAddr(){this.sentGetAddr||(this.sentGetAddr=!0,this.send(new m.GetAddrPacket))}sendPing(){this.handshake&&(this.version<=w.PONG_VERSION?this.send(new m.PingPacket):this.challenge?this.logger.debug("Peer has not responded to ping (%s).",this.hostname()):(this.lastPing=Date.now(),this.challenge=w.nonce(),this.send(new m.PingPacket(this.challenge))))}sendFilterLoad(e){this.handshake&&this.options.spv&&this.services&A.BLOOM&&this.send(new m.FilterLoadPacket(e))}sendFeeRate(e){this.handshake&&this.send(new m.FeeFilterPacket(e))}destroy(){const e=this.connected;if(this.destroyed)return;this.destroyed=!0,this.connected=!1,this.socket.destroy(),this.socket=null,null!=this.pingTimer&&(clearInterval(this.pingTimer),this.pingTimer=null),null!=this.invTimer&&(clearInterval(this.invTimer),this.invTimer=null),null!=this.stallTimer&&(clearInterval(this.stallTimer),this.stallTimer=null),null!=this.connectTimeout&&(clearTimeout(this.connectTimeout),this.connectTimeout=null);const t=this.drainQueue;this.drainSize=0,this.drainQueue=[];for(const e of t)e.reject(new Error("Peer was destroyed."));for(const[e,t]of this.responseMap)this.responseMap.delete(e),t.reject(new Error("Peer was destroyed."));this.locker.destroy(),this.emit("close",e)}write(e){if(this.destroyed)throw new Error("Peer is destroyed (write).");this.lastSend=Date.now(),!1===this.socket.write(e)&&this.needsDrain(e.length)}send(e){if(this.destroyed)throw new Error("Peer is destroyed (send).");let t=null;if(e.type===x.TX){const r=e.tx;e.witness?r.isCoinbase()||(t=r.witnessHash()):t=r.hash()}this.sendRaw(e.cmd,e.toRaw(),t),this.addTimeout(e)}sendRaw(e,t,r){const i=this.framePacket(e,t,r);this.write(i)}drain(){return this.destroyed?Promise.reject(new Error("Peer is destroyed.")):0===this.drainSize?Promise.resolve():new Promise((e,t)=>{this.drainQueue.push({resolve:e,reject:t})})}handleDrain(){const e=this.drainQueue;if(this.drainSize=0,0!==e.length){this.drainQueue=[];for(const t of e)t.resolve()}}needsDrain(e){this.drainSize+=e,this.drainSize>=M.DRAIN_MAX&&(this.logger.warning("Peer is not reading: %dmb buffered (%s).",this.drainSize/(1<<20),this.hostname()),this.error("Peer stalled (drain)."),this.destroy())}addTimeout(e){const t=M.RESPONSE_TIMEOUT;if(this.outbound)switch(e.type){case x.MEMPOOL:this.request(x.INV,t);break;case x.GETBLOCKS:this.options.isFull()||this.request(x.INV,t);break;case x.GETHEADERS:this.request(x.HEADERS,2*t);break;case x.GETDATA:this.request(x.DATA,2*t);break;case x.GETBLOCKTXN:this.request(x.BLOCKTXN,t)}}fulfill(e){switch(e.type){case x.BLOCK:case x.CMPCTBLOCK:case x.MERKLEBLOCK:case x.TX:case x.NOTFOUND:{const t=this.response(x.DATA,e);o(!t||0===t.jobs.length);break}}return this.response(e.type,e)}maybeTimeout(){const e=Date.now();for(const[t,r]of this.responseMap)if(e>r.timeout){const e=m.typesByVal[t];return this.error("Peer is stalling (%s).",e.toLowerCase()),void this.destroy()}if(this.merkleBlock&&(o(-1!==this.merkleTime),e>this.merkleTime+M.BLOCK_TIMEOUT))return this.error("Peer is stalling (merkleblock)."),void this.destroy();if(this.syncing&&this.loader&&!this.options.isFull()&&e>this.blockTime+M.BLOCK_TIMEOUT)return this.error("Peer is stalling (block)."),void this.destroy();if(this.options.isFull()||!this.syncing){for(const t of this.blockMap.values())if(e>t+M.BLOCK_TIMEOUT)return this.error("Peer is stalling (block)."),void this.destroy();for(const t of this.txMap.values())if(e>t+M.TX_TIMEOUT)return this.error("Peer is stalling (tx)."),void this.destroy();for(const t of this.compactBlocks.values())if(e>t.now+M.RESPONSE_TIMEOUT)return this.error("Peer is stalling (blocktxn)."),void this.destroy()}if(e>this.time+6e4){if(o(0!==this.time),0===this.lastRecv||0===this.lastSend)return this.error("Peer is stalling (no message)."),void this.destroy();if(e>this.lastSend+M.TIMEOUT_INTERVAL)return this.error("Peer is stalling (send)."),void this.destroy();const t=this.version<=w.PONG_VERSION?4:1;if(e>this.lastRecv+M.TIMEOUT_INTERVAL*t)return this.error("Peer is stalling (recv)."),void this.destroy();if(this.challenge&&e>this.lastPing+M.TIMEOUT_INTERVAL)return this.error("Peer is stalling (ping)."),void this.destroy()}}request(e,t){if(this.destroyed)return null;let r=this.responseMap.get(e);return!r&&(r=new B,this.responseMap.set(e,r),this.responseMap.size>=w.MAX_REQUEST)?(this.destroy(),null):(r.setTimeout(t),r)}response(e,t){const r=this.responseMap.get(e);return r?(this.responseMap.delete(e),r):null}wait(e,t){return new Promise((r,i)=>{const s=this.request(e);s?(s.setTimeout(t),s.addJob(r,i)):i(new Error("Peer is destroyed (request)."))})}error(e){if(!this.destroyed){if("string"==typeof e){const t=c.apply(null,arguments);e=new Error(t)}if("string"==typeof e.code&&"E"===e.code[0]){const t=e.code;(e=new Error(t)).code=t,e.message=`Socket Error: ${t}`}e.message+=` (${this.hostname()})`,this.emit("error",e)}}blockType(){return this.options.spv?O.FILTERED_BLOCK:this.options.compact&&this.hasCompactSupport()&&this.hasCompact()?O.CMPCT_BLOCK:this.hasWitness()?O.WITNESS_BLOCK:O.BLOCK}txType(){return this.hasWitness()?O.WITNESS_TX:O.TX}getData(e){this.send(new m.GetDataPacket(e))}getItems(e,t){const r=[];for(const i of t)r.push(new y(e,i));0!==r.length&&this.getData(r)}getBlock(e){this.getItems(this.blockType(),e)}getTX(e){this.getItems(this.txType(),e)}getFullBlock(e){o(!this.options.spv);let t=O.BLOCK;this.hasWitness()&&(t|=y.WITNESS_FLAG),this.getItems(t,[e])}async readPacket(e){if(!this.destroyed)switch(e.type){case x.PONG:try{this.socket.pause(),await this.handlePacket(e)}finally{this.destroyed||this.socket.resume()}break;default:{const t=await this.locker.lock();try{this.socket.pause(),await this.handlePacket(e)}finally{this.destroyed||this.socket.resume(),t()}break}}}async handlePacket(e){if(this.destroyed)throw new Error("Destroyed peer sent a packet.");const t=this.fulfill(e);switch(e.type){case x.VERSION:await this.handleVersion(e);break;case x.VERACK:await this.handleVerack(e);break;case x.PING:await this.handlePing(e);break;case x.PONG:await this.handlePong(e);break;case x.SENDHEADERS:await this.handleSendHeaders(e);break;case x.FILTERLOAD:await this.handleFilterLoad(e);break;case x.FILTERADD:await this.handleFilterAdd(e);break;case x.FILTERCLEAR:await this.handleFilterClear(e);break;case x.FEEFILTER:await this.handleFeeFilter(e);break;case x.SENDCMPCT:await this.handleSendCmpct(e)}this.onPacket&&await this.onPacket(e),this.emit("packet",e),t&&t.resolve(e)}async handleVersion(e){if(-1!==this.version)throw new Error("Peer sent a duplicate version.");if(this.version=e.version,this.services=e.services,this.height=e.height,this.agent=e.agent,this.noRelay=e.noRelay,this.local=e.remote,!this.network.selfConnect&&this.options.hasNonce(e.nonce))throw new Error("We connected to ourself. Oops.");if(this.version<w.MIN_VERSION)throw new Error("Peer does not support required protocol version.");if(this.outbound){if(!(this.services&A.NETWORK))throw new Error("Peer does not support network services.");if(this.options.headers&&this.version<w.HEADERS_VERSION)throw new Error("Peer does not support getheaders.");if(this.options.spv){if(!(this.services&A.BLOOM))throw new Error("Peer does not support BIP37.");if(this.version<w.BLOOM_VERSION)throw new Error("Peer does not support BIP37.")}if(this.options.hasWitness()&&!(this.services&A.WITNESS))throw new Error("Peer does not support segregated witness.");this.options.compact&&(this.hasCompactSupport()||this.logger.debug("Peer does not support compact blocks (%s).",this.hostname()))}this.send(new m.VerackPacket)}async handleVerack(e){this.ack?this.logger.debug("Peer sent duplicate ack (%s).",this.hostname()):(this.ack=!0,this.logger.debug("Received verack (%s).",this.hostname()))}async handlePing(e){e.nonce&&this.send(new m.PongPacket(e.nonce))}async handlePong(e){const t=e.nonce,r=Date.now();if(this.challenge){if(!t.equals(this.challenge))return t.equals(w.ZERO_NONCE)?(this.logger.debug("Peer sent a zero nonce (%s).",this.hostname()),void(this.challenge=null)):void this.logger.debug("Peer sent the wrong nonce (%s).",this.hostname());r>=this.lastPing?(this.lastPong=r,-1===this.minPing&&(this.minPing=r-this.lastPing),this.minPing=Math.min(this.minPing,r-this.lastPing)):this.logger.debug("Timing mismatch (what?) (%s).",this.hostname()),this.challenge=null}else this.logger.debug("Peer sent an unsolicited pong (%s).",this.hostname())}async handleSendHeaders(e){this.preferHeaders?this.logger.debug("Peer sent a duplicate sendheaders (%s).",this.hostname()):this.preferHeaders=!0}async handleFilterLoad(e){e.isWithinConstraints()?(this.spvFilter=e.filter,this.noRelay=!1):this.increaseBan(100)}async handleFilterAdd(e){const t=e.data;t.length>_.MAX_SCRIPT_PUSH?this.increaseBan(100):(this.spvFilter&&this.spvFilter.add(t),this.noRelay=!1)}async handleFilterClear(e){this.spvFilter&&this.spvFilter.reset(),this.noRelay=!1}async handleFeeFilter(e){const t=e.rate;t<0||t>_.MAX_MONEY?this.increaseBan(100):this.feeRate=t}async handleSendCmpct(e){-1===this.compactMode?e.version>2?this.logger.info("Peer request compact blocks version %d (%s).",e.version,this.hostname()):e.mode>1?this.logger.info("Peer request compact blocks mode %d (%s).",e.mode,this.hostname()):(this.logger.info("Peer initialized compact blocks (mode=%d, version=%d) (%s).",e.mode,e.version,this.hostname()),this.compactMode=e.mode,this.compactWitness=2===e.version):this.logger.debug("Peer sent a duplicate sendcmpct (%s).",this.hostname())}sendGetHeaders(e,t){const r=new m.GetHeadersPacket(e,t);let i=null;r.locator.length>0&&(i=r.locator[0]);let s=null;t&&(s=t),this.logger.debug("Requesting headers packet from peer with getheaders (%s).",this.hostname()),this.logger.debug("Sending getheaders (hash=%h, stop=%h).",i,s),this.send(r)}sendGetBlocks(e,t){const r=new m.GetBlocksPacket(e,t);let i=null;r.locator.length>0&&(i=r.locator[0]);let s=null;t&&(s=t),this.logger.debug("Requesting inv packet from peer with getblocks (%s).",this.hostname()),this.logger.debug("Sending getblocks (hash=%h, stop=%h).",i,s),this.send(r)}sendMempool(){this.handshake&&(this.services&A.BLOOM?(this.logger.debug("Requesting inv packet from peer with mempool (%s).",this.hostname()),this.send(new m.MempoolPacket)):this.logger.debug("Cannot request mempool for non-bloom peer (%s).",this.hostname()))}sendReject(e,t,r,i){const s=m.RejectPacket.fromReason(e,t,r,i);r?this.logger.debug("Rejecting %s %h (%s): code=%s reason=%s.",r,i,this.hostname(),e,t):this.logger.debug("Rejecting packet from %s: code=%s reason=%s.",this.hostname(),e,t),this.logger.debug("Sending reject packet to peer (%s).",this.hostname()),this.send(s)}sendCompact(e){if(this.services&w.services.WITNESS&&this.version>=w.COMPACT_WITNESS_VERSION)return this.logger.info("Initializing witness compact blocks (%s).",this.hostname()),void this.send(new m.SendCmpctPacket(e,2));this.version>=w.COMPACT_VERSION&&(this.logger.info("Initializing normal compact blocks (%s).",this.hostname()),this.send(new m.SendCmpctPacket(e,1)))}increaseBan(e){return this.banScore+=e,this.banScore>=this.options.banScore&&(this.logger.debug("Ban threshold exceeded (%s).",this.hostname()),this.ban(),!0)}ban(){this.emit("ban")}reject(e,t){return this.sendReject(t.code,t.reason,e,t.hash),this.increaseBan(t.score)}getServiceNames(){const e=[];for(const[t,r]of Object.entries(A))this.hasServices(r)&&e.push(t);return e}hasServices(e){return(this.services&e)===e}hasWitness(){return 0!=(this.services&A.WITNESS)}hasCompactSupport(){return!(this.version<w.COMPACT_VERSION)&&(!this.options.hasWitness()||!!(this.services&A.WITNESS)&&this.version>=w.COMPACT_WITNESS_VERSION)}hasCompact(){return-1!==this.compactMode&&(!this.options.hasWitness()||!!this.compactWitness)}[R](){return"<Peer:"+` handshake=${this.handshake}`+` host=${this.hostname()}`+` outbound=${this.outbound}`+` ping=${this.minPing}`+">"}}M.DRAIN_MAX=10<<20,M.STALL_INTERVAL=5e3,M.PING_INTERVAL=3e4,M.INV_INTERVAL=5e3,M.RESPONSE_TIMEOUT=3e4,M.BLOCK_TIMEOUT=12e4,M.TX_TIMEOUT=12e4,M.TIMEOUT_INTERVAL=12e5;class P{constructor(e){this.network=k.primary,this.logger=l.global,this.createSocket=u.createSocket,this.version=w.PROTOCOL_VERSION,this.services=w.LOCAL_SERVICES,this.agent=w.USER_AGENT,this.noRelay=!1,this.spv=!1,this.compact=!1,this.headers=!1,this.banScore=w.BAN_SCORE,this.getHeight=P.getHeight,this.isFull=P.isFull,this.hasWitness=P.hasWitness,this.createNonce=P.createNonce,this.hasNonce=P.hasNonce,this.getRate=P.getRate,e&&this.fromOptions(e)}fromOptions(e){return o(e,"Options are required."),null!=e.network&&(this.network=k.get(e.network)),null!=e.logger&&(o("object"==typeof e.logger),this.logger=e.logger),null!=e.createSocket&&(o("function"==typeof e.createSocket),this.createSocket=e.createSocket),null!=e.version&&(o("number"==typeof e.version),this.version=e.version),null!=e.services&&(o("number"==typeof e.services),this.services=e.services),null!=e.agent&&(o("string"==typeof e.agent),this.agent=e.agent),null!=e.noRelay&&(o("boolean"==typeof e.noRelay),this.noRelay=e.noRelay),null!=e.spv&&(o("boolean"==typeof e.spv),this.spv=e.spv),null!=e.compact&&(o("boolean"==typeof e.compact),this.compact=e.compact),null!=e.headers&&(o("boolean"==typeof e.headers),this.headers=e.headers),null!=e.banScore&&(o("number"==typeof e.banScore),this.banScore=e.banScore),null!=e.getHeight&&(o("function"==typeof e.getHeight),this.getHeight=e.getHeight),null!=e.isFull&&(o("function"==typeof e.isFull),this.isFull=e.isFull),null!=e.hasWitness&&(o("function"==typeof e.hasWitness),this.hasWitness=e.hasWitness),null!=e.createNonce&&(o("function"==typeof e.createNonce),this.createNonce=e.createNonce),null!=e.hasNonce&&(o("function"==typeof e.hasNonce),this.hasNonce=e.hasNonce),null!=e.getRate&&(o("function"==typeof e.getRate),this.getRate=e.getRate),this}static fromOptions(e){return(new this).fromOptions(e)}static getHeight(){return 0}static isFull(){return!1}static hasWitness(){return!0}static createNonce(e){return w.nonce()}static hasNonce(e){return!1}static getRate(e){return-1}}class B{constructor(){this.timeout=0,this.jobs=[]}addJob(e,t){this.jobs.push({resolve:e,reject:t})}setTimeout(e){this.timeout=Date.now()+e}reject(e){for(const t of this.jobs)t.reject(e);this.jobs.length=0}resolve(e){for(const t of this.jobs)t.resolve(e);this.jobs.length=0}}r.exports=M}],["btcp","/lib/btcp.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(305,r)}],["btcp","/lib/tcp-browser.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(19,r);class a extends o{constructor(e){super()}address(){return{address:"127.0.0.1",family:"IPv4",port:0}}async close(){}async getConnections(){return 0}async listen(...e){const t=this.address();return this.emit("listening",t),t}get listening(){return!1}set listening(e){}get maxConnections(){return undefined}set maxConnections(e){}ref(){return this}unref(){return this}}e.unsupported=!0,e.Socket=class extends o{constructor(){super(),this.readable=!0,this.writable=!0,this.encrypted=!1,this.bufferSize=0,this.bytesRead=0,this.bytesWritten=0,this.connecting=!1,this.destroyed=!1,this.localAddress="127.0.0.1",this.localPort=0,this.remoteAddress="127.0.0.1",this.remoteFamily="IPv4",this.remotePort=0}address(){return{address:"127.0.0.1",family:"IPv4",port:0}}connect(e,t){throw new Error("Unsupported.")}destroy(e){return this}end(e,t){throw new Error("Unsupported.")}pause(){return this}ref(){return this}resume(){return this}setEncoding(e){return this}setKeepAlive(e,t){return this}setNoDelay(e){return this}setTimeout(e,t){return this}unref(){return this}write(e,t){throw new Error("Unsupported.")}},e.Server=a,e.connect=function(e,t){throw new Error("Unsupported.")},e.createSocket=e.connect,e.createConnection=e.connect,e.createServer=function(e){return new a(e)}}],["bcoin","/lib/net/pool.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(19,r),{Lock:h}=__browser_require__(203,r),c=__browser_require__(285,r),u=__browser_require__(292,r),f=__browser_require__(304,r),l=__browser_require__(307,r),d=__browser_require__(309,r),p=__browser_require__(294,r),{BloomFilter:b,RollingFilter:g}=__browser_require__(264,r),{BufferMap:m,BufferSet:_}=__browser_require__(86,r),w=__browser_require__(20,r),y=__browser_require__(280,r),v=__browser_require__(206,r),E=__browser_require__(104,r),S=__browser_require__(279,r),I=__browser_require__(14,r),k=__browser_require__(303,r),A=__browser_require__(284,r),O=__browser_require__(113,r),x=__browser_require__(300,r),R=y.services,M=O.types,P=x.types,B=A.scores,{inspectSymbol:N}=__browser_require__(21,r);class T extends a{constructor(e){super(),this.opened=!1,this.options=new C(e),this.network=this.options.network,this.logger=this.options.logger.context("net"),this.chain=this.options.chain,this.mempool=this.options.mempool,this.server=this.options.createServer(),this.nonces=this.options.nonces,this.locker=new h(!0,m),this.connected=!1,this.disconnecting=!1,this.syncing=!1,this.discovering=!1,this.spvFilter=null,this.txFilter=null,this.blockMap=new _,this.txMap=new _,this.compactBlocks=new _,this.invMap=new m,this.pendingFilter=null,this.pendingRefill=null,this.checkpoints=!1,this.headerChain=new p,this.headerNext=null,this.headerTip=null,this.peers=new q,this.hosts=new A(this.options),this.id=0,this.options.spv&&(this.spvFilter=b.fromRate(2e4,.001,b.flags.ALL)),this.options.mempool||(this.txFilter=new g(5e4,1e-6)),this.init()}init(){this.server.on("error",e=>{this.emit("error",e)}),this.server.on("connection",e=>{this.handleSocket(e),this.emit("connection",e)}),this.server.on("listening",()=>{const e=this.server.address();this.logger.info("Pool server listening on %s (port=%d).",e.address,e.port),this.emit("listening",e)}),this.chain.on("block",(e,t)=>{this.emit("block",e,t)}),this.chain.on("reset",()=>{this.checkpoints&&this.resetChain(),this.forceSync()}),this.chain.on("full",()=>{this.sync(),this.emit("full"),this.logger.info("Chain is fully synced (height=%d).",this.chain.height)}),this.chain.on("bad orphan",(e,t)=>{this.handleBadOrphan("block",e,t)}),this.mempool&&(this.mempool.on("tx",e=>{this.emit("tx",e)}),this.mempool.on("bad orphan",(e,t)=>{this.handleBadOrphan("tx",e,t)})),this.options.selfish||this.options.spv||(this.mempool&&this.mempool.on("tx",e=>{this.announceTX(e)}),this.chain.on("block",e=>{this.chain.synced&&this.announceBlock(e)}))}async open(){o(!this.opened,"Pool is already open."),this.opened=!0,this.logger.info("Pool loaded (maxpeers=%d).",this.options.maxOutbound),this.resetChain()}async close(){return o(this.opened,"Pool is not open."),this.opened=!1,this.disconnect()}resetChain(){if(!this.options.checkpoints)return;this.checkpoints=!1,this.headerTip=null,this.headerChain.reset(),this.headerNext=null;const e=this.chain.tip;e.height<this.network.lastCheckpoint&&(this.checkpoints=!0,this.headerTip=this.getNextTip(e.height),this.headerChain.push(new U(e.hash,e.height)),this.logger.info("Initialized header chain to height %d (checkpoint=%h).",e.height,this.headerTip.hash))}async connect(){const e=await this.locker.lock();try{return await this._connect()}finally{e()}}async _connect(){o(this.opened,"Pool is not opened."),this.connected||(await this.hosts.open(),await this.discoverGateway(),await this.discoverExternal(),await this.discoverSeeds(),this.fillOutbound(),await this.listen(),this.startTimer(),this.connected=!0)}async disconnect(){const e=await this.locker.lock();try{return await this._disconnect()}finally{e()}}async _disconnect(){for(const e of this.invMap.values())e.resolve();this.connected&&(this.disconnecting=!0,this.peers.destroy(),this.blockMap.clear(),this.txMap.clear(),null!=this.pendingFilter&&(clearTimeout(this.pendingFilter),this.pendingFilter=null),null!=this.pendingRefill&&(clearTimeout(this.pendingRefill),this.pendingRefill=null),this.checkpoints=!1,this.headerTip=null,this.headerChain.reset(),this.headerNext=null,this.stopTimer(),await this.hosts.close(),await this.unlisten(),this.disconnecting=!1,this.syncing=!1,this.connected=!1)}async listen(){o(this.server),o(!this.connected,"Already listening."),this.options.listen&&(this.server.maxConnections=this.options.maxInbound,await this.server.listen(this.options.port,this.options.host))}async unlisten(){o(this.server),o(this.connected,"Not listening."),this.options.listen&&await this.server.close()}startTimer(){o(null==this.timer,"Timer already started."),this.timer=setInterval(()=>this.discover(),T.DISCOVERY_INTERVAL)}stopTimer(){o(null!=this.timer,"Timer already stopped."),clearInterval(this.timer),this.timer=null}async discover(){if(!this.discovering)try{this.discovering=!0,await this.discoverGateway(),await this.discoverSeeds(!0)}finally{this.discovering=!1}}async discoverGateway(){const e=this.options.publicPort,t=this.options.port;if(!this.options.listen)return!1;if(!this.options.upnp)return!1;let r,i;try{this.logger.debug("Discovering internet gateway (upnp)."),r=await l.discover()}catch(e){return this.logger.debug("Could not discover internet gateway (upnp)."),this.logger.debug(e),!1}try{i=await r.getExternalIP()}catch(e){return this.logger.debug("Could not find external IP (upnp)."),this.logger.debug(e),!1}this.hosts.addLocal(i,e,B.UPNP)&&this.logger.info("External IP found (upnp): %s.",i),this.logger.debug("Adding port mapping %d->%d.",e,t);try{await r.addPortMapping(i,e,t)}catch(e){return this.logger.debug("Could not add port mapping (upnp)."),this.logger.debug(e),!1}return!0}async discoverSeeds(e){if(!this.options.discover)return;if(0===this.hosts.dnsSeeds.length)return;const t=Math.min(2,this.options.maxOutbound),r=this.hosts.size();let i=0;for(let e=this.peers.head();e&&!(e.outbound&&e.connected&&++i>t);e=e.next);(0===r||e&&i<t)&&(this.logger.warning("Could not find enough peers."),this.logger.warning("Hitting DNS seeds..."),await this.hosts.discoverSeeds(),this.logger.info("Resolved %d hosts from DNS seeds.",this.hosts.size()-r),this.refill())}async discoverExternal(){const e=this.options.publicPort;if(!this.options.listen)return;if(this.options.proxy)return;if(this.hosts.local.size>0)return;let t=null;try{t=await u.getIPv4(2e3)}catch(e){this.logger.debug("Could not find external IPv4 (dns)."),this.logger.debug(e)}t&&this.hosts.addLocal(t,e,B.DNS)&&this.logger.info("External IPv4 found (dns): %s.",t);let r=null;try{r=await u.getIPv6(2e3)}catch(e){this.logger.debug("Could not find external IPv6 (dns)."),this.logger.debug(e)}r&&this.hosts.addLocal(r,e,B.DNS)&&this.logger.info("External IPv6 found (dns): %s.",r)}handleSocket(e){if(!e.remoteAddress)return this.logger.debug("Ignoring disconnected peer."),void e.destroy();const t=c.normalize(e.remoteAddress);if(this.peers.inbound>=this.options.maxInbound)return this.logger.debug("Ignoring peer: too many inbound (%s).",t),void e.destroy();if(this.hosts.isBanned(t))return this.logger.debug("Ignoring banned peer (%s).",t),void e.destroy();const r=c.toHostname(t,e.remotePort);o(!this.peers.map.has(r),"Port collision."),this.addInbound(e)}addLoader(){if(!this.opened)return;o(!this.peers.load);for(let e=this.peers.head();e;e=e.next)if(e.outbound)return this.logger.info("Repurposing peer for loader (%s).",e.hostname()),void this.setLoader(e);const e=this.getHost();if(!e)return;const t=this.createOutbound(e);this.logger.info("Adding loader peer (%s).",t.hostname()),this.peers.add(t),this.setLoader(t)}setLoader(e){this.opened&&(o(e.outbound),o(!this.peers.load),o(!e.loader),e.loader=!0,this.peers.load=e,this.sendSync(e),this.emit("loader",e))}startSync(){this.opened&&this.connected&&(this.syncing=!0,this.resync(!1))}forceSync(){this.opened&&this.connected&&this.resync(!0)}sync(e){this.resync(!1)}stopSync(){if(this.syncing){this.syncing=!1;for(let e=this.peers.head();e;e=e.next)e.outbound&&e.syncing&&(e.syncing=!1,e.merkleBlock=null,e.merkleTime=-1,e.merkleMatches=0,e.merkleMap=null,e.blockTime=-1,e.blockMap.clear(),e.compactBlocks.clear());this.blockMap.clear(),this.compactBlocks.clear()}}async resync(e){if(!this.syncing)return;let t;try{t=await this.chain.getLocator()}catch(e){return void this.emit("error",e)}for(let r=this.peers.head();r;r=r.next)r.outbound&&(!e&&r.syncing||this.sendLocator(t,r))}isSyncable(e){return!!this.syncing&&(!e.destroyed&&(!!e.handshake&&(!!(e.services&R.NETWORK)&&(!(this.options.hasWitness()&&!e.hasWitness())&&!(!e.loader&&!this.chain.synced)))))}async sendSync(e){if(e.syncing)return!1;if(!this.isSyncable(e))return!1;let t;e.syncing=!0,e.blockTime=Date.now();try{t=await this.chain.getLocator()}catch(t){return e.syncing=!1,e.blockTime=-1,this.emit("error",t),!1}return this.sendLocator(t,e)}sendLocator(e,t){return!!this.isSyncable(t)&&(this.network.requestMempool&&t.loader&&this.chain.synced&&t.sendMempool(),t.syncing=!0,t.blockTime=Date.now(),this.checkpoints?(t.sendGetHeaders(e,this.headerTip.hash),!0):(t.sendGetBlocks(e),!0))}sendMempool(){for(let e=this.peers.head();e;e=e.next)e.sendMempool()}sendGetAddr(){for(let e=this.peers.head();e;e=e.next)e.sendGetAddr()}resolveHeaders(e){const t=[];for(let e=this.headerNext;e&&(this.headerNext=e.next,t.push(e.hash),t.length!==y.MAX_INV);e=e.next);this.getBlock(e,t)}resolveHeight(e,t){let r=0;for(let i=this.peers.head();i;i=i.next)i.bestHash&&i.bestHash.equals(e)&&i.bestHeight!==t&&(i.bestHeight=t,r+=1);r>0&&this.logger.debug("Resolved height for %d peers.",r)}getNextTip(e){for(const t of this.network.checkpoints)if(t.height>e)return new U(t.hash,t.height);throw new Error("Next checkpoint not found.")}announceList(e){const t=[],r=[];for(const e of this.invMap.values())switch(e.type){case M.BLOCK:t.push(e.msg);break;case M.TX:r.push(e.msg);break;default:o(!1,"Bad item type.")}t.length>0&&e.announceBlock(t),r.length>0&&e.announceTX(r)}getBroadcasted(e,t){const r=t.isTX()?M.TX:M.BLOCK,i=this.invMap.get(t.hash);return i?r!==i.type?(this.logger.debug("Peer requested item with the wrong type (%s).",e.hostname()),null):(this.logger.debug("Peer requested %s %h as a %s packet (%s).",t.isTX()?"tx":"block",t.hash,t.hasWitness()?"witness":"normal",e.hostname()),i.handleAck(e),i.msg):null}async getItem(e,t){const r=this.getBroadcasted(e,t);return r||(this.options.selfish?null:t.isTX()?this.mempool?this.mempool.getTX(t.hash):null:this.chain.options.spv?null:this.chain.options.prune?null:this.chain.getBlock(t.hash))}async sendBlock(e,t,r){const i=this.getBroadcasted(e,t);if(i)return e.send(new x.BlockPacket(i,r)),!0;if(this.options.selfish||this.chain.options.spv||this.chain.options.prune)return!1;if(r||!this.options.hasWitness()){const r=await this.chain.getRawBlock(t.hash);return!!r&&(e.sendRaw("block",r),!0)}const s=await this.chain.getBlock(t.hash);return!!s&&(e.send(new x.BlockPacket(s,r)),!0)}createOutbound(e){const t=k.fromOutbound(this.options,e);return this.hosts.markAttempt(e.hostname),this.bindPeer(t),this.logger.debug("Connecting to %s.",t.hostname()),t.tryOpen(),t}createInbound(e){const t=k.fromInbound(this.options,e);return this.bindPeer(t),t.tryOpen(),t}uid(){const e=Number.MAX_SAFE_INTEGER;this.id>=e-this.peers.size()-1&&(this.id=0);do{this.id+=1}while(this.peers.find(this.id));return this.id}bindPeer(e){e.id=this.uid(),e.onPacket=(t=>this.handlePacket(e,t)),e.on("error",e=>{this.logger.debug(e)}),e.once("connect",()=>{this.handleConnect(e)}),e.once("open",async()=>{try{await this.handleOpen(e)}catch(e){this.emit("error",e)}}),e.once("close",t=>{this.handleClose(e,t)}),e.once("ban",()=>{this.handleBan(e)})}async handlePacket(e,t){switch(t.type){case P.VERSION:await this.handleVersion(e,t);break;case P.VERACK:await this.handleVerack(e,t);break;case P.PING:await this.handlePing(e,t);break;case P.PONG:await this.handlePong(e,t);break;case P.GETADDR:await this.handleGetAddr(e,t);break;case P.ADDR:await this.handleAddr(e,t);break;case P.INV:await this.handleInv(e,t);break;case P.GETDATA:await this.handleGetData(e,t);break;case P.NOTFOUND:await this.handleNotFound(e,t);break;case P.GETBLOCKS:await this.handleGetBlocks(e,t);break;case P.GETHEADERS:await this.handleGetHeaders(e,t);break;case P.HEADERS:await this.handleHeaders(e,t);break;case P.SENDHEADERS:await this.handleSendHeaders(e,t);break;case P.BLOCK:await this.handleBlock(e,t);break;case P.TX:await this.handleTX(e,t);break;case P.REJECT:await this.handleReject(e,t);break;case P.MEMPOOL:await this.handleMempool(e,t);break;case P.FILTERLOAD:await this.handleFilterLoad(e,t);break;case P.FILTERADD:await this.handleFilterAdd(e,t);break;case P.FILTERCLEAR:await this.handleFilterClear(e,t);break;case P.MERKLEBLOCK:await this.handleMerkleBlock(e,t);break;case P.FEEFILTER:await this.handleFeeFilter(e,t);break;case P.SENDCMPCT:await this.handleSendCmpct(e,t);break;case P.CMPCTBLOCK:await this.handleCmpctBlock(e,t);break;case P.GETBLOCKTXN:await this.handleGetBlockTxn(e,t);break;case P.BLOCKTXN:await this.handleBlockTxn(e,t);break;case P.UNKNOWN:await this.handleUnknown(e,t);break;default:o(!1,"Bad packet type.")}this.emit("packet",t,e)}async handleConnect(e){this.logger.info("Connected to %s.",e.hostname()),e.outbound&&this.hosts.markSuccess(e.hostname()),this.emit("peer connect",e)}async handleOpen(e){if(!this.options.selfish&&this.options.listen){const t=this.hosts.getLocal(e.address);t&&e.send(new x.AddrPacket([t]))}this.options.compact&&e.sendCompact(this.options.blockMode),this.hosts.isFull()||e.sendGetAddr(),this.spvFilter&&e.sendFilterLoad(this.spvFilter),this.announceList(e),-1!==this.options.feeRate&&e.sendFeeRate(this.options.feeRate),e.outbound&&this.sendSync(e),e.outbound&&(this.hosts.markAck(e.hostname(),e.services),e.loader||this.peers.load&&!this.peers.load.handshake&&(o(this.peers.load.loader),this.peers.load.loader=!1,this.peers.load=null),this.peers.load||this.setLoader(e)),this.emit("peer open",e)}async handleClose(e,t){const r=e.outbound,i=e.loader,s=e.blockMap.size;this.removePeer(e),i&&(this.logger.info("Removed loader peer (%s).",e.hostname()),this.checkpoints&&this.resetChain()),this.nonces.remove(e.hostname()),this.emit("peer close",e,t),this.opened&&(this.disconnecting||(this.chain.synced&&s>0&&(this.logger.warning("Peer disconnected with requested blocks."),this.logger.warning("Resending sync..."),this.forceSync()),r&&this.refill()))}async handleBan(e){this.ban(e.address),this.emit("ban",e)}async handleVersion(e,t){this.logger.info("Received version (%s): version=%d height=%d services=%s agent=%s",e.hostname(),t.version,t.height,t.services.toString(2),t.agent),this.network.time.add(e.hostname(),t.time),this.nonces.remove(e.hostname()),!e.outbound&&t.remote.isRoutable()&&this.hosts.markLocal(t.remote)}async handleVerack(e,t){}async handlePing(e,t){}async handlePong(e,t){}async handleGetAddr(e,t){if(this.options.selfish)return;if(e.sentAddr)return void this.logger.debug("Ignoring repeated getaddr (%s).",e.hostname());e.sentAddr=!0;const r=this.hosts.toArray(),i=[];for(const t of r)if(e.addrFilter.added(t.hostname,"ascii")&&(i.push(t),1e3===i.length))break;0!==i.length&&(this.logger.debug("Sending %d addrs to peer (%s)",i.length,e.hostname()),e.send(new x.AddrPacket(i)))}async handleAddr(e,t){const r=t.items,i=this.network.now(),s=this.options.getRequiredServices();for(const t of r)e.addrFilter.add(t.hostname,"ascii"),t.isRoutable()&&t.hasServices(s)&&((t.time<=1e8||t.time>i+600)&&(t.time=i-432e3),0!==t.port&&this.hosts.add(t,e.address));this.logger.info("Received %d addrs (hosts=%d, peers=%d) (%s).",r.length,this.hosts.size(),this.peers.size(),e.hostname()),this.fillOutbound()}async handleInv(e,t){const r=await this.locker.lock();try{return await this._handleInv(e,t)}finally{r()}}async _handleInv(e,t){const r=t.items;if(r.length>y.MAX_INV)return void e.increaseBan(100);const i=[],s=[];let n=-1;for(const t of r){switch(t.type){case M.BLOCK:i.push(t.hash);break;case M.TX:s.push(t.hash);break;default:n=t.type;continue}e.invFilter.add(t.hash)}this.logger.spam("Received inv packet with %d items: blocks=%d txs=%d (%s).",r.length,i.length,s.length,e.hostname()),-1!==n&&this.logger.warning("Peer sent an unknown inv type: %d (%s).",n,e.hostname()),i.length>0&&await this.handleBlockInv(e,i),s.length>0&&await this.handleTXInv(e,s)}async handleBlockInv(e,t){if(o(t.length>0),!this.syncing)return;if(!e.loader||this.chain.synced){const r=t[t.length-1];e.bestHash=r}if(!this.chain.synced&&!e.loader)return;if(this.options.hasWitness()&&!e.hasWitness())return;if(this.checkpoints)return;this.logger.debug("Received %d block hashes from peer (%s).",t.length,e.hostname());const r=[];let i=null;for(let s=0;s<t.length;s++){const n=t[s];this.chain.hasOrphan(n)?(this.logger.debug("Received known orphan hash (%s).",e.hostname()),await this.resolveOrphan(e,n)):await this.hasBlock(n)?(i=n,s===t.length-1&&(this.logger.debug("Received existing hash (%s).",e.hostname()),await this.getBlocks(e,n))):r.push(n)}if(i&&this.chain.synced){const t=await this.chain.getHeight(i);-1!==t&&(e.bestHeight=t)}this.getBlock(e,r)}async handleTXInv(e,t){o(t.length>0),this.syncing&&!this.chain.synced||this.ensureTX(e,t)}async handleGetData(e,t){const r=t.items;if(r.length>y.MAX_INV)return this.logger.warning("Peer sent inv with >50k items (%s).",e.hostname()),e.increaseBan(100),void e.destroy();const i=[];let s=0,n=0,o=0,a=-1;for(const t of r)if(t.isTX()){const r=await this.getItem(e,t);if(!r){i.push(t);continue}if(r.isCoinbase()){i.push(t),this.logger.warning("Failsafe: tried to relay a coinbase.");continue}e.send(new x.TXPacket(r,t.hasWitness())),s+=1}else{switch(t.type){case M.BLOCK:case M.WITNESS_BLOCK:if(!await this.sendBlock(e,t,t.hasWitness())){i.push(t);continue}n+=1;break;case M.FILTERED_BLOCK:case M.WITNESS_FILTERED_BLOCK:{if(!this.options.bip37)return this.logger.debug("Peer requested a merkleblock without bip37 enabled (%s).",e.hostname()),void e.destroy();if(!e.spvFilter){i.push(t);continue}const r=await this.getItem(e,t);if(!r){i.push(t);continue}const o=r.toMerkle(e.spvFilter);e.send(new x.MerkleBlockPacket(o));for(const r of o.txs)e.send(new x.TXPacket(r,t.hasWitness())),s+=1;n+=1;break}case M.CMPCT_BLOCK:{if(await this.chain.getHeight(t.hash)<this.chain.tip.height-10){if(!await this.sendBlock(e,t,e.compactWitness)){i.push(t);continue}n+=1;break}const r=await this.getItem(e,t);if(!r){i.push(t);continue}e.sendCompactBlock(r),n+=1,o+=1;break}default:a=t.type,i.push(t);continue}e.hashContinue&&t.hash.equals(e.hashContinue)&&(e.sendInv([new O(M.BLOCK,this.chain.tip.hash)]),e.hashContinue=null),await e.drain()}i.length>0&&e.send(new x.NotFoundPacket(i)),s>0&&this.logger.debug("Served %d txs with getdata (notfound=%d) (%s).",s,i.length,e.hostname()),n>0&&this.logger.debug("Served %d blocks with getdata (notfound=%d, cmpct=%d) (%s).",n,i.length,o,e.hostname()),-1!==a&&this.logger.warning("Peer sent an unknown getdata type: %d (%s).",a,e.hostname())}async handleNotFound(e,t){const r=t.items;for(const t of r)if(!this.resolveItem(e,t))return this.logger.warning("Peer sent notfound for unrequested item: %h (%s).",t.hash,e.hostname()),void e.destroy()}async handleGetBlocks(e,t){if(!this.chain.synced)return;if(this.options.selfish)return;if(this.chain.options.spv)return;if(this.chain.options.prune)return;let r=await this.chain.findLocator(t.locator);r&&(r=await this.chain.getNextHash(r));const i=[];for(;r&&(!t.stop||!r.equals(t.stop));){if(i.push(new O(M.BLOCK,r)),500===i.length){e.hashContinue=r;break}r=await this.chain.getNextHash(r)}e.sendInv(i)}async handleGetHeaders(e,t){if(!this.chain.synced)return;if(this.options.selfish)return;if(this.chain.options.spv)return;if(this.chain.options.prune)return;let r,i;t.locator.length>0?(r=await this.chain.findLocator(t.locator))&&(r=await this.chain.getNextHash(r)):r=t.stop,r&&(i=await this.chain.getEntry(r));const s=[];for(;i&&(s.push(i.toHeaders()),!t.stop||!i.hash.equals(t.stop))&&2e3!==s.length;)i=await this.chain.getNext(i);e.sendHeaders(s)}async handleHeaders(e,t){const r=await this.locker.lock();try{return await this._handleHeaders(e,t)}finally{r()}}async _handleHeaders(e,t){const r=t.items;if(!this.checkpoints)return;if(!this.syncing)return;if(!e.loader)return;if(0===r.length)return;if(r.length>2e3)return void e.increaseBan(100);o(this.headerChain.size>0);let i=!1,s=null;for(const t of r){const r=this.headerChain.tail,n=t.hash(),o=r.height+1;if(!t.verify())return this.logger.warning("Peer sent an invalid header (%s).",e.hostname()),e.increaseBan(100),void e.destroy();if(!t.prevBlock.equals(r.hash))return this.logger.warning("Peer sent a bad header chain (%s).",e.hostname()),void e.destroy();if((s=new U(n,o)).height===this.headerTip.height){if(!s.hash.equals(this.headerTip.hash))return this.logger.warning("Peer sent an invalid checkpoint (%s).",e.hostname()),void e.destroy();i=!0}this.headerNext||(this.headerNext=s),this.headerChain.push(s)}if(this.logger.debug("Received %d headers from peer (%s).",r.length,e.hostname()),e.blockTime=Date.now(),i)return this.headerChain.shift(),void this.resolveHeaders(e);e.sendGetHeaders([s.hash],this.headerTip.hash)}async handleSendHeaders(e,t){}async handleBlock(e,t){const r=v.flags.DEFAULT_FLAGS;this.options.spv?this.logger.warning("Peer sent unsolicited block (%s).",e.hostname()):await this.addBlock(e,t.block,r)}async addBlock(e,t,r){const i=t.hash(),s=await this.locker.lock(i);try{return await this._addBlock(e,t,r)}finally{s()}}async _addBlock(e,t,r){if(!this.syncing)return;const i=t.hash();if(!this.resolveBlock(e,i))return this.logger.warning("Received unrequested block: %h (%s).",t.hash(),e.hostname()),void e.destroy();let s;e.blockTime=Date.now();try{s=await this.chain.add(t,r,e.id)}catch(t){if("VerifyError"===t.type)return e.reject("block",t),void this.logger.warning(t);throw t}if(!s){if(this.checkpoints)return void this.logger.warning("Peer sent orphan block with getheaders (%s).",e.hostname());const r=t.getCoinbaseHeight();return-1!==r&&(e.bestHash=i,e.bestHeight=r,this.resolveHeight(i,r)),this.logger.debug("Peer sent an orphan block. Resolving."),void await this.resolveOrphan(e,i)}this.chain.synced&&(e.bestHash=s.hash,e.bestHeight=s.height,this.resolveHeight(s.hash,s.height)),this.logStatus(t),await this.resolveChain(e,i)}async resolveChain(e,t){if(!this.checkpoints)return;if(!e.loader)return;if(e.destroyed)throw new Error("Peer was destroyed (header chain resolution).");const r=this.headerChain.head;return o(r),t.equals(r.hash)?r.height<this.network.lastCheckpoint?r.height===this.headerTip.height?(this.logger.info("Received checkpoint %h (%d).",r.hash,r.height),this.headerTip=this.getNextTip(r.height),void e.sendGetHeaders([t],this.headerTip.hash)):(this.headerChain.shift(),void this.resolveHeaders(e)):(this.logger.info("Switching to getblocks (%s).",e.hostname()),void await this.switchSync(e,t)):(this.logger.warning("Header hash mismatch %h != %h (%s).",t,r.hash,e.hostname()),void e.destroy())}async switchSync(e,t){o(this.checkpoints),this.checkpoints=!1,this.headerTip=null,this.headerChain.reset(),this.headerNext=null,await this.getBlocks(e,t)}handleBadOrphan(e,t,r){const i=this.peers.find(r);i?(this.logger.debug("Punishing peer for sending a bad orphan (%s).",i.hostname()),i.reject(e,t)):this.logger.warning("Could not find offending peer for orphan: %h (%d).",t.hash,r)}logStatus(e){this.chain.height%20==0&&this.logger.debug("Status: time=%s height=%d progress=%s orphans=%d active=%d target=%s peers=%d",w.date(e.time),this.chain.height,(100*this.chain.getProgress()).toFixed(2)+"%",this.chain.orphanMap.size,this.blockMap.size,e.bits,this.peers.size()),this.chain.height%2e3==0&&this.logger.info("Received 2000 more blocks (height=%d, hash=%h).",this.chain.height,e.hash())}async handleTX(e,t){const r=t.tx.hash(),i=await this.locker.lock(r);try{return await this._handleTX(e,t)}finally{i()}}async _handleTX(e,t){const r=t.tx,i=r.hash(),s=v.flags.VERIFY_NONE,n=e.merkleBlock;if(n&&(o(e.merkleMatches>0),o(e.merkleMap),n.hasTX(i)))return e.merkleMap.has(i)?(this.logger.warning("Peer sent duplicate merkle tx: %h (%s).",r.hash(),e.hostname()),void e.increaseBan(100)):(e.merkleMap.add(i),n.txs.push(r),void(0==--e.merkleMatches&&(e.merkleBlock=null,e.merkleTime=-1,e.merkleMatches=0,e.merkleMap=null,await this._addBlock(e,n,s))));if(!this.resolveTX(e,i))return this.logger.warning("Peer sent unrequested tx: %h (%s).",r.hash(),e.hostname()),void e.destroy();if(!this.mempool)return void this.emit("tx",r);let a;try{a=await this.mempool.addTX(r,e.id)}catch(t){if("VerifyError"===t.type)return e.reject("tx",t),void this.logger.info(t);throw t}a&&a.length>0&&(this.logger.debug("Requesting %d missing transactions (%s).",a.length,e.hostname()),this.ensureTX(e,a))}async handleReject(e,t){if(this.logger.warning("Received reject (%s): msg=%s code=%s reason=%s hash=%h.",e.hostname(),t.message,t.getCode(),t.reason,t.hash),!t.hash)return;const r=this.invMap.get(t.hash);r&&r.handleReject(e)}async handleMempool(e,t){if(!this.mempool)return;if(!this.chain.synced)return;if(this.options.selfish)return;if(!this.options.bip37)return this.logger.debug("Peer requested mempool without bip37 enabled (%s).",e.hostname()),void e.destroy();const r=[];for(const e of this.mempool.map.keys())r.push(new O(M.TX,e));this.logger.debug("Sending mempool snapshot (%s).",e.hostname()),e.queueInv(r)}async handleFilterLoad(e,t){}async handleFilterAdd(e,t){}async handleFilterClear(e,t){}async handleMerkleBlock(e,t){const r=t.block.hash(),i=await this.locker.lock(r);try{return await this._handleMerkleBlock(e,t)}finally{i()}}async _handleMerkleBlock(e,t){if(!this.syncing)return;if(!this.options.spv)return this.logger.warning("Peer sent unsolicited merkleblock (%s).",e.hostname()),void e.increaseBan(100);const r=t.block,i=r.hash();if(!e.blockMap.has(i))return this.logger.warning("Peer sent an unrequested merkleblock (%s).",e.hostname()),void e.destroy();if(e.merkleBlock)return this.logger.warning("Peer sent a merkleblock prematurely (%s).",e.hostname()),void e.increaseBan(100);if(!r.verify())return this.logger.warning("Peer sent an invalid merkleblock (%s).",e.hostname()),void e.increaseBan(100);const s=r.getTree();if(0!==s.matches.length)e.merkleBlock=r,e.merkleTime=Date.now(),e.merkleMatches=s.matches.length,e.merkleMap=new _;else{const t=v.flags.VERIFY_NONE;await this._addBlock(e,r,t)}}async handleFeeFilter(e,t){}async handleSendCmpct(e,t){}async handleCmpctBlock(e,t){const r=t.block,i=r.hash(),s=e.compactWitness;if(!this.syncing)return;if(!this.options.compact)return this.logger.info("Peer sent unsolicited cmpctblock (%s).",e.hostname()),void this.destroy();if(!e.hasCompactSupport()||!e.hasCompact())return this.logger.info("Peer sent unsolicited cmpctblock (%s).",e.hostname()),void this.destroy();if(e.compactBlocks.has(i))return void this.logger.debug("Peer sent us a duplicate compact block (%s).",e.hostname());if(this.compactBlocks.has(i))return void this.logger.debug("Already waiting for compact block %h (%s).",i,e.hostname());if(!e.blockMap.has(i)){if(1!==this.options.blockMode)return this.logger.warning("Peer sent us an unrequested compact block (%s).",e.hostname()),void e.destroy();e.blockMap.set(i,Date.now()),o(!this.blockMap.has(i)),this.blockMap.add(i)}if(!this.mempool)return void this.logger.warning("Requesting compact blocks without a mempool!");if(!r.verify())return this.logger.debug("Peer sent an invalid compact block (%s).",e.hostname()),void e.increaseBan(100);let n;try{n=r.init()}catch(t){return this.logger.debug("Peer sent an invalid compact block (%s).",e.hostname()),void e.increaseBan(100)}if(!n)return this.logger.warning("Siphash collision for %h. Requesting full block (%s).",r.hash(),e.hostname()),e.getFullBlock(i),void e.increaseBan(10);if(r.fillMempool(s,this.mempool)){this.logger.debug("Received full compact block %h (%s).",r.hash(),e.hostname());const t=v.flags.VERIFY_BODY;await this.addBlock(e,r.toBlock(),t)}else{if(e.compactBlocks.size>=15)return this.logger.warning("Compact block DoS attempt (%s).",e.hostname()),void e.destroy();r.now=Date.now(),o(!e.compactBlocks.has(i)),e.compactBlocks.set(i,r),this.compactBlocks.add(i),this.logger.debug("Received non-full compact block %h tx=%d/%d (%s).",r.hash(),r.count,r.totalTX,e.hostname()),e.send(new x.GetBlockTxnPacket(r.toRequest()))}}async handleGetBlockTxn(e,t){const r=t.request;if(this.chain.options.spv)return;if(this.chain.options.prune)return;if(this.options.selfish)return;const i=new O(M.BLOCK,r.hash),s=await this.getItem(e,i);if(!s)return this.logger.debug("Peer sent getblocktxn for non-existent block (%s).",e.hostname()),void e.increaseBan(100);if(await this.chain.getHeight(r.hash)<this.chain.tip.height-15)return void this.logger.debug("Peer sent a getblocktxn for a block > 15 deep (%s)",e.hostname());this.logger.debug("Sending blocktxn for %h to peer (%s).",s.hash(),e.hostname());const n=S.TXResponse.fromBlock(s,r);e.send(new x.BlockTxnPacket(n,e.compactWitness))}async handleBlockTxn(e,t){const r=t.response,i=e.compactBlocks.get(r.hash),s=v.flags.VERIFY_BODY;if(i){if(e.compactBlocks.delete(r.hash),o(this.compactBlocks.has(r.hash)),this.compactBlocks.delete(r.hash),!i.fillMissing(r))return this.logger.warning("Peer sent non-full blocktxn for %h. Requesting full block (%s).",i.hash(),e.hostname()),e.getFullBlock(r.hash),void e.increaseBan(10);this.logger.debug("Filled compact block %h (%s).",i.hash(),e.hostname()),await this.addBlock(e,i.toBlock(),s)}else this.logger.debug("Peer sent unsolicited blocktxn (%s).",e.hostname())}async handleUnknown(e,t){this.logger.warning("Unknown packet: %s (%s).",t.cmd,e.hostname())}addInbound(e){if(!this.opened)return void e.destroy();const t=this.createInbound(e);this.logger.info("Added inbound peer (%s).",t.hostname()),this.peers.add(t)}getHost(){for(const e of this.hosts.nodes)if(!this.peers.has(e.hostname))return e;const e=this.options.getRequiredServices(),t=this.network.now();for(let r=0;r<100;r++){const i=this.hosts.getHost();if(!i)break;const s=i.addr;if(!this.peers.has(s.hostname)&&(s.isValid()&&s.hasServices(e)&&(this.options.onion||!s.isOnion())&&!(r<30&&t-i.lastAttempt<600||r<50&&s.port!==this.network.port||r<95&&this.hosts.isBanned(s.host))))return i.addr}return null}addOutbound(){if(!this.opened)return;if(this.peers.outbound>=this.options.maxOutbound)return;if(!this.peers.load)return;const e=this.getHost();if(!e)return;const t=this.createOutbound(e);this.peers.add(t),this.emit("peer",t)}fillOutbound(){const e=this.options.maxOutbound-this.peers.outbound;if(this.peers.load||this.addLoader(),!(e<=0)){this.logger.debug("Refilling peers (%d/%d).",this.peers.outbound,this.options.maxOutbound);for(let t=0;t<e;t++)this.addOutbound()}}refill(){null==this.pendingRefill&&(this.pendingRefill=setTimeout(()=>{this.pendingRefill=null,this.fillOutbound()},3e3))}removePeer(e){this.peers.remove(e);for(const t of e.blockMap.keys())this.resolveBlock(e,t);for(const t of e.txMap.keys())this.resolveTX(e,t);for(const t of e.compactBlocks.keys())o(this.compactBlocks.has(t)),this.compactBlocks.delete(t);e.compactBlocks.clear()}ban(e){const t=this.peers.get(e.hostname);this.logger.debug("Banning peer (%s).",e.hostname),this.hosts.ban(e.host),this.hosts.remove(e.hostname),t&&t.destroy()}unban(e){this.hosts.unban(e.host)}setFilter(e){this.options.spv&&(this.spvFilter=e,this.queueFilterLoad())}watch(e,t){this.options.spv&&(this.spvFilter.add(e,t),this.queueFilterLoad())}unwatch(){this.options.spv&&(this.spvFilter.reset(),this.queueFilterLoad())}queueFilterLoad(){this.options.spv&&null==this.pendingFilter&&(this.pendingFilter=setTimeout(()=>{this.pendingFilter=null,this.sendFilterLoad()},100))}sendFilterLoad(){if(this.options.spv){o(this.spvFilter);for(let e=this.peers.head();e;e=e.next)e.sendFilterLoad(this.spvFilter)}}watchAddress(e){"string"==typeof e&&(e=E.fromString(e,this.network));const t=E.getHash(e);this.watch(t)}watchOutpoint(e){this.watch(e.toRaw())}async resolveOrphan(e,t){const r=await this.chain.getLocator(),i=this.chain.getOrphanRoot(t);o(i),e.sendGetBlocks(r,i)}async getHeaders(e,t,r){const i=await this.chain.getLocator(t);e.sendGetHeaders(i,r)}async getBlocks(e,t,r){const i=await this.chain.getLocator(t);e.sendGetBlocks(i,r)}getBlock(e,t){if(!this.opened)return;if(!e.handshake)throw new Error("Peer handshake not complete (getdata).");if(e.destroyed)throw new Error("Peer is destroyed (getdata).");let r=Date.now();const i=[];for(const s of t)this.blockMap.has(s)||(this.blockMap.add(s),e.blockMap.set(s,r),this.chain.synced&&(r+=100),i.push(s));if(0!==i.length){if(e.blockMap.size>=y.MAX_BLOCK_REQUEST)return this.logger.warning("Peer advertised too many blocks (%s).",e.hostname()),void e.destroy();this.logger.debug("Requesting %d/%d blocks from peer with getdata (%s).",i.length,this.blockMap.size,e.hostname()),e.getBlock(i)}}getTX(e,t){if(!this.opened)return;if(!e.handshake)throw new Error("Peer handshake not complete (getdata).");if(e.destroyed)throw new Error("Peer is destroyed (getdata).");let r=Date.now();const i=[];for(const s of t)this.txMap.has(s)||(this.txMap.add(s),e.txMap.set(s,r),r+=50,i.push(s));if(0!==i.length){if(e.txMap.size>=y.MAX_TX_REQUEST)return this.logger.warning("Peer advertised too many txs (%s).",e.hostname()),void e.destroy();this.logger.debug("Requesting %d/%d txs from peer with getdata (%s).",i.length,this.txMap.size,e.hostname()),e.getTX(i)}}async hasBlock(e){return!!this.locker.has(e)||!!await this.chain.has(e)}hasTX(e){if(this.locker.has(e))return!0;if(this.mempool){if(this.mempool.has(e))return!0;if(this.mempool.hasReject(e))return this.logger.spam("Saw known reject of %h.",e),!0}else if(!this.txFilter.added(e))return!0;return!1}ensureTX(e,t){const r=[];for(const e of t)this.hasTX(e)||r.push(e);this.getTX(e,r)}resolveTX(e,t){return!!e.txMap.has(t)&&(e.txMap.delete(t),o(this.txMap.has(t)),this.txMap.delete(t),!0)}resolveBlock(e,t){return!!e.blockMap.has(t)&&(e.blockMap.delete(t),o(this.blockMap.has(t)),this.blockMap.delete(t),!0)}resolveItem(e,t){return t.isBlock()?this.resolveBlock(e,t.hash):!!t.isTX()&&this.resolveTX(e,t.hash)}broadcast(e){const t=e.hash();let r=this.invMap.get(t);return r?(r.refresh(),r.announce()):((r=new j(this,e)).start(),r.announce()),new Promise((e,t)=>{r.addJob(e,t)})}announceBlock(e){for(let t=this.peers.head();t;t=t.next)t.announceBlock(e)}announceTX(e){for(let t=this.peers.head();t;t=t.next)t.announceTX(e)}getServiceNames(){const e=[];for(const[t,r]of Object.entries(R))this.options.hasServices(r)&&e.push(t);return e}}T.DISCOVERY_INTERVAL=12e4;class C{constructor(e){this.network=I.primary,this.logger=null,this.chain=null,this.mempool=null,this.nonces=new D,this.prefix=null,this.checkpoints=!0,this.spv=!1,this.bip37=!1,this.listen=!1,this.compact=!0,this.noRelay=!1,this.host="0.0.0.0",this.port=this.network.port,this.publicHost="0.0.0.0",this.publicPort=this.network.port,this.maxOutbound=8,this.maxInbound=8,this.createSocket=this._createSocket.bind(this),this.createServer=f.createServer,this.resolve=this._resolve.bind(this),this.proxy=null,this.onion=!1,this.upnp=!1,this.selfish=!1,this.version=y.PROTOCOL_VERSION,this.agent=y.USER_AGENT,this.banScore=y.BAN_SCORE,this.banTime=y.BAN_TIME,this.feeRate=-1,this.seeds=this.network.seeds,this.nodes=[],this.invTimeout=6e4,this.blockMode=0,this.services=y.LOCAL_SERVICES,this.requiredServices=y.REQUIRED_SERVICES,this.memory=!0,this.discover=!0,this.fromOptions(e)}fromOptions(e){if(o(e,"Pool requires options."),o(e.chain&&"object"==typeof e.chain,"Pool options require a blockchain."),this.chain=e.chain,this.network=e.chain.network,this.logger=e.chain.logger,this.port=this.network.port,this.seeds=this.network.seeds,this.port=this.network.port,this.publicPort=this.network.port,null!=e.logger&&(o("object"==typeof e.logger),this.logger=e.logger),null!=e.mempool&&(o("object"==typeof e.mempool),this.mempool=e.mempool),null!=e.prefix&&(o("string"==typeof e.prefix),this.prefix=e.prefix),null!=e.checkpoints?(o("boolean"==typeof e.checkpoints),o(e.checkpoints===this.chain.options.checkpoints),this.checkpoints=e.checkpoints):this.checkpoints=this.chain.options.checkpoints,null!=e.spv?(o("boolean"==typeof e.spv),o(e.spv===this.chain.options.spv),this.spv=e.spv):this.spv=this.chain.options.spv,null!=e.bip37&&(o("boolean"==typeof e.bip37),this.bip37=e.bip37),null!=e.listen&&(o("boolean"==typeof e.listen),this.listen=e.listen),null!=e.compact&&(o("boolean"==typeof e.compact),this.compact=e.compact),null!=e.noRelay&&(o("boolean"==typeof e.noRelay),this.noRelay=e.noRelay),null!=e.host){o("string"==typeof e.host);const t=c.toBuffer(e.host);this.host=c.toString(t),c.isRoutable(t)&&(this.publicHost=this.host)}return null!=e.port&&(o((65535&e.port)===e.port),this.port=e.port,this.publicPort=e.port),null!=e.publicHost&&(o("string"==typeof e.publicHost),this.publicHost=c.normalize(e.publicHost)),null!=e.publicPort&&(o((65535&e.publicPort)===e.publicPort),this.publicPort=e.publicPort),null!=e.maxOutbound&&(o("number"==typeof e.maxOutbound),o(e.maxOutbound>0),this.maxOutbound=e.maxOutbound),null!=e.maxInbound&&(o("number"==typeof e.maxInbound),this.maxInbound=e.maxInbound),e.createSocket&&(o("function"==typeof e.createSocket),this.createSocket=e.createSocket),e.createServer&&(o("function"==typeof e.createServer),this.createServer=e.createServer),e.resolve&&(o("function"==typeof e.resolve),this.resolve=e.resolve),e.proxy&&(o("string"==typeof e.proxy),this.proxy=e.proxy),null!=e.onion&&(o("boolean"==typeof e.onion),this.onion=e.onion),null!=e.upnp&&(o("boolean"==typeof e.upnp),this.upnp=e.upnp),e.selfish&&(o("boolean"==typeof e.selfish),this.selfish=e.selfish),e.version&&(o("number"==typeof e.version),this.version=e.version),e.agent&&(o("string"==typeof e.agent),o(e.agent.length<=255),this.agent=e.agent),null!=e.banScore&&(o("number"==typeof this.options.banScore),this.banScore=this.options.banScore),null!=e.banTime&&(o("number"==typeof this.options.banTime),this.banTime=this.options.banTime),null!=e.feeRate&&(o("number"==typeof this.options.feeRate),this.feeRate=this.options.feeRate),e.seeds&&(o(Array.isArray(e.seeds)),this.seeds=e.seeds),e.nodes&&(o(Array.isArray(e.nodes)),this.nodes=e.nodes),null!=e.only&&(o(Array.isArray(e.only)),e.only.length>0&&(this.nodes=e.only,this.maxOutbound=e.only.length,this.discover=!1)),null!=e.discover&&(o("boolean"==typeof e.discover),this.discover=e.discover),null!=e.invTimeout&&(o("number"==typeof e.invTimeout),this.invTimeout=e.invTimeout),null!=e.blockMode&&(o("number"==typeof e.blockMode),this.blockMode=e.blockMode),null!=e.memory&&(o("boolean"==typeof e.memory),this.memory=e.memory),this.spv&&(this.requiredServices|=y.services.BLOOM,this.services&=~y.services.NETWORK,this.noRelay=!0,this.checkpoints=!0,this.compact=!1,this.bip37=!1,this.listen=!1),this.selfish&&(this.services&=~y.services.NETWORK,this.bip37=!1),this.bip37&&(this.services|=y.services.BLOOM),this.proxy&&(this.listen=!1),null!=e.services&&(o(e.services>>>0===e.services),this.services=e.services),null!=e.requiredServices&&(o(e.requiredServices>>>0===e.requiredServices),this.requiredServices=e.requiredServices),this}static fromOptions(e){return(new C).fromOptions(e)}getHeight(){return this.chain.height}isFull(){return this.chain.synced}getRequiredServices(){let e=this.requiredServices;return this.hasWitness()&&(e|=y.services.WITNESS),e}hasServices(e){return(this.services&e)===e}hasWitness(){return this.chain.state.hasWitness()}createNonce(e){return this.nonces.alloc(e)}hasNonce(e){return this.nonces.has(e)}getRate(e){if(!this.mempool)return-1;const t=this.mempool.getEntry(e);return t?t.getRate():-1}_createSocket(e,t){return this.proxy?d.connect(this.proxy,e,t):f.createSocket(e,t)}_resolve(e){return this.onion?d.resolve(this.proxy,e):u.lookup(e)}}class q{constructor(){this.map=new Map,this.ids=new Map,this.list=new p,this.load=null,this.inbound=0,this.outbound=0}head(){return this.list.head}tail(){return this.list.tail}size(){return this.list.size}add(e){o(this.list.push(e)),o(!this.map.has(e.hostname())),this.map.set(e.hostname(),e),o(!this.ids.has(e.id)),this.ids.set(e.id,e),e.outbound?this.outbound+=1:this.inbound+=1}remove(e){o(this.list.remove(e)),o(this.ids.has(e.id)),this.ids.delete(e.id),o(this.map.has(e.hostname())),this.map.delete(e.hostname()),e===this.load&&(o(e.loader),e.loader=!1,this.load=null),e.outbound?this.outbound-=1:this.inbound-=1}get(e){return this.map.get(e)}has(e){return this.map.has(e)}find(e){return this.ids.get(e)}destroy(){let e;for(let t=this.list.head;t;t=e)e=t.next,t.destroy()}}class j extends a{constructor(e,t){super(),o(!t.mutable,"Cannot broadcast mutable item.");const r=t.toInv();this.pool=e,this.hash=r.hash,this.type=r.type,this.msg=t,this.jobs=[]}addJob(e,t){this.jobs.push({resolve:e,reject:t})}start(){return o(!this.timeout,"Already started."),o(!this.pool.invMap.has(this.hash),"Already started."),this.pool.invMap.set(this.hash,this),this.refresh(),this}refresh(){null!=this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.timeout=setTimeout(()=>{this.emit("timeout"),this.reject(new Error("Timed out."))},this.pool.options.invTimeout)}announce(){switch(this.type){case M.TX:this.pool.announceTX(this.msg);break;case M.BLOCK:this.pool.announceBlock(this.msg);break;default:o(!1,"Bad type.")}}cleanup(){o(null!=this.timeout,"Already finished."),o(this.pool.invMap.has(this.hash),"Already finished."),clearTimeout(this.timeout),this.timeout=null,this.pool.invMap.delete(this.hash)}reject(e){this.cleanup();for(const t of this.jobs)t.reject(e);this.jobs.length=0}resolve(){this.cleanup();for(const e of this.jobs)e.resolve(!1);this.jobs.length=0}handleAck(e){setTimeout(()=>{this.emit("ack",e);for(const e of this.jobs)e.resolve(!0);this.jobs.length=0},1e3)}handleReject(e){this.emit("reject",e);for(const e of this.jobs)e.resolve(!1);this.jobs.length=0}[N](){return`<BroadcastItem: type=${this.type===M.TX?"tx":"block"} hash=${w.revHex(this.hash)}>`}}class D{constructor(){this.map=new m,this.hosts=new Map}alloc(e){for(;;){const t=y.nonce();if(!this.map.has(t))return this.map.set(t,e),o(!this.hosts.has(e)),this.hosts.set(e,t),t}}has(e){return this.map.has(e)}remove(e){const t=this.hosts.get(e);return!!t&&(this.hosts.delete(e),o(this.map.has(t)),this.map.delete(t),!0)}}class U{constructor(e,t){this.hash=e,this.height=t,this.prev=null,this.next=null}}r.exports=T}],["bupnp","/lib/bupnp.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(308,r)}],["bupnp","/lib/upnp-browser.js",function(e,t,r,i,s,n){"use strict";class o{constructor(e,t,r){throw new Error("UPNP not supported.")}static async discover(e,t,r,i){throw new Error("UPNP not supported.")}}o.unsupported=!0,r.exports=o}],["bsocks","/lib/bsocks.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(310,r)}],["bsocks","/lib/socks-browser.js",function(e,t,r,i,s,n){"use strict";e.unsupported=!0,e.connect=function(e,t,r){throw new Error("SOCKS unsupported.")},e.resolve=async function(e,t){throw new Error("SOCKS unsupported.")}}],["bcoin","/lib/node/index.js",function(e,t,r,i,s,n){"use strict";e.FullNode=__browser_require__(312,r),e.HTTP=__browser_require__(325,r),e.Node=__browser_require__(313,r),e.RPC=__browser_require__(336,r),e.SPVNode=__browser_require__(346,r)}],["bcoin","/lib/node/fullnode.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(194,r),h=__browser_require__(260,r),c=__browser_require__(263,r),u=__browser_require__(306,r),f=__browser_require__(276,r),l=__browser_require__(313,r),d=__browser_require__(325,r),p=__browser_require__(336,r),b=__browser_require__(337,r),g=__browser_require__(256,r),m=__browser_require__(258,r),_=__browser_require__(344,r);r.exports=class extends l{constructor(e){super("bcoin","bcoin.conf","debug.log",e),this.opened=!1,this.spv=!1,this.blocks=b.create({network:this.network,logger:this.logger,prefix:this.config.prefix,cacheSize:this.config.mb("block-cache-size"),memory:this.memory}),this.chain=new a({network:this.network,logger:this.logger,blocks:this.blocks,workers:this.workers,memory:this.config.bool("memory"),prefix:this.config.prefix,maxFiles:this.config.uint("max-files"),cacheSize:this.config.mb("cache-size"),forceFlags:this.config.bool("force-flags"),bip91:this.config.bool("bip91"),bip148:this.config.bool("bip148"),prune:this.config.bool("prune"),checkpoints:this.config.bool("checkpoints"),entryCache:this.config.uint("entry-cache"),indexTX:this.config.bool("index-tx"),indexAddress:this.config.bool("index-address")}),this.fees=new h(this.logger),this.fees.init(),this.mempool=new c({network:this.network,logger:this.logger,workers:this.workers,chain:this.chain,fees:this.fees,memory:this.memory,prefix:this.config.prefix,persistent:this.config.bool("persistent-mempool"),maxSize:this.config.mb("mempool-size"),limitFree:this.config.bool("limit-free"),limitFreeRelay:this.config.uint("limit-free-relay"),requireStandard:this.config.bool("require-standard"),rejectAbsurdFees:this.config.bool("reject-absurd-fees"),replaceByFee:this.config.bool("replace-by-fee"),indexAddress:this.config.bool("index-address")}),this.pool=new u({network:this.network,logger:this.logger,chain:this.chain,mempool:this.mempool,prefix:this.config.prefix,selfish:this.config.bool("selfish"),compact:this.config.bool("compact"),bip37:this.config.bool("bip37"),maxOutbound:this.config.uint("max-outbound"),maxInbound:this.config.uint("max-inbound"),createSocket:this.config.func("create-socket"),proxy:this.config.str("proxy"),onion:this.config.bool("onion"),upnp:this.config.bool("upnp"),seeds:this.config.array("seeds"),nodes:this.config.array("nodes"),only:this.config.array("only"),publicHost:this.config.str("public-host"),publicPort:this.config.uint("public-port"),host:this.config.str("host"),port:this.config.uint("port"),listen:this.config.bool("listen"),memory:this.memory}),this.miner=new f({network:this.network,logger:this.logger,workers:this.workers,chain:this.chain,mempool:this.mempool,address:this.config.array("coinbase-address"),coinbaseFlags:this.config.str("coinbase-flags"),preverify:this.config.bool("preverify"),maxWeight:this.config.uint("max-weight"),reservedWeight:this.config.uint("reserved-weight"),reservedSigops:this.config.uint("reserved-sigops")}),this.rpc=new p(this),this.http=new d({network:this.network,logger:this.logger,node:this,prefix:this.config.prefix,ssl:this.config.bool("ssl"),keyFile:this.config.path("ssl-key"),certFile:this.config.path("ssl-cert"),host:this.config.str("http-host"),port:this.config.uint("http-port"),apiKey:this.config.str("api-key"),noAuth:this.config.bool("no-auth"),cors:this.config.bool("cors"),maxTxs:this.config.uint("max-txs")}),this.config.bool("index-tx")&&(this.txindex=new g({network:this.network,logger:this.logger,blocks:this.blocks,chain:this.chain,prune:this.config.bool("prune"),memory:this.memory,prefix:this.config.str("index-prefix",this.config.prefix)})),this.config.bool("index-address")&&(this.addrindex=new m({network:this.network,logger:this.logger,blocks:this.blocks,chain:this.chain,prune:this.config.bool("prune"),memory:this.memory,prefix:this.config.str("index-prefix",this.config.prefix),maxTxs:this.config.uint("max-txs")})),this.config.bool("index-filter")&&(this.filterindex=new _({network:this.network,logger:this.logger,blocks:this.blocks,chain:this.chain,memory:this.config.bool("memory"),prefix:this.config.str("index-prefix",this.config.prefix)})),this.init()}init(){this.chain.on("error",e=>this.error(e)),this.mempool.on("error",e=>this.error(e)),this.pool.on("error",e=>this.error(e)),this.miner.on("error",e=>this.error(e)),this.txindex&&this.txindex.on("error",e=>this.error(e)),this.addrindex&&this.addrindex.on("error",e=>this.error(e)),this.filterindex&&this.filterindex.on("error",e=>this.error(e)),this.http&&this.http.on("error",e=>this.error(e)),this.mempool.on("tx",e=>{this.miner.cpu.notifyEntry(),this.emit("tx",e)}),this.chain.on("connect",async(e,t)=>{try{await this.mempool._addBlock(e,t.txs)}catch(e){this.error(e)}this.emit("block",t),this.emit("connect",e,t)}),this.chain.on("disconnect",async(e,t)=>{try{await this.mempool._removeBlock(e,t.txs)}catch(e){this.error(e)}this.emit("disconnect",e,t)}),this.chain.on("reorganize",async(e,t)=>{try{await this.mempool._handleReorg()}catch(e){this.error(e)}this.emit("reorganize",e,t)}),this.chain.on("reset",async e=>{try{await this.mempool._reset()}catch(e){this.error(e)}this.emit("reset",e)}),this.loadPlugins()}async open(){o(!this.opened,"FullNode is already open."),this.opened=!0,await this.handlePreopen(),await this.blocks.open(),await this.chain.open(),await this.mempool.open(),await this.miner.open(),await this.pool.open(),this.txindex&&await this.txindex.open(),this.addrindex&&await this.addrindex.open(),this.filterindex&&await this.filterindex.open(),await this.openPlugins(),await this.http.open(),await this.handleOpen(),this.logger.info("Node is loaded.")}async close(){o(this.opened,"FullNode is not open."),this.opened=!1,await this.handlePreclose(),await this.http.close(),this.txindex&&await this.txindex.close(),this.addrindex&&await this.addrindex.close(),this.filterindex&&await this.filterindex.close(),await this.closePlugins(),await this.pool.close(),await this.miner.close(),await this.mempool.close(),await this.chain.close(),await this.blocks.close(),await this.handleClose()}scan(e,t,r){return this.chain.scan(e,t,r)}async broadcast(e){try{await this.pool.broadcast(e)}catch(e){this.emit("error",e)}}async sendTX(e){let t;try{t=await this.mempool.addTX(e)}catch(t){if("VerifyError"===t.type&&0===t.score)return this.error(t),this.logger.warning("Verification failed for tx: %h.",e.hash()),this.logger.warning("Attempting to broadcast anyway..."),void this.broadcast(e);throw t}if(t)return this.logger.warning("TX was orphaned in mempool: %h.",e.hash()),this.logger.warning("Attempting to broadcast anyway..."),void this.broadcast(e);this.pool.options.selfish&&this.broadcast(e)}async relay(e){try{await this.sendTX(e)}catch(e){this.error(e)}}connect(){return this.pool.connect()}disconnect(){return this.pool.disconnect()}startSync(){return this.txindex&&this.txindex.sync(),this.addrindex&&this.addrindex.sync(),this.filterindex&&this.filterindex.sync(),this.pool.startSync()}stopSync(){return this.pool.stopSync()}getBlock(e){return this.chain.getBlock(e)}async getCoin(e,t){const r=this.mempool.getCoin(e,t);return r||(this.mempool.isSpent(e,t)?null:this.chain.getCoin(e,t))}async getMetaByAddress(e,t={}){if(!this.txindex||!this.addrindex)return[];const{reverse:r,after:i}=t;let{limit:s}=t,n=[];const a=async()=>{const t=await this.addrindex.getHashesByAddress(e,{limit:s,reverse:r,after:i});for(const e of t){const t=await this.txindex.getMeta(e);o(t),n.push(t)}},h=()=>{const t=this.mempool.getMetaByAddress(e,{limit:s,reverse:r,after:i});n=n.concat(t)};return r?h():await a(),n.length>0&&(s-=n.length),s<=0?n:(r?await a():h(),n)}async getMeta(e){const t=this.mempool.getMeta(e);return t||(this.txindex?this.txindex.getMeta(e):null)}async getMetaView(e){return-1===e.height?this.mempool.getSpentView(e.tx):this.txindex?this.txindex.getSpentView(e.tx):null}async getTXByAddress(e,t={}){const r=await this.getMetaByAddress(e,t),i=[];for(const e of r)i.push(e.tx);return i}async getTX(e){const t=await this.getMeta(e);return t?t.tx:null}async hasTX(e){return!!this.mempool.hasEntry(e)||!!this.txindex&&this.txindex.hasTX(e)}async getBlockFilter(e){return this.filterindex?("number"==typeof e&&(e=await this.chain.getHash(e)),e?this.filterindex.getFilter(e):null):null}}}],["bcoin","/lib/node/node.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(19,r),h=__browser_require__(252,r),c=__browser_require__(198,r),u=__browser_require__(314,r),f=__browser_require__(14,r),l=__browser_require__(317,r);r.exports=class extends a{constructor(e,t,r,i){super(),this.config=new u(e,{suffix:"network",fallback:"main",alias:{n:"network"}}),this.config.inject(i),this.config.load(i),(i.file||i.config)&&this.config.open(t),this.network=f.get(this.config.getSuffix()),this.memory=this.config.bool("memory",!0),this.startTime=-1,this.bound=[],this.plugins=Object.create(null),this.stack=[],this.logger=null,this.workers=null,this.spv=!1,this.blocks=null,this.chain=null,this.fees=null,this.mempool=null,this.pool=null,this.miner=null,this.http=null,this.txindex=null,this.addrindex=null,this.filterindex=null,this._init(r)}_init(e){const t=this.config;let r=new c;t.has("logger")&&(r=t.obj("logger")),r.set({filename:!this.memory&&t.bool("log-file")?t.location(e):null,level:t.str("log-level"),console:t.bool("log-console"),shrink:t.bool("log-shrink")}),this.logger=r.context("node"),this.workers=new l({enabled:t.bool("workers"),size:t.uint("workers-size"),timeout:t.uint("workers-timeout"),file:t.str("worker-file")}),this.on("error",()=>{}),this.workers.on("spawn",e=>{this.logger.info("Spawning worker process: %d.",e.id)}),this.workers.on("exit",(e,t)=>{this.logger.warning("Worker %d exited: %s.",t.id,e)}),this.workers.on("log",(e,t)=>{this.logger.debug("Worker %d says:",t.id),this.logger.debug(e)}),this.workers.on("error",(e,t)=>{t?this.logger.error("Worker %d error: %s",t.id,e.message):this.emit("error",e)})}async ensure(){return h.unsupported?undefined:this.memory?undefined:(this.blocks&&await this.blocks.ensure(),h.mkdirp(this.config.prefix))}location(e){return this.config.location(e)}async handlePreopen(){await this.logger.open(),await this.workers.open(),this._bind(this.network.time,"offset",e=>{this.logger.info("Time offset: %d (%d minutes).",e,e/60|0)}),this._bind(this.network.time,"sample",(e,t)=>{this.logger.debug("Added time data: samples=%d, offset=%d (%d minutes).",t,e,e/60|0)}),this._bind(this.network.time,"mismatch",()=>{this.logger.warning("Adjusted time mismatch!"),this.logger.warning("Please make sure your system clock is correct!")})}async handleOpen(){this.startTime=Date.now(),this.workers.enabled||(this.logger.warning("Warning: worker pool is disabled."),this.logger.warning("Verification will be slow."))}async handlePreclose(){}async handleClose(){for(const[e,t,r]of this.bound)e.removeListener(t,r);this.bound.length=0,this.startTime=-1,this.logger.info("Node is closed."),await this.workers.close(),await this.logger.close()}_bind(e,t,r){this.bound.push([e,t,r]),e.on(t,r)}error(e){this.logger.error(e),this.emit("error",e)}uptime(){return-1===this.startTime?0:Math.floor((Date.now()-this.startTime)/1e3)}use(e){o(e,"Plugin must be an object."),o("function"==typeof e.init,"`init` must be a function."),o(!this.loaded,"Cannot add plugin after node is loaded.");const t=e.init(this);if(o(!t.open||"function"==typeof t.open,"`open` must be a function."),o(!t.close||"function"==typeof t.close,"`close` must be a function."),e.id){switch(o("string"==typeof e.id,"`id` must be a string."),e.id){case"chain":case"fees":case"mempool":case"miner":case"pool":case"rpc":case"http":o(!1,`${e.id} is already added.`)}o(!this.plugins[e.id],`${e.id} is already added.`),this.plugins[e.id]=t}return this.stack.push(t),"function"==typeof t.on&&t.on("error",e=>this.error(e)),t}has(e){return null!=this.plugins[e]}get(e){switch(o("string"==typeof e,"Plugin name must be a string."),e){case"chain":return o(this.chain,"chain is not loaded."),this.chain;case"fees":return o(this.fees,"fees is not loaded."),this.fees;case"mempool":return o(this.mempool,"mempool is not loaded."),this.mempool;case"miner":return o(this.miner,"miner is not loaded."),this.miner;case"pool":return o(this.pool,"pool is not loaded."),this.pool;case"rpc":return o(this.rpc,"rpc is not loaded."),this.rpc;case"http":return o(this.http,"http is not loaded."),this.http}return this.plugins[e]||null}require(e){const t=this.get(e);return o(t,`${e} is not loaded.`),t}loadPlugins(){const e=this.config.array("plugins",[]),t=this.config.func("loader");for(let r of e)"string"==typeof r&&(o(t,"Must pass a loader function."),r=t(r)),this.use(r)}async openPlugins(){for(const e of this.stack)e.open&&await e.open()}async closePlugins(){for(const e of this.stack)e.close&&await e.close()}}}],["bcfg","/lib/bcfg.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(315,r)}],["bcfg","/lib/config.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(195,r),h=__browser_require__(287,r),c=__browser_require__(316,r),u=h.homedir?h.homedir():"/";class f{constructor(e,t){o("string"==typeof e),o(e.length>0),this.module=e,this.prefix=a.join(u,`.${e}`),this.suffix=null,this.fallback=null,this.alias=Object.create(null),this.options=Object.create(null),this.data=Object.create(null),this.env=Object.create(null),this.args=Object.create(null),this.argv=[],this.pass=[],this.query=Object.create(null),this.hash=Object.create(null),t&&this.init(t)}init(e){if(o(e&&"object"==typeof e),null!=e.suffix&&(o("string"==typeof e.suffix),this.suffix=e.suffix),null!=e.fallback&&(o("string"==typeof e.fallback),this.fallback=e.fallback),e.alias){o("object"==typeof e.alias);for(const t of Object.keys(e.alias)){const r=e.alias[t];o("string"==typeof r),this.alias[t]=r}}}inject(e){for(const t of Object.keys(e)){const r=e[t];switch(t){case"hash":case"query":case"env":case"argv":case"config":continue}this.set(t,r)}}load(e){e.hash&&this.parseHash(e.hash),e.query&&this.parseQuery(e.query),e.env&&this.parseEnv(e.env),e.argv&&this.parseArg(e.argv),this.prefix=this.getPrefix()}open(e){if(c.unsupported)return;const t=this.getFile(e);let r;try{r=c.readFileSync(t,"utf8")}catch(e){if("ENOENT"===e.code)return;throw e}this.parseConfig(r),this.prefix=this.getPrefix()}filter(e){o("string"==typeof e);const t=new f(this.module);return t.prefix=this.prefix,t.suffix=this.suffix,t.fallback=this.fallback,t.argv=this.argv,t.pass=this.pass,_(e,this.env,t.env),_(e,this.args,t.args),_(e,this.query,t.query),_(e,this.hash,t.hash),t}set(e,t){o("string"==typeof e,"Key must be a string."),null!=t&&(e=(e=e.replace(/-/g,"")).toLowerCase(),this.options[e]=t)}has(e){return"number"==typeof e?(o(e>=0,"Index must be positive."),!(e>=this.argv.length)):(o("string"==typeof e,"Key must be a string."),e=(e=e.replace(/-/g,"")).toLowerCase(),null!=this.hash[e]||(null!=this.query[e]||(null!=this.args[e]||(null!=this.env[e]||(null!=this.data[e]||null!=this.options[e])))))}get(e,t){if(t===undefined&&(t=null),Array.isArray(e)){const r=e;for(const e of r){const t=this.get(e);if(null!==t)return t}return t}return"number"==typeof e?(o(e>=0,"Index must be positive."),e>=this.argv.length?t:null!=this.argv[e]?this.argv[e]:t):(o("string"==typeof e,"Key must be a string."),e=(e=e.replace(/-/g,"")).toLowerCase(),null!=this.hash[e]?this.hash[e]:null!=this.query[e]?this.query[e]:null!=this.args[e]?this.args[e]:null!=this.env[e]?this.env[e]:null!=this.data[e]?this.data[e]:null!=this.options[e]?this.options[e]:t)}typeOf(e){const t=this.get(e);return null===t?"null":typeof t}str(e,t){const r=this.get(e);if(t===undefined&&(t=null),null===r)return t;if("string"!=typeof r)throw new Error(`${l(e)} must be a string.`);return r}int(e,t){const r=this.get(e);if(t===undefined&&(t=null),null===r)return t;if("string"!=typeof r){if("number"!=typeof r)throw new Error(`${l(e)} must be an int.`);if(!Number.isSafeInteger(r))throw new Error(`${l(e)} must be an int.`);return r}if(!/^\-?\d+$/.test(r))throw new Error(`${l(e)} must be an int.`);const i=parseInt(r,10);if(!Number.isSafeInteger(i))throw new Error(`${l(e)} must be an int.`);return i}uint(e,t){const r=this.int(e);if(t===undefined&&(t=null),null===r)return t;if(r<0)throw new Error(`${l(e)} must be a uint.`);return r}float(e,t){const r=this.get(e);if(t===undefined&&(t=null),null===r)return t;if("string"!=typeof r){if("number"!=typeof r)throw new Error(`${l(e)} must be a float.`);if(!isFinite(r))throw new Error(`${l(e)} must be a float.`);return r}if(!/^\-?\d*(?:\.\d*)?$/.test(r))throw new Error(`${l(e)} must be a float.`);if(!/\d/.test(r))throw new Error(`${l(e)} must be a float.`);const i=parseFloat(r);if(!isFinite(i))throw new Error(`${l(e)} must be a float.`);return i}ufloat(e,t){const r=this.float(e);if(t===undefined&&(t=null),null===r)return t;if(r<0)throw new Error(`${l(e)} must be a positive float.`);return r}fixed(e,t,r){const i=this.float(e);if(r===undefined&&(r=null),null===i)return r;try{return function(e,t){o("number"==typeof e&&isFinite(e)),o(Number.isSafeInteger(t));let r=e.toFixed(t),i=1;r.length>0&&"-"===r[0]&&(r=r.substring(1),i=-1);let s=r,n="0";const a=r.indexOf(".");-1!==a&&(s=r.substring(0,a),n=r.substring(a+1));s=s.replace(/^0+/,""),n=n.replace(/0+$/,""),o(s.length<=16-t,"Fixed number string exceeds 2^53-1."),o(n.length<=t,"Too many decimal places in fixed number string."),0===s.length&&(s="0");for(;n.length<t;)n+="0";0===n.length&&(n="0");o(/^\d+$/.test(s)&&/^\d+$/.test(n),"Non-numeric characters in fixed number string."),s=parseInt(s,10),n=parseInt(n,10);const h=Math.pow(10,t),c=Number.MAX_SAFE_INTEGER%h,u=(Number.MAX_SAFE_INTEGER-c)/h;return o(s<u||s===u&&n<=c,"Fixed number string exceeds 2^53-1."),i*(s*h+n)}(i,t||0)}catch(t){throw new Error(`${l(e)} must be a fixed number.`)}}ufixed(e,t,r){const i=this.fixed(e,t);if(r===undefined&&(r=null),null===i)return r;if(i<0)throw new Error(`${l(e)} must be a positive fixed number.`);return i}bool(e,t){const r=this.get(e);if(t===undefined&&(t=null),null===r)return t;if("number"==typeof r){if(1===r)return!0;if(0===r)return!1}if("string"!=typeof r){if("boolean"!=typeof r)throw new Error(`${l(e)} must be a boolean.`);return r}if("true"===r||"1"===r)return!0;if("false"===r||"0"===r)return!1;throw new Error(`${l(e)} must be a boolean.`)}buf(e,t,r){const i=this.get(e);if(r||(r="hex"),t===undefined&&(t=null),null===i)return t;if("string"!=typeof i){if(null==i||!0!==i._isBuffer)throw new Error(`${l(e)} must be a buffer.`);return i}const s=Buffer.from(i,r);if(s.length!==Buffer.byteLength(i,r))throw new Error(`${l(e)} must be a ${r} string.`);return s}array(e,t){const r=this.get(e);if(t===undefined&&(t=null),null===r)return t;if("string"!=typeof r){if(!Array.isArray(r))throw new Error(`${l(e)} must be an array.`);return r}const i=r.trim().split(/\s*,\s*/),s=[];for(const e of i)0!==e.length&&s.push(e);return s}obj(e,t){const r=this.get(e);if(t===undefined&&(t=null),null===r)return t;if("object"!=typeof r||Array.isArray(r))throw new Error(`${l(e)} must be an object.`);return r}func(e,t){const r=this.get(e);if(t===undefined&&(t=null),null===r)return t;if("function"!=typeof r)throw new Error(`${l(e)} must be a function.`);return r}path(e,t){let r=this.str(e);if(t===undefined&&(t=null),null===r)return t;if(0===r.length)return t;switch(r[0]){case"~":r=a.join(u,r.substring(1));break;case"@":r=a.join(this.prefix,r.substring(1))}return a.normalize(r)}mb(e,t){const r=this.uint(e);return t===undefined&&(t=null),null===r?t:1024*r*1024}getSuffix(){if(!this.suffix)throw new Error("No suffix presented.");const e=this.str(this.suffix,this.fallback);return o(p(e),"Bad suffix."),e}getPrefix(){let e=this.str("prefix");if(e?"~"===e[0]&&(e=a.join(u,e.substring(1))):e=a.join(u,`.${this.module}`),this.suffix){const t=this.str(this.suffix);t&&(o(p(t),"Bad suffix."),this.fallback&&t!==this.fallback&&(e=a.join(e,t)))}return a.normalize(e)}getFile(e){const t=this.str("config");return t||a.join(this.prefix,e)}location(e){return a.join(this.prefix,e)}parseConfig(e){o("string"==typeof e,"Config must be text."),65279===e.charCodeAt(0)&&(e=e.substring(1)),e=(e=(e=e.replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/\\\n/g,"");let t=0;for(const r of e.split("\n")){const e=r.trim();if(t+=1,0===e.length)continue;if("#"===e[0])continue;const i=e.indexOf(":");if(-1===i)throw new Error(`Expected ':' on line ${t}: "${e}".`);let s=e.substring(0,i).trim();if(!g(s=s.replace(/\-/g,"")))throw new Error(`Invalid option on line ${t}: ${s}.`);const n=e.substring(i+1).trim();if(0===n.length)continue;const o=this.alias[s];o&&(s=o),this.data[s]=n}}parseArg(e){e&&"object"==typeof e||(e=process.argv),o(Array.isArray(e));let t=null,r=!1;for(let i=2;i<e.length;i++){const s=e[i];if(o("string"==typeof s),"--"===s){r=!0;continue}if(r){this.pass.push(s);continue}if(0===s.length){t=null;continue}if(0===s.indexOf("--")){const e=s.indexOf("=");let r=null,i=null,n=!1;if(-1!==e?(r=s.substring(2,e),i=s.substring(e+1),t=null,n=!1):(r=s.substring(2),i="true",t=null,n=!0),!g(r=r.replace(/\-/g,"")))throw new Error(`Invalid argument: --${r}.`);if(0===i.length)continue;if(r.length>1){const e=this.alias[r];e&&(r=e)}this.args[r]=i,n&&(t=r);continue}if("-"===s[0]){t=null;for(let e=1;e<s.length;e++){let r=s[e];if((r<"a"||r>"z")&&(r<"A"||r>"Z")&&(r<"0"||r>"9")&&"?"!==r)throw new Error(`Invalid argument: -${r}.`);const i=this.alias[r];i&&(r=i),this.args[r]="true",t=r}continue}const n=s;0!==n.length?t?(this.args[t]=n,t=null):this.argv.push(n):t=null}}parseEnv(e){let t=this.module;t=(t=t.toUpperCase()).replace(/-/g,"_"),t+="_",e&&"object"==typeof e||(e=process.env),o(e&&"object"==typeof e);for(let r of Object.keys(e)){const i=e[r];if(o("string"==typeof i),0===r.indexOf(t)&&m(r=(r=r.substring(t.length)).replace(/_/g,""))&&0!==i.length){if((r=r.toLowerCase()).length>1){const e=this.alias[r];e&&(r=e)}this.env[r]=i}}}parseQuery(e){if("string"!=typeof e){if(!global.location)return{};if("string"!=typeof(e=global.location.search))return{}}return this.parseForm(e,"?",this.query)}parseHash(e){if("string"!=typeof e){if(!global.location)return{};if("string"!=typeof(e=global.location.hash))return{}}return this.parseForm(e,"#",this.hash)}parseForm(e,t,r){if(o("string"==typeof e),0!==e.length){e[0]===t&&(e=e.substring(1));for(const t of e.split("&")){const e=t.indexOf("=");let i,s;if(-1!==e?(i=t.substring(0,e),s=t.substring(e+1)):(i=t,s="true"),!g(i=(i=d(i)).replace(/\-/g,"")))continue;if(0===(s=d(s)).length)continue;const n=this.alias[i];n&&(i=n),r[i]=s}}}}function l(e){return Array.isArray(e)&&(e=e[0]),"number"==typeof e?`Argument #${e}`:e}function d(e){try{e=(e=decodeURIComponent(e)).replace(/\+/g," ")}catch(e){}return e=e.replace(/\0/g,"")}function p(e){return/^[a-z0-9_\-]+$/i.test(e)}function b(e){return/^[a-zA-Z0-9]+$/.test(e)}function g(e){return!!b(e)&&!/[A-Z]/.test(e)}function m(e){return!!b(e)&&!/[a-z]/.test(e)}function _(e,t,r){for(const i of Object.keys(t))if(i.length>e.length&&0===i.indexOf(e)){r[i.substring(e.length)]=t[i]}}r.exports=f}],["bcfg","/lib/fs-browser.js",function(e,t,r,i,s,n){"use strict";e.unsupported=!0}],["bcoin","/lib/workers/workerpool.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(19,r),h=__browser_require__(287,r),c=__browser_require__(14,r),u=__browser_require__(318,r),f=__browser_require__(319,r),l=__browser_require__(323,r),d=__browser_require__(324,r),p=__browser_require__(322,r);class b extends a{constructor(e){super(),this.id=-1,this.framer=new d,this.parser=new l,this.pending=new Map,this.child=new u(e),this.init()}init(){this.child.on("data",e=>{this.parser.feed(e)}),this.child.on("exit",(e,t)=>{this.emit("exit",e,t)}),this.child.on("error",e=>{this.emit("error",e)}),this.parser.on("error",e=>{this.emit("error",e)}),this.parser.on("packet",e=>{this.emit("packet",e)}),this.listen()}listen(){this.on("exit",(e,t)=>{this.killJobs()}),this.on("error",e=>{this.killJobs()}),this.on("packet",e=>{try{this.handlePacket(e)}catch(e){this.emit("error",e)}}),this.sendEnv({BCOIN_WORKER_NETWORK:c.type,BCOIN_WORKER_ISTTY:process.stdout&&process.stdout.isTTY?"1":"0"})}handlePacket(e){switch(e.cmd){case p.types.EVENT:this.emit("event",e.items),this.emit(...e.items);break;case p.types.LOG:this.emit("log",e.text);break;case p.types.ERROR:this.emit("error",e.error);break;case p.types.ERRORRESULT:this.rejectJob(e.id,e.error);break;default:this.resolveJob(e.id,e)}}write(e){return this.child.write(e)}send(e){return this.write(this.framer.packet(e))}sendEnv(e){return this.send(new p.EnvPacket(e))}sendEvent(...e){return this.send(new p.EventPacket(e))}destroy(){return this.child.destroy()}execute(e,t){return new Promise((r,i)=>{this._execute(e,t,r,i)})}_execute(e,t,r,i){const s=new g(this,e.id,r,i);o(!this.pending.has(e.id),"ID overflow."),this.pending.set(e.id,s),s.start(t),this.send(e)}resolveJob(e,t){const r=this.pending.get(e);if(!r)throw new Error(`Job ${e} is not in progress.`);r.resolve(t)}rejectJob(e,t){const r=this.pending.get(e);if(!r)throw new Error(`Job ${e} is not in progress.`);r.reject(t)}killJobs(){for(const e of this.pending.values())e.destroy()}}class g{constructor(e,t,r,i){this.worker=e,this.id=t,this.job={resolve:r,reject:i},this.timer=null}start(e){!e||e<=0||(this.timer=setTimeout(()=>{this.reject(new Error("Worker timed out."))},e))}destroy(){this.reject(new Error("Job was destroyed."))}cleanup(){const e=this.job;return o(e,"Already finished."),this.job=null,null!=this.timer&&(clearTimeout(this.timer),this.timer=null),o(this.worker.pending.has(this.id)),this.worker.pending.delete(this.id),e}resolve(e){this.cleanup().resolve(e)}reject(e){this.cleanup().reject(e)}}r.exports=class extends a{constructor(e){super(),this.enabled=!1,this.size=Math.max(2,h.cpus().length),this.timeout=12e4,this.file=process.env.BCOIN_WORKER_FILE||"worker.js",this.children=new Map,this.uid=0,this.set(e)}set(e){e&&(null!=e.enabled&&(o("boolean"==typeof e.enabled),this.enabled=e.enabled),null!=e.size&&(o(e.size>>>0===e.size),o(e.size>0),this.size=e.size),null!=e.timeout&&(o(Number.isSafeInteger(e.timeout)),o(e.timeout>=-1),this.timeout=e.timeout),null!=e.file&&(o("string"==typeof e.file),this.file=e.file))}async open(){}async close(){this.destroy()}spawn(e){const t=new b(this.file);return t.id=e,t.on("error",e=>{this.emit("error",e,t)}),t.on("exit",r=>{this.emit("exit",r,t),this.children.get(e)===t&&this.children.delete(e)}),t.on("event",e=>{this.emit("event",e,t),this.emit(...e)}),t.on("log",e=>{this.emit("log",e,t)}),this.emit("spawn",t),t}alloc(){const e=this.uid++%this.size;return this.children.has(e)||this.children.set(e,this.spawn(e)),this.children.get(e)}sendEvent(){let e=!0;for(const t of this.children.values())t.sendEvent.apply(t,arguments)||(e=!1);return e}destroy(){for(const e of this.children.values())e.destroy()}execute(e,t){return this.enabled&&u.hasSupport()?(t||(t=this.timeout),this.alloc().execute(e,t)):new Promise((t,r)=>{setImmediate(()=>{let i;try{i=f.handle(e)}catch(e){return void r(e)}t(i)})})}async check(e,t,r){const i=new p.CheckPacket(e,t,r),s=await this.execute(i,-1);if(s.error)throw s.error;return null}async sign(e,t,r){let i=t;Array.isArray(i)||(i=[i]);const s=new p.SignPacket(e,i,r),n=await this.execute(s,-1);return n.inject(e),n.total}async checkInput(e,t,r,i){const s=new p.CheckInputPacket(e,t,r,i),n=await this.execute(s,-1);if(n.error)throw n.error;return null}async signInput(e,t,r,i,s){const n=new p.SignInputPacket(e,t,r,i,s),o=await this.execute(n,-1);return o.inject(e),o.value}async ecVerify(e,t,r){const i=new p.ECVerifyPacket(e,t,r);return(await this.execute(i,-1)).value}async ecSign(e,t){const r=new p.ECSignPacket(e,t);return(await this.execute(r,-1)).sig}async mine(e,t,r,i){const s=new p.MinePacket(e,t,r,i);return(await this.execute(s,-1)).nonce}async scrypt(e,t,r,i,s,n){const o=new p.ScryptPacket(e,t,r,i,s,n);return(await this.execute(o,-1)).key}}}],["bcoin","/lib/workers/child-browser.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(19,r);r.exports=class extends a{constructor(e){super(),this.init(e)}static hasSupport(){return"function"==typeof global.postMessage}init(e){process.env.BMOCHA&&register(e,[s,e]),this.child=new global.Worker(e),this.child.onerror=(e=>{this.emit("error",new Error("Child error.")),this.emit("exit",1,null)}),this.child.onmessage=(e=>{let t;"string"==typeof e.data?(t=Buffer.from(e.data,"hex"),o(t.length===e.data.length/2)):(o(e.data&&"object"==typeof e.data),o(e.data.data&&"number"==typeof e.data.data.length),(t=e.data.data).__proto__=Buffer.prototype),this.emit("data",t)})}write(e){return 2===this.child.postMessage.length?(e.__proto__=Uint8Array.prototype,this.child.postMessage({data:e},[e])):this.child.postMessage(e.toString("hex")),!0}destroy(){this.child.terminate(),this.emit("exit",143,"SIGTERM")}}}],["bcoin","/lib/workers/jobs.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(38,r),{derive:a}=__browser_require__(320,r),h=__browser_require__(275,r),c=__browser_require__(322,r),u=e;u.execute=function(e){try{return u.handle(e)}catch(e){return new c.ErrorResultPacket(e)}},u.handle=function(e){switch(e.cmd){case c.types.CHECK:return u.check(e.tx,e.view,e.flags);case c.types.CHECKINPUT:return u.checkInput(e.tx,e.index,e.coin,e.flags);case c.types.SIGN:return u.sign(e.tx,e.rings,e.type);case c.types.SIGNINPUT:return u.signInput(e.tx,e.index,e.coin,e.ring,e.type);case c.types.ECVERIFY:return u.ecVerify(e.msg,e.sig,e.key);case c.types.ECSIGN:return u.ecSign(e.msg,e.key);case c.types.MINE:return u.mine(e.data,e.target,e.min,e.max);case c.types.SCRYPT:return u.scrypt(e.passwd,e.salt,e.N,e.r,e.p,e.len);default:throw new Error(`Unknown command: "${e.cmd}".`)}},u.check=function(e,t,r){try{e.check(t,r)}catch(e){if("ScriptError"===e.type)return new c.CheckResultPacket(e);throw e}return new c.CheckResultPacket},u.checkInput=function(e,t,r,i){try{e.checkInput(t,r,i)}catch(e){if("ScriptError"===e.type)return new c.CheckInputResultPacket(e);throw e}return new c.CheckInputResultPacket},u.sign=function(e,t,r){const i=e.sign(t,r);return c.SignResultPacket.fromTX(e,i)},u.signInput=function(e,t,r,i,s){const n=e.signInput(e,t,r,i,s);return c.SignInputResultPacket.fromTX(e,t,n)},u.ecVerify=function(e,t,r){const i=o.verifyDER(e,t,r);return new c.ECVerifyResultPacket(i)},u.ecSign=function(e,t){const r=o.signDER(e,t);return new c.ECSignResultPacket(r)},u.mine=function(e,t,r,i){const s=h(e,t,r,i);return new c.MineResultPacket(s)},u.scrypt=function(e,t,r,i,s,n){const o=a(e,t,r,i,s,n);return new c.ScryptResultPacket(o)}}],["bcrypto","/lib/scrypt-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(321,r)}],["bcrypto","/lib/js/scrypt.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(35,r),a=__browser_require__(235,r),h=__browser_require__(51,r),c=Buffer.alloc(64),u=new Uint32Array(16),f=new Uint32Array(16);function l(e){const t=u,r=f;for(let r=0;r<16;r++)t[r]=E(e,4*r);for(let e=0;e<16;e++)r[e]=t[e];for(let e=0;e<8;e+=2)r[4]^=d(r[0]+r[12],7),r[8]^=d(r[4]+r[0],9),r[12]^=d(r[8]+r[4],13),r[0]^=d(r[12]+r[8],18),r[9]^=d(r[5]+r[1],7),r[13]^=d(r[9]+r[5],9),r[1]^=d(r[13]+r[9],13),r[5]^=d(r[1]+r[13],18),r[14]^=d(r[10]+r[6],7),r[2]^=d(r[14]+r[10],9),r[6]^=d(r[2]+r[14],13),r[10]^=d(r[6]+r[2],18),r[3]^=d(r[15]+r[11],7),r[7]^=d(r[3]+r[15],9),r[11]^=d(r[7]+r[3],13),r[15]^=d(r[11]+r[7],18),r[1]^=d(r[0]+r[3],7),r[2]^=d(r[1]+r[0],9),r[3]^=d(r[2]+r[1],13),r[0]^=d(r[3]+r[2],18),r[6]^=d(r[5]+r[4],7),r[7]^=d(r[6]+r[5],9),r[4]^=d(r[7]+r[6],13),r[5]^=d(r[4]+r[7],18),r[11]^=d(r[10]+r[9],7),r[8]^=d(r[11]+r[10],9),r[9]^=d(r[8]+r[11],13),r[10]^=d(r[9]+r[8],18),r[12]^=d(r[15]+r[14],7),r[13]^=d(r[12]+r[15],9),r[14]^=d(r[13]+r[12],13),r[15]^=d(r[14]+r[13],18);for(let e=0;e<16;e++)t[e]+=r[e];for(let r=0;r<16;r++)S(e,t[r],4*r)}function d(e,t){return e<<t|e>>>32-t}function p(e,t,r,i){const s=c;_(s,e,0,64*(2*i-1),64);for(let n=0;n<2*i;n++)w(s,e,0,64*n,64),l(s),_(t,s,r+64*n,0,64);for(let s=0;s<i;s++)_(e,t,64*s,r+2*s*64,64);for(let s=0;s<i;s++)_(e,t,64*(s+i),r+64*(2*s+1),64)}function b(e,t){return E(e,64*(2*t-1))}function g(e,t,r,i,s,n){const o=n,a=n;_(o,e,0,t,128*r);for(let e=0;e<i;e++)_(s,o,e*(128*r),0,128*r),p(o,a,128*r,r);for(let e=0;e<i;e++){w(o,s,0,(b(o,r)&i-1)*(128*r),128*r),p(o,a,128*r,r)}_(e,o,t,0,128*r)}async function m(e,t,r,i,s,n){const o=n,a=n;_(o,e,0,t,128*r);for(let e=0;e<i;e++)_(s,o,e*(128*r),0,128*r),p(o,a,128*r,r),await y();for(let e=0;e<i;e++){w(o,s,0,(b(o,r)&i-1)*(128*r),128*r),p(o,a,128*r,r),await y()}_(e,o,t,0,128*r)}function _(e,t,r,i,s){t.copy(e,r,i,i+s)}function w(e,t,r,i,s){for(let n=0;n<s;n++)e[r+n]^=t[i+n]}function y(){return new Promise(e=>setImmediate(e))}function v(){for(let e=0;e<64;e++)c[e]=0;for(let e=0;e<16;e++)u[e]=0,f[e]=0}function E(e,t){return e[t++]+256*e[t++]+65536*e[t++]+16777216*e[t]}function S(e,t,r){return e[r++]=t,t>>>=8,e[r++]=t,t>>>=8,e[r++]=t,t>>>=8,e[r++]=t,r}e.native=0,e.derive=function(e,t,r,i,s,n){if("string"==typeof e&&(e=Buffer.from(e,"utf8")),"string"==typeof t&&(t=Buffer.from(t,"utf8")),null==t&&(t=Buffer.alloc(0)),o(null!=e&&!0===e._isBuffer),o(null!=t&&!0===t._isBuffer),o(r>>>0===r),o(i>>>0===i),o(s>>>0===s),o(n>>>0===n),i*s>=1<<30)throw new Error("EFBIG");if(0!=(r&r-1)||0===r)throw new Error("EINVAL");if(r>4294967295)throw new Error("EINVAL");const c=Buffer.allocUnsafe(256*i),u=Buffer.allocUnsafe(128*i*r),f=a.derive(h,e,t,1,128*s*i);for(let e=0;e<s;e++)g(f,128*e*i,i,r,u,c);return v(),a.derive(h,e,f,1,n)},e.deriveAsync=async function(e,t,r,i,s,n){if("string"==typeof e&&(e=Buffer.from(e,"utf8")),"string"==typeof t&&(t=Buffer.from(t,"utf8")),null==t&&(t=Buffer.alloc(0)),o(null!=e&&!0===e._isBuffer),o(null!=t&&!0===t._isBuffer),o(r>>>0===r),o(i>>>0===i),o(s>>>0===s),o(n>>>0===n),i*s>=1<<30)throw new Error("EFBIG");if(0!=(r&r-1)||0===r)throw new Error("EINVAL");if(r>4294967295)throw new Error("EINVAL");const c=Buffer.allocUnsafe(256*i),u=Buffer.allocUnsafe(128*i*r),f=await a.deriveAsync(h,e,t,1,128*s*i);for(let e=0;e<s;e++)await m(f,128*e*i,i,r,u,c);return v(),a.deriveAsync(h,e,f,1,n)}}],["bcoin","/lib/workers/packets.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(89,r),c=__browser_require__(110,r),u=__browser_require__(112,r),f=__browser_require__(126,r),l=__browser_require__(85,r),d=__browser_require__(167,r),p=__browser_require__(128,r),b=__browser_require__(101,r),{encoding:g}=a,m={ENV:0,EVENT:1,LOG:2,ERROR:3,ERRORRESULT:4,CHECK:5,CHECKRESULT:6,SIGN:7,SIGNRESULT:8,CHECKINPUT:9,CHECKINPUTRESULT:10,SIGNINPUT:11,SIGNINPUTRESULT:12,ECVERIFY:13,ECVERIFYRESULT:14,ECSIGN:15,ECSIGNRESULT:16,MINE:17,MINERESULT:18,SCRYPT:19,SCRYPTRESULT:20};class _{constructor(){this.id=++_.id>>>0,this.cmd=-1}getSize(){throw new Error("Abstract method.")}toWriter(){throw new Error("Abstract method.")}fromRaw(){throw new Error("Abstract method.")}static fromRaw(){throw new Error("Abstract method.")}}_.id=0;class w extends _{constructor(e){super(),this.cmd=m.ENV,this.env=e||{},this.json=JSON.stringify(this.env)}getSize(){return g.sizeVarString(this.json,"utf8")}toWriter(e){return e.writeVarString(this.json,"utf8"),e}fromRaw(e){const t=a.read(e,!0);return this.json=t.readVarString("utf8"),this.env=JSON.parse(this.json),this}static fromRaw(e){return(new w).fromRaw(e)}}class y extends _{constructor(e){super(),this.cmd=m.EVENT,this.items=e||[],this.json=JSON.stringify(this.items)}getSize(){return g.sizeVarString(this.json,"utf8")}toWriter(e){return e.writeVarString(this.json,"utf8"),e}fromRaw(e){const t=a.read(e,!0);return this.json=t.readVarString("utf8"),this.items=JSON.parse(this.json),this}static fromRaw(e){return(new y).fromRaw(e)}}class v extends _{constructor(e){super(),this.cmd=m.LOG,this.text=e||""}getSize(){return g.sizeVarString(this.text,"utf8")}toWriter(e){return e.writeVarString(this.text,"utf8"),e}fromRaw(e){const t=a.read(e,!0);return this.text=t.readVarString("utf8"),this}static fromRaw(e){return(new v).fromRaw(e)}}class E extends _{constructor(e){super(),this.cmd=m.ERROR,this.error=e||new Error}getSize(){const e=this.error;let t=0;switch(t+=g.sizeVarString(L(e.message),"utf8"),t+=g.sizeVarString(L(e.stack),"utf8"),t+=g.sizeVarString(L(e.type),"utf8"),typeof e.code){case"number":t+=1,t+=4;break;case"string":t+=1,t+=g.sizeVarString(e.code,"utf8");break;default:t+=1}return t}toWriter(e){const t=this.error;switch(e.writeVarString(L(t.message),"utf8"),e.writeVarString(L(t.stack),"utf8"),e.writeVarString(L(t.type),"utf8"),typeof t.code){case"number":e.writeU8(2),e.writeI32(t.code);break;case"string":e.writeU8(1),e.writeVarString(t.code,"utf8");break;default:e.writeU8(0)}return e}fromRaw(e){const t=a.read(e,!0),r=this.error;switch(r.message=t.readVarString("utf8"),r.stack=t.readVarString("utf8"),r.type=t.readVarString("utf8"),t.readU8()){case 2:r.code=t.readI32();break;case 1:r.code=t.readVarString("utf8");break;default:r.code=null}return this}static fromRaw(e){return(new E).fromRaw(e)}}class S extends E{constructor(e){super(e),this.cmd=m.ERRORRESULT}static fromRaw(e){return(new S).fromRaw(e)}}class I extends _{constructor(e,t,r){super(),this.cmd=m.CHECK,this.tx=e||null,this.view=t||null,this.flags=null!=r?r:null}getSize(){return this.tx.getSize()+this.view.getSize(this.tx)+4}toWriter(e){return this.tx.toWriter(e),this.view.toWriter(e,this.tx),e.writeI32(null!=this.flags?this.flags:-1),e}fromRaw(e){const t=a.read(e,!0);return this.tx=l.fromReader(t),this.view=p.fromReader(t,this.tx),this.flags=t.readI32(),-1===this.flags&&(this.flags=null),this}static fromRaw(e){return(new I).fromRaw(e)}}class k extends _{constructor(e){super(),this.cmd=m.CHECKRESULT,this.error=e||null}getSize(){const e=this.error;let t=0;return e?(t+=1,t+=g.sizeVarString(L(e.message),"utf8"),t+=g.sizeVarString(L(e.stack),"utf8"),t+=g.sizeVarString(L(e.code),"utf8"),t+=1,t+=4):t+=1}toWriter(e){const t=this.error;return t?(e.writeU8(1),e.writeVarString(L(t.message),"utf8"),e.writeVarString(L(t.stack),"utf8"),e.writeVarString(L(t.code),"utf8"),e.writeU8(-1===t.op?255:t.op),e.writeU32(-1===t.ip?4294967295:t.ip),e):(e.writeU8(0),e)}fromRaw(e){const t=a.read(e,!0);if(0===t.readU8())return this;const r=new b("");return r.message=t.readVarString("utf8"),r.stack=t.readVarString("utf8"),r.code=t.readVarString("utf8"),r.op=t.readU8(),r.ip=t.readU32(),255===r.op&&(r.op=-1),4294967295===r.ip&&(r.ip=-1),this.error=r,this}static fromRaw(e){return(new k).fromRaw(e)}}class A extends _{constructor(e,t,r){super(),this.cmd=m.SIGN,this.tx=e||null,this.rings=t||[],this.type=null!=r?r:1}getSize(){let e=0;e+=this.tx.getSize(),e+=this.tx.view.getSize(this.tx),e+=g.sizeVarint(this.rings.length);for(const t of this.rings)e+=t.getSize();return e+=1}toWriter(e){this.tx.toWriter(e),this.tx.view.toWriter(e,this.tx),e.writeVarint(this.rings.length);for(const t of this.rings)t.toWriter(e);return e.writeU8(this.type),e}fromRaw(e){const t=a.read(e,!0);this.tx=f.fromReader(t),this.tx.view.fromReader(t,this.tx);const r=t.readVarint();for(let e=0;e<r;e++){const e=d.fromReader(t);this.rings.push(e)}return this.type=t.readU8(),this}static fromRaw(e){return(new A).fromRaw(e)}}class O extends _{constructor(e,t,r){super(),this.cmd=m.SIGNRESULT,this.total=e||0,this.script=r||[],this.witness=t||[]}fromTX(e,t){this.total=t;for(const t of e.inputs)this.script.push(t.script),this.witness.push(t.witness);return this}static fromTX(e,t){return(new O).fromTX(e,t)}getSize(){let e=0;e+=g.sizeVarint(this.total),e+=g.sizeVarint(this.script.length);for(let t=0;t<this.script.length;t++){const r=this.script[t],i=this.witness[t];e+=r.getVarSize(),e+=i.getVarSize()}return e}toWriter(e){o(this.script.length===this.witness.length),e.writeVarint(this.total),e.writeVarint(this.script.length);for(let t=0;t<this.script.length;t++)this.script[t].toWriter(e),this.witness[t].toWriter(e);return e}inject(e){o(this.script.length===e.inputs.length),o(this.witness.length===e.inputs.length);for(let t=0;t<e.inputs.length;t++){const r=e.inputs[t];r.script=this.script[t],r.witness=this.witness[t]}}fromRaw(e){const t=a.read(e,!0);this.total=t.readVarint();const r=t.readVarint();for(let e=0;e<r;e++)this.script.push(h.fromReader(t)),this.witness.push(c.fromReader(t));return this}static fromRaw(e){return(new O).fromRaw(e)}}class x extends _{constructor(e,t,r,i){super(),this.cmd=m.CHECKINPUT,this.tx=e||null,this.index=t,this.coin=r||null,this.flags=null!=i?i:null}getSize(){let e=0;return e+=this.tx.getSize(),e+=g.sizeVarint(this.index),e+=g.sizeVarint(this.coin.value),e+=this.coin.script.getVarSize(),e+=4}toWriter(e){return this.tx.toWriter(e),e.writeVarint(this.index),e.writeVarint(this.coin.value),this.coin.script.toWriter(e),e.writeI32(null!=this.flags?this.flags:-1),e}fromRaw(e){const t=a.read(e,!0);return this.tx=l.fromReader(t),this.index=t.readVarint(),this.coin=new u,this.coin.value=t.readVarint(),this.coin.script.fromReader(t),this.flags=t.readI32(),-1===this.flags&&(this.flags=null),this}static fromRaw(e){return(new x).fromRaw(e)}}class R extends k{constructor(e){super(e),this.cmd=m.CHECKINPUTRESULT}static fromRaw(e){return(new R).fromRaw(e)}}class M extends _{constructor(e,t,r,i,s){super(),this.cmd=m.SIGNINPUT,this.tx=e||null,this.index=t,this.coin=r||null,this.ring=i||null,this.type=null!=s?s:1}getSize(){let e=0;return e+=this.tx.getSize(),e+=g.sizeVarint(this.index),e+=g.sizeVarint(this.coin.value),e+=this.coin.script.getVarSize(),e+=this.ring.getSize(),e+=1}toWriter(e){return this.tx.toWriter(e),e.writeVarint(this.index),e.writeVarint(this.coin.value),this.coin.script.toWriter(e),this.ring.toWriter(e),e.writeU8(this.type),e}fromRaw(e){const t=a.read(e,!0);return this.tx=f.fromReader(t),this.index=t.readVarint(),this.coin=new u,this.coin.value=t.readVarint(),this.coin.script.fromReader(t),this.ring=d.fromReader(t),this.type=t.readU8(),this}static fromRaw(e){return(new M).fromRaw(e)}}class P extends _{constructor(e,t,r){super(),this.cmd=m.SIGNINPUTRESULT,this.value=e||!1,this.script=r||null,this.witness=t||null}fromTX(e,t,r){const i=e.inputs[t];return o(i),this.value=r,this.script=i.script,this.witness=i.witness,this}static fromTX(e,t,r){return(new P).fromTX(e,t,r)}getSize(){return 1+this.script.getVarSize()+this.witness.getVarSize()}toWriter(e){return e.writeU8(this.value?1:0),this.script.toWriter(e),this.witness.toWriter(e),e}inject(e,t){const r=e.inputs[t];o(r),r.script=this.script,r.witness=this.witness}fromRaw(e){const t=a.read(e,!0);return this.value=1===t.readU8(),this.script=h.fromReader(t),this.witness=c.fromReader(t),this}static fromRaw(e){return(new P).fromRaw(e)}}class B extends _{constructor(e,t,r){super(),this.cmd=m.ECVERIFY,this.msg=e||null,this.sig=t||null,this.key=r||null}getSize(){let e=0;return e+=g.sizeVarBytes(this.msg),e+=g.sizeVarBytes(this.sig),e+=g.sizeVarBytes(this.key)}toWriter(e){return e.writeVarBytes(this.msg),e.writeVarBytes(this.sig),e.writeVarBytes(this.key),e}fromRaw(e){const t=a.read(e,!0);return this.msg=t.readVarBytes(),this.sig=t.readVarBytes(),this.key=t.readVarBytes(),this}static fromRaw(e){return(new B).fromRaw(e)}}class N extends _{constructor(e){super(),this.cmd=m.ECVERIFYRESULT,this.value=e}getSize(){return 1}toWriter(e){return e.writeU8(this.value?1:0),e}fromRaw(e){const t=a.read(e,!0);return this.value=1===t.readU8(),this}static fromRaw(e){return(new N).fromRaw(e)}}class T extends _{constructor(e,t){super(),this.cmd=m.ECSIGN,this.msg=e||null,this.key=t||null}getSize(){let e=0;return e+=g.sizeVarBytes(this.msg),e+=g.sizeVarBytes(this.key)}toWriter(e){return e.writeVarBytes(this.msg),e.writeVarBytes(this.key),e}fromRaw(e){const t=a.read(e,!0);return this.msg=t.readVarBytes(),this.key=t.readVarBytes(),this}static fromRaw(e){return(new T).fromRaw(e)}}class C extends _{constructor(e){super(),this.cmd=m.ECSIGNRESULT,this.sig=e}getSize(){return g.sizeVarBytes(this.sig)}toWriter(e){return e.writeVarBytes(this.sig),e}fromRaw(e){const t=a.read(e,!0);return this.sig=t.readVarBytes(),this}static fromRaw(e){return(new C).fromRaw(e)}}class q extends _{constructor(e,t,r,i){super(),this.cmd=m.MINE,this.data=e||null,this.target=t||null,this.min=null!=r?r:-1,this.max=null!=i?i:-1}getSize(){return 120}toWriter(e){return e.writeBytes(this.data),e.writeBytes(this.target),e.writeU32(this.min),e.writeU32(this.max),e}fromRaw(e){const t=a.read(e,!0);return this.data=t.readBytes(80),this.target=t.readBytes(32),this.min=t.readU32(),this.max=t.readU32(),this}static fromRaw(e){return(new q).fromRaw(e)}}class j extends _{constructor(e){super(),this.cmd=m.MINERESULT,this.nonce=null!=e?e:-1}getSize(){return 5}toWriter(e){return e.writeU8(-1!==this.nonce?1:0),e.writeU32(this.nonce),e}fromRaw(e){const t=a.read(e,!0);return this.nonce=-1,1===t.readU8()&&(this.nonce=t.readU32()),this}static fromRaw(e){return(new j).fromRaw(e)}}class D extends _{constructor(e,t,r,i,s,n){super(),this.cmd=m.SCRYPT,this.passwd=e||null,this.salt=t||null,this.N=null!=r?r:-1,this.r=null!=i?i:-1,this.p=null!=s?s:-1,this.len=null!=n?n:-1}getSize(){let e=0;return e+=g.sizeVarBytes(this.passwd),e+=g.sizeVarBytes(this.salt),e+=16}toWriter(e){return e.writeVarBytes(this.passwd),e.writeVarBytes(this.salt),e.writeU32(this.N),e.writeU32(this.r),e.writeU32(this.p),e.writeU32(this.len),e}fromRaw(e){const t=a.read(e,!0);return this.passwd=t.readVarBytes(),this.salt=t.readVarBytes(),this.N=t.readU32(),this.r=t.readU32(),this.p=t.readU32(),this.len=t.readU32(),this}static fromRaw(e){return(new D).fromRaw(e)}}class U extends _{constructor(e){super(),this.cmd=m.SCRYPTRESULT,this.key=e||null}getSize(){return g.sizeVarBytes(this.key)}toWriter(e){return e.writeVarBytes(this.key),e}fromRaw(e){const t=a.read(e,!0);return this.key=t.readVarBytes(),this}static fromRaw(e){return(new U).fromRaw(e)}}function L(e){return"string"!=typeof e?"":e}e.types=m,e.EnvPacket=w,e.EventPacket=y,e.LogPacket=v,e.ErrorPacket=E,e.ErrorResultPacket=S,e.CheckPacket=I,e.CheckResultPacket=k,e.SignPacket=A,e.SignResultPacket=O,e.CheckInputPacket=x,e.CheckInputResultPacket=R,e.SignInputPacket=M,e.SignInputResultPacket=P,e.ECVerifyPacket=B,e.ECVerifyResultPacket=N,e.ECSignPacket=T,e.ECSignResultPacket=C,e.MinePacket=q,e.MineResultPacket=j,e.ScryptPacket=D,e.ScryptResultPacket=U}],["bcoin","/lib/workers/parser.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(19,r),h=__browser_require__(322,r);class c{constructor(e,t,r){this.id=e,this.cmd=t,this.size=r}}r.exports=class extends a{constructor(){super(),this.waiting=9,this.header=null,this.pending=[],this.total=0}feed(e){for(this.total+=e.length,this.pending.push(e);this.total>=this.waiting;){const e=this.read(this.waiting);this.parse(e)}}read(e){if(o(this.total>=e,"Reading too much."),0===e)return Buffer.alloc(0);const t=this.pending[0];if(t.length>e){const r=t.slice(0,e);return this.pending[0]=t.slice(e),this.total-=r.length,r}if(t.length===e){const e=this.pending.shift();return this.total-=e.length,e}const r=Buffer.allocUnsafe(e);let i=0;for(;i<r.length;){const e=this.pending[0],t=e.copy(r,i);t===e.length?this.pending.shift():this.pending[0]=e.slice(t),i+=t}return o.strictEqual(i,r.length),this.total-=r.length,r}parse(e){let t,r=this.header;if(!r){try{r=this.parseHeader(e)}catch(e){return void this.emit("error",e)}return this.header=r,void(this.waiting=r.size+1)}this.waiting=9,this.header=null;try{t=this.parsePacket(r,e)}catch(e){return void this.emit("error",e)}10===e[e.length-1]?(t.id=r.id,this.emit("packet",t)):this.emit("error",new Error("No trailing newline."))}parseHeader(e){const t=e.readUInt32LE(0,!0),r=e.readUInt8(4,!0),i=e.readUInt32LE(5,!0);return new c(t,r,i)}parsePacket(e,t){switch(e.cmd){case h.types.ENV:return h.EnvPacket.fromRaw(t);case h.types.EVENT:return h.EventPacket.fromRaw(t);case h.types.LOG:return h.LogPacket.fromRaw(t);case h.types.ERROR:return h.ErrorPacket.fromRaw(t);case h.types.ERRORRESULT:return h.ErrorResultPacket.fromRaw(t);case h.types.CHECK:return h.CheckPacket.fromRaw(t);case h.types.CHECKRESULT:return h.CheckResultPacket.fromRaw(t);case h.types.SIGN:return h.SignPacket.fromRaw(t);case h.types.SIGNRESULT:return h.SignResultPacket.fromRaw(t);case h.types.CHECKINPUT:return h.CheckInputPacket.fromRaw(t);case h.types.CHECKINPUTRESULT:return h.CheckInputResultPacket.fromRaw(t);case h.types.SIGNINPUT:return h.SignInputPacket.fromRaw(t);case h.types.SIGNINPUTRESULT:return h.SignInputResultPacket.fromRaw(t);case h.types.ECVERIFY:return h.ECVerifyPacket.fromRaw(t);case h.types.ECVERIFYRESULT:return h.ECVerifyResultPacket.fromRaw(t);case h.types.ECSIGN:return h.ECSignPacket.fromRaw(t);case h.types.ECSIGNRESULT:return h.ECSignResultPacket.fromRaw(t);case h.types.MINE:return h.MinePacket.fromRaw(t);case h.types.MINERESULT:return h.MineResultPacket.fromRaw(t);case h.types.SCRYPT:return h.ScryptPacket.fromRaw(t);case h.types.SCRYPTRESULT:return h.ScryptResultPacket.fromRaw(t);default:throw new Error("Unknown packet.")}}}}],["bcoin","/lib/workers/framer.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(24,r);r.exports=class{constructor(){}packet(e){const t=10+e.getSize(),r=o.write(t);r.writeU32(e.id),r.writeU8(e.cmd),r.seek(4),e.toWriter(r),r.writeU8(10);const i=r.render();return i.writeUInt32LE(i.length-10,5,!0),i}}}],["bcoin","/lib/node/http.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(195,r),{Server:h}=__browser_require__(326,r),c=__browser_require__(333,r),u=__browser_require__(105,r),{BloomFilter:f}=__browser_require__(264,r),l=__browser_require__(51,r),d=__browser_require__(41,r),{safeEqual:p}=__browser_require__(335,r),b=__browser_require__(20,r),g=__browser_require__(104,r),m=__browser_require__(85,r),_=__browser_require__(111,r),w=__browser_require__(14,r),y=__browser_require__(281,r);class v{constructor(e){this.network=w.primary,this.logger=null,this.node=null,this.apiKey=u.encode(d.randomBytes(20)),this.apiHash=l.digest(Buffer.from(this.apiKey,"ascii")),this.noAuth=!1,this.cors=!1,this.maxTxs=100,this.prefix=null,this.host="127.0.0.1",this.port=8080,this.ssl=!1,this.keyFile=null,this.certFile=null,this.fromOptions(e)}fromOptions(e){return o(e),o(e.node&&"object"==typeof e.node,"HTTP Server requires a Node."),this.node=e.node,this.network=e.node.network,this.logger=e.node.logger,this.port=this.network.rpcPort,null!=e.logger&&(o("object"==typeof e.logger),this.logger=e.logger),null!=e.apiKey&&(o("string"==typeof e.apiKey,"API key must be a string."),o(e.apiKey.length<=255,"API key must be under 256 bytes."),this.apiKey=e.apiKey,this.apiHash=l.digest(Buffer.from(this.apiKey,"ascii"))),null!=e.noAuth&&(o("boolean"==typeof e.noAuth),this.noAuth=e.noAuth),null!=e.cors&&(o("boolean"==typeof e.cors),this.cors=e.cors),null!=e.prefix&&(o("string"==typeof e.prefix),this.prefix=e.prefix,this.keyFile=a.join(this.prefix,"key.pem"),this.certFile=a.join(this.prefix,"cert.pem")),null!=e.host&&(o("string"==typeof e.host),this.host=e.host),null!=e.port&&(o((65535&e.port)===e.port,"Port must be a number."),this.port=e.port),null!=e.ssl&&(o("boolean"==typeof e.ssl),this.ssl=e.ssl),null!=e.keyFile&&(o("string"==typeof e.keyFile),this.keyFile=e.keyFile),null!=e.certFile&&(o("string"==typeof e.certFile),this.certFile=e.certFile),null!=e.maxTxs&&(o(Number.isSafeInteger(e.maxTxs)),this.maxTxs=e.maxTxs),e.apiKey||"127.0.0.1"!==this.host&&"::1"!==this.host||(this.noAuth=!0),this}static fromOptions(e){return(new v).fromOptions(e)}}function E(e,t){if(!e){const e=new Error(t);throw e.statusCode=400,e}}r.exports=class extends h{constructor(e){super(new v(e)),this.network=this.options.network,this.logger=this.options.logger.context("node-http"),this.node=this.options.node,this.chain=this.node.chain,this.mempool=this.node.mempool,this.pool=this.node.pool,this.fees=this.node.fees,this.miner=this.node.miner,this.rpc=this.node.rpc,this.init()}init(){this.on("request",(e,t)=>{"POST"===e.method&&"/"===e.pathname||this.logger.debug("Request for method=%s path=%s (%s).",e.method,e.pathname,e.socket.remoteAddress)}),this.on("listening",e=>{this.logger.info("Node HTTP server listening on %s (port=%d).",e.address,e.port)}),this.initRouter(),this.initSockets()}initRouter(){this.options.cors&&this.use(this.cors()),this.options.noAuth||this.use(this.basicAuth({hash:l.digest,password:this.options.apiKey,realm:"node"})),this.use(this.bodyParser({type:"json"})),this.use(this.jsonRPC()),this.use(this.router()),this.error((e,t,r)=>{const i=e.statusCode||500;r.json(i,{error:{type:e.type,code:e.code,message:e.message}})}),this.get("/",async(e,t)=>{const r=this.mempool?this.mempool.map.size:0,i=this.mempool?this.mempool.getSize():0,s=this.mempool?this.mempool.orphans.size:0;let n=this.pool.hosts.getLocal();n||(n=this.pool.hosts.address),t.json(200,{version:y.version,network:this.network.type,chain:{height:this.chain.height,tip:this.chain.tip.rhash(),progress:this.chain.getProgress()},indexes:{addr:{enabled:Boolean(this.node.addrindex),height:this.node.addrindex?this.node.addrindex.height:0},tx:{enabled:Boolean(this.node.txindex),height:this.node.txindex?this.node.txindex.height:0},filter:{enabled:Boolean(this.node.filterindex),height:this.node.filterindex?this.node.filterindex.height:0}},pool:{host:n.host,port:n.port,agent:this.pool.options.agent,services:this.pool.options.services.toString(2),outbound:this.pool.peers.outbound,inbound:this.pool.peers.inbound},mempool:{tx:r,size:i,orphans:s},time:{uptime:this.node.uptime(),system:b.now(),adjusted:this.network.now(),offset:this.network.time.offset},memory:this.logger.memoryUsage()})}),this.get("/coin/:hash/:index",async(e,t)=>{const r=c.fromRequest(e),i=r.brhash("hash"),s=r.u32("index");E(i,"Hash is required."),E(null!=s,"Index is required."),E(!this.chain.options.spv,"Cannot get coins in SPV mode.");const n=await this.node.getCoin(i,s);n?t.json(200,n.getJSON(this.network)):t.json(404)}),this.get("/tx/:hash",async(e,t)=>{const r=c.fromRequest(e).brhash("hash");E(r,"Hash is required."),E(!this.chain.options.spv,"Cannot get TX in SPV mode.");const i=await this.node.getMeta(r);if(!i)return void t.json(404);const s=await this.node.getMetaView(i);t.json(200,i.getJSON(this.network,s,this.chain.height))}),this.get("/tx/address/:address",async(e,t)=>{const r=c.fromRequest(e),i=r.str("address"),s=r.uint("limit",this.options.maxTxs),n=r.bool("reverse",!1),o=r.brhash("after",null);E(i,"Address is required."),E(!this.chain.options.spv,"Cannot get TX in SPV mode."),E(s<=this.options.maxTxs,`Limit above max of ${this.options.maxTxs}.`);const a=g.fromString(i,this.network),h=await this.node.getMetaByAddress(a,{limit:s,reverse:n,after:o}),u=[];for(const e of h){const t=await this.node.getMetaView(e);u.push(e.getJSON(this.network,t,this.chain.height))}t.json(200,u)}),this.get("/block/:block",async(e,t)=>{const r=c.fromRequest(e).uintbrhash("block");E(null!=r,"Hash or height required."),E(!this.chain.options.spv,"Cannot get block in SPV mode.");const i=await this.chain.getBlock(r);if(!i)return void t.json(404);const s=await this.chain.getBlockView(i);if(!s)return void t.json(404);const n=await this.chain.getHeight(r),o=this.chain.height-n+1;t.json(200,i.getJSON(this.network,s,n,o))}),this.get("/header/:block",async(e,t)=>{const r=c.fromRequest(e).uintbrhash("block");E(null!=r,"Hash or height required.");const i=await this.chain.getEntry(r);i?t.json(200,i.toJSON()):t.json(404)}),this.get("/filter/:block",async(e,t)=>{const r=c.fromRequest(e).uintbrhash("block");E(null!=r,"Hash or height required.");const i=await this.node.getBlockFilter(r);i?t.json(200,i.toJSON()):t.json(404)}),this.get("/mempool",async(e,t)=>{E(this.mempool,"No mempool available.");const r=this.mempool.getSnapshot(),i=[];for(const e of r)i.push(b.revHex(e));t.json(200,i)}),this.post("/broadcast",async(e,t)=>{const r=c.fromRequest(e).buf("tx");E(r,"TX is required.");const i=m.fromRaw(r);await this.node.sendTX(i),t.json(200,{success:!0})}),this.get("/fee",async(e,t)=>{const r=c.fromRequest(e).u32("blocks",1);if(!this.fees)return void t.json(200,{rate:this.network.feeRate});const i=this.fees.estimateFee(r);t.json(200,{rate:i})}),this.post("/reset",async(e,t)=>{const r=c.fromRequest(e).u32("height");E(null!=r,"Height is required."),E(r<=this.chain.height,"Height cannot be greater than chain tip."),await this.chain.reset(r),t.json(200,{success:!0})})}handleSocket(e){e.hook("auth",(...t)=>{if(e.channel("auth"))throw new Error("Already authed.");if(!this.options.noAuth){const e=new c(t).str(0,"");if(e.length>255)throw new Error("Invalid API key.");const r=Buffer.from(e,"ascii"),i=l.digest(r);if(!p(i,this.options.apiHash))throw new Error("Invalid API key.")}return e.join("auth"),this.logger.info("Successful auth from %s.",e.host),this.handleAuth(e),null}),e.fire("version",{version:y.version,network:this.network.type})}handleAuth(e){e.hook("watch chain",()=>(e.join("chain"),null)),e.hook("unwatch chain",()=>(e.leave("chain"),null)),e.hook("watch mempool",()=>(e.join("mempool"),null)),e.hook("unwatch mempool",()=>(e.leave("mempool"),null)),e.hook("set filter",(...t)=>{const r=new c(t).buf(0);if(!r)throw new Error("Invalid parameter.");return e.filter=f.fromRaw(r),null}),e.hook("get tip",()=>this.chain.tip.toRaw()),e.hook("get entry",async(...e)=>{const t=new c(e).uintbrhash(0);if(null==t)throw new Error("Invalid parameter.");const r=await this.chain.getEntry(t);return r&&await this.chain.isMainChain(r)?r.toRaw():null}),e.hook("get hashes",async(...e)=>{const t=new c(e),r=t.i32(0,-1),i=t.i32(1,-1);return this.chain.getHashes(r,i)}),e.hook("add filter",(...t)=>{const r=new c(t).array(0);if(!r)throw new Error("Invalid parameter.");if(!e.filter)throw new Error("No filter set.");const i=new c(r);for(let t=0;t<r.length;t++){const r=i.buf(t);if(!r)throw new Error("Bad data chunk.");e.filter.add(r),this.node.spv&&this.pool.watch(r)}return null}),e.hook("reset filter",()=>(e.filter=null,null)),e.hook("estimate fee",(...e)=>{const t=new c(e).u32(0);return this.fees?this.fees.estimateFee(t):this.network.feeRate}),e.hook("send",(...e)=>{const t=new c(e).buf(0);if(!t)throw new Error("Invalid parameter.");const r=m.fromRaw(t);return this.node.relay(r),null}),e.hook("rescan",(...t)=>{const r=new c(t).uintbrhash(0);if(null==r)throw new Error("Invalid parameter.");return this.scan(e,r)})}initSockets(){const e=this.mempool||this.pool;this.chain.on("connect",(e,t,r)=>{const i=this.channel("chain");if(!i)return;const s=e.toRaw();this.to("chain","chain connect",s);for(const e of i){const r=this.filterBlock(e,t);e.fire("block connect",s,r)}}),this.chain.on("disconnect",(e,t,r)=>{if(!this.channel("chain"))return;const i=e.toRaw();this.to("chain","chain disconnect",i),this.to("chain","block disconnect",i)}),this.chain.on("reset",e=>{this.channel("chain")&&this.to("chain","chain reset",e.toRaw())}),e.on("tx",e=>{const t=this.channel("mempool");if(!t)return;const r=e.toRaw();for(const i of t)this.filterTX(i,e)&&i.fire("tx",r)})}filterBlock(e,t){if(!e.filter)return[];const r=[];for(const i of t.txs)this.filterTX(e,i)&&r.push(i.toRaw());return r}filterTX(e,t){if(!e.filter)return!1;let r=!1;for(let i=0;i<t.outputs.length;i++){const s=t.outputs[i].getHash();if(s&&e.filter.test(s)){const s=_.fromTX(t,i);e.filter.add(s.toRaw()),r=!0}}if(r)return!0;if(!t.isCoinbase())for(const{prevout:r}of t.inputs)if(e.filter.test(r.toRaw()))return!0;return!1}async scan(e,t){return e.filter?(await this.node.scan(t,e.filter,(t,r)=>{const i=t.toRaw(),s=[];for(const e of r)s.push(e.toRaw());return e.call("block rescan",i,s)}),null):null}}}],["bweb","/lib/bweb.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(327,r),a=__browser_require__(329,r),{RPC:h,RPCError:c,errors:u}=__browser_require__(328,r),f=__browser_require__(332,r);e.Server=o,e.createServer=(e=>new o(e)),e.server=(e=>new o(e)),e.Router=a,e.router=(()=>new a),e.RPC=h,e.rpc=(()=>new h),e.RPCError=c,e.errors=u,e.middleware=f}],["bweb","/lib/server-browser.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(19,r),a=__browser_require__(328,r);r.exports=class extends o{constructor(e){super(),this.options=e,this.config={},this.server=new o,this.io=new o,this.rpc=new a}async open(){this.emit("listening",this.address())}async close(){}error(){}mount(){}use(){}hook(){}get(){}post(){}put(){}del(){}patch(){}channel(){return null}join(){}leave(){}to(){}all(){}async execute(){}add(){}address(){return{address:"localhost",port:80}}router(){return async()=>{}}cors(){return async()=>{}}basicAuth(){return async()=>{}}bodyParser(){return async()=>{}}jsonRPC(){return async()=>{}}fileServer(){return async()=>{}}cookieParser(){return async()=>{}}}}],["bweb","/lib/rpc.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(19,r),h={INVALID_REQUEST:-32600,METHOD_NOT_FOUND:-32601,INVALID_PARAMS:-32602,INTERNAL_ERROR:-32603,PARSE_ERROR:-32700};class c extends a{constructor(){super(),this.calls=Object.create(null),this.mounts=[]}getCode(e){switch(e.type){case"RPCError":return e.code;default:return h.INTERNAL_ERROR}}handleCall(e,t){}handleError(e){}async call(e,t){let r=e,i=[],s=!0;t||(t={}),Array.isArray(r)||(r=[r],s=!1);for(const e of r){if(!e||"object"!=typeof e){i.push({result:null,error:{message:"Invalid request.",code:h.INVALID_REQUEST},id:null});continue}if(e.id&&"object"==typeof e.id){i.push({result:null,error:{message:"Invalid ID.",code:h.INVALID_REQUEST},id:null});continue}if(null==e.id&&(e.id=null),e.params||(e.params=[]),"string"!=typeof e.method){i.push({result:null,error:{message:"Method not found.",code:h.METHOD_NOT_FOUND},id:e.id});continue}if(!Array.isArray(e.params)){i.push({result:null,error:{message:"Invalid params.",code:h.INVALID_PARAMS},id:e.id});continue}let r;this.handleCall(e,t),this.emit("call",e,t);try{r=await this.execute(e)}catch(t){const r=this.getCode(t);r===h.INTERNAL_ERROR&&(this.handleError(t),this.emit("error",t)),i.push({result:null,error:{message:t.message,code:r},id:e.id});continue}r===undefined&&(r=null),i.push({result:r,error:null,id:e.id})}return s||(i=i[0]),i}async execute(e,t){const r=this.calls[e.method];if(!r){for(const r of this.mounts)if(r.calls[e.method])return await r.execute(e,t);throw new u(h.METHOD_NOT_FOUND,`Method not found: ${e.method}.`)}return r.call(this,e.params,t)}add(e,t,r){o("function"==typeof t,"Handler must be a function."),o(!this.calls[e],"Duplicate RPC call."),r&&(t=t.bind(r)),this.calls[e]=t}mount(e){o(e,"RPC must be an object."),o("function"==typeof e.execute,"Execute must be a method."),this.mounts.push(e)}attach(e){o(e,"RPC must be an object."),o("function"==typeof e.execute,"Execute must be a method."),e.mount(this)}}class u extends Error{constructor(e,t){super(),o("number"==typeof e),o("string"==typeof t),this.name="RPCError",this.type="RPCError",this.message=t,this.code=e,Error.captureStackTrace&&Error.captureStackTrace(this,u)}}c.RPC=c,c.errors=h,c.RPCError=u,r.exports=c}],["bweb","/lib/router.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(330,r),h=__browser_require__(331,r);r.exports=class{constructor(){this._get=[],this._post=[],this._put=[],this._del=[],this._patch=[],this.hooks=[]}_handlers(e){switch(o("string"==typeof e),e.toUpperCase()){case"GET":return this._get;case"POST":return this._post;case"PUT":return this._put;case"DELETE":return this._del;case"PATCH":return this._patch;default:return null}}async handle(e,t){const r=this._handlers(e.method);if(!r)return!1;let i=null;for(const s of r){const r=s.match(e.pathname);if(r)if(e.params=r,i){if(3!==s.arity)continue;if(await s.handler(i,e,t),t.sent)return!0}else if(2===s.arity){if(await this._handleHooks(e,t))return!0;try{if(await s.handler(e,t),t.sent)return!0}catch(e){i=e}}}if(i)throw i;return!1}async _handleHooks(e,t){let r=null;for(const i of this.hooks)if(i.isPrefix(e.pathname))if(r){if(3!==i.arity)continue;if(await i.handler(r,e,t),t.sent)return!0}else if(2===i.arity)try{if(await i.handler(e,t),t.sent)return!0}catch(e){r=e}if(r)throw r;return!1}hook(e,t){t||(t=e,e="/"),this.hooks.push(new h(e,t))}get(e,t){this._get.push(new a(e,t))}post(e,t){this._post.push(new a(e,t))}put(e,t){this._put.push(new a(e,t))}del(e,t){this._del.push(new a(e,t))}patch(e,t){this._patch.push(new a(e,t))}}}],["bweb","/lib/route.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r);r.exports=class{constructor(e,t){o("string"==typeof e),o("function"==typeof t),o(2===t.length||3===t.length),this.path=e,this.regex=/^\/$/,this.handler=t,this.arity=t.length,this.map=[],this.compiled=!1}compile(){if(this.compiled)return;if(this.compiled=!0,"/"===this.path)return;const e=this.map;let t=this.path;t=(t=(t=(t=(t=t.replace(/(\/[^\/]+)\?/g,"(?:$1)?")).replace(/\.(?!\+)/g,"\\.")).replace(/\*/g,".*?")).replace(/%/g,"\\")).replace(/:(\w+)/g,(t,r)=>(e.push(r),"([^/]+)")),this.regex=new RegExp("^"+t+"$")}match(e){this.compile();const t=this.regex.exec(e);if(!t)return null;const r=Object.create(null);for(let e=1;e<t.length;e++){const i=t[e],s=this.map[e-1];s&&(r[s]=i),r[e-1]=i}return r}}}],["bweb","/lib/hook.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r);r.exports=class{constructor(e,t){o("string"==typeof e),o("function"==typeof t||"object"==typeof t),o(null!==t),this.path=e,this.handler=t,this.arity=0,"function"==typeof t&&(this.arity=t.length)}isPrefix(e){return"/"===this.path||(e.startsWith?e.startsWith(this.path):0===e.indexOf(this.path))}}}],["bweb","/lib/middleware/index-browser.js",function(e,t,r,i,s,n){"use strict";function o(){return async(e,t)=>{}}e.basicAuth=o,e.bodyParser=o,e.cookieParser=o,e.cors=o,e.fileServer=o,e.jsonRPC=o,e.router=o}],["bval","/lib/bval.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(334,r)}],["bval","/lib/validator.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r);class a{constructor(e,t){if(!e||"object"!=typeof e)throw new u("map","object");this.map=e,this.loose=t||!1}static multi(e,t){return new c(e,t)}static fromRequest(e){const t=new a(e.query,!0),r=new a(e.params,!0),i=new a(e.body,!1);return new c([t,r,i])}child(e){return new this.constructor(this.get(e))}has(e){return null!=this.get(e)}get(e,t){if(t===undefined&&(t=null),Array.isArray(e)){const r=e;for(const e of r){const t=this.get(e);if(null!==t)return t}return t}o("string"==typeof e||"number"==typeof e,"Key must be a string or number.");const r=this.map[e];return null!=r?r:t}typeOf(e){const t=this.get(e);return null==t?"null":typeof t}str(e,t){const r=this.get(e);if(t===undefined&&(t=null),null===r)return t;if("string"!=typeof r)throw new u(e,"string");return r}int(e,t){const r=this.get(e);if(t===undefined&&(t=null),null===r)return t;if("string"!=typeof r){if("number"!=typeof r)throw new u(e,"int");if(!Number.isSafeInteger(r))throw new u(e,"int");return r}if(!this.loose)throw new u(e,"int");if(!/^\-?\d+$/.test(r))throw new u(e,"int");const i=parseInt(r,10);if(!Number.isSafeInteger(i))throw new u(e,"int");return i}uint(e,t){const r=this.int(e);if(t===undefined&&(t=null),null===r)return t;if(r<0)throw new u(e,"uint");return r}float(e,t){const r=this.get(e);if(t===undefined&&(t=null),null===r)return t;if("string"!=typeof r){if("number"!=typeof r)throw new u(e,"float");if(!isFinite(r))throw new u(e,"float");return r}if(!this.loose)throw new u(e,"float");if(!/^\-?\d*(?:\.\d*)?$/.test(r))throw new u(e,"float");if(!/\d/.test(r))throw new u(e,"float");const i=parseFloat(r);if(!isFinite(i))throw new u(e,"float");return i}ufloat(e,t){const r=this.float(e);if(t===undefined&&(t=null),null===r)return t;if(r<0)throw new u(e,"positive float");return r}fixed(e,t,r){const i=this.float(e);if(r===undefined&&(r=null),null===i)return r;try{return function(e,t){o("number"==typeof e&&isFinite(e)),o(Number.isSafeInteger(t));let r=e.toFixed(t),i=1;r.length>0&&"-"===r[0]&&(r=r.substring(1),i=-1);let s=r,n="0";const a=r.indexOf(".");-1!==a&&(s=r.substring(0,a),n=r.substring(a+1));s=s.replace(/^0+/,""),n=n.replace(/0+$/,""),o(s.length<=16-t,"Fixed number string exceeds 2^53-1."),o(n.length<=t,"Too many decimal places in fixed number string."),0===s.length&&(s="0");for(;n.length<t;)n+="0";0===n.length&&(n="0");o(/^\d+$/.test(s)&&/^\d+$/.test(n),"Non-numeric characters in fixed number string."),s=parseInt(s,10),n=parseInt(n,10);const h=Math.pow(10,t),c=Number.MAX_SAFE_INTEGER%h,u=(Number.MAX_SAFE_INTEGER-c)/h;return o(s<u||s===u&&n<=c,"Fixed number string exceeds 2^53-1."),i*(s*h+n)}(i,t||0)}catch(t){throw new u(e,"fixed number")}}ufixed(e,t,r){const i=this.fixed(e,t);if(r===undefined&&(r=null),null===i)return r;if(i<0)throw new u(e,"positive fixed number");return i}i8(e,t){const r=this.int(e);if(t===undefined&&(t=null),null===r)return t;if(r<-128||r>127)throw new u(e,"i8");return r}i16(e,t){const r=this.int(e);if(t===undefined&&(t=null),null===r)return t;if(r<-32768||r>32767)throw new u(e,"i16");return r}i32(e,t){const r=this.int(e);if(t===undefined&&(t=null),null===r)return t;if((0|r)!==r)throw new u(e,"int32");return r}i64(e,t){return this.int(e,t)}u8(e,t){const r=this.uint(e);if(t===undefined&&(t=null),null===r)return t;if((255&r)!==r)throw new u(e,"uint8");return r}u16(e,t){const r=this.uint(e);if(t===undefined&&(t=null),null===r)return t;if((65535&r)!==r)throw new u(e,"uint16");return r}u32(e,t){const r=this.uint(e);if(t===undefined&&(t=null),null===r)return t;if(r>>>0!==r)throw new u(e,"uint32");return r}u64(e,t){return this.uint(e,t)}hash(e,t){const r=this.get(e);if(t===undefined&&(t=null),null===r)return t;if("string"!=typeof r){if(null==r||!0!==r._isBuffer)throw new u(e,"hash");if(32!==r.length)throw new u(e,"hash");return r.toString("hex")}if(64!==r.length)throw new u(e,"hex string");if(!/^[0-9a-f]+$/i.test(r))throw new u(e,"hex string");return r.toLowerCase()}bhash(e,t){const r=this.hash(e,t);return r?Buffer.from(r,"hex"):r}uinthash(e,t){const r=this.get(e);return null==t&&(t=null),null==r?t:null!=r&&!0===r._isBuffer?this.hash(e,t):"string"!=typeof r||this.loose&&64!==r.length?this.uint(e,t):this.hash(e,t)}uintbhash(e,t){const r=this.uinthash(e,t);return"string"!=typeof r?r:Buffer.from(r,"hex")}rhash(e,t){const r=this.get(e);if(t===undefined&&(t=null),null===r)return t;if("string"!=typeof r){if(null==r||!0!==r._isBuffer)throw new u(e,"hash");if(32!==r.length)throw new u(e,"hash");return r.toString("hex")}if(64!==r.length)throw new u(e,"hex string");if(!/^[0-9a-f]+$/i.test(r))throw new u(e,"hex string");let i="";for(let e=0;e<r.length;e+=2)i=r.slice(e,e+2)+i;return i.toLowerCase()}brhash(e,t){const r=this.rhash(e,t);return r?Buffer.from(r,"hex"):r}uintrhash(e,t){const r=this.get(e);return null==t&&(t=null),null==r?t:null!=r&&!0===r._isBuffer?this.rhash(e,t):"string"!=typeof r||this.loose&&64!==r.length?this.uint(e,t):this.rhash(e,t)}uintbrhash(e,t){const r=this.uintrhash(e,t);return"string"!=typeof r?r:Buffer.from(r,"hex")}bool(e,t){const r=this.get(e);if(t===undefined&&(t=null),null===r)return t;if("number"==typeof r){if(1===r)return!0;if(0===r)return!1}if("string"!=typeof r){if("boolean"!=typeof r)throw new u(e,"boolean");return r}if(!this.loose)throw new u(e,"boolean");if("true"===r||"1"===r)return!0;if("false"===r||"0"===r)return!1;throw new u(e,"boolean")}buf(e,t,r){const i=this.get(e);if(r||(r="hex"),t===undefined&&(t=null),null===i)return t;if("string"!=typeof i){if(null==i||!0!==i._isBuffer)throw new u(e,"buffer");return i}const s=Buffer.from(i,r);if(s.length!==Buffer.byteLength(i,r))throw new u(e,`${r} string`);return s}array(e,t){const r=this.get(e);if(t===undefined&&(t=null),null===r)return t;if("string"!=typeof r){if(!Array.isArray(r))throw new u(e,"array");return r}if(!this.loose)throw new u(e,"array");const i=r.trim().split(/\s*,\s*/),s=[];for(const e of i)0!==e.length&&s.push(e);return s}obj(e,t){const r=this.get(e);if(t===undefined&&(t=null),null===r)return t;if("object"!=typeof r||Array.isArray(r))throw new u(e,"object");return r}func(e,t){const r=this.get(e);if(t===undefined&&(t=null),null===r)return t;if("function"!=typeof r)throw new u(e,"function");return r}}const h=new a(Object.create(null));class c{constructor(e,t){this.maps=[],this.init(e,t)}init(e,t){o(Array.isArray(e)),o(e.length>0);for(const r of e)r instanceof a?this.maps.push(r):(o(r&&"object"==typeof r),this.maps.push(new a(r,t)))}find(e){for(const t of this.maps)if(t.has(e))return t;return h}child(e){return this.find(e).child(e)}has(e){return this.find(e).has(e)}get(e,t){return this.find(e).get(e,t)}typeOf(e){return this.find(e).typeOf(e)}str(e,t){return this.find(e).str(e,t)}int(e,t){return this.find(e).int(e,t)}uint(e,t){return this.find(e).uint(e,t)}float(e,t){return this.find(e).float(e,t)}ufloat(e,t){return this.find(e).ufloat(e,t)}fixed(e,t,r){return this.find(e).fixed(e,t,r)}ufixed(e,t,r){return this.find(e).ufixed(e,t,r)}i8(e,t){return this.find(e).i8(e,t)}i16(e,t){return this.find(e).i16(e,t)}i32(e,t){return this.find(e).i32(e,t)}i64(e,t){return this.find(e).i64(e,t)}u8(e,t){return this.find(e).u8(e,t)}u16(e,t){return this.find(e).u16(e,t)}u32(e,t){return this.find(e).u32(e,t)}u64(e,t){return this.find(e).u64(e,t)}hash(e,t){return this.find(e).hash(e,t)}bhash(e,t){return this.find(e).bhash(e,t)}uinthash(e,t){return this.find(e).uinthash(e,t)}uintbhash(e,t){return this.find(e).uintbhash(e,t)}rhash(e,t){return this.find(e).rhash(e,t)}brhash(e,t){return this.find(e).brhash(e,t)}uintrhash(e,t){return this.find(e).uintrhash(e,t)}uintbrhash(e,t){return this.find(e).uintbrhash(e,t)}bool(e,t){return this.find(e).bool(e,t)}buf(e,t,r){return this.find(e).buf(e,t,r)}array(e,t){return this.find(e).array(e,t)}obj(e,t){return this.find(e).obj(e,t)}func(e,t){return this.find(e).func(e,t)}}class u extends Error{constructor(e,t){super(),this.type="ValidationError",this.message=`${function(e){return Array.isArray(e)&&(e=e[0]),"number"==typeof e?`Param #${e}`:e}(e)} must be a ${t}.`,Error.captureStackTrace&&Error.captureStackTrace(this,u)}}r.exports=a}],["bcrypto","/lib/safe.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(35,r);function a(e,t){return(e^t)-1>>>31}function h(e,t,r){return e&r-1|t&~(r-1)}function c(e,t){return e-t>>>31}function u(e,t){return t-e>>>31}e.safeCompare=function(e,t){if(o(null!=e&&!0===e._isBuffer),o(null!=t&&!0===t._isBuffer),a(e.length,0))return a(t.length,0);let r=e.length^t.length;for(let i=0;i<t.length;i++)r|=e[i%e.length]^t[i];return r-1>>>31},e.safeEqual=function(e,t){if(o(null!=e&&!0===e._isBuffer),o(null!=t&&!0===t._isBuffer),!a(e.length,t.length))return 0;let r=0;for(let i=0;i<e.length;i++)r|=e[i]^t[i];return r-1>>>31},e.safeEqualByte=function(e,t){return a(255&e,255&t)},e.safeEqualInt=a,e.safeSelect=h,e.safeLT=c,e.safeLTE=function(e,t){return e-t-1>>>31},e.safeGT=u,e.safeGTE=function(e,t){return t-e-1>>>31},e.safeMin=function(e,t){return h(e,t,c(t,e))},e.safeMax=function(e,t){return h(e,t,u(t,e))},e.safeAbs=function(e){return(0|e)*(e>>31|1)},e.safeBool=function(e){return 1&(e>>31|-e>>31)},e.safeCopy=function(e,t,r){o(null!=e&&!0===e._isBuffer),o(null!=t&&!0===t._isBuffer),o(a(e.length,t.length));const i=r-1&255,s=255&~(r-1);for(let r=0;r<e.length;r++)e[r]=e[r]&i|t[r]&s}}],["bcoin","/lib/node/rpc.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(326,r),{Lock:h}=__browser_require__(203,r),c=__browser_require__(285,r),u=__browser_require__(333,r),{BufferMap:f,BufferSet:l}=__browser_require__(86,r),d=__browser_require__(94,r),{safeEqual:p}=__browser_require__(335,r),b=__browser_require__(38,r),g=__browser_require__(20,r),m=__browser_require__(23,r),_=__browser_require__(206,r),w=__browser_require__(88,r),y=__browser_require__(296,r),v=__browser_require__(89,r),E=__browser_require__(104,r),S=__browser_require__(183,r),I=__browser_require__(187,r),k=__browser_require__(109,r),A=__browser_require__(167,r),O=__browser_require__(186,r),x=__browser_require__(126,r),R=__browser_require__(14,r),M=__browser_require__(111,r),P=__browser_require__(112,r),B=__browser_require__(85,r),N=__browser_require__(17,r),T=__browser_require__(281,r),C=a.RPC,q=a.RPCError,j={INVALID_REQUEST:a.errors.INVALID_REQUEST,METHOD_NOT_FOUND:a.errors.METHOD_NOT_FOUND,INVALID_PARAMS:a.errors.INVALID_PARAMS,INTERNAL_ERROR:a.errors.INTERNAL_ERROR,PARSE_ERROR:a.errors.PARSE_ERROR,MISC_ERROR:-1,FORBIDDEN_BY_SAFE_MODE:-2,TYPE_ERROR:-3,INVALID_ADDRESS_OR_KEY:-5,OUT_OF_MEMORY:-7,INVALID_PARAMETER:-8,DATABASE_ERROR:-20,DESERIALIZATION_ERROR:-22,VERIFY_ERROR:-25,VERIFY_REJECTED:-26,VERIFY_ALREADY_IN_CHAIN:-27,IN_WARMUP:-28,CLIENT_NOT_CONNECTED:-9,CLIENT_IN_INITIAL_DOWNLOAD:-10,CLIENT_NODE_ALREADY_ADDED:-23,CLIENT_NODE_NOT_ADDED:-24,CLIENT_NODE_NOT_CONNECTED:-29,CLIENT_INVALID_IP_OR_SUBNET:-30,CLIENT_P2P_DISABLED:-31};function D(e){for(let t=0;t<e.length;t+=4){const r=e.readUInt32LE(t,!0);e.writeUInt32BE(r,t,!0)}return e}function U(e,t,r){return{id:e,version:t,reject:{status:r}}}function L(e,t){try{return E.fromString(e,t)}catch(e){throw new q(j.INVALID_ADDRESS_OR_KEY,"Invalid address.")}}function z(e,t){try{return A.fromSecret(e,t)}catch(e){throw new q(j.INVALID_ADDRESS_OR_KEY,"Invalid key.")}}function F(e,t){try{return c.fromHostname(e,t.port)}catch(e){throw new q(j.CLIENT_INVALID_IP_OR_SUBNET,"Invalid IP address or subnet.")}}function H(e,t){try{return y.fromHostname(e,t)}catch(e){throw new q(j.CLIENT_INVALID_IP_OR_SUBNET,"Invalid IP address or subnet.")}}function V(e){let t=e>>>24&255,r=65535/(16777215&e);for(;t<29;)r*=256,t++;for(;t>29;)r/=256,t--;return r}function K(e){for(o(e>=0),e=e.toString(16),o(e.length<=8);e.length<8;)e="0"+e;return e}r.exports=class extends C{constructor(e){super(),o(e,"RPC requires a Node."),this.node=e,this.network=e.network,this.workers=e.workers,this.chain=e.chain,this.mempool=e.mempool,this.pool=e.pool,this.fees=e.fees,this.miner=e.miner,this.logger=e.logger.context("node-rpc"),this.locker=new h,this.mining=!1,this.procLimit=0,this.attempt=null,this.lastActivity=0,this.boundChain=!1,this.nonce1=0,this.nonce2=0,this.merkleMap=new f,this.pollers=[],this.init()}getCode(e){switch(e.type){case"RPCError":return e.code;case"ValidationError":return j.TYPE_ERROR;case"EncodingError":return j.DESERIALIZATION_ERROR;default:return j.INTERNAL_ERROR}}handleCall(e,t){"getwork"!==e.method&&"getblocktemplate"!==e.method&&"getbestblockhash"!==e.method&&(this.logger.debug("Handling RPC call: %s.",e.method),"submitblock"!==e.method&&"getmemorypool"!==e.method&&this.logger.debug(e.params)),"getwork"===e.method&&t.longpoll&&(e.method="getworklp")}init(){this.add("stop",this.stop),this.add("help",this.help),this.add("getblockchaininfo",this.getBlockchainInfo),this.add("getbestblockhash",this.getBestBlockHash),this.add("getblockcount",this.getBlockCount),this.add("getblock",this.getBlock),this.add("getblockbyheight",this.getBlockByHeight),this.add("getblockhash",this.getBlockHash),this.add("getblockheader",this.getBlockHeader),this.add("getblockfilter",this.getBlockFilter),this.add("getchaintips",this.getChainTips),this.add("getdifficulty",this.getDifficulty),this.add("getmempoolancestors",this.getMempoolAncestors),this.add("getmempooldescendants",this.getMempoolDescendants),this.add("getmempoolentry",this.getMempoolEntry),this.add("getmempoolinfo",this.getMempoolInfo),this.add("getrawmempool",this.getRawMempool),this.add("gettxout",this.getTXOut),this.add("gettxoutsetinfo",this.getTXOutSetInfo),this.add("pruneblockchain",this.pruneBlockchain),this.add("verifychain",this.verifyChain),this.add("invalidateblock",this.invalidateBlock),this.add("reconsiderblock",this.reconsiderBlock),this.add("getnetworkhashps",this.getNetworkHashPS),this.add("getmininginfo",this.getMiningInfo),this.add("prioritisetransaction",this.prioritiseTransaction),this.add("getwork",this.getWork),this.add("getworklp",this.getWorkLongpoll),this.add("getblocktemplate",this.getBlockTemplate),this.add("submitblock",this.submitBlock),this.add("verifyblock",this.verifyBlock),this.add("setgenerate",this.setGenerate),this.add("getgenerate",this.getGenerate),this.add("generate",this.generate),this.add("generatetoaddress",this.generateToAddress),this.add("estimatefee",this.estimateFee),this.add("estimatepriority",this.estimatePriority),this.add("estimatesmartfee",this.estimateSmartFee),this.add("estimatesmartpriority",this.estimateSmartPriority),this.add("getinfo",this.getInfo),this.add("validateaddress",this.validateAddress),this.add("createmultisig",this.createMultisig),this.add("createwitnessaddress",this.createWitnessAddress),this.add("verifymessage",this.verifyMessage),this.add("signmessagewithprivkey",this.signMessageWithPrivkey),this.add("setmocktime",this.setMockTime),this.add("getconnectioncount",this.getConnectionCount),this.add("ping",this.ping),this.add("getpeerinfo",this.getPeerInfo),this.add("addnode",this.addNode),this.add("disconnectnode",this.disconnectNode),this.add("getaddednodeinfo",this.getAddedNodeInfo),this.add("getnettotals",this.getNetTotals),this.add("getnetworkinfo",this.getNetworkInfo),this.add("setban",this.setBan),this.add("listbanned",this.listBanned),this.add("clearbanned",this.clearBanned),this.add("getrawtransaction",this.getRawTransaction),this.add("createrawtransaction",this.createRawTransaction),this.add("decoderawtransaction",this.decodeRawTransaction),this.add("decodescript",this.decodeScript),this.add("sendrawtransaction",this.sendRawTransaction),this.add("signrawtransaction",this.signRawTransaction),this.add("gettxoutproof",this.getTXOutProof),this.add("verifytxoutproof",this.verifyTXOutProof),this.add("getmemoryinfo",this.getMemoryInfo),this.add("setloglevel",this.setLogLevel)}async getInfo(e,t){if(t||0!==e.length)throw new q(j.MISC_ERROR,"getinfo");return{version:T.version,protocolversion:this.pool.options.version,walletversion:0,balance:0,blocks:this.chain.height,timeoffset:this.network.time.offset,connections:this.pool.peers.size(),proxy:"",difficulty:V(this.chain.tip.bits),testnet:this.network!==R.main,keypoololdest:0,keypoolsize:0,unlocked_until:0,paytxfee:w.btc(this.network.feeRate,!0),relayfee:w.btc(this.network.minRelay,!0),errors:""}}async help(e,t){if(0===e.length)return`Select a command:\n${Object.keys(this.calls).join("\n")}`;const r={method:e[0],params:[]};return await this.execute(r,!0)}async stop(e,t){if(t||0!==e.length)throw new q(j.MISC_ERROR,"stop");return this.node.close().catch(e=>{setImmediate(()=>{throw e})}),"Stopping."}async getNetworkInfo(e,t){if(t||0!==e.length)throw new q(j.MISC_ERROR,"getnetworkinfo");const r=this.pool.hosts,i=[];for(const e of r.local.values())i.push({address:e.addr.host,port:e.addr.port,score:e.score});return{version:T.version,subversion:this.pool.options.agent,protocolversion:this.pool.options.version,localservices:K(this.pool.options.services),localservicenames:this.pool.getServiceNames(),localrelay:!this.pool.options.noRelay,timeoffset:this.network.time.offset,networkactive:this.pool.connected,connections:this.pool.peers.size(),networks:[],relayfee:w.btc(this.network.minRelay,!0),incrementalfee:0,localaddresses:i,warnings:""}}async addNode(e,t){if(t||2!==e.length)throw new q(j.MISC_ERROR,'addnode "node" "add|remove|onetry"');const r=new u(e),i=r.str(0,"");switch(r.str(1,"")){case"add":this.pool.hosts.addNode(i);case"onetry":{const e=H(i,this.network);if(!this.pool.peers.get(e.hostname)){const t=this.pool.createOutbound(e);this.pool.peers.add(t)}break}case"remove":this.pool.hosts.removeNode(i)}return null}async disconnectNode(e,t){if(t||1!==e.length)throw new q(j.MISC_ERROR,'disconnectnode "node"');const r=F(new u(e).str(0,""),this.network),i=this.pool.peers.get(r.hostname);return i&&i.destroy(),null}async getAddedNodeInfo(e,t){if(t||e.length>1)throw new q(j.MISC_ERROR,'getaddednodeinfo ( "node" )');const r=this.pool.hosts,i=new u(e).str(0,"");let s;1===e.length&&(s=F(i,this.network));const n=[];for(const e of r.nodes){if(s){if(e.host!==s.host)continue;if(e.port!==s.port)continue}const t=this.pool.peers.get(e.hostname);t&&t.connected?n.push({addednode:e.hostname,connected:t.connected,addresses:[{address:t.hostname(),connected:t.outbound?"outbound":"inbound"}]}):n.push({addednode:e.hostname,connected:!1,addresses:[]})}if(s&&0===n.length)throw new q(j.CLIENT_NODE_NOT_ADDED,"Node has not been added.");return n}async getConnectionCount(e,t){if(t||0!==e.length)throw new q(j.MISC_ERROR,"getconnectioncount");return this.pool.peers.size()}async getNetTotals(e,t){let r=0,i=0;if(t||e.length>0)throw new q(j.MISC_ERROR,"getnettotals");for(let e=this.pool.peers.head();e;e=e.next)r+=e.socket.bytesWritten,i+=e.socket.bytesRead;return{totalbytesrecv:i,totalbytessent:r,timemillis:Date.now()}}async getPeerInfo(e,t){if(t||0!==e.length)throw new q(j.MISC_ERROR,"getpeerinfo");const r=[];for(let e=this.pool.peers.head();e;e=e.next){const t=this.network.time.known.get(e.hostname())||0,i=[];for(const t in e.blockMap.keys()){const e=g.revHex(t);i.push(e)}e.getName(),r.push({id:e.id,addr:e.hostname(),addrlocal:e.local.isNull()?undefined:e.local.hostname,name:e.name||undefined,services:K(e.services),servicenames:e.getServiceNames(),relaytxes:!e.noRelay,lastsend:e.lastSend/1e3|0,lastrecv:e.lastRecv/1e3|0,bytessent:e.socket.bytesWritten,bytesrecv:e.socket.bytesRead,conntime:0!==e.time?(Date.now()-e.time)/1e3|0:0,timeoffset:t,pingtime:-1!==e.lastPong?(e.lastPong-e.lastPing)/1e3:-1,minping:-1!==e.minPing?e.minPing/1e3:-1,version:e.version,subver:e.agent,inbound:!e.outbound,startingheight:e.height,besthash:e.bestHash?g.revHex(e.bestHash):null,bestheight:e.bestHeight,banscore:e.banScore,inflight:i,whitelisted:!1})}return r}async ping(e,t){if(t||0!==e.length)throw new q(j.MISC_ERROR,"ping");for(let e=this.pool.peers.head();e;e=e.next)e.sendPing();return null}async setBan(e,t){const r=new u(e),i=r.str(0,""),s=r.str(1,"");if(t||e.length<2||"add"!==s&&"remove"!==s)throw new q(j.MISC_ERROR,'setban "ip(/netmask)" "add|remove" (bantime) (absolute)');const n=H(i,this.network);switch(s){case"add":this.pool.ban(n);break;case"remove":this.pool.unban(n)}return null}async listBanned(e,t){if(t||0!==e.length)throw new q(j.MISC_ERROR,"listbanned");const r=[];for(const[e,t]of this.pool.hosts.banned)r.push({address:e,banned_until:t+this.pool.options.banTime,ban_created:t,ban_reason:""});return r}async clearBanned(e,t){if(t||0!==e.length)throw new q(j.MISC_ERROR,"clearbanned");return this.pool.hosts.clearBanned(),null}async getBlockchainInfo(e,t){if(t||0!==e.length)throw new q(j.MISC_ERROR,"getblockchaininfo");return{chain:"testnet"!==this.network.type?this.network.type:"test",blocks:this.chain.height,headers:this.chain.height,bestblockhash:this.chain.tip.rhash(),difficulty:V(this.chain.tip.bits),mediantime:await this.chain.getMedianTime(this.chain.tip),verificationprogress:this.chain.getProgress(),chainwork:this.chain.tip.chainwork.toString("hex",64),pruned:this.chain.options.prune,softforks:this.getSoftforks(),bip9_softforks:await this.getBIP9Softforks(),pruneheight:this.chain.options.prune?Math.max(0,this.chain.height-this.network.block.keepBlocks):null}}async getBestBlockHash(e,t){if(t||0!==e.length)throw new q(j.MISC_ERROR,"getbestblockhash");return this.chain.tip.rhash()}async getBlockCount(e,t){if(t||0!==e.length)throw new q(j.MISC_ERROR,"getblockcount");return this.chain.tip.height}async getBlock(e,t){if(t||e.length<1||e.length>3)throw new q(j.MISC_ERROR,'getblock "hash" ( verbose )');const r=new u(e),i=r.brhash(0),s=r.bool(1,!0),n=r.bool(2,!1);if(!i)throw new q(j.TYPE_ERROR,"Invalid block hash.");const o=await this.chain.getEntry(i);if(!o)throw new q(j.MISC_ERROR,"Block not found.");const a=await this.chain.getBlock(o.hash);if(!a){if(this.chain.options.spv)throw new q(j.MISC_ERROR,"Block not available (spv mode)");if(this.chain.options.prune)throw new q(j.MISC_ERROR,"Block not available (pruned data)");throw new q(j.MISC_ERROR,"Can't read block from disk")}return s?await this.blockToJSON(o,a,n):a.toRaw().toString("hex")}async getBlockByHeight(e,t){if(t||e.length<1||e.length>3)throw new q(j.MISC_ERROR,'getblockbyheight "height" ( verbose )');const r=new u(e),i=r.u32(0,-1),s=r.bool(1,!0),n=r.bool(2,!1);if(-1===i)throw new q(j.TYPE_ERROR,"Invalid block height.");const o=await this.chain.getEntry(i);if(!o)throw new q(j.MISC_ERROR,"Block not found.");const a=await this.chain.getBlock(o.hash);if(!a){if(this.chain.options.spv)throw new q(j.MISC_ERROR,"Block not available (spv mode)");if(this.chain.options.prune)throw new q(j.MISC_ERROR,"Block not available (pruned data)");throw new q(j.DATABASE_ERROR,"Can't read block from disk")}return s?await this.blockToJSON(o,a,n):a.toRaw().toString("hex")}async getBlockHash(e,t){if(t||1!==e.length)throw new q(j.MISC_ERROR,"getblockhash index");const r=new u(e).u32(0);if(null==r||r>this.chain.height)throw new q(j.INVALID_PARAMETER,"Block height out of range.");const i=await this.chain.getHash(r);if(!i)throw new q(j.MISC_ERROR,"Not found.");return g.revHex(i)}async getBlockHeader(e,t){if(t||e.length<1||e.length>2)throw new q(j.MISC_ERROR,'getblockheader "hash" ( verbose )');const r=new u(e),i=r.brhash(0),s=r.bool(1,!0);if(!i)throw new q(j.MISC_ERROR,"Invalid block hash.");const n=await this.chain.getEntry(i);if(!n)throw new q(j.MISC_ERROR,"Block not found.");return s?await this.headerToJSON(n):n.toRaw().toString("hex",0,80)}async getBlockFilter(e,t){if(t||e.length<1||e.length>2)throw new q(j.MISC_ERROR,'getblockfilter "hash"');const r=new u(e).brhash(0);if(!r)throw new q(j.MISC_ERROR,"Invalid block hash.");const i=await this.node.getBlockFilter(r);if(!i)throw new q(j.MISC_ERROR,"Block filter not found.");return i.toJSON()}async getChainTips(e,t){if(t||0!==e.length)throw new q(j.MISC_ERROR,"getchaintips");const r=await this.chain.getTips(),i=[];for(const e of r){const t=await this.chain.getEntry(e);o(t);const r=await this.findFork(t),s=await this.chain.isMainChain(t);i.push({height:t.height,hash:t.rhash(),branchlen:t.height-r.height,status:s?"active":"valid-headers"})}return i}async getDifficulty(e,t){if(t||0!==e.length)throw new q(j.MISC_ERROR,"getdifficulty");return V(this.chain.tip.bits)}async getMempoolInfo(e,t){if(t||0!==e.length)throw new q(j.MISC_ERROR,"getmempoolinfo");if(!this.mempool)throw new q(j.MISC_ERROR,"No mempool available.");return{size:this.mempool.map.size,bytes:this.mempool.getSize(),usage:this.mempool.getSize(),maxmempool:this.mempool.options.maxSize,mempoolminfee:w.btc(this.mempool.options.minRelay,!0)}}async getMempoolAncestors(e,t){if(t||e.length<1||e.length>2)throw new q(j.MISC_ERROR,"getmempoolancestors txid (verbose)");const r=new u(e),i=r.brhash(0),s=r.bool(1,!1);if(!this.mempool)throw new q(j.MISC_ERROR,"No mempool available.");if(!i)throw new q(j.TYPE_ERROR,"Invalid TXID.");const n=this.mempool.getEntry(i);if(!n)throw new q(j.MISC_ERROR,"Transaction not in mempool.");const o=this.mempool.getAncestors(n),a=[];if(s)for(const e of o)a.push(this.entryToJSON(e));else for(const e of o)a.push(e.txid());return a}async getMempoolDescendants(e,t){if(t||e.length<1||e.length>2)throw new q(j.MISC_ERROR,"getmempooldescendants txid (verbose)");const r=new u(e),i=r.brhash(0),s=r.bool(1,!1);if(!this.mempool)throw new q(j.MISC_ERROR,"No mempool available.");if(!i)throw new q(j.TYPE_ERROR,"Invalid TXID.");const n=this.mempool.getEntry(i);if(!n)throw new q(j.MISC_ERROR,"Transaction not in mempool.");const o=this.mempool.getDescendants(n),a=[];if(s)for(const e of o)a.push(this.entryToJSON(e));else for(const e of o)a.push(e.txid());return a}async getMempoolEntry(e,t){if(t||1!==e.length)throw new q(j.MISC_ERROR,"getmempoolentry txid");const r=new u(e).brhash(0);if(!this.mempool)throw new q(j.MISC_ERROR,"No mempool available.");if(!r)throw new q(j.TYPE_ERROR,"Invalid TXID.");const i=this.mempool.getEntry(r);if(!i)throw new q(j.MISC_ERROR,"Transaction not in mempool.");return this.entryToJSON(i)}async getRawMempool(e,t){if(t||e.length>1)throw new q(j.MISC_ERROR,"getrawmempool ( verbose )");const r=new u(e).bool(0,!1);if(!this.mempool)throw new q(j.MISC_ERROR,"No mempool available.");if(r){const e={};for(const t of this.mempool.map.values())e[t.txid()]=this.entryToJSON(t);return e}return this.mempool.getSnapshot().map(g.revHex)}async getTXOut(e,t){if(t||e.length<2||e.length>3)throw new q(j.MISC_ERROR,'gettxout "txid" n ( includemempool )');const r=new u(e),i=r.brhash(0),s=r.u32(1),n=r.bool(2,!0);if(this.chain.options.spv)throw new q(j.MISC_ERROR,"Cannot get coins in SPV mode.");if(this.chain.options.prune)throw new q(j.MISC_ERROR,"Cannot get coins when pruned.");if(!i||null==s)throw new q(j.TYPE_ERROR,"Invalid outpoint.");let o;if(n){if(!this.mempool)throw new q(j.MISC_ERROR,"No mempool available.");o=this.mempool.getCoin(i,s)}return o||(o=await this.chain.getCoin(i,s)),o?{bestblock:this.chain.tip.rhash(),confirmations:o.getDepth(this.chain.height),value:w.btc(o.value,!0),scriptPubKey:this.scriptToJSON(o.script,!0),version:o.version,coinbase:o.coinbase}:null}async getTXOutProof(e,t){if(t||1!==e.length&&2!==e.length)throw new q(j.MISC_ERROR,'gettxoutproof ["txid",...] ( blockhash )');const r=new u(e),i=r.array(0),s=r.brhash(1);if(this.chain.options.spv)throw new q(j.MISC_ERROR,"Cannot get coins in SPV mode.");if(this.chain.options.prune)throw new q(j.MISC_ERROR,"Cannot get coins when pruned.");if(!i||0===i.length)throw new q(j.INVALID_PARAMETER,"Invalid TXIDs.");const n=new u(i),o=new l,a=[];let h=null;for(let e=0;e<i.length;e++){const t=n.brhash(e);if(!t)throw new q(j.TYPE_ERROR,"Invalid TXID.");if(o.has(t))throw new q(j.INVALID_PARAMETER,"Duplicate txid.");o.add(t),a.push(t),h=t}let c=null;if(s)c=await this.chain.getBlock(s);else if(await this.node.hasTX(h)){const e=await this.node.getMeta(h);e&&(c=await this.chain.getBlock(e.block))}else{const e=await this.chain.getCoin(h,0);e&&(c=await this.chain.getBlock(e.height))}if(!c)throw new q(j.MISC_ERROR,"Block not found.");for(const e of a)if(!c.hasTX(e))throw new q(j.VERIFY_ERROR,"Block does not contain all txids.");return(c=O.fromHashes(c,a)).toRaw().toString("hex")}async verifyTXOutProof(e,t){if(t||1!==e.length)throw new q(j.MISC_ERROR,'verifytxoutproof "proof"');const r=new u(e).buf(0);if(!r)throw new q(j.TYPE_ERROR,"Invalid hex string.");const i=O.fromRaw(r);if(!i.verify())return[];if(!await this.chain.getEntry(i.hash()))throw new q(j.MISC_ERROR,"Block not found in chain.");const s=i.getTree(),n=[];for(const e of s.matches)n.push(g.revHex(e));return n}async getTXOutSetInfo(e,t){if(t||0!==e.length)throw new q(j.MISC_ERROR,"gettxoutsetinfo");if(this.chain.options.spv)throw new q(j.MISC_ERROR,"Chainstate not available (SPV mode).");return{height:this.chain.height,bestblock:this.chain.tip.rhash(),transactions:this.chain.db.state.tx,txouts:this.chain.db.state.coin,bytes_serialized:0,hash_serialized:0,total_amount:w.btc(this.chain.db.state.value,!0)}}async pruneBlockchain(e,t){if(t||0!==e.length)throw new q(j.MISC_ERROR,"pruneblockchain");if(this.chain.options.spv)throw new q(j.MISC_ERROR,"Cannot prune chain in SPV mode.");if(this.chain.options.prune)throw new q(j.MISC_ERROR,"Chain is already pruned.");if(this.chain.height<this.network.block.pruneAfterHeight)throw new q(j.MISC_ERROR,"Chain is too short for pruning.");try{await this.chain.prune()}catch(e){throw new q(j.DATABASE_ERROR,e.message)}}async verifyChain(e,t){if(t||e.length>2)throw new q(j.MISC_ERROR,"verifychain ( checklevel numblocks )");const r=new u(e),i=r.u32(0),s=r.u32(1);if(null==i||null==s)throw new q(j.TYPE_ERROR,"Missing parameters.");if(this.chain.options.spv)throw new q(j.MISC_ERROR,"Cannot verify chain in SPV mode.");if(this.chain.options.prune)throw new q(j.MISC_ERROR,"Cannot verify chain when pruned.");return null}async submitWork(e){const t=await this.locker.lock();try{return await this._submitWork(e)}finally{t()}}async _submitWork(e){const t=this.attempt;if(!t)return!1;if(128!==e.length)throw new q(j.INVALID_PARAMETER,"Invalid work size.");const r=e.slice(0,80);D(r);const i=I.fromHead(r);if(i.prevBlock!==t.prevBlock||i.bits!==t.bits)return!1;if(!i.verify())return!1;const s=this.merkleMap.get(i.merkleRoot);if(!s)return!1;const[n,o]=s,a=i.nonce,h=i.time,c=t.getProof(n,o,h,a);if(!c.verify(t.target))return!1;const u=t.commit(c);let f;try{f=await this.chain.add(u)}catch(e){if("VerifyError"===e.type)return this.logger.warning("RPC block rejected: %h (%s).",u.hash(),e.reason),!1;throw e}return!!f||(this.logger.warning("RPC block rejected: %h (bad-prevblk).",u.hash()),!1)}async createWork(e){const t=await this.locker.lock();try{return await this._createWork(e)}finally{t()}}async _createWork(){const e=await this.updateWork(),t=this.nonce1,r=this.nonce2,i=e.time,s=Buffer.allocUnsafe(128);s.fill(0);const n=e.getRoot(t,r);return e.getHeader(n,i,0).copy(s,0),s[80]=128,s.writeUInt32BE(640,s.length-4,!0),D(s),{data:s.toString("hex"),target:e.target.toString("hex"),height:e.height}}async getWorkLongpoll(e,t){return await this.longpoll(),await this.createWork()}async getWork(e,t){if(e.length>1)throw new q(j.MISC_ERROR,'getwork ( "data" )');if(1===e.length){const t=new u(e).buf(0);if(!t)throw new q(j.TYPE_ERROR,"Invalid work data.");return await this.submitWork(t)}return await this.createWork()}async submitBlock(e,t){if(t||e.length<1||e.length>2)throw new q(j.MISC_ERROR,'submitblock "hexdata" ( "jsonparametersobject" )');const r=new u(e).buf(0),i=S.fromRaw(r);return await this.addBlock(i)}async getBlockTemplate(e,t){if(t||e.length>1)throw new q(j.MISC_ERROR,'getblocktemplate ( "jsonrequestobject" )');const r=new u(e).obj(0,{}),i=new u(r),s=i.str("mode","template");if("template"!==s&&"proposal"!==s)throw new q(j.INVALID_PARAMETER,"Invalid mode.");if("proposal"===s){const e=i.buf("data");if(!e)throw new q(j.TYPE_ERROR,"Missing data parameter.");const t=S.fromRaw(e);if(!t.prevBlock.equals(this.chain.tip.hash))return"inconclusive-not-best-prevblk";try{await this.chain.verifyBlock(t)}catch(e){if("VerifyError"===e.type)return e.reason;throw e}return null}let n=i.u32("maxversion",-1),o=i.array("rules");o&&(n=-1);const a=i.array("capabilities");let h=!1;if(a){let e=!1,t=!1;for(const r of a){if("string"!=typeof r)throw new q(j.TYPE_ERROR,"Invalid capability.");switch(r){case"coinbasetxn":e=!0;break;case"coinbasevalue":t=!0}}if(t=!0,e&&!t){if(0===this.miner.addresses.length)throw new q(j.MISC_ERROR,"No addresses available for coinbase.");h=!0}}if(!this.network.selfConnect){if(0===this.pool.peers.size())throw new q(j.CLIENT_NOT_CONNECTED,"Bitcoin is not connected!");if(!this.chain.synced)throw new q(j.CLIENT_IN_INITIAL_DOWNLOAD,"Bitcoin is downloading blocks...")}const c=i.str("longpollid");return c&&await this.handleLongpoll(c),o||(o=[]),await this.createTemplate(n,h,o)}async createTemplate(e,t,r){const i=await this.locker.lock();try{return await this._createTemplate(e,t,r)}finally{i()}}async _createTemplate(e,t,r){const i=await this.getTemplate(),s=i.witness?1:N.WITNESS_SCALE_FACTOR,n=["time","transactions","prevblock"];e>=2&&n.push("version/force"),t&&(n.push("coinbase"),n.push("coinbase/append"),n.push("generation"));const a=new f;for(let e=0;e<i.items.length;e++){const t=i.items[e];a.set(t.hash,e+1)}const h=[];for(let e=0;e<i.items.length;e++){const t=i.items[e],r=t.tx,n=[];for(let t=0;t<r.inputs.length;t++){const i=r.inputs[t],s=a.get(i.prevout.hash);null!=s&&-1===n.indexOf(s)&&(o(s<e+1),n.push(s))}h.push({data:r.toRaw().toString("hex"),txid:r.txid(),hash:r.wtxid(),depends:n,fee:t.fee,sigops:t.sigops/s|0,weight:r.getWeight()})}this.chain.options.bip91&&(r.push("segwit"),r.push("segsignal")),this.chain.options.bip148&&r.push("segwit");let c=i.version;const u={},l=[];for(const e of this.network.deploys){const t=await this.chain.getState(this.chain.tip,e);let i=e.name;switch(t){case _.thresholdStates.DEFINED:case _.thresholdStates.FAILED:break;case _.thresholdStates.LOCKED_IN:c|=1<<e.bit;case _.thresholdStates.STARTED:e.force||(-1===r.indexOf(i)&&(c&=~(1<<e.bit)),e.required&&(i="!"+i)),u[i]=e.bit;break;case _.thresholdStates.ACTIVE:if(!e.force&&e.required){if(-1===r.indexOf(i))throw new q(j.INVALID_PARAMETER,`Client must support ${i}.`);i="!"+i}l.push(i);break;default:o(!1,"Bad state.")}}const d={capabilities:["proposal"],mutable:n,version:c>>>=0,rules:l,vbavailable:u,vbrequired:0,height:i.height,previousblockhash:g.revHex(i.prevBlock),target:g.revHex(i.target),bits:K(i.bits),noncerange:"00000000ffffffff",curtime:i.time,mintime:i.mtp+1,maxtime:i.time+7200,expires:i.time+7200,sigoplimit:N.MAX_BLOCK_SIGOPS_COST/s|0,sizelimit:N.MAX_BLOCK_SIZE,weightlimit:undefined,longpollid:this.chain.tip.rhash()+K(this.totalTX()),submitold:!1,coinbaseaux:{flags:i.coinbaseFlags.toString("hex")},coinbasevalue:undefined,coinbasetxn:undefined,default_witness_commitment:undefined,transactions:h};if(i.witness&&(d.sizelimit=N.MAX_RAW_BLOCK_SIZE,d.weightlimit=N.MAX_BLOCK_WEIGHT),t){const e=i.toCoinbase(),t=e.inputs[0];if(t.script.pop(),t.script.compile(),i.witness){const r=e.outputs.pop();o(r.script.isCommitment()),t.witness.clear()}e.refresh(),d.coinbasetxn={data:e.toRaw().toString("hex"),txid:e.txid(),hash:e.wtxid(),depends:[],fee:0,sigops:e.getSigopsCost()/s|0,weight:e.getWeight()}}else d.coinbasevalue=i.getReward();return-1!==r.indexOf("segwit")&&(d.default_witness_commitment=i.getWitnessScript().toJSON()),d}async getMiningInfo(e,t){if(t||0!==e.length)throw new q(j.MISC_ERROR,"getmininginfo");const r=this.attempt;let i=0,s=0,n=0,o=0;if(r){s=r.weight,n=r.items.length+1,o=r.getDifficulty(),i=1e3;for(const e of r.items)i+=e.tx.getBaseSize()}return{blocks:this.chain.height,currentblocksize:i,currentblockweight:s,currentblocktx:n,difficulty:o,errors:"",genproclimit:this.procLimit,networkhashps:await this.getHashRate(120),pooledtx:this.totalTX(),testnet:this.network!==R.main,chain:"testnet"!==this.network.type?this.network.type:"test",generate:this.mining}}async getNetworkHashPS(e,t){if(t||e.length>2)throw new q(j.MISC_ERROR,"getnetworkhashps ( blocks height )");const r=new u(e),i=r.u32(0,120),s=r.u32(1);return await this.getHashRate(i,s)}async prioritiseTransaction(e,t){if(t||3!==e.length)throw new q(j.MISC_ERROR,"prioritisetransaction <txid> <priority delta> <fee delta>");const r=new u(e),i=r.brhash(0),s=r.i64(1),n=r.i64(2);if(!this.mempool)throw new q(j.MISC_ERROR,"No mempool available.");if(!i)throw new q(j.TYPE_ERROR,"Invalid TXID");if(null==s||null==n)throw new q(j.TYPE_ERROR,"Invalid fee or priority.");const o=this.mempool.getEntry(i);if(!o)throw new q(j.MISC_ERROR,"Transaction not in mempool.");return this.mempool.prioritise(o,s,n),!0}async verifyBlock(e,t){if(t||1!==e.length)throw new q(j.MISC_ERROR,'verifyblock "block-hex"');const r=new u(e).buf(0);if(!r)throw new q(j.TYPE_ERROR,"Invalid block hex.");if(this.chain.options.spv)throw new q(j.MISC_ERROR,"Cannot verify block in SPV mode.");const i=S.fromRaw(r);try{await this.chain.verifyBlock(i)}catch(e){if("VerifyError"===e.type)return e.reason;throw e}return null}async getGenerate(e,t){if(t||0!==e.length)throw new q(j.MISC_ERROR,"getgenerate");return this.mining}async setGenerate(e,t){if(t||e.length<1||e.length>2)throw new q(j.MISC_ERROR,"setgenerate mine ( proclimit )");const r=new u(e),i=r.bool(0,!1),s=r.u32(1,0);if(i&&0===this.miner.addresses.length)throw new q(j.MISC_ERROR,"No addresses available for coinbase.");return this.mining=i,this.procLimit=s,i?(this.miner.cpu.start(),!0):(await this.miner.cpu.stop(),!1)}async generate(e,t){if(t||e.length<1||e.length>2)throw new q(j.MISC_ERROR,"generate numblocks ( maxtries )");const r=new u(e),i=r.u32(0,1),s=r.u32(1);if(0===this.miner.addresses.length)throw new q(j.MISC_ERROR,"No addresses available for coinbase.");return await this.mineBlocks(i,null,s)}async generateToAddress(e,t){if(t||e.length<2||e.length>3)throw new q(j.MISC_ERROR,"generatetoaddress numblocks address ( maxtries )");const r=new u(e),i=r.u32(0,1),s=r.str(1,""),n=r.u32(2),o=L(s,this.network);return await this.mineBlocks(i,o,n)}async createRawTransaction(e,t){if(t||e.length<2||e.length>3)throw new q(j.MISC_ERROR,'createrawtransaction [{"txid":"id","vout":n},...] {"address":amount,"data":"hex",...} ( locktime )');const r=new u(e),i=r.array(0),s=r.obj(1),n=r.u32(2);if(!i||!s)throw new q(j.TYPE_ERROR,"Invalid parameters (inputs and sendTo).");const o=new x;null!=n&&(o.locktime=n);for(const e of i){const t=new u(e),r=t.brhash("txid"),i=t.u32("vout");let s=t.u32("sequence",4294967295);if(o.locktime&&s--,!r||null==i)throw new q(j.TYPE_ERROR,"Invalid outpoint.");const n=new k;n.prevout.hash=r,n.prevout.index=i,n.sequence=s,o.inputs.push(n)}const a=new u(s),h=new Set;for(const e of Object.keys(s)){if("data"===e){const t=a.buf(e);if(!t)throw new q(j.TYPE_ERROR,"Invalid nulldata..");const r=new P;r.value=0,r.script.fromNulldata(t),o.outputs.push(r);continue}const t=L(e,this.network),r=t.toString(this.network);if(h.has(r))throw new q(j.INVALID_PARAMETER,"Duplicate address");h.add(r);const i=a.ufixed(e,8);if(null==i)throw new q(j.TYPE_ERROR,"Invalid output value.");const s=new P;s.value=i,s.script.fromAddress(t),o.outputs.push(s)}return o.toRaw().toString("hex")}async decodeRawTransaction(e,t){if(t||1!==e.length)throw new q(j.MISC_ERROR,'decoderawtransaction "hexstring"');const r=new u(e).buf(0);if(!r)throw new q(j.TYPE_ERROR,"Invalid hex string.");const i=B.fromRaw(r);return this.txToJSON(i)}async decodeScript(e,t){if(t||1!==e.length)throw new q(j.MISC_ERROR,'decodescript "hex"');const r=new u(e).buf(0);let i=new v;r&&(i=v.fromRaw(r));const s=E.fromScripthash(i.hash160()),n=this.scriptToJSON(i);return n.p2sh=s.toString(this.network),n}async getRawTransaction(e,t){if(t||e.length<1||e.length>2)throw new q(j.MISC_ERROR,'getrawtransaction "txid" ( verbose )');const r=new u(e),i=r.brhash(0),s=r.bool(1,!1);if(!i)throw new q(j.TYPE_ERROR,"Invalid TXID.");const n=await this.node.getMeta(i);if(!n)throw new q(j.MISC_ERROR,"Transaction not found.");const o=n.tx;if(!s)return o.toRaw().toString("hex");let a;n.block&&(a=await this.chain.getEntry(n.block));const h=this.txToJSON(o,a);return h.time=n.mtime,h.hex=o.toRaw().toString("hex"),h}async sendRawTransaction(e,t){if(t||e.length<1||e.length>2)throw new q(j.MISC_ERROR,'sendrawtransaction "hexstring" ( allowhighfees )');const r=new u(e).buf(0);if(!r)throw new q(j.TYPE_ERROR,"Invalid hex string.");const i=B.fromRaw(r);return this.node.relay(i),i.txid()}async signRawTransaction(e,t){if(t||e.length<1||e.length>4)throw new q(j.MISC_ERROR,'signrawtransaction "hexstring" ( [{"txid":"id","vout":n,"scriptPubKey":"hex",redeemScript":"hex"},...] ["privatekey1",...] sighashtype )');const r=new u(e),i=r.buf(0),s=r.array(1),n=r.array(2),o=r.str(3);if(!i)throw new q(j.TYPE_ERROR,"Invalid hex string.");if(!this.mempool)throw new q(j.MISC_ERROR,"No mempool available.");const a=x.fromRaw(i);a.view=await this.mempool.getSpentView(a);const h=new f,c=[];if(n){const e=new u(n);for(let t=0;t<n.length;t++){const r=z(e.str(t,""),this.network);h.set(r.getPublicKey(),r),c.push(r)}}if(s)for(const e of s){const t=new u(e),r=t.brhash("txid"),i=t.u32("vout"),s=t.buf("scriptPubKey"),n=t.ufixed("amount",8),o=t.buf("redeemScript");if(!r||null==i||!s||null==n)throw new q(j.INVALID_PARAMETER,"Invalid UTXO.");const f=new M(r,i),l=v.fromRaw(s),d=P.fromScript(l,n);if(a.view.addOutput(f,d),0===c.length||!o)continue;if(!l.isScripthash()&&!l.isWitnessScripthash())continue;if(!o)throw new q(j.INVALID_PARAMETER,"P2SH requires redeem script.");const p=v.fromRaw(o);for(const e of p.code){if(!e.data)continue;const t=h.get(e.data);if(t){t.script=p,t.witness=l.isWitnessScripthash(),t.refresh();break}}}let l=v.hashType.ALL;if(o){const e=o.split("|");if(e.length<1||e.length>2)throw new q(j.INVALID_PARAMETER,"Invalid sighash type.");if(null==(l=v.hashType[e[0]]))throw new q(j.INVALID_PARAMETER,"Invalid sighash type.");if(2===e.length){if("ANYONECANPAY"!==e[1])throw new q(j.INVALID_PARAMETER,"Invalid sighash type.");l|=v.hashType.ANYONECANPAY}}return await a.signAsync(c,l,this.workers),{hex:a.toRaw().toString("hex"),complete:a.isSigned()}}async createMultisig(e,t){if(t||e.length<2||e.length>2)throw new q(j.MISC_ERROR,'createmultisig nrequired ["key",...]');const r=new u(e),i=r.array(1,[]),s=r.u32(0,0),n=i.length;if(s<1||n<s||n>16)throw new q(j.INVALID_PARAMETER,"Invalid m and n values.");const o=new u(i);for(let e=0;e<i.length;e++){const t=o.buf(e);if(!t)throw new q(j.TYPE_ERROR,"Invalid key.");if(!b.publicKeyVerify(t))throw new q(j.INVALID_ADDRESS_OR_KEY,"Invalid key.");i[e]=t}const a=v.fromMultisig(s,n,i);if(a.getSize()>N.MAX_SCRIPT_PUSH)throw new q(j.VERIFY_ERROR,"Redeem script exceeds size limit.");return{address:a.getAddress().toString(this.network),redeemScript:a.toJSON()}}async createWitnessAddress(e,t){if(t||1!==e.length)throw new q(j.MISC_ERROR,'createwitnessaddress "script"');const r=new u(e).buf(0);if(!r)throw new q(j.TYPE_ERROR,"Invalid script hex.");const i=v.fromRaw(r).forWitness();return{address:i.getAddress().toString(this.network),witnessScript:i.toJSON()}}async validateAddress(e,t){if(t||1!==e.length)throw new q(j.MISC_ERROR,'validateaddress "bitcoinaddress"');const r=new u(e).str(0,"");let i;try{i=E.fromString(r,this.network)}catch(e){return{isvalid:!1}}const s=v.fromAddress(i),n=i.isProgram(),o=s.isScripthash()||s.isWitnessScripthash(),a={isvalid:!0,address:i.toString(this.network),scriptPubKey:s.toJSON(),isscript:o,iswitness:n};return n&&(a.witness_version=i.version,a.witness_program=i.hash.toString("hex")),a}async verifyMessage(e,t){if(t||3!==e.length)throw new q(j.MISC_ERROR,'verifymessage "bitcoinaddress" "signature" "message"');const r=new u(e),i=r.str(0,""),s=r.buf(1,null,"base64"),n=r.str(2);if(!s||!n)throw new q(j.TYPE_ERROR,"Invalid parameters.");const o=L(i,this.network),a=m.recover(n,s);return!!a&&1===p(d.digest(a),o.hash)}async signMessageWithPrivkey(e,t){if(t||2!==e.length)throw new q(j.MISC_ERROR,'signmessagewithprivkey "privkey" "message"');const r=new u(e),i=r.str(0,""),s=r.str(1,""),n=z(i,this.network);return m.sign(s,n).toString("base64")}async estimateFee(e,t){if(t||1!==e.length)throw new q(j.MISC_ERROR,"estimatefee nblocks");const r=new u(e).u32(0,1);if(!this.fees)throw new q(j.MISC_ERROR,"Fee estimation not available.");const i=this.fees.estimateFee(r,!1);return 0===i?-1:w.btc(i,!0)}async estimatePriority(e,t){if(t||1!==e.length)throw new q(j.MISC_ERROR,"estimatepriority nblocks");const r=new u(e).u32(0,1);if(!this.fees)throw new q(j.MISC_ERROR,"Priority estimation not available.");return this.fees.estimatePriority(r,!1)}async estimateSmartFee(e,t){if(t||1!==e.length)throw new q(j.MISC_ERROR,"estimatesmartfee nblocks");const r=new u(e).u32(0,1);if(!this.fees)throw new q(j.MISC_ERROR,"Fee estimation not available.");let i=this.fees.estimateFee(r,!0);return{fee:i=0===i?-1:w.btc(i,!0),blocks:r}}async estimateSmartPriority(e,t){if(t||1!==e.length)throw new q(j.MISC_ERROR,"estimatesmartpriority nblocks");const r=new u(e).u32(0,1);if(!this.fees)throw new q(j.MISC_ERROR,"Priority estimation not available.");return{priority:this.fees.estimatePriority(r,!0),blocks:r}}async invalidateBlock(e,t){if(t||1!==e.length)throw new q(j.MISC_ERROR,'invalidateblock "hash"');const r=new u(e).brhash(0);if(!r)throw new q(j.TYPE_ERROR,"Invalid block hash.");return await this.chain.invalidate(r),null}async reconsiderBlock(e,t){if(t||1!==e.length)throw new q(j.MISC_ERROR,'reconsiderblock "hash"');const r=new u(e).brhash(0);if(!r)throw new q(j.TYPE_ERROR,"Invalid block hash.");return this.chain.removeInvalid(r),null}async setMockTime(e,t){if(t||1!==e.length)throw new q(j.MISC_ERROR,"setmocktime timestamp");const r=new u(e).u32(0);if(null==r)throw new q(j.TYPE_ERROR,"Invalid timestamp.");this.network.time.offset=0;const i=this.network.now()-r;return this.network.time.offset=-i,null}async getMemoryInfo(e,t){if(t||0!==e.length)throw new q(j.MISC_ERROR,"getmemoryinfo");return this.logger.memoryUsage()}async setLogLevel(e,t){if(t||1!==e.length)throw new q(j.MISC_ERROR,'setloglevel "level"');const r=new u(e).str(0,"");return this.logger.setLevel(r),null}async handleLongpoll(e){if(72!==e.length)throw new q(j.INVALID_PARAMETER,"Invalid longpoll ID.");const t=e.slice(0,64),r=parseInt(e.slice(64,72),16);if(r>>>0!==r)throw new q(j.INVALID_PARAMETER,"Invalid longpoll ID.");const i=g.revHex(t);this.chain.tip.hash.equals(i)&&await this.longpoll()}longpoll(){return new Promise((e,t)=>{this.pollers.push({resolve:e,reject:t})})}refreshBlock(){const e=this.pollers;this.attempt=null,this.lastActivity=0,this.merkleMap.clear(),this.nonce1=0,this.nonce2=0,this.pollers=[];for(const t of e)t.resolve()}bindChain(){this.boundChain||(this.boundChain=!0,this.node.on("connect",()=>{this.attempt&&this.refreshBlock()}),this.mempool&&this.node.on("tx",()=>{this.attempt&&g.now()-this.lastActivity>10&&this.refreshBlock()}))}async getTemplate(){this.bindChain();let e=this.attempt;return e?this.miner.updateTime(e):(e=await this.miner.createBlock(),this.attempt=e,this.lastActivity=g.now()),e}async updateWork(){this.bindChain();let e=this.attempt;if(e){if(e.address.isNull())throw new q(j.MISC_ERROR,"No addresses available for coinbase.");this.miner.updateTime(e),4294967296==++this.nonce2&&(this.nonce2=0,this.nonce1++);const t=this.nonce1,r=this.nonce2,i=e.getRoot(t,r);return this.merkleMap.set(i,[t,r]),e}if(0===this.miner.addresses.length)throw new q(j.MISC_ERROR,"No addresses available for coinbase.");e=await this.miner.createBlock();const t=this.nonce1,r=this.nonce2,i=e.getRoot(t,r);return this.attempt=e,this.lastActivity=g.now(),this.merkleMap.set(i,[t,r]),e}async addBlock(e){const t=await this.locker.lock(),r=await this.chain.locker.lock();try{return await this._addBlock(e)}finally{r(),t()}}async _addBlock(e){this.logger.info("Handling submitted block: %h.",e.hash());const t=await this.chain.getEntry(e.prevBlock);if(t&&(await this.chain.getDeployments(e.time,t)).hasWitness()&&e.getCommitmentHash()){const t=e.txs[0],r=t.inputs[0];t.hasWitness()||(this.logger.warning("Submitted block had no witness nonce."),this.logger.debug(t),r.witness.push(N.ZERO_HASH),r.witness.compile(),t.refresh(),e.refresh())}let r;try{r=await this.chain._add(e)}catch(t){if("VerifyError"===t.type)return this.logger.warning("RPC block rejected: %h (%s).",e.hash(),t.reason),`rejected: ${t.reason}`;throw t}return r?null:(this.logger.warning("RPC block rejected: %h (bad-prevblk).",e.hash()),"rejected: bad-prevblk")}totalTX(){return this.mempool?this.mempool.map.size:0}getSoftforks(){return[U("bip34",2,this.chain.state.hasBIP34()),U("bip66",3,this.chain.state.hasBIP66()),U("bip65",4,this.chain.state.hasCLTV())]}async getBIP9Softforks(){const e=this.chain.tip,t={};for(const r of this.network.deploys){let i;switch(await this.chain.getState(e,r)){case _.thresholdStates.DEFINED:i="defined";break;case _.thresholdStates.STARTED:i="started";break;case _.thresholdStates.LOCKED_IN:i="locked_in";break;case _.thresholdStates.ACTIVE:i="active";break;case _.thresholdStates.FAILED:i="failed";break;default:o(!1,"Bad state.")}t[r.name]={status:i,bit:r.bit,startTime:r.startTime,timeout:r.timeout}}return t}async getHashRate(e,t){let r=this.chain.tip;if(null!=t&&(r=await this.chain.getEntry(t)),!r)return 0;o("number"==typeof e),o(e>=0),0===e&&(e=r.height%this.network.pow.retargetInterval+1),e>r.height&&(e=r.height);let i=r.time,s=i,n=r;for(let t=0;t<e;t++){if(!(n=await this.chain.getPrevious(n)))throw new q(j.DATABASE_ERROR,"Not found.");i=Math.min(n.time,i),s=Math.max(n.time,s)}const a=s-i;if(0===a)return 0;const h=r.chainwork.sub(n.chainwork);return Number(h.toString())/a}async mineBlocks(e,t,r){const i=await this.locker.lock();try{return await this._mineBlocks(e,t,r)}finally{i()}}async _mineBlocks(e,t,r){const i=[];for(let r=0;r<e;r++){const e=await this.miner.mineBlock(null,t),r=await this.chain.add(e);o(r),i.push(r.rhash())}return i}async findFork(e){for(;e;){if(await this.chain.isMainChain(e))return e;e=await this.chain.getPrevious(e)}throw new Error("Fork not found.")}txToJSON(e,t){let r=-1,i=0,s=null,n=0;t&&(r=t.height,i=t.time,s=t.rhash(),n=this.chain.height-r+1);const o=[];for(const t of e.inputs){const r={coinbase:undefined,txid:undefined,scriptSig:undefined,txinwitness:undefined,sequence:t.sequence};e.isCoinbase()?r.coinbase=t.script.toJSON():(r.txid=t.prevout.txid(),r.vout=t.prevout.index,r.scriptSig={asm:t.script.toASM(),hex:t.script.toJSON()}),t.witness.items.length>0&&(r.txinwitness=t.witness.items.map(e=>e.toString("hex"))),o.push(r)}const a=[];for(let t=0;t<e.outputs.length;t++){const r=e.outputs[t];a.push({value:w.btc(r.value,!0),n:t,scriptPubKey:this.scriptToJSON(r.script,!0)})}return{txid:e.txid(),hash:e.wtxid(),size:e.getSize(),vsize:e.getVirtualSize(),version:e.version,locktime:e.locktime,vin:o,vout:a,blockhash:s,confirmations:n,time:i,blocktime:i,hex:undefined}}scriptToJSON(e,t){const r=e.getType(),i={asm:e.toASM(),hex:undefined,type:v.typesByVal[r],reqSigs:1,addresses:[],p2sh:undefined};t&&(i.hex=e.toJSON());const[s]=e.getMultisig();-1!==s&&(i.reqSigs=s);const n=e.getAddress();if(n){const e=n.toString(this.network);i.addresses.push(e)}return i}async headerToJSON(e){const t=await this.chain.getMedianTime(e),r=await this.chain.getNextHash(e.hash);let i=-1;return await this.chain.isMainChain(e)&&(i=this.chain.height-e.height+1),{hash:e.rhash(),confirmations:i,height:e.height,version:e.version,versionHex:K(e.version),merkleroot:g.revHex(e.merkleRoot),time:e.time,mediantime:t,nonce:e.nonce,bits:K(e.bits),difficulty:V(e.bits),chainwork:e.chainwork.toString("hex",64),previousblockhash:e.prevBlock.equals(N.ZERO_HASH)?null:g.revHex(e.prevBlock),nextblockhash:r?g.revHex(r):null}}async blockToJSON(e,t,r){const i=await this.chain.getMedianTime(e),s=await this.chain.getNextHash(e.hash);let n=-1;await this.chain.isMainChain(e)&&(n=this.chain.height-e.height+1);const o=[];for(const i of t.txs)if(r){const t=this.txToJSON(i,e);o.push(t)}else o.push(i.txid());return{hash:e.rhash(),confirmations:n,strippedsize:t.getBaseSize(),size:t.getSize(),weight:t.getWeight(),height:e.height,version:e.version,versionHex:K(e.version),merkleroot:g.revHex(e.merkleRoot),coinbase:t.txs[0].inputs[0].script.toJSON(),tx:o,time:e.time,mediantime:i,nonce:e.nonce,bits:K(e.bits),difficulty:V(e.bits),chainwork:e.chainwork.toString("hex",64),nTx:o.length,previousblockhash:e.prevBlock.equals(N.ZERO_HASH)?null:g.revHex(e.prevBlock),nextblockhash:s?g.revHex(s):null}}entryToJSON(e){return{size:e.size,fee:w.btc(e.deltaFee,!0),modifiedfee:0,time:e.time,height:e.height,startingpriority:e.priority,currentpriority:e.getPriority(this.chain.height),descendantcount:this.mempool.countDescendants(e),descendantsize:e.descSize,descendantfees:e.descFee,ancestorcount:this.mempool.countAncestors(e),ancestorsize:0,ancestorfees:0,depends:this.mempool.getDepends(e.tx).map(g.revHex)}}}}],["bcoin","/lib/blockstore/index.js",function(e,t,r,i,s,n){"use strict";const{join:o}=__browser_require__(195,r),a=__browser_require__(338,r),h=__browser_require__(339,r),c=__browser_require__(342,r);e.create=(e=>{if(e.memory)return new h({network:e.network,logger:e.logger,cacheSize:e.cacheSize,memory:e.memory});const t=o(e.prefix,"blocks");return new c({network:e.network,logger:e.logger,location:t,cacheSize:e.cacheSize})}),e.AbstractBlockStore=a,e.FileBlockStore=c,e.LevelBlockStore=h}],["bcoin","/lib/blockstore/abstract.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(198,r);r.exports=class{constructor(e){this.options=e||{},null!=this.options.logger?this.logger=this.options.logger.context("blockstore"):this.logger=o.global.context("blockstore")}async ensure(){throw new Error("Abstract method.")}async open(){throw new Error("Abstract method.")}async close(){throw new Error("Abstract method.")}async writeMerkle(e,t){throw new Error("Abstract method.")}async writeUndo(e,t){throw new Error("Abstract method.")}async writeFilter(e,t){throw new Error("Abstract method.")}async write(e,t){throw new Error("Abstract method.")}async readMerkle(e){throw new Error("Abstract method.")}async readFilter(e){throw new Error("Abstract method.")}async readFilterHeader(e){throw new Error("Abstract method.")}async readUndo(e){throw new Error("Abstract method.")}async read(e,t,r){throw new Error("Abstract method.")}async pruneMerkle(e){throw new Error("Abstract method.")}async pruneUndo(e){throw new Error("Abstract method.")}async pruneFilter(e){throw new Error("Abstract method.")}async prune(e){throw new Error("Abstract method.")}async hasMerkle(e){throw new Error("Abstract method.")}async hasUndo(e){throw new Error("Abstract method.")}async hasFilter(e){throw new Error("Abstract method.")}async has(e){throw new Error("Abstract method.")}}}],["bcoin","/lib/blockstore/level.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(176,r),a=__browser_require__(252,r),h=__browser_require__(338,r),c=__browser_require__(340,r),{types:u}=__browser_require__(341,r);r.exports=class extends h{constructor(e){super(e),this.location=e.location,this.db=o.create({location:this.location,cacheSize:e.cacheSize,compression:!1,memory:e.memory})}async ensure(){return a.mkdirp(this.location)}async open(){this.logger.info("Opening LevelBlockStore..."),await this.db.open(),await this.db.verify(c.V.encode(),"levelblockstore",0)}async close(){this.logger.info("Closing LevelBlockStore..."),await this.db.close()}async writeMerkle(e,t){return this.db.put(c.b.encode(u.MERKLE,e),t)}async writeUndo(e,t){return this.db.put(c.b.encode(u.UNDO,e),t)}async write(e,t){return this.db.put(c.b.encode(u.BLOCK,e),t)}async writeFilter(e,t){return this.db.put(c.b.encode(u.FILTER,e),t)}async readMerkle(e){return this.db.get(c.b.encode(u.MERKLE,e))}async readUndo(e){return this.db.get(c.b.encode(u.UNDO,e))}async readFilter(e){return this.db.get(c.b.encode(u.FILTER,e))}async readFilterHeader(e){const t=await this.db.get(c.b.encode(u.FILTER,e));return t?t.slice(0,32):null}async read(e,t,r){let i=await this.db.get(c.b.encode(u.BLOCK,e));if(t){if(t+r>i.length)throw new Error("Out-of-bounds read.");i=i.slice(t,t+r)}return i}async pruneMerkle(e){return!!await this.hasMerkle(e)&&(await this.db.del(c.b.encode(u.MERKLE,e)),!0)}async pruneUndo(e){return!!await this.hasUndo(e)&&(await this.db.del(c.b.encode(u.UNDO,e)),!0)}async pruneFilter(e){return!!await this.hasFilter(e)&&(await this.db.del(c.b.encode(u.FILTER,e)),!0)}async prune(e){return!!await this.has(e)&&(await this.db.del(c.b.encode(u.BLOCK,e)),!0)}async hasMerkle(e){return this.db.has(c.b.encode(u.MERKLE,e))}async hasUndo(e){return this.db.has(c.b.encode(u.UNDO,e))}async hasFilter(e){return this.db.has(c.b.encode(u.FILTER,e))}async has(e){return this.db.has(c.b.encode(u.BLOCK,e))}}}],["bcoin","/lib/blockstore/layout.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(176,r),a={V:o.key("V"),F:o.key("F",["uint32"]),f:o.key("f",["uint32","uint32"]),b:o.key("b",["uint32","hash256"])};r.exports=a}],["bcoin","/lib/blockstore/common.js",function(e,t,r,i,s,n){"use strict";e.types={BLOCK:1,UNDO:2,FILTER:3,MERKLE:4},e.prefixes={1:"blk",2:"blu",3:"blf",4:"blm"}}],["bcoin","/lib/blockstore/file.js",function(e,t,r,i,s,n){"use strict";const{isAbsolute:o,resolve:a,join:h}=__browser_require__(195,r),c=__browser_require__(176,r),u=__browser_require__(15,r),f=__browser_require__(252,r),l=__browser_require__(24,r),d=__browser_require__(33,r),p=__browser_require__(14,r),b=__browser_require__(338,r),{BlockRecord:g,FileRecord:m}=__browser_require__(343,r),_=__browser_require__(340,r),{types:w,prefixes:y}=__browser_require__(341,r);r.exports=class extends b{constructor(e){super(e),u(o(e.location),"Location not absolute."),this.location=e.location,this.indexLocation=a(this.location,"./index"),this.db=c.create({location:this.indexLocation,cacheSize:e.cacheSize,compression:!1}),this.maxFileLength=e.maxFileLength||134217728,u(Number.isSafeInteger(this.maxFileLength),"Invalid max file length."),this.network=p.primary,null!=e.network&&(this.network=p.get(e.network)),this.writing=Object.create(null)}async check(e){const t=y[e],r=new RegExp(`^${t}(\\d{5})\\.dat$`),i=(await f.readdir(this.location)).filter(e=>r.test(e)).map(e=>parseInt(e.match(r)[1]));let s=!1;for(const t of i)if(!await this.db.get(_.f.encode(e,t))){s=!0;break}return{missing:s,filenos:i}}async _index(e){const{missing:t,filenos:r}=await this.check(e);if(t){this.logger.info("Indexing block type %d...",e);for(const t of r){const r=this.db.batch(),i=this.filepath(e,t),s=await f.readFile(i),n=l.read(s);let o=null,a=0;for(;n.left()>=4;){if((o=n.readU32())!==this.network.magic){n.seek(-3);continue}let s=null,h=0,c=0;try{c=n.readU32(),e===w.BLOCK||e===w.MERKLE?(h=n.offset,s=d.digest(n.readBytes(80,!0)),n.seek(c-80)):(s=n.readHash(),h=n.offset,n.seek(c))}catch(e){this.logger.warning("Unknown block in file: %s, reason: %s",i,e.message);continue}const u=new g({file:t,position:h,length:c});a+=1,r.put(_.b.encode(e,s),u.toRaw())}const h=new m({blocks:a,used:n.offset,length:this.maxFileLength});r.put(_.f.encode(e,t),h.toRaw()),await r.write(),this.logger.info("Indexed %d blocks (file=%s).",a,i)}}}async index(){await this._index(w.BLOCK),await this._index(w.MERKLE),await this._index(w.UNDO)}async ensure(){return f.mkdirp(this.indexLocation)}async open(){this.logger.info("Opening FileBlockStore..."),await this.db.open(),await this.db.verify(_.V.encode(),"fileblockstore",0),await this.index()}async close(){this.logger.info("Closing FileBlockStore..."),await this.db.close()}filepath(e,t){let r=t.toString(10);if(r.length>5)throw new Error("File number too large.");for(;r.length<5;)r=`0${r}`;let i=null;const s=y[e];if(!s)throw new Error("Unknown file prefix.");return i=h(this.location,`${s}${r}.dat`)}async allocate(e,t){if(t>this.maxFileLength)throw new Error("Block length above max file length.");let r=0,i=null,s=null;const n=await this.db.get(_.F.encode(e));n&&(r=l.readU32(n,0)),s=this.filepath(e,r);const o=await this.db.get(_.f.encode(e,r));let a=!1;if(o?i=m.fromRaw(o):(a=!0,i=new m({blocks:0,used:0,length:this.maxFileLength})),i.used+t>i.length&&(r+=1,s=this.filepath(e,r),a=!0,i=new m({blocks:0,used:0,length:this.maxFileLength})),a){const e=await f.open(s,"w");await f.close(e)}return{fileno:r,filerecord:i,filepath:s}}async writeMerkle(e,t){return this._write(w.MERKLE,e,t)}async writeUndo(e,t){return this._write(w.UNDO,e,t)}async write(e,t){return this._write(w.BLOCK,e,t)}async writeFilter(e,t){return this._write(w.FILTER,e,t)}async _write(e,t,r){if(this.writing[e])throw new Error("Already writing.");if(this.writing[e]=!0,await this.db.has(_.b.encode(e,t)))return this.writing[e]=!1,!1;let i=8;e!==w.BLOCK&&e!==w.MERKLE&&(i+=32);const s=r.length,n=r.length+i,o=l.write(i);o.writeU32(this.network.magic),o.writeU32(s),e!==w.BLOCK&&e!==w.MERKLE&&o.writeHash(t);const a=o.render(),{fileno:h,filerecord:c,filepath:u}=await this.allocate(e,n),d=c.used,p=c.used+i,b=await f.open(u,"r+");let m=0,y=0;try{m=await f.write(b,a,0,i,d),y=await f.write(b,r,0,s,p)}finally{await f.close(b)}if(m!==i)throw this.writing[e]=!1,new Error("Could not write block magic.");if(y!==s)throw this.writing[e]=!1,new Error("Could not write block.");c.blocks+=1,c.used+=n;const v=this.db.batch(),E=new g({file:h,position:p,length:s});v.put(_.b.encode(e,t),E.toRaw()),v.put(_.f.encode(e,h),c.toRaw());const S=l.write(4).writeU32(h).render();return v.put(_.F.encode(e),S),await v.write(),this.writing[e]=!1,!0}async readMerkle(e){return this._read(w.MERKLE,e)}async readUndo(e){return this._read(w.UNDO,e)}async read(e,t,r){return this._read(w.BLOCK,e,t,r)}async readFilter(e){return this._read(w.FILTER,e)}async readFilterHeader(e){return this._read(w.FILTER,e,0,32)}async _read(e,t,r,i){const s=await this.db.get(_.b.encode(e,t));if(!s)return null;const n=g.fromRaw(s),o=this.filepath(e,n.file);let a=n.position;if(r&&(a+=r),!i&&r>0&&(i=n.length-r),i||(i=n.length),r+i>n.length)throw new Error("Out-of-bounds read.");const h=Buffer.alloc(i),c=await f.open(o,"r");let u=0;try{u=await f.read(c,h,0,i,a)}finally{await f.close(c)}if(u!==i)throw new Error("Wrong number of bytes read.");return h}async pruneMerkle(e){return this._prune(w.MERKLE,e)}async pruneUndo(e){return this._prune(w.UNDO,e)}async prune(e){return this._prune(w.BLOCK,e)}async pruneFilter(e){return this._prune(w.FILTER,e)}async _prune(e,t){const r=await this.db.get(_.b.encode(e,t));if(!r)return!1;const i=g.fromRaw(r),s=await this.db.get(_.f.encode(e,i.file));if(!s)return!1;const n=m.fromRaw(s);n.blocks-=1;const o=this.db.batch();return 0===n.blocks?o.del(_.f.encode(e,i.file)):o.put(_.f.encode(e,i.file),n.toRaw()),o.del(_.b.encode(e,t)),await o.write(),0===n.blocks&&await f.unlink(this.filepath(e,i.file)),!0}async hasMerkle(e){return await this.db.has(_.b.encode(w.MERKLE,e))}async hasUndo(e){return await this.db.has(_.b.encode(w.UNDO,e))}async hasFilter(e){return await this.db.has(_.b.encode(w.FILTER,e))}async has(e){return await this.db.has(_.b.encode(w.BLOCK,e))}}}],["bcoin","/lib/blockstore/records.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r);e.BlockRecord=class{constructor(e={}){this.file=e.file||0,this.position=e.position||0,this.length=e.length||0,o(this.file>>>0===this.file),o(this.position>>>0===this.position),o(this.length>>>0===this.length)}fromRaw(e){const t=a.read(e);return this.file=t.readU32(),this.position=t.readU32(),this.length=t.readU32(),this}static fromRaw(e){return(new this).fromRaw(e)}toRaw(){const e=a.write(12);return e.writeU32(this.file),e.writeU32(this.position),e.writeU32(this.length),e.render()}},e.FileRecord=class{constructor(e={}){this.blocks=e.blocks||0,this.used=e.used||0,this.length=e.length||0,o(this.blocks>>>0===this.blocks),o(this.used>>>0===this.used),o(this.length>>>0===this.length)}fromRaw(e){const t=a.read(e);return this.blocks=t.readU32(),this.used=t.readU32(),this.length=t.readU32(),this}static fromRaw(e){return(new this).fromRaw(e)}toRaw(){const e=a.write(12);return e.writeU32(this.blocks),e.writeU32(this.used),e.writeU32(this.length),e.render()}},r.exports=e}],["bcoin","/lib/indexer/filterindexer.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(176,r),a=__browser_require__(15,r),h=__browser_require__(251,r),c=__browser_require__(17,r),u=__browser_require__(345,r);r.exports=class extends h{constructor(e){super("filter",e),this.db=o.create(this.options)}async saveGenesis(){const e=this.network.genesis.prevBlock,t=new u;t.header=c.ZERO_HASH,await this.blocks.writeFilter(e,t.toRaw()),await super.saveGenesis()}async indexBlock(e,t,r){const i=t.hash(),s=await this.getFilterHeader(t.prevBlock),n=t.toFilter(r),o=new u;o.header=n.header(s),o.filter=n.toRaw(),await this.blocks.writeFilter(i,o.toRaw())}async pruneBlock(e){await this.blocks.pruneFilter(e.hash)}async getFilter(e){a(e);const t=await this.blocks.readFilter(e);return t?u.fromRaw(t):null}async getFilterHeader(e){return a(e),this.blocks.readFilterHeader(e)}}}],["bcoin","/lib/primitives/filter.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(20,r),c=__browser_require__(17,r),{inspectSymbol:u}=__browser_require__(21,r),f=Buffer.alloc(0);class l{constructor(e){this.header=c.ZERO_HASH,this.filter=f,e&&this.fromOptions(e)}fromOptions(e){return o(e,"Filter data is required."),o(null!=e.header&&!0===e.header._isBuffer),o(null!=e.filter&&!0===e.filter._isBuffer),this.header=e.header,this.filter=e.filter,this}static fromOptions(e){return(new this).fromOptions(e)}toWriter(e){return e.writeHash(this.header),e.writeBytes(this.filter),e}getSize(){let e=0;return e+=32,e+=this.filter.length}toRaw(){const e=this.getSize();return this.toWriter(a.write(e)).render()}fromReader(e){return this.header=e.readHash(),this.filter=e.readBytes(e.getSize()-e.offset),this}fromRaw(e){return this.fromReader(a.read(e))}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e){return(new this).fromRaw(e)}fromJSON(e){return o(e,"Filter data is required."),o("string"==typeof e.filter,"Filter must be a string."),o("string"==typeof e.header,"Header must be a string."),this.filter=Buffer.from(e.filter),this.header=Buffer.from(e.header),this}toJSON(){return{filter:this.filter.toString("hex"),header:h.revHex(this.header)}}static fromJSON(e){return(new this).fromJSON(e)}[u](){return`<Filter: ${this.filter.toString("hex")}>`}static isFilter(e){return e instanceof l}}r.exports=l}],["bcoin","/lib/node/spvnode.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(194,r),h=__browser_require__(306,r),c=__browser_require__(313,r),u=__browser_require__(325,r),f=__browser_require__(336,r);r.exports=class extends c{constructor(e){super("bcoin","bcoin.conf","debug.log",e),this.opened=!1,this.spv=!0,this.chain=new a({network:this.network,logger:this.logger,prefix:this.config.prefix,memory:this.memory,maxFiles:this.config.uint("max-files"),cacheSize:this.config.mb("cache-size"),entryCache:this.config.uint("entry-cache"),forceFlags:this.config.bool("force-flags"),checkpoints:this.config.bool("checkpoints"),bip91:this.config.bool("bip91"),bip148:this.config.bool("bip148"),spv:!0}),this.pool=new h({network:this.network,logger:this.logger,chain:this.chain,prefix:this.config.prefix,proxy:this.config.str("proxy"),onion:this.config.bool("onion"),upnp:this.config.bool("upnp"),seeds:this.config.array("seeds"),nodes:this.config.array("nodes"),only:this.config.array("only"),maxOutbound:this.config.uint("max-outbound"),createSocket:this.config.func("create-socket"),memory:this.memory,selfish:!0,listen:!1}),this.rpc=new f(this),this.http=new u({network:this.network,logger:this.logger,node:this,prefix:this.config.prefix,ssl:this.config.bool("ssl"),keyFile:this.config.path("ssl-key"),certFile:this.config.path("ssl-cert"),host:this.config.str("http-host"),port:this.config.uint("http-port"),apiKey:this.config.str("api-key"),noAuth:this.config.bool("no-auth"),cors:this.config.bool("cors")}),this.init()}init(){this.chain.on("error",e=>this.error(e)),this.pool.on("error",e=>this.error(e)),this.http&&this.http.on("error",e=>this.error(e)),this.pool.on("tx",e=>{this.emit("tx",e)}),this.chain.on("block",e=>{this.emit("block",e)}),this.chain.on("connect",async(e,t)=>{this.emit("connect",e,t)}),this.chain.on("disconnect",(e,t)=>{this.emit("disconnect",e,t)}),this.chain.on("reorganize",(e,t)=>{this.emit("reorganize",e,t)}),this.chain.on("reset",e=>{this.emit("reset",e)}),this.loadPlugins()}async open(){o(!this.opened,"SPVNode is already open."),this.opened=!0,await this.handlePreopen(),await this.chain.open(),await this.pool.open(),await this.openPlugins(),await this.http.open(),await this.handleOpen(),this.logger.info("Node is loaded.")}async close(){o(this.opened,"SPVNode is not open."),this.opened=!1,await this.handlePreclose(),await this.http.close(),await this.closePlugins(),await this.pool.close(),await this.chain.close(),await this.handleClose()}async scan(e){throw new Error("Not implemented.")}async broadcast(e){try{await this.pool.broadcast(e)}catch(e){this.emit("error",e)}}sendTX(e){return this.broadcast(e)}relay(e){return this.broadcast(e)}connect(){return this.pool.connect()}disconnect(){return this.pool.disconnect()}startSync(){return this.pool.startSync()}stopSync(){return this.pool.stopSync()}}}],["bcoin","/lib/primitives/index.js",function(e,t,r,i,s,n){"use strict";e.AbstractBlock=__browser_require__(185,r),e.Address=__browser_require__(104,r),e.Block=__browser_require__(183,r),e.Coin=__browser_require__(127,r),e.Headers=__browser_require__(187,r),e.Input=__browser_require__(109,r),e.InvItem=__browser_require__(113,r),e.KeyRing=__browser_require__(167,r),e.MemBlock=__browser_require__(301,r),e.MerkleBlock=__browser_require__(186,r),e.MTX=__browser_require__(126,r),e.Outpoint=__browser_require__(111,r),e.Output=__browser_require__(112,r),e.TX=__browser_require__(85,r),e.TXMeta=__browser_require__(257,r)}],["bcoin","/lib/protocol/index.js",function(e,t,r,i,s,n){"use strict";e.consensus=__browser_require__(17,r),e.errors=__browser_require__(207,r),e.Network=__browser_require__(14,r),e.networks=__browser_require__(9,r),e.policy=__browser_require__(96,r),e.timedata=__browser_require__(18,r)}],["bcoin","/lib/wallet/index.js",function(e,t,r,i,s,n){"use strict";e.Account=__browser_require__(350,r),e.Client=__browser_require__(354,r),e.common=__browser_require__(352,r),e.HTTP=__browser_require__(355,r),e.layout=__browser_require__(356,r),e.MasterKey=__browser_require__(357,r),e.NodeClient=__browser_require__(363,r),e.Path=__browser_require__(351,r),e.plugin=__browser_require__(364,r),e.records=__browser_require__(368,r),e.RPC=__browser_require__(370,r),e.Node=__browser_require__(371,r),e.TXDB=__browser_require__(367,r),e.WalletDB=__browser_require__(365,r),e.Wallet=__browser_require__(366,r),e.WalletKey=__browser_require__(353,r)}],["bcoin","/lib/wallet/account.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(16,r),c=__browser_require__(351,r),u=__browser_require__(352,r),f=__browser_require__(89,r),l=__browser_require__(353,r),{HDPublicKey:d}=__browser_require__(233,r),{inspectSymbol:p}=__browser_require__(21,r);class b{constructor(e,t){o(e,"Database is required."),this.wdb=e,this.network=e.network,this.wid=0,this.id=null,this.accountIndex=0,this.name=null,this.initialized=!1,this.witness=!0===e.options.witness,this.watchOnly=!1,this.type=b.types.PUBKEYHASH,this.m=1,this.n=1,this.receiveDepth=0,this.changeDepth=0,this.nestedDepth=0,this.lookahead=10,this.accountKey=null,this.keys=[],t&&this.fromOptions(t)}fromOptions(e){if(o(e,"Options are required."),o(e.wid>>>0===e.wid),o(u.isName(e.id),"Bad Wallet ID."),o(d.isHDPublicKey(e.accountKey),"Account key is required."),o(e.accountIndex>>>0===e.accountIndex,"Account index is required."),this.wid=e.wid,this.id=e.id,null!=e.accountIndex&&(o(e.accountIndex>>>0===e.accountIndex),this.accountIndex=e.accountIndex),null!=e.name&&(o(u.isName(e.name),"Bad account name."),this.name=e.name),null!=e.initialized&&(o("boolean"==typeof e.initialized),this.initialized=e.initialized),null!=e.witness&&(o("boolean"==typeof e.witness),this.witness=e.witness),null!=e.watchOnly&&(o("boolean"==typeof e.watchOnly),this.watchOnly=e.watchOnly),null!=e.type&&("string"==typeof e.type?(this.type=b.types[e.type.toUpperCase()],o(null!=this.type)):(o("number"==typeof e.type),this.type=e.type,o(b.typesByVal[this.type]))),null!=e.m&&(o((255&e.m)===e.m),this.m=e.m),null!=e.n&&(o((255&e.n)===e.n),this.n=e.n),null!=e.receiveDepth&&(o(e.receiveDepth>>>0===e.receiveDepth),this.receiveDepth=e.receiveDepth),null!=e.changeDepth&&(o(e.changeDepth>>>0===e.changeDepth),this.changeDepth=e.changeDepth),null!=e.nestedDepth&&(o(e.nestedDepth>>>0===e.nestedDepth),this.nestedDepth=e.nestedDepth),null!=e.lookahead&&(o(e.lookahead>>>0===e.lookahead),o(e.lookahead>=0),o(e.lookahead<=b.MAX_LOOKAHEAD),this.lookahead=e.lookahead),this.accountKey=e.accountKey,this.n>1&&(this.type=b.types.MULTISIG),this.name||(this.name=this.accountIndex.toString(10)),this.m<1||this.m>this.n)throw new Error("m ranges between 1 and n");if(e.keys){o(Array.isArray(e.keys));for(const t of e.keys)this.pushKey(t)}return this}static fromOptions(e,t){return new this(e).fromOptions(t)}async init(e){if(this.keys.length!==this.n-1)return o(!this.initialized),void this.save(e);o(0===this.receiveDepth),o(0===this.changeDepth),o(0===this.nestedDepth),this.initialized=!0,await this.initDepth(e)}pushKey(e){if("string"==typeof e&&(e=d.fromBase58(e,this.network)),!d.isHDPublicKey(e))throw new Error("Must add HD keys to wallet.");if(!e.isAccount())throw new Error("Must add HD account keys to BIP44 wallet.");if(this.type!==b.types.MULTISIG)throw new Error("Cannot add keys to non-multisig wallet.");if(e.equals(this.accountKey))throw new Error("Cannot add own key.");if(-1===h.insert(this.keys,e,g,!0))return!1;if(this.keys.length>this.n-1)throw h.remove(this.keys,e,g),new Error("Cannot add more keys.");return!0}spliceKey(e){if("string"==typeof e&&(e=d.fromBase58(e,this.network)),!d.isHDPublicKey(e))throw new Error("Must add HD keys to wallet.");if(!e.isAccount())throw new Error("Must add HD account keys to BIP44 wallet.");if(this.type!==b.types.MULTISIG)throw new Error("Cannot remove keys from non-multisig wallet.");if(this.keys.length===this.n-1)throw new Error("Cannot remove key.");return h.remove(this.keys,e,g)}async addSharedKey(e,t){const r=this.pushKey(t);if(await this.hasDuplicate())throw this.spliceKey(t),new Error("Cannot add a key from another account.");return await this.init(e),r}async hasDuplicate(){if(this.keys.length!==this.n-1)return!1;const e=this.deriveReceive(0).getScriptHash();return this.wdb.hasPath(this.wid,e)}removeSharedKey(e,t){return!!this.spliceKey(t)&&(this.save(e),!0)}createReceive(e){return this.createKey(e,0)}createChange(e){return this.createKey(e,1)}createNested(e){return this.createKey(e,2)}async createKey(e,t){let r,i;switch(t){case 0:r=this.deriveReceive(this.receiveDepth),i=this.deriveReceive(this.receiveDepth+this.lookahead),await this.saveKey(e,i),this.receiveDepth+=1,this.receive=r;break;case 1:r=this.deriveChange(this.changeDepth),i=this.deriveChange(this.changeDepth+this.lookahead),await this.saveKey(e,i),this.changeDepth+=1,this.change=r;break;case 2:r=this.deriveNested(this.nestedDepth),i=this.deriveNested(this.nestedDepth+this.lookahead),await this.saveKey(e,i),this.nestedDepth+=1,this.nested=r;break;default:throw new Error(`Bad branch: ${t}.`)}return this.save(e),r}deriveReceive(e,t){return this.deriveKey(0,e,t)}deriveChange(e,t){return this.deriveKey(1,e,t)}deriveNested(e,t){if(!this.witness)throw new Error("Cannot derive nested on non-witness account.");return this.deriveKey(2,e,t)}derivePath(e,t){switch(e.keyType){case c.types.HD:return this.deriveKey(e.branch,e.index,t);case c.types.KEY:{o(this.type===b.types.PUBKEYHASH);let r=e.data;return e.encrypted&&!(r=t.decipher(r,e.hash))?null:l.fromImport(this,r)}case c.types.ADDRESS:return null;default:throw new Error("Bad key type.")}}deriveKey(e,t,r){o("number"==typeof e);const i=[];let s;if(r&&r.key&&!this.watchOnly){const i=this.network.keyPrefix.coinType;s=(s=r.key.deriveAccount(44,i,this.accountIndex)).derive(e).derive(t)}else s=this.accountKey.derive(e).derive(t);const n=l.fromHD(this,s,e,t);switch(this.type){case b.types.PUBKEYHASH:break;case b.types.MULTISIG:i.push(s.publicKey);for(const r of this.keys){const s=r.derive(e).derive(t);i.push(s.publicKey)}n.script=f.fromMultisig(this.m,this.n,i)}return n}save(e){return this.wdb.saveAccount(e,this)}saveKey(e,t){return this.wdb.saveKey(e,this.wid,t)}savePath(e,t){return this.wdb.savePath(e,this.wid,t)}async initDepth(e){this.receiveDepth=1;for(let t=0;t<=this.lookahead;t++){const r=this.deriveReceive(t);await this.saveKey(e,r)}this.changeDepth=1;for(let t=0;t<=this.lookahead;t++){const r=this.deriveChange(t);await this.saveKey(e,r)}if(this.witness){this.nestedDepth=1;for(let t=0;t<=this.lookahead;t++){const r=this.deriveNested(t);await this.saveKey(e,r)}}this.save(e)}async syncDepth(e,t,r,i){let s=!1,n=null;if(t>this.receiveDepth){const r=this.receiveDepth+this.lookahead;o(t<=r+1);for(let i=r;i<t+this.lookahead;i++){const t=this.deriveReceive(i);await this.saveKey(e,t),n=t}this.receiveDepth=t,s=!0}if(r>this.changeDepth){const t=this.changeDepth+this.lookahead;o(r<=t+1);for(let i=t;i<r+this.lookahead;i++){const t=this.deriveChange(i);await this.saveKey(e,t)}this.changeDepth=r,s=!0}if(this.witness&&i>this.nestedDepth){const t=this.nestedDepth+this.lookahead;o(i<=t+1);for(let r=t;r<i+this.lookahead;r++){const t=this.deriveNested(r);await this.saveKey(e,t),n=t}this.nestedDepth=i,s=!0,n=this.nested}return s&&this.save(e),n}async setLookahead(e,t){if(t!==this.lookahead){if(t<this.lookahead){const r=this.lookahead-t;return this.receiveDepth+=r,this.changeDepth+=r,this.witness&&(this.nestedDepth+=r),this.lookahead=t,void this.save(e)}{const r=this.receiveDepth+this.lookahead,i=this.receiveDepth+t;for(let t=r;t<i;t++){const r=this.deriveReceive(t);await this.saveKey(e,r)}}{const r=this.changeDepth+this.lookahead,i=this.changeDepth+t;for(let t=r;t<i;t++){const r=this.deriveChange(t);await this.saveKey(e,r)}}if(this.witness){const r=this.nestedDepth+this.lookahead,i=this.nestedDepth+t;for(let t=r;t<i;t++){const r=this.deriveNested(t);await this.saveKey(e,r)}}this.lookahead=t,this.save(e)}}receiveKey(){return this.initialized?this.deriveReceive(this.receiveDepth-1):null}changeKey(){return this.initialized?this.deriveChange(this.changeDepth-1):null}nestedKey(){return this.initialized&&this.witness?this.deriveNested(this.nestedDepth-1):null}receiveAddress(){const e=this.receiveKey();return e?e.getAddress():null}changeAddress(){const e=this.changeKey();return e?e.getAddress():null}nestedAddress(){const e=this.nestedKey();return e?e.getAddress():null}[p](){const e=this.receiveAddress(),t=this.changeAddress(),r=this.nestedAddress();return{id:this.id,wid:this.wid,name:this.name,network:this.network.type,initialized:this.initialized,witness:this.witness,watchOnly:this.watchOnly,type:b.typesByVal[this.type].toLowerCase(),m:this.m,n:this.n,accountIndex:this.accountIndex,receiveDepth:this.receiveDepth,changeDepth:this.changeDepth,nestedDepth:this.nestedDepth,lookahead:this.lookahead,receiveAddress:e?e.toString(this.network):null,changeAddress:t?t.toString(this.network):null,nestedAddress:r?r.toString(this.network):null,accountKey:this.accountKey.toBase58(this.network),keys:this.keys.map(e=>e.toBase58(this.network))}}toJSON(e){const t=this.receiveAddress(),r=this.changeAddress(),i=this.nestedAddress();return{name:this.name,initialized:this.initialized,witness:this.witness,watchOnly:this.watchOnly,type:b.typesByVal[this.type].toLowerCase(),m:this.m,n:this.n,accountIndex:this.accountIndex,receiveDepth:this.receiveDepth,changeDepth:this.changeDepth,nestedDepth:this.nestedDepth,lookahead:this.lookahead,receiveAddress:t?t.toString(this.network):null,changeAddress:r?r.toString(this.network):null,nestedAddress:i?i.toString(this.network):null,accountKey:this.accountKey.toBase58(this.network),keys:this.keys.map(e=>e.toBase58(this.network)),balance:e?e.toJSON(!0):null}}getSize(){let e=0;return e+=92,e+=74*this.keys.length}toRaw(){const e=this.getSize(),t=a.write(e);let r=0;this.initialized&&(r|=1),this.witness&&(r|=2),t.writeU8(r),t.writeU8(this.type),t.writeU8(this.m),t.writeU8(this.n),t.writeU32(this.receiveDepth),t.writeU32(this.changeDepth),t.writeU32(this.nestedDepth),t.writeU8(this.lookahead),m(this.accountKey,t),t.writeU8(this.keys.length);for(const e of this.keys)m(e,t);return t.render()}fromRaw(e){const t=a.read(e),r=t.readU8();this.initialized=0!=(1&r),this.witness=0!=(2&r),this.type=t.readU8(),this.m=t.readU8(),this.n=t.readU8(),this.receiveDepth=t.readU32(),this.changeDepth=t.readU32(),this.nestedDepth=t.readU32(),this.lookahead=t.readU8(),this.accountKey=_(t),o(this.type<b.typesByVal.length);const i=t.readU8();for(let e=0;e<i;e++){const e=_(t);h.insert(this.keys,e,g,!0)}return this}static fromRaw(e,t){return new this(e).fromRaw(t)}static isAccount(e){return e instanceof b}}function g(e,t){return e.compare(t)}function m(e,t){t.writeU8(e.depth),t.writeU32BE(e.parentFingerPrint),t.writeU32BE(e.childIndex),t.writeBytes(e.chainCode),t.writeBytes(e.publicKey)}function _(e){const t=new d;return t.depth=e.readU8(),t.parentFingerPrint=e.readU32BE(),t.childIndex=e.readU32BE(),t.chainCode=e.readBytes(32),t.publicKey=e.readBytes(33),t}b.types={PUBKEYHASH:0,MULTISIG:1},b.typesByVal=["PUBKEYHASH","MULTISIG"],b.MAX_LOOKAHEAD=40,r.exports=b}],["bcoin","/lib/wallet/path.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(104,r),{encoding:c}=a,{inspectSymbol:u}=__browser_require__(21,r);class f{constructor(e){this.keyType=f.types.HD,this.name=null,this.account=0,this.type=h.types.PUBKEYHASH,this.version=-1,this.branch=-1,this.index=-1,this.encrypted=!1,this.data=null,this.hash=null,e&&this.fromOptions(e)}fromOptions(e){return this.keyType=e.keyType,this.name=e.name,this.account=e.account,this.branch=e.branch,this.index=e.index,this.encrypted=e.encrypted,this.data=e.data,this.type=e.type,this.version=e.version,this.hash=e.hash,this}static fromOptions(e){return(new this).fromOptions(e)}clone(){const e=new this.constructor;return e.keyType=this.keyType,e.name=this.name,e.account=this.account,e.branch=this.branch,e.index=this.index,e.encrypted=this.encrypted,e.data=this.data,e.type=this.type,e.version=this.version,e.hash=this.hash,e}fromRaw(e){const t=a.read(e);this.account=t.readU32(),this.keyType=t.readU8();const r=t.readU8();switch(this.type=7&r,this.version=r>>>3,31===this.version&&(this.version=-1),this.keyType){case f.types.HD:this.branch=t.readU32(),this.index=t.readU32();break;case f.types.KEY:this.encrypted=1===t.readU8(),this.data=t.readVarBytes();break;case f.types.ADDRESS:break;default:o(!1)}return this}static fromRaw(e){return(new this).fromRaw(e)}getSize(){let e=0;switch(e+=6,this.keyType){case f.types.HD:e+=8;break;case f.types.KEY:e+=1,e+=c.sizeVarBytes(this.data)}return e}toRaw(){const e=this.getSize(),t=a.write(e);t.writeU32(this.account),t.writeU8(this.keyType);let r=this.version;-1===r&&(r=31);const i=r<<3|this.type;switch(t.writeU8(i),this.keyType){case f.types.HD:o(!this.data),o(-1!==this.index),t.writeU32(this.branch),t.writeU32(this.index);break;case f.types.KEY:o(this.data),o(-1===this.index),t.writeU8(this.encrypted?1:0),t.writeVarBytes(this.data);break;case f.types.ADDRESS:o(!this.data),o(-1===this.index);break;default:o(!1)}return t.render()}fromAddress(e,t){return this.keyType=f.types.ADDRESS,this.name=e.name,this.account=e.accountIndex,this.version=t.version,this.type=t.type,this.hash=t.getHash(),this}static fromAddress(e,t){return(new this).fromAddress(e,t)}toPath(){return this.keyType!==f.types.HD?null:`m/${this.account}'/${this.branch}/${this.index}`}toAddress(){return h.fromHash(this.hash,this.type,this.version)}toJSON(){return{name:this.name,account:this.account,change:1===this.branch,derivation:this.toPath()}}[u](){return`<Path: ${this.name}:${this.toPath()}>`}}f.types={HD:0,KEY:1,ADDRESS:2},f.typesByVal=["HD","KEY","ADDRESS"],r.exports=f}],["bcoin","/lib/wallet/common.js",function(e,t,r,i,s,n){"use strict";const{BufferMap:o}=__browser_require__(86,r),a=e;a.isName=function(e){if("string"!=typeof e)return!1;if(0===e.length)return!1;if(!/^[\-\._0-9A-Za-z]+$/.test(e))return!1;switch(e[0]){case"_":case"-":case".":return!1}switch(e[e.length-1]){case"_":case"-":case".":return!1}return e.length>=1&&e.length<=40},a.sortTX=function(e){return e.sort((e,t)=>e.mtime-t.mtime)},a.sortCoins=function(e){return e.sort((e,t)=>(e=-1===e.height?2147483647:e.height)-(t=-1===t.height?2147483647:t.height))},a.sortDeps=function(e){const t=new o;for(const r of e){const e=r.hash();t.set(e,r)}const r=new o,i=new o,s=[];for(const[e,n]of t){i.set(e,0);let o=!1;for(const s of n.inputs){const a=s.prevout.hash;if(!t.has(a))continue;const h=i.get(e);i.set(e,h+1),o=!0,r.has(a)||r.set(a,[]),r.get(a).push(n)}o||s.push(n)}const n=[];for(const e of s){const t=r.get(e.hash());if(n.push(e),t)for(const e of t){let t=i.get(e.hash());0==--t&&s.push(e),i.set(e.hash(),t)}}return n}}],["bcoin","/lib/wallet/walletkey.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(104,r),a=__browser_require__(167,r),h=__browser_require__(351,r);class c extends a{constructor(e){super(e),this.keyType=h.types.HD,this.name=null,this.account=-1,this.branch=-1,this.index=-1}toJSON(e){return{name:this.name,account:this.account,branch:this.branch,index:this.index,witness:this.witness,nested:this.nested,publicKey:this.publicKey.toString("hex"),script:this.script?this.script.toRaw().toString("hex"):null,program:this.witness?this.getProgram().toRaw().toString("hex"):null,type:o.typesByVal[this.getType()].toLowerCase(),address:this.getAddress("string",e)}}fromHD(e,t,r,i){return this.keyType=h.types.HD,this.name=e.name,this.account=e.accountIndex,this.branch=r,this.index=i,this.witness=e.witness,this.nested=2===r,t.privateKey?this.fromPrivate(t.privateKey):this.fromPublic(t.publicKey)}static fromHD(e,t,r,i){return(new this).fromHD(e,t,r,i)}fromImport(e,t){return this.keyType=h.types.KEY,this.name=e.name,this.account=e.accountIndex,this.witness=e.witness,this.fromRaw(t)}static fromImport(e,t){return(new this).fromImport(e,t)}fromRing(e,t){return this.keyType=h.types.KEY,this.name=e.name,this.account=e.accountIndex,this.witness=e.witness,this.fromOptions(t)}static fromRing(e,t){return(new this).fromRing(e,t)}toPath(){const e=new h;switch(e.name=this.name,e.account=this.account,this.keyType){case h.types.HD:e.branch=this.branch,e.index=this.index;break;case h.types.KEY:e.data=this.toRaw()}return e.keyType=this.keyType,e.version=this.getVersion(),e.type=this.getType(),e.hash=this.getHash(),e}static isWalletKey(e){return e instanceof c}}r.exports=c}],["bcoin","/lib/wallet/client.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(211,r),h=__browser_require__(20,r),c=__browser_require__(85,r),u=__browser_require__(33,r),f={"block connect":(e,t)=>d(e,t),"block disconnect":e=>[l(e)],"block rescan":(e,t)=>d(e,t),"chain reset":e=>[l(e)],tx:e=>[c.fromRaw(e)]};function l(e){return o(null!=e&&!0===e._isBuffer),o(e.length>=84),{hash:u.digest(e.slice(0,80)),height:e.readUInt32LE(80,!0),time:e.readUInt32LE(68,!0)}}function d(e,t){const r=l(e),i=[];for(const e of t)i.push(c.fromRaw(e));return[r,i]}r.exports=class extends a{constructor(e){super(e)}bind(e,t){const r=f[e];r?super.bind(e,(...e)=>t(...r(...e))):super.bind(e,t)}hook(e,t){const r=f[e];r?super.hook(e,(...e)=>t(...r(...e))):super.hook(e,t)}async getTip(){return l(await super.getTip())}async getEntry(e){return null!=e&&!0===e._isBuffer&&(e=h.revHex(e)),l(await super.getEntry(e))}async send(e){return super.send(e.toRaw())}async setFilter(e){return super.setFilter(e.toRaw())}async rescan(e){return null!=e&&!0===e._isBuffer&&(e=h.revHex(e)),super.rescan(e)}}}],["bcoin","/lib/wallet/http.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(195,r),{Server:h}=__browser_require__(326,r),c=__browser_require__(333,r),u=__browser_require__(105,r),f=__browser_require__(126,r),l=__browser_require__(111,r),d=__browser_require__(89,r),p=__browser_require__(51,r),b=__browser_require__(41,r),{safeEqual:g}=__browser_require__(335,r),m=__browser_require__(14,r),_=__browser_require__(104,r),w=__browser_require__(167,r),y=__browser_require__(234,r),v=__browser_require__(249,r),E=__browser_require__(133,r),S=__browser_require__(352,r);class I{constructor(e){this.network=m.primary,this.logger=null,this.node=null,this.apiKey=u.encode(b.randomBytes(20)),this.apiHash=p.digest(Buffer.from(this.apiKey,"ascii")),this.adminToken=b.randomBytes(32),this.serviceHash=this.apiHash,this.noAuth=!1,this.cors=!1,this.walletAuth=!1,this.prefix=null,this.host="127.0.0.1",this.port=8080,this.ssl=!1,this.keyFile=null,this.certFile=null,this.fromOptions(e)}fromOptions(e){if(o(e),o(e.node&&"object"==typeof e.node,"HTTP Server requires a WalletDB."),this.node=e.node,this.network=e.node.network,this.logger=e.node.logger,this.port=this.network.walletPort,null!=e.logger&&(o("object"==typeof e.logger),this.logger=e.logger),null!=e.apiKey&&(o("string"==typeof e.apiKey,"API key must be a string."),o(e.apiKey.length<=255,"API key must be under 255 bytes."),this.apiKey=e.apiKey,this.apiHash=p.digest(Buffer.from(this.apiKey,"ascii"))),null!=e.adminToken)if("string"==typeof e.adminToken){o(64===e.adminToken.length,"Admin token must be a 32 byte hex string.");const t=Buffer.from(e.adminToken,"hex");o(32===t.length,"Admin token must be a 32 byte hex string."),this.adminToken=t}else o(null!=e.adminToken&&!0===e.adminToken._isBuffer,"Admin token must be a hex string or buffer."),o(32===e.adminToken.length,"Admin token must be 32 bytes."),this.adminToken=e.adminToken;return null!=e.noAuth&&(o("boolean"==typeof e.noAuth),this.noAuth=e.noAuth),null!=e.cors&&(o("boolean"==typeof e.cors),this.cors=e.cors),null!=e.walletAuth&&(o("boolean"==typeof e.walletAuth),this.walletAuth=e.walletAuth),null!=e.prefix&&(o("string"==typeof e.prefix),this.prefix=e.prefix,this.keyFile=a.join(this.prefix,"key.pem"),this.certFile=a.join(this.prefix,"cert.pem")),null!=e.host&&(o("string"==typeof e.host),this.host=e.host),null!=e.port&&(o((65535&e.port)===e.port,"Port must be a number."),this.port=e.port),null!=e.ssl&&(o("boolean"==typeof e.ssl),this.ssl=e.ssl),null!=e.keyFile&&(o("string"==typeof e.keyFile),this.keyFile=e.keyFile),null!=e.certFile&&(o("string"==typeof e.certFile),this.certFile=e.certFile),e.apiKey||"127.0.0.1"!==this.host&&"::1"!==this.host||(this.noAuth=!0),this}static fromOptions(e){return(new I).fromOptions(e)}}function k(e,t){if(!e){const e=new Error(t);throw e.statusCode=400,e}}r.exports=class extends h{constructor(e){super(new I(e)),this.network=this.options.network,this.logger=this.options.logger.context("wallet-http"),this.wdb=this.options.node.wdb,this.rpc=this.options.node.rpc,this.init()}init(){this.on("request",(e,t)=>{"POST"===e.method&&"/"===e.pathname||this.logger.debug("Request for method=%s path=%s (%s).",e.method,e.pathname,e.socket.remoteAddress)}),this.on("listening",e=>{this.logger.info("Wallet HTTP server listening on %s (port=%d).",e.address,e.port)}),this.initRouter(),this.initSockets()}initRouter(){this.options.cors&&this.use(this.cors()),this.options.noAuth||this.use(this.basicAuth({hash:p.digest,password:this.options.apiKey,realm:"wallet"})),this.use(this.bodyParser({type:"json"})),this.use(async(e,t)=>{if(!this.options.walletAuth)return void(e.admin=!0);const r=c.fromRequest(e).buf("token");r&&g(r,this.options.adminToken)?e.admin=!0:"POST"!==e.method||0!==e.path.length||t.json(403)}),this.use(this.jsonRPC()),this.use(this.router()),this.error((e,t,r)=>{const i=e.statusCode||500;r.json(i,{error:{type:e.type,code:e.code,message:e.message}})}),this.hook(async(e,t)=>{if(e.path.length<2)return;if("wallet"!==e.path[0])return;if("PUT"===e.method&&2===e.path.length)return;const r=c.fromRequest(e),i=r.str("id"),s=r.buf("token");if(!i)return void t.json(403);if(e.admin||!this.options.walletAuth){const r=await this.wdb.get(i);return r?void(e.wallet=r):void t.json(404)}if(!s)return void t.json(403);let n;try{n=await this.wdb.auth(i,s)}catch(e){return this.logger.info("Auth failure for %s: %s.",i,e.message),void t.json(403)}n?(e.wallet=n,this.logger.info("Successful auth for %s.",i)):t.json(404)}),this.post("/rescan",async(e,t)=>{if(!e.admin)return void t.json(403);const r=c.fromRequest(e).u32("height");t.json(200,{success:!0}),await this.wdb.rescan(r)}),this.post("/resend",async(e,t)=>{e.admin?(await this.wdb.resend(),t.json(200,{success:!0})):t.json(403)}),this.post("/backup",async(e,t)=>{if(!e.admin)return void t.json(403);const r=c.fromRequest(e).str("path");k(r,"Path is required."),await this.wdb.backup(r),t.json(200,{success:!0})}),this.get("/wallet",async(e,t)=>{if(!e.admin)return void t.json(403);const r=await this.wdb.getWallets();t.json(200,r)}),this.get("/wallet/:id",async(e,t)=>{const r=await e.wallet.getBalance();t.json(200,e.wallet.toJSON(!1,r))}),this.get("/wallet/:id/master",(e,t)=>{e.admin?t.json(200,e.wallet.master.toJSON(this.network,!0)):t.json(403)}),this.put("/wallet/:id",async(e,t)=>{const r=c.fromRequest(e);let i=r.str("master"),s=r.str("mnemonic"),n=r.str("accountKey");i&&(i=v.fromBase58(i,this.network)),s&&(s=y.fromPhrase(s)),n&&(n=E.fromBase58(n,this.network));const o=await this.wdb.create({id:r.str("id"),type:r.str("type"),m:r.u32("m"),n:r.u32("n"),passphrase:r.str("passphrase"),master:i,mnemonic:s,witness:r.bool("witness"),accountKey:n,watchOnly:r.bool("watchOnly")}),a=await o.getBalance();t.json(200,o.toJSON(!1,a))}),this.get("/wallet/:id/account",async(e,t)=>{const r=await e.wallet.getAccounts();t.json(200,r)}),this.get("/wallet/:id/account/:account",async(e,t)=>{const r=c.fromRequest(e).str("account"),i=await e.wallet.getAccount(r);if(!i)return void t.json(404);const s=await e.wallet.getBalance(i.accountIndex);t.json(200,i.toJSON(s))}),this.put("/wallet/:id/account/:account",async(e,t)=>{const r=c.fromRequest(e),i=r.str("passphrase");let s=r.get("accountKey");s&&(s=E.fromBase58(s,this.network));const n={name:r.str("account"),witness:r.bool("witness"),type:r.str("type"),m:r.u32("m"),n:r.u32("n"),accountKey:s,lookahead:r.u32("lookahead")},o=await e.wallet.createAccount(n,i),a=await e.wallet.getBalance(o.accountIndex);t.json(200,o.toJSON(a))}),this.post("/wallet/:id/passphrase",async(e,t)=>{const r=c.fromRequest(e),i=r.str("passphrase"),s=r.str("old");k(i,"Passphrase is required."),await e.wallet.setPassphrase(i,s),t.json(200,{success:!0})}),this.post("/wallet/:id/unlock",async(e,t)=>{const r=c.fromRequest(e),i=r.str("passphrase"),s=r.u32("timeout");k(i,"Passphrase is required."),await e.wallet.unlock(i,s),t.json(200,{success:!0})}),this.post("/wallet/:id/lock",async(e,t)=>{await e.wallet.lock(),t.json(200,{success:!0})}),this.post("/wallet/:id/import",async(e,t)=>{const r=c.fromRequest(e),i=r.str("account"),s=r.str("passphrase"),n=r.buf("publicKey"),o=r.str("privateKey"),a=r.str("address");if(n){const r=w.fromPublic(n);return await e.wallet.importKey(i,r),void t.json(200,{success:!0})}if(o){const r=w.fromSecret(o,this.network);return await e.wallet.importKey(i,r,s),void t.json(200,{success:!0})}if(a){const r=_.fromString(a,this.network);return await e.wallet.importAddress(i,r),void t.json(200,{success:!0})}k(!1,"Key or address is required.")}),this.post("/wallet/:id/retoken",async(e,t)=>{const r=c.fromRequest(e).str("passphrase"),i=await e.wallet.retoken(r);t.json(200,{token:i.toString("hex")})}),this.post("/wallet/:id/send",async(e,t)=>{const r=c.fromRequest(e),i=r.str("passphrase"),s=r.array("outputs",[]),n={rate:r.u64("rate"),blocks:r.u32("blocks"),maxFee:r.u64("maxFee"),selection:r.str("selection"),smart:r.bool("smart"),account:r.str("account"),sort:r.bool("sort"),subtractFee:r.bool("subtractFee"),subtractIndex:r.i32("subtractIndex"),depth:r.u32(["confirmations","depth"]),outputs:[]};for(const e of s){const t=new c(e);let r=t.str("address"),i=t.buf("script");r&&(r=_.fromString(r,this.network)),i&&(i=d.fromRaw(i)),n.outputs.push({address:r,script:i,value:t.u64("value")})}const o=await e.wallet.send(n,i),a=await e.wallet.getDetails(o.hash());t.json(200,a.toJSON(this.network,this.wdb.height))}),this.post("/wallet/:id/create",async(e,t)=>{const r=c.fromRequest(e),i=r.str("passphrase"),s=r.array("outputs",[]),n=r.bool("sign",!0),o={rate:r.u64("rate"),blocks:r.u32("blocks"),maxFee:r.u64("maxFee"),selection:r.str("selection"),smart:r.bool("smart"),account:r.str("account"),sort:r.bool("sort"),subtractFee:r.bool("subtractFee"),subtractIndex:r.i32("subtractIndex"),depth:r.u32(["confirmations","depth"]),template:r.bool("template",n),outputs:[]};for(const e of s){const t=new c(e);let r=t.str("address"),i=t.buf("script");r&&(r=_.fromString(r,this.network)),i&&(i=d.fromRaw(i)),o.outputs.push({address:r,script:i,value:t.u64("value")})}const a=await e.wallet.createTX(o);n&&await e.wallet.sign(a,i),t.json(200,a.getJSON(this.network))}),this.post("/wallet/:id/sign",async(e,t)=>{const r=c.fromRequest(e),i=r.str("passphrase"),s=r.buf("tx");k(s,"TX is required.");const n=f.fromRaw(s);n.view=await e.wallet.getCoinView(n),await e.wallet.sign(n,i),t.json(200,n.getJSON(this.network))}),this.post("/wallet/:id/zap",async(e,t)=>{const r=c.fromRequest(e),i=r.str("account"),s=r.u32("age");k(s,"Age is required."),await e.wallet.zap(i,s),t.json(200,{success:!0})}),this.del("/wallet/:id/tx/:hash",async(e,t)=>{const r=c.fromRequest(e).brhash("hash");k(r,"Hash is required."),await e.wallet.abandon(r),t.json(200,{success:!0})}),this.get("/wallet/:id/block",async(e,t)=>{const r=await e.wallet.getBlocks();t.json(200,r)}),this.get("/wallet/:id/block/:height",async(e,t)=>{const r=c.fromRequest(e).u32("height");k(null!=r,"Height is required.");const i=await e.wallet.getBlock(r);i?t.json(200,i.toJSON()):t.json(404)}),this.put("/wallet/:id/shared-key",async(e,t)=>{const r=c.fromRequest(e),i=r.str("account"),s=r.str("accountKey");k(s,"Key is required.");const n=E.fromBase58(s,this.network),o=await e.wallet.addSharedKey(i,n);t.json(200,{success:!0,addedKey:o})}),this.del("/wallet/:id/shared-key",async(e,t)=>{const r=c.fromRequest(e),i=r.str("account"),s=r.str("accountKey");k(s,"Key is required.");const n=E.fromBase58(s,this.network),o=await e.wallet.removeSharedKey(i,n);t.json(200,{success:!0,removedKey:o})}),this.get("/wallet/:id/key/:address",async(e,t)=>{const r=c.fromRequest(e).str("address");k(r,"Address is required.");const i=_.fromString(r,this.network),s=await e.wallet.getKey(i);s?t.json(200,s.toJSON(this.network)):t.json(404)}),this.get("/wallet/:id/wif/:address",async(e,t)=>{const r=c.fromRequest(e),i=r.str("address"),s=r.str("passphrase");k(i,"Address is required.");const n=_.fromString(i,this.network),o=await e.wallet.getPrivateKey(n,s);o?t.json(200,{privateKey:o.toSecret(this.network)}):t.json(404)}),this.post("/wallet/:id/address",async(e,t)=>{const r=c.fromRequest(e).str("account"),i=await e.wallet.createReceive(r);t.json(200,i.toJSON(this.network))}),this.post("/wallet/:id/change",async(e,t)=>{const r=c.fromRequest(e).str("account"),i=await e.wallet.createChange(r);t.json(200,i.toJSON(this.network))}),this.post("/wallet/:id/nested",async(e,t)=>{const r=c.fromRequest(e).str("account"),i=await e.wallet.createNested(r);t.json(200,i.toJSON(this.network))}),this.get("/wallet/:id/balance",async(e,t)=>{const r=c.fromRequest(e).str("account"),i=await e.wallet.getBalance(r);i?t.json(200,i.toJSON()):t.json(404)}),this.get("/wallet/:id/coin",async(e,t)=>{const r=c.fromRequest(e).str("account"),i=await e.wallet.getCoins(r),s=[];S.sortCoins(i);for(const e of i)s.push(e.getJSON(this.network));t.json(200,s)}),this.get("/wallet/:id/locked",async(e,t)=>{const r=e.wallet.getLocked(),i=[];for(const e of r)i.push(e.toJSON());t.json(200,i)}),this.put("/wallet/:id/locked/:hash/:index",async(e,t)=>{const r=c.fromRequest(e),i=r.brhash("hash"),s=r.u32("index");k(i,"Hash is required."),k(null!=s,"Index is required.");const n=new l(i,s);e.wallet.lockCoin(n),t.json(200,{success:!0})}),this.del("/wallet/:id/locked/:hash/:index",async(e,t)=>{const r=c.fromRequest(e),i=r.brhash("hash"),s=r.u32("index");k(i,"Hash is required."),k(null!=s,"Index is required.");const n=new l(i,s);e.wallet.unlockCoin(n),t.json(200,{success:!0})}),this.get("/wallet/:id/coin/:hash/:index",async(e,t)=>{const r=c.fromRequest(e),i=r.brhash("hash"),s=r.u32("index");k(i,"Hash is required."),k(null!=s,"Index is required.");const n=await e.wallet.getCoin(i,s);n?t.json(200,n.getJSON(this.network)):t.json(404)}),this.get("/wallet/:id/tx/history",async(e,t)=>{const r=c.fromRequest(e).str("account"),i=await e.wallet.getHistory(r);S.sortTX(i);const s=await e.wallet.toDetails(i),n=[];for(const e of s)n.push(e.toJSON(this.network,this.wdb.height));t.json(200,n)}),this.get("/wallet/:id/tx/unconfirmed",async(e,t)=>{const r=c.fromRequest(e).str("account"),i=await e.wallet.getPending(r);S.sortTX(i);const s=await e.wallet.toDetails(i),n=[];for(const e of s)n.push(e.toJSON(this.network,this.wdb.height));t.json(200,n)}),this.get("/wallet/:id/tx/range",async(e,t)=>{const r=c.fromRequest(e),i=r.str("account"),s={start:r.u32("start"),end:r.u32("end"),limit:r.u32("limit"),reverse:r.bool("reverse")},n=await e.wallet.getRange(i,s),o=await e.wallet.toDetails(n),a=[];for(const e of o)a.push(e.toJSON(this.network,this.wdb.height));t.json(200,a)}),this.get("/wallet/:id/tx/last",async(e,t)=>{const r=c.fromRequest(e),i=r.str("account"),s=r.u32("limit"),n=await e.wallet.getLast(i,s),o=await e.wallet.toDetails(n),a=[];for(const e of o)a.push(e.toJSON(this.network,this.wdb.height));t.json(200,a)}),this.get("/wallet/:id/tx/:hash",async(e,t)=>{const r=c.fromRequest(e).brhash("hash");k(r,"Hash is required.");const i=await e.wallet.getTX(r);if(!i)return void t.json(404);const s=await e.wallet.toDetails(i);t.json(200,s.toJSON(this.network,this.wdb.height))}),this.post("/wallet/:id/resend",async(e,t)=>{await e.wallet.resend(),t.json(200,{success:!0})})}initSockets(){const e=(e,t,r,i)=>{const s=`w:${t.id}`;if(!this.channel(s)&&!this.channel("w:*"))return;const n=i.toJSON(this.network,this.wdb.liveHeight());this.channel(s)&&this.to(s,e,t.id,n),this.channel("w:*")&&this.to("w:*",e,t.id,n)};this.wdb.on("tx",(t,r,i)=>{e("tx",t,0,i)}),this.wdb.on("confirmed",(t,r,i)=>{e("confirmed",t,0,i)}),this.wdb.on("unconfirmed",(t,r,i)=>{e("unconfirmed",t,0,i)}),this.wdb.on("conflict",(t,r,i)=>{e("conflict",t,0,i)}),this.wdb.on("balance",(e,t)=>{const r=`w:${e.id}`;if(!this.channel(r)&&!this.channel("w:*"))return;const i=t.toJSON();this.channel(r)&&this.to(r,"balance",e.id,i),this.channel("w:*")&&this.to("w:*","balance",e.id,i)}),this.wdb.on("address",(e,t)=>{const r=`w:${e.id}`;if(!this.channel(r)&&!this.channel("w:*"))return;const i=[];for(const e of t)i.push(e.toJSON(this.network));this.channel(r)&&this.to(r,"address",e.id,i),this.channel("w:*")&&this.to("w:*","address",e.id,i)})}handleSocket(e){e.hook("auth",(...t)=>{if(e.channel("auth"))throw new Error("Already authed.");if(!this.options.noAuth){const e=new c(t).str(0,"");if(e.length>255)throw new Error("Invalid API key.");const r=Buffer.from(e,"utf8"),i=p.digest(r);if(!g(i,this.options.apiHash))throw new Error("Invalid API key.")}return e.join("auth"),this.logger.info("Successful auth from %s.",e.host),this.handleAuth(e),null})}handleAuth(e){e.hook("join",async(...t)=>{const r=new c(t),i=r.str(0,""),s=r.buf(1);if(!i)throw new Error("Invalid parameter.");if(this.options.walletAuth?s&&g(s,this.options.adminToken)&&e.join("admin"):e.join("admin"),e.channel("admin")||!this.options.walletAuth)return e.join(`w:${i}`),null;if("*"===i)throw new Error("Bad token.");if(!s)throw new Error("Invalid parameter.");let n;try{n=await this.wdb.auth(i,s)}catch(e){throw this.logger.info("Wallet auth failure for %s: %s.",i,e.message),new Error("Bad token.")}if(!n)throw new Error("Wallet does not exist.");return this.logger.info("Successful wallet auth for %s.",i),e.join(`w:${i}`),null}),e.hook("leave",(...t)=>{const r=new c(t).str(0,"");if(!r)throw new Error("Invalid parameter.");return e.leave(`w:${r}`),null})}}}],["bcoin","/lib/wallet/layout.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(176,r);e.wdb={V:o.key("V"),O:o.key("O"),R:o.key("R"),D:o.key("D"),p:o.key("p",["hash"]),P:o.key("P",["uint32","hash"]),r:o.key("r",["uint32","uint32","hash"]),w:o.key("w",["uint32"]),W:o.key("W",["uint32"]),l:o.key("l",["ascii"]),a:o.key("a",["uint32","uint32"]),i:o.key("i",["uint32","ascii"]),n:o.key("n",["uint32","uint32"]),h:o.key("h",["uint32"]),b:o.key("b",["uint32"]),o:o.key("o",["hash256","uint32"]),T:o.key("T",["hash256"]),t:o.key("t",["uint32"])},e.txdb={prefix:o.key("t",["uint32"]),R:o.key("R"),r:o.key("r",["uint32"]),t:o.key("t",["hash256"]),c:o.key("c",["hash256","uint32"]),d:o.key("d",["hash256","uint32"]),s:o.key("s",["hash256","uint32"]),p:o.key("p",["hash256"]),m:o.key("m",["uint32","hash256"]),h:o.key("h",["uint32","hash256"]),T:o.key("T",["uint32","hash256"]),P:o.key("P",["uint32","hash256"]),M:o.key("M",["uint32","uint32","hash256"]),H:o.key("H",["uint32","uint32","hash256"]),C:o.key("C",["uint32","hash256","uint32"]),b:o.key("b",["uint32"])}}],["bcoin","/lib/wallet/masterkey.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),{Lock:h}=__browser_require__(203,r),c=__browser_require__(41,r),u=__browser_require__(136,r),f=__browser_require__(358,r),l=__browser_require__(51,r),d=__browser_require__(33,r),p=__browser_require__(38,r),b=__browser_require__(235,r),g=__browser_require__(320,r),m=__browser_require__(20,r),_=__browser_require__(249,r),w=__browser_require__(234,r),{encoding:y}=a,{inspectSymbol:v}=__browser_require__(21,r);class E{constructor(e){this.encrypted=!1,this.iv=null,this.ciphertext=null,this.key=null,this.mnemonic=null,this.alg=E.alg.PBKDF2,this.n=5e4,this.r=0,this.p=0,this.aesKey=null,this.timer=null,this.until=0,this.locker=new h,e&&this.fromOptions(e)}fromOptions(e){return o(e),null!=e.encrypted&&(o("boolean"==typeof e.encrypted),this.encrypted=e.encrypted),e.iv&&(o(null!=e.iv&&!0===e.iv._isBuffer),this.iv=e.iv),e.ciphertext&&(o(null!=e.ciphertext&&!0===e.ciphertext._isBuffer),this.ciphertext=e.ciphertext),e.key&&(o(_.isHDPrivateKey(e.key)),this.key=e.key),e.mnemonic&&(o(e.mnemonic instanceof w),this.mnemonic=e.mnemonic),null!=e.alg&&("string"==typeof e.alg?(this.alg=E.alg[e.alg.toUpperCase()],o(null!=this.alg,"Unknown algorithm.")):(o("number"==typeof e.alg),o(E.algByVal[e.alg]),this.alg=e.alg)),null!=e.rounds&&(o(e.rounds>>>0===e.rounds),this.rounds=e.rounds),null!=e.n&&(o(e.n>>>0===e.n),this.n=e.n),null!=e.r&&(o(e.r>>>0===e.r),this.r=e.r),null!=e.p&&(o(e.p>>>0===e.p),this.p=e.p),o(this.encrypted?!this.key:this.key),this}static fromOptions(e){return(new this).fromOptions(e)}async unlock(e,t){const r=await this.locker.lock();try{return await this._unlock(e,t)}finally{r()}}async _unlock(e,t){if(this.key)return this.encrypted&&(o(null!=this.timer),this.start(t)),this.key;if(!e)throw new Error("No passphrase.");o(this.encrypted);const r=await this.derive(e),i=f.decipher(this.ciphertext,r,this.iv);return this.readKey(i),this.start(t),this.aesKey=r,this.key}start(e){e||(e=60),this.stop(),-1!==e&&(o(e>>>0===e),this.until=m.now()+e,this.timer=setTimeout(()=>this.lock(),1e3*e))}stop(){null!=this.timer&&(clearTimeout(this.timer),this.timer=null,this.until=0)}async derive(e){const t=E.SALT,r=this.n,i=this.r,s=this.p;switch("string"==typeof e&&(e=Buffer.from(e,"utf8")),this.alg){case E.alg.PBKDF2:return b.deriveAsync(l,e,t,r,32);case E.alg.SCRYPT:return g.deriveAsync(e,t,r,i,s,32);default:throw new Error(`Unknown algorithm: ${this.alg}.`)}}encipher(e,t){return this.aesKey?f.encipher(e,this.aesKey,t.slice(0,16)):null}decipher(e,t){return this.aesKey?f.decipher(e,this.aesKey,t.slice(0,16)):null}async lock(){const e=await this.locker.lock();try{return await this._lock()}finally{e()}}_lock(){if(!this.encrypted)return o(null==this.timer),void o(this.key);this.stop(),this.key&&(this.key.destroy(!0),this.key=null),this.aesKey&&(u(this.aesKey),this.aesKey=null)}async destroy(){await this.lock(),this.locker.destroy()}async decrypt(e,t){const r=await this.locker.lock();try{return await this._decrypt(e,t)}finally{r()}}async _decrypt(e,t){if(!this.encrypted)throw new Error("Master key is not encrypted.");if(!e)throw new Error("No passphrase provided.");this._lock();const r=await this.derive(e),i=f.decipher(this.ciphertext,r,this.iv);return this.readKey(i),this.encrypted=!1,this.iv=null,this.ciphertext=null,t?r:(u(r),null)}async encrypt(e,t){const r=await this.locker.lock();try{return await this._encrypt(e,t)}finally{r()}}async _encrypt(e,t){if(this.encrypted)throw new Error("Master key is already encrypted.");if(!e)throw new Error("No passphrase provided.");const r=this.writeKey(),i=c.randomBytes(16);this.stop();const s=await this.derive(e),n=f.encipher(r,s,i);return this.key=null,this.mnemonic=null,this.encrypted=!0,this.iv=i,this.ciphertext=n,t?s:(u(s),null)}keySize(){let e=0;return e+=64,e+=1,this.mnemonic&&(e+=this.mnemonic.getSize()),e}writeKey(){const e=a.write(this.keySize());return e.writeBytes(this.key.chainCode),e.writeBytes(this.key.privateKey),this.mnemonic?(e.writeU8(1),this.mnemonic.toWriter(e)):e.writeU8(0),e.render()}readKey(e){const t=a.read(e);return this.key=new _,!function(e){if(e.length<82)return!1;const t=e.slice(0,78),r=e.readUInt32LE(78,!0);return d.digest(t).readUInt32LE(0,!0)===r}(e)?(this.key.chainCode=t.readBytes(32),this.key.privateKey=t.readBytes(32)):(t.seek(13),this.key.chainCode=t.readBytes(32),o(0===t.readU8()),this.key.privateKey=t.readBytes(32)),this.key.publicKey=p.publicKeyCreate(this.key.privateKey,!0),1===t.readU8()&&(this.mnemonic=w.fromReader(t)),this}getSize(){let e=0;return this.encrypted?(e+=1,e+=y.sizeVarBytes(this.iv),e+=y.sizeVarBytes(this.ciphertext),e+=13):(e+=1,e+=this.keySize())}toWriter(e){return this.encrypted?(e.writeU8(1),e.writeVarBytes(this.iv),e.writeVarBytes(this.ciphertext),e.writeU8(this.alg),e.writeU32(this.n),e.writeU32(this.r),e.writeU32(this.p),e):(e.writeU8(0),e.writeBytes(this.key.chainCode),e.writeBytes(this.key.privateKey),this.mnemonic?(e.writeU8(1),this.mnemonic.toWriter(e)):e.writeU8(0),e)}toRaw(){const e=this.getSize();return this.toWriter(a.write(e)).render()}fromReader(e){return this.encrypted=1===e.readU8(),this.encrypted?(this.iv=e.readVarBytes(),this.ciphertext=e.readVarBytes(),this.alg=e.readU8(),o(this.alg<E.algByVal.length),this.n=e.readU32(),this.r=e.readU32(),this.p=e.readU32(),this):(this.key=new _,this.key.chainCode=e.readBytes(32),this.key.privateKey=e.readBytes(32),this.key.publicKey=p.publicKeyCreate(this.key.privateKey,!0),1===e.readU8()&&(this.mnemonic=w.fromReader(e)),this)}static fromReader(e){return(new this).fromReader(e)}fromRaw(e){return this.fromReader(a.read(e))}static fromRaw(e){return(new this).fromRaw(e)}fromKey(e,t){return this.encrypted=!1,this.iv=null,this.ciphertext=null,this.key=e,this.mnemonic=t||null,this}static fromKey(e,t){return(new this).fromKey(e,t)}toJSON(e,t){return this.encrypted?{encrypted:!0,until:this.until,iv:this.iv.toString("hex"),ciphertext:t?this.ciphertext.toString("hex"):undefined,algorithm:E.algByVal[this.alg].toLowerCase(),n:this.n,r:this.r,p:this.p}:{encrypted:!1,key:t?this.key.toJSON(e):undefined,mnemonic:t&&this.mnemonic?this.mnemonic.toJSON():undefined}}[v](){const e=this.toJSON(null,!0);return this.key&&(e.key=this.key.toJSON()),this.mnemonic&&(e.mnemonic=this.mnemonic.toJSON()),e}static isMasterKey(e){return e instanceof E}}E.SALT=Buffer.from("bcoin","ascii"),E.alg={PBKDF2:0,SCRYPT:1},E.algByVal=["PBKDF2","SCRYPT"],r.exports=E}],["bcrypto","/lib/aes-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(359,r)}],["bcrypto","/lib/js/aes.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(360,r),{CBCCipher:a,CBCDecipher:h}=__browser_require__(361,r);function c(e,t){const r=Buffer.allocUnsafe(e.length+t.length);return e.copy(r,0),t.copy(r,e.length),r}e.native=0,e.encipher=function(e,t,r){const i=new a(new o(256));return i.init(t,r),c(i.update(e),i.final())},e.decipher=function(e,t,r){const i=new h(new o(256));return i.init(t,r),c(i.update(e),i.final())}}],["bcrypto","/lib/js/ciphers/aes.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(35,r),a=new Uint32Array([3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986]),h=new Uint32Array([2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766]),c=new Uint32Array([1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126]),u=new Uint32Array([1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436]),f=new Uint32Array([1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890]),l=new Uint32Array([1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935]),d=new Uint32Array([2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600]),p=new Uint32Array([4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480]),b=new Uint8Array([82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125]),g=new Uint32Array([16777216,33554432,67108864,134217728,268435456,536870912,1073741824,2147483648,452984832,905969664]);function m(e,t){return 16777216*e[t++]+65536*e[t++]+256*e[t++]+e[t]}function _(e,t,r){return e[r++]=t>>>24,e[r++]=t>>>16,e[r++]=t>>>8,e[r++]=t,r}r.exports=class{constructor(e=256){o(e>>>0===e),this.bits=e,this.rounds=function(e){switch(e){case 128:return 10;case 192:return 12;case 256:return 14;default:throw new Error("Bad key size.")}}(e),this.key=null,this.encKey=null,this.decKey=null}get blockSize(){return 16}init(e){if(o(null!=e&&!0===e._isBuffer),e.length!==this.bits>>>3)throw new Error("Invalid key size.");return this.destroy(),this.key=Buffer.from(e),this.encKey=null,this.decKey=null,this}createEncryptKey(){if(!this.key)throw new Error("Cipher is not initialized.");const e=this.key;if(e.length!==this.bits>>>3)throw new Error("Invalid key size.");const t=new Uint32Array(60);t[0]=m(e,0),t[1]=m(e,4),t[2]=m(e,8),t[3]=m(e,12);let r,i=0,s=0;if(128===this.bits){for(;;){const e=t[i+3];if(r=t[i],r^=4278190080&c[e>>>16&255],r^=16711680&u[e>>>8&255],r^=65280&a[e>>>0&255],r^=255&h[e>>>24&255],r^=g[s],t[i+4]=r,t[i+5]=t[i+1]^t[i+4],t[i+6]=t[i+2]^t[i+5],t[i+7]=t[i+3]^t[i+6],10===(s+=1))break;i+=4}return t}if(t[i+4]=m(e,16),t[i+5]=m(e,20),192===this.bits){for(;;){const e=t[i+5];if(r=t[i],r^=4278190080&c[e>>>16&255],r^=16711680&u[e>>>8&255],r^=65280&a[e>>>0&255],r^=255&h[e>>>24&255],r^=g[s],t[i+6]=r,t[i+7]=t[i+1]^t[i+6],t[i+8]=t[i+2]^t[i+7],t[i+9]=t[i+3]^t[i+8],8===(s+=1))break;t[i+10]=t[i+4]^t[i+9],t[i+11]=t[i+5]^t[i+10],i+=6}return t}if(t[i+6]=m(e,24),t[i+7]=m(e,28),256===this.bits){for(;;){let e=t[i+7];if(r=t[i],r^=4278190080&c[e>>>16&255],r^=16711680&u[e>>>8&255],r^=65280&a[e>>>0&255],r^=255&h[e>>>24&255],r^=g[s],t[i+8]=r,t[i+9]=t[i+1]^t[i+8],t[i+10]=t[i+2]^t[i+9],t[i+11]=t[i+3]^t[i+10],7===(s+=1))break;e=t[i+11],r=t[i+4],r^=4278190080&c[e>>>24&255],r^=16711680&u[e>>>16&255],r^=65280&a[e>>>8&255],r^=255&h[e>>>0&255],t[i+12]=r,t[i+13]=t[i+5]^t[i+12],t[i+14]=t[i+6]^t[i+13],t[i+15]=t[i+7]^t[i+14],i+=8}return t}throw new Error("Bad key size.")}createDecryptKey(){const e=this.createEncryptKey();let t=0;for(let r=0,i=4*this.rounds;r<i;r+=4,i-=4){let s=e[t+r+0];e[t+r+0]=e[t+i+0],e[t+i+0]=s,s=e[t+r+1],e[t+r+1]=e[t+i+1],e[t+i+1]=s,s=e[t+r+2],e[t+r+2]=e[t+i+2],e[t+i+2]=s,s=e[t+r+3],e[t+r+3]=e[t+i+3],e[t+i+3]=s}for(let r=1;r<this.rounds;r++){let r,i,s,n;r=f[255&h[e[(t+=4)+0]>>>24&255]],r^=l[255&h[e[t+0]>>>16&255]],r^=d[255&h[e[t+0]>>>8&255]],r^=p[255&h[e[t+0]>>>0&255]],i=f[255&h[e[t+1]>>>24&255]],i^=l[255&h[e[t+1]>>>16&255]],i^=d[255&h[e[t+1]>>>8&255]],i^=p[255&h[e[t+1]>>>0&255]],s=f[255&h[e[t+2]>>>24&255]],s^=l[255&h[e[t+2]>>>16&255]],s^=d[255&h[e[t+2]>>>8&255]],s^=p[255&h[e[t+2]>>>0&255]],n=f[255&h[e[t+3]>>>24&255]],n^=l[255&h[e[t+3]>>>16&255]],n^=d[255&h[e[t+3]>>>8&255]],n^=p[255&h[e[t+3]>>>0&255]],e[t+0]=r,e[t+1]=i,e[t+2]=s,e[t+3]=n}return e}getEncryptKey(){return this.encKey||(this.encKey=this.createEncryptKey()),this.encKey}getDecryptKey(){return this.decKey||(this.decKey=this.createDecryptKey()),this.decKey}encrypt(e,t,r,i){const s=this.getEncryptKey();let n,o,f,l,d=m(e,t+0)^s[0],p=m(e,t+4)^s[1],b=m(e,t+8)^s[2],g=m(e,t+12)^s[3],w=this.rounds>>>1,y=0;for(;n=a[d>>>24&255],n^=h[p>>>16&255],n^=c[b>>>8&255],n^=u[g>>>0&255],n^=s[y+4],o=a[p>>>24&255],o^=h[b>>>16&255],o^=c[g>>>8&255],o^=u[d>>>0&255],o^=s[y+5],f=a[b>>>24&255],f^=h[g>>>16&255],f^=c[d>>>8&255],f^=u[p>>>0&255],f^=s[y+6],l=a[g>>>24&255],l^=h[d>>>16&255],l^=c[p>>>8&255],l^=u[b>>>0&255],l^=s[y+7],y+=8,0!=(w-=1);)d=a[n>>>24&255],d^=h[o>>>16&255],d^=c[f>>>8&255],d^=u[l>>>0&255],d^=s[y+0],p=a[o>>>24&255],p^=h[f>>>16&255],p^=c[l>>>8&255],p^=u[n>>>0&255],p^=s[y+1],b=a[f>>>24&255],b^=h[l>>>16&255],b^=c[n>>>8&255],b^=u[o>>>0&255],b^=s[y+2],g=a[l>>>24&255],g^=h[n>>>16&255],g^=c[o>>>8&255],g^=u[f>>>0&255],g^=s[y+3];return d=4278190080&c[n>>>24&255],d^=16711680&u[o>>>16&255],d^=65280&a[f>>>8&255],d^=255&h[l>>>0&255],d^=s[y+0],p=4278190080&c[o>>>24&255],p^=16711680&u[f>>>16&255],p^=65280&a[l>>>8&255],p^=255&h[n>>>0&255],p^=s[y+1],b=4278190080&c[f>>>24&255],b^=16711680&u[l>>>16&255],b^=65280&a[n>>>8&255],b^=255&h[o>>>0&255],b^=s[y+2],g=4278190080&c[l>>>24&255],g^=16711680&u[n>>>16&255],g^=65280&a[o>>>8&255],g^=255&h[f>>>0&255],g^=s[y+3],_(r,d,i+0),_(r,p,i+4),_(r,b,i+8),_(r,g,i+12),this}decrypt(e,t,r,i){const s=this.getDecryptKey();let n,o,a,h,c=m(e,t+0)^s[0],u=m(e,t+4)^s[1],g=m(e,t+8)^s[2],w=m(e,t+12)^s[3],y=this.rounds>>>1,v=0;for(;n=f[c>>>24&255],n^=l[w>>>16&255],n^=d[g>>>8&255],n^=p[u>>>0&255],n^=s[v+4],o=f[u>>>24&255],o^=l[c>>>16&255],o^=d[w>>>8&255],o^=p[g>>>0&255],o^=s[v+5],a=f[g>>>24&255],a^=l[u>>>16&255],a^=d[c>>>8&255],a^=p[w>>>0&255],a^=s[v+6],h=f[w>>>24&255],h^=l[g>>>16&255],h^=d[u>>>8&255],h^=p[c>>>0&255],h^=s[v+7],v+=8,0!=(y-=1);)c=f[n>>>24&255],c^=l[h>>>16&255],c^=d[a>>>8&255],c^=p[o>>>0&255],c^=s[v+0],u=f[o>>>24&255],u^=l[n>>>16&255],u^=d[h>>>8&255],u^=p[a>>>0&255],u^=s[v+1],g=f[a>>>24&255],g^=l[o>>>16&255],g^=d[n>>>8&255],g^=p[h>>>0&255],g^=s[v+2],w=f[h>>>24&255],w^=l[a>>>16&255],w^=d[o>>>8&255],w^=p[n>>>0&255],w^=s[v+3];return c=b[n>>>24&255]<<24,c^=b[h>>>16&255]<<16,c^=b[a>>>8&255]<<8,c^=b[o>>>0&255]<<0,c^=s[v+0],u=b[o>>>24&255]<<24,u^=b[n>>>16&255]<<16,u^=b[h>>>8&255]<<8,u^=b[a>>>0&255]<<0,u^=s[v+1],g=b[a>>>24&255]<<24,g^=b[o>>>16&255]<<16,g^=b[n>>>8&255]<<8,g^=b[h>>>0&255]<<0,g^=s[v+2],w=b[h>>>24&255]<<24,w^=b[a>>>16&255]<<16,w^=b[o>>>8&255]<<8,w^=b[n>>>0&255]<<0,w^=s[v+3],_(r,c,i+0),_(r,u,i+4),_(r,g,i+8),_(r,w,i+12),this}destroy(){if(this.key)for(let e=0;e<this.key.length;e++)this.key[e]=0;if(this.encKey)for(let e=0;e<60;e++)this.encKey[e]=0;if(this.decKey)for(let e=0;e<60;e++)this.decKey[e]=0;return this.key=null,this.encKey=null,this.decKey=null,this}}}],["bcrypto","/lib/js/ciphers/modes.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(35,r),a=__browser_require__(362,r),h=Buffer.alloc(0);class c{constructor(e,t=!1){o(e&&"function"==typeof e.encrypt),o("number"==typeof e.blockSize),o("boolean"==typeof t),this.ctx=e,this.padding=t,this.block=Buffer.alloc(e.blockSize),this.blockPos=-1,this.last=null,this.lastSize=0,t&&(this.last=Buffer.alloc(e.blockSize))}get blockSize(){return this.block.length}init(e,t){return null==t&&(t=h),o(null!=e&&!0===e._isBuffer),o(null!=t&&!0===t._isBuffer),this.ctx.init(e),this.blockPos=0,this.lastSize=0,this._init(e,t),this}update(e){if(o(null!=e&&!0===e._isBuffer),-1===this.blockPos)throw new Error("Cipher is not initialized.");const t=this.block.length;let r=this.blockPos,i=e.length,s=0,n=0,a=0;if(this.blockPos=(this.blockPos+i)%t,this.padding&&(s+=this.lastSize),r>0){let o=t-r;if(o>i&&(o=i),e.copy(this.block,r,n,n+o),i-=o,n+=o,(r+=o)<t)return Buffer.alloc(0);s+=t}s+=i-i%t;const h=Buffer.alloc(s);for(this.padding&&(a+=this.last.copy(h,a,0,this.lastSize)),r>0&&(this._update(this.block,0,h,a),a+=t);i>=t;)this._update(e,n,h,a),a+=t,n+=t,i-=t;return i>0&&e.copy(this.block,0,n,n+i),this.padding&&s>0?(this.lastSize=h.copy(this.last,0,s-t,s),h.slice(0,s-t)):h}final(){if(-1===this.blockPos)throw new Error("Cipher is not initialized.");try{return this._final()}finally{this.destroy()}}destroy(){this.ctx.destroy(),this.blockPos=-1,this.lastSize=0;for(let e=0;e<this.blockSize;e++)this.block[e]=0;if(this.padding)for(let e=0;e<this.blockSize;e++)this.last[e]=0;this._destroy()}setAAD(e){throw new Error("Cipher is not authenticated.")}getAuthTag(){throw new Error("Cipher is not authenticated.")}setAuthTag(e){throw new Error("Cipher is not authenticated.")}_init(){throw new Error("Not implemented.")}_update(){throw new Error("Not implemented.")}_final(){throw new Error("Not implemented.")}_destroy(){throw new Error("Not implemented.")}}class u extends c{constructor(e,t=!1){o("boolean"==typeof t),super(e,!1),this.chain=t,this.prev=null,t&&(this.prev=Buffer.alloc(this.blockSize))}_init(e,t){o(null!=t&&!0===t._isBuffer),this.chain?(o(t.length===this.blockSize),t.copy(this.prev,0)):o(0===t.length)}_update(e,t,r,i){if(this.chain){for(let s=0;s<this.blockSize;s++)r[i+s]=e[t+s]^this.prev[s];this.ctx.encrypt(r,i,r,i),r.copy(this.prev,0,i,i+this.blockSize)}else this.ctx.encrypt(e,t,r,i)}_final(){const e=this.blockSize-this.blockPos,t=Buffer.from(this.block);for(let r=this.blockPos;r<this.blockSize;r++)t[r]=e;return this._update(t,0,t,0),t}_destroy(){if(this.chain)for(let e=0;e<this.blockSize;e++)this.prev[e]=0}}class f extends c{constructor(e,t=!1){o("boolean"==typeof t),super(e,!0),this.chain=t,this.prev=null,t&&(this.prev=Buffer.alloc(this.blockSize))}_init(e,t){o(null!=t&&!0===t._isBuffer),this.chain?(o(t.length===this.blockSize),t.copy(this.prev,0)):o(0===t.length)}_update(e,t,r,i){if(this.chain){this.ctx.decrypt(e,t,r,i);for(let e=0;e<this.blockSize;e++)r[i+e]^=this.prev[e];e.copy(this.prev,0,t,t+this.blockSize)}else this.ctx.decrypt(e,t,r,i)}_final(){if(0!==this.blockPos)throw new Error("Bad decrypt (trailing bytes).");if(0===this.lastSize)throw new Error("Bad decrypt (no data).");o(this.lastSize===this.last.length),o(this.lastSize===this.blockSize);const e=Buffer.from(this.last),t=e[e.length-1];if(0===t||t>this.blockSize)throw new Error("Bad decrypt (out of range).");const r=this.blockSize-t;for(let i=r;i<this.blockSize;i++)if(e[i]!==t)throw new Error("Bad decrypt (padding).");return e.slice(0,r)}_destroy(){if(this.chain)for(let e=0;e<this.blockSize;e++)this.prev[e]=0}}class l extends u{constructor(e){super(e,!1)}}class d extends f{constructor(e){super(e,!1)}}class p extends u{constructor(e){super(e,!0)}}class b extends f{constructor(e){super(e,!0)}}class g extends c{constructor(e){super(e,!1),this.state=Buffer.alloc(this.blockSize),this.ctr=Buffer.alloc(this.blockSize)}_init(e,t){o(null!=t&&!0===t._isBuffer),o(t.length===this.blockSize),t.copy(this.ctr,0)}_increment(){for(let e=this.ctr.length-1;e>=0&&(this.ctr[e]+=1,0===this.ctr[e]);e--);}_update(e,t,r,i){this.ctx.encrypt(this.ctr,0,this.state,0),this._increment();for(let s=0;s<this.blockSize;s++)r[i+s]=e[t+s]^this.state[s]}_final(){this.ctx.encrypt(this.ctr,0,this.state,0);const e=Buffer.alloc(this.blockPos);for(let t=0;t<this.blockPos;t++)e[t]=this.block[t]^this.state[t];return e}_destroy(){for(let e=0;e<this.blockPos;e++)this.state[e]=0,this.ctr[e]=0}}class m extends g{constructor(e){super(e)}}class _ extends g{constructor(e){super(e)}}class w extends c{constructor(e,t=!0){o("boolean"==typeof t),super(e,!1),this.encrypt=t,this.state=Buffer.alloc(this.blockSize),this.prev=Buffer.alloc(this.blockSize)}_init(e,t){o(null!=t&&!0===t._isBuffer),o(t.length===this.blockSize),t.copy(this.prev,0)}_update(e,t,r,i){this.ctx.encrypt(this.prev,0,this.state,0);for(let s=0;s<this.blockSize;s++)r[i+s]=e[t+s]^this.state[s];this.encrypt?r.copy(this.prev,0,i,i+this.blockSize):e.copy(this.prev,0,t,t+this.blockSize)}_final(){this.ctx.encrypt(this.prev,0,this.state,0);const e=Buffer.alloc(this.blockPos);for(let t=0;t<this.blockPos;t++)e[t]=this.block[t]^this.state[t];return e}_destroy(){for(let e=0;e<this.blockPos;e++)this.state[e]=0,this.prev[e]=0}}class y extends w{constructor(e){super(e,!0)}}class v extends w{constructor(e){super(e,!1)}}class E extends c{constructor(e){super(e,!1),this.state=Buffer.alloc(this.blockSize)}_init(e,t){o(null!=t&&!0===t._isBuffer),o(t.length===this.blockSize),t.copy(this.state,0)}_update(e,t,r,i){this.ctx.encrypt(this.state,0,this.state,0);for(let s=0;s<this.blockSize;s++)r[i+s]=e[t+s]^this.state[s]}_final(){this.ctx.encrypt(this.state,0,this.state,0);const e=Buffer.alloc(this.blockPos);for(let t=0;t<this.blockPos;t++)e[t]=this.block[t]^this.state[t];return e}_destroy(){for(let e=0;e<this.blockPos;e++)this.state[e]=0}}class S extends E{constructor(e){super(e)}}class I extends E{constructor(e){super(e)}}class k{constructor(e,t){this.aead=new a.GCM(e),this.encrypt=t,this.tag=null,this.mac=null}get blockSize(){return 16}init(e,t){return this.aead.init(e,t),this.tag=null,this.mac=null,this}update(e){o(null!=e&&!0===e._isBuffer);const t=Buffer.from(e);return this.encrypt?this.aead.encrypt(t):this.aead.decrypt(t),t}final(){if(this.encrypt)return this.mac=this.aead.final(16),Buffer.alloc(0);if(!this.tag)throw new Error("No tag provided.");if(!this.aead.verify(this.tag))throw new Error("Invalid tag.");return Buffer.alloc(0)}destroy(){if(this.aead.destroy(),this.tag){for(let e=0;e<this.tag.length;e++)this.tag[e]=0;this.tag=null}if(this.mac){for(let e=0;e<16;e++)this.mac[e]=0;this.mac=null}}setAAD(e){return this.aead.aad(e),this}getAuthTag(){if(!this.encrypt)throw new Error("Must be a cipher context.");if(!this.mac)throw new Error("Cipher is not finalized.");return Buffer.from(this.mac)}setAuthTag(e){if(o(null!=e&&!0===e._isBuffer),this.encrypt)throw new Error("Must be a decipher context.");if(-1===this.aead.mode)throw new Error("Cipher is not initialized.");if(4!==e.length&&8!==e.length&&(e.length<12||e.length>16))throw new RangeError("Invalid tag size.");return this.tag=Buffer.from(e),this}}class A extends k{constructor(e){super(e,!0)}}class O extends k{constructor(e){super(e,!1)}}e.Cipher=c,e.BlockCipher=u,e.BlockDecipher=f,e.ECBCipher=l,e.ECBDecipher=d,e.CBCCipher=p,e.CBCDecipher=b,e.CTR=g,e.CTRCipher=m,e.CTRDecipher=_,e.CFB=w,e.CFBCipher=y,e.CFBDecipher=v,e.OFB=E,e.OFBCipher=S,e.OFBDecipher=I,e.GCM=k,e.GCMCipher=A,e.GCMDecipher=O,e.get=function(e,t=!0){switch(o("string"==typeof e),o("boolean"==typeof t),e){case"ECB":return t?l:d;case"CBC":return t?p:b;case"CTR":return t?m:_;case"CFB":return t?y:v;case"OFB":return t?S:I;case"GCM":return t?A:O;default:throw new Error(`Unknown mode: ${e}.`)}}}],["bcrypto","/lib/js/ciphers/gcm.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(35,r),a=Buffer.alloc(16,0),h=-1,c=new Uint16Array([0,7200,14400,9312,28800,27808,18624,21728,57600,64800,55616,50528,37248,36256,43456,46560]);class u{constructor(){this.state=new Uint32Array(4),this.block=Buffer.alloc(16),this.size=h,this.adLen=0,this.ctLen=0,this.table=new Array(16);for(let e=0;e<16;e++)this.table[e]=new Uint32Array(4)}init(e){o(null!=e&&!0===e._isBuffer),o(16===e.length);for(let e=0;e<4;e++)this.state[e]=0;this.size=0,this.adLen=0,this.ctLen=0;for(let e=0;e<16;e++)for(let t=0;t<4;t++)this.table[e][t]=0;const t=new Uint32Array(4);t[1]=b(e,0),t[0]=b(e,4),t[3]=b(e,8),t[2]=b(e,12),this.table[p(1)]=t;for(let e=2;e<16;e+=2)this.table[p(e)]=this.double(this.table[p(e>>>1)]),this.table[p(e+1)]=this.add(this.table[p(e)],t);return this}absorb(e){return this._absorb(e,e.length),this}_absorb(e,t){o(this.size!==h,"Context is not initialized.");let r=15&this.size,i=0;if(this.size+=t,r>0){let s=16-r;if(s>t&&(s=t),e.copy(this.block,r,i,i+s),t-=s,i+=s,(r+=s)<16)return;this.transform(this.block,0)}for(;t>=16;)this.transform(e,i),i+=16,t-=16;t>0&&e.copy(this.block,0,i,i+t)}transform(e,t){this.state[1]^=b(e,t+0),this.state[0]^=b(e,t+4),this.state[3]^=b(e,t+8),this.state[2]^=b(e,t+12),this.mul(this.state)}pad(){const e=15&this.size;0!==e&&this._absorb(a,16-e)}aad(e){return o(null!=e&&!0===e._isBuffer),o(0===this.ctLen),this.adLen+=e.length,this.absorb(e)}update(e){return o(null!=e&&!0===e._isBuffer),0===e.length?this:(0===this.ctLen&&this.pad(),this.ctLen+=e.length,this.absorb(e))}final(){const e=Buffer.alloc(16);this.pad();const t=8*this.adLen,r=8*this.ctLen;this.state[1]^=l(t),this.state[0]^=d(t),this.state[3]^=l(r),this.state[2]^=d(r),this.mul(this.state),g(e,this.state[1],0),g(e,this.state[0],4),g(e,this.state[3],8),g(e,this.state[2],12);for(let e=0;e<4;e++)this.state[e]=0;for(let e=0;e<16;e++)this.block[e]=0;this.size=h,this.adLen=0,this.ctLen=0;for(let e=0;e<16;e++)for(let t=0;t<4;t++)this.table[e][t]=0;return e}destroy(){for(let e=0;e<4;e++)this.state[e]=0;for(let e=0;e<16;e++)this.block[e]=0;this.size=h,this.adLen=0,this.ctLen=0;for(let e=0;e<16;e++)for(let t=0;t<4;t++)this.table[e][t]=0}add(e,t){o(e instanceof Uint32Array),o(4===e.length),o(t instanceof Uint32Array),o(4===t.length);const r=new Uint32Array(4);return r[0]=e[0]^t[0],r[1]=e[1]^t[1],r[2]=e[2]^t[2],r[3]=e[3]^t[3],r}double(e){o(e instanceof Uint32Array),o(4===e.length);const t=new Uint32Array(4),r=1==(1&e[2]);let i;return t[3]=e[3],t[2]=e[2],i=1&t[3],t[3]>>>=1,t[2]>>>=1,t[2]|=i<<31,t[3]|=(1&e[0])<<31,t[1]=e[1],t[0]=e[0],i=1&t[1],t[1]>>>=1,t[0]>>>=1,t[0]|=i<<31,r&&(t[1]^=3774873600,t[0]^=0),t}mul(e){o(e instanceof Uint32Array),o(4===e.length);const t=new Uint32Array(4),r=new Uint32Array(2);let i,s;for(let n=0;n<2;n++){r[0]=e[2],r[1]=e[3],1===n&&(r[0]=e[0],r[1]=e[1]);for(let e=0;e<64;e+=4){const e=15&t[2];i=15&t[3],t[3]>>>=4,t[2]>>>=4,t[2]|=i<<28,t[3]|=t[0]<<28,i=15&t[1],t[1]>>>=4,t[0]>>>=4,t[0]|=i<<28,t[1]^=c[e]<<16,s=this.table[15&r[0]],t[0]^=s[0],t[1]^=s[1],t[2]^=s[2],t[3]^=s[3],i=15&r[1],r[1]>>>=4,r[0]>>>=4,r[0]|=i<<28}}e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]}}class f{constructor(e){if(o(e&&"object"==typeof e),o("number"==typeof e.blockSize),16!==e.blockSize)throw new Error("GCM only available with a 128 bit block size.");this.ctx=e,this.state=Buffer.alloc(16),this.block=Buffer.alloc(16),this.pos=0}init(e){this.ctx.init(e);for(let e=0;e<16;e++)this.state[e]=0;return this.pos=0,this}set(e){return o(null!=e&&!0===e._isBuffer),o(12===e.length||16===e.length),this.state[0]=e[0],this.state[1]=e[1],this.state[2]=e[2],this.state[3]=e[3],this.state[4]=e[4],this.state[5]=e[5],this.state[6]=e[6],this.state[7]=e[7],this.state[8]=e[8],this.state[9]=e[9],this.state[10]=e[10],this.state[11]=e[11],16===e.length?(this.state[12]=e[12],this.state[13]=e[13],this.state[14]=e[14],this.state[15]=e[15]):(this.state[12]=0,this.state[13]=0,this.state[14]=0,this.state[15]=1),this}encrypt(e){o(null!=e&&!0===e._isBuffer);for(let t=0;t<e.length;t++){if(0==(15&this.pos)){this.ctx.encrypt(this.state,0,this.block,0);for(let e=15;e>=12&&(this.state[e]+=1,0===this.state[e]);e--);this.pos=0}e[t]^=this.block[this.pos++]}return e}destroy(){this.ctx.destroy();for(let e=0;e<16;e++)this.state[e]=0,this.block[e]=0;return this.pos=0,this}}function l(e){return e*(1/4294967296)>>>0}function d(e){return e>>>0}function p(e){return e=(e=e<<2&12|e>>>2&3)<<1&10|e>>>1&5}function b(e,t){return 16777216*e[t++]+65536*e[t++]+256*e[t++]+e[t++]}function g(e,t,r){return e[r++]=t>>>24,e[r++]=t>>>16,e[r++]=t>>>8,e[r++]=t,r}e.GHASH=u,e.CTR=f,e.GCM=class{constructor(e){this.cipher=new f(e),this.mac=new u,this.key=Buffer.alloc(16),this.mask=Buffer.alloc(16),this.mode=-1}init(e,t){o(null!=t&&!0===t._isBuffer);for(let e=0;e<16;e++)this.key[e]=0,this.mask[e]=0;return this.mode=0,this.cipher.init(e),this.cipher.encrypt(this.key),this.mac.init(this.key),12!==t.length&&(this.mac.update(t),t=this.mac.final(),this.mac.init(this.key)),this.cipher.set(t),this.cipher.encrypt(this.mask),this}aad(e){if(-1===this.mode)throw new Error("Cipher is not initialized.");if(0!==this.mode)throw new Error("Invalid state for aad.");return this.mac.aad(e),this}encrypt(e){if(-1===this.mode)throw new Error("Cipher is not initialized.");if(0!==this.mode&&1!==this.mode)throw new Error("Invalid state for encrypt.");return this.mode=1,this.cipher.encrypt(e),this.mac.update(e),e}decrypt(e){if(-1===this.mode)throw new Error("Cipher is not initialized.");if(0!==this.mode&&2!==this.mode)throw new Error("Invalid state for decrypt.");return this.mode=2,this.mac.update(e),this.cipher.encrypt(e),e}auth(e){if(-1===this.mode)throw new Error("Cipher is not initialized.");if(0!==this.mode&&3!==this.mode)throw new Error("Invalid state for auth.");return this.mode=3,this.mac.update(e),e}final(e=16){if(o(e>>>0===e),o(4===e||8===e||e>=12&&e<=16),-1===this.mode)throw new Error("Cipher is not initialized.");const t=this.mac.final();for(let e=0;e<16;e++)t[e]^=this.mask[e];return this.mode=-1,t.slice(0,e)}verify(e){o(null!=e&&!0===e._isBuffer);const t=this.final(e.length);let r=0;for(let i=0;i<t.length;i++)r|=t[i]^e[i];return r-1>>>31!=0}destroy(){this.cipher.destroy(),this.mac.destroy();for(let e=0;e<16;e++)this.key[e]=0,this.mask[e]=0;this.mode=-1}}}],["bcoin","/lib/wallet/nodeclient.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(196,r);r.exports=class extends a{constructor(e){super(),this.node=e,this.network=e.network,this.filter=null,this.opened=!1,this.init()}init(){this.node.chain.on("connect",async(e,t)=>{this.opened&&await this.emitAsync("block connect",e,t.txs)}),this.node.chain.on("disconnect",async(e,t)=>{this.opened&&await this.emitAsync("block disconnect",e)}),this.node.on("tx",e=>{this.opened&&this.emit("tx",e)}),this.node.on("reset",e=>{this.opened&&this.emit("chain reset",e)})}async open(e){o(!this.opened,"NodeClient is already open."),this.opened=!0,setImmediate(()=>this.emit("connect"))}async close(){o(this.opened,"NodeClient is not open."),this.opened=!1,setImmediate(()=>this.emit("disconnect"))}bind(e,t){return this.on(e,t)}hook(e,t){return this.on(e,t)}async getTip(){return this.node.chain.tip}async getEntry(e){const t=await this.node.chain.getEntry(e);return t&&await this.node.chain.isMainChain(t)?t:null}async send(e){this.node.relay(e)}async setFilter(e){this.filter=e,this.node.pool.setFilter(e)}async addFilter(e){this.node.pool.queueFilterLoad()}async resetFilter(){this.node.pool.queueFilterLoad()}async estimateFee(e){return this.node.fees?{rate:this.node.fees.estimateFee(e)}:{rate:this.network.feeRate}}async getHashes(e=-1,t=-1){return this.node.chain.getHashes(e,t)}async rescan(e){return this.node.spv?this.node.chain.reset(e):this.node.chain.scan(e,this.filter,(e,t)=>this.emitAsync("block rescan",e,t))}}}],["bcoin","/lib/wallet/plugin.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(19,r),a=__browser_require__(365,r),h=__browser_require__(363,r),c=__browser_require__(355,r),u=__browser_require__(370,r),f=e;f.id="walletdb",f.init=function(e){return new class extends o{constructor(e){super(),this.config=e.config.filter("wallet"),e.config.options.file&&this.config.open("wallet.conf"),this.network=e.network,this.logger=e.logger,this.client=new h(e),this.wdb=new a({network:this.network,logger:this.logger,workers:this.workers,client:this.client,prefix:this.config.prefix,memory:this.config.bool("memory",e.memory),maxFiles:this.config.uint("max-files"),cacheSize:this.config.mb("cache-size"),witness:this.config.bool("witness"),wipeNoReally:this.config.bool("wipe-no-really"),spv:e.spv}),this.rpc=new u(this),this.http=new c({network:this.network,logger:this.logger,node:this,ssl:this.config.bool("ssl"),keyFile:this.config.path("ssl-key"),certFile:this.config.path("ssl-cert"),host:this.config.str("http-host"),port:this.config.uint("http-port"),apiKey:this.config.str("api-key",e.config.str("api-key")),walletAuth:this.config.bool("wallet-auth"),noAuth:this.config.bool("no-auth"),cors:this.config.bool("cors"),adminToken:this.config.str("admin-token")}),this.init()}init(){this.wdb.on("error",e=>this.emit("error",e)),this.http.on("error",e=>this.emit("error",e))}async open(){await this.wdb.open(),this.rpc.wallet=this.wdb.primary,await this.http.open()}async close(){await this.http.close(),this.rpc.wallet=null,await this.wdb.close()}}(e)}}],["bcoin","/lib/wallet/walletdb.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(195,r),h=__browser_require__(19,r),c=__browser_require__(24,r),{BloomFilter:u}=__browser_require__(264,r),{Lock:f,MapLock:l}=__browser_require__(203,r),d=__browser_require__(176,r),p=__browser_require__(198,r),{safeEqual:b}=__browser_require__(335,r),g=__browser_require__(358,r),m=__browser_require__(14,r),_=__browser_require__(351,r),w=__browser_require__(352,r),y=__browser_require__(366,r),v=__browser_require__(350,r),E=__browser_require__(111,r),S=__browser_require__(356,r),I=__browser_require__(368,r),k=__browser_require__(369,r),A=S.wdb,O=S.txdb,{ChainState:x,BlockMeta:R,TXRecord:M,MapRecord:P}=I;class B{constructor(e){this.network=m.primary,this.logger=p.global,this.workers=null,this.client=null,this.feeRate=0,this.prefix=null,this.location=null,this.memory=!0,this.maxFiles=64,this.cacheSize=16<<20,this.compression=!0,this.spv=!1,this.witness=!1,this.wipeNoReally=!1,e&&this.fromOptions(e)}fromOptions(e){return null!=e.network&&(this.network=m.get(e.network)),null!=e.logger&&(o("object"==typeof e.logger),this.logger=e.logger),null!=e.workers&&(o("object"==typeof e.workers),this.workers=e.workers),null!=e.client&&(o("object"==typeof e.client),this.client=e.client),null!=e.feeRate&&(o(e.feeRate>>>0===e.feeRate),this.feeRate=e.feeRate),null!=e.prefix&&(o("string"==typeof e.prefix),this.prefix=e.prefix,this.location=a.join(this.prefix,"wallet")),null!=e.location&&(o("string"==typeof e.location),this.location=e.location),null!=e.memory&&(o("boolean"==typeof e.memory),this.memory=e.memory),null!=e.maxFiles&&(o(e.maxFiles>>>0===e.maxFiles),this.maxFiles=e.maxFiles),null!=e.cacheSize&&(o(Number.isSafeInteger(e.cacheSize)&&e.cacheSize>=0),this.cacheSize=e.cacheSize),null!=e.compression&&(o("boolean"==typeof e.compression),this.compression=e.compression),null!=e.spv&&(o("boolean"==typeof e.spv),this.spv=e.spv),null!=e.witness&&(o("boolean"==typeof e.witness),this.witness=e.witness),null!=e.wipeNoReally&&(o("boolean"==typeof e.wipeNoReally),this.wipeNoReally=e.wipeNoReally),this}static fromOptions(e){return(new this).fromOptions(e)}}function N(e){const t=Buffer.allocUnsafe(4);return t.writeUInt32LE(e,0,!0),t}function T(e){const t=Buffer.alloc(1+e.length);return t[0]=e.length,t.write(e,1,e.length,"ascii"),t}function C(e){return o(e.length>0),o(e[0]===e.length-1),e.toString("ascii",1,e.length)}r.exports=class extends h{constructor(e){super(),this.options=new B(e),this.network=this.options.network,this.logger=this.options.logger.context("wallet"),this.workers=this.options.workers,this.client=this.options.client||new k(this),this.feeRate=this.options.feeRate,this.db=d.create(this.options),this.primary=null,this.state=new x,this.confirming=!1,this.height=0,this.wallets=new Map,this.depth=0,this.rescanning=!1,this.filterSent=!1,this.readLock=new l,this.writeLock=new f,this.txLock=new f,this.filter=new u,this.init()}init(){let e=3e6,t=-1;this.options.spv&&(e=2e4,t=u.flags.ALL),this.filter=u.fromRate(e,.001,t),this._bind()}_bind(){this.client.on("error",e=>{this.emit("error",e)}),this.client.on("connect",async()=>{try{await this.syncNode()}catch(e){this.emit("error",e)}}),this.client.on("disconnect",async()=>{this.filterSent=!1}),this.client.bind("block connect",async(e,t)=>{try{await this.addBlock(e,t)}catch(e){this.emit("error",e)}}),this.client.bind("block disconnect",async e=>{try{await this.removeBlock(e)}catch(e){this.emit("error",e)}}),this.client.hook("block rescan",async(e,t)=>{try{await this.rescanBlock(e,t)}catch(e){this.emit("error",e)}}),this.client.bind("tx",async e=>{try{await this.addTX(e)}catch(e){this.emit("error",e)}}),this.client.bind("chain reset",async e=>{try{await this.resetChain(e)}catch(e){this.emit("error",e)}})}async open(){this.logger.info("Opening WalletDB..."),await this.db.open(),await this.db.verify(A.V.encode(),"wallet",7),await this.verifyNetwork(),this.depth=await this.getDepth(),this.options.wipeNoReally&&await this.wipe(),await this.watch(),await this.connect(),this.logger.info("WalletDB loaded (depth=%d, height=%d, start=%d).",this.depth,this.state.height,this.state.startHeight);const e=await this.ensure({id:"primary"}),t=await e.receiveAddress();this.logger.info("Loaded primary wallet (id=%s, wid=%d, address=%s)",e.id,e.wid,t.toString(this.network)),this.primary=e}async verifyNetwork(){const e=await this.db.get(A.O.encode());if(!e){const e=this.db.batch();return e.put(A.O.encode(),N(this.network.magic)),e.write()}if(e.readUInt32LE(0,!0)!==this.network.magic)throw new Error("Network mismatch for WalletDB.");return undefined}async close(){await this.disconnect();for(const e of this.wallets.values())await e.destroy(),this.unregister(e);return this.db.close()}async watch(){const e=this.db.iterator({gte:A.p.min(),lte:A.p.max()});let t=0;await e.each(e=>{const[r]=A.p.decode(e);this.filter.add(r),t+=1}),this.logger.info("Added %d hashes to WalletDB filter.",t);const r=this.db.iterator({gte:A.o.min(),lte:A.o.max()});let i=0;await r.each(e=>{const[t,r]=A.o.decode(e),s=new E(t,r).toRaw();this.filter.add(s),i+=1}),this.logger.info("Added %d outpoints to WalletDB filter.",i)}async connect(){return this.client.open()}async disconnect(){return this.client.close()}async syncNode(){const e=await this.txLock.lock();try{this.logger.info("Resyncing from server..."),await this.syncState(),await this.syncFilter(),await this.syncChain(),await this.resend()}finally{e()}}async syncState(){const e=await this.getState();if(e)return await this.getBlock(0)?(this.state=e,this.height=e.height,undefined):this.migrateState(e);this.logger.info("Initializing database state from server.");const t=this.db.batch(),r=await this.client.getHashes();let i=null;for(let e=0;e<r.length;e++){const s=r[e],n=new R(s,e);t.put(A.h.encode(e),n.toHash()),i=n}o(i);const s=this.state.clone();return s.startHeight=i.height,s.startHash=i.hash,s.height=i.height,s.marked=!1,t.put(A.R.encode(),s.toRaw()),await t.write(),this.state=s,this.height=s.height,undefined}async migrateState(e){const t=this.db.batch();this.logger.info("Migrating to new sync state.");const r=await this.client.getHashes(0,e.height);for(let e=0;e<r.length;e++){const i=r[e],s=new R(i,e);t.put(A.h.encode(e),s.toHash())}await t.write(),this.state=e,this.height=e.height}async syncChain(){let e=this.state.height;for(this.logger.info("Syncing state from height %d.",e);;){const t=await this.getBlock(e);if(o(t),await this.client.getEntry(t.hash))break;o(0!==e),e-=1}return this.scan(e)}async scan(e){null==e&&(e=this.state.startHeight),o(e>>>0===e,"WDB: Must pass in a height."),this.logger.info("WalletDB is scanning %d blocks.",this.state.height-e+1),await this.rollback(e);const t=await this.getTip();try{this.rescanning=!0,await this.client.rescan(t.hash)}finally{this.rescanning=!1}}async rescan(e){const t=await this.txLock.lock();try{return await this._rescan(e)}finally{t()}}async _rescan(e){return this.scan(e)}async send(e){return this.client.send(e)}async estimateFee(e){if(this.feeRate>0)return this.feeRate;const t=await this.client.estimateFee(e);if(!t)throw new Error("Fee not found.");if(!Number.isInteger(t.rate))throw new Error("Fee is not an integer.");return t.rate<this.network.feeRate?this.network.feeRate:t.rate>this.network.maxFeeRate?this.network.maxFeeRate:t.rate}syncFilter(){return this.logger.info("Sending filter to server (%dmb).",this.filter.size/8/(1<<20)),this.filterSent=!0,this.client.setFilter(this.filter)}addFilter(e){return this.filterSent?this.client.addFilter(e):undefined}resetFilter(){return this.filterSent?this.client.resetFilter():undefined}backup(e){return this.db.backup(e)}async wipe(){this.logger.warning("Wiping WalletDB TXDB..."),this.logger.warning("I hope you know what you're doing.");const e=this.db.iterator(),t=this.db.batch();let r=0;return await e.each(e=>{switch(e[0]){case 98:case 99:case 101:case 116:case 111:case 104:case 82:t.del(e),r+=1}}),this.logger.warning("Wiped %d txdb records.",r),t.write()}async getDepth(){const e=await this.db.get(A.D.encode());return e?e.readUInt32LE(0,!0):0}testFilter(e){return this.filter.test(e)}addHash(e){return this.filter.add(e),this.addFilter(e)}addOutpoint(e,t){const r=new E(e,t);this.filter.add(r.toRaw())}dump(){return this.db.dump()}register(e){o(!this.wallets.has(e.wid)),this.wallets.set(e.wid,e)}unregister(e){o(this.wallets.has(e.wid)),this.wallets.delete(e.wid)}async ensureWID(e){return"number"==typeof e?await this.db.has(A.W.encode(e))?e:-1:this.getWID(e)}async getWID(e){const t=await this.db.get(A.l.encode(e));return t?(o(4===t.length),t.readUInt32LE(0,!0)):-1}async getID(e){const t=await this.db.get(A.W.encode(e));return t?C(t):null}async get(e){const t=await this.ensureWID(e);if(-1===t)return null;const r=await this.readLock.lock(t);try{return await this._get(t)}finally{r()}}async _get(e){const t=this.wallets.get(e);if(t)return t;const r=await this.getID(e);if(!r)return null;const i=await this.db.get(A.w.encode(e));o(i);const s=y.fromRaw(this,i);return s.wid=e,s.id=r,await s.open(),this.register(s),s}save(e,t){const r=t.wid,i=t.id;e.put(A.w.encode(r),t.toRaw()),e.put(A.W.encode(r),T(i)),e.put(A.l.encode(i),N(r))}increment(e,t){e.put(A.D.encode(),N(t+1))}async rename(e,t){const r=await this.writeLock.lock();try{return await this._rename(e,t)}finally{r()}}async _rename(e,t){if(!w.isName(t))throw new Error("WDB: Bad wallet ID.");if(await this.has(t))throw new Error("WDB: ID not available.");const r=this.db.batch();r.put(A.W.encode(e.wid),T(t)),r.del(A.l.encode(e.id)),r.put(A.l.encode(t),N(e.wid)),await r.write(),e.id=t}renameAccount(e,t,r){const i=t.wid,s=t.accountIndex;e.del(A.i.encode(i,t.name)),e.put(A.i.encode(i,r),N(s)),e.put(A.n.encode(i,s),T(r)),t.name=r}async remove(e){const t=await this.ensureWID(e);if(-1===t)return!1;const r=await this.readLock.lock(t),i=await this.writeLock.lock(),s=await this.txLock.lock();try{return await this._remove(t)}finally{s(),i(),r()}}async _remove(e){const t=await this.getID(e);if(!t)return!1;if("primary"===t)throw new Error("Cannot remove primary wallet.");const r=this.db.batch();r.del(A.w.encode(e)),r.del(A.W.encode(e)),r.del(A.l.encode(t));const i=this.db.iterator({gte:A.P.min(e),lte:A.P.max(e)});await i.each((t,i)=>{const[,s]=A.P.decode(t);return r.del(t),this.removePathMap(r,s,e)});const s=e=>this.db.iterator(e).each(e=>r.del(e));await s({gte:A.r.min(e),lte:A.r.max(e)}),await s({gte:A.a.min(e),lte:A.a.max(e)}),await s({gte:A.i.min(e),lte:A.i.max(e)}),await s({gte:A.n.min(e),lte:A.n.max(e)}),await s({gt:A.t.encode(e),lt:A.t.encode(e+1)});const n=this.db.bucket(A.t.encode(e)),o=n.iterator({gte:O.b.min(),lte:O.b.max()});await o.each((t,i)=>{const[s]=O.b.decode(t);return this.removeBlockMap(r,s,e)});const a=n.iterator({gte:O.s.min(),lte:O.s.max(),keys:!0});await a.each((t,i)=>{const[s,n]=O.s.decode(t);return this.removeOutpointMap(r,s,n,e)});const h=n.iterator({gte:O.p.min(),lte:O.p.max(),keys:!0});await h.each((t,i)=>{const[s]=O.p.decode(t);return this.removeTXMap(r,s,e)});const c=this.wallets.get(e);return c&&(await c.destroy(),this.unregister(c)),await r.write(),!0}async auth(e,t){const r=await this.get(e);if(!r)return null;if(!b(t,r.token))throw new Error("WDB: Authentication error.");return r}async create(e){const t=await this.writeLock.lock();e||(e={});try{return await this._create(e)}finally{t()}}async _create(e){if(e.id&&await this.has(e.id))throw new Error("WDB: Wallet already exists.");const t=y.fromOptions(this,e);return t.wid=this.depth,await t.init(e,e.passphrase),this.depth+=1,this.register(t),this.logger.info("Created wallet %s in WalletDB.",t.id),t}async has(e){return-1!==await this.ensureWID(e)}async ensure(e){if(e.id){const t=await this.get(e.id);if(t)return t}return this.create(e)}async getAccount(e,t){const r=await this.getAccountName(e,t);if(!r)return null;const i=await this.db.get(A.a.encode(e,t));o(i);const s=v.fromRaw(this,i);return s.accountIndex=t,s.name=r,s}async getAccounts(e){return this.db.values({gte:A.n.min(e),lte:A.n.max(e),parse:C})}async getAccountIndex(e,t){const r=await this.db.get(A.i.encode(e,t));return r?r.readUInt32LE(0,!0):-1}async getAccountName(e,t){const r=await this.db.get(A.n.encode(e,t));return r?C(r):null}saveAccount(e,t){const r=t.wid,i=t.accountIndex,s=t.name;e.put(A.a.encode(r,i),t.toRaw()),e.put(A.i.encode(r,s),N(i)),e.put(A.n.encode(r,i),T(s))}async hasAccount(e,t){return this.db.has(A.a.encode(e,t))}async saveKey(e,t,r){return this.savePath(e,t,r.toPath())}async savePath(e,t,r){await this.addPathMap(e,r.hash,t),e.put(A.P.encode(t,r.hash),r.toRaw()),e.put(A.r.encode(t,r.account,r.hash),null)}async getPath(e,t){const r=await this.readPath(e,t);return r?(r.name=await this.getAccountName(e,r.account),o(r.name),r):null}async readPath(e,t){const r=await this.db.get(A.P.encode(e,t));if(!r)return null;const i=_.fromRaw(r);return i.hash=t,i}async hasPath(e,t){return this.db.has(A.P.encode(e,t))}async getHashes(){return this.db.keys({gte:A.p.min(),lte:A.p.max(),parse:e=>A.p.decode(e)[0]})}async getOutpoints(){return this.db.keys({gte:A.o.min(),lte:A.o.max(),parse:e=>{const[t,r]=A.o.decode(e);return new E(t,r)}})}async getWalletHashes(e){return this.db.keys({gte:A.P.min(e),lte:A.P.max(e),parse:e=>A.P.decode(e)[1]})}async getAccountHashes(e,t){return this.db.keys({gte:A.r.min(e,t),lte:A.r.max(e,t),parse:e=>A.r.decode(e)[2]})}async getWalletPaths(e){const t=await this.db.range({gte:A.P.min(e),lte:A.P.max(e)}),r=[];for(const{key:i,value:s}of t){const[,t]=A.P.decode(i),n=_.fromRaw(s);n.hash=t,n.name=await this.getAccountName(e,n.account),o(n.name),r.push(n)}return r}async getWallets(){return this.db.values({gte:A.W.min(),lte:A.W.max(),parse:C})}async encryptKeys(e,t,r){const i=this.db.iterator({gte:A.P.min(t),lte:A.P.max(t),values:!0});await i.each((t,i)=>{const[,s]=A.P.decode(t),n=_.fromRaw(i);if(!n.data)return;o(!n.encrypted);const a=s.slice(0,16);n.data=g.encipher(n.data,r,a),n.encrypted=!0,e.put(t,n.toRaw())})}async decryptKeys(e,t,r){const i=this.db.iterator({gte:A.P.min(t),lte:A.P.max(t),values:!0});await i.each((t,i)=>{const[,s]=A.P.decode(t),n=_.fromRaw(i);if(!n.data)return;o(n.encrypted);const a=s.slice(0,16);n.data=g.decipher(n.data,r,a),n.encrypted=!1,e.put(t,n.toRaw())})}async resend(){const e=await this.db.keys({gte:A.w.min(),lte:A.w.max(),parse:e=>A.w.decode(e)[0]});this.logger.info("Resending from %d wallets.",e.length);for(const t of e)await this.resendPending(t)}async resendPending(e){const t=A.t.encode(e),r=this.db.bucket(t),i=await r.keys({gte:O.p.min(),lte:O.p.max(),parse:e=>O.p.decode(e)[0]});if(0===i.length)return;this.logger.info("Rebroadcasting %d transactions for %d.",i.length,e);const s=[];for(const e of i){const t=await r.get(O.t.encode(e));if(!t)continue;const i=M.fromRaw(t);i.tx.isCoinbase()||s.push(i.tx)}for(const e of w.sortDeps(s))await this.send(e)}async getWalletsByTX(e){const t=new Set;if(!e.isCoinbase())for(const{prevout:r}of e.inputs){const{hash:e,index:i}=r;if(!this.testFilter(r.toRaw()))continue;const s=await this.getOutpointMap(e,i);if(s)for(const e of s.wids)t.add(e)}const r=e.getOutputHashes();for(const e of r){if(!this.testFilter(e))continue;const r=await this.getPathMap(e);if(r)for(const e of r.wids)t.add(e)}return 0===t.size?null:t}async getState(){const e=await this.db.get(A.R.encode());return e?x.fromRaw(e):null}async setTip(e){const t=this.db.batch(),r=this.state.clone();if(e.height<r.height)for(;r.height!==e.height;)t.del(A.h.encode(r.height)),r.height-=1;else e.height>r.height&&(o(e.height===r.height+1,"Bad chain sync."),r.height+=1);e.height<r.startHeight&&(r.startHeight=e.height,r.startHash=e.hash,r.marked=!1),t.put(A.h.encode(e.height),e.toHash()),t.put(A.R.encode(),r.toRaw()),await t.write(),this.state=r,this.height=r.height}liveHeight(){let e=this.height;return this.confirming&&(e+=1),e}async markState(e){const t=this.state.clone();t.startHeight=e.height,t.startHash=e.hash,t.marked=!0;const r=this.db.batch();r.put(A.R.encode(),t.toRaw()),await r.write(),this.state=t,this.height=t.height}async getMap(e){const t=await this.db.get(e);return t?P.fromRaw(t):null}async addMap(e,t,r){const i=await this.db.get(t);if(!i){const i=new P;return i.add(r),void e.put(t,i.toRaw())}o(i.length>=4);const s=i.readUInt32LE(0,!0),n=c.write(i.length+4);n.writeU32(s+1),n.copy(i,4,i.length),n.writeU32(r),e.put(t,n.render())}async removeMap(e,t,r){const i=await this.getMap(t);i&&i.remove(r)&&(0!==i.size?e.put(t,i.toRaw()):e.del(t))}async getPathMap(e){return this.getMap(A.p.encode(e))}async addPathMap(e,t,r){return await this.addHash(t),this.addMap(e,A.p.encode(t),r)}async removePathMap(e,t,r){return this.removeMap(e,A.p.encode(t),r)}async getBlockMap(e){return this.getMap(A.b.encode(e))}async addBlockMap(e,t,r){return this.addMap(e,A.b.encode(t),r)}async removeBlockMap(e,t,r){return this.removeMap(e,A.b.encode(t),r)}async getTXMap(e){return this.getMap(A.T.encode(e))}async addTXMap(e,t,r){return this.addMap(e,A.T.encode(t),r)}async removeTXMap(e,t,r){return this.removeMap(e,A.T.encode(t),r)}async getOutpointMap(e,t){return this.getMap(A.o.encode(e,t))}async addOutpointMap(e,t,r,i){return await this.addOutpoint(t,r),this.addMap(e,A.o.encode(t,r),i)}async removeOutpointMap(e,t,r,i){return this.removeMap(e,A.o.encode(t,r),i)}async getBlock(e){const t=await this.db.get(A.h.encode(e));if(!t)return null;const r=new R;return r.hash=t,r.height=e,r}async getTip(){const e=await this.getBlock(this.state.height);if(!e)throw new Error("WDB: Tip not found!");return e}async rollback(e){if(e>this.state.height)throw new Error("WDB: Cannot rollback to the future.");if(e===this.state.height)return void this.logger.info("Rolled back to same height (%d).",e);this.logger.info("Rolling back %d WalletDB blocks to height %d.",this.state.height-e,e);const t=await this.getBlock(e);o(t),await this.revert(t.height),await this.setTip(t)}async revert(e){const t=this.db.iterator({gte:A.b.encode(e+1),lte:A.b.max(),reverse:!0,values:!0});let r=0;await t.each(async(e,t)=>{const[i]=A.b.decode(e),s=P.fromRaw(t);for(const e of s.wids){const t=await this.get(e);o(t),r+=await t.revert(i)}}),this.logger.info("Rolled back %d WalletDB transactions.",r)}async addBlock(e,t){const r=await this.txLock.lock();try{return await this._addBlock(e,t)}finally{r()}}async _addBlock(e,t){const r=R.fromEntry(e);if(r.height<this.state.height)return this.logger.warning("WalletDB is connecting low blocks (%d).",r.height),0;if(r.height>=this.network.block.slowHeight&&this.logger.debug("Adding block: %d.",r.height),r.height===this.state.height)this.logger.warning("Already saw WalletDB block (%d).",r.height);else if(r.height!==this.state.height+1)return await this.scan(this.state.height),0;let i=0;try{this.confirming=!0;for(const e of t)await this._addTX(e,r)&&(i+=1);await this.setTip(r)}finally{this.confirming=!1}return i>0&&this.logger.info("Connected WalletDB block %h (tx=%d).",r.hash,i),i}async removeBlock(e){const t=await this.txLock.lock();try{return await this._removeBlock(e)}finally{t()}}async _removeBlock(e){const t=R.fromEntry(e);if(0===t.height)throw new Error("WDB: Bad disconnection (genesis block).");if(t.height>this.state.height)return this.logger.warning("WalletDB is disconnecting high blocks (%d).",t.height),0;if(t.height!==this.state.height)throw new Error("WDB: Bad disconnection (height mismatch).");const r=await this.getBlock(t.height-1);o(r);const i=await this.getBlockMap(t.height);if(!i)return await this.setTip(r),0;let s=0;for(const e of i.wids){const r=await this.get(e);o(r),s+=await r.revert(t.height)}return await this.setTip(r),this.logger.warning("Disconnected wallet block %h (tx=%d).",t.hash,s),s}async rescanBlock(e,t){if(this.rescanning)if(e.height>this.state.height+1)this.logger.warning("Rescan block too high: %d.",e.height);else try{await this._addBlock(e,t)}catch(e){throw this.emit("error",e),e}else this.logger.warning("Unsolicited rescan block: %d.",e.height)}async addTX(e){const t=await this.txLock.lock();try{return await this._addTX(e)}finally{t()}}async _addTX(e,t){const r=await this.getWalletsByTX(e);if(o(!e.mutable,"WDB: Cannot add mutable TX."),!r)return null;t&&!this.state.marked&&await this.markState(t),this.logger.info("Incoming transaction for %d wallets in WalletDB (%h).",r.size,e.hash());let i=!1;for(const s of r){const r=await this.get(s);o(r),await r.add(e,t)&&(this.logger.info("Added transaction to wallet in WalletDB: %s (%d).",r.id,s),i=!0)}return i?r:null}async resetChain(e){const t=await this.txLock.lock();try{return await this._resetChain(e)}finally{t()}}async _resetChain(e){if(e.height>this.state.height)throw new Error("WDB: Bad reset height.");return this.rollback(e.height)}}}],["bcoin","/lib/wallet/wallet.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(19,r),{Lock:h}=__browser_require__(203,r),c=__browser_require__(105,r),u=__browser_require__(24,r),f=__browser_require__(94,r),l=__browser_require__(33,r),d=__browser_require__(136,r),p=__browser_require__(367,r),b=__browser_require__(351,r),g=__browser_require__(352,r),m=__browser_require__(104,r),_=__browser_require__(126,r),w=__browser_require__(89,r),y=__browser_require__(353,r),v=__browser_require__(233,r),E=__browser_require__(112,r),S=__browser_require__(350,r),I=__browser_require__(357,r),k=__browser_require__(96,r),A=__browser_require__(17,r),{encoding:O}=u,{Mnemonic:x}=v,{inspectSymbol:R}=__browser_require__(21,r),{BufferSet:M}=__browser_require__(86,r);class P extends a{constructor(e,t){super(),o(e,"WDB required."),this.wdb=e,this.db=e.db,this.network=e.network,this.logger=e.logger,this.writeLock=new h,this.fundLock=new h,this.wid=0,this.id=null,this.watchOnly=!1,this.accountDepth=0,this.token=A.ZERO_HASH,this.tokenDepth=0,this.master=new I,this.txdb=new p(this.wdb),this.maxAncestors=k.MEMPOOL_MAX_ANCESTORS,t&&this.fromOptions(t)}fromOptions(e){if(!e)return this;let t,r,i,s=e.master;return s?("string"==typeof s&&(s=v.PrivateKey.fromBase58(s,this.network)),o(v.isPrivate(s),"Must create wallet with hd private key.")):(i=new x(e.mnemonic),s=v.fromMnemonic(i,e.password)),this.master.fromKey(s,i),null!=e.wid&&(o(e.wid>>>0===e.wid),this.wid=e.wid),e.id&&(o(g.isName(e.id),"Bad wallet ID."),t=e.id),null!=e.watchOnly&&(o("boolean"==typeof e.watchOnly),this.watchOnly=e.watchOnly),null!=e.accountDepth&&(o(e.accountDepth>>>0===e.accountDepth),this.accountDepth=e.accountDepth),e.token&&(o(null!=e.token&&!0===e.token._isBuffer),o(32===e.token.length),r=e.token),null!=e.tokenDepth&&(o(e.tokenDepth>>>0===e.tokenDepth),this.tokenDepth=e.tokenDepth),null!=e.maxAncestors&&(o(e.maxAncestors>>>0===e.maxAncestors),this.maxAncestors=e.maxAncestors),t||(t=this.getID()),r||(r=this.getToken(this.tokenDepth)),this.id=t,this.token=r,this}static fromOptions(e,t){return new this(e).fromOptions(t)}async init(e,t){t&&await this.master.encrypt(t);const r=await this._createAccount(e,t);return o(r),this.logger.info("Wallet initialized (%s).",this.id),this.txdb.open(this)}async open(){if(!await this.getAccount(0))throw new Error("Default account not found.");return this.logger.info("Wallet opened (%s).",this.id),this.txdb.open(this)}async destroy(){const e=await this.writeLock.lock(),t=await this.fundLock.lock();try{await this.master.destroy(),this.writeLock.destroy(),this.fundLock.destroy()}finally{t(),e()}}async addSharedKey(e,t){const r=await this.writeLock.lock();try{return await this._addSharedKey(e,t)}finally{r()}}async _addSharedKey(e,t){const r=await this.getAccount(e);if(!r)throw new Error("Account not found.");const i=this.db.batch(),s=await r.addSharedKey(i,t);return await i.write(),s}async removeSharedKey(e,t){const r=await this.writeLock.lock();try{return await this._removeSharedKey(e,t)}finally{r()}}async _removeSharedKey(e,t){const r=await this.getAccount(e);if(!r)throw new Error("Account not found.");const i=this.db.batch(),s=await r.removeSharedKey(i,t);return await i.write(),s}async setPassphrase(e,t){null!=t&&await this.decrypt(t),await this.encrypt(e)}async encrypt(e){const t=await this.writeLock.lock();try{return await this._encrypt(e)}finally{t()}}async _encrypt(e){const t=await this.master.encrypt(e,!0),r=this.db.batch();try{await this.wdb.encryptKeys(r,this.wid,t)}finally{d(t)}this.save(r),await r.write()}async decrypt(e){const t=await this.writeLock.lock();try{return await this._decrypt(e)}finally{t()}}async _decrypt(e){const t=await this.master.decrypt(e,!0),r=this.db.batch();try{await this.wdb.decryptKeys(r,this.wid,t)}finally{d(t)}this.save(r),await r.write()}async retoken(e){const t=await this.writeLock.lock();try{return await this._retoken(e)}finally{t()}}async _retoken(e){e&&await this.unlock(e),this.tokenDepth+=1,this.token=this.getToken(this.tokenDepth);const t=this.db.batch();return this.save(t),await t.write(),this.token}async rename(e){const t=await this.writeLock.lock();try{return await this.wdb.rename(this,e)}finally{t()}}async renameAccount(e,t){const r=await this.writeLock.lock();try{return await this._renameAccount(e,t)}finally{r()}}async _renameAccount(e,t){if(!g.isName(t))throw new Error("Bad account name.");const r=await this.getAccount(e);if(!r)throw new Error("Account not found.");if(0===r.accountIndex)throw new Error("Cannot rename default account.");if(await this.hasAccount(t))throw new Error("Account name not available.");const i=this.db.batch();this.wdb.renameAccount(i,r,t),await i.write()}async lock(){const e=await this.writeLock.lock(),t=await this.fundLock.lock();try{await this.master.lock()}finally{t(),e()}}unlock(e,t){return this.master.unlock(e,t)}getID(){o(this.master.key,"Cannot derive id.");const e=this.master.key.derive(44),t=u.write(37);t.writeBytes(e.publicKey),t.writeU32(this.network.magic);const r=f.digest(t.render()),i=u.write(27);return i.writeU8(3),i.writeU8(190),i.writeU8(4),i.writeBytes(r),i.writeChecksum(l.digest),c.encode(i.render())}getToken(e){if(!this.master.key)throw new Error("Cannot derive token.");const t=this.master.key.derive(44,!0),r=u.write(36);return r.writeBytes(t.privateKey),r.writeU32(e),l.digest(r.render())}async createAccount(e,t){const r=await this.writeLock.lock();try{return await this._createAccount(e,t)}finally{r()}}async _createAccount(e,t){let r,i=e.name;if(i||(i=this.accountDepth.toString(10)),await this.hasAccount(i))throw new Error("Account already exists.");if(await this.unlock(t),this.watchOnly){if("string"==typeof(r=e.accountKey)&&(r=v.PublicKey.fromBase58(r,this.network)),!v.isPublic(r))throw new Error("Must add HD public keys to watch only wallet.")}else{o(this.master.key);const e=this.network.keyPrefix.coinType;r=(r=this.master.key.deriveAccount(44,e,this.accountDepth)).toPublic()}const s={wid:this.wid,id:this.id,name:0===this.accountDepth?"default":i,witness:e.witness,watchOnly:this.watchOnly,accountKey:r,accountIndex:this.accountDepth,type:e.type,m:e.m,n:e.n,keys:e.keys},n=this.db.batch(),a=S.fromOptions(this.wdb,s);return await a.init(n),this.logger.info("Created account %s/%s/%d.",a.id,a.name,a.accountIndex),this.accountDepth+=1,this.save(n),1===this.accountDepth&&this.increment(n),await n.write(),a}async ensureAccount(e,t){const r=e.name,i=await this.getAccount(r);return i||this.createAccount(e,t)}getAccounts(){return this.wdb.getAccounts(this.wid)}getAddressHashes(e){return null!=e?this.getAccountHashes(e):this.wdb.getWalletHashes(this.wid)}async getAccountHashes(e){const t=await this.getAccountIndex(e);if(-1===t)throw new Error("Account not found.");return this.wdb.getAccountHashes(this.wid,t)}async getAccount(e){const t=await this.getAccountIndex(e);if(-1===t)return null;const r=await this.wdb.getAccount(this.wid,t);return r?(r.wid=this.wid,r.id=this.id,r.watchOnly=this.watchOnly,r):null}getAccountIndex(e){return null==e?-1:"number"==typeof e?e:this.wdb.getAccountIndex(this.wid,e)}async ensureIndex(e){if(null==e||-1===e)return-1;const t=await this.getAccountIndex(e);if(-1===t)throw new Error("Account not found.");return t}async getAccountName(e){return"string"==typeof e?e:this.wdb.getAccountName(this.wid,e)}async hasAccount(e){const t=await this.getAccountIndex(e);return-1!==t&&this.wdb.hasAccount(this.wid,t)}createReceive(e=0){return this.createKey(e,0)}createChange(e=0){return this.createKey(e,1)}createNested(e=0){return this.createKey(e,2)}async createKey(e,t){const r=await this.writeLock.lock();try{return await this._createKey(e,t)}finally{r()}}async _createKey(e,t){const r=await this.getAccount(e);if(!r)throw new Error("Account not found.");const i=this.db.batch(),s=await r.createKey(i,t);return await i.write(),s}save(e){return this.wdb.save(e,this)}increment(e){return this.wdb.increment(e,this.wid)}async hasAddress(e){const t=m.getHash(e);return null!=await this.getPath(t)}async getPath(e){const t=m.getHash(e);return this.wdb.getPath(this.wid,t)}async readPath(e){const t=m.getHash(e);return this.wdb.readPath(this.wid,t)}async hasPath(e){const t=m.getHash(e);return this.wdb.hasPath(this.wid,t)}async getPaths(e){return null!=e?this.getAccountPaths(e):this.wdb.getWalletPaths(this.wid)}async getAccountPaths(e){const t=await this.getAccountIndex(e);if(-1===t)throw new Error("Account not found.");const r=await this.getAccountHashes(t),i=await this.getAccountName(e);o(i);const s=[];for(const e of r){const r=await this.readPath(e);o(r),o(r.account===t),r.name=i,s.push(r)}return s}async importKey(e,t,r){const i=await this.writeLock.lock();try{return await this._importKey(e,t,r)}finally{i()}}async _importKey(e,t,r){if(this.watchOnly){if(t.privateKey)throw new Error("Cannot import privkey into watch-only wallet.")}else if(!t.privateKey)throw new Error("Cannot import pubkey into non watch-only wallet.");const i=t.getHash();if(await this.getPath(i))throw new Error("Key already exists.");const s=await this.getAccount(e);if(!s)throw new Error("Account not found.");if(s.type!==S.types.PUBKEYHASH)throw new Error("Cannot import into non-pkh account.");await this.unlock(r);const n=y.fromRing(s,t).toPath();this.master.encrypted&&(n.data=this.master.encipher(n.data,n.hash),o(n.data),n.encrypted=!0);const a=this.db.batch();await s.savePath(a,n),await a.write()}async importAddress(e,t){const r=await this.writeLock.lock();try{return await this._importAddress(e,t)}finally{r()}}async _importAddress(e,t){if(!this.watchOnly)throw new Error("Cannot import address into non watch-only wallet.");if(await this.getPath(t))throw new Error("Address already exists.");const r=await this.getAccount(e);if(!r)throw new Error("Account not found.");if(r.type!==S.types.PUBKEYHASH)throw new Error("Cannot import into non-pkh account.");const i=b.fromAddress(r,t),s=this.db.batch();await r.savePath(s,i),await s.write()}async fund(e,t,r){const i=await this.fundLock.lock(r);try{return await this._fund(e,t)}finally{i()}}async _fund(e,t){t||(t={});const r=t.account||0,i=await this.changeAddress(r);if(!i)throw new Error("Account not found.");let s,n=t.rate;null==n&&(n=await this.wdb.estimateFee(t.blocks)),t.smart?s=await this.getSmartCoins(t.account):(s=await this.getCoins(t.account),s=this.txdb.filterLocked(s)),await e.fund(s,{selection:t.selection,round:t.round,depth:t.depth,hardFee:t.hardFee,subtractFee:t.subtractFee,subtractIndex:t.subtractIndex,changeAddress:i,height:this.wdb.state.height,rate:n,maxFee:t.maxFee,estimate:e=>this.estimateSize(e)}),o(e.getFee()<=_.Selector.MAX_FEE,"TX exceeds MAX_FEE.")}async getAccountByAddress(e){const t=m.getHash(e),r=await this.getPath(t);return r?this.getAccount(r.account):null}async estimateSize(e){const t=A.WITNESS_SCALE_FACTOR,r=e.getAddress();if(!r)return-1;const i=await this.getAccountByAddress(r);if(!i)return-1;let s=0;if(e.isScripthash()&&i.witness)switch(i.type){case S.types.PUBKEYHASH:s+=23,s*=4;break;case S.types.MULTISIG:s+=35,s*=4}switch(i.type){case S.types.PUBKEYHASH:s+=74,s+=34;break;case S.types.MULTISIG:s+=1,s+=74*i.m,s+=3,s+=1,s+=34*i.n,s+=1,s+=1}return i.witness?s=((s+=1)+t-1)/t|0:s+=O.sizeVarint(s),s}async createTX(e,t){const r=e.outputs,i=new _;o(Array.isArray(r),"Outputs must be an array."),o(r.length>0,"At least one output required.");for(const e of r){const t=new E(e),r=t.getAddress();if(t.isDust())throw new Error("Output is dust.");if(t.value>0){if(!r)throw new Error("Cannot send to unknown address.");if(r.isNull())throw new Error("Cannot send to null address.")}i.outputs.push(t)}if(await this.fund(i,e,t),!1!==e.sort&&i.sortMembers(),null!=e.locktime&&i.setLocktime(e.locktime),o(i.isSane(),"TX failed sanity check."),o(i.verifyInputs(this.wdb.state.height+1),"TX failed context check."),!1===e.template)return i;if(0===await this.template(i))throw new Error("Templating failed.");return i}async send(e,t){const r=await this.fundLock.lock();try{return await this._send(e,t)}finally{r()}}async _send(e,t){const r=await this.createTX(e,!0);if(await this.sign(r,t),!r.isSigned())throw new Error("TX could not be fully signed.");const i=r.toTX();if(i.getSigopsCost(r.view)>k.MAX_TX_SIGOPS_COST)throw new Error("TX exceeds policy sigops.");if(i.getWeight()>k.MAX_TX_WEIGHT)throw new Error("TX exceeds policy weight.");if((await this.getPendingAncestors(i)).size+1>this.maxAncestors)throw new Error("TX exceeds maximum unconfirmed ancestors.");return await this.wdb.addTX(i),this.logger.debug("Sending wallet tx (%s): %h",this.id,i.hash()),await this.wdb.send(i),i}async increaseFee(e,t,r){o(t>>>0===t,"Rate must be a number.");const i=await this.getTX(e);if(!i)throw new Error("Transaction not found.");if(-1!==i.height)throw new Error("Transaction is confirmed.");const s=i.tx;if(s.isCoinbase())throw new Error("Transaction is a coinbase.");const n=await this.getSpentView(s);if(!s.hasCoins(n))throw new Error("Not all coins available.");const a=s.getFee(n);let h=s.getMinFee(null,t);if(h>_.Selector.MAX_FEE&&(h=_.Selector.MAX_FEE),a>=h)throw new Error("Fee is not increasing.");const c=_.fromTX(s);c.view=n;for(const e of c.inputs)e.script.clear(),e.witness.clear();let u;for(let e=0;e<c.outputs.length;e++){const t=c.outputs[e],r=t.getAddress();if(!r)continue;const i=await this.getPath(r);if(i&&1===i.branch){u=t,c.changeIndex=e;break}}if(!u)throw new Error("No change output.");if(u.value+=a,0!==c.getFee())throw new Error("Arithmetic error for change.");if(u.value-=h,u.value<0)throw new Error("Fee is too high.");if(u.isDust()&&(c.outputs.splice(c.changeIndex,1),c.changeIndex=-1),await this.sign(c,r),!c.isSigned())throw new Error("TX could not be fully signed.");const f=c.toTX();return this.logger.debug("Increasing fee for wallet tx (%s): %h",this.id,f.hash()),await this.wdb.addTX(f),await this.wdb.send(f),f}async resend(){const e=await this.getPending();e.length>0&&this.logger.info("Rebroadcasting %d transactions.",e.length);const t=[];for(const r of e)t.push(r.tx);const r=g.sortDeps(t);for(const e of r)await this.wdb.send(e);return t}async deriveInputs(e){o(e.mutable);const t=await this.getInputPaths(e),r=[];for(const e of t){const t=await this.getAccount(e.account);if(!t)continue;const i=t.derivePath(e,this.master);i&&r.push(i)}return r}async getKey(e){const t=m.getHash(e),r=await this.getPath(t);if(!r)return null;const i=await this.getAccount(r.account);return i?i.derivePath(r,this.master):null}async getPrivateKey(e,t){const r=m.getHash(e),i=await this.getPath(r);if(!i)return null;const s=await this.getAccount(i.account);if(!s)return null;await this.unlock(t);const n=s.derivePath(i,this.master);return n.privateKey?n:null}async getInputPaths(e){if(o(e.mutable),!e.hasCoins())throw new Error("Not all coins available.");const t=e.getInputHashes(),r=[];for(const e of t){const t=await this.getPath(e);t&&r.push(t)}return r}async getOutputPaths(e){const t=[],r=e.getOutputHashes();for(const e of r){const r=await this.getPath(e);r&&t.push(r)}return t}async setLookahead(e,t){const r=await this.writeLock.lock();try{return this._setLookahead(e,t)}finally{r()}}async _setLookahead(e,t){const r=await this.getAccount(e);if(!r)throw new Error("Account not found.");const i=this.db.batch();await r.setLookahead(i,t),await i.write()}async syncOutputDepth(e){const t=new Map;for(const r of e.getOutputHashes()){const e=await this.readPath(r);e&&(-1!==e.index&&(t.has(e.account)||t.set(e.account,[]),t.get(e.account).push(e)))}const r=[],i=this.db.batch();for(const[e,s]of t){let t=-1,n=-1,a=-1;for(const e of s)switch(e.branch){case 0:e.index>t&&(t=e.index);break;case 1:e.index>n&&(n=e.index);break;case 2:e.index>a&&(a=e.index)}t+=2,n+=2,a+=2;const h=await this.getAccount(e);o(h);const c=await h.syncDepth(i,t,n,a);c&&r.push(c)}return await i.write(),r}async template(e){const t=await this.deriveInputs(e);return e.template(t)}async sign(e,t){if(this.watchOnly)throw new Error("Cannot sign from a watch-only wallet.");await this.unlock(t);const r=await this.deriveInputs(e);return e.signAsync(r,w.hashType.ALL,this.wdb.workers)}async getPendingAncestors(e){return this._getPendingAncestors(e,new M)}async _getPendingAncestors(e,t){for(const{prevout:r}of e.inputs){const e=r.hash;if(t.has(e))continue;if(!await this.hasPending(e))continue;if(t.add(e),t.size>this.maxAncestors)break;const i=await this.getTX(e);if(await this._getPendingAncestors(i.tx,t),t.size>this.maxAncestors)break}return t}hasPending(e){return this.txdb.hasPending(e)}getCoinView(e){return this.txdb.getCoinView(e)}getSpentView(e){return this.txdb.getSpentView(e)}toDetails(e){return this.txdb.toDetails(e)}getDetails(e){return this.txdb.getDetails(e)}getCoin(e,t){return this.txdb.getCoin(e,t)}getTX(e){return this.txdb.getTX(e)}getBlocks(){return this.txdb.getBlocks()}getBlock(e){return this.txdb.getBlock(e)}async add(e,t){const r=await this.writeLock.lock();try{return await this._add(e,t)}finally{r()}}async _add(e,t){const r=await this.txdb.add(e,t);if(r){const t=await this.syncOutputDepth(e);t.length>0&&(this.wdb.emit("address",this,t),this.emit("address",t))}return r}async revert(e){const t=await this.writeLock.lock();try{return await this.txdb.revert(e)}finally{t()}}async remove(e){const t=await this.writeLock.lock();try{return await this.txdb.remove(e)}finally{t()}}async zap(e,t){const r=await this.writeLock.lock();try{return await this._zap(e,t)}finally{r()}}async _zap(e,t){const r=await this.ensureIndex(e);return this.txdb.zap(r,t)}async abandon(e){const t=await this.writeLock.lock();try{return await this._abandon(e)}finally{t()}}_abandon(e){return this.txdb.abandon(e)}lockCoin(e){return this.txdb.lockCoin(e)}unlockCoin(e){return this.txdb.unlockCoin(e)}unlockCoins(){return this.txdb.unlockCoins()}isLocked(e){return this.txdb.isLocked(e)}getLocked(){return this.txdb.getLocked()}async getHistory(e){const t=await this.ensureIndex(e);return this.txdb.getHistory(t)}async getCoins(e){const t=await this.ensureIndex(e);return this.txdb.getCoins(t)}async getCredits(e){const t=await this.ensureIndex(e);return this.txdb.getCredits(t)}async getSmartCoins(e){const t=await this.getCredits(e),r=[];for(const e of t){const t=e.coin;e.spent||(this.txdb.isLocked(t)||(-1===t.height?e.own&&r.push(t):r.push(t)))}return r}async getPending(e){const t=await this.ensureIndex(e);return this.txdb.getPending(t)}async getBalance(e){const t=await this.ensureIndex(e);return this.txdb.getBalance(t)}async getRange(e,t){const r=await this.ensureIndex(e);return this.txdb.getRange(r,t)}async getLast(e,t){const r=await this.ensureIndex(e);return this.txdb.getLast(r,t)}async accountKey(e=0){const t=await this.getAccount(e);if(!t)throw new Error("Account not found.");return t.accountKey}async receiveDepth(e=0){const t=await this.getAccount(e);if(!t)throw new Error("Account not found.");return t.receiveDepth}async changeDepth(e=0){const t=await this.getAccount(e);if(!t)throw new Error("Account not found.");return t.changeDepth}async nestedDepth(e=0){const t=await this.getAccount(e);if(!t)throw new Error("Account not found.");return t.nestedDepth}async receiveAddress(e=0){const t=await this.getAccount(e);if(!t)throw new Error("Account not found.");return t.receiveAddress()}async changeAddress(e=0){const t=await this.getAccount(e);if(!t)throw new Error("Account not found.");return t.changeAddress()}async nestedAddress(e=0){const t=await this.getAccount(e);if(!t)throw new Error("Account not found.");return t.nestedAddress()}async receiveKey(e=0){const t=await this.getAccount(e);if(!t)throw new Error("Account not found.");return t.receiveKey()}async changeKey(e=0){const t=await this.getAccount(e);if(!t)throw new Error("Account not found.");return t.changeKey()}async nestedKey(e=0){const t=await this.getAccount(e);if(!t)throw new Error("Account not found.");return t.nestedKey()}[R](){return{wid:this.wid,id:this.id,network:this.network.type,accountDepth:this.accountDepth,token:this.token.toString("hex"),tokenDepth:this.tokenDepth,master:this.master}}toJSON(e,t){return{network:this.network.type,wid:this.wid,id:this.id,watchOnly:this.watchOnly,accountDepth:this.accountDepth,token:this.token.toString("hex"),tokenDepth:this.tokenDepth,master:this.master.toJSON(this.network,e),balance:t?t.toJSON(!0):null}}getSize(){let e=0;return e+=41,e+=this.master.getSize()}toRaw(){const e=this.getSize(),t=u.write(e);let r=0;return this.watchOnly&&(r|=1),t.writeU8(r),t.writeU32(this.accountDepth),t.writeBytes(this.token),t.writeU32(this.tokenDepth),this.master.toWriter(t),t.render()}fromRaw(e){const t=u.read(e),r=t.readU8();return this.watchOnly=0!=(1&r),this.accountDepth=t.readU32(),this.token=t.readBytes(32),this.tokenDepth=t.readU32(),this.master.fromReader(t),this}static fromRaw(e,t){return new this(e).fromRaw(t)}static isWallet(e){return e instanceof P}}r.exports=P}],["bcoin","/lib/wallet/txdb.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),{BufferSet:h}=__browser_require__(86,r),c=__browser_require__(20,r),u=__browser_require__(88,r),f=__browser_require__(128,r),l=__browser_require__(127,r),d=__browser_require__(111,r),p=__browser_require__(368,r),b=__browser_require__(356,r).txdb,g=__browser_require__(17,r),m=__browser_require__(96,r),{TXRecord:_}=p,{inspectSymbol:w}=__browser_require__(21,r);class y{constructor(e=-1){o("number"==typeof e),this.account=e,this.tx=0,this.coin=0,this.unconfirmed=0,this.confirmed=0}applyTo(e){e.tx+=this.tx,e.coin+=this.coin,e.unconfirmed+=this.unconfirmed,e.confirmed+=this.confirmed,o(e.tx>=0),o(e.coin>=0),o(e.unconfirmed>=0),o(e.confirmed>=0)}toRaw(){const e=a.write(32);return e.writeU64(this.tx),e.writeU64(this.coin),e.writeU64(this.unconfirmed),e.writeU64(this.confirmed),e.render()}fromRaw(e){const t=a.read(e);return this.tx=t.readU64(),this.coin=t.readU64(),this.unconfirmed=t.readU64(),this.confirmed=t.readU64(),this}static fromRaw(e,t){return new this(e).fromRaw(t)}toJSON(e){return{account:e?undefined:this.account,tx:this.tx,coin:this.coin,unconfirmed:this.unconfirmed,confirmed:this.confirmed}}[w](){return"<Balance"+` tx=${this.tx}`+` coin=${this.coin}`+` unconfirmed=${u.btc(this.unconfirmed)}`+` confirmed=${u.btc(this.confirmed)}`+">"}}class v{constructor(){this.wallet=new y,this.accounts=new Map}updated(){return 0!==this.wallet.tx}applyTo(e){this.wallet.applyTo(e)}get(e){return this.accounts.has(e.account)||this.accounts.set(e.account,new y),this.accounts.get(e.account)}tx(e,t){this.get(e).tx=t,this.wallet.tx=t}coin(e,t){this.get(e).coin+=t,this.wallet.coin+=t}unconfirmed(e,t){this.get(e).unconfirmed+=t,this.wallet.unconfirmed+=t}confirmed(e,t){this.get(e).confirmed+=t,this.wallet.confirmed+=t}}class E{constructor(e,t){this.coin=e||new l,this.spent=t||!1,this.own=!1}fromRaw(e){const t=a.read(e);return this.coin.fromReader(t),this.spent=1===t.readU8(),this.own=1===t.readU8(),this}static fromRaw(e){return(new this).fromRaw(e)}getSize(){return this.coin.getSize()+2}toRaw(){const e=this.getSize(),t=a.write(e);return this.coin.toWriter(t),t.writeU8(this.spent?1:0),t.writeU8(this.own?1:0),t.render()}fromTX(e,t,r){return this.coin.fromTX(e,t,r),this.spent=!1,this.own=!1,this}static fromTX(e,t,r){return(new this).fromTX(e,t,r)}}class S{constructor(e,t){this.hash=e.hash,this.tx=e.tx,this.mtime=e.mtime,this.size=this.tx.getSize(),this.vsize=this.tx.getVirtualSize(),this.block=null,this.height=-1,this.time=0,t&&(this.block=t.hash,this.height=t.height,this.time=t.time),this.inputs=[],this.outputs=[],this.init()}init(){for(const e of this.tx.inputs){const t=new I;t.address=e.getAddress(),this.inputs.push(t)}for(const e of this.tx.outputs){const t=new I;t.value=e.value,t.address=e.getAddress(),this.outputs.push(t)}}setInput(e,t,r){const i=this.inputs[e];r&&(i.value=r.value,i.address=r.getAddress()),t&&(i.path=t)}setOutput(e,t){const r=this.outputs[e];t&&(r.path=t)}getDepth(e){if(-1===this.height)return 0;if(null==e)return 0;const t=e-this.height;return t<0?0:t+1}getFee(){let e=0,t=0;for(const t of this.inputs){if(!t.path)return 0;e+=t.value}for(const e of this.outputs)t+=e.value;return e-t}getRate(e){return m.getRate(this.vsize,e)}toJSON(e,t){const r=this.getFee(),i=this.getRate(r);return{hash:c.revHex(this.hash),height:this.height,block:this.block?c.revHex(this.block):null,time:this.time,mtime:this.mtime,date:c.date(this.time),mdate:c.date(this.mtime),size:this.size,virtualSize:this.vsize,fee:r,rate:i,confirmations:this.getDepth(t),inputs:this.inputs.map(t=>t.getJSON(e)),outputs:this.outputs.map(t=>t.getJSON(e)),tx:this.tx.toRaw().toString("hex")}}}class I{constructor(){this.value=0,this.address=null,this.path=null}toJSON(){return this.getJSON()}getJSON(e){return{value:this.value,address:this.address?this.address.toString(e):null,path:this.path?this.path.toJSON():null}}}class k{constructor(e,t,r){this.hash=e||g.ZERO_HASH,this.height=null!=t?t:-1,this.time=r||0,this.hashes=new h}add(e){return!this.hashes.has(e)&&(this.hashes.add(e),!0)}remove(e){return this.hashes.delete(e)}fromRaw(e){const t=a.read(e);this.hash=t.readHash(),this.height=t.readU32(),this.time=t.readU32();const r=t.readU32();for(let e=0;e<r;e++){const e=t.readHash();this.hashes.add(e)}return this}static fromRaw(e){return(new this).fromRaw(e)}getSize(){return 44+32*this.hashes.size}toRaw(){const e=this.getSize(),t=a.write(e);t.writeHash(this.hash),t.writeU32(this.height),t.writeU32(this.time),t.writeU32(this.hashes.size);for(const e of this.hashes)t.writeHash(e);return t.render()}toArray(){const e=[];for(const t of this.hashes)e.push(t);return e}toJSON(){return{hash:c.revHex(this.hash),height:this.height,time:this.time,hashes:this.toArray().map(c.revHex)}}fromMeta(e){return this.hash=e.hash,this.height=e.height,this.time=e.time,this}static fromMeta(e){return(new this).fromMeta(e)}}r.exports=class{constructor(e,t){this.wdb=e,this.db=e.db,this.logger=e.logger,this.wid=t||0,this.bucket=null,this.wallet=null,this.locked=new h}async open(e){const t=b.prefix.encode(e.wid);this.wid=e.wid,this.bucket=this.db.bucket(t),this.wallet=e}emit(e,t,r){this.wdb.emit(e,this.wallet,t,r),this.wallet.emit(e,t,r)}getPath(e){const t=e.getHash();return t?this.wdb.getPath(this.wid,t):null}hasPath(e){const t=e.getHash();return!!t&&this.wdb.hasPath(this.wid,t)}async saveCredit(e,t,r){const{coin:i}=t;return e.put(b.c.encode(i.hash,i.index),t.toRaw()),e.put(b.C.encode(r.account,i.hash,i.index),null),this.addOutpointMap(e,i.hash,i.index)}async removeCredit(e,t,r){const{coin:i}=t;return e.del(b.c.encode(i.hash,i.index)),e.del(b.C.encode(r.account,i.hash,i.index)),this.removeOutpointMap(e,i.hash,i.index)}spendCredit(e,t,r,i){const s=r.inputs[i].prevout,n=d.fromTX(r,i);e.put(b.s.encode(s.hash,s.index),n.toRaw()),e.put(b.d.encode(n.hash,n.index),t.coin.toRaw())}unspendCredit(e,t,r){const i=t.inputs[r].prevout,s=d.fromTX(t,r);e.del(b.s.encode(i.hash,i.index)),e.del(b.d.encode(s.hash,s.index))}async writeInput(e,t,r){const i=t.inputs[r].prevout,s=d.fromTX(t,r);return e.put(b.s.encode(i.hash,i.index),s.toRaw()),this.addOutpointMap(e,i.hash,i.index)}async removeInput(e,t,r){const i=t.inputs[r].prevout;return e.del(b.s.encode(i.hash,i.index)),this.removeOutpointMap(e,i.hash,i.index)}async updateBalance(e,t){const r=await this.getWalletBalance();return t.applyTo(r),e.put(b.R.encode(),r.toRaw()),r}async updateAccountBalance(e,t,r){const i=await this.getAccountBalance(t);return r.applyTo(i),e.put(b.r.encode(t),i.toRaw()),i}async getSpent(e,t){const r=await this.bucket.get(b.s.encode(e,t));return r?d.fromRaw(r):null}isSpent(e,t){return this.bucket.has(b.s.encode(e,t))}addBlockMap(e,t){return this.wdb.addBlockMap(e.root(),t,this.wid)}removeBlockMap(e,t){return this.wdb.removeBlockMap(e.root(),t,this.wid)}addTXMap(e,t){return this.wdb.addTXMap(e.root(),t,this.wid)}removeTXMap(e,t){return this.wdb.removeTXMap(e.root(),t,this.wid)}addOutpointMap(e,t,r){return this.wdb.addOutpointMap(e.root(),t,r,this.wid)}removeOutpointMap(e,t,r){return this.wdb.removeOutpointMap(e.root(),t,r,this.wid)}getBlocks(){return this.bucket.keys({gte:b.b.min(),lte:b.b.max(),parse:e=>b.b.decode(e)[0]})}async getBlock(e){const t=await this.bucket.get(b.b.encode(e));return t?k.fromRaw(t):null}async addBlock(e,t,r){const i=b.b.encode(r.height),s=await this.bucket.get(i);if(!s){const s=k.fromMeta(r);return s.add(t),void e.put(i,s.toRaw())}const n=Buffer.allocUnsafe(s.length+32);s.copy(n,0);const o=n.readUInt32LE(40,!0);n.writeUInt32LE(o+1,40,!0),t.copy(n,s.length),e.put(i,n)}async removeBlock(e,t,r){const i=b.b.encode(r),s=await this.bucket.get(i);if(!s)return;const n=s.readUInt32LE(40,!0);if(o(n>0),o(s.slice(-32).equals(t)),1===n)return void e.del(i);const a=s.slice(0,-32);a.writeUInt32LE(n-1,40,!0),e.put(i,a)}async spliceBlock(e,t,r){const i=await this.getBlock(r);i&&i.remove(t)&&(0!==i.hashes.size?e.put(b.b.encode(r),i.toRaw()):e.del(b.b.encode(r)))}async add(e,t){const r=e.hash(),i=await this.getTX(r);if(o(!e.mutable,"Cannot add mutable TX to wallet."),i)return-1!==i.height?null:t?this.confirm(i,t):null;const s=_.fromTX(e,t);if(t)await this.removeConflicts(e,!1);else if(!await this.removeConflicts(e,!0))return null;return this.insert(s,t)}async insert(e,t){const r=this.bucket.batch(),{tx:i,hash:s}=e,n=t?t.height:-1,a=new S(e,t),h=new v;let c=!1;if(!i.isCoinbase())for(let e=0;e<i.inputs.length;e++){const s=i.inputs[e],{hash:n,index:u}=s.prevout,f=await this.getCredit(n,u);if(!f){t||await this.writeInput(r,i,e);continue}const l=f.coin,d=await this.getPath(l);o(d),a.setInput(e,d,l),this.spendCredit(r,f,i,e),h.tx(d,1),h.coin(d,-1),h.unconfirmed(d,-l.value),t?(h.confirmed(d,-l.value),await this.removeCredit(r,f,d)):(f.spent=!0,await this.saveCredit(r,f,d)),c=!0}for(let e=0;e<i.outputs.length;e++){const s=i.outputs[e],o=await this.getPath(s);if(!o)continue;a.setOutput(e,o);const u=E.fromTX(i,e,n);u.own=c,h.tx(o,1),h.coin(o,1),h.unconfirmed(o,s.value),t&&h.confirmed(o,s.value),await this.saveCredit(r,u,o)}if(!h.updated())return null;r.put(b.t.encode(s),e.toRaw()),r.put(b.m.encode(e.mtime,s),null),t?r.put(b.h.encode(n,s),null):r.put(b.p.encode(s),null);for(const[i,o]of h.accounts)await this.updateAccountBalance(r,i,o),r.put(b.T.encode(i,s),null),r.put(b.M.encode(i,e.mtime,s),null),t?r.put(b.H.encode(i,n,s),null):r.put(b.P.encode(i,s),null);t?(await this.addBlockMap(r,n),await this.addBlock(r,i.hash(),t)):await this.addTXMap(r,s);const u=await this.updateBalance(r,h);return await r.write(),this.unlockTX(i),this.emit("tx",i,a),this.emit("balance",u),a}async confirm(e,t){const r=this.bucket.batch(),{tx:i,hash:s}=e,n=t.height,a=new S(e,t),h=new v;let c=!1;if(e.setBlock(t),!i.isCoinbase()){const e=await this.getSpentCredits(i);for(let t=0;t<i.inputs.length;t++){const s=i.inputs[t],{hash:n,index:u}=s.prevout;let f=!1;if(!e[t]){await this.removeInput(r,i,t);const s=await this.getCredit(n,u);if(!s)continue;this.spendCredit(r,s,i,t),e[t]=s,f=!0}const l=e[t],d=l.coin;o(-1!==d.height);const p=await this.getPath(d);o(p),c=!0,a.setInput(t,p,d),f&&(h.coin(p,-1),h.unconfirmed(p,-d.value)),h.confirmed(p,-d.value),await this.removeCredit(r,l,p)}}for(let e=0;e<i.outputs.length;e++){const t=i.outputs[e],o=await this.getPath(t);if(!o)continue;a.setOutput(e,o);let u=await this.getCredit(s,e);u||((u=E.fromTX(i,e,n)).own=c,h.coin(o,1),h.unconfirmed(o,u.coin.value)),u.spent&&await this.updateSpentCoin(r,i,e,n),h.confirmed(o,t.value),u.coin.height=n,await this.saveCredit(r,u,o)}r.put(b.t.encode(s),e.toRaw()),r.del(b.p.encode(s)),r.put(b.h.encode(n,s),null);for(const[e,t]of h.accounts)await this.updateAccountBalance(r,e,t),r.del(b.P.encode(e,s)),r.put(b.H.encode(e,n,s),null);await this.removeTXMap(r,s),await this.addBlockMap(r,n),await this.addBlock(r,i.hash(),t);const u=await this.updateBalance(r,h);return await r.write(),this.unlockTX(i),this.emit("confirmed",i,a),this.emit("balance",u),a}async remove(e){const t=await this.getTX(e);return t?this.removeRecursive(t):null}async erase(e,t){const r=this.bucket.batch(),{tx:i,hash:s}=e,n=t?t.height:-1,a=new S(e,t),h=new v;if(!i.isCoinbase()){const e=await this.getSpentCredits(i);for(let s=0;s<i.inputs.length;s++){const n=e[s];if(!n){t||await this.removeInput(r,i,s);continue}const c=n.coin,u=await this.getPath(c);o(u),a.setInput(s,u,c),h.tx(u,-1),h.coin(u,1),h.unconfirmed(u,c.value),t&&h.confirmed(u,c.value),this.unspendCredit(r,i,s),n.spent=!1,await this.saveCredit(r,n,u)}}for(let e=0;e<i.outputs.length;e++){const s=i.outputs[e],o=await this.getPath(s);if(!o)continue;a.setOutput(e,o);const c=E.fromTX(i,e,n);h.tx(o,-1),h.coin(o,-1),h.unconfirmed(o,-s.value),t&&h.confirmed(o,-s.value),await this.removeCredit(r,c,o)}r.del(b.t.encode(s)),r.del(b.m.encode(e.mtime,s)),t?r.del(b.h.encode(n,s)):r.del(b.p.encode(s));for(const[i,o]of h.accounts)await this.updateAccountBalance(r,i,o),r.del(b.T.encode(i,s)),r.del(b.M.encode(i,e.mtime,s)),t?r.del(b.H.encode(i,n,s)):r.del(b.P.encode(i,s));t?(await this.removeBlockMap(r,n),await this.spliceBlock(r,s,n)):await this.removeTXMap(r,s);const c=await this.updateBalance(r,h);return await r.write(),this.emit("remove tx",i,a),this.emit("balance",c),a}async removeRecursive(e){const{tx:t,hash:r}=e;if(!await this.hasTX(r))return null;for(let e=0;e<t.outputs.length;e++){const t=await this.getSpent(r,e);if(!t)continue;const i=await this.getTX(t.hash);o(i),await this.removeRecursive(i)}return this.erase(e,e.getBlock())}async revert(e){const t=await this.getBlock(e);if(!t)return 0;this.logger.debug("Rescan: reverting block %d",e);const r=t.toArray();for(let e=r.length-1;e>=0;e--){const t=r[e];await this.unconfirm(t)}return r.length}async unconfirm(e){const t=await this.getTX(e);return t?-1===t.height?null:this.disconnect(t,t.getBlock()):null}async disconnect(e,t){const r=this.bucket.batch(),{tx:i,hash:s,height:n}=e,a=new S(e,t),h=new v;if(o(t),e.unsetBlock(),!i.isCoinbase()){const e=await this.getSpentCredits(i);for(let t=0;t<i.inputs.length;t++){const s=e[t];if(!s){await this.writeInput(r,i,t);continue}const n=s.coin;o(-1!==n.height);const c=await this.getPath(n);o(c),a.setInput(t,c,n),h.confirmed(c,n.value),s.spent=!0,await this.saveCredit(r,s,c)}}for(let e=0;e<i.outputs.length;e++){const t=i.outputs[e],o=await this.getPath(t);if(!o)continue;const c=await this.getCredit(s,e);c?(c.spent&&await this.updateSpentCoin(r,i,e,n),a.setOutput(e,o),c.coin.height=-1,h.confirmed(o,-t.value),await this.saveCredit(r,c,o)):await this.updateSpentCoin(r,i,e,n)}await this.addTXMap(r,s),await this.removeBlockMap(r,n),await this.removeBlock(r,i.hash(),n),r.put(b.t.encode(s),e.toRaw()),r.put(b.p.encode(s),null),r.del(b.h.encode(n,s));for(const[e,t]of h.accounts)await this.updateAccountBalance(r,e,t),r.put(b.P.encode(e,s),null),r.del(b.H.encode(e,n,s));const c=await this.updateBalance(r,h);return await r.write(),this.emit("unconfirmed",i,a),this.emit("balance",c),a}async removeConflict(e){const t=e.tx;this.logger.warning("Handling conflicting tx: %h.",t.hash());const r=await this.removeRecursive(e);return this.logger.warning("Removed conflict: %h.",t.hash()),this.emit("conflict",t,r),r}async removeConflicts(e,t){if(e.isCoinbase())return!0;const r=e.hash(),i=[];for(const{prevout:s}of e.inputs){const{hash:e,index:n}=s,a=await this.getSpent(e,n);if(!a)continue;if(a.hash.equals(r))continue;const h=await this.getTX(a.hash);if(o(h),t&&-1!==h.height)return!1;i.push(h)}for(const e of i)await this.removeConflict(e);return!0}lockTX(e){if(!e.isCoinbase())for(const t of e.inputs)this.lockCoin(t.prevout)}unlockTX(e){if(!e.isCoinbase())for(const t of e.inputs)this.unlockCoin(t.prevout)}lockCoin(e){const t=e.toKey();this.locked.add(t)}unlockCoin(e){const t=e.toKey();return this.locked.delete(t)}unlockCoins(){for(const e of this.getLocked())this.unlockCoin(e)}isLocked(e){const t=e.toKey();return this.locked.has(t)}filterLocked(e){const t=[];for(const r of e)this.isLocked(r)||t.push(r);return t}getLocked(){const e=[];for(const t of this.locked.keys())e.push(d.fromKey(t));return e}getAccountHistoryHashes(e){return o("number"==typeof e),this.bucket.keys({gte:b.T.min(e),lte:b.T.max(e),parse:e=>{const[,t]=b.T.decode(e);return t}})}getHistoryHashes(e){return o("number"==typeof e),-1!==e?this.getAccountHistoryHashes(e):this.bucket.keys({gte:b.t.min(),lte:b.t.max(),parse:e=>b.t.decode(e)[0]})}getAccountPendingHashes(e){return o("number"==typeof e),this.bucket.keys({gte:b.P.min(e),lte:b.P.max(e),parse:e=>{const[,t]=b.P.decode(e);return t}})}getPendingHashes(e){return o("number"==typeof e),-1!==e?this.getAccountPendingHashes(e):this.bucket.keys({gte:b.p.min(),lte:b.p.max(),parse:e=>b.p.decode(e)[0]})}async hasPending(e){return this.bucket.has(b.p.encode(e))}getAccountOutpoints(e){return o("number"==typeof e),this.bucket.keys({gte:b.C.min(e),lte:b.C.max(e),parse:e=>{const[,t,r]=b.C.decode(e);return new d(t,r)}})}getOutpoints(e){return o("number"==typeof e),-1!==e?this.getAccountOutpoints(e):this.bucket.keys({gte:b.c.min(),lte:b.c.max(),parse:e=>{const[t,r]=b.c.decode(e);return new d(t,r)}})}getAccountHeightRangeHashes(e,t){o("number"==typeof e);const r=t.start||0,i=t.end||4294967295;return this.bucket.keys({gte:b.H.min(e,r),lte:b.H.max(e,i),limit:t.limit,reverse:t.reverse,parse:e=>{const[,,t]=b.H.decode(e);return t}})}getHeightRangeHashes(e,t){if(o("number"==typeof e),-1!==e)return this.getAccountHeightRangeHashes(e,t);const r=t.start||0,i=t.end||4294967295;return this.bucket.keys({gte:b.h.min(r),lte:b.h.max(i),limit:t.limit,reverse:t.reverse,parse:e=>{const[,t]=b.h.decode(e);return t}})}getHeightHashes(e){return this.getHeightRangeHashes({start:e,end:e})}getAccountRangeHashes(e,t){o("number"==typeof e);const r=t.start||0,i=t.end||4294967295;return this.bucket.keys({gte:b.M.min(e,r),lte:b.M.max(e,i),limit:t.limit,reverse:t.reverse,parse:e=>{const[,,t]=b.M.decode(e);return t}})}getRangeHashes(e,t){if(o("number"==typeof e),-1!==e)return this.getAccountRangeHashes(e,t);const r=t.start||0,i=t.end||4294967295;return this.bucket.keys({gte:b.m.min(r),lte:b.m.max(i),limit:t.limit,reverse:t.reverse,parse:e=>{const[,t]=b.m.decode(e);return t}})}async getRange(e,t){const r=await this.getRangeHashes(e,t),i=[];for(const e of r){const t=await this.getTX(e);o(t),i.push(t)}return i}getLast(e,t){return this.getRange(e,{start:0,end:4294967295,reverse:!0,limit:t||10})}getHistory(e){return o("number"==typeof e),-1!==e?this.getAccountHistory(e):this.bucket.values({gte:b.t.min(),lte:b.t.max(),parse:e=>_.fromRaw(e)})}async getAccountHistory(e){const t=await this.getHistoryHashes(e),r=[];for(const e of t){const t=await this.getTX(e);o(t),r.push(t)}return r}async getPending(e){const t=await this.getPendingHashes(e),r=[];for(const e of t){const t=await this.getTX(e);o(t),r.push(t)}return r}getCredits(e){return o("number"==typeof e),-1!==e?this.getAccountCredits(e):this.bucket.range({gte:b.c.min(),lte:b.c.max(),parse:(e,t)=>{const[r,i]=b.c.decode(e),s=E.fromRaw(t);return s.coin.hash=r,s.coin.index=i,s}})}async getAccountCredits(e){const t=await this.getOutpoints(e),r=[];for(const{hash:e,index:i}of t){const t=await this.getCredit(e,i);t&&r.push(t)}return r}async getSpentCredits(e){if(e.isCoinbase())return[];const t=e.hash(),r=[];for(let t=0;t<e.inputs.length;t++)r.push(null);return await this.bucket.range({gte:b.d.min(t),lte:b.d.max(t),parse:(t,i)=>{const[,s]=b.d.decode(t),n=l.fromRaw(i),a=e.inputs[s];o(a),n.hash=a.prevout.hash,n.index=a.prevout.index,r[s]=new E(n)}}),r}async getCoins(e){const t=await this.getCredits(e),r=[];for(const e of t)e.spent||r.push(e.coin);return r}async getAccountCoins(e){const t=await this.getAccountCredits(e),r=[];for(const e of t)e.spent||r.push(e.coin);return r}async getSpentCoins(e){if(e.isCoinbase())return[];const t=await this.getSpentCredits(e),r=[];for(const e of t)e?r.push(e.coin):r.push(null);return r}async getCoinView(e){const t=new f;if(e.isCoinbase())return t;for(const{prevout:r}of e.inputs){const{hash:e,index:i}=r,s=await this.getCoin(e,i);s&&t.addCoin(s)}return t}async getSpentView(e){const t=new f;if(e.isCoinbase())return t;const r=await this.getSpentCoins(e);for(const e of r)e&&t.addCoin(e);return t}async getTX(e){const t=await this.bucket.get(b.t.encode(e));return t?_.fromRaw(t):null}async getDetails(e){const t=await this.getTX(e);return t?this.toDetails(t):null}async toDetails(e){const t=[];if(!Array.isArray(e))return this._toDetails(e);for(const r of e){const e=await this._toDetails(r);e&&t.push(e)}return t}async _toDetails(e){const t=e.tx,r=e.getBlock(),i=new S(e,r),s=await this.getSpentCoins(t);for(let e=0;e<t.inputs.length;e++){const t=s[e];let r=null;t&&(r=await this.getPath(t)),i.setInput(e,r,t)}for(let e=0;e<t.outputs.length;e++){const r=t.outputs[e],s=await this.getPath(r);i.setOutput(e,s)}return i}hasTX(e){return this.bucket.has(b.t.encode(e))}async getCoin(e,t){const r=await this.getCredit(e,t);return r?r.coin:null}async getCredit(e,t){const r=await this.bucket.get(b.c.encode(e,t));if(!r)return null;const i=E.fromRaw(r);return i.coin.hash=e,i.coin.index=t,i}async getSpentCoin(e,t){const r=await this.bucket.get(b.d.encode(e.hash,e.index));if(!r)return null;const i=l.fromRaw(r);return i.hash=t.hash,i.index=t.index,i}hasSpentCoin(e){return this.bucket.has(b.d.encode(e.hash,e.index))}async updateSpentCoin(e,t,r,i){const s=d.fromTX(t,r),n=await this.getSpent(s.hash,s.index);if(!n)return;const o=await this.getSpentCoin(n,s);o&&(o.height=i,e.put(b.d.encode(n.hash,n.index),o.toRaw()))}async hasCoin(e,t){return this.bucket.has(b.c.encode(e,t))}async getBalance(e){return o("number"==typeof e),-1!==e?this.getAccountBalance(e):this.getWalletBalance()}async getWalletBalance(){const e=await this.bucket.get(b.R.encode());return e?y.fromRaw(-1,e):new y}async getAccountBalance(e){const t=await this.bucket.get(b.r.encode(e));return t?y.fromRaw(e,t):new y(e)}async zap(e,t){o(t>>>0===t);const r=c.now(),i=await this.getRange(e,{start:0,end:r-t}),s=[];for(const e of i)-1===e.height&&(o(r-e.mtime>=t),this.logger.debug("Zapping TX: %h (%d)",e.tx.hash(),this.wid),await this.remove(e.hash),s.push(e.hash));return s}async abandon(e){if(!await this.bucket.has(b.p.encode(e)))throw new Error("TX not eligible.");return this.remove(e)}}}],["bcoin","/lib/wallet/records.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(24,r),h=__browser_require__(20,r),c=__browser_require__(85,r),u=__browser_require__(17,r);class f{constructor(){this.startHeight=0,this.startHash=u.ZERO_HASH,this.height=0,this.marked=!1}clone(){const e=new f;return e.startHeight=this.startHeight,e.startHash=this.startHash,e.height=this.height,e.marked=this.marked,e}fromRaw(e){const t=a.read(e);return this.startHeight=t.readU32(),this.startHash=t.readHash(),this.height=t.readU32(),this.marked=1===t.readU8(),this}static fromRaw(e){return(new this).fromRaw(e)}toRaw(){const e=a.write(41);return e.writeU32(this.startHeight),e.writeHash(this.startHash),e.writeU32(this.height),e.writeU8(this.marked?1:0),e.render()}}class l{constructor(e,t,r){this.hash=e||u.ZERO_HASH,this.height=null!=t?t:-1,this.time=r||0}clone(){return new this.constructor(this.hash,this.height,this.time)}toHash(){return this.hash}fromEntry(e){return this.hash=e.hash,this.height=e.height,this.time=e.time,this}fromJSON(e){return this.hash=h.revHex(e.hash),this.height=e.height,this.time=e.time,this}fromRaw(e){const t=a.read(e);return this.hash=t.readHash(),this.height=t.readU32(),this.time=t.readU32(),this}static fromEntry(e){return(new this).fromEntry(e)}static fromJSON(e){return(new this).fromJSON(e)}static fromRaw(e){return(new this).fromRaw(e)}toRaw(){const e=a.write(42);return e.writeHash(this.hash),e.writeU32(this.height),e.writeU32(this.time),e.render()}toJSON(){return{hash:h.revHex(this.hash),height:this.height,time:this.time}}}e.ChainState=f,e.BlockMeta=l,e.TXRecord=class{constructor(e,t){this.tx=null,this.hash=null,this.mtime=h.now(),this.height=-1,this.block=null,this.index=-1,this.time=0,e&&this.fromTX(e,t)}fromTX(e,t){return this.tx=e,this.hash=e.hash(),t&&this.setBlock(t),this}static fromTX(e,t){return(new this).fromTX(e,t)}setBlock(e){this.height=e.height,this.block=e.hash,this.time=e.time}unsetBlock(){this.height=-1,this.block=null,this.time=0}getBlock(){return-1===this.height?null:new l(this.block,this.height,this.time)}getDepth(e){return o("number"==typeof e,"Must pass in height."),-1===this.height?0:e<this.height?0:e-this.height+1}getSize(){let e=0;return e+=this.tx.getSize(),e+=4,this.block?(e+=1,e+=32,e+=12):e+=1,e}toRaw(){const e=this.getSize(),t=a.write(e);let r=this.index;return this.tx.toWriter(t),t.writeU32(this.mtime),this.block?(-1===r&&(r=2147483647),t.writeU8(1),t.writeHash(this.block),t.writeU32(this.height),t.writeU32(this.time),t.writeU32(r)):t.writeU8(0),t.render()}fromRaw(e){const t=a.read(e);return this.tx=new c,this.tx.fromReader(t),this.hash=this.tx.hash(),this.mtime=t.readU32(),1===t.readU8()&&(this.block=t.readHash(),this.height=t.readU32(),this.time=t.readU32(),this.index=t.readU32(),2147483647===this.index&&(this.index=-1)),this}static fromRaw(e){return(new this).fromRaw(e)}},e.MapRecord=class{constructor(){this.wids=new Set}add(e){return!this.wids.has(e)&&(this.wids.add(e),!0)}remove(e){return this.wids.delete(e)}toWriter(e){e.writeU32(this.wids.size);for(const t of this.wids)e.writeU32(t);return e}getSize(){return 4+4*this.wids.size}toRaw(){const e=this.getSize();return this.toWriter(a.write(e)).render()}fromReader(e){const t=e.readU32();for(let r=0;r<t;r++)this.wids.add(e.readU32());return this}fromRaw(e){return this.fromReader(a.read(e))}static fromReader(e){return(new this).fromReader(e)}static fromRaw(e){return(new this).fromRaw(e)}},r.exports=e}],["bcoin","/lib/wallet/nullclient.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(19,r);r.exports=class extends a{constructor(e){super(),this.wdb=e,this.network=e.network,this.opened=!1}async open(e){o(!this.opened,"NullClient is already open."),this.opened=!0,setImmediate(()=>this.emit("connect"))}async close(){o(this.opened,"NullClient is not open."),this.opened=!1,setImmediate(()=>this.emit("disconnect"))}bind(e,t){return this.on(e,t)}hook(e,t){return this.on(e,t)}async getTip(){const{hash:e,height:t,time:r}=this.network.genesis;return{hash:e,height:t,time:r}}async getEntry(e){return{hash:e,height:0,time:0}}async send(e){this.wdb.emit("send",e)}async setFilter(e){this.wdb.emit("set filter",e)}async addFilter(e){this.wdb.emit("add filter",e)}async resetFilter(){this.wdb.emit("reset filter")}async estimateFee(e){return{rate:this.network.feeRate}}async getHashes(e=-1,t=-1){return[this.network.genesis.hash]}async rescan(e){}}}],["bcoin","/lib/wallet/rpc.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),{format:a}=__browser_require__(55,r),h=__browser_require__(326,r),{Lock:c}=__browser_require__(203,r),u=__browser_require__(252,r),f=__browser_require__(333,r),{BufferMap:l,BufferSet:d}=__browser_require__(86,r),p=__browser_require__(20,r),b=__browser_require__(23,r),g=__browser_require__(88,r),m=__browser_require__(89,r),_=__browser_require__(104,r),w=__browser_require__(167,r),y=__browser_require__(186,r),v=__browser_require__(126,r),E=__browser_require__(111,r),S=__browser_require__(112,r),I=__browser_require__(85,r),k=__browser_require__(17,r),A=__browser_require__(281,r),O=__browser_require__(352,r),x=h.RPC,R=h.RPCError,M={INVALID_REQUEST:h.errors.INVALID_REQUEST,METHOD_NOT_FOUND:h.errors.METHOD_NOT_FOUND,INVALID_PARAMS:h.errors.INVALID_PARAMS,INTERNAL_ERROR:h.errors.INTERNAL_ERROR,PARSE_ERROR:h.errors.PARSE_ERROR,MISC_ERROR:-1,FORBIDDEN_BY_SAFE_MODE:-2,TYPE_ERROR:-3,INVALID_ADDRESS_OR_KEY:-5,OUT_OF_MEMORY:-7,INVALID_PARAMETER:-8,DATABASE_ERROR:-20,DESERIALIZATION_ERROR:-22,VERIFY_ERROR:-25,VERIFY_REJECTED:-26,VERIFY_ALREADY_IN_CHAIN:-27,IN_WARMUP:-28,WALLET_ERROR:-4,WALLET_INSUFFICIENT_FUNDS:-6,WALLET_INVALID_ACCOUNT_NAME:-11,WALLET_KEYPOOL_RAN_OUT:-12,WALLET_UNLOCK_NEEDED:-13,WALLET_PASSPHRASE_INCORRECT:-14,WALLET_WRONG_ENC_STATE:-15,WALLET_ENCRYPTION_FAILED:-16,WALLET_ALREADY_UNLOCKED:-17};function P(e,t){return B(e,t).getHash()}function B(e,t){try{return _.fromString(e,t)}catch(e){throw new R(M.INVALID_ADDRESS_OR_KEY,"Invalid address.")}}function N(e,t){try{return w.fromSecret(e,t)}catch(e){throw new R(M.INVALID_ADDRESS_OR_KEY,"Invalid key.")}}r.exports=class extends x{constructor(e){super(),o(e,"RPC requires a WalletDB."),this.wdb=e.wdb,this.network=e.network,this.logger=e.logger.context("wallet-rpc"),this.client=e.client,this.locker=new c,this.wallet=null,this.init()}getCode(e){switch(e.type){case"RPCError":return e.code;case"ValidationError":return M.TYPE_ERROR;case"EncodingError":return M.DESERIALIZATION_ERROR;case"FundingError":return M.WALLET_INSUFFICIENT_FUNDS;default:return M.INTERNAL_ERROR}}handleCall(e,t){this.logger.debug("Handling RPC call: %s.",e.method)}init(){this.add("help",this.help),this.add("stop",this.stop),this.add("fundrawtransaction",this.fundRawTransaction),this.add("resendwallettransactions",this.resendWalletTransactions),this.add("abandontransaction",this.abandonTransaction),this.add("addmultisigaddress",this.addMultisigAddress),this.add("addwitnessaddress",this.addWitnessAddress),this.add("backupwallet",this.backupWallet),this.add("dumpprivkey",this.dumpPrivKey),this.add("dumpwallet",this.dumpWallet),this.add("encryptwallet",this.encryptWallet),this.add("getaddressinfo",this.getAddressInfo),this.add("getaccountaddress",this.getAccountAddress),this.add("getaccount",this.getAccount),this.add("getaddressesbyaccount",this.getAddressesByAccount),this.add("getbalance",this.getBalance),this.add("getnewaddress",this.getNewAddress),this.add("getrawchangeaddress",this.getRawChangeAddress),this.add("getreceivedbyaccount",this.getReceivedByAccount),this.add("getreceivedbyaddress",this.getReceivedByAddress),this.add("gettransaction",this.getTransaction),this.add("getunconfirmedbalance",this.getUnconfirmedBalance),this.add("getwalletinfo",this.getWalletInfo),this.add("importprivkey",this.importPrivKey),this.add("importwallet",this.importWallet),this.add("importaddress",this.importAddress),this.add("importprunedfunds",this.importPrunedFunds),this.add("importpubkey",this.importPubkey),this.add("keypoolrefill",this.keyPoolRefill),this.add("listaccounts",this.listAccounts),this.add("listaddressgroupings",this.listAddressGroupings),this.add("listlockunspent",this.listLockUnspent),this.add("listreceivedbyaccount",this.listReceivedByAccount),this.add("listreceivedbyaddress",this.listReceivedByAddress),this.add("listsinceblock",this.listSinceBlock),this.add("listtransactions",this.listTransactions),this.add("listunspent",this.listUnspent),this.add("lockunspent",this.lockUnspent),this.add("move",this.move),this.add("sendfrom",this.sendFrom),this.add("sendmany",this.sendMany),this.add("sendtoaddress",this.sendToAddress),this.add("setaccount",this.setAccount),this.add("settxfee",this.setTXFee),this.add("signmessage",this.signMessage),this.add("walletlock",this.walletLock),this.add("walletpassphrasechange",this.walletPassphraseChange),this.add("walletpassphrase",this.walletPassphrase),this.add("removeprunedfunds",this.removePrunedFunds),this.add("selectwallet",this.selectWallet),this.add("getmemoryinfo",this.getMemoryInfo),this.add("setloglevel",this.setLogLevel)}async help(e,t){if(0===e.length)return`Select a command:\n${Object.keys(this.calls).join("\n")}`;const r={method:e[0],params:[]};return await this.execute(r,!0)}async stop(e,t){if(t||0!==e.length)throw new R(M.MISC_ERROR,"stop");return this.wdb.close(),"Stopping."}async fundRawTransaction(e,t){if(t||e.length<1||e.length>2)throw new R(M.MISC_ERROR,'fundrawtransaction "hexstring" ( options )');const r=this.wallet,i=new f(e),s=i.buf(0),n=i.obj(1);if(!s)throw new R(M.TYPE_ERROR,"Invalid hex string.");const o=v.fromRaw(s);if(0===o.outputs.length)throw new R(M.INVALID_PARAMETER,"TX must have at least one output.");let a=null,h=null;if(n){const e=new f(n);a=e.ufixed("feeRate",8),(h=e.str("changeAddress"))&&(h=B(h,this.network))}return await r.fund(o,{rate:a,changeAddress:h}),{hex:o.toRaw().toString("hex"),changepos:o.changeIndex,fee:g.btc(o.getFee(),!0)}}async resendWalletTransactions(e,t){if(t||0!==e.length)throw new R(M.MISC_ERROR,"resendwallettransactions");const r=this.wallet,i=await r.resend(),s=[];for(const e of i)s.push(e.txid());return s}async addMultisigAddress(e,t){throw new Error("Not implemented.")}async addWitnessAddress(e,t){throw new Error("Not implemented.")}async backupWallet(e,t){const r=new f(e).str(0);if(t||1!==e.length||!r)throw new R(M.MISC_ERROR,'backupwallet "destination"');return await this.wdb.backup(r),null}async dumpPrivKey(e,t){if(t||1!==e.length)throw new R(M.MISC_ERROR,'dumpprivkey "bitcoinaddress"');const r=this.wallet,i=P(new f(e).str(0,""),this.network),s=await r.getPrivateKey(i);if(!s)throw new R(M.MISC_ERROR,"Key not found.");return s.toSecret(this.network)}async dumpWallet(e,t){if(t||1!==e.length)throw new R(M.MISC_ERROR,'dumpwallet "filename"');const r=this.wallet,i=new f(e).str(0);if(!i)throw new R(M.TYPE_ERROR,"Invalid parameter.");const s=await this.wdb.getTip(),n=p.date(),o=[a("# Wallet Dump created by Bcoin %s",A.version),a("# * Created on %s",n),a("# * Best block at time of backup was %d (%s).",s.height,p.revHex(s.hash)),a("# * File: %s",i),""],h=await r.getAddressHashes();for(const e of h){const t=await r.getPrivateKey(e);if(!t)continue;const i=t.getAddress("string",this.network);let s="%s %s label= addr=%s";1===t.branch&&(s="%s %s change=1 addr=%s");const h=a(s,t.toSecret(this.network),n,i);o.push(h)}o.push(""),o.push("# End of dump"),o.push("");const c=o.join("\n");return u.unsupported?c:(await u.writeFile(i,c,"utf8"),null)}async encryptWallet(e,t){const r=this.wallet;if(!r.master.encrypted&&(t||1!==e.length))throw new R(M.MISC_ERROR,'encryptwallet "passphrase"');const i=new f(e).str(0,"");if(r.master.encrypted)throw new R(M.WALLET_WRONG_ENC_STATE,"Already running with an encrypted wallet.");if(i.length<1)throw new R(M.MISC_ERROR,'encryptwallet "passphrase"');try{await r.encrypt(i)}catch(e){throw new R(M.WALLET_ENCRYPTION_FAILED,"Encryption failed.")}return"wallet encrypted; we do not need to stop!"}async getAccountAddress(e,t){if(t||1!==e.length)throw new R(M.MISC_ERROR,'getaccountaddress "account"');const r=this.wallet;let i=new f(e).str(0,"");i||(i="default");const s=await r.receiveAddress(i);return s?s.toString(this.network):""}async getAccount(e,t){if(t||1!==e.length)throw new R(M.MISC_ERROR,'getaccount "bitcoinaddress"');const r=this.wallet,i=P(new f(e).str(0,""),this.network),s=await r.getPath(i);return s?s.name:""}async getAddressesByAccount(e,t){if(t||1!==e.length)throw new R(M.MISC_ERROR,'getaddressesbyaccount "account"');const r=this.wallet;let i=new f(e).str(0,"");const s=[];let n;""===i&&(i="default");try{n=await r.getPaths(i)}catch(e){if("Account not found."===e.message)return[];throw e}for(const e of n){const t=e.toAddress();s.push(t.toString(this.network))}return s}async getAddressInfo(e,t){if(t||1!==e.length)throw new R(M.MISC_ERROR,'getaddressinfo "address"');const r=B(new f(e).str(0,""),this.network),i=m.fromAddress(r),s=this.wallet.toJSON(),n=await this.wallet.getPath(r),o=i.isScripthash()||i.isWitnessScripthash(),a=r.isProgram(),h={address:r.toString(this.network),scriptPubKey:i?i.toJSON():undefined,ismine:null!=n,ischange:!!n&&1===n.branch,iswatchonly:s.watchOnly,isscript:o,iswitness:a};return a&&(h.witness_version=r.version,h.witness_program=r.hash.toString("hex")),h}async getBalance(e,t){if(t||e.length>3)throw new R(M.MISC_ERROR,'getbalance ( "account" minconf includeWatchonly )');const r=this.wallet,i=new f(e);let s=i.str(0);const n=i.u32(1,1),o=i.bool(2,!1);if(""===s&&(s="default"),"*"===s&&(s=null),r.watchOnly!==o)return 0;const a=await r.getBalance(s);let h;return h=n>0?a.confirmed:a.unconfirmed,g.btc(h,!0)}async getNewAddress(e,t){if(t||e.length>1)throw new R(M.MISC_ERROR,'getnewaddress ( "account" )');const r=this.wallet;let i=new f(e).str(0);return""!==i&&0!==e.length||(i="default"),(await r.createReceive(i)).getAddress("string",this.network)}async getRawChangeAddress(e,t){if(t||0!==e.length)throw new R(M.MISC_ERROR,"getrawchangeaddress");const r=this.wallet;return(await r.createChange()).getAddress("string",this.network)}async getReceivedByAccount(e,t){if(t||e.length<1||e.length>2)throw new R(M.MISC_ERROR,'getreceivedbyaccount "account" ( minconf )');const r=this.wallet,i=new f(e);let s=i.str(0);const n=i.u32(1,0),o=this.wdb.state.height;""===s&&(s="default");const a=await r.getPaths(s),h=new d;for(const e of a)h.add(e.hash);const c=await r.getHistory(s);let u=0,l=-1;for(const e of c){const t=e.getDepth(o);if(!(t<n)){(-1===l||t<l)&&(l=t);for(const t of e.tx.outputs){const e=t.getHash();e&&h.has(e)&&(u+=t.value)}}}return g.btc(u,!0)}async getReceivedByAddress(e,t){if(t||e.length<1||e.length>2)throw new R(M.MISC_ERROR,'getreceivedbyaddress "bitcoinaddress" ( minconf )');const r=this.wallet,i=new f(e),s=i.str(0,""),n=i.u32(1,0),o=this.wdb.state.height,a=P(s,this.network),h=await r.getHistory();let c=0;for(const e of h)if(!(e.getDepth(o)<n))for(const t of e.tx.outputs)t.getHash().equals(a)&&(c+=t.value);return g.btc(c,!0)}async _toWalletTX(e){const t=this.wallet,r=await t.toDetails(e);if(!r)throw new R(M.WALLET_ERROR,"TX not found.");let i=!0;for(const e of r.inputs)if(e.path){i=!1;break}const s=[];let n=0,o=0;for(let e=0;e<r.outputs.length;e++){const t=r.outputs[e];if(t.path){if(1===t.path.branch)continue;s.push({account:t.path.name,address:t.address.toString(this.network),category:"receive",amount:g.btc(t.value,!0),label:t.path.name,vout:e}),o+=t.value}else i||(s.push({account:"",address:t.address?t.address.toString(this.network):null,category:"send",amount:-g.btc(t.value,!0),fee:-g.btc(r.fee,!0),vout:e}),n+=t.value)}return{amount:g.btc(i?o:-n,!0),confirmations:r.confirmations,blockhash:r.block?p.revHex(r.block):null,blockindex:r.index,blocktime:r.time,txid:p.revHex(r.hash),walletconflicts:[],time:r.mtime,timereceived:r.mtime,"bip125-replaceable":"no",details:s,hex:r.tx.toRaw().toString("hex")}}async getTransaction(e,t){if(t||e.length<1||e.length>2)throw new R(M.MISC_ERROR,'gettransaction "txid" ( includeWatchonly )');const r=this.wallet,i=new f(e),s=i.brhash(0),n=i.bool(1,!1);if(!s)throw new R(M.TYPE_ERROR,"Invalid parameter");const o=await r.getTX(s);if(!o)throw new R(M.WALLET_ERROR,"TX not found.");return await this._toWalletTX(o,n)}async abandonTransaction(e,t){if(t||1!==e.length)throw new R(M.MISC_ERROR,'abandontransaction "txid"');const r=this.wallet,i=new f(e).brhash(0);if(!i)throw new R(M.TYPE_ERROR,"Invalid parameter.");if(!await r.abandon(i))throw new R(M.WALLET_ERROR,"Transaction not in wallet.");return null}async getUnconfirmedBalance(e,t){if(t||e.length>0)throw new R(M.MISC_ERROR,"getunconfirmedbalance");const r=this.wallet,i=await r.getBalance();return g.btc(i.unconfirmed,!0)}async getWalletInfo(e,t){if(t||0!==e.length)throw new R(M.MISC_ERROR,"getwalletinfo");const r=this.wallet,i=await r.getBalance();return{walletid:r.id,walletversion:6,balance:g.btc(i.unconfirmed,!0),unconfirmed_balance:g.btc(i.unconfirmed,!0),txcount:i.tx,keypoololdest:0,keypoolsize:0,unlocked_until:r.master.until,paytxfee:g.btc(this.wdb.feeRate,!0)}}async importPrivKey(e,t){if(t||e.length<1||e.length>3)throw new R(M.MISC_ERROR,'importprivkey "bitcoinprivkey" ( "label" rescan )');const r=this.wallet,i=new f(e),s=i.str(0),n=i.bool(2,!1),o=N(s,this.network);return await r.importKey(0,o),n&&await this.wdb.rescan(0),null}async importWallet(e,t){if(t||e.length<1||e.length>2)throw new R(M.MISC_ERROR,'importwallet "filename" ( rescan )');const r=this.wallet,i=new f(e),s=i.str(0),n=i.bool(1,!1);if(u.unsupported)throw new R(M.INTERNAL_ERROR,"FS not available.");let o;try{o=await u.readFile(s,"utf8")}catch(e){throw new R(M.INTERNAL_ERROR,e.code||"")}const a=o.split(/\n+/),h=[];for(let e of a){if(0===(e=e.trim()).length)continue;if(/^\s*#/.test(e))continue;const t=e.split(/\s+/);if(t.length<4)throw new R(M.DESERIALIZATION_ERROR,"Malformed wallet.");const r=N(t[0],this.network);h.push(r)}for(const e of h)await r.importKey(0,e);return n&&await this.wdb.rescan(0),null}async importAddress(e,t){if(t||e.length<1||e.length>4)throw new R(M.MISC_ERROR,'importaddress "address" ( "label" rescan p2sh )');const r=this.wallet,i=new f(e);let s=i.str(0,"");const n=i.bool(2,!1);if(i.bool(3,!1)){let e=i.buf(0);if(!e)throw new R(M.TYPE_ERROR,"Invalid parameters.");e=m.fromRaw(e),s=(e=m.fromScripthash(e.hash160())).getAddress()}else s=B(s,this.network);try{await r.importAddress(0,s)}catch(e){if("Address already exists."!==e.message)throw e}return n&&await this.wdb.rescan(0),null}async importPubkey(e,t){if(t||e.length<1||e.length>3)throw new R(M.MISC_ERROR,'importpubkey "pubkey" ( "label" rescan )');const r=this.wallet,i=new f(e),s=i.buf(0),n=i.bool(2,!1);if(!s)throw new R(M.TYPE_ERROR,"Invalid parameter.");const o=w.fromPublic(s,this.network);return await r.importKey(0,o),n&&await this.wdb.rescan(0),null}async keyPoolRefill(e,t){if(t||e.length>1)throw new R(M.MISC_ERROR,"keypoolrefill ( newsize )");return null}async listAccounts(e,t){if(t||e.length>2)throw new R(M.MISC_ERROR,"listaccounts ( minconf includeWatchonly)");const r=this.wallet,i=new f(e),s=i.u32(0,0),n=i.bool(1,!1),o=await r.getAccounts(),a={};for(const e of o){const t=await r.getBalance(e);let i=t.unconfirmed;s>0&&(i=t.confirmed),r.watchOnly!==n&&(i=0),a[e]=g.btc(i,!0)}return a}async listAddressGroupings(e,t){throw new Error("Not implemented.")}async listLockUnspent(e,t){if(t||e.length>0)throw new R(M.MISC_ERROR,"listlockunspent");const r=this.wallet.getLocked(),i=[];for(const e of r)i.push({txid:e.txid(),vout:e.index});return i}async listReceivedByAccount(e,t){if(t||e.length>3)throw new R(M.MISC_ERROR,"listreceivedbyaccount ( minconf includeempty includeWatchonly )");const r=new f(e),i=r.u32(0,0),s=r.bool(1,!1),n=r.bool(2,!1);return await this._listReceived(i,s,n,!0)}async listReceivedByAddress(e,t){if(t||e.length>3)throw new R(M.MISC_ERROR,"listreceivedbyaddress ( minconf includeempty includeWatchonly )");const r=new f(e),i=r.u32(0,0),s=r.bool(1,!1),n=r.bool(2,!1);return await this._listReceived(i,s,n,!1)}async _listReceived(e,t,r,i){const s=this.wallet,n=await s.getPaths(),o=this.wdb.state.height,a=new l;for(const e of n){const t=e.toAddress();a.set(e.hash,{involvesWatchonly:s.watchOnly,address:t.toString(this.network),account:e.name,amount:0,confirmations:-1,label:""})}const h=await s.getHistory();for(const t of h){const r=t.getDepth(o);if(!(r<e))for(const e of t.tx.outputs){const t=e.getAddress();if(!t)continue;const i=t.getHash(),s=a.get(i);s&&((-1===s.confirmations||r<s.confirmations)&&(s.confirmations=r),s.address=t.toString(this.network),s.amount+=e.value)}}let c=[];for(const e of a.values())c.push(e);if(i){const e=new Map;for(const t of c){const r=e.get(t.account);r?r.amount+=t.amount:(e.set(t.account,t),t.address=undefined)}c=[];for(const t of e.values())c.push(t)}const u=[];for(const e of c)(t||0!==e.amount)&&(-1===e.confirmations&&(e.confirmations=0),e.amount=g.btc(e.amount,!0),u.push(e));return u}async listSinceBlock(e,t){if(t||e.length>3)throw new R(M.MISC_ERROR,'listsinceblock ( "blockhash" target-confirmations includeWatchonly)');const r=this.wallet,i=this.wdb.state.height,s=new f(e),n=s.brhash(0),o=s.u32(1,0),a=s.bool(2,!1);if(r.watchOnly!==a)return[];let h=-1;if(n){const e=await this.client.getEntry(n);if(!e)throw new R(M.MISC_ERROR,"Block not found.");h=e.height}-1===h&&(h=i);const c=await r.getHistory(),u=[];let l=null;for(const e of c){if(e.height<h)continue;if(e.getDepth(i)<o)continue;(!l||e.height>l)&&(l=e);const t=await this._toListTX(e);u.push(t)}return{transactions:u,lastblock:l&&l.block?p.revHex(l.block):p.revHex(k.ZERO_HASH)}}async _toListTX(e){const t=this.wallet,r=await t.toDetails(e);if(!r)throw new R(M.WALLET_ERROR,"TX not found.");let i=!0;for(const e of r.inputs)if(e.path){i=!1;break}let s=0,n=0,a=null,h=null,c=-1,u=-1;for(let e=0;e<r.outputs.length;e++){const t=r.outputs[e];if(t.path){if(1===t.path.branch)continue;n+=t.value,h=t,u=e}else s+=t.value,a=t,c=e}let f=null,l=-1;i?(o(h),f=h,l=u):a?(f=a,l=c):(i=!0,n=0,f=h,l=u);let d=!1;return-1===e.height&&e.tx.isRBF()&&(d=!0),{account:f.path?f.path.name:"",address:f.address?f.address.toString(this.network):null,category:i?"receive":"send",amount:g.btc(i?n:-s,!0),label:f.path?f.path.name:undefined,vout:l,confirmations:r.getDepth(this.wdb.height),blockhash:r.block?p.revHex(r.block):null,blockindex:-1,blocktime:r.time,blockheight:r.height,txid:p.revHex(r.hash),walletconflicts:[],time:r.mtime,timereceived:r.mtime,"bip125-replaceable":d?"yes":"no"}}async listTransactions(e,t){if(t||e.length>4)throw new R(M.MISC_ERROR,'listtransactions ( "account" count from includeWatchonly)');const r=this.wallet,i=new f(e);let s=i.str(0);const n=i.u32(1,10),o=i.u32(2,0),a=i.bool(3,!1);if(r.watchOnly!==a)return[];""===s&&(s="default");const h=await r.getHistory(s);O.sortTX(h);const c=o+n,u=Math.min(c,h.length),l=[];for(let e=o;e<u;e++){const t=h[e],r=await this._toListTX(t);l.push(r)}return l}async listUnspent(e,t){if(t||e.length>3)throw new R(M.MISC_ERROR,'listunspent ( minconf maxconf  ["address",...] )');const r=this.wallet,i=new f(e),s=i.u32(0,1),n=i.u32(1,9999999),o=i.array(2),a=this.wdb.state.height,h=new d;if(o){const e=new f(o);for(let t=0;t<o.length;t++){const r=P(e.str(t,""),this.network);if(h.has(r))throw new R(M.INVALID_PARAMETER,"Duplicate address.");h.add(r)}}const c=await r.getCoins();O.sortCoins(c);const u=[];for(const e of c){const t=e.getDepth(a);if(t<s||t>n)continue;const i=e.getAddress();if(!i)continue;const c=e.getHash();if(o&&(!c||!h.has(c)))continue;const f=await r.getKey(c);u.push({txid:e.txid(),vout:e.index,address:i?i.toString(this.network):null,account:f?f.name:undefined,redeemScript:f&&f.script?f.script.toJSON():undefined,scriptPubKey:e.script.toJSON(),amount:g.btc(e.value,!0),confirmations:t,spendable:!r.isLocked(e),solvable:!0})}return u}async lockUnspent(e,t){if(t||e.length<1||e.length>2)throw new R(M.MISC_ERROR,'lockunspent unlock ([{"txid":"txid","vout":n},...])');const r=this.wallet,i=new f(e),s=i.bool(0,!1),n=i.array(1);if(1===e.length)return s&&r.unlockCoins(),!0;if(!n)throw new R(M.TYPE_ERROR,"Invalid parameter.");for(const e of n){const t=new f(e),i=t.brhash("txid"),n=t.u32("vout");if(null==i||null==n)throw new R(M.INVALID_PARAMETER,"Invalid parameter.");const o=new E(i,n);s?r.unlockCoin(o):r.lockCoin(o)}return!0}async move(e,t){throw new Error("Not implemented.")}async sendFrom(e,t){if(t||e.length<3||e.length>6)throw new R(M.MISC_ERROR,'sendfrom "fromaccount" "tobitcoinaddress" amount ( minconf "comment" "comment-to" )');const r=this.wallet,i=new f(e);let s=i.str(0);const n=i.str(1),o=i.ufixed(2,8),a=i.u32(3,0),h=B(n,this.network);if(!h||null==o)throw new R(M.TYPE_ERROR,"Invalid parameter.");""===s&&(s="default");const c={account:s,depth:a,outputs:[{address:h,value:o}]};return(await r.send(c)).txid()}async sendMany(e,t){if(t||e.length<2||e.length>5)throw new R(M.MISC_ERROR,'sendmany "fromaccount" {"address":amount,...} ( minconf "comment" subtractfee )');const r=this.wallet,i=new f(e);let s=i.str(0);const n=i.obj(1),o=i.u32(2,1),a=i.bool(4,!1);if(""===s&&(s="default"),!n)throw new R(M.TYPE_ERROR,"Invalid send-to address.");const h=new f(n),c=new d,u=[];for(const e of Object.keys(n)){const t=h.ufixed(e,8),r=B(e,this.network),i=r.getHash();if(null==t)throw new R(M.INVALID_PARAMETER,"Invalid amount.");if(c.has(i))throw new R(M.INVALID_PARAMETER,"Each send-to address must be unique.");c.add(i);const s=new S;s.value=t,s.script.fromAddress(r),u.push(s)}const l={outputs:u,subtractFee:a,account:s,depth:o};return(await r.send(l)).txid()}async sendToAddress(e,t){if(t||e.length<2||e.length>5)throw new R(M.MISC_ERROR,'sendtoaddress "bitcoinaddress" amount ( "comment" "comment-to" subtractfeefromamount )');const r=this.wallet,i=new f(e),s=i.str(0),n=i.ufixed(1,8),o=i.bool(4,!1),a=B(s,this.network);if(!a||null==n)throw new R(M.TYPE_ERROR,"Invalid parameter.");const h={subtractFee:o,outputs:[{address:a,value:n}]};return(await r.send(h)).txid()}async setAccount(e,t){throw new Error("Not implemented.")}async setTXFee(e,t){const r=new f(e).ufixed(0,8);if(t||e.length<1||e.length>1)throw new R(M.MISC_ERROR,"settxfee amount");if(null==r)throw new R(M.TYPE_ERROR,"Invalid parameter.");return this.wdb.feeRate=r,!0}async signMessage(e,t){if(t||2!==e.length)throw new R(M.MISC_ERROR,'signmessage "bitcoinaddress" "message"');const r=this.wallet,i=new f(e),s=i.str(0,""),n=i.str(1,""),o=P(s,this.network),a=await r.getKey(o);if(!a)throw new R(M.WALLET_ERROR,"Address not found.");if(!r.master.key)throw new R(M.WALLET_UNLOCK_NEEDED,"Wallet is locked.");return b.sign(n,a).toString("base64")}async walletLock(e,t){const r=this.wallet;if(t||r.master.encrypted&&0!==e.length)throw new R(M.MISC_ERROR,"walletlock");if(!r.master.encrypted)throw new R(M.WALLET_WRONG_ENC_STATE,"Wallet is not encrypted.");return await r.lock(),null}async walletPassphraseChange(e,t){const r=this.wallet;if(t||r.master.encrypted&&2!==e.length)throw new R(M.MISC_ERROR,'walletpassphrasechange "oldpassphrase" "newpassphrase"');const i=new f(e),s=i.str(0,""),n=i.str(1,"");if(!r.master.encrypted)throw new R(M.WALLET_WRONG_ENC_STATE,"Wallet is not encrypted.");if(s.length<1||n.length<1)throw new R(M.INVALID_PARAMETER,"Invalid parameter");return await r.setPassphrase(n,s),null}async walletPassphrase(e,t){const r=this.wallet,i=new f(e),s=i.str(0,""),n=i.u32(1);if(t||r.master.encrypted&&2!==e.length)throw new R(M.MISC_ERROR,'walletpassphrase "passphrase" timeout');if(!r.master.encrypted)throw new R(M.WALLET_WRONG_ENC_STATE,"Wallet is not encrypted.");if(s.length<1)throw new R(M.INVALID_PARAMETER,"Invalid parameter");if(null==n)throw new R(M.TYPE_ERROR,"Invalid parameter");return await r.unlock(s,n),null}async importPrunedFunds(e,t){if(t||2!==e.length)throw new R(M.MISC_ERROR,'importprunedfunds "rawtransaction" "txoutproof"');const r=new f(e),i=r.buf(0),s=r.buf(1);if(!i||!s)throw new R(M.TYPE_ERROR,"Invalid parameter.");const n=I.fromRaw(i),o=y.fromRaw(s),a=o.hash();if(!o.verify())throw new R(M.VERIFY_ERROR,"Invalid proof.");if(!o.hasTX(n.hash()))throw new R(M.VERIFY_ERROR,"Invalid proof.");const h=await this.client.getEntry(a);if(-1===h)throw new R(M.VERIFY_ERROR,"Invalid proof.");const c={hash:a,time:o.time,height:h};if(!await this.wdb.addTX(n,c))throw new R(M.WALLET_ERROR,"Address for TX not in wallet, or TX already in wallet");return null}async removePrunedFunds(e,t){if(t||1!==e.length)throw new R(M.MISC_ERROR,'removeprunedfunds "txid"');const r=this.wallet,i=new f(e).brhash(0);if(!i)throw new R(M.TYPE_ERROR,"Invalid parameter.");if(!await r.remove(i))throw new R(M.WALLET_ERROR,"Transaction not in wallet.");return null}async selectWallet(e,t){const r=new f(e).str(0);if(t||1!==e.length)throw new R(M.MISC_ERROR,'selectwallet "id"');const i=await this.wdb.get(r);if(!i)throw new R(M.WALLET_ERROR,"Wallet not found.");return this.wallet=i,null}async getMemoryInfo(e,t){if(t||0!==e.length)throw new R(M.MISC_ERROR,"getmemoryinfo");return this.logger.memoryUsage()}async setLogLevel(e,t){if(t||1!==e.length)throw new R(M.MISC_ERROR,'setloglevel "level"');const r=new f(e).str(0,"");return this.logger.setLevel(r),null}}}],["bcoin","/lib/wallet/node.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(15,r),a=__browser_require__(313,r),h=__browser_require__(365,r),c=__browser_require__(355,r),u=__browser_require__(354,r),f=__browser_require__(370,r);r.exports=class extends a{constructor(e){super("bcoin","wallet.conf","wallet.log",e),this.opened=!1,this.client=new u({network:this.network,url:this.config.str("node-url"),host:this.config.str("node-host"),port:this.config.uint("node-port",this.network.rpcPort),ssl:this.config.bool("node-ssl"),apiKey:this.config.str("node-api-key")}),this.wdb=new h({network:this.network,logger:this.logger,workers:this.workers,client:this.client,prefix:this.config.prefix,memory:this.config.bool("memory"),maxFiles:this.config.uint("max-files"),cacheSize:this.config.mb("cache-size"),witness:this.config.bool("witness"),wipeNoReally:this.config.bool("wipe-no-really"),spv:this.config.bool("spv")}),this.rpc=new f(this),this.http=new c({network:this.network,logger:this.logger,node:this,prefix:this.config.prefix,ssl:this.config.bool("ssl"),keyFile:this.config.path("ssl-key"),certFile:this.config.path("ssl-cert"),host:this.config.str("http-host"),port:this.config.uint("http-port"),apiKey:this.config.str("api-key"),walletAuth:this.config.bool("wallet-auth"),noAuth:this.config.bool("no-auth"),cors:this.config.bool("cors"),adminToken:this.config.str("admin-token")}),this.init()}init(){this.wdb.on("error",e=>this.error(e)),this.http.on("error",e=>this.error(e)),this.loadPlugins()}async open(){o(!this.opened,"WalletNode is already open."),this.opened=!0,await this.handlePreopen(),await this.wdb.open(),this.rpc.wallet=this.wdb.primary,await this.openPlugins(),await this.http.open(),await this.handleOpen(),this.logger.info("Wallet node is loaded.")}async close(){o(this.opened,"WalletNode is not open."),this.opened=!1,await this.handlePreclose(),await this.http.close(),await this.closePlugins(),this.rpc.wallet=null,await this.wdb.close(),await this.handleClose()}}}],["bcoin","/lib/workers/index.js",function(e,t,r,i,s,n){"use strict";e.Framer=__browser_require__(324,r),e.jobs=__browser_require__(319,r),e.packets=__browser_require__(322,r),e.Parser=__browser_require__(323,r),e.WorkerPool=__browser_require__(317,r)}],["bcrypto","/lib/encoding/base58-browser.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(374,r)}],["bcrypto","/lib/js/base58.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(5,r),a="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",h=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,-1,-1,-1,-1,-1,-1,-1,9,10,11,12,13,14,15,16,-1,17,18,19,20,21,-1,22,23,24,25,26,27,28,29,30,31,32,-1,-1,-1,-1,-1,-1,33,34,35,36,37,38,39,40,41,42,43,-1,44,45,46,47,48,49,50,51,52,53,54,55,56,57,-1,-1,-1,-1,-1];e.native=0,e.encode=function(e){o(null!=e&&!0===e._isBuffer);let t=0,r=0;for(;r<e.length&&0===e[r];r++)t+=1;const i=Buffer.allocUnsafe(1+(138*e.length/100|0));i.fill(0);let s=0;for(;r<e.length;r++){let t=e[r],n=0;for(let e=i.length-1;e>=0&&!(0===t&&n>=s);e--,n++)t+=256*i[e],i[e]=t%58,t=t/58|0;o(0===t),s=n}for(r=i.length-s;r<i.length&&0===i[r];)r+=1;let n="";for(let e=0;e<t;e++)n+="1";for(;r<i.length;r++)n+=a[i[r]];return n},e.decode=function(e){o("string"==typeof e);let t=0,r=0;for(;r<e.length&&"1"===e[r];r++)t+=1;const i=Buffer.allocUnsafe(1+(733*e.length/1e3|0));i.fill(0);let s=0;for(;r<e.length;r++){const t=e.charCodeAt(r),n=65408&t?-1:h[t];if(-1===n)throw new Error("Non-base58 character.");let a=n,c=0;for(let e=i.length-1;e>=0&&!(0===a&&c>=s);e--,c++)a+=58*i[e],i[e]=255&a,a>>>=8;o(0===a),s=c}for(r=0;r<i.length&&0===i[r];)r+=1;const n=Buffer.allocUnsafe(t+(i.length-r));let a;for(a=0;a<t;a++)n[a]=0;for(;r<i.length;)n[a++]=i[r++];return n},e.test=function(e){o("string"==typeof e);for(let t=0;t<e.length;t++){const r=e.charCodeAt(t);if(65408&r)return!1;if(-1===h[r])return!1}return!0}}],["bsigner","/lib/inputData.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(2,r),{enforce:a}=o,{Struct:h}=__browser_require__(75,r),c=__browser_require__(17,r),u=__browser_require__(111,r),f=__browser_require__(127,r),l=__browser_require__(112,r),d=__browser_require__(85,r),{Path:p}=__browser_require__(172,r);function b(e,t,r){if(p.isPath(t))return t;if("string"==typeof t)return e.fromString(t),e;if(Array.isArray(t))return e.fromList(t,!1),e;if("object"==typeof t)return e.fromOptions(t),e;throw new Error(`Unknown type for ${r}.`)}e.InputData=class extends h{constructor(e){super(),this.path=new p,this.witness=!1,this.prevout=new u,this.prevTX=null,this.output=new l,this.multisig=null,this._coin=null,e&&this.fromOptions(e)}fromOptions(e){a(e,"options","object"),o(e.path,"options.path is required."),o(null!=e.prevout||null!=e.coin,"options.prevout or options.coin is required."),o(null!=e.output||null!=e.coin||e.prevTX,"options.output, options.coin or options.prevTX is required."),this.path=b(this.path,e.path,"options.path"),null!=e.prevout&&(this.prevout=function(e,t){if(u.isOutpoint(t))return t;if(null!=t&&!0===t._isBuffer)return e.fromRaw(t),e;if("string"==typeof t)return e.fromRaw(Buffer.from(t,"hex")),e;if("object"==typeof t)return e.fromOptions(t),e;throw new Error("Unknown type for options.prevout.")}(this.prevout,e.prevout)),null!=e.output&&(this.output=function(e,t){if(l.isOutput(t))return t;if(null!=t&&!0===t._isBuffer)return e.fromRaw(t),e;if("string"==typeof t)return e.fromRaw(Buffer.from(t,"hex")),e;if("object"==typeof t){let r=t.script;return"string"==typeof t.script&&(r=Buffer.from(t.script,"hex")),e.fromOptions({value:t.value,script:r,address:t.address}),e}throw new Error("Unknown type for options.output.")}(this.output,e.output));let t=null;if(null!=e.coin&&(t=function(e){if(f.isCoin(e))return e;if(null!=e&&!0===e._isBuffer)return f.fromRaw(e);if("string"==typeof e)return f.fromRaw(Buffer.from(e,"hex"));if("object"==typeof e){let t=e.script;return"string"==typeof e.script&&(t=Buffer.from(t,"hex")),f.fromOptions({...e,script:t})}throw new Error("Unknown type for options.coin.")}(e.coin)),null!=t&&null==e.prevout&&(o(!function(e){if(null==e)return!0;if(null!=e&&!0===e._isBuffer)return!0;if("string"==typeof e)return!0;if("object"==typeof e)return null==e.index||!1===e.coinbase&&null==e.hash;if(f.isCoin(e)){if(!0===e.coinbase)return!1;if(e.hash.equals(c.ZERO_HASH))return!0}return!0}(e.coin),"options.prevout is required with minimal coin (no hash/index)"),this.prevout.fromOptions({hash:t.hash,index:t.index})),null!=t&&null==e.output&&this.output.fromOptions(t),this._coin=t,null!=e.witness&&(a("boolean"==typeof e.witness,"options.witness","boolean"),this.witness=e.witness),o(this.witness||null!=e.prevTX,"non-witness inputs need prevTX."),null!=e.prevTX&&(this.prevTX=function(e){if(d.isTX(e))return e;if(null!=e&&!0===e._isBuffer)return d.fromRaw(e);if("string"==typeof e)return d.fromRaw(Buffer.from(e,"hex"));throw new Error("Unknown type for options.prevTX")}(e.prevTX),this.output=this.prevTX.outputs[this.prevout.index],o(this.prevTX.hash().equals(this.prevout.hash),"prevout hash and prevTX hash do not match.")),null!=e.multisig){const t={m:e.multisig.m,pubkeys:[]};o(t.m>>>0===t.m,"options.multisig.m must be a number."),o(Array.isArray(e.multisig.pubkeys),"options.multisig.pubkeys must be an array."),o(e.multisig.pubkeys.length>=e.multisig.m,"m must be smaller than n.");for(const r of e.multisig.pubkeys){a("string"==typeof r.xpub,"pubkeys[i].xpub","string"),a("string"==typeof r.signature,"pubkeys[i].signature","hex string.");let e=new p;e=b(e,r.path,"options.multisig.pubkeys[i].path");const i={xpub:r.xpub,path:e,signature:r.signature};t.pubkeys.push(i)}this.multisig=t}return this}fromJSON(e){if(a("object"==typeof e,"json","object"),a("string"==typeof e.path,"json.path","string"),a("boolean"==typeof e.witness,"json.witness","boolean"),o(null!=e.prevout||null!=e.coin,"json.prevout or json.coin is required."),o(null!=e.output||null!=e.coin,"json.output or json.coin is required."),this.path=p.fromString(e.path),this.witness=e.witness,null!=e.prevout&&this.prevout.fromJSON(e.prevout),null!=e.output&&this.output.fromJSON(e.output),null!=e.coin&&null==e.prevout&&(o("string"==typeof e.coin.hash,"Can not use minimal encoded Coin for prevout."),o(e.coin.index>>>0===e.coin.index,"Can not use minimal encoded Coin for prevout."),this.prevout.fromJSON({hash:e.coin.hash,index:e.coin.index})),null!=e.coin&&null==e.output&&this.output.fromJSON(e.coin),null!=e.prevTX&&(this.prevTX=d.fromRaw(Buffer.from(e.prevTX,"hex"))),null!=e.multisig){a(e.multisig.m>>>0===e.multisig.m,"json.multisig.m","number"),a(Array.isArray(e.multisig.pubkeys),"json.multisig.pubkeys","array");const t=[];for(const r of e.multisig.pubkeys){a("string"==typeof r.xpub,"json.multisig.pubkeys[i].xpub","string"),a("string"==typeof r.path,"json.multisig.pubkeys[i].path","string"),a("string"==typeof r.signature,"json.multisig.pubkeys[i].signature","hex string");let e=new p;e=b(e,r.path,"json.multisig.pubkeys[i].path"),t.push({xpub:r.xpub,path:e,signature:r.signature})}this.multisig={m:e.multisig.m,pubkeys:t}}return this}getJSON(e){let t=null;return this.multisig&&(t={m:this.multisig.m,pubkeys:this.multisig.pubkeys.map(e=>({xpub:e.xpub,path:e.path.toString(),signature:e.signature}))}),{path:this.path.toString(),prevout:this.prevout.toJSON(),witness:this.witness,output:this.output.getJSON(e),prevTX:this.prevTX?this.prevTX.toRaw().toString("hex"):null,multisig:t}}toKey(){return this.prevout.toKey()}get coin(){return this._coin||(this._coin=f.fromOptions({version:this.prevTX?this.prevTX.version:null,value:this.output.value,script:this.output.script,coinbase:this.prevout.isNull(),hash:this.prevout.hash,index:this.prevout.index})),this._coin}refresh(){this._coin=null}static isInputData(e){return e instanceof this}}}],["bsigner","/lib/device/helpers/ledger.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(2,r),{LedgerTXInput:a}=__browser_require__(123,r),h=__browser_require__(169,r);e.createLedgerInputs=function(e,t,r){const i=[];for(const s of e.inputs){const e=s.prevout.toKey(),n=t.get(e);o(n,`Could not get metadata for input ${e.toString("hex")}`);const c=n.path.toList(),{multisig:u,witness:f,prevTX:l,coin:d}=n;let p=l;p&&p.mutable&&(p=p.toTX());let b=null;u&&(b=h.getRedeemScript(n,r));const g=new a({witness:f,redeem:b,coin:d,path:c,index:s.prevout.index,tx:p});i.push(g)}return i}}],["bsigner","/lib/manager/abstract.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(2,r),a=__browser_require__(19,r),h=__browser_require__(56,r),c=__browser_require__(14,r),u=async e=>e[0];r.exports=class extends a{constructor(e){super(),this.logger=h.global.context("device-manager"),this.network=c.primary,this.options={},this.selector=u,this.opened=!1,this.selected=null,this.cachedDevices=new Map,e&&this.fromOptions(e)}fromOptions(e){return o("object"==typeof e),this.options=e,null!=e.selector&&(o("function"==typeof e.selector),this.selector=e.selector),null!=e.logger&&(o("object"==typeof e.logger),this.logger=e.logger.context("device-manager")),null!=e.network&&(this.network=c.get(e.network)),this}get vendor(){throw new Error("Abstract getter.")}init(){return this}bind(){throw new Error("Abstract method.")}unbind(){throw new Error("Abstract method.")}async open(){throw new Error("Abstract method.")}async close(){throw new Error("Abstract method.")}async selecetDevice(e){throw new Error("Abstract method.")}async deselectDevice(){throw new Error("Abstract method.")}async getDevices(){throw new Error("Abstract method.")}async getPublicKey(e,t=!0){return o(this.selected,"Device was not selected."),this.selected.getPublicKey(e,t)}async getXPUB(e){return o(this.selected,"Device was not selected."),this.selected.getXPUB(e)}async signTransaction(e,t){return o(this.selected,"Device was not selected."),this.selected.signTransaction(e,t)}async getSignatures(e,t){return o(this.selected,"Device was not selected."),this.selected.getSignatures(e,t)}async signMessage(e,t){return o(this.selected,"Device was not selected."),this.selected.signMessage(e,t)}static fromOptions(e){return(new this).fromOptions(e)}}}],["bsigner","/lib/manager/trezor.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(2,r),a=__browser_require__(14,r),h=__browser_require__(379,r),c=h.default,u=__browser_require__(377,r),f=__browser_require__(746,r),{vendors:l}=__browser_require__(1,r),{DEVICE:d,DEVICE_EVENT:p}=h;r.exports=class extends u{constructor(e){super(),this._deviceEventHandler=null,null!=e&&this.fromOptions(e)}fromOptions(e){return o("object"==typeof e),this.options=e,null!=e.selector&&(o("function"==typeof e.selector),this.selector=e.selector),null!=e.logger&&(o("object"==typeof e.logger),this.logger=e.logger.context("trezor-device-manager")),null!=e.network&&(this.network=a.get(e.network)),null!=e.debugTrezor&&(o("boolean"==typeof e.debugTrezor),this.debugTrezor=e.debugTrezor),this}get vendor(){return l.TREZOR}handleDeviceEvent(e){const{payload:t}=e,{type:r,path:i}=t;switch(e.type){case d.CONNECT:{if("acquired"!==r){o(!this.cachedDevices.has(i));break}const e=f.fromOptions({path:i,label:t.label,deviceID:t.features.device_id,logger:this.logger,network:this.network});this.cachedDevices.set(i,e),this.emit("connect",e);break}case d.DISCONNECT:{if(!this.cachedDevices.has(i))break;const e=this.cachedDevices.get(i);e.destroy(),this.cachedDevices.delete(i),this.emit("disconnect",e);break}case d.CHANGED:{if(!this.cachedDevices.has(i))break;const e=t.label,r=t.status,s=this.cachedDevices.get(i);s.status=r,s.label=e,this.logger.debug("Device change:",s);break}case d.CONNECT_UNACQUIRED:o(!this.cachedDevices.has(i));break;default:this.logger.debug("Event: %s",e.type)}}bind(){this._deviceEventHandler=this.handleDeviceEvent.bind(this),c.on(p,this._deviceEventHandler)}unbind(){c.off(p,this._deviceEventHandler),this._deviceEventHandler=null}async open(){o(!this.opened,"Already opened."),this.opened=!0,this.bind(),await c.init({popup:!1,debug:this.options.debugTrezor,manifest:{email:"",appUrl:""}})}async close(){o(this.opened,"Not open."),this.opened=!1,this.unbind(),this.logger.debug("Closing trezor manager.");for(const e of this.cachedDevices.values())e.opened&&await e.close(),e.destroy();await c.stop(),this.cachedDevices.clear()}async selectDevice(e){if(o(this.opened,"Not open."),e){const t=e.handle;if(!this.cachedDevices.has(t))throw new Error("Device not found.");return await this.deselectDevice(),this.selected=e,this.emit("select",e),await e.open(),e}if(0===this.cachedDevices.size)throw new Error("No devices available.");await this.deselectDevice();const t=await this.getDevices(),r=await this.selector(t);if(!r)throw new Error("Device was not selected.");return this.selected=r,this.emit("select",this.selected),await this.selected.open(),r}async deselectDevice(){return!!this.selected&&(this.selected.opened&&await this.selected.close(),this.emit("deselect",this.selected),this.selected=null,!0)}async getDevices(){return o(this.opened,"Not open."),Array.from(this.cachedDevices.values())}static fromOptions(e){return new this(e)}}}],["btrezor-connect","/index.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(380,r)}],["trezor-connect","/lib/index.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0;var h={UI_EVENT:!0,DEVICE_EVENT:!0,RESPONSE_EVENT:!0,TRANSPORT_EVENT:!0,BLOCKCHAIN_EVENT:!0,TRANSPORT:!0,IFRAME:!0,UI:!0,DEVICE:!0,BLOCKCHAIN:!0};e.BLOCKCHAIN=e.DEVICE=e.UI=e.IFRAME=e.TRANSPORT=e.default=void 0;var c=a(__browser_require__(384,r)),u=__browser_require__(385,r);e.UI_EVENT=u.UI_EVENT,e.DEVICE_EVENT=u.DEVICE_EVENT,e.RESPONSE_EVENT=u.RESPONSE_EVENT,e.TRANSPORT_EVENT=u.TRANSPORT_EVENT,e.BLOCKCHAIN_EVENT=u.BLOCKCHAIN_EVENT;var f=o(__browser_require__(386,r));e.TRANSPORT=f;var l=o(__browser_require__(387,r));e.IFRAME=l;var d=o(__browser_require__(388,r));e.UI=d;var p=o(__browser_require__(389,r));e.DEVICE=p;var b=o(__browser_require__(390,r));e.BLOCKCHAIN=b;o(__browser_require__(391,r));var g=__browser_require__(405,r),m=__browser_require__(744,r);Object.keys(m).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(h,t)||(e[t]=m[t]))});var _=__browser_require__(745,r);function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach(function(t){(0,c.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}Object.keys(_).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(h,t)||(e[t]=_[t]))});class v{}(0,c.default)(v,"manifest",e=>{(0,g.manifest)(e)}),(0,c.default)(v,"getSettings",async()=>await(0,g.getSettings)()),(0,c.default)(v,"init",async e=>await(0,g.init)(e)),(0,c.default)(v,"on",(e,t)=>{g.eventEmitter.on(e,t)}),(0,c.default)(v,"off",(e,t)=>{g.eventEmitter.removeListener(e,t)}),(0,c.default)(v,"uiResponse",e=>{(0,g.uiResponse)(e)}),(0,c.default)(v,"blockchainDisconnect",async e=>await(0,g.call)(y({method:"blockchainDisconnect"},e))),(0,c.default)(v,"blockchainEstimateFee",async e=>await(0,g.call)(y({method:"blockchainEstimateFee"},e))),(0,c.default)(v,"blockchainGetTransactions",async e=>await(0,g.call)(y({method:"blockchainGetTransactions"},e))),(0,c.default)(v,"blockchainSubscribe",async e=>await(0,g.call)(y({method:"blockchainSubscribe"},e))),(0,c.default)(v,"blockchainUnsubscribe",async e=>await(0,g.call)(y({method:"blockchainUnsubscribe"},e))),(0,c.default)(v,"customMessage",async e=>await(0,g.customMessage)(e)),(0,c.default)(v,"requestLogin",async e=>await(0,g.requestLogin)(e)),(0,c.default)(v,"resetDevice",async e=>await(0,g.call)(y({method:"resetDevice"},e))),(0,c.default)(v,"cardanoGetAddress",async e=>{const t=g.eventEmitter.listenerCount(d.ADDRESS_VALIDATION)>0;return await(0,g.call)(y({method:"cardanoGetAddress"},e,{useEventListener:t}))}),(0,c.default)(v,"cardanoGetPublicKey",async e=>await(0,g.call)(y({method:"cardanoGetPublicKey"},e))),(0,c.default)(v,"cardanoSignTransaction",async e=>await(0,g.call)(y({method:"cardanoSignTransaction"},e))),(0,c.default)(v,"cipherKeyValue",async e=>await(0,g.call)(y({method:"cipherKeyValue"},e))),(0,c.default)(v,"composeTransaction",async e=>await(0,g.call)(y({method:"composeTransaction"},e))),(0,c.default)(v,"debugLinkDecision",async e=>await(0,g.call)(y({method:"debugLinkDecision"},e))),(0,c.default)(v,"debugLinkGetState",async e=>await(0,g.call)(y({method:"debugLinkGetState"},e))),(0,c.default)(v,"ethereumGetAddress",async e=>{const t=g.eventEmitter.listenerCount(d.ADDRESS_VALIDATION)>0;return await(0,g.call)(y({method:"ethereumGetAddress"},e,{useEventListener:t}))}),(0,c.default)(v,"ethereumGetPublicKey",async e=>await(0,g.call)(y({method:"ethereumGetPublicKey"},e))),(0,c.default)(v,"ethereumSignMessage",async e=>await(0,g.call)(y({method:"ethereumSignMessage"},e))),(0,c.default)(v,"ethereumSignTransaction",async e=>await(0,g.call)(y({method:"ethereumSignTransaction"},e))),(0,c.default)(v,"ethereumVerifyMessage",async e=>await(0,g.call)(y({method:"ethereumVerifyMessage"},e))),(0,c.default)(v,"getAccountInfo",async e=>await(0,g.call)(y({method:"getAccountInfo"},e))),(0,c.default)(v,"getAddress",async e=>{const t=g.eventEmitter.listenerCount(d.ADDRESS_VALIDATION)>0;return await(0,g.call)(y({method:"getAddress"},e,{useEventListener:t}))}),(0,c.default)(v,"getDeviceState",async e=>await(0,g.call)(y({method:"getDeviceState"},e))),(0,c.default)(v,"getFeatures",async e=>await(0,g.call)(y({method:"getFeatures"},e))),(0,c.default)(v,"getPublicKey",async e=>await(0,g.call)(y({method:"getPublicKey"},e))),(0,c.default)(v,"liskGetAddress",async e=>{const t=g.eventEmitter.listenerCount(d.ADDRESS_VALIDATION)>0;return await(0,g.call)(y({method:"liskGetAddress"},e,{useEventListener:t}))}),(0,c.default)(v,"liskGetPublicKey",async e=>await(0,g.call)(y({method:"liskGetPublicKey"},e))),(0,c.default)(v,"liskSignMessage",async e=>await(0,g.call)(y({method:"liskSignMessage"},e))),(0,c.default)(v,"liskSignTransaction",async e=>await(0,g.call)(y({method:"liskSignTransaction"},e))),(0,c.default)(v,"liskVerifyMessage",async e=>await(0,g.call)(y({method:"liskVerifyMessage"},e))),(0,c.default)(v,"nemGetAddress",async e=>{const t=g.eventEmitter.listenerCount(d.ADDRESS_VALIDATION)>0;return await(0,g.call)(y({method:"nemGetAddress"},e,{useEventListener:t}))}),(0,c.default)(v,"nemSignTransaction",async e=>await(0,g.call)(y({method:"nemSignTransaction"},e))),(0,c.default)(v,"pushTransaction",async e=>await(0,g.call)(y({method:"pushTransaction"},e))),(0,c.default)(v,"rippleGetAddress",async e=>{const t=g.eventEmitter.listenerCount(d.ADDRESS_VALIDATION)>0;return await(0,g.call)(y({method:"rippleGetAddress"},e,{useEventListener:t}))}),(0,c.default)(v,"rippleSignTransaction",async e=>await(0,g.call)(y({method:"rippleSignTransaction"},e))),(0,c.default)(v,"signMessage",async e=>await(0,g.call)(y({method:"signMessage"},e))),(0,c.default)(v,"signTransaction",async e=>await(0,g.call)(y({method:"signTransaction"},e))),(0,c.default)(v,"stellarGetAddress",async e=>{const t=g.eventEmitter.listenerCount(d.ADDRESS_VALIDATION)>0;return await(0,g.call)(y({method:"stellarGetAddress"},e,{useEventListener:t}))}),(0,c.default)(v,"stellarSignTransaction",async e=>await(0,g.call)(y({method:"stellarSignTransaction"},e))),(0,c.default)(v,"tezosGetAddress",async e=>{const t=g.eventEmitter.listenerCount(d.ADDRESS_VALIDATION)>0;return await(0,g.call)(y({method:"tezosGetAddress"},e,{useEventListener:t}))}),(0,c.default)(v,"tezosGetPublicKey",async e=>await(0,g.call)(y({method:"tezosGetPublicKey"},e))),(0,c.default)(v,"tezosSignTransaction",async e=>await(0,g.call)(y({method:"tezosSignTransaction"},e))),(0,c.default)(v,"eosGetPublicKey",async e=>await(0,g.call)(y({method:"eosGetPublicKey"},e))),(0,c.default)(v,"eosSignTransaction",async e=>await(0,g.call)(y({method:"eosSignTransaction"},e))),(0,c.default)(v,"binanceGetAddress",async e=>{const t=g.eventEmitter.listenerCount(d.ADDRESS_VALIDATION)>0;return await(0,g.call)(y({method:"binanceGetAddress"},e,{useEventListener:t}))}),(0,c.default)(v,"binanceGetPublicKey",async e=>await(0,g.call)(y({method:"binanceGetPublicKey"},e))),(0,c.default)(v,"binanceSignTransaction",async e=>await(0,g.call)(y({method:"binanceSignTransaction"},e))),(0,c.default)(v,"verifyMessage",async e=>await(0,g.call)(y({method:"verifyMessage"},e))),(0,c.default)(v,"wipeDevice",async e=>await(0,g.call)(y({method:"wipeDevice"},e))),(0,c.default)(v,"applyFlags",async e=>await(0,g.call)(y({method:"applyFlags"},e))),(0,c.default)(v,"applySettings",async e=>await(0,g.call)(y({method:"applySettings"},e))),(0,c.default)(v,"backupDevice",async()=>await(0,g.call)({method:"backupDevice"})),(0,c.default)(v,"changePin",async e=>await(0,g.call)(y({method:"changePin"},e))),(0,c.default)(v,"firmwareUpdate",async e=>await(0,g.call)(y({method:"firmwareUpdate"},e))),(0,c.default)(v,"recoveryDevice",async e=>await(0,g.call)(y({method:"recoveryDevice"},e))),(0,c.default)(v,"dispose",()=>{(0,g.dispose)()}),(0,c.default)(v,"cancel",e=>{(0,g.cancel)(e)}),(0,c.default)(v,"renderWebUSBButton",e=>{(0,g.renderWebUSBButton)(e)}),(0,c.default)(v,"disableWebUSB",async()=>{(0,g.disableWebUSB)()}),(0,c.default)(v,"stop",async()=>(0,g.stop)());var E=v;e.default=E}],["@babel/runtime","/helpers/interopRequireWildcard.js",function(e,t,r,i,s,n){var o=__browser_require__(382,r);function a(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}r.exports=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var n=i?Object.getOwnPropertyDescriptor(e,s):null;n&&(n.get||n.set)?Object.defineProperty(r,s,n):r[s]=e[s]}return r.default=e,t&&t.set(e,r),r}}],["@babel/runtime","/helpers/typeof.js",function(e,t,r,i,s,n){function o(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?r.exports=o=function(e){return typeof e}:r.exports=o=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}r.exports=o}],["@babel/runtime","/helpers/interopRequireDefault.js",function(e,t,r,i,s,n){r.exports=function(e){return e&&e.__esModule?e:{default:e}}}],["@babel/runtime","/helpers/defineProperty.js",function(e,t,r,i,s,n){r.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}}],["trezor-connect","/lib/constants/index.js",function(e,t,r,i,s,n){"use strict";e.__esModule=!0,e.BLOCKCHAIN_EVENT=e.RESPONSE_EVENT=e.TRANSPORT_EVENT=e.DEVICE_EVENT=e.UI_EVENT=e.CORE_EVENT=void 0;e.CORE_EVENT="CORE_EVENT";e.UI_EVENT="UI_EVENT";e.DEVICE_EVENT="DEVICE_EVENT";e.TRANSPORT_EVENT="TRANSPORT_EVENT";e.RESPONSE_EVENT="RESPONSE_EVENT";e.BLOCKCHAIN_EVENT="BLOCKCHAIN_EVENT"}],["trezor-connect","/lib/constants/transport.js",function(e,t,r,i,s,n){"use strict";e.__esModule=!0,e.START_PENDING=e.DISABLE_WEBUSB=e.REQUEST=e.STREAM=e.UPDATE=e.ERROR=e.START=void 0;e.START="transport-start";e.ERROR="transport-error";e.UPDATE="transport-update";e.STREAM="transport-stream";e.REQUEST="transport-request_device";e.DISABLE_WEBUSB="transport-disable_webusb";e.START_PENDING="transport-start_pending"}],["trezor-connect","/lib/constants/iframe.js",function(e,t,r,i,s,n){"use strict";e.__esModule=!0,e.CALL=e.ERROR=e.INIT=e.LOADED=e.BOOTSTRAP=void 0;e.BOOTSTRAP="iframe-bootstrap";e.LOADED="iframe-loaded";e.INIT="iframe-init";e.ERROR="iframe-error";e.CALL="iframe-call"}],["trezor-connect","/lib/constants/ui.js",function(e,t,r,i,s,n){"use strict";e.__esModule=!0,e.ADDRESS_VALIDATION=e.BUNDLE_PROGRESS=e.LOGIN_CHALLENGE_RESPONSE=e.LOGIN_CHALLENGE_REQUEST=e.CUSTOM_MESSAGE_RESPONSE=e.CUSTOM_MESSAGE_REQUEST=e.CHANGE_SETTINGS=e.RECEIVE_WORD=e.RECEIVE_FEE=e.RECEIVE_ACCOUNT=e.CHANGE_ACCOUNT=e.RECEIVE_DEVICE=e.RECEIVE_PASSPHRASE=e.RECEIVE_PIN=e.RECEIVE_CONFIRMATION=e.RECEIVE_PERMISSION=e.FIRMWARE_PROGRESS=e.REQUEST_WORD=e.REQUEST_BUTTON=e.INSUFFICIENT_FUNDS=e.UPDATE_CUSTOM_FEE=e.SELECT_FEE=e.SELECT_ACCOUNT=e.SELECT_DEVICE=e.SET_OPERATION=e.LOADING=e.CONNECT=e.INVALID_PASSPHRASE_ACTION=e.INVALID_PASSPHRASE=e.REQUEST_PASSPHRASE_ON_DEVICE=e.REQUEST_PASSPHRASE=e.INVALID_PIN=e.REQUEST_PIN=e.REQUEST_CONFIRMATION=e.REQUEST_PERMISSION=e.CLOSE_UI_WINDOW=e.REQUEST_UI_WINDOW=e.DEVICE_NEEDS_BACKUP=e.FIRMWARE_NOT_INSTALLED=e.FIRMWARE_NOT_COMPATIBLE=e.FIRMWARE_NOT_SUPPORTED=e.FIRMWARE_OUTDATED=e.FIRMWARE_OLD=e.SEEDLESS=e.INITIALIZE=e.REQUIRE_MODE=e.NOT_IN_BOOTLOADER=e.BOOTLOADER=e.TRANSPORT=void 0;e.TRANSPORT="ui-no_transport";e.BOOTLOADER="ui-device_bootloader_mode";e.NOT_IN_BOOTLOADER="ui-device_not_in_bootloader_mode";e.REQUIRE_MODE="ui-device_require_mode";e.INITIALIZE="ui-device_not_initialized";e.SEEDLESS="ui-device_seedless";e.FIRMWARE_OLD="ui-device_firmware_old";e.FIRMWARE_OUTDATED="ui-device_firmware_outdated";e.FIRMWARE_NOT_SUPPORTED="ui-device_firmware_unsupported";e.FIRMWARE_NOT_COMPATIBLE="ui-device_firmware_not_compatible";e.FIRMWARE_NOT_INSTALLED="ui-device_firmware_not_installed";e.DEVICE_NEEDS_BACKUP="ui-device_needs_backup";e.REQUEST_UI_WINDOW="ui-request_window";e.CLOSE_UI_WINDOW="ui-close_window";e.REQUEST_PERMISSION="ui-request_permission";e.REQUEST_CONFIRMATION="ui-request_confirmation";e.REQUEST_PIN="ui-request_pin";e.INVALID_PIN="ui-invalid_pin";e.REQUEST_PASSPHRASE="ui-request_passphrase";e.REQUEST_PASSPHRASE_ON_DEVICE="ui-request_passphrase_on_device";e.INVALID_PASSPHRASE="ui-invalid_passphrase";e.INVALID_PASSPHRASE_ACTION="ui-invalid_passphrase_action";e.CONNECT="ui-connect";e.LOADING="ui-loading";e.SET_OPERATION="ui-set_operation";e.SELECT_DEVICE="ui-select_device";e.SELECT_ACCOUNT="ui-select_account";e.SELECT_FEE="ui-select_fee";e.UPDATE_CUSTOM_FEE="ui-update_custom_fee";e.INSUFFICIENT_FUNDS="ui-insufficient_funds";e.REQUEST_BUTTON="ui-button";e.REQUEST_WORD="ui-request_word";e.FIRMWARE_PROGRESS="ui-firmware-progress";e.RECEIVE_PERMISSION="ui-receive_permission";e.RECEIVE_CONFIRMATION="ui-receive_confirmation";e.RECEIVE_PIN="ui-receive_pin";e.RECEIVE_PASSPHRASE="ui-receive_passphrase";e.RECEIVE_DEVICE="ui-receive_device";e.CHANGE_ACCOUNT="ui-change_account";e.RECEIVE_ACCOUNT="ui-receive_account";e.RECEIVE_FEE="ui-receive_fee";e.RECEIVE_WORD="ui-receive_word";e.CHANGE_SETTINGS="ui-change_settings";e.CUSTOM_MESSAGE_REQUEST="ui-custom_request";e.CUSTOM_MESSAGE_RESPONSE="ui-custom_response";e.LOGIN_CHALLENGE_REQUEST="ui-login_challenge_request";e.LOGIN_CHALLENGE_RESPONSE="ui-login_challenge_response";e.BUNDLE_PROGRESS="ui-bundle_progress";e.ADDRESS_VALIDATION="ui-address_validation"}],["trezor-connect","/lib/constants/device.js",function(e,t,r,i,s,n){"use strict";e.__esModule=!0,e.UNREADABLE=e.WAIT_FOR_SELECTION=e.WORD=e.PASSPHRASE_ON_DEVICE=e.PASSPHRASE=e.PIN=e.BUTTON=e.LOADING=e.USED_ELSEWHERE=e.RELEASED=e.ACQUIRED=e.RELEASE=e.ACQUIRE=e.CHANGED=e.DISCONNECT=e.CONNECT_UNACQUIRED=e.CONNECT=void 0;e.CONNECT="device-connect";e.CONNECT_UNACQUIRED="device-connect_unacquired";e.DISCONNECT="device-disconnect";e.CHANGED="device-changed";e.ACQUIRE="device-acquire";e.RELEASE="device-release";e.ACQUIRED="device-acquired";e.RELEASED="device-released";e.USED_ELSEWHERE="device-used_elsewhere";e.LOADING="device-loading";e.BUTTON="button";e.PIN="pin";e.PASSPHRASE="passphrase";e.PASSPHRASE_ON_DEVICE="passphrase_on_device";e.WORD="word";e.WAIT_FOR_SELECTION="device-wait_for_selection";e.UNREADABLE="unreadable-device"}],["trezor-connect","/lib/constants/blockchain.js",function(e,t,r,i,s,n){"use strict";e.__esModule=!0,e.NOTIFICATION=e.BLOCK=e.CONNECT=e.ERROR=void 0;e.ERROR="blockchain-error";e.CONNECT="blockchain-connect";e.BLOCK="blockchain-block";e.NOTIFICATION="blockchain-notification"}],["trezor-connect","/lib/types/index.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r);e.__esModule=!0;__browser_require__(385,r),o(__browser_require__(386,r)),o(__browser_require__(392,r)),o(__browser_require__(387,r)),o(__browser_require__(388,r)),o(__browser_require__(389,r)),o(__browser_require__(393,r));var a=o(__browser_require__(394,r));Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&(e[t]=a[t])});o(__browser_require__(395,r)),o(__browser_require__(396,r)),o(__browser_require__(397,r)),o(__browser_require__(398,r)),o(__browser_require__(399,r)),o(__browser_require__(400,r)),o(__browser_require__(401,r)),o(__browser_require__(402,r)),o(__browser_require__(403,r));var h=__browser_require__(404,r);Object.keys(h).forEach(function(t){"default"!==t&&"__esModule"!==t&&(e[t]=h[t])})}],["trezor-connect","/lib/constants/popup.js",function(e,t,r,i,s,n){"use strict";e.__esModule=!0,e.CLOSE_WINDOW=e.CANCEL_POPUP_REQUEST=e.CLOSED=e.HANDSHAKE=e.EXTENSION_USB_PERMISSIONS=e.ERROR=e.INIT=e.LOADED=e.BOOTSTRAP=void 0;e.BOOTSTRAP="popup-bootstrap";e.LOADED="popup-loaded";e.INIT="popup-init";e.ERROR="popup-error";e.EXTENSION_USB_PERMISSIONS="open-usb-permissions";e.HANDSHAKE="popup-handshake";e.CLOSED="popup-closed";e.CANCEL_POPUP_REQUEST="ui-cancel-popup-request";e.CLOSE_WINDOW="window.close"}],["trezor-connect","/lib/types/params.js",function(e,t,r,i,s,n){"use strict"}],["trezor-connect","/lib/types/response.js",function(e,t,r,i,s,n){"use strict"}],["trezor-connect","/lib/types/cardano.js",function(e,t,r,i,s,n){"use strict"}],["trezor-connect","/lib/types/ripple.js",function(e,t,r,i,s,n){"use strict"}],["trezor-connect","/lib/types/ethereum.js",function(e,t,r,i,s,n){"use strict"}],["trezor-connect","/lib/types/nem.js",function(e,t,r,i,s,n){"use strict"}],["trezor-connect","/lib/types/stellar.js",function(e,t,r,i,s,n){"use strict"}],["trezor-connect","/lib/types/lisk.js",function(e,t,r,i,s,n){"use strict"}],["trezor-connect","/lib/types/tezos.js",function(e,t,r,i,s,n){"use strict"}],["trezor-connect","/lib/types/eos.js",function(e,t,r,i,s,n){"use strict"}],["trezor-connect","/lib/types/binance.js",function(e,t,r,i,s,n){"use strict"}],["trezor-connect","/lib/types/coinInfo.js",function(e,t,r,i,s,n){"use strict"}],["trezor-connect","/lib/env/node/index.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.stop=e.disableWebUSB=e.cancel=e.requestLogin=e.customMessage=e.getSettings=e.renderWebUSBButton=e.uiResponse=e.call=e.init=e.dispose=e.manifest=e.messagePromises=e.eventEmitter=void 0;var h=a(__browser_require__(384,r)),c=a(__browser_require__(19,r)),u=__browser_require__(406,r),f=o(__browser_require__(407,r)),l=__browser_require__(408,r),d=__browser_require__(572,r),p=__browser_require__(385,r),b=o(__browser_require__(392,r)),g=o(__browser_require__(387,r)),m=o(__browser_require__(388,r)),_=o(__browser_require__(414,r));o(__browser_require__(391,r));function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const v=new c.default;e.eventEmitter=v;const E=(0,f.init)("[trezor-connect.js]");let S,I,k=0;const A={};e.messagePromises=A;e.manifest=(e=>{S=(0,u.parse)({manifest:e})});e.dispose=(()=>{});const O=e=>{const{event:t,type:r,payload:i}=e,s=e.id||0;if(r!==m.REQUEST_UI_WINDOW)switch(E.log("handleMessage",e),t){case p.RESPONSE_EVENT:A[s]?(A[s].resolve({id:s,success:e.success,payload:i}),delete A[s]):E.warn(`Unknown message id ${s}`);break;case p.DEVICE_EVENT:case p.TRANSPORT_EVENT:case p.BLOCKCHAIN_EVENT:case p.UI_EVENT:v.emit(t,e),v.emit(r,i);break;default:E.log("Undefined message",t,e)}else I.handleMessage({event:p.UI_EVENT,type:b.HANDSHAKE},!0)},x=(e,t=!0)=>{if(!I)throw new Error("postMessage: _core not found");return t?(k++,e.id=k,A[k]=(0,d.create)(),I.handleMessage(e,!0),A[k].promise):(I.handleMessage(e,!0),null)},R=async(e={})=>{if(S||(S=(0,u.parse)(e)),S.origin="http://node.trezor.io/",S.popup=!1,S.env="node",!S.manifest)throw _.MANIFEST_NOT_SET;S.lazyLoad?S.lazyLoad=!1:(E.enabled=S.debug,(I=await(0,l.init)(S)).on(p.CORE_EVENT,O),await(0,l.initTransport)(S))};e.init=R;const M=async e=>{if(!I){S=(0,u.parse)({debug:!1,popup:!1});try{await R(S)}catch(e){return{success:!1,payload:{error:e}}}}try{const t=await x({type:g.CALL,payload:e});return t||{success:!1,payload:{error:"No response from iframe"}}}catch(e){return E.error("__call error",e),e}};e.call=M;const P=e=>{I.handleMessage({event:p.UI_EVENT,type:m.CUSTOM_MESSAGE_RESPONSE,payload:e},!0)};e.uiResponse=(e=>{I.handleMessage(y({event:p.UI_EVENT},e),!0)});e.renderWebUSBButton=(e=>{});e.getSettings=(async()=>I?await M({method:"getSettings"}):{success:!1,payload:{error:"Core not initialized yet, you need to call TrezorConnect.init or any other method first."}});e.customMessage=(async e=>{if("function"!=typeof e.callback)return{success:!1,payload:{error:'Parameter "callback" is not a function'}};const t=e.callback,r=async e=>{const r=e.data;if(r&&r.type===m.CUSTOM_MESSAGE_REQUEST){const e=await t(r.payload);P(e||{message:"release"})}};I.on(p.CORE_EVENT,r);const i=await M(y({method:"customMessage"},e,{callback:null}));return I.removeListener(p.CORE_EVENT,r),i});e.requestLogin=(async e=>{if("function"==typeof e.callback){const t=e.callback,r=async e=>{const r=e.data;if(r&&r.type===m.LOGIN_CHALLENGE_REQUEST)try{const e=await t();I.handleMessage({event:p.UI_EVENT,type:m.LOGIN_CHALLENGE_RESPONSE,payload:e},!0)}catch(e){I.handleMessage({event:p.UI_EVENT,type:m.LOGIN_CHALLENGE_RESPONSE,payload:e.message},!0)}};I.on(p.CORE_EVENT,r);const i=await M(y({method:"requestLogin"},e,{asyncChallenge:!0,callback:null}));return I.removeListener(p.CORE_EVENT,r),i}return await M(y({method:"requestLogin"},e))});e.cancel=(e=>{x({type:b.CLOSED,payload:e?{error:e}:null},!1)});e.disableWebUSB=(()=>{throw new Error("This version of trezor-connect is not suitable to work without browser")});e.stop=(()=>{(0,l.stop)()})}],["trezor-connect","/lib/data/ConnectSettings.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.parse=e.getEnv=e.DEFAULT_PRIORITY=void 0;var a=o(__browser_require__(384,r));function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}const c="8.0.13".split(".").map(e=>parseInt(e)),u=`https://connect.trezor.io/${`${c[0]}${c[1]>0?`.${c[1]}`:""}/`}`;e.DEFAULT_PRIORITY=2;let f={configSrc:"./data/config.json",version:"8.0.13",debug:!1,origin:null,priority:2,trustedHost:!1,connectSrc:u,iframeSrc:`${u}iframe.html`,popup:!0,popupSrc:`${u}popup.html`,webusbSrc:`${u}webusb.html`,transportReconnect:!1,webusb:!0,pendingTransportEvent:!0,supportedBrowser:"undefined"==typeof navigator||!/Trident|MSIE|Edge/.test(navigator.userAgent),extension:null,manifest:null,env:"web",lazyLoad:!1,timestamp:(new Date).getTime()};const l=()=>{if("undefined"!=typeof chrome&&chrome.runtime&&void 0!==chrome.runtime.onConnect)return"webextension";if("undefined"!=typeof navigator){if("string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase())return"react-native";if(navigator.userAgent.toLowerCase().indexOf(" electron/")>-1)return"electron"}return"web"};e.getEnv=l;e.parse=(e=>{if(!e)return f;const t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},f);return Object.prototype.hasOwnProperty.call(e,"debug")&&(Array.isArray(e),"boolean"==typeof e.debug?t.debug=e.debug:"string"==typeof e.debug&&(t.debug="true"===e.debug)),"string"==typeof e.connectSrc?t.connectSrc=e.connectSrc:"undefined"!=typeof window&&"string"==typeof window.__TREZOR_CONNECT_SRC&&(t.connectSrc=window.__TREZOR_CONNECT_SRC),t.iframeSrc=`${t.connectSrc}iframe.html`,t.popupSrc=`${t.connectSrc}popup.html`,t.webusbSrc=`${t.connectSrc}webusb.html`,"boolean"==typeof e.transportReconnect&&(t.transportReconnect=e.transportReconnect),"boolean"==typeof e.webusb&&(t.webusb=e.webusb),"boolean"==typeof e.popup&&(t.popup=e.popup),"boolean"==typeof e.lazyLoad&&(t.lazyLoad=e.lazyLoad),"boolean"==typeof e.pendingTransportEvent&&(t.pendingTransportEvent=e.pendingTransportEvent),"undefined"!=typeof window&&window.location&&"file:"===window.location.protocol&&(t.origin=`file://${window.location.pathname}`,t.webusb=!1),"string"==typeof e.extension&&(t.extension=e.extension),"string"==typeof e.env?t.env=e.env:t.env=l(),"number"==typeof e.timestamp&&(t.timestamp=e.timestamp),"object"==typeof e.manifest&&(t.manifest=(e=>"string"!=typeof e.email?null:"string"!=typeof e.appUrl?null:{email:e.email,appUrl:e.appUrl})(e.manifest)),f=t})}],["trezor-connect","/lib/utils/debug.js",function(e,t,r,i,s,n){"use strict";e.__esModule=!0,e.popupConsole=e.enableByPrefix=e.getLog=e.enable=e.init=e.default=void 0;const o={DescriptorStream:"color: #77ab59",DeviceList:"color: #36802d",Device:"color: #bada55",Core:"color: #c9df8a",IFrame:"color: #FFFFFF; background: #f4a742;",Popup:"color: #f48a00"};class a{constructor(e,t=!1){this.prefix=e,this.enabled=t,this.messages=[],this.css=o[e]||"color: #000000; background: #FFFFFF;"}addMessage(e,t,...r){this.messages.push({level:e,prefix:t,message:r,timestamp:(new Date).getTime()})}log(...e){this.addMessage("log",this.prefix,...e),this.enabled&&console.log(this.prefix,...e)}error(...e){this.addMessage("error",this.prefix,...e),this.enabled&&console.error(this.prefix,...e)}warn(...e){this.addMessage("warn",this.prefix,...e),this.enabled&&console.warn(this.prefix,...e)}debug(...e){this.addMessage("debug",this.prefix,...e),this.enabled&&console.log("%c"+this.prefix,this.css,...e)}}e.default=a;const h={};e.init=((e,t)=>{const r=new a(e,"boolean"==typeof t&&t);return h[e]=r,r});e.enable=(e=>{for(const t of Object.keys(h))h[t].enabled=e});e.getLog=(e=>{let t=[];for(const e of Object.keys(h))t=t.concat(h[e].messages);return t.sort((e,t)=>e.timestamp-t.timestamp),t});e.enableByPrefix=((e,t)=>{h[e]&&(h[e].enabled=t)});e.popupConsole=((e,t)=>{const r=global.console,i={error:r.error,info:r.info,debug:r.debug,log:r.log},s=[],n=(i,n)=>(...o)=>{const a=(new Date).toUTCString();return s.push([n,a].concat(o)),t.apply(void 0,[{type:e,level:n,time:a,args:JSON.stringify(o)}]),i.apply(r,o)};for(const e in i)r[e]=n(i[e],e)})}],["trezor-connect","/lib/core/Core.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.stop=e.initTransport=e.init=e.initData=e.initCore=e.Core=e.onCall=e.handleMessage=void 0;var h=a(__browser_require__(19,r)),c=a(__browser_require__(409,r)),u=a(__browser_require__(419,r)),f=(a(__browser_require__(422,r)),__browser_require__(385,r)),l=o(__browser_require__(386,r)),d=o(__browser_require__(389,r)),p=o(__browser_require__(392,r)),b=o(__browser_require__(388,r)),g=o(__browser_require__(387,r)),m=o(__browser_require__(414,r)),_=__browser_require__(621,r),w=(a(__browser_require__(622,r)),__browser_require__(624,r)),y=__browser_require__(572,r),v=__browser_require__(421,r);let E,S,I,k=[];const A=[];let O;const x=(0,o(__browser_require__(407,r)).init)("Core"),R=e=>{if(e.event===f.RESPONSE_EVENT){const t=A.findIndex(t=>t&&t.responseID===e.id);t>=0&&A.splice(t,1)}E.emit(f.CORE_EVENT,e)},M=(e=!0)=>(e&&R((0,_.UiMessage)(b.REQUEST_UI_WINDOW)),I||(I=(0,y.create)()),I),P=(e,t)=>{const r=(0,y.create)(e,t);return k.push(r),r},B=(e,t)=>k.find(e=>e.id===t),N=e=>{k=k.filter(t=>t!==e)},T=(e,t=!1)=>{x.log("handle message in core",t,e);const r=[g.CALL,p.CLOSED,b.CUSTOM_MESSAGE_RESPONSE,b.LOGIN_CHALLENGE_RESPONSE,l.DISABLE_WEBUSB];if(t||-1!==r.indexOf(e.type))switch(e.type){case p.HANDSHAKE:M(!1).resolve();break;case p.CLOSED:H(e.payload?e.payload.error:null);break;case l.DISABLE_WEBUSB:X();break;case b.RECEIVE_DEVICE:case b.RECEIVE_CONFIRMATION:case b.RECEIVE_PERMISSION:case b.RECEIVE_PIN:case b.RECEIVE_PASSPHRASE:case b.INVALID_PASSPHRASE_ACTION:case b.RECEIVE_ACCOUNT:case b.CHANGE_ACCOUNT:case b.RECEIVE_FEE:case b.CUSTOM_MESSAGE_RESPONSE:case b.RECEIVE_WORD:case b.LOGIN_CHALLENGE_RESPONSE:{const t=B(0,e.type);t&&(t.resolve({event:e.type,payload:e.payload}),N(t));break}case g.CALL:C(e).catch(e=>{x.debug("onCall error",e)})}};e.handleMessage=T;const C=async e=>{if(!e.id||!e.payload)throw m.INVALID_PARAMETERS;const t=e.id,r=c.default.getSettings("trustedHost"),i=c.default.getSettings("popup");let s,n,o;O&&!e.payload.device&&(e.payload.device=O);try{(s=(0,w.find)(e)).postMessage=R,s.getPopupPromise=M,s.createUiPromise=P,s.findUiPromise=B,s.removeUiPromise=N}catch(e){return R((0,_.UiMessage)(p.CANCEL_POPUP_REQUEST)),R((0,_.ResponseMessage)(t,!1,{error:m.INVALID_PARAMETERS.message+": "+e.message})),Promise.resolve()}if(A.push(s),!s.useDevice){try{s.useUi?await M().promise:R((0,_.UiMessage)(p.CANCEL_POPUP_REQUEST));const e=await s.run();n=(0,_.ResponseMessage)(s.responseID,!0,e)}catch(e){n=(0,_.ResponseMessage)(s.responseID,!1,{error:e.message})}return R(n),Promise.resolve()}if(S||c.default.getSettings("transportReconnect")||await Y(c.default.getSettings()),i&&s.requiredPermissions.includes("management")&&!c.default.isManagementAllowed())return R((0,_.UiMessage)(p.CANCEL_POPUP_REQUEST)),R((0,_.ResponseMessage)(t,!1,{error:m.MANAGEMENT_NOT_ALLOWED.message})),Promise.resolve();try{o=await(async e=>{if(!S)throw m.NO_TRANSPORT;const t="WebUsbPlugin"===S.transportType();let r;if(e.devicePath)r=S.getDevice(e.devicePath);else{let i,s=S.length();if(1!==s||t)if(P(b.RECEIVE_DEVICE),await M().promise,1!==(s=S.length())||t){R((0,_.UiMessage)(b.SELECT_DEVICE,{webusb:t,devices:S.asArray()}));const s=B(e.responseID,b.RECEIVE_DEVICE);if(s){const e=await s.promise;e.payload.remember&&(e.payload.device.state||delete e.payload.device.state,O=e.payload.device),i=e.payload.device.path,r=S.getDevice(i)}}else i=S.getFirstDevicePath(),r=S.getDevice(i);else i=S.getFirstDevicePath(),r=S.getDevice(i)}if(!r)throw m.DEVICE_NOT_FOUND;return r})(s)}catch(e){throw e===m.NO_TRANSPORT?(await M().promise,R((0,_.UiMessage)(b.TRANSPORT))):R((0,_.UiMessage)(p.CANCEL_POPUP_REQUEST)),R((0,_.ResponseMessage)(t,!1,{error:e.message})),e}if(s.setDevice(o),s.debugLink)try{const e=await s.run();return n=(0,_.ResponseMessage)(s.responseID,!0,e),R(n),Promise.resolve()}catch(e){throw R((0,_.ResponseMessage)(s.responseID,!1,{error:e.message})),e}const a=A.filter(e=>e&&e!==s&&e.devicePath===s.devicePath);if(a.length>0&&s.overridePreviousCall){if(a.forEach(e=>{e.overridden=!0}),await o.override(m.CALL_OVERRIDE),s.overridden)throw R((0,_.ResponseMessage)(s.responseID,!1,{error:m.CALL_OVERRIDE.message,code:m.CALL_OVERRIDE.code})),m.CALL_OVERRIDE}else if(o.isRunning()){if(o.isLoaded())throw R((0,_.ResponseMessage)(t,!1,{error:m.DEVICE_CALL_IN_PROGRESS.message})),m.DEVICE_CALL_IN_PROGRESS;await o.waitForFirstRun()}o.setInstance(s.deviceInstance),s.hasExpectedDeviceState&&o.setExpectedState(s.deviceState),o.on(d.BUTTON,(e,t)=>{D(e,t,s)}),o.on(d.PIN,U),o.on(d.WORD,L),o.on(d.PASSPHRASE,s.useEmptyPassphrase?F:z),o.on(d.PASSPHRASE_ON_DEVICE,()=>{R((0,_.UiMessage)(b.REQUEST_PASSPHRASE_ON_DEVICE,{device:o.toMessageObject()}))});try{let e=1;const t=3,a=async()=>{const h=await s.checkFirmwareRange(i);if(h)return i?(await M().promise,R((0,_.UiMessage)(h,o.toMessageObject())),await P(d.DISCONNECT,o).promise,Promise.reject("Cancelled")):Promise.reject(h);const u=o.hasUnexpectedMode(s.allowDeviceMode,s.requireDeviceMode);if(u)return o.keepSession=!1,i?(await M().promise,R((0,_.UiMessage)(u,o.toMessageObject())),await P(d.DISCONNECT,o).promise,Promise.reject(u)):Promise.reject(u);if(s.checkPermissions(),!r&&s.requiredPermissions.length>0){if(!await s.requestPermissions())return Promise.reject(m.PERMISSIONS_NOT_GRANTED.message)}const f=o.features.needs_backup;if(f&&"function"==typeof s.noBackupConfirmation){if(!await s.noBackupConfirmation())return Promise.reject({message:m.PERMISSIONS_NOT_GRANTED.message,code:m.PERMISSIONS_NOT_GRANTED.code})}if(f&&(await M().promise,R((0,_.UiMessage)(b.DEVICE_NEEDS_BACKUP,o.toMessageObject()))),"outdated"===o.firmwareStatus&&(await M().promise,R((0,_.UiMessage)(b.FIRMWARE_OUTDATED,o.toMessageObject()))),!r&&"function"==typeof s.confirmation){if(!await s.confirmation())return Promise.reject("Cancelled")}if(S){const e=c.default.findMessages(o.isT1()?0:1,o.getVersion());await S.reconfigure(e)}try{const r=s.useDeviceState?await o.getCommands().getDeviceState():"null";if(!(!s.useDeviceState||s.useEmptyPassphrase||o.validateExpectedState(r))){if(!i)throw m.INVALID_STATE;{const e=P(b.INVALID_PASSPHRASE_ACTION,o);if(R((0,_.UiMessage)(b.INVALID_PASSPHRASE,{device:o.toMessageObject()})),(await e.promise).payload)return await o.getCommands().initialize(s.useEmptyPassphrase),a();o.setState(r)}}}catch(r){return r.message===m.INVALID_PIN_ERROR_MESSAGE&&e<t?(e++,R((0,_.UiMessage)(b.INVALID_PIN,{device:o.toMessageObject()})),a()):(o.clearPassphrase(),o.setState(null),Promise.reject(r.message))}s.useUi?await M().promise:R((0,_.UiMessage)(p.CANCEL_POPUP_REQUEST));try{const e=s.getCustomMessages();S&&e&&await S.reconfigure(e,!0);const t=await s.run();n=(0,_.ResponseMessage)(s.responseID,!0,t)}catch(e){return Promise.reject({message:e.message,code:e.code})}};await o.run(a,{keepSession:s.keepSession,useEmptyPassphrase:s.useEmptyPassphrase,skipFinalReload:s.skipFinalReload})}catch(e){s&&(S&&e.message===m.WRONG_PREVIOUS_SESSION_ERROR_MESSAGE&&S.enumerate(),n=(0,_.ResponseMessage)(s.responseID,!1,{error:e.message||e,code:e.code}))}finally{x.log("onCall::finally",n);const e=n;e&&(await o.cleanup(),j(),q(),s&&s.dispose(),S&&await S.restoreMessages(),R(e))}};e.onCall=C;const q=()=>{I=null,k=[],x.log("Cleanup...")},j=()=>{I&&R((0,_.UiMessage)(p.CANCEL_POPUP_REQUEST)),R((0,_.UiMessage)(b.CLOSE_UI_WINDOW))},D=async(e,t,r)=>{const i="ButtonRequest_Address"===t;(!i||i&&r.useUi)&&await M().promise;const s="function"==typeof r.getButtonRequestData?r.getButtonRequestData(t):null;R((0,_.DeviceMessage)(d.BUTTON,{device:e.toMessageObject(),code:t})),R((0,_.UiMessage)(b.REQUEST_BUTTON,{device:e.toMessageObject(),code:t,data:s})),i&&!r.useUi&&R((0,_.UiMessage)(b.ADDRESS_VALIDATION,s))},U=async(e,t,r)=>{await M().promise,R((0,_.UiMessage)(b.REQUEST_PIN,{device:e.toMessageObject()})),r(null,(await P(b.RECEIVE_PIN,e).promise).payload)},L=async(e,t,r)=>{await M().promise,R((0,_.UiMessage)(b.REQUEST_WORD,{device:e.toMessageObject(),type:t})),r(null,(await P(b.RECEIVE_WORD,e).promise).payload)},z=async(e,t)=>{const r=e.getPassphrase();if("string"==typeof r)return void t(null,r);await M().promise,R((0,_.UiMessage)(b.REQUEST_PASSPHRASE,{device:e.toMessageObject()}));const i=await P(b.RECEIVE_PASSPHRASE,e).promise,s=i.payload.value,n=i.payload.save;e.setPassphrase(n?s:null),t(null,s)},F=async(e,t)=>{t(null,"")},H=e=>{const t=e?new Error(e):m.POPUP_CLOSED;S&&S.asArray().length>0?(S.allDevices().forEach(e=>{if(e.keepSession=!1,e.isUsedHere())e.interruptionFromUser(t);else{const e=B(0,d.DISCONNECT);e?e.resolve({event:t.message,payload:null}):(A.forEach(e=>{R((0,_.ResponseMessage)(e.responseID,!1,{error:t.message}))}),A.splice(0,A.length))}}),q()):(k.length>0&&(k.forEach(e=>{e.reject(t)}),k=[]),I&&(I.reject(t),I=null),q())},V=(e=null)=>{const t=B(0,b.RECEIVE_DEVICE);if(t&&S){const e=S.asArray(),r=S.transportType().indexOf("webusb")>=0;1!==e.length||r?R((0,_.UiMessage)(b.SELECT_DEVICE,{webusb:r,devices:e})):(t.resolve({event:b.RECEIVE_DEVICE,payload:{device:e[0]}}),N(t))}if(e){const t=e.path;let r=!1;k.forEach(e=>{e.device&&e.device.getDevicePath()===t&&(e.id===d.DISCONNECT&&e.resolve({event:d.DISCONNECT,payload:null}),r=!0)}),O&&O.path===t&&(O=null),r&&(j(),q())}},K=async e=>{try{(S=new u.default).on(d.CONNECT,e=>{V(),R((0,_.DeviceMessage)(d.CONNECT,e))}),S.on(d.CONNECT_UNACQUIRED,e=>{V(),R((0,_.DeviceMessage)(d.CONNECT_UNACQUIRED,e))}),S.on(d.DISCONNECT,e=>{V(e),R((0,_.DeviceMessage)(d.DISCONNECT,e))}),S.on(d.CHANGED,e=>{R((0,_.DeviceMessage)(d.CHANGED,e))}),S.on(l.ERROR,async t=>{x.error("TRANSPORT ERROR",t),S&&(S.disconnectDevices(),S.removeAllListeners()),S=null,R((0,_.TransportMessage)(l.ERROR,{error:t.message||t})),e.transportReconnect&&(await(0,v.resolveAfter)(1e3,null),await K(e))}),S.on(l.START,e=>R((0,_.TransportMessage)(l.START,e))),await S.init(),S&&await S.waitForTransportFirstEvent()}catch(t){if(S=null,R((0,_.TransportMessage)(l.ERROR,{error:t.message||t})),!e.transportReconnect)throw t;await(0,v.resolveAfter)(3e3,null),await K(e)}};class W extends h.default{constructor(){super()}handleMessage(e,t){T(e,t)}onBeforeUnload(){S&&S.onBeforeUnload(),this.removeAllListeners()}getCurrentMethod(){return A}getTransportInfo(){if(S)return S.getTransportInfo()}}e.Core=W;const G=()=>E=new W;e.initCore=G;e.initData=(async e=>{try{await c.default.load(e)}catch(e){throw x.log("init error",e),e}});e.init=(async e=>{try{return x.enabled=e.debug,await c.default.load(e),await G(),E}catch(e){throw x.log("init error",e),e}});const Y=async e=>{try{e.transportReconnect?K(e):await K(e)}catch(e){throw x.log("initTransport",e),e}};e.initTransport=Y;e.stop=(async()=>{S&&S.stop()});const X=async()=>{if(!S)return;if("webusb"!==S.transportType())return;const e=c.default.getSettings();e.webusb=!1;try{S.onBeforeUnload(),await K(e)}catch(e){}}}],["trezor-connect","/lib/data/DataManager.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var a=o(__browser_require__(384,r)),h=__browser_require__(410,r),c=__browser_require__(406,r),u=__browser_require__(412,r),f=__browser_require__(415,r),l=__browser_require__(416,r),d=o(__browser_require__(417,r)),p=o(__browser_require__(418,r));const b=e=>{return e};class g{static async load(e,t=!0){const r="web"===e.env?`?r=${e.timestamp}`:"";this.settings=e;const i=await(0,h.httpRequest)(`${e.configSrc}${r}`,"json");this.config=b(i);const s="undefined"==typeof window||!window.location||"localhost"===window.location.hostname,n=g.isWhitelisted(this.settings.origin||"");this.settings.trustedHost=(s||!!n)&&!this.settings.popup,this.settings.trustedHost||(this.settings.popup=!0),this.settings.trustedHost||n||(this.settings.debug=!1),this.settings.priority=g.getPriority(n);const o=g.getHostLabel(this.settings.extension||this.settings.origin||"");if(o&&(this.settings.hostLabel=o.label,this.settings.hostIcon=o.icon),this.settings.popup&&this.settings.webusb&&"webextension"!==this.settings.env&&(this.settings.webusb=!1),t){for(const e of this.config.assets){const t=await(0,h.httpRequest)(`${e.url}${r}`,e.type||"json");this.assets[e.name]=t}for(const e of this.config.messages){const t=await(0,h.httpRequest)(`${e.json}${r}`,"json");this.messages[e.name]=t}(0,l.parseBridgeJSON)(this.assets.bridge),(0,u.parseCoinsJson)(this.assets.coins),(0,f.parseFirmware)(this.assets["firmware-t1"]),(0,f.parseFirmware)(this.assets["firmware-t2"])}}static findMessages(e,t){const r=this.config.messages.find(r=>{const i=r.range.min[e],s=r.range.max?r.range.max[e]:t;return(0,p.default)(t,i)>=0&&(0,p.default)(t,s)<=0});return this.messages[r?r.name:"default"]}static getMessages(e){return this.messages[e||"default"]}static isWhitelisted(e){if(!this.config)return null;const t=(0,d.default)(e);if(t&&"string"==typeof t.host){const r=t.host.split(".");return r.length>2&&(t.host=r.slice(r.length-2,r.length).join(".")),this.config.whitelist.find(r=>r.origin===e||r.origin===t.host)}}static isManagementAllowed(){if(!this.config)return;const e=(0,d.default)(this.settings.origin);if(e&&"string"==typeof e.host){const t=e.host.split(".");return t.length>2&&(e.host=t.slice(t.length-2,t.length).join(".")),this.config.management.find(t=>t.origin===this.settings.origin||t.origin===e.host)}}static getPriority(e){return e?e.priority:c.DEFAULT_PRIORITY}static getHostLabel(e){return this.config.knownHosts.find(t=>t.origin===e)}static getSettings(e){return this.settings?"string"==typeof e?this.settings[e]:this.settings:null}static getDebugSettings(e){return!1}static getConfig(){return this.config}}e.default=g,(0,a.default)(g,"assets",{}),(0,a.default)(g,"messages",{})}],["trezor-connect","/lib/env/browser/networkUtils.js",function(e,t,r,i,s,n){"use strict";e.__esModule=!0,e.getOrigin=e.httpRequest=void 0,__browser_require__(411,r);e.httpRequest=(async(e,t="text")=>{const r=await fetch(e,{credentials:"same-origin"});if(r.ok){if("json"===t){const e=await r.text();return JSON.parse(e)}return"binary"===t?await r.arrayBuffer():await r.text()}throw new Error(`httpRequest error: ${e} ${r.statusText}`)});e.getOrigin=(e=>{if(0===e.indexOf("file://"))return"file://";const t=e.match(/^.+\:\/\/[^\/]+/);return Array.isArray(t)&&t.length>0?t[0]:"unknown"})}],["whatwg-fetch","/dist/fetch.umd.js",function(e,t,r,i,s,n){var o,a;o=this,a=function(e){"use strict";var t={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(t.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(e){return e&&r.indexOf(Object.prototype.toString.call(e))>-1};function s(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function o(e){var r={next:function(){var t=e.shift();return{done:t===undefined,value:t}}};return t.iterable&&(r[Symbol.iterator]=function(){return r}),r}function a(e){this.map={},e instanceof a?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function h(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function c(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function u(e){var t=new FileReader,r=c(t);return t.readAsArrayBuffer(e),r}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(e){var r;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:t.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:t.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():t.arrayBuffer&&t.blob&&((r=e)&&DataView.prototype.isPrototypeOf(r))?(this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):t.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||i(e))?this._bodyArrayBuffer=f(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var e=h(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?h(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(u)}),this.text=function(){var e,t,r,i=h(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=c(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),i=0;i<t.length;i++)r[i]=String.fromCharCode(t[i]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}a.prototype.append=function(e,t){e=s(e),t=n(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},a.prototype.delete=function(e){delete this.map[s(e)]},a.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},a.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},a.prototype.set=function(e,t){this.map[s(e)]=n(t)},a.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},a.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),o(e)},a.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),o(e)},a.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),o(e)},t.iterable&&(a.prototype[Symbol.iterator]=a.prototype.entries);var d=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function p(e,t){var r,i,s=(t=t||{}).body;if(e instanceof p){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new a(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,s||null==e._bodyInit||(s=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new a(t.headers)),this.method=(r=t.method||this.method||"GET",i=r.toUpperCase(),d.indexOf(i)>-1?i:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&s)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(s)}function b(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),i=r.shift().replace(/\+/g," "),s=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(s))}}),t}function g(e,t){t||(t={}),this.type="default",this.status=t.status===undefined?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new a(t.headers),this.url=t.url||"",this._initBody(e)}p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},l.call(p.prototype),l.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})},g.error=function(){var e=new g(null,{status:0,statusText:""});return e.type="error",e};var m=[301,302,303,307,308];g.redirect=function(e,t){if(-1===m.indexOf(t))throw new RangeError("Invalid status code");return new g(null,{status:t,headers:{location:e}})},e.DOMException=self.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function _(r,i){return new Promise(function(s,n){var o=new p(r,i);if(o.signal&&o.signal.aborted)return n(new e.DOMException("Aborted","AbortError"));var h=new XMLHttpRequest;function c(){h.abort()}h.onload=function(){var e,t,r={status:h.status,statusText:h.statusText,headers:(e=h.getAllResponseHeaders()||"",t=new a,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var r=e.split(":"),i=r.shift().trim();if(i){var s=r.join(":").trim();t.append(i,s)}}),t)};r.url="responseURL"in h?h.responseURL:r.headers.get("X-Request-URL");var i="response"in h?h.response:h.responseText;s(new g(i,r))},h.onerror=function(){n(new TypeError("Network request failed"))},h.ontimeout=function(){n(new TypeError("Network request failed"))},h.onabort=function(){n(new e.DOMException("Aborted","AbortError"))},h.open(o.method,o.url,!0),"include"===o.credentials?h.withCredentials=!0:"omit"===o.credentials&&(h.withCredentials=!1),"responseType"in h&&t.blob&&(h.responseType="blob"),o.headers.forEach(function(e,t){h.setRequestHeader(t,e)}),o.signal&&(o.signal.addEventListener("abort",c),h.onreadystatechange=function(){4===h.readyState&&o.signal.removeEventListener("abort",c)}),h.send(void 0===o._bodyInit?null:o._bodyInit)})}_.polyfill=!0,self.fetch||(self.fetch=_,self.Headers=a,self.Request=p,self.Response=g),e.Headers=a,e.Request=p,e.Response=g,e.fetch=_,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof e&&void 0!==r?a(e):"function"==typeof define&&define.amd?define(["exports"],a):a(o.WHATWGFetch={})}],["trezor-connect","/lib/data/CoinInfo.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.cloneCoinInfo=p,e.getUniqueNetworks=e.parseCoinsJson=e.getCoinName=e.getCoinInfo=e.getCoinInfoByHash=e.fixCoinInfoNetwork=e.getBech32Network=e.getSegwitNetwork=e.getMiscNetwork=e.getEthereumNetwork=e.getBitcoinNetwork=void 0;var a=o(__browser_require__(384,r)),h=__browser_require__(413,r);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const f=[],l=[],d=[];function p(e){const t=JSON.stringify(e);return t===undefined?e:JSON.parse(t)}const b=e=>{const t=p(f);if("string"==typeof e){const r=e.toLowerCase();return t.find(e=>e.name.toLowerCase()===r||e.shortcut.toLowerCase()===r||e.label.toLowerCase()===r)}{const r=(0,h.fromHardened)(e[1]);return t.find(e=>e.slip44===r)}};e.getBitcoinNetwork=b;const g=e=>{const t=p(l);if("string"==typeof e){const r=e.toLowerCase();return t.find(e=>e.name.toLowerCase()===r||e.shortcut.toLowerCase()===r)}{const r=(0,h.fromHardened)(e[1]);return t.find(e=>e.slip44===r)}};e.getEthereumNetwork=g;const m=e=>{const t=p(d);if("string"==typeof e){const r=e.toLowerCase();return t.find(e=>e.name.toLowerCase()===r||e.shortcut.toLowerCase()===r)}{const r=(0,h.fromHardened)(e[1]);return t.find(e=>e.slip44===r)}};e.getMiscNetwork=m;const _=e=>e.segwit&&"number"==typeof e.xPubMagicSegwit?u({},e.network,{bip32:u({},e.network.bip32,{public:e.xPubMagicSegwit})}):null;e.getSegwitNetwork=_;const w=e=>e.segwit&&"number"==typeof e.xPubMagicSegwitNative?u({},e.network,{bip32:u({},e.network.bip32,{public:e.xPubMagicSegwitNative})}):null;e.getBech32Network=w;e.fixCoinInfoNetwork=((e,t)=>{const r=p(e);if(t[0]===(0,h.toHardened)(84)){const e=w(r);e&&(r.network=e)}else if(t[0]===(0,h.toHardened)(49)){const e=_(r);e&&(r.network=e)}else r.segwit=!1;return r});e.getCoinInfoByHash=((e,t)=>{const r=p(f),i=r.find(t=>e.toLowerCase()===t.hashGenesisBlock.toLowerCase());if(!i)throw new Error("Coin info not found for hash: "+e+" "+t.hashGenesisBlock);if(i.isBitcoin){const i=(e=>null==e.subversion?"btc":e.subversion.startsWith("/Bitcoin ABC")?"bch":e.subversion.startsWith("/Bitcoin Gold")?"btg":"btc")(t);let s;if("bch"===i?s=r.find(e=>"Bcash"===e.name):"btg"===i&&(s=r.find(e=>"Bgold"===e.name)),s)return s;throw new Error("Coin info not found for hash: "+e+" "+t.hashGenesisBlock+" BTC version:"+i)}return i});e.getCoinInfo=(e=>{let t=b(e);return t||(t=g(e)),t||(t=m(e)),t});e.getCoinName=(e=>{const t=(0,h.fromHardened)(e[1]);for(const e of l)if(e.slip44===t)return e.name;return"Unknown coin"});e.parseCoinsJson=(e=>{const t=e;Object.keys(t).forEach(e=>{switch(e){case"bitcoin":return(e=>{const t=e;Object.keys(t).forEach(e=>{const r=t[e],i=r.coin_shortcut,s="BTC"===i||"TEST"===i,n="CPC"===i||"PPC"===i||"tPPC"===i,o={messagePrefix:r.signed_message_header,bech32:r.bech32_prefix,bip32:{public:r.xpub_magic,private:r.xprv_magic},pubKeyHash:r.address_type,scriptHash:r.address_type_p2sh,wif:128,dustThreshold:0,coin:i.toLowerCase(),consensusBranchId:r.consensus_branch_id},a=Array.isArray(r.blockbook)&&r.blockbook.length>0?{type:"blockbook",url:r.blockbook}:undefined;f.push({type:"bitcoin",blockchainLink:a,blocktime:Math.round(r.blocktime_seconds/60),cashAddrPrefix:r.cashaddr_prefix,label:r.coin_label,name:r.coin_name,shortcut:i,curveName:r.curve_name,defaultFees:r.default_fee_b,dustLimit:r.dust_limit,forceBip143:r.force_bip143,forkid:r.fork_id,hashGenesisBlock:r.hash_genesis_block,maxAddressLength:r.max_address_length,maxFeeSatoshiKb:r.maxfee_kb,minAddressLength:r.min_address_length,minFeeSatoshiKb:r.minfee_kb,segwit:r.segwit,slip44:r.slip44,support:r.support,xPubMagic:r.xpub_magic,xPubMagicSegwitNative:r.xpub_magic_segwit_native,xPubMagicSegwit:r.xpub_magic_segwit_p2sh,network:o,isBitcoin:s,hasTimestamp:n,maxFee:Math.round(r.maxfee_kb/1e3),minFee:Math.round(r.minfee_kb/1e3),blocks:Math.round(r.blocktime_seconds/60),decimals:r.decimals})})})(t[e]);case"eth":return(e=>{const t=e;Object.keys(t).forEach(e=>{const r=t[e],i=Array.isArray(r.blockbook)&&r.blockbook.length>0?{type:"blockbook",url:r.blockbook}:undefined;l.push({type:"ethereum",blockchainLink:i,blocktime:Math.round(r.blocktime_seconds/60),chain:r.chain,chainId:r.chain_id,defaultFees:[{label:"normal",feePerUnit:"5000000000",feeLimit:"21000"}],minFee:1,maxFee:1e4,label:r.name,name:r.name,shortcut:r.shortcut,rskip60:r.rskip60,slip44:r.slip44,support:r.support,network:undefined,decimals:16})})})(t[e]);case"misc":case"nem":return(e=>{const t=e;Object.keys(t).forEach(e=>{const r=t[e];let i=1,s=1;const n=r.shortcut.toLowerCase();"xrp"!==n&&"txrp"!==n||(i=10,s=1e4),d.push({type:"misc",blockchainLink:r.blockchain_link,blocktime:0,curve:r.curve,defaultFees:{Normal:1},minFee:i,maxFee:s,label:r.name,name:r.name,shortcut:r.shortcut,slip44:r.slip44,support:r.support,network:undefined,decimals:r.decimals})})})(t[e])}})});e.getUniqueNetworks=(e=>e.reduce((e,t)=>!t||e.find(e=>e.shortcut===t.shortcut)?e:e.concat(t),[]))}],["trezor-connect","/lib/utils/pathUtils.js",function(e,t,r,i,s,n){"use strict";e.__esModule=!0,e.getLabel=e.getPublicKeyLabel=e.getAccountLabel=e.getIndexFromPath=e.getPathFromIndex=e.getSerializedPath=e.validatePath=e.getOutputScriptType=e.getScriptType=e.isBech32Path=e.isSegwitPath=e.isMultisigPath=e.getHDPath=e.fromHardened=e.toHardened=e.HD_HARDENED=void 0;var o=__browser_require__(412,r),a=__browser_require__(414,r);e.HD_HARDENED=2147483648;const h=e=>(2147483648|e)>>>0;e.toHardened=h;const c=e=>(2147483647&e)>>>0;e.fromHardened=c;const u=(0,a.invalidParameter)("Not a valid path."),f=(0,a.invalidParameter)("Path cannot contain negative values."),l=e=>{const t=e.toLowerCase().split("/");if("m"!==t[0])throw u;return t.filter(e=>"m"!==e&&""!==e).map(e=>{let t=!1;"'"===e.substr(e.length-1)&&(t=!0,e=e.substr(0,e.length-1));let r=parseInt(e);if(isNaN(r))throw u;if(r<0)throw f;return t&&(r=h(r)),r})};e.getHDPath=l;e.isMultisigPath=(e=>Array.isArray(e)&&e[0]===h(48));e.isSegwitPath=(e=>Array.isArray(e)&&e[0]===h(49));e.isBech32Path=(e=>Array.isArray(e)&&e[0]===h(84));e.getScriptType=(e=>{if(!Array.isArray(e)||e.length<1)return"SPENDADDRESS";switch(c(e[0])){case 48:return"SPENDMULTISIG";case 49:return"SPENDP2SHWITNESS";case 84:return"SPENDWITNESS";default:return"SPENDADDRESS"}});e.getOutputScriptType=(e=>{if(!Array.isArray(e)||e.length<1)return"PAYTOADDRESS";switch(c(e[0])){case 48:return"PAYTOMULTISIG";case 49:return"PAYTOP2SHWITNESS";case 84:return"PAYTOWITNESS";default:return"PAYTOADDRESS"}});e.validatePath=((e,t=0,r=!1)=>{let i;if("string"==typeof e?i=l(e):Array.isArray(e)&&(i=e.map(e=>{const t=parseInt(e);if(isNaN(t))throw u;if(t<0)throw f;return t})),!i)throw u;if(t>0&&i.length<t)throw u;return r?i.splice(0,3):i});e.getSerializedPath=(e=>"m/"+e.map(e=>{const t=(2147483647&e).toString();return 2147483648&e?t+"'":t}).join("/"));e.getPathFromIndex=((e,t,r)=>[h(e),h(t),h(r)]);e.getIndexFromPath=(e=>{if(e.length<3)throw(0,a.invalidParameter)(`getIndexFromPath: invalid path length ${e.toString()}`);return c(e[2])});e.getAccountLabel=((e,t)=>{const r=t.label,i=c(e[0]),s=c(e[2])+1;let n="";return`Export info of ${n=48===i?`${r} multisig`:44===i&&t.segwit?`${r} legacy`:r} <span>account #${s}</span>`});e.getPublicKeyLabel=((e,t)=>{let r=!1,i="Unknown coin";t?(i=t.label,r=t.segwit):i=(0,o.getCoinName)(e);const s=c(e[0]);let n=e.length>=3?c(e[2]):-1,a=n+1,h="Export public key",u="";if(45342===s){const t=c(e[1]);a=(n=c(e[3]))+1,h="Export Copay ID of",48===t?u="multisig":44===t&&(u="legacy")}else u=48===s?`${i} multisig`:44===s&&r?`${i} legacy`:84===s&&r?`${i} native segwit`:i;return a>0?`${h} of ${u} <span>account #${a}</span>`:h});e.getLabel=((e,t)=>t?e.replace("#NETWORK",t.label):e.replace("#NETWORK",""))}],["trezor-connect","/lib/constants/errors.js",function(e,t,r,i,s,n){"use strict";e.__esModule=!0,e.NO_COIN_INFO=e.BACKEND_NO_URL=e.backendNotSupported=e.WEBUSB_ERROR_MESSAGE=e.INVALID_PIN_ERROR_MESSAGE=e.WRONG_PREVIOUS_SESSION_ERROR_MESSAGE=e.INVALID_STATE=e.CALL_OVERRIDE=e.INITIALIZATION_FAILED=e.DEVICE_USED_ELSEWHERE=e.PERMISSIONS_NOT_GRANTED=e.POPUP_CLOSED=e.INVALID_PARAMETERS=e.DEVICE_CALL_IN_PROGRESS=e.DEVICE_NOT_FOUND=e.WRONG_TRANSPORT_CONFIG=e.NO_TRANSPORT=e.MANAGEMENT_NOT_ALLOWED=e.MANIFEST_NOT_SET=e.BROWSER_NOT_SUPPORTED=e.POPUP_TIMEOUT=e.IFRAME_TIMEOUT=e.IFRAME_INITIALIZED=e.IFRAME_BLOCKED=e.NO_IFRAME=e.invalidParameter=e.TrezorError=void 0;class o extends Error{constructor(e,t){super(t),this.code=e,this.message=t}}e.TrezorError=o;const a=e=>new o("Connect_InvalidParameter",e);e.invalidParameter=a;const h=new o(100,"TrezorConnect not yet initialized");e.NO_IFRAME=h;const c=new o("iframe_blocked","TrezorConnect iframe was blocked");e.IFRAME_BLOCKED=c;const u=new o(101,"TrezorConnect has been already initialized");e.IFRAME_INITIALIZED=u;const f=new o(102,"Iframe timeout");e.IFRAME_TIMEOUT=f;const l=new o(103,"Popup timeout");e.POPUP_TIMEOUT=l;const d=new o(104,"Browser not supported");e.BROWSER_NOT_SUPPORTED=d;const p=new o(105,"Manifest not set. Read more at https://github.com/trezor/connect/blob/develop/docs/index.md");e.MANIFEST_NOT_SET=p;const b=new o(105,"Management method not allowed for this configuration");e.MANAGEMENT_NOT_ALLOWED=b;const g=new o(500,"Transport is missing");e.NO_TRANSPORT=g;const m=new o(5002,"Wrong config response");e.WRONG_TRANSPORT_CONFIG=m;const _=new o(501,"Device not found");e.DEVICE_NOT_FOUND=_;const w=new o(503,"Device call in progress");e.DEVICE_CALL_IN_PROGRESS=w;const y=new o(504,"Invalid parameters");e.INVALID_PARAMETERS=y;const v=new Error("Popup closed");e.POPUP_CLOSED=v;const E=new o(403,"Permissions not granted");e.PERMISSIONS_NOT_GRANTED=E;const S=new o(700,"Device is used in another window");e.DEVICE_USED_ELSEWHERE=S;const I=new o("Failure_Initialize","Initialization failed");e.INITIALIZATION_FAILED=I;const k=new o("Failure_ActionOverride","override");e.CALL_OVERRIDE=k;const A=new o("Failure_PassphraseState","Passphrase is incorrect");e.INVALID_STATE=A;e.WRONG_PREVIOUS_SESSION_ERROR_MESSAGE="wrong previous session";e.INVALID_PIN_ERROR_MESSAGE="PIN invalid";e.WEBUSB_ERROR_MESSAGE="NetworkError: Unable to claim interface.";e.backendNotSupported=(e=>new o("backend_error",`BlockchainLink support not found for ${e}`));const O=new o("Backend_init","Url not found");e.BACKEND_NO_URL=O;const x=a("Coin not found.");e.NO_COIN_INFO=x}],["trezor-connect","/lib/data/FirmwareInfo.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.getLatestRelease=e.checkFirmware=e.parseFirmware=void 0;var a=o(__browser_require__(384,r));function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}const c=[];e.parseFirmware=(e=>{const t=e;Object.keys(t).forEach(e=>{const r=t[e];c.push(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},r))})});e.checkFirmware=((e,t)=>{if(!1===t.firmware_present)return"none";if(1===e[0]&&t.bootloader_mode)return"unknown";const r=c.filter(t=>t.version[0]===e[0]).filter(t=>t.version[1]>e[1]||t.version[1]===e[1]&&t.version[2]>e[2]);if(r.length>0)return r.find(e=>e.required)?"required":"outdated";return"valid"});e.getLatestRelease=(e=>{return c.filter(t=>t.version[0]===e[0]).find(t=>t.version[1]>e[1]||t.version[1]===e[1]&&t.version[2]>e[2])})}],["trezor-connect","/lib/data/TransportInfo.js",function(e,t,r,i,s,n){"use strict";e.__esModule=!0,e.getBridgeInfo=e.parseBridgeJSON=void 0;const o={version:[],directory:"",packages:[]};e.parseBridgeJSON=(e=>{const t=e[0],r=t.version.join("."),i=JSON.parse(JSON.stringify(t).replace(/{version}/g,r)),s=i.directory,n=i.packages.map(e=>({name:e.name,platform:e.platform,url:`${s}${e.url}`,signature:e.signature?`${s}${e.signature}`:undefined}));return o.version=i.version,o.directory=s,o.packages=n,o});e.getBridgeInfo=(()=>o)}],["parse-uri","/index.js",function(e,t,r,i,s,n){"use strict";r.exports=function(e,t){t=t||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=r.parser[t.strictMode?"strict":"loose"].exec(e),s={},n=14;n--;)s[r.key[n]]=i[n]||"";return s[r.q.name]={},s[r.key[12]].replace(r.q.parser,function(e,t,i){t&&(s[r.q.name][t]=i)}),s}}],["semver-compare","/index.js",function(e,t,r,i,s,n){r.exports=function(e,t){for(var r=e.split("."),i=t.split("."),s=0;s<3;s++){var n=Number(r[s]),o=Number(i[s]);if(n>o)return 1;if(o>n)return-1;if(!isNaN(n)&&isNaN(o))return 1;if(isNaN(n)&&!isNaN(o))return-1}return 0}}],["trezor-connect","/lib/device/DeviceList.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.getDeviceList=e.default=void 0;var h=a(__browser_require__(384,r)),c=a(__browser_require__(19,r)),u=o(__browser_require__(386,r)),f=o(__browser_require__(389,r)),l=o(__browser_require__(414,r)),d=a(__browser_require__(420,r)),p=a(__browser_require__(422,r)),b=a(__browser_require__(573,r)),g=a(__browser_require__(409,r)),m=__browser_require__(416,r),_=o(__browser_require__(407,r)),w=__browser_require__(421,r),y=__browser_require__(620,r);const{BridgeV2:v,Fallback:E}=b.default,S=(0,_.init)("DeviceList");class I extends c.default{constructor(){super(),(0,h.default)(this,"devices",{}),(0,h.default)(this,"creatingDevicesDescriptors",{}),(0,h.default)(this,"hasCustomMessages",!1),(0,h.default)(this,"transportStartPending",0);const{debug:e,env:t,webusb:r}=g.default.settings;S.enabled=e;const i=[];if("react-native"===t&&void 0!==y.ReactNativeUsbPlugin)i.push((0,y.ReactNativeUsbPlugin)());else{const e=(0,m.getBridgeInfo)().version.join(".");"node"!==t&&"electron"!==t||v.setFetch(fetch,!0),i.push(new v(null,null,e))}r&&void 0!==y.WebUsbPlugin&&i.push((0,y.WebUsbPlugin)()),this.transport=new E(i),this.defaultMessages=g.default.getMessages(),this.currentMessages=this.defaultMessages}async init(){const{transport:e}=this;try{S.debug("Initializing transports"),await e.init(S.enabled),S.debug("Configuring transports"),await e.configure(JSON.stringify(this.defaultMessages)),S.debug("Configuring transports done");const{activeName:t}=e;"LowlevelTransportWithSharedConnections"===t&&(this.transportPlugin=e.activeTransport.plugin),await this._initStream(),this.on(f.CONNECT,this.resolveTransportEvent.bind(this)),this.on(f.CONNECT_UNACQUIRED,this.resolveTransportEvent.bind(this))}catch(e){this.emit(u.ERROR,e)}}async reconfigure(e,t){if(this.currentMessages!==e)try{await this.transport.configure(JSON.stringify(e)),this.currentMessages=e,this.hasCustomMessages="boolean"==typeof t&&t}catch(e){throw l.WRONG_TRANSPORT_CONFIG}}async restoreMessages(){if(this.hasCustomMessages)try{await this.transport.configure(JSON.stringify(this.defaultMessages)),this.hasCustomMessages=!1}catch(e){throw l.WRONG_TRANSPORT_CONFIG}}resolveTransportEvent(){this.transportStartPending--,0===this.transportStartPending&&this.stream.emit(u.START)}async waitForTransportFirstEvent(){await new Promise(e=>{const t=()=>{this.removeListener(u.START,t),this.removeListener(u.ERROR,t),e()};this.on(u.START,t),this.on(u.ERROR,t)})}async _initStream(){const e=new d.default(this.transport);if(e.on(u.START_PENDING,e=>{this.transportStartPending=e}),e.on(u.START,()=>{this.emit(u.START,this.getTransportInfo())}),e.on(u.UPDATE,e=>{new A(this,e).handle()}),e.on(u.ERROR,t=>{this.emit(u.ERROR,t),e.stop()}),e.listen(),this.stream=e,this.transportPlugin&&"WebUsbPlugin"===this.transportPlugin.name){const{unreadableHidDevice:e,unreadableHidDeviceChange:t}=this.transportPlugin;t.on("change",async()=>{if(e){const e=await this._createUnacquiredDevice({path:f.UNREADABLE,session:null,debugSession:null,debug:!1});this.devices[f.UNREADABLE]=e,this.emit(f.CONNECT_UNACQUIRED,e.toMessageObject())}else{const e=this.devices[f.UNREADABLE];delete this.devices[f.UNREADABLE],this.emit(f.DISCONNECT,e.toMessageObject())}})}this.emit(u.STREAM,e)}async _createAndSaveDevice(e){S.debug("Creating Device",e),await new k(e,this).handle()}async _createUnacquiredDevice(e){const t=this.stream.current&&this.stream.current.find(t=>t.path===e.path)||e;S.debug("Creating Unacquired Device",t);const r=await p.default.createUnacquired(this.transport,t);return r.once(f.ACQUIRED,()=>{this.emit(f.CONNECT,r.toMessageObject())}),r}getDevice(e){return this.devices[e]}getFirstDevicePath(){return this.asArray()[0].path}asArray(){return this.allDevices().map(e=>e.toMessageObject())}allDevices(){return Object.keys(this.devices).map(e=>this.devices[e])}length(){return this.asArray().length}transportType(){const{transport:e,transportPlugin:t}=this,{activeName:r}=e;return"BridgeTransport"===r?"bridge":t?t.name:e.name}getTransportInfo(){return{type:this.transportType(),version:this.transport.version,outdated:this.transport.isOutdated}}onBeforeUnload(){this.stream&&this.stream.stop(),this.allDevices().forEach(e=>e.onBeforeUnload())}disconnectDevices(){this.allDevices().forEach(e=>{this.emit(f.DISCONNECT,e.toMessageObject())})}enumerate(){this.stream.enumerate(),this.stream.current&&this.stream.current.forEach(e=>{const t=e.path.toString(),r=this.devices[t];r&&r.updateDescriptor(e)})}stop(){this.onBeforeUnload(),this.transport.stop()}}e.default=I;e.getDeviceList=(async()=>{const e=new I;return await e.init(),e});class k{constructor(e,t){this.descriptor=e,this.list=t,this.path=e.path.toString()}async handle(){this.list.creatingDevicesDescriptors[this.path]=this.descriptor;try{await this._takeAndCreateDevice()}catch(e){S.debug("Cannot create device",e),e.message.toLowerCase()===l.DEVICE_NOT_FOUND.message.toLowerCase()||(e.message===l.WRONG_PREVIOUS_SESSION_ERROR_MESSAGE||e.toString()===l.WEBUSB_ERROR_MESSAGE?(this.list.enumerate(),await this._handleUsedElsewhere()):e.code===l.INITIALIZATION_FAILED.code?await this._handleUsedElsewhere():e.message===l.DEVICE_USED_ELSEWHERE.message?await this._handleUsedElsewhere():(await(0,w.resolveAfter)(501,null),await this.handle()))}delete this.list.creatingDevicesDescriptors[this.path]}async _takeAndCreateDevice(){const e=await p.default.fromDescriptor(this.list.transport,this.descriptor);this.list.devices[this.path]=e,await e.run(),this.list.emit(f.CONNECT,e.toMessageObject())}async _handleUsedElsewhere(){const e=await this.list._createUnacquiredDevice(this.list.creatingDevicesDescriptors[this.path]);this.list.devices[this.path]=e,this.list.emit(f.CONNECT_UNACQUIRED,e.toMessageObject())}}class A{constructor(e,t){this.list=e,this.diff=t}handle(){S.debug("Update DescriptorStream",this.diff),this._createConnectedDevices(),this._createReleasedDevices(),this._signalAcquiredDevices(),this._updateDescriptors(),this._emitEvents(),this._disconnectDevices()}_updateDescriptors(){this.diff.descriptors.forEach(e=>{const t=e.path.toString(),r=this.list.devices[t];r&&r.updateDescriptor(e)})}_emitEvents(){[{d:this.diff.changedSessions,e:f.CHANGED},{d:this.diff.acquired,e:f.ACQUIRED},{d:this.diff.released,e:f.RELEASED}].forEach(({d:e,e:t})=>{e.forEach(e=>{const r=e.path.toString(),i=this.list.devices[r];S.debug("Event",t,i),i&&this.list.emit(t,i.toMessageObject())})})}async _createConnectedDevices(){for(const e of this.diff.connected){const t=e.path.toString(),r=g.default.getSettings("priority");if(S.debug("Connected",r,e.session,this.list.devices),r&&await(0,w.resolveAfter)(501+100*r,null),null==e.session)await this.list._createAndSaveDevice(e);else{const r=await this.list._createUnacquiredDevice(e);this.list.devices[t]=r,this.list.emit(f.CONNECT_UNACQUIRED,r.toMessageObject())}}}_signalAcquiredDevices(){for(const e of this.diff.acquired){const t=e.path.toString();this.list.creatingDevicesDescriptors[t]&&(this.list.creatingDevicesDescriptors[t]=e)}}async _createReleasedDevices(){for(const e of this.diff.released){const t=e.path.toString(),r=this.list.devices[t];r&&r.isUnacquired()&&!r.isInconsistent()&&(await(0,w.resolveAfter)(501,null),S.debug("Create device from unacquired",r),await this.list._createAndSaveDevice(e))}}_disconnectDevices(){for(const e of this.diff.disconnected){const t=e.path.toString(),r=this.list.devices[t];null!=r&&(r.disconnect(),delete this.list.devices[t],this.list.emit(f.DISCONNECT,r.toMessageObject()))}}}}],["trezor-connect","/lib/device/DescriptorStream.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(384,r)),c=a(__browser_require__(19,r)),u=o(__browser_require__(386,r)),f=o(__browser_require__(389,r)),l=o(__browser_require__(407,r)),d=a(__browser_require__(409,r)),p=__browser_require__(421,r);const b=(0,l.init)("DescriptorStream");e.default=class extends c.default{constructor(e){super(),(0,h.default)(this,"listening",!1),(0,h.default)(this,"listenTimestamp",0),(0,h.default)(this,"current",null),(0,h.default)(this,"upcoming",[]),this.transport=e,b.enabled=d.default.getSettings("debug")}async listen(){const e=null!==this.current,t=this.current||[];let r;this.listening=!0;try{if(b.debug("Start listening",t),this.listenTimestamp=(new Date).getTime(),r=e?await this.transport.listen(t):await this.transport.enumerate(),this.listening&&!e&&(r.length>0&&d.default.getSettings("pendingTransportEvent")?this.emit(u.START_PENDING,r.length):this.emit(u.START)),!this.listening)return;this.upcoming=r,b.debug("Listen result",r),this._reportChanges(),this.listening&&this.listen()}catch(e){const t=(new Date).getTime()-this.listenTimestamp;b.debug("Listen error","timestamp",t,typeof e),t>1100?(await(0,p.resolveAfter)(1e3,null),this.listening&&this.listen()):(b.log("Transport error"),this.emit(u.ERROR,e))}}async enumerate(){if(this.listening)try{this.upcoming=await this.transport.enumerate(),this._reportChanges()}catch(e){}}stop(){this.listening=!1}_diff(e,t){const r=e||[],i=t.filter(e=>r.find(t=>t.path===e.path)===undefined),s=r.filter(e=>t.find(t=>t.path===e.path)===undefined),n=t.filter(e=>{const t=r.find(t=>t.path===e.path);return!!t&&t.session!==e.session}),o=n.filter(e=>"string"==typeof e.session),a=n.filter(e=>"string"!=typeof e.session),h=t.filter(e=>{const t=r.find(t=>t.path===e.path);return!!t&&t.debugSession!==e.debugSession});return{connected:i,disconnected:s,changedSessions:n,acquired:o,released:a,changedDebugSessions:h,debugAcquired:n.filter(e=>"string"==typeof e.debugSession),debugReleased:n.filter(e=>"string"!=typeof e.debugSession),didUpdate:i.length+s.length+n.length+h.length>0,descriptors:t}}_reportChanges(){const e=this._diff(this.current,this.upcoming);this.current=this.upcoming,e.didUpdate&&this.listening&&(e.connected.forEach(e=>{this.emit(f.CONNECT,e)}),e.disconnected.forEach(e=>{this.emit(f.DISCONNECT,e)}),e.acquired.forEach(e=>{this.emit(f.ACQUIRED,e)}),e.released.forEach(e=>{this.emit(f.RELEASED,e)}),e.changedSessions.forEach(e=>{this.emit(f.CHANGED,e)}),this.emit(u.UPDATE,e))}}}],["trezor-connect","/lib/utils/promiseUtils.js",function(e,t,r,i,s,n){"use strict";e.__esModule=!0,e.resolveAfter=async function(e,t){return await new Promise(r=>{setTimeout(r,e,t)})}}],["trezor-connect","/lib/device/Device.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(384,r)),c=a(__browser_require__(19,r)),u=a(__browser_require__(418,r)),f=a(__browser_require__(423,r)),l=o(__browser_require__(388,r)),d=o(__browser_require__(389,r)),p=o(__browser_require__(414,r)),b=__browser_require__(572,r),g=a(__browser_require__(409,r)),m=__browser_require__(415,r);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}const w=(0,o(__browser_require__(407,r)).init)("Device"),y=e=>(e||(e={}),e),v=e=>(e.features&&0!==e.features.length||(e.features=["Feature_Bitcoin","Feature_Bitcoin_like","Feature_Binance","Feature_Cardano","Feature_Crypto","Feature_EOS","Feature_Ethereum","Feature_Lisk","Feature_Monero","Feature_NEM","Feature_Ripple","Feature_Stellar","Feature_Tezos","Feature_U2F"]),e);class E extends c.default{constructor(e,t){super(),(0,h.default)(this,"featuresNeedsReload",!1),(0,h.default)(this,"deferredActions",{}),(0,h.default)(this,"loaded",!1),(0,h.default)(this,"inconsistent",!1),(0,h.default)(this,"featuresTimestamp",0),(0,h.default)(this,"cachedPassphrase",[]),(0,h.default)(this,"keepSession",!1),(0,h.default)(this,"instance",0),w.enabled=g.default.getSettings("debug"),this.transport=e,this.originalDescriptor=t,this.hasDebugLink=t.debug,this.firstRunPromise=(0,b.create)()}static async fromDescriptor(e,t){const r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},t,{session:null});try{return new E(e,r)}catch(e){throw w.error("Device.fromDescriptor",e),e}}static createUnacquired(e,t){return new E(e,t)}async acquire(){this.deferredActions[d.ACQUIRE]=(0,b.create)(),this.deferredActions[d.ACQUIRED]=(0,b.create)();try{const e=await this.transport.acquire({path:this.originalDescriptor.path,previous:this.originalDescriptor.session},!1);w.warn("Expected session id:",e),this.activitySessionID=e,this.deferredActions[d.ACQUIRED].resolve(),delete this.deferredActions[d.ACQUIRED],this.commands&&this.commands.dispose(),this.commands=new f.default(this,this.transport,e),this.deferredActions[d.RELEASE]=(0,b.create)()}catch(e){if(this.deferredActions[d.ACQUIRED].resolve(),delete this.deferredActions[d.ACQUIRED],!this.runPromise)throw e;this.runPromise.reject(e),this.runPromise=null}}async release(){if(this.isUsedHere()&&!this.keepSession&&this.activitySessionID){if(this.commands&&(this.commands.dispose(),this.commands.callPromise))try{await this.commands.callPromise}catch(e){this.commands.callPromise=undefined}try{await this.transport.release(this.activitySessionID,!1,!1),this.deferredActions[d.RELEASE]&&await this.deferredActions[d.RELEASE].promise}catch(e){}}}async cleanup(){this.removeAllListeners(),this.runPromise=null,await this.release()}async run(e,t){if(this.runPromise)throw w.debug("Previous call is still running"),p.DEVICE_CALL_IN_PROGRESS;return t=y(t),this.runPromise=(0,b.create)(this._runInner.bind(this,e,t)),this.runPromise.promise}async override(e){this.deferredActions[d.ACQUIRE]&&await this.deferredActions[d.ACQUIRE].promise,this.runPromise&&(this.runPromise.reject(e),this.runPromise=null),!this.keepSession&&this.deferredActions[d.RELEASE]&&await this.deferredActions[d.RELEASE].promise}interruptionFromUser(e){w.debug("+++++interruptionFromUser"),this.commands&&this.commands.dispose(),this.runPromise&&(this.runPromise.reject(e),this.runPromise=null)}interruptionFromOutside(){w.debug("+++++interruptionFromOutside"),this.commands&&this.commands.dispose(),this.runPromise&&(this.runPromise.reject(p.DEVICE_USED_ELSEWHERE),this.runPromise=null)}async _runInner(e,t){if(!this.isUsedHere()||this.commands.disposed){await this.acquire();try{await this.initialize(!!t.useEmptyPassphrase)}catch(e){return this.inconsistent=!0,await this.deferredActions[d.ACQUIRE].promise,this.runPromise=null,p.INITIALIZATION_FAILED.message=`Initialize failed: ${e.message}`,Promise.reject(p.INITIALIZATION_FAILED)}}t.keepSession&&(this.keepSession=!0),await this.deferredActions[d.ACQUIRE].promise,e&&await e(),this.features&&!t.skipFinalReload&&await this.getFeatures(),(!this.keepSession&&"boolean"!=typeof t.keepSession||!1===t.keepSession)&&(this.keepSession=!1,await this.release()),this.runPromise&&this.runPromise.resolve(),this.runPromise=null,this.loaded||(this.loaded=!0,this.firstRunPromise.resolve(!0))}getCommands(){return this.commands}setInstance(e){this.instance!==e&&(this.keepSession&&(this.activitySessionID=null,this.keepSession=!1),this.isT1()&&this.clearPassphrase()),this.instance=e}getInstance(){return this.instance}setExpectedState(e){e||(this.setState(null),this.setPassphrase(null)),this.expectedState=e,this.isT1()||(this.temporaryState=e)}getExpectedState(){return this.expectedState}setPassphrase(e){this.isT1()&&(this.cachedPassphrase[this.instance]=e)}getPassphrase(){return this.cachedPassphrase[this.instance]}clearPassphrase(){this.cachedPassphrase[this.instance]=null,this.keepSession=!1}async initialize(e){const{message:t}=await this.commands.initialize(e);this.features=v(t),this.featuresNeedsReload=!1,this.featuresTimestamp=(new Date).getTime();const r=[this.features.major_version,this.features.minor_version,this.features.patch_version];this.firmwareStatus=(0,m.checkFirmware)(r,this.features),this.firmwareRelease=(0,m.getLatestRelease)(r)}async getFeatures(){const{message:e}=await this.commands.typedCall("GetFeatures","Features",{});this.features=v(e),this.firmwareStatus=(0,m.checkFirmware)([this.features.major_version,this.features.minor_version,this.features.patch_version],this.features)}getState(){return this.state?this.state:null}setState(e){this.state=e}setTemporaryState(e){this.temporaryState=e}getTemporaryState(){return this.temporaryState}isUnacquired(){return this.features===undefined}async updateDescriptor(e){const t=this.originalDescriptor.session,r=e.session;if(w.debug("updateDescriptor","currentSession",t,"upcoming",r,"lastUsedID",this.activitySessionID),!t&&!r&&!this.activitySessionID)return;this.deferredActions[d.ACQUIRED]&&await this.deferredActions[d.ACQUIRED].promise,r||this.listeners(d.ACQUIRED).length>0&&this.emit(d.ACQUIRED);const i=this.commands&&!this.commands.disposed;r||i?r===this.activitySessionID?(w.debug("ACQUIRED BY MYSELF"),this.deferredActions[d.ACQUIRE]&&this.deferredActions[d.ACQUIRE].resolve()):(w.debug("ACQUIRED BY OTHER"),this.interruptionFromOutside()):(t===this.activitySessionID?(w.debug("RELEASED BY MYSELF"),this.deferredActions[d.RELEASE]&&(this.deferredActions[d.RELEASE].resolve(),delete this.deferredActions[d.RELEASE]),this.activitySessionID=null):(w.debug("RELEASED BY OTHER APP"),this.featuresNeedsReload=!0),this.keepSession=!1),this.originalDescriptor=e}disconnect(){w.debug("DISCONNECT CLEANUP!"),this.deferredActions[d.RELEASE]&&(this.deferredActions[d.RELEASE].resolve(),delete this.deferredActions[d.RELEASE]),this.interruptionFromUser(new Error("Device disconnected")),this.runPromise=null}isBootloader(){return this.features.bootloader_mode}isInitialized(){return this.features.initialized}isSeedless(){return this.features.no_backup}isInconsistent(){return this.inconsistent}getVersion(){return[this.features.major_version,this.features.minor_version,this.features.patch_version].join(".")}atLeast(e){const t=e[this.features.major_version-1];return(0,u.default)(this.getVersion(),t)>=0}isUsed(){return"string"==typeof this.originalDescriptor.session}isUsedHere(){return this.isUsed()&&this.originalDescriptor.session===this.activitySessionID}isUsedElsewhere(){return this.isUsed()&&!this.isUsedHere()}isRunning(){return!!this.runPromise}isLoaded(){return this.loaded}waitForFirstRun(){return this.firstRunPromise.promise}getDevicePath(){return this.originalDescriptor.path}needAuthentication(){if(this.isUnacquired()||this.isUsedElsewhere()||this.featuresNeedsReload)return!0;if(this.features.bootloader_mode||!this.features.initialized)return!0;const e=!this.features.pin_protection||this.features.pin_cached,t=!this.features.passphrase_protection||this.features.passphrase_cached;return e&&t}isT1(){return!!this.features&&1===this.features.major_version}hasUnexpectedMode(e,t){if(this.features){if(this.isBootloader()&&!e.includes(l.BOOTLOADER))return l.BOOTLOADER;if(!this.isInitialized()&&!e.includes(l.INITIALIZE))return l.INITIALIZE;if(this.isSeedless()&&!e.includes(l.SEEDLESS))return l.SEEDLESS;if(!this.isBootloader()&&t.includes(l.BOOTLOADER))return l.NOT_IN_BOOTLOADER}return null}validateExpectedState(e){if(this.isT1()){if(this.getExpectedState()&&this.getExpectedState()!==e)return!1}else{const t=this.getExpectedState()||this.getState();if(!t)return this.setState(e),!0;if(t!==e)return!1}return!0}onBeforeUnload(){if(this.isUsedHere()&&this.activitySessionID)try{this.transport.release(this.activitySessionID,!0,!1)}catch(e){}}getMode(){return this.features.bootloader_mode?"bootloader":this.features.initialized?this.features.no_backup?"seedless":"normal":"initialize"}toMessageObject(){if(this.originalDescriptor.path===d.UNREADABLE)return{type:"unreadable",path:this.originalDescriptor.path,label:"Unreadable device"};if(this.isUnacquired())return{type:"unacquired",path:this.originalDescriptor.path,label:"Unacquired device"};{const e="My Trezor",t=""===this.features.label||null===this.features.label?e:this.features.label;return{type:"acquired",path:this.originalDescriptor.path,label:t,state:this.state,status:this.isUsedElsewhere()?"occupied":this.featuresNeedsReload?"used":"available",mode:this.getMode(),firmware:this.firmwareStatus,firmwareRelease:this.firmwareRelease,features:this.features}}}}e.default=E}],["trezor-connect","/lib/device/DeviceCommands.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(384,r)),c=o(__browser_require__(389,r)),u=a(__browser_require__(424,r)),f=o(__browser_require__(427,r)),l=o(__browser_require__(560,r)),d=__browser_require__(413,r),p=__browser_require__(562,r),b=__browser_require__(563,r),g=__browser_require__(421,r),m=(a(__browser_require__(422,r)),__browser_require__(412,r));o(__browser_require__(561,r));function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function w(e,t){if(!t.split("|").includes(e.type))throw new TypeError(`Response of unexpected type: ${e.type}. Should be ${t}`)}function y(e,t){const r={};return e in r?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},t,{},r[e]):t}e.default=class{constructor(e,t,r){(0,h.default)(this,"callPromise",undefined),this.device=e,this.transport=t,this.sessionId=r,this.debug=!1,this.disposed=!1}dispose(){this.disposed=!0}isDisposed(){return this.disposed}async getPublicKey(e,t,r){return(await this.typedCall("GetPublicKey","PublicKey",{address_n:e,coin_name:t,script_type:r})).message}async getHDNode(e,t,r=!0){if(!this.device.atLeast(["1.7.2","2.0.10"]))return await this.getBitcoinHDNode(e,t,r);if(!t)return await this.getBitcoinHDNode(e,null,r);let i;(0,d.isMultisigPath)(e)?i=t.network:(0,d.isSegwitPath)(e)?i=(0,m.getSegwitNetwork)(t):(0,d.isBech32Path)(e)&&(i=(0,m.getBech32Network)(t));let s,n=(0,d.getScriptType)(e);if(i||(i=t.network,"SPENDADDRESS"!==n&&(n=undefined)),r){const r=0,o=e.concat([r]),a=await this.getPublicKey(e,t.name,n),h=await this.getPublicKey(o,t.name,n);s=l.xpubDerive(a,h,r,i,t.network)}else s=await this.getPublicKey(e,t.name,n);const o={path:e,serializedPath:(0,d.getSerializedPath)(e),childNum:s.node.child_num,xpub:s.xpub,chainCode:s.node.chain_code,publicKey:s.node.public_key,fingerprint:s.node.fingerprint,depth:s.node.depth};return i!==t.network&&(o.xpubSegwit=o.xpub,o.xpub=l.convertXpub(s.xpub,i,t.network)),o}async getBitcoinHDNode(e,t,r=!0){let i;if(r){const t=0,r=e.concat([t]),s=await this.getPublicKey(e,"Bitcoin"),n=await this.getPublicKey(r,"Bitcoin");i=l.xpubDerive(s,n,t)}else i=await this.getPublicKey(e,"Bitcoin");const s={path:e,serializedPath:(0,d.getSerializedPath)(e),childNum:i.node.child_num,xpub:t?l.convertBitcoinXpub(i.xpub,t.network):i.xpub,chainCode:i.node.chain_code,publicKey:i.node.public_key,fingerprint:i.node.fingerprint,depth:i.node.depth};if(t){const r=(0,m.getSegwitNetwork)(t);r&&(0,d.isSegwitPath)(e)&&(s.xpubSegwit=l.convertBitcoinXpub(i.xpub,r))}return s}async getDeviceState(){const e=`${(await this.getPublicKey([2147483692,2147483649,2147483648],"Testnet","SPENDADDRESS")).xpub}#${this.device.features.device_id}#${this.device.instance}`;return this.device.getTemporaryState()||f.crypto.hash256(Buffer.from(e,"binary")).toString("hex")}async getAddress(e,t,r,i,s){return s||"SPENDMULTISIG"!==(s=(0,d.getScriptType)(e))||i||(s="SPENDADDRESS"),i&&i.pubkeys&&i.pubkeys.forEach(e=>{"string"==typeof e.node&&(e.node=l.xpubToHDNodeType(e.node,t.network))}),{address:(await this.typedCall("GetAddress","Address",{address_n:e,coin_name:t.name,show_display:!!r,multisig:i,script_type:s||"SPENDADDRESS"})).message.address,path:e,serializedPath:(0,d.getSerializedPath)(e)}}async signMessage(e,t,r){const i=(0,d.getScriptType)(e);return(await this.typedCall("SignMessage","MessageSignature",{address_n:e,message:t,coin_name:r||"Bitcoin",script_type:i&&"SPENDMULTISIG"!==i?i:"SPENDADDRESS"})).message}async verifyMessage(e,t,r,i){return(await this.typedCall("VerifyMessage","Success",{address:e,signature:t,message:r,coin_name:i})).message}async ethereumGetAddress(e,t,r=!0){const i=await this.typedCall("EthereumGetAddress","EthereumAddress",{address_n:e,show_display:!!r});return i.message.address=(0,b.toChecksumAddress)(i.message.address,t),i.message}async ethereumGetPublicKey(e,t){if(!this.device.atLeast(["1.8.1","2.1.0"]))return await this.getHDNode(e);const r=e.concat([0]),i=await this.typedCall("EthereumGetPublicKey","EthereumPublicKey",{address_n:e,show_display:!1}),s=await this.typedCall("EthereumGetPublicKey","EthereumPublicKey",{address_n:r,show_display:!1}),n=l.xpubDerive(i.message,s.message,0);return{path:e,serializedPath:(0,d.getSerializedPath)(e),childNum:n.node.child_num,xpub:n.xpub,chainCode:n.node.chain_code,publicKey:n.node.public_key,fingerprint:n.node.fingerprint,depth:n.node.depth}}async ethereumSignMessage(e,t){return(await this.typedCall("EthereumSignMessage","EthereumMessageSignature",{address_n:e,message:t})).message}async ethereumVerifyMessage(e,t,r){return(await this.typedCall("EthereumVerifyMessage","Success",{address:e,signature:t,message:r})).message}async nemGetAddress(e,t,r){return(await this.typedCall("NEMGetAddress","NEMAddress",{address_n:e,network:t,show_display:!!r})).message}async nemSignTx(e){return(await this.typedCall("NEMSignTx","NEMSignedTx",e)).message}async rippleGetAddress(e,t){return(await this.typedCall("RippleGetAddress","RippleAddress",{address_n:e,show_display:!!t})).message}async rippleSignTx(e){return(await this.typedCall("RippleSignTx","RippleSignedTx",e)).message}async stellarGetAddress(e,t){return(await this.typedCall("StellarGetAddress","StellarAddress",{address_n:e,show_display:!!t})).message}async eosGetPublicKey(e,t){return(await this.typedCall("EosGetPublicKey","EosPublicKey",{address_n:e,show_display:!!t})).message}async cardanoGetPublicKey(e,t){return(await this.typedCall("CardanoGetPublicKey","CardanoPublicKey",{address_n:e,show_display:!!t})).message}async cardanoGetAddress(e,t){return(await this.typedCall("CardanoGetAddress","CardanoAddress",{address_n:e,show_display:!!t})).message}async liskGetAddress(e,t){return(await this.typedCall("LiskGetAddress","LiskAddress",{address_n:e,show_display:!!t})).message}async liskGetPublicKey(e,t){return(await this.typedCall("LiskGetPublicKey","LiskPublicKey",{address_n:e,show_display:!!t})).message}async liskSignMessage(e,t){return(await this.typedCall("LiskSignMessage","LiskMessageSignature",{address_n:e,message:t})).message}async liskVerifyMessage(e,t,r){return(await this.typedCall("LiskVerifyMessage","Success",{public_key:e,signature:t,message:r})).message}async liskSignTx(e,t){return(await this.typedCall("LiskSignTx","LiskSignedTx",{address_n:e,transaction:t})).message}async tezosGetAddress(e,t){return(await this.typedCall("TezosGetAddress","TezosAddress",{address_n:e,show_display:!!t})).message}async tezosGetPublicKey(e,t){return(await this.typedCall("TezosGetPublicKey","TezosPublicKey",{address_n:e,show_display:!!t})).message}async tezosSignTransaction(e){return(await this.typedCall("TezosSignTx","TezosSignedTx",e)).message}async binanceGetAddress(e,t){return(await this.typedCall("BinanceGetAddress","BinanceAddress",{address_n:e,show_display:!!t})).message}async binanceGetPublicKey(e,t){return(await this.typedCall("BinanceGetPublicKey","BinancePublicKey",{address_n:e,show_display:!!t})).message}async cipherKeyValue(e,t,r,i,s,n,o){const a=r instanceof Buffer?r.toString("hex"):r,h=o instanceof Buffer?o.toString("hex"):o;return(await this.typedCall("CipherKeyValue","CipheredKeyValue",{address_n:e,key:t,value:a,encrypt:i,ask_on_encrypt:s,ask_on_decrypt:n,iv:h})).message}async signIdentity(e,t,r){return(await this.typedCall("SignIdentity","SignedIdentity",{identity:e,challenge_hidden:t,challenge_visual:r})).message}async clearSession(e){return await this.typedCall("ClearSession","Success",e)}async initialize(e=!1){if(this.disposed)throw new Error("DeviceCommands already disposed");const t={};this.device.isT1()||(t.state=this.device.getExpectedState()||this.device.getState(),e&&(t.skip_passphrase=e,t.state=null));const r=await this.call("Initialize",t);return w(r,"Features"),r}async wipe(){return(await this.typedCall("WipeDevice","Success")).message}async reset(e){return(await this.typedCall("ResetDevice","Success",e)).message}async load(e){return(await this.typedCall("LoadDevice","Success",e)).message}async applyFlags(e){return(await this.typedCall("ApplyFlags","Success",e)).message}async applySettings(e){return(await this.typedCall("ApplySettings","Success",e)).message}async backupDevice(){return(await this.typedCall("BackupDevice","Success")).message}async changePin(e){return(await this.typedCall("ChangePin","Success",e)).message}async firmwareErase(e){return(await this.typedCall("FirmwareErase",1===this.device.features.major_version?"Success":"FirmwareRequest",e)).message}async firmwareUpload(e){return(await this.typedCall("FirmwareUpload","Success",e)).message}async recoveryDevice(e){return(await this.typedCall("RecoveryDevice","Success",e)).message}async call(e,t={}){const r=y(e,t);this.debug&&console.log("[DeviceCommands] [call] Sending",e,r,this.transport);try{this.callPromise=this.transport.call(this.sessionId,e,t,!1);const r=await this.callPromise,i=y(r.type,r.message);return this.debug&&console.log("[DeviceCommands] [call] Received",r.type,i),r}catch(e){throw this.debug&&console.warn("[DeviceCommands] [call] Received error",e),e}}async typedCall(e,t,r={}){if(this.disposed)throw new Error("DeviceCommands already disposed");const i=await this._commonCall(e,r);return w(i,t),i}async _commonCall(e,t){const r=await this.call(e,t);return this._filterCommonTypes(r)}async _filterCommonTypes(e){if("Failure"===e.type){const t=new Error(e.message.message);return t.code=e.message.code,Promise.reject(t)}if("ButtonRequest"===e.type)return this.device.emit("button",this.device,e.message.code),this._commonCall("ButtonAck",{});if("EntropyRequest"===e.type)return this._commonCall("EntropyAck",{entropy:function(e){if(global.crypto||global.msCrypto)return(0,u.default)(e);throw new Error("Browser does not support crypto random")}(32).toString("hex")});if("PinMatrixRequest"===e.type)return this._promptPin(e.message.type).then(e=>this._commonCall("PinMatrixAck",{pin:e}),()=>this._commonCall("Cancel",{}));if("PassphraseRequest"===e.type){const t=this.device.isT1()?null:this.device.getExpectedState()||this.device.getState();return e.message.on_device?(this.device.emit(c.PASSPHRASE_ON_DEVICE,this.device),this._commonCall("PassphraseAck",{state:t})):this._promptPassphrase().then(e=>this._commonCall("PassphraseAck",{passphrase:e,state:t}),e=>this._commonCall("Cancel",{}).catch(t=>{throw e||t}))}if("PassphraseStateRequest"===e.type){const t=e.message.state;return this.device.setTemporaryState(t),this._commonCall("PassphraseStateAck",{})}return"WordRequest"===e.type?this._promptWord(e.message.type).then(e=>this._commonCall("WordAck",{word:e}),()=>this._commonCall("Cancel",{})):Promise.resolve(e)}_promptPin(e){return new Promise((t,r)=>{this.device.listenerCount(c.PIN)>0?this.device.emit(c.PIN,this.device,e,(e,i)=>{e||null==i?r(e):t(i)}):(console.warn("[DeviceCommands] [call] PIN callback not configured, cancelling request"),r(new Error("PIN callback not configured")))})}_promptPassphrase(){return new Promise((e,t)=>{this.device.listenerCount(c.PASSPHRASE)>0?this.device.emit(c.PASSPHRASE,this.device,(r,i)=>{r||null==i?t(r):e(i.normalize("NFKD"))}):(console.warn("[DeviceCommands] [call] Passphrase callback not configured, cancelling request"),t(new Error("Passphrase callback not configured")))})}_promptWord(e){return new Promise((t,r)=>{this.device.emit(c.WORD,this.device,e,(e,i)=>{e||null==i?r(e):t(i.toLocaleLowerCase())})})}async debugLinkDecision(e){const t=await this.transport.acquire({path:this.device.originalDescriptor.path,previous:this.device.originalDescriptor.debugSession},!0);await(0,g.resolveAfter)(501,null),await this.transport.post(t,"DebugLinkDecision",e,!0),await this.transport.release(t,!0,!0),this.device.originalDescriptor.debugSession=null,await(0,g.resolveAfter)(501,null)}async debugLinkGetState(e){const t=await this.transport.acquire({path:this.device.originalDescriptor.path,previous:this.device.originalDescriptor.debugSession},!0);await(0,g.resolveAfter)(501,null);const r=await this.transport.call(t,"DebugLinkGetState",{},!0);return w(r,"DebugLinkState"),await this.transport.release(t,!0,!0),await(0,g.resolveAfter)(501,null),r.message}async getAccountDescriptor(e,t){const r=Array.isArray(t)?t:(0,p.getAccountAddressN)(e,t);if("bitcoin"===e.type){const t=await this.getHDNode(r,e,!1);return{descriptor:t.xpubSegwit||t.xpub,address_n:r}}return"ethereum"===e.type?{descriptor:(await this.ethereumGetAddress(r,e,!1)).address,address_n:r}:"XRP"===e.shortcut||"tXRP"===e.shortcut?{descriptor:(await this.rippleGetAddress(r,!1)).address,address_n:r}:void 0}}}],["randombytes","/browser.js",function(e,t,r,i,s,n){"use strict";var o=65536,a=4294967295;var h=__browser_require__(425,r).Buffer,c=global.crypto||global.msCrypto;c&&c.getRandomValues?r.exports=function(e,t){if(e>a)throw new RangeError("requested too many random bytes");var r=h.allocUnsafe(e);if(e>0)if(e>o)for(var i=0;i<e;i+=o)c.getRandomValues(r.slice(i,i+o));else c.getRandomValues(r);if("function"==typeof t)return process.nextTick(function(){t(null,r)});return r}:r.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}],["safe-buffer","/index.js",function(e,t,r,i,s,n){var o=__browser_require__(426,r),a=o.Buffer;function h(e,t){for(var r in e)t[r]=e[r]}function c(e,t,r){return a(e,t,r)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?r.exports=o:(h(o,e),e.Buffer=c),c.prototype=Object.create(a.prototype),h(a,c),c.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,r)},c.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=a(e);return t!==undefined?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},c.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},c.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}}],["bpkg","/lib/builtins/buffer.js",function(e,t,r,i,s,n){var o=[["buffer","/index.js",function(e,t,r,i,s){"use strict";var n=h(1),o=h(2);e.Buffer=u,e.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},e.INSPECT_MAX_BYTES=50;var a=2147483647;function c(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=u.prototype,t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return f(e,t,r)}function f(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|g(e,t),i=c(r),s=i.write(e,t);s!==r&&(i=i.slice(0,s));return i}(e,t);if(ArrayBuffer.isView(e))return p(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(H(e,ArrayBuffer)||e&&H(e.buffer,ArrayBuffer))return function(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var i;i=t===undefined&&r===undefined?new Uint8Array(e):r===undefined?new Uint8Array(e,t):new Uint8Array(e,t,r);return i.__proto__=u.prototype,i}(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return u.from(i,t,r);var s=function(e){if(null!=e&&!0===e._isBuffer){var t=0|b(e.length),r=c(t);return 0===r.length?r:(e.copy(r,0,0,t),r)}if(e.length!==undefined)return"number"!=typeof e.length||V(e.length)?c(0):p(e);if("Buffer"===e.type&&Array.isArray(e.data))return p(e.data)}(e);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return l(e),c(e<0?0:0|b(e))}function p(e){for(var t=e.length<0?0:0|b(e.length),r=c(t),i=0;i<t;i+=1)r[i]=255&e[i];return r}function b(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function g(e,t){if(null!=e&&!0===e._isBuffer)return e.length;if(ArrayBuffer.isView(e)||H(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;for(var s=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return L(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(e).length;default:if(s)return i?-1:L(e).length;t=(""+t).toLowerCase(),s=!0}}function m(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function _(e,t,r,i,s){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),V(r=+r)&&(r=s?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(s)return-1;r=e.length-1}else if(r<0){if(!s)return-1;r=0}if("string"==typeof t&&(t=u.from(t,i)),null!=t&&!0===t._isBuffer)return 0===t.length?-1:w(e,t,r,i,s);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):w(e,[t],r,i,s);throw new TypeError("val must be string, number or Buffer")}function w(e,t,r,i,s){var n,o=1,a=e.length,h=t.length;if(i!==undefined&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o=2,a/=2,h/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(s){var u=-1;for(n=r;n<a;n++)if(c(e,n)===c(t,-1===u?0:n-u)){if(-1===u&&(u=n),n-u+1===h)return u*o}else-1!==u&&(n-=n-u),u=-1}else for(r+h>a&&(r=a-h),n=r;n>=0;n--){for(var f=!0,l=0;l<h;l++)if(c(e,n+l)!==c(t,l)){f=!1;break}if(f)return n}return-1}function y(e,t,r,i){r=Number(r)||0;var s=e.length-r;i?(i=Number(i))>s&&(i=s):i=s;var n=t.length;i>n/2&&(i=n/2);for(var o=0;o<i;++o){var a=parseInt(t.substr(2*o,2),16);if(V(a))return o;e[r+o]=a}return o}function v(e,t,r,i){return F(L(t,e.length-r),e,r,i)}function E(e,t,r,i){return F(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function S(e,t,r,i){return E(e,t,r,i)}function I(e,t,r,i){return F(z(t),e,r,i)}function k(e,t,r,i){return F(function(e,t){for(var r,i,s,n=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),i=r>>8,s=r%256,n.push(s),n.push(i);return n}(t,e.length-r),e,r,i)}function A(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function O(e,t,r){r=Math.min(e.length,r);for(var i=[],s=t;s<r;){var n,o,a,h,c=e[s],u=null,f=c>239?4:c>223?3:c>191?2:1;if(s+f<=r)switch(f){case 1:c<128&&(u=c);break;case 2:128==(192&(n=e[s+1]))&&(h=(31&c)<<6|63&n)>127&&(u=h);break;case 3:n=e[s+1],o=e[s+2],128==(192&n)&&128==(192&o)&&(h=(15&c)<<12|(63&n)<<6|63&o)>2047&&(h<55296||h>57343)&&(u=h);break;case 4:n=e[s+1],o=e[s+2],a=e[s+3],128==(192&n)&&128==(192&o)&&128==(192&a)&&(h=(15&c)<<18|(63&n)<<12|(63&o)<<6|63&a)>65535&&h<1114112&&(u=h)}null===u?(u=65533,f=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),s+=f}return function(e){var t=e.length;if(t<=x)return String.fromCharCode.apply(String,e);var r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=x));return r}(i)}e.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||void 0===console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){return u.isBuffer(this)?this.buffer:undefined}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){return u.isBuffer(this)?this.byteOffset:undefined}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),u.poolSize=8192,u.from=function(e,t,r){return f(e,t,r)},u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,u.alloc=function(e,t,r){return function(e,t,r){return l(e),e<=0?c(e):t!==undefined?"string"==typeof r?c(e).fill(t,r):c(e).fill(t):c(e)}(e,t,r)},u.allocUnsafe=function(e){return d(e)},u.allocUnsafeSlow=function(e){return d(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(H(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),H(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),null==e||!0!==e._isBuffer||null==t||!0!==t._isBuffer)throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,i=t.length,s=0,n=Math.min(r,i);s<n;++s)if(e[s]!==t[s]){r=e[s],i=t[s];break}return r<i?-1:i<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(t===undefined)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var i=u.allocUnsafe(t),s=0;for(r=0;r<e.length;++r){var n=e[r];if(H(n,Uint8Array)&&(n=u.from(n)),null==n||!0!==n._isBuffer)throw new TypeError('"list" argument must be an Array of Buffers');n.copy(i,s),s+=n.length}return i},u.byteLength=g,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},u.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?O(this,0,e):function(e,t,r){var i=!1;if((t===undefined||t<0)&&(t=0),t>this.length)return"";if((r===undefined||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,r);case"utf8":case"utf-8":return O(this,t,r);case"ascii":return R(this,t,r);case"latin1":case"binary":return M(this,t,r);case"base64":return A(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(null==e||!0!==e._isBuffer)throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},u.prototype.compare=function(e,t,r,i,s){if(H(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),null==e||!0!==e._isBuffer)throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===undefined&&(t=0),r===undefined&&(r=e?e.length:0),i===undefined&&(i=0),s===undefined&&(s=this.length),t<0||r>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&t>=r)return 0;if(i>=s)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,s>>>=0,this===e)return 0;for(var n=s-i,o=r-t,a=Math.min(n,o),h=this.slice(i,s),c=e.slice(t,r),f=0;f<a;++f)if(h[f]!==c[f]){n=h[f],o=c[f];break}return n<o?-1:o<n?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return _(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return _(this,e,t,r,!1)},u.prototype.write=function(e,t,r,i){if(t===undefined)i="utf8",r=this.length,t=0;else if(r===undefined&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,i===undefined&&(i="utf8")):(i=r,r=undefined)}var s=this.length-t;if((r===undefined||r>s)&&(r=s),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var n=!1;;)switch(i){case"hex":return y(this,e,t,r);case"utf8":case"utf-8":return v(this,e,t,r);case"ascii":return E(this,e,t,r);case"latin1":case"binary":return S(this,e,t,r);case"base64":return I(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,r);default:if(n)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),n=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x=4096;function R(e,t,r){var i="";r=Math.min(e.length,r);for(var s=t;s<r;++s)i+=String.fromCharCode(127&e[s]);return i}function M(e,t,r){var i="";r=Math.min(e.length,r);for(var s=t;s<r;++s)i+=String.fromCharCode(e[s]);return i}function P(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var s="",n=t;n<r;++n)s+=U(e[n]);return s}function B(e,t,r){for(var i=e.slice(t,r),s="",n=0;n<i.length;n+=2)s+=String.fromCharCode(i[n]+256*i[n+1]);return s}function N(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function T(e,t,r,i,s,n){if(null==e||!0!==e._isBuffer)throw new TypeError('"buffer" argument must be a Buffer instance');if(t>s||t<n)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function C(e,t,r,i,s,n){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function q(e,t,r,i,s){return t=+t,r>>>=0,s||C(e,0,r,4),o.write(e,t,r,i,23,4),r+4}function j(e,t,r,i,s){return t=+t,r>>>=0,s||C(e,0,r,8),o.write(e,t,r,i,52,8),r+8}u.prototype.slice=function(e,t){var r=this.length;e=~~e,t=t===undefined?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var i=this.subarray(e,t);return i.__proto__=u.prototype,i},u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);for(var i=this[e],s=1,n=0;++n<t&&(s*=256);)i+=this[e+n]*s;return i},u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);for(var i=this[e+--t],s=1;t>0&&(s*=256);)i+=this[e+--t]*s;return i},u.prototype.readUInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);for(var i=this[e],s=1,n=0;++n<t&&(s*=256);)i+=this[e+n]*s;return i>=(s*=128)&&(i-=Math.pow(2,8*t)),i},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);for(var i=t,s=1,n=this[e+--i];i>0&&(s*=256);)n+=this[e+--i]*s;return n>=(s*=128)&&(n-=Math.pow(2,8*t)),n},u.prototype.readInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||N(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||N(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return e>>>=0,t||N(e,4,this.length),o.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||N(e,4,this.length),o.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||N(e,8,this.length),o.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||N(e,8,this.length),o.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,i){(e=+e,t>>>=0,r>>>=0,i)||T(this,e,t,r,Math.pow(2,8*r)-1,0);var s=1,n=0;for(this[t]=255&e;++n<r&&(s*=256);)this[t+n]=e/s&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,i){(e=+e,t>>>=0,r>>>=0,i)||T(this,e,t,r,Math.pow(2,8*r)-1,0);var s=r-1,n=1;for(this[t+s]=255&e;--s>=0&&(n*=256);)this[t+s]=e/n&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t>>>=0,!i){var s=Math.pow(2,8*r-1);T(this,e,t,r,s-1,-s)}var n=0,o=1,a=0;for(this[t]=255&e;++n<r&&(o*=256);)e<0&&0===a&&0!==this[t+n-1]&&(a=1),this[t+n]=(e/o>>0)-a&255;return t+r},u.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t>>>=0,!i){var s=Math.pow(2,8*r-1);T(this,e,t,r,s-1,-s)}var n=r-1,o=1,a=0;for(this[t+n]=255&e;--n>=0&&(o*=256);)e<0&&0===a&&0!==this[t+n+1]&&(a=1),this[t+n]=(e/o>>0)-a&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||T(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeFloatLE=function(e,t,r){return q(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return q(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return j(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return j(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,i){if(null==e||!0!==e._isBuffer)throw new TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var s=i-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,i);else if(this===e&&r<t&&t<i)for(var n=s-1;n>=0;--n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,i),t);return s},u.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),i!==undefined&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!u.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){var s=e.charCodeAt(0);("utf8"===i&&s<128||"latin1"===i)&&(e=s)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var n;if(t>>>=0,r=r===undefined?this.length:r>>>0,e||(e=0),"number"==typeof e)for(n=t;n<r;++n)this[n]=e;else{var o=null!=e&&!0===e._isBuffer?e:u.from(e,i),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<r-t;++n)this[n+t]=o[n%a]}return this};var D=/[^+/0-9A-Za-z-_]/g;function U(e){return e<16?"0"+e.toString(16):e.toString(16)}function L(e,t){var r;t=t||1/0;for(var i=e.length,s=null,n=[],o=0;o<i;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!s){if(r>56319){(t-=3)>-1&&n.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&n.push(239,191,189);continue}s=r;continue}if(r<56320){(t-=3)>-1&&n.push(239,191,189),s=r;continue}r=65536+(s-55296<<10|r-56320)}else s&&(t-=3)>-1&&n.push(239,191,189);if(s=null,r<128){if((t-=1)<0)break;n.push(r)}else if(r<2048){if((t-=2)<0)break;n.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;n.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;n.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return n}function z(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(D,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function F(e,t,r,i){for(var s=0;s<i&&!(s+r>=t.length||s>=e.length);++s)t[s+r]=e[s];return s}function H(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function V(e){return e!=e}}],["base64-js","/index.js",function(e,t,r,i,s){"use strict";e.byteLength=function(e){var t=f(e),r=t[0],i=t[1];return 3*(r+i)/4-i},e.toByteArray=function(e){for(var t,r=f(e),i=r[0],s=r[1],n=new a(function(e,t,r){return 3*(t+r)/4-r}(0,i,s)),h=0,c=s>0?i-4:i,u=0;u<c;u+=4)t=o[e.charCodeAt(u)]<<18|o[e.charCodeAt(u+1)]<<12|o[e.charCodeAt(u+2)]<<6|o[e.charCodeAt(u+3)],n[h++]=t>>16&255,n[h++]=t>>8&255,n[h++]=255&t;2===s&&(t=o[e.charCodeAt(u)]<<2|o[e.charCodeAt(u+1)]>>4,n[h++]=255&t);1===s&&(t=o[e.charCodeAt(u)]<<10|o[e.charCodeAt(u+1)]<<4|o[e.charCodeAt(u+2)]>>2,n[h++]=t>>8&255,n[h++]=255&t);return n},e.fromByteArray=function(e){for(var t,r=e.length,i=r%3,s=[],o=0,a=r-i;o<a;o+=16383)s.push(l(e,o,o+16383>a?a:o+16383));1===i?(t=e[r-1],s.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],s.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return s.join("")};for(var n=[],o=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,u=h.length;c<u;++c)n[c]=h[c],o[h.charCodeAt(c)]=c;function f(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,r){for(var i,s,o=[],a=t;a<r;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(n[(s=i)>>18&63]+n[s>>12&63]+n[s>>6&63]+n[63&s]);return o.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63}],["ieee754","/index.js",function(e,t,r,i,s){e.read=function(e,t,r,i,s){var n,o,a=8*s-i-1,h=(1<<a)-1,c=h>>1,u=-7,f=r?s-1:0,l=r?-1:1,d=e[t+f];for(f+=l,n=d&(1<<-u)-1,d>>=-u,u+=a;u>0;n=256*n+e[t+f],f+=l,u-=8);for(o=n&(1<<-u)-1,n>>=-u,u+=i;u>0;o=256*o+e[t+f],f+=l,u-=8);if(0===n)n=1-c;else{if(n===h)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,i),n-=c}return(d?-1:1)*o*Math.pow(2,n-i)},e.write=function(e,t,r,i,s,n){var o,a,h,c=8*n-s-1,u=(1<<c)-1,f=u>>1,l=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:n-1,p=i?1:-1,b=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-o))<1&&(o--,h*=2),(t+=o+f>=1?l/h:l*Math.pow(2,1-f))*h>=2&&(o++,h/=2),o+f>=u?(a=0,o=u):o+f>=1?(a=(t*h-1)*Math.pow(2,s),o+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,s),o=0));s>=8;e[r+d]=255&a,d+=p,a/=256,s-=8);for(o=o<<s|a,c+=s;c>0;e[r+d]=255&o,d+=p,o/=256,c-=8);e[r+d-p]|=128*b}}]],a=[];function h(t){if(t>>>0!==t||t>o.length)return function(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}(t);for(;a.length<=t;)a.push(null);var n=a[t];if(n)return n.exports;var h=o[t],c=h[0],u=h[1],f=h[2],l=e,d=r;0!==t&&(d={id:"/"+c+u,exports:l={},parent:r.parent,filename:r.filename,loaded:!1,children:r.children,paths:r.paths}),a[t]=d;try{f.call(l,l,d,i,s,void 0)}catch(e){throw a[t]=null,e}return o[t]=null,0!==t&&(d.loaded=!0),d.exports}h(0)}],["@trezor/utxo-lib","/src/index.js",function(e,t,r,i,s,n){var o=__browser_require__(428,r),a=__browser_require__(439,r);for(var h in a)o[h]=a[h];r.exports={bufferutils:__browser_require__(461,r),Block:__browser_require__(467,r),ECPair:__browser_require__(496,r),ECSignature:__browser_require__(507,r),HDNode:__browser_require__(555,r),Transaction:__browser_require__(490,r),TransactionBuilder:__browser_require__(556,r),address:__browser_require__(497,r),coins:__browser_require__(489,r),crypto:__browser_require__(468,r),networks:__browser_require__(488,r),opcodes:__browser_require__(431,r),script:o}}],["@trezor/utxo-lib","/src/script.js",function(e,t,r,i,s,n){var o=__browser_require__(425,r).Buffer,a=__browser_require__(429,r),h=__browser_require__(430,r),c=__browser_require__(432,r),u=__browser_require__(436,r),f=__browser_require__(437,r),l=__browser_require__(431,r),d=__browser_require__(438,r),p=l.OP_RESERVED;function b(e){return u.Buffer(e)||function(e){return u.Number(e)&&(e===l.OP_0||e>=l.OP_1&&e<=l.OP_16||e===l.OP_1NEGATE)}(e)}function g(e){return u.Array(e)&&e.every(b)}function m(e){return 0===e.length?l.OP_0:1===e.length?e[0]>=1&&e[0]<=16?p+e[0]:129===e[0]?l.OP_1NEGATE:void 0:void 0}function _(e){if(null!=e&&!0===e._isBuffer)return e;c(u.Array,e);var t=e.reduce(function(e,t){return null!=t&&!0===t._isBuffer?1===t.length&&m(t)!==undefined?e+1:e+h.encodingLength(t.length)+t.length:e+1},0),r=o.allocUnsafe(t),i=0;if(e.forEach(function(e){if(null!=e&&!0===e._isBuffer){var t=m(e);if(t!==undefined)return r.writeUInt8(t,i),void(i+=1);i+=h.encode(r,e.length,i),e.copy(r,i),i+=e.length}else r.writeUInt8(e,i),i+=1}),i!==r.length)throw new Error("Could not decode chunks");return r}function w(e){if(u.Array(e))return e;c(u.Buffer,e);for(var t=[],r=0;r<e.length;){var i=e[r];if(i>l.OP_0&&i<=l.OP_PUSHDATA4){var s=h.decode(e,r);if(null===s)return[];if((r+=s.size)+s.number>e.length)return[];var n=e.slice(r,r+s.number);r+=s.number;var o=m(n);o!==undefined?t.push(o):t.push(n)}else t.push(i),r+=1}return t}function y(e){var t=-193&e;return t>0&&t<4}r.exports={compile:_,decompile:w,fromASM:function(e){return c(u.String,e),_(e.split(" ").map(function(e){return l[e]!==undefined?l[e]:(c(u.Hex,e),o.from(e,"hex"))}))},toASM:function(e){return null!=e&&!0===e._isBuffer&&(e=w(e)),e.map(function(e){if(null!=e&&!0===e._isBuffer){var t=m(e);if(t===undefined)return e.toString("hex");e=t}return d[e]}).join(" ")},toStack:function(e){return e=w(e),c(g,e),e.map(function(e){return null!=e&&!0===e._isBuffer?e:e===l.OP_0?o.allocUnsafe(0):f.encode(e-p)})},number:__browser_require__(437,r),isCanonicalPubKey:function(e){if(null==e||!0!==e._isBuffer)return!1;if(e.length<33)return!1;switch(e[0]){case 2:case 3:return 33===e.length;case 4:return 65===e.length}return!1},isCanonicalSignature:function(e){return null!=e&&!0===e._isBuffer&&!!y(e[e.length-1])&&a.check(e.slice(0,-1))},isPushOnly:g,isDefinedHashType:y}}],["bip66","/index.js",function(e,t,r,i,s,n){var o=__browser_require__(425,r).Buffer;r.exports={check:function(e){if(e.length<8)return!1;if(e.length>72)return!1;if(48!==e[0])return!1;if(e[1]!==e.length-2)return!1;if(2!==e[2])return!1;var t=e[3];if(0===t)return!1;if(5+t>=e.length)return!1;if(2!==e[4+t])return!1;var r=e[5+t];return!(0===r||6+t+r!==e.length||128&e[4]||t>1&&0===e[4]&&!(128&e[5])||128&e[t+6]||r>1&&0===e[t+6]&&!(128&e[t+7]))},decode:function(e){if(e.length<8)throw new Error("DER sequence length is too short");if(e.length>72)throw new Error("DER sequence length is too long");if(48!==e[0])throw new Error("Expected DER sequence");if(e[1]!==e.length-2)throw new Error("DER sequence length is invalid");if(2!==e[2])throw new Error("Expected DER integer");var t=e[3];if(0===t)throw new Error("R length is zero");if(5+t>=e.length)throw new Error("R length is too long");if(2!==e[4+t])throw new Error("Expected DER integer (2)");var r=e[5+t];if(0===r)throw new Error("S length is zero");if(6+t+r!==e.length)throw new Error("S length is invalid");if(128&e[4])throw new Error("R value is negative");if(t>1&&0===e[4]&&!(128&e[5]))throw new Error("R value excessively padded");if(128&e[t+6])throw new Error("S value is negative");if(r>1&&0===e[t+6]&&!(128&e[t+7]))throw new Error("S value excessively padded");return{r:e.slice(4,4+t),s:e.slice(6+t)}},encode:function(e,t){var r=e.length,i=t.length;if(0===r)throw new Error("R length is zero");if(0===i)throw new Error("S length is zero");if(r>33)throw new Error("R length is too long");if(i>33)throw new Error("S length is too long");if(128&e[0])throw new Error("R value is negative");if(128&t[0])throw new Error("S value is negative");if(r>1&&0===e[0]&&!(128&e[1]))throw new Error("R value excessively padded");if(i>1&&0===t[0]&&!(128&t[1]))throw new Error("S value excessively padded");var s=o.allocUnsafe(6+r+i);return s[0]=48,s[1]=s.length-2,s[2]=2,s[3]=e.length,e.copy(s,4),s[4+r]=2,s[5+r]=t.length,t.copy(s,6+r),s}}}],["pushdata-bitcoin","/index.js",function(e,t,r,i,s,n){var o=__browser_require__(431,r);function a(e){return e<o.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}r.exports={encodingLength:a,encode:function(e,t,r){var i=a(t);return 1===i?e.writeUInt8(t,r):2===i?(e.writeUInt8(o.OP_PUSHDATA1,r),e.writeUInt8(t,r+1)):3===i?(e.writeUInt8(o.OP_PUSHDATA2,r),e.writeUInt16LE(t,r+1)):(e.writeUInt8(o.OP_PUSHDATA4,r),e.writeUInt32LE(t,r+1)),i},decode:function(e,t){var r,i,s=e.readUInt8(t);if(s<o.OP_PUSHDATA1)r=s,i=1;else if(s===o.OP_PUSHDATA1){if(t+2>e.length)return null;r=e.readUInt8(t+1),i=2}else if(s===o.OP_PUSHDATA2){if(t+3>e.length)return null;r=e.readUInt16LE(t+1),i=3}else{if(t+5>e.length)return null;if(s!==o.OP_PUSHDATA4)throw new Error("Unexpected opcode");r=e.readUInt32LE(t+1),i=5}return{opcode:s,number:r,size:i}}}}],["bitcoin-ops","/index.json",function(e,t,r,i,s,n){r.exports={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255}}],["typeforce","/index.js",function(e,t,r,i,s,n){var o=__browser_require__(433,r),a=__browser_require__(434,r),h=o.tfJSON,c=o.TfTypeError,u=o.TfPropertyTypeError,f=o.tfSubError,l=o.getValueTypeName,d={arrayOf:function(e,t){function r(r,i){return!!a.Array(r)&&(!a.Nil(r)&&(!(t.minLength!==undefined&&r.length<t.minLength)&&(!(t.maxLength!==undefined&&r.length>t.maxLength)&&((t.length===undefined||r.length===t.length)&&r.every(function(t,r){try{return b(e,t,i)}catch(e){throw f(e,r)}})))))}return e=p(e),t=t||{},r.toJSON=function(){var r="["+h(e)+"]";return t.length!==undefined?r+="{"+t.length+"}":t.minLength===undefined&&t.maxLength===undefined||(r+="{"+(t.minLength===undefined?0:t.minLength)+","+(t.maxLength===undefined?1/0:t.maxLength)+"}"),r},r},maybe:function e(t){function r(r,i){return a.Nil(r)||t(r,i,e)}return t=p(t),r.toJSON=function(){return"?"+h(t)},r},map:function(e,t){function r(r,i){if(!a.Object(r))return!1;if(a.Nil(r))return!1;for(var s in r){try{t&&b(t,s,i)}catch(e){throw f(e,s,"key")}try{var n=r[s];b(e,n,i)}catch(e){throw f(e,s)}}return!0}return e=p(e),t&&(t=p(t)),r.toJSON=t?function(){return"{"+h(t)+": "+h(e)+"}"}:function(){return"{"+h(e)+"}"},r},object:function(e){var t={};for(var r in e)t[r]=p(e[r]);function i(e,r){if(!a.Object(e))return!1;if(a.Nil(e))return!1;var i;try{for(i in t){b(t[i],e[i],r)}}catch(e){throw f(e,i)}if(r)for(i in e)if(!t[i])throw new u(undefined,i);return!0}return i.toJSON=function(){return h(t)},i},anyOf:function(){var e=[].slice.call(arguments).map(p);function t(t,r){return e.some(function(e){try{return b(e,t,r)}catch(e){return!1}})}return t.toJSON=function(){return e.map(h).join("|")},t},allOf:function(){var e=[].slice.call(arguments).map(p);function t(t,r){return e.every(function(e){try{return b(e,t,r)}catch(e){return!1}})}return t.toJSON=function(){return e.map(h).join(" & ")},t},quacksLike:function(e){function t(t){return e===l(t)}return t.toJSON=function(){return e},t},tuple:function(){var e=[].slice.call(arguments).map(p);function t(t,r){return!a.Nil(t)&&(!a.Nil(t.length)&&((!r||t.length===e.length)&&e.every(function(e,i){try{return b(e,t[i],r)}catch(e){throw f(e,i)}})))}return t.toJSON=function(){return"("+e.map(h).join(", ")+")"},t},value:function(e){function t(t){return t===e}return t.toJSON=function(){return e},t}};function p(e){if(a.String(e))return"?"===e[0]?d.maybe(e.slice(1)):a[e]||d.quacksLike(e);if(e&&a.Object(e)){if(a.Array(e)){if(1!==e.length)throw new TypeError("Expected compile() parameter of type Array of length 1");return d.arrayOf(e[0])}return d.object(e)}return a.Function(e)?e:d.value(e)}function b(e,t,r,i){if(a.Function(e)){if(e(t,r))return!0;throw new c(i||e,t)}return b(p(e),t,r)}for(var g in d.oneOf=d.anyOf,a)b[g]=a[g];for(g in d)b[g]=d[g];var m=__browser_require__(435,r);for(g in m)b[g]=m[g];b.compile=p,b.TfTypeError=c,b.TfPropertyTypeError=u,r.exports=b}],["typeforce","/errors.js",function(e,t,r,i,s,n){var o=__browser_require__(434,r);function a(e){return e.name||e.toString().match(/function (.*?)\s*\(/)[1]}function h(e){return o.Nil(e)?"":a(e.constructor)}function c(e,t){Error.captureStackTrace&&Error.captureStackTrace(e,t)}function u(e){return o.Function(e)?e.toJSON?e.toJSON():a(e):o.Array(e)?"Array":e&&o.Object(e)?"Object":e!==undefined?e:""}function f(e,t,r){var i=function(e){return o.Function(e)?"":o.String(e)?JSON.stringify(e):e&&o.Object(e)?"":e}(t);return"Expected "+u(e)+", got"+(""!==r?" "+r:"")+(""!==i?" "+i:"")}function l(e,t,r){r=r||h(t),this.message=f(e,t,r),c(this,l),this.__type=e,this.__value=t,this.__valueTypeName=r}function d(e,t,r,i,s){e?(s=s||h(i),this.message=function(e,t,r,i,s){var n='" of type ';return"key"===t&&(n='" with key type '),f('property "'+u(r)+n+u(e),i,s)}(e,r,t,i,s)):this.message='Unexpected property "'+t+'"',c(this,l),this.__label=r,this.__property=t,this.__type=e,this.__value=i,this.__valueTypeName=s}l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,d.prototype=Object.create(Error.prototype),d.prototype.constructor=l,r.exports={TfTypeError:l,TfPropertyTypeError:d,tfCustomError:function(e,t){return new l(e,{},t)},tfSubError:function(e,t,r){return e instanceof d?(t=t+"."+e.__property,e=new d(e.__type,t,e.__label,e.__value,e.__valueTypeName)):e instanceof l&&(e=new d(e.__type,t,r,e.__value,e.__valueTypeName)),c(e),e},tfJSON:u,getValueTypeName:h}}],["typeforce","/native.js",function(e,t,r,i,s,n){var o={Array:function(e){return null!==e&&e!==undefined&&e.constructor===Array},Boolean:function(e){return"boolean"==typeof e},Function:function(e){return"function"==typeof e},Nil:function(e){return e===undefined||null===e},Number:function(e){return"number"==typeof e},Object:function(e){return"object"==typeof e},String:function(e){return"string"==typeof e},"":function(){return!0}};for(var a in o.Null=o.Nil,o)o[a].toJSON=function(e){return e}.bind(null,a);r.exports=o}],["typeforce","/extra.js",function(e,t,r,i,s,n){var o=__browser_require__(434,r),a=__browser_require__(433,r);function h(e){return null!=e&&!0===e._isBuffer}function c(e){return"string"==typeof e&&/^([0-9a-f]{2})+$/i.test(e)}function u(e,t){var r=e.toJSON();function i(i){if(!e(i))return!1;if(i.length===t)return!0;throw a.tfCustomError(r+"(Length: "+t+")",r+"(Length: "+i.length+")")}return i.toJSON=function(){return r},i}var f=u.bind(null,o.Array),l=u.bind(null,h),d=u.bind(null,c),p=u.bind(null,o.String);var b=Math.pow(2,53)-1;var g={ArrayN:f,Buffer:h,BufferN:l,Finite:function(e){return"number"==typeof e&&isFinite(e)},Hex:c,HexN:d,Int8:function(e){return e<<24>>24===e},Int16:function(e){return e<<16>>16===e},Int32:function(e){return(0|e)===e},Int53:function(e){return"number"==typeof e&&e>=-b&&e<=b&&Math.floor(e)===e},Range:function(e,t,r){function i(i,s){return r(i,s)&&i>e&&i<t}return r=r||o.Number,i.toJSON=function(){return`${r.toJSON()} between [${e}, ${t}]`},i},StringN:p,UInt8:function(e){return(255&e)===e},UInt16:function(e){return(65535&e)===e},UInt32:function(e){return e>>>0===e},UInt53:function(e){return"number"==typeof e&&e>=0&&e<=b&&Math.floor(e)===e}};for(var m in g)g[m].toJSON=function(e){return e}.bind(null,m);r.exports=g}],["@trezor/utxo-lib","/src/types.js",function(e,t,r,i,s,n){var o=__browser_require__(432,r),a=Math.pow(2,31)-1;function h(e){return o.String(e)&&e.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}h.toJSON=function(){return"BIP32 derivation path"};var c=21e14;var u=o.quacksLike("BigInteger"),f=o.quacksLike("Point"),l=o.compile({r:u,s:u}),d=o.oneOf(o.UInt8,o.UInt16),p=o.compile({messagePrefix:o.oneOf(o.Buffer,o.String),bip32:{public:o.UInt32,private:o.UInt32},pubKeyHash:d,scriptHash:d,wif:o.UInt8}),b={BigInt:u,BIP32Path:h,Buffer256bit:o.BufferN(32),ECPoint:f,ECSignature:l,Hash160bit:o.BufferN(20),Hash256bit:o.BufferN(32),Network:p,Satoshi:function(e){return o.UInt53(e)&&e<=c},UInt31:function(e){return o.UInt32(e)&&e<=a},NetworkVersion:d};for(var g in o)b[g]=o[g];r.exports=b}],["@trezor/utxo-lib","/src/script_number.js",function(e,t,r,i,s,n){var o=__browser_require__(425,r).Buffer;r.exports={decode:function(e,t,r){t=t||4,r=r===undefined||r;var i=e.length;if(0===i)return 0;if(i>t)throw new TypeError("Script number overflow");if(r&&0==(127&e[i-1])&&(i<=1||0==(128&e[i-2])))throw new Error("Non-minimally encoded script number");if(5===i){var s=e.readUInt32LE(0),n=e.readUInt8(4);return 128&n?-(4294967296*(-129&n)+s):4294967296*n+s}for(var o=0,a=0;a<i;++a)o|=e[a]<<8*a;return 128&e[i-1]?-(o&~(128<<8*(i-1))):o},encode:function(e){for(var t=Math.abs(e),r=function(e){return e>2147483647?5:e>8388607?4:e>32767?3:e>127?2:e>0?1:0}(t),i=o.allocUnsafe(r),s=e<0,n=0;n<r;++n)i.writeUInt8(255&t,n),t>>=8;return 128&i[r-1]?i.writeUInt8(s?128:0,r-1):s&&(i[r-1]|=128),i}}}],["bitcoin-ops","/map.js",function(e,t,r,i,s,n){var o=__browser_require__(431,r),a={};for(var h in o){a[o[h]]=h}r.exports=a}],["@trezor/utxo-lib","/src/templates/index.js",function(e,t,r,i,s,n){var o=__browser_require__(428,r).decompile,a=__browser_require__(440,r),h=__browser_require__(443,r),c=__browser_require__(444,r),u=__browser_require__(447,r),f=__browser_require__(450,r),l=__browser_require__(455,r),d=__browser_require__(457,r),p=__browser_require__(459,r),b={MULTISIG:"multisig",NONSTANDARD:"nonstandard",NULLDATA:"nulldata",P2PK:"pubkey",P2PKH:"pubkeyhash",P2SH:"scripthash",P2WPKH:"witnesspubkeyhash",P2WSH:"witnessscripthash",WITNESS_COMMITMENT:"witnesscommitment"};r.exports={classifyInput:function(e,t){var r=o(e);return u.input.check(r)?b.P2PKH:f.input.check(r,t)?b.P2SH:a.input.check(r,t)?b.MULTISIG:c.input.check(r)?b.P2PK:b.NONSTANDARD},classifyOutput:function(e){if(l.output.check(e))return b.P2WPKH;if(d.output.check(e))return b.P2WSH;if(u.output.check(e))return b.P2PKH;if(f.output.check(e))return b.P2SH;var t=o(e);return a.output.check(t)?b.MULTISIG:c.output.check(t)?b.P2PK:p.output.check(t)?b.WITNESS_COMMITMENT:h.output.check(t)?b.NULLDATA:b.NONSTANDARD},classifyWitness:function(e,t){var r=o(e);return l.input.check(r)?b.P2WPKH:d.input.check(r,t)?b.P2WSH:b.NONSTANDARD},multisig:a,nullData:h,pubKey:c,pubKeyHash:u,scriptHash:f,witnessPubKeyHash:l,witnessScriptHash:d,witnessCommitment:p,types:b}}],["@trezor/utxo-lib","/src/templates/multisig/index.js",function(e,t,r,i,s,n){r.exports={input:__browser_require__(441,r),output:__browser_require__(442,r)}}],["@trezor/utxo-lib","/src/templates/multisig/input.js",function(e,t,r,i,s,n){var o=__browser_require__(425,r).Buffer,a=__browser_require__(428,r),h=__browser_require__(442,r),c=__browser_require__(432,r),u=__browser_require__(431,r);function f(e){return e===u.OP_0||a.isCanonicalSignature(e)}function l(e,t){var r=a.decompile(e);return!(r.length<2)&&(r[0]===u.OP_0&&(t?r.slice(1).every(f):r.slice(1).every(a.isCanonicalSignature)))}l.toJSON=function(){return"multisig input"};var d=o.allocUnsafe(0);function p(e,t){if(c([f],e),t){var r=h.decode(t);if(e.length<r.m)throw new TypeError("Not enough signatures provided");if(e.length>r.pubKeys.length)throw new TypeError("Too many signatures provided")}return[].concat(d,e.map(function(e){return e===u.OP_0?d:e}))}function b(e,t){return c(l,e,t),e.slice(1)}r.exports={check:l,decode:function(e,t){return b(a.decompile(e),t)},decodeStack:b,encode:function(e,t){return a.compile(p(e,t))},encodeStack:p}}],["@trezor/utxo-lib","/src/templates/multisig/output.js",function(e,t,r,i,s,n){var o=__browser_require__(428,r),a=__browser_require__(436,r),h=__browser_require__(432,r),c=__browser_require__(431,r),u=c.OP_RESERVED;function f(e,t){var r=o.decompile(e);if(r.length<4)return!1;if(r[r.length-1]!==c.OP_CHECKMULTISIG)return!1;if(!a.Number(r[0]))return!1;if(!a.Number(r[r.length-2]))return!1;var i=r[0]-u,s=r[r.length-2]-u;return!(i<=0)&&(!(s>16)&&(!(i>s)&&(s===r.length-3&&(!!t||r.slice(1,-2).every(o.isCanonicalPubKey)))))}f.toJSON=function(){return"multi-sig output"},r.exports={check:f,decode:function(e,t){var r=o.decompile(e);return h(f,r,t),{m:r[0]-u,pubKeys:r.slice(1,-2)}},encode:function(e,t){h({m:a.Number,pubKeys:[o.isCanonicalPubKey]},{m:e,pubKeys:t});var r=t.length;if(r<e)throw new TypeError("Not enough pubKeys provided");return o.compile([].concat(u+e,t,u+r,c.OP_CHECKMULTISIG))}}}],["@trezor/utxo-lib","/src/templates/nulldata.js",function(e,t,r,i,s,n){var o=__browser_require__(428,r),a=__browser_require__(436,r),h=__browser_require__(432,r),c=__browser_require__(431,r);function u(e){var t=o.compile(e);return t.length>1&&t[0]===c.OP_RETURN}u.toJSON=function(){return"null data output"},r.exports={output:{check:u,decode:function(e){h(u,e);var t=o.decompile(e);return t.shift(),1===t.length?t[0]:t},encode:function(e){return h(h.oneOf(a.Buffer,a.Array),e),o.compile([c.OP_RETURN].concat(e))}}}}],["@trezor/utxo-lib","/src/templates/pubkey/index.js",function(e,t,r,i,s,n){r.exports={input:__browser_require__(445,r),output:__browser_require__(446,r)}}],["@trezor/utxo-lib","/src/templates/pubkey/input.js",function(e,t,r,i,s,n){var o=__browser_require__(428,r),a=__browser_require__(432,r);function h(e){var t=o.decompile(e);return 1===t.length&&o.isCanonicalSignature(t[0])}function c(e){return a(o.isCanonicalSignature,e),[e]}function u(e){return a(h,e),e[0]}h.toJSON=function(){return"pubKey input"},r.exports={check:h,decode:function(e){return u(o.decompile(e))},decodeStack:u,encode:function(e){return o.compile(c(e))},encodeStack:c}}],["@trezor/utxo-lib","/src/templates/pubkey/output.js",function(e,t,r,i,s,n){var o=__browser_require__(428,r),a=__browser_require__(432,r),h=__browser_require__(431,r);function c(e){var t=o.decompile(e);return 2===t.length&&o.isCanonicalPubKey(t[0])&&t[1]===h.OP_CHECKSIG}c.toJSON=function(){return"pubKey output"},r.exports={check:c,decode:function(e){var t=o.decompile(e);return a(c,t),t[0]},encode:function(e){return a(o.isCanonicalPubKey,e),o.compile([e,h.OP_CHECKSIG])}}}],["@trezor/utxo-lib","/src/templates/pubkeyhash/index.js",function(e,t,r,i,s,n){r.exports={input:__browser_require__(448,r),output:__browser_require__(449,r)}}],["@trezor/utxo-lib","/src/templates/pubkeyhash/input.js",function(e,t,r,i,s,n){var o=__browser_require__(428,r),a=__browser_require__(432,r);function h(e){var t=o.decompile(e);return 2===t.length&&o.isCanonicalSignature(t[0])&&o.isCanonicalPubKey(t[1])}function c(e,t){return a({signature:o.isCanonicalSignature,pubKey:o.isCanonicalPubKey},{signature:e,pubKey:t}),[e,t]}function u(e){return a(h,e),{signature:e[0],pubKey:e[1]}}h.toJSON=function(){return"pubKeyHash input"},r.exports={check:h,decode:function(e){return u(o.decompile(e))},decodeStack:u,encode:function(e,t){return o.compile(c(e,t))},encodeStack:c}}],["@trezor/utxo-lib","/src/templates/pubkeyhash/output.js",function(e,t,r,i,s,n){var o=__browser_require__(428,r),a=__browser_require__(436,r),h=__browser_require__(432,r),c=__browser_require__(431,r);function u(e){var t=o.compile(e);return 25===t.length&&t[0]===c.OP_DUP&&t[1]===c.OP_HASH160&&20===t[2]&&t[23]===c.OP_EQUALVERIFY&&t[24]===c.OP_CHECKSIG}u.toJSON=function(){return"pubKeyHash output"},r.exports={check:u,decode:function(e){return h(u,e),e.slice(3,23)},encode:function(e){return h(a.Hash160bit,e),o.compile([c.OP_DUP,c.OP_HASH160,e,c.OP_EQUALVERIFY,c.OP_CHECKSIG])}}}],["@trezor/utxo-lib","/src/templates/scripthash/index.js",function(e,t,r,i,s,n){r.exports={input:__browser_require__(451,r),output:__browser_require__(454,r)}}],["@trezor/utxo-lib","/src/templates/scripthash/input.js",function(e,t,r,i,s,n){__browser_require__(425,r).Buffer;var o=__browser_require__(428,r),a=__browser_require__(432,r),h=__browser_require__(440,r),c=__browser_require__(444,r),u=__browser_require__(447,r),f=__browser_require__(452,r),l=__browser_require__(453,r);function d(e,t){var r=o.decompile(e);if(r.length<1)return!1;var i=r[r.length-1];if(null==i||!0!==i._isBuffer)return!1;var s=o.decompile(o.compile(r.slice(0,-1))),n=o.decompile(i);return 0!==n.length&&(!!o.isPushOnly(s)&&(1===r.length?l.check(n)||f.check(n):!(!u.input.check(s)||!u.output.check(n))||(!(!h.input.check(s,t)||!h.output.check(n))||!(!c.input.check(s)||!c.output.check(n)))))}function p(e,t){var r=o.compile(t);return[].concat(e,r)}function b(e){return a(d,e),{redeemScriptStack:e.slice(0,-1),redeemScript:e[e.length-1]}}d.toJSON=function(){return"scriptHash input"},r.exports={check:d,decode:function(e){var t=b(o.decompile(e));return t.redeemScriptSig=o.compile(t.redeemScriptStack),delete t.redeemScriptStack,t},decodeStack:b,encode:function(e,t){var r=o.decompile(e);return o.compile(p(r,t))},encodeStack:p}}],["@trezor/utxo-lib","/src/templates/witnesspubkeyhash/output.js",function(e,t,r,i,s,n){var o=__browser_require__(428,r),a=__browser_require__(436,r),h=__browser_require__(432,r),c=__browser_require__(431,r);function u(e){var t=o.compile(e);return 22===t.length&&t[0]===c.OP_0&&20===t[1]}u.toJSON=function(){return"Witness pubKeyHash output"},r.exports={check:u,decode:function(e){return h(u,e),e.slice(2)},encode:function(e){return h(a.Hash160bit,e),o.compile([c.OP_0,e])}}}],["@trezor/utxo-lib","/src/templates/witnessscripthash/output.js",function(e,t,r,i,s,n){var o=__browser_require__(428,r),a=__browser_require__(436,r),h=__browser_require__(432,r),c=__browser_require__(431,r);function u(e){var t=o.compile(e);return 34===t.length&&t[0]===c.OP_0&&32===t[1]}u.toJSON=function(){return"Witness scriptHash output"},r.exports={check:u,decode:function(e){return h(u,e),e.slice(2)},encode:function(e){return h(a.Hash256bit,e),o.compile([c.OP_0,e])}}}],["@trezor/utxo-lib","/src/templates/scripthash/output.js",function(e,t,r,i,s,n){var o=__browser_require__(428,r),a=__browser_require__(436,r),h=__browser_require__(432,r),c=__browser_require__(431,r);function u(e){var t=o.compile(e);return 23===t.length&&t[0]===c.OP_HASH160&&20===t[1]&&t[22]===c.OP_EQUAL}u.toJSON=function(){return"scriptHash output"},r.exports={check:u,decode:function(e){return h(u,e),e.slice(2,22)},encode:function(e){return h(a.Hash160bit,e),o.compile([c.OP_HASH160,e,c.OP_EQUAL])}}}],["@trezor/utxo-lib","/src/templates/witnesspubkeyhash/index.js",function(e,t,r,i,s,n){r.exports={input:__browser_require__(456,r),output:__browser_require__(452,r)}}],["@trezor/utxo-lib","/src/templates/witnesspubkeyhash/input.js",function(e,t,r,i,s,n){var o=__browser_require__(428,r),a=__browser_require__(432,r);function h(e){return o.isCanonicalPubKey(e)&&33===e.length}function c(e){var t=o.decompile(e);return 2===t.length&&o.isCanonicalSignature(t[0])&&h(t[1])}c.toJSON=function(){return"witnessPubKeyHash input"},r.exports={check:c,decodeStack:function(e){return a(c,e),{signature:e[0],pubKey:e[1]}},encodeStack:function(e,t){return a({signature:o.isCanonicalSignature,pubKey:h},{signature:e,pubKey:t}),[e,t]}}}],["@trezor/utxo-lib","/src/templates/witnessscripthash/index.js",function(e,t,r,i,s,n){r.exports={input:__browser_require__(458,r),output:__browser_require__(453,r)}}],["@trezor/utxo-lib","/src/templates/witnessscripthash/input.js",function(e,t,r,i,s,n){var o=__browser_require__(428,r),a=__browser_require__(436,r),h=__browser_require__(432,r),c=__browser_require__(440,r),u=__browser_require__(444,r),f=__browser_require__(447,r);function l(e,t){if(h(a.Array,e),e.length<1)return!1;var r=e[e.length-1];if(null==r||!0!==r._isBuffer)return!1;var i=o.decompile(r);if(0===i.length)return!1;var s=o.compile(e.slice(0,-1));return!(!f.input.check(s)||!f.output.check(i))||(!(!c.input.check(s,t)||!c.output.check(i))||!(!u.input.check(s)||!u.output.check(i)))}l.toJSON=function(){return"witnessScriptHash input"},r.exports={check:l,decodeStack:function(e){return h(l,e),{witnessData:e.slice(0,-1),witnessScript:e[e.length-1]}},encodeStack:function(e,t){return h({witnessData:[a.Buffer],witnessScript:a.Buffer},{witnessData:e,witnessScript:t}),[].concat(e,t)}}}],["@trezor/utxo-lib","/src/templates/witnesscommitment/index.js",function(e,t,r,i,s,n){r.exports={output:__browser_require__(460,r)}}],["@trezor/utxo-lib","/src/templates/witnesscommitment/output.js",function(e,t,r,i,s,n){var o=__browser_require__(425,r).Buffer,a=__browser_require__(428,r),h=__browser_require__(436,r),c=__browser_require__(432,r),u=__browser_require__(431,r),f=o.from("aa21a9ed","hex");function l(e){var t=a.compile(e);return t.length>37&&t[0]===u.OP_RETURN&&36===t[1]&&t.slice(2,6).equals(f)}l.toJSON=function(){return"Witness commitment output"},r.exports={check:l,decode:function(e){return c(l,e),a.decompile(e)[1].slice(4,36)},encode:function(e){c(h.Hash256bit,e);var t=o.allocUnsafe(36);return f.copy(t,0),e.copy(t,4),a.compile([u.OP_RETURN,t])}}}],["@trezor/utxo-lib","/src/bufferutils.js",function(e,t,r,i,s,n){var o=__browser_require__(430,r),a=__browser_require__(462,r),h=__browser_require__(463,r);function c(e,t){if("number"!=typeof e)throw new Error("cannot write a non-number as a number");if(e<0)throw new Error("specified a negative value for writing an unsigned value");if(e>t)throw new Error("RangeError: value out of range");if(Math.floor(e)!==e)throw new Error("value has a fractional component")}function u(e,t){var r=e.readUInt32LE(t),i=e.readUInt32LE(t+4);return c((i*=4294967296)+r,9007199254740991),i+r}function f(e,t,r){return c(t,9007199254740991),e.writeInt32LE(-1&t,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}r.exports={pushDataSize:o.encodingLength,readPushDataInt:o.decode,readUInt64LE:u,readUInt64LEasString:function(e,t){try{return u(e,t).toString()}catch(a){var r=e.readUInt32LE(t),i=e.readUInt32LE(t+4),s=new h(Number(4294967296).toString()),n=new h(r.toString()),o=new h(i.toString()).multiply(s);return n.add(o).toString()}},readInt64LE:function(e,t){var r=e.readUInt32LE(t),i=e.readInt32LE(t+4);return(i*=4294967296)+r},readVarInt:function(e,t){return{number:a.decode(e,t),size:a.decode.bytes}},varIntBuffer:a.encode,varIntSize:a.encodingLength,writePushDataInt:o.encode,writeUInt64LE:f,writeUInt64LEasString:function(e,t,r){return"string"!=typeof t?f(e,t,r):(e.writeInt32LE(-1&t,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8)},writeVarInt:function(e,t,r){return a.encode(t,e,r),a.encode.bytes}}}],["varuint-bitcoin","/index.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(425,r).Buffer,a=9007199254740991;function h(e){if(e<0||e>a||e%1!=0)throw new RangeError("value out of range")}function c(e){return h(e),e<253?1:e<=65535?3:e<=4294967295?5:9}r.exports={encode:function e(t,r,i){if(h(t),r||(r=o.allocUnsafe(c(t))),null==r||!0!==r._isBuffer)throw new TypeError("buffer must be a Buffer instance");return i||(i=0),t<253?(r.writeUInt8(t,i),e.bytes=1):t<=65535?(r.writeUInt8(253,i),r.writeUInt16LE(t,i+1),e.bytes=3):t<=4294967295?(r.writeUInt8(254,i),r.writeUInt32LE(t,i+1),e.bytes=5):(r.writeUInt8(255,i),r.writeUInt32LE(t>>>0,i+1),r.writeUInt32LE(t/4294967296|0,i+5),e.bytes=9),r},decode:function e(t,r){if(null==t||!0!==t._isBuffer)throw new TypeError("buffer must be a Buffer instance");r||(r=0);var i=t.readUInt8(r);if(i<253)return e.bytes=1,i;if(253===i)return e.bytes=3,t.readUInt16LE(r+1);if(254===i)return e.bytes=5,t.readUInt32LE(r+1);e.bytes=9;var s=t.readUInt32LE(r+1),n=4294967296*t.readUInt32LE(r+5)+s;return h(n),n},encodingLength:c}}],["bigi","/lib/index.js",function(e,t,r,i,s,n){var o=__browser_require__(464,r);__browser_require__(466,r),r.exports=o}],["bigi","/lib/bigi.js",function(e,t,r,i,s,n){function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}var a=o.prototype;a.__bigi=__browser_require__(465,r).version,o.isBigInteger=function(e,t){return e&&e.__bigi&&(!t||e.__bigi===a.__bigi)},o.prototype.am=function(e,t,r,i,s,n){for(;--n>=0;){var o=t*this[e++]+r[i]+s;s=Math.floor(o/67108864),r[i++]=67108863&o}return s},o.prototype.DB=26,o.prototype.DM=67108863;var h=o.prototype.DV=1<<26;o.prototype.FV=Math.pow(2,52),o.prototype.F1=26,o.prototype.F2=0;var c,u,f="0123456789abcdefghijklmnopqrstuvwxyz",l=new Array;for(c="0".charCodeAt(0),u=0;u<=9;++u)l[c++]=u;for(c="a".charCodeAt(0),u=10;u<36;++u)l[c++]=u;for(c="A".charCodeAt(0),u=10;u<36;++u)l[c++]=u;function d(e){return f.charAt(e)}function p(e,t){var r=l[e.charCodeAt(t)];return null==r?-1:r}function b(e){var t=new o;return t.fromInt(e),t}function g(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function m(e){this.m=e}function _(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function w(e,t){return e&t}function y(e,t){return e|t}function v(e,t){return e^t}function E(e,t){return e&~t}function S(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function I(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function k(){}function A(e){return e}function O(e){this.r2=new o,this.q3=new o,o.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}m.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},m.prototype.revert=function(e){return e},m.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},m.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},m.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},_.prototype.convert=function(e){var t=new o;return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(o.ZERO)>0&&this.m.subTo(t,t),t},_.prototype.revert=function(e){var t=new o;return e.copyTo(t),this.reduce(t),t},_.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],i=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,i,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},_.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},_.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},a.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},a.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+h:this.t=0},a.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var i=e.length,s=!1,n=0;--i>=0;){var a=8==r?255&e[i]:p(e,i);a<0?"-"==e.charAt(i)&&(s=!0):(s=!1,0==n?this[this.t++]=a:n+r>this.DB?(this[this.t-1]|=(a&(1<<this.DB-n)-1)<<n,this[this.t++]=a>>this.DB-n):this[this.t-1]|=a<<n,(n+=r)>=this.DB&&(n-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,n>0&&(this[this.t-1]|=(1<<this.DB-n)-1<<n)),this.clamp(),s&&o.ZERO.subTo(this,this)},a.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},a.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s},a.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},a.lShiftTo=function(e,t){var r,i=e%this.DB,s=this.DB-i,n=(1<<s)-1,o=Math.floor(e/this.DB),a=this.s<<i&this.DM;for(r=this.t-1;r>=0;--r)t[r+o+1]=this[r]>>s|a,a=(this[r]&n)<<i;for(r=o-1;r>=0;--r)t[r]=0;t[o]=a,t.t=this.t+o+1,t.s=this.s,t.clamp()},a.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var i=e%this.DB,s=this.DB-i,n=(1<<i)-1;t[0]=this[r]>>i;for(var o=r+1;o<this.t;++o)t[o-r-1]|=(this[o]&n)<<s,t[o-r]=this[o]>>i;i>0&&(t[this.t-r-1]|=(this.s&n)<<s),t.t=this.t-r,t.clamp()}},a.subTo=function(e,t){for(var r=0,i=0,s=Math.min(e.t,this.t);r<s;)i+=this[r]-e[r],t[r++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<e.t;)i-=e[r],t[r++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=i<0?-1:0,i<-1?t[r++]=this.DV+i:i>0&&(t[r++]=i),t.t=r,t.clamp()},a.multiplyTo=function(e,t){var r=this.abs(),i=e.abs(),s=r.t;for(t.t=s+i.t;--s>=0;)t[s]=0;for(s=0;s<i.t;++s)t[s+r.t]=r.am(0,i[s],t,s,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&o.ZERO.subTo(t,t)},a.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var i=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,i,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},a.divRemTo=function(e,t,r){var i=e.abs();if(!(i.t<=0)){var s=this.abs();if(s.t<i.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=new o);var n=new o,a=this.s,h=e.s,c=this.DB-g(i[i.t-1]);c>0?(i.lShiftTo(c,n),s.lShiftTo(c,r)):(i.copyTo(n),s.copyTo(r));var u=n.t,f=n[u-1];if(0!=f){var l=f*(1<<this.F1)+(u>1?n[u-2]>>this.F2:0),d=this.FV/l,p=(1<<this.F1)/l,b=1<<this.F2,m=r.t,_=m-u,w=null==t?new o:t;for(n.dlShiftTo(_,w),r.compareTo(w)>=0&&(r[r.t++]=1,r.subTo(w,r)),o.ONE.dlShiftTo(u,w),w.subTo(n,n);n.t<u;)n[n.t++]=0;for(;--_>=0;){var y=r[--m]==f?this.DM:Math.floor(r[m]*d+(r[m-1]+b)*p);if((r[m]+=n.am(0,y,r,_,0,u))<y)for(n.dlShiftTo(_,w),r.subTo(w,r);r[m]<--y;)r.subTo(w,r)}null!=t&&(r.drShiftTo(u,t),a!=h&&o.ZERO.subTo(t,t)),r.t=u,r.clamp(),c>0&&r.rShiftTo(c,r),a<0&&o.ZERO.subTo(r,r)}}},a.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},a.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},a.exp=function(e,t){if(e>4294967295||e<1)return o.ONE;var r=new o,i=new o,s=t.convert(this),n=g(e)-1;for(s.copyTo(r);--n>=0;)if(t.sqrTo(r,i),(e&1<<n)>0)t.mulTo(i,s,r);else{var a=r;r=i,i=a}return t.revert(r)},a.toString=function(e){var t;if(this.s<0)return"-"+this.negate().toString(e);if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,i=(1<<t)-1,s=!1,n="",o=this.t,a=this.DB-o*this.DB%t;if(o-- >0)for(a<this.DB&&(r=this[o]>>a)>0&&(s=!0,n=d(r));o>=0;)a<t?(r=(this[o]&(1<<a)-1)<<t-a,r|=this[--o]>>(a+=this.DB-t)):(r=this[o]>>(a-=t)&i,a<=0&&(a+=this.DB,--o)),r>0&&(s=!0),s&&(n+=d(r));return s?n:"0"},a.negate=function(){var e=new o;return o.ZERO.subTo(this,e),e},a.abs=function(){return this.s<0?this.negate():this},a.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0},a.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+g(this[this.t-1]^this.s&this.DM)},a.byteLength=function(){return this.bitLength()>>3},a.mod=function(e){var t=new o;return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(o.ZERO)>0&&e.subTo(t,t),t},a.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new m(t):new _(t),this.exp(e,r)},k.prototype.convert=A,k.prototype.revert=A,k.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},k.prototype.sqrTo=function(e,t){e.squareTo(t)},O.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=new o;return e.copyTo(t),this.reduce(t),t},O.prototype.revert=function(e){return e},O.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},O.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},O.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var x=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],R=(1<<26)/x[x.length-1];a.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},a.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),i=b(r),s=new o,n=new o,a="";for(this.divRemTo(i,s,n);s.signum()>0;)a=(r+n.intValue()).toString(e).substr(1)+a,s.divRemTo(i,s,n);return n.intValue().toString(e)+a},a.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),i=Math.pow(t,r),s=!1,n=0,a=0,h=0;h<e.length;++h){var c=p(e,h);c<0?"-"==e.charAt(h)&&0==this.signum()&&(s=!0):(a=t*a+c,++n>=r&&(this.dMultiply(i),this.dAddOffset(a,0),n=0,a=0))}n>0&&(this.dMultiply(Math.pow(t,n)),this.dAddOffset(a,0)),s&&o.ZERO.subTo(this,this)},a.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(o.ONE.shiftLeft(e-1),y,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(o.ONE.shiftLeft(e-1),this);else{var i=new Array,s=7&e;i.length=1+(e>>3),t.nextBytes(i),s>0?i[0]&=(1<<s)-1:i[0]=0,this.fromString(i,256)}},a.bitwiseTo=function(e,t,r){var i,s,n=Math.min(e.t,this.t);for(i=0;i<n;++i)r[i]=t(this[i],e[i]);if(e.t<this.t){for(s=e.s&this.DM,i=n;i<this.t;++i)r[i]=t(this[i],s);r.t=this.t}else{for(s=this.s&this.DM,i=n;i<e.t;++i)r[i]=t(s,e[i]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},a.changeBit=function(e,t){var r=o.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},a.addTo=function(e,t){for(var r=0,i=0,s=Math.min(e.t,this.t);r<s;)i+=this[r]+e[r],t[r++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<e.t;)i+=e[r],t[r++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=i<0?-1:0,i>0?t[r++]=i:i<-1&&(t[r++]=this.DV+i),t.t=r,t.clamp()},a.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},a.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},a.multiplyLowerTo=function(e,t,r){var i,s=Math.min(this.t+e.t,t);for(r.s=0,r.t=s;s>0;)r[--s]=0;for(i=r.t-this.t;s<i;++s)r[s+this.t]=this.am(0,e[s],r,s,0,this.t);for(i=Math.min(e.t,t);s<i;++s)this.am(0,e[s],r,s,0,t-s);r.clamp()},a.multiplyUpperTo=function(e,t,r){--t;var i=r.t=this.t+e.t-t;for(r.s=0;--i>=0;)r[i]=0;for(i=Math.max(t-this.t,0);i<e.t;++i)r[this.t+i-t]=this.am(t-i,e[i],r,0,0,this.t+i-t);r.clamp(),r.drShiftTo(1,r)},a.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this[0]%e;else for(var i=this.t-1;i>=0;--i)r=(t*r+this[i])%e;return r},a.millerRabin=function(e){var t=this.subtract(o.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var i=t.shiftRight(r);(e=e+1>>1)>x.length&&(e=x.length);for(var s=new o(null),n=[],a=0;a<e;++a){for(;c=x[Math.floor(Math.random()*x.length)],-1!=n.indexOf(c););n.push(c),s.fromInt(c);var h=s.modPow(i,this);if(0!=h.compareTo(o.ONE)&&0!=h.compareTo(t)){for(var c=1;c++<r&&0!=h.compareTo(t);)if(0==(h=h.modPowInt(2,this)).compareTo(o.ONE))return!1;if(0!=h.compareTo(t))return!1}}return!0},a.clone=function(){var e=new o;return this.copyTo(e),e},a.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},a.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},a.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},a.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},a.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,i=this.DB-e*this.DB%8,s=0;if(e-- >0)for(i<this.DB&&(r=this[e]>>i)!=(this.s&this.DM)>>i&&(t[s++]=r|this.s<<this.DB-i);e>=0;)i<8?(r=(this[e]&(1<<i)-1)<<8-i,r|=this[--e]>>(i+=this.DB-8)):(r=this[e]>>(i-=8)&255,i<=0&&(i+=this.DB,--e)),0!=(128&r)&&(r|=-256),0===s&&(128&this.s)!=(128&r)&&++s,(s>0||r!=this.s)&&(t[s++]=r);return t},a.equals=function(e){return 0==this.compareTo(e)},a.min=function(e){return this.compareTo(e)<0?this:e},a.max=function(e){return this.compareTo(e)>0?this:e},a.and=function(e){var t=new o;return this.bitwiseTo(e,w,t),t},a.or=function(e){var t=new o;return this.bitwiseTo(e,y,t),t},a.xor=function(e){var t=new o;return this.bitwiseTo(e,v,t),t},a.andNot=function(e){var t=new o;return this.bitwiseTo(e,E,t),t},a.not=function(){for(var e=new o,t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},a.shiftLeft=function(e){var t=new o;return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},a.shiftRight=function(e){var t=new o;return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},a.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+S(this[e]);return this.s<0?this.t*this.DB:-1},a.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=I(this[r]^t);return e},a.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},a.setBit=function(e){return this.changeBit(e,y)},a.clearBit=function(e){return this.changeBit(e,E)},a.flipBit=function(e){return this.changeBit(e,v)},a.add=function(e){var t=new o;return this.addTo(e,t),t},a.subtract=function(e){var t=new o;return this.subTo(e,t),t},a.multiply=function(e){var t=new o;return this.multiplyTo(e,t),t},a.divide=function(e){var t=new o;return this.divRemTo(e,t,null),t},a.remainder=function(e){var t=new o;return this.divRemTo(e,null,t),t},a.divideAndRemainder=function(e){var t=new o,r=new o;return this.divRemTo(e,t,r),new Array(t,r)},a.modPow=function(e,t){var r,i,s=e.bitLength(),n=b(1);if(s<=0)return n;r=s<18?1:s<48?3:s<144?4:s<768?5:6,i=s<8?new m(t):t.isEven()?new O(t):new _(t);var a=new Array,h=3,c=r-1,u=(1<<r)-1;if(a[1]=i.convert(this),r>1){var f=new o;for(i.sqrTo(a[1],f);h<=u;)a[h]=new o,i.mulTo(f,a[h-2],a[h]),h+=2}var l,d,p=e.t-1,w=!0,y=new o;for(s=g(e[p])-1;p>=0;){for(s>=c?l=e[p]>>s-c&u:(l=(e[p]&(1<<s+1)-1)<<c-s,p>0&&(l|=e[p-1]>>this.DB+s-c)),h=r;0==(1&l);)l>>=1,--h;if((s-=h)<0&&(s+=this.DB,--p),w)a[l].copyTo(n),w=!1;else{for(;h>1;)i.sqrTo(n,y),i.sqrTo(y,n),h-=2;h>0?i.sqrTo(n,y):(d=n,n=y,y=d),i.mulTo(y,a[l],n)}for(;p>=0&&0==(e[p]&1<<s);)i.sqrTo(n,y),d=n,n=y,y=d,--s<0&&(s=this.DB-1,--p)}return i.revert(n)},a.modInverse=function(e){var t=e.isEven();if(0===this.signum())throw new Error("division by zero");if(this.isEven()&&t||0==e.signum())return o.ZERO;for(var r=e.clone(),i=this.clone(),s=b(1),n=b(0),a=b(0),h=b(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(s.isEven()&&n.isEven()||(s.addTo(this,s),n.subTo(e,n)),s.rShiftTo(1,s)):n.isEven()||n.subTo(e,n),n.rShiftTo(1,n);for(;i.isEven();)i.rShiftTo(1,i),t?(a.isEven()&&h.isEven()||(a.addTo(this,a),h.subTo(e,h)),a.rShiftTo(1,a)):h.isEven()||h.subTo(e,h),h.rShiftTo(1,h);r.compareTo(i)>=0?(r.subTo(i,r),t&&s.subTo(a,s),n.subTo(h,n)):(i.subTo(r,i),t&&a.subTo(s,a),h.subTo(n,h))}if(0!=i.compareTo(o.ONE))return o.ZERO;for(;h.compareTo(e)>=0;)h.subTo(e,h);for(;h.signum()<0;)h.addTo(e,h);return h},a.pow=function(e){return this.exp(e,new k)},a.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var i=t;t=r,r=i}var s=t.getLowestSetBit(),n=r.getLowestSetBit();if(n<0)return t;for(s<n&&(n=s),n>0&&(t.rShiftTo(n,t),r.rShiftTo(n,r));t.signum()>0;)(s=t.getLowestSetBit())>0&&t.rShiftTo(s,t),(s=r.getLowestSetBit())>0&&r.rShiftTo(s,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return n>0&&r.lShiftTo(n,r),r},a.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r[0]<=x[x.length-1]){for(t=0;t<x.length;++t)if(r[0]==x[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<x.length;){for(var i=x[t],s=t+1;s<x.length&&i<R;)i*=x[s++];for(i=r.modInt(i);t<s;)if(i%x[t++]==0)return!1}return r.millerRabin(e)},a.square=function(){var e=new o;return this.squareTo(e),e},o.ZERO=b(0),o.ONE=b(1),o.valueOf=b,r.exports=o}],["bigi","/package.json",function(e,t,r,i,s,n){r.exports={bugs:{url:"https://github.com/cryptocoinjs/bigi/issues"},description:"Big integers.",homepage:"https://github.com/cryptocoinjs/bigi#readme",keywords:["cryptography","math","bitcoin","arbitrary","precision","arithmetic","big","integer","int","number","biginteger","bigint","bignumber","decimal","float"],main:"./lib/index.js",name:"bigi",repository:{url:"git+https://github.com/cryptocoinjs/bigi.git",type:"git"},testling:{files:"test/*.js",harness:"mocha",browsers:["ie/9..latest","firefox/latest","chrome/latest","safari/6.0..latest","iphone/6.0..latest","android-browser/4.2..latest"]},version:"1.4.2"}}],["bigi","/lib/convert.js",function(e,t,r,i,s,n){var o=__browser_require__(44,r),a=__browser_require__(464,r);a.fromByteArrayUnsigned=function(e){return 128&e[0]?new a([0].concat(e)):new a(e)},a.prototype.toByteArrayUnsigned=function(){var e=this.toByteArray();return 0===e[0]?e.slice(1):e},a.fromDERInteger=function(e){return new a(e)},a.prototype.toDERInteger=a.prototype.toByteArray,a.fromBuffer=function(e){if(128&e[0]){var t=Array.prototype.slice.call(e);return new a([0].concat(t))}return new a(e)},a.fromHex=function(e){return""===e?a.ZERO:(o.equal(e,e.match(/^[A-Fa-f0-9]+/),"Invalid hex string"),o.equal(e.length%2,0,"Incomplete hex"),new a(e,16))},a.prototype.toBuffer=function(e){for(var t=this.toByteArrayUnsigned(),r=[],i=e-t.length;r.length<i;)r.push(0);return new Buffer(r.concat(t))},a.prototype.toHex=function(e){return this.toBuffer(e).toString("hex")}}],["@trezor/utxo-lib","/src/block.js",function(e,t,r,i,s,n){var o=__browser_require__(425,r).Buffer,a=__browser_require__(468,r),h=__browser_require__(487,r),c=__browser_require__(432,r),u=__browser_require__(436,r),f=__browser_require__(462,r),l=__browser_require__(488,r),d=__browser_require__(489,r),p=__browser_require__(490,r);function b(e){c(u.maybe(u.Network),e),e=e||l.bitcoin,this.version=1,this.prevHash=null,this.merkleRoot=null,this.timestamp=0,this.bits=0,this.nonce=0,this.network=e,d.isZcashType(e)&&(this.finalSaplingRoot=null,this.solutionSize=0,this.solution=null)}b.HEADER_BYTE_SIZE=80,b.ZCASH_HEADER_BYTE_SIZE=1487,b.fromBuffer=function(e,t){if(e.length<80)throw new Error("Buffer too small (< 80 bytes)");var r=0;function i(t){return r+=t,e.slice(r-t,r)}function s(){var t=e.readUInt32LE(r);return r+=4,t}function n(){var t=f.decode(e,r);return r+=f.decode.bytes,t}var o=new b(t=t||l.bitcoin);if(o.version=function(){var t=e.readInt32LE(r);return r+=4,t}(),o.prevHash=i(32),o.merkleRoot=i(32),d.isZcashType(t)&&(o.finalSaplingRoot=i(32)),o.timestamp=s(),o.bits=s(),d.isZcashType(t)?(o.nonce=i(32),o.solutionSize=n(),o.solution=i(1344)):o.nonce=s(),80===e.length)return o;function a(){var i=p.fromBuffer(e.slice(r),t,!0);return r+=i.byteLength(),i}var h=n();o.transactions=[];for(var c=0;c<h;++c){var u=a();o.transactions.push(u)}return o},b.prototype.byteLength=function(e){return d.isZcashType(this.network)?e?b.ZCASH_HEADER_BYTE_SIZE:b.ZCASH_HEADER_BYTE_SIZE+f.encodingLength(this.transactions.length)+this.transactions.reduce(function(e,t){return e+t.byteLength()},0):e||!this.transactions?b.HEADER_BYTE_SIZE:b.HEADER_BYTE_SIZE+f.encodingLength(this.transactions.length)+this.transactions.reduce(function(e,t){return e+t.byteLength()},0)},b.fromHex=function(e,t){return b.fromBuffer(o.from(e,"hex"),t)},b.prototype.getHash=function(){return a.hash256(this.toBuffer(!0))},b.prototype.getId=function(){return this.getHash().reverse().toString("hex")},b.prototype.getUTCDate=function(){var e=new Date(0);return e.setUTCSeconds(this.timestamp),e},b.prototype.toBuffer=function(e){var t,r=o.allocUnsafe(this.byteLength(e)),i=0;function s(e){e.copy(r,i),i+=e.length}function n(e){r.writeUInt32LE(e,i),i+=4}return t=this.version,r.writeInt32LE(t,i),i+=4,s(this.prevHash),s(this.merkleRoot),d.isZcashType(this.network)&&s(this.finalSaplingRoot),n(this.timestamp),n(this.bits),d.isZcashType(this.network)?(s(this.nonce),f.encode(this.solutionSize,r,i),i+=f.encode.bytes,s(this.solution)):n(this.nonce),e||!this.transactions?r:(f.encode(this.transactions.length,r,i),i+=f.encode.bytes,this.transactions.forEach(function(e){var t=e.byteLength();e.toBuffer(r,i),i+=t}),r)},b.prototype.toHex=function(e){return this.toBuffer(e).toString("hex")},b.calculateTarget=function(e){var t=((4278190080&e)>>24)-3,r=8388607&e,i=o.alloc(32,0);return t<0?(r>>=8*Math.abs(t),i.writeUInt32BE(r,28)):t>28?(r<<=8*(t-28),i.writeUInt32BE(r,0)):i.writeUInt32BE(r,28-t),i},b.calculateMerkleRoot=function(e){if(c([{getHash:u.Function}],e),0===e.length)throw TypeError("Cannot compute merkle root for zero transactions");var t=e.map(function(e){return e.getHash()});return h(t,a.hash256)},b.prototype.checkMerkleRoot=function(){if(!this.transactions)return!1;var e=b.calculateMerkleRoot(this.transactions);return 0===this.merkleRoot.compare(e)},b.prototype.checkProofOfWork=function(){var e=this.getHash().reverse(),t=b.calculateTarget(this.bits);return e.compare(t)<=0},r.exports=b}],["@trezor/utxo-lib","/src/crypto.js",function(e,t,r,i,s,n){var o=__browser_require__(469,r),a=__browser_require__(485,r);function h(e){var t="rmd160",r=a.getHashes();return-1===r.indexOf(t)&&-1!==r.indexOf("ripemd160")&&(t="ripemd160"),o(t).update(e).digest()}function c(e){return o("sha256").update(e).digest()}r.exports={hash160:function(e){return h(c(e))},hash256:function(e){return c(c(e))},ripemd160:h,sha1:function(e){return o("sha1").update(e).digest()},sha256:c}}],["create-hash","/browser.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(470,r),a=__browser_require__(471,r),h=__browser_require__(474,r),c=__browser_require__(475,r),u=__browser_require__(483,r);function f(e){u.call(this,"digest"),this._hash=e}o(f,u),f.prototype._update=function(e){this._hash.update(e)},f.prototype._final=function(){return this._hash.digest()},r.exports=function(e){return"md5"===(e=e.toLowerCase())?new a:"rmd160"===e||"ripemd160"===e?new h:new f(c(e))}}],["inherits","/inherits_browser.js",function(e,t,r,i,s,n){"function"==typeof Object.create?r.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}}],["md5.js","/index.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(470,r),a=__browser_require__(472,r),h=__browser_require__(425,r).Buffer,c=new Array(16);function u(){a.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function f(e,t){return e<<t|e>>>32-t}function l(e,t,r,i,s,n,o){return f(e+(t&r|~t&i)+s+n|0,o)+t|0}function d(e,t,r,i,s,n,o){return f(e+(t&i|r&~i)+s+n|0,o)+t|0}function p(e,t,r,i,s,n,o){return f(e+(t^r^i)+s+n|0,o)+t|0}function b(e,t,r,i,s,n,o){return f(e+(r^(t|~i))+s+n|0,o)+t|0}o(u,a),u.prototype._update=function(){for(var e=c,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var r=this._a,i=this._b,s=this._c,n=this._d;i=b(i=b(i=b(i=b(i=p(i=p(i=p(i=p(i=d(i=d(i=d(i=d(i=l(i=l(i=l(i=l(i,s=l(s,n=l(n,r=l(r,i,s,n,e[0],3614090360,7),i,s,e[1],3905402710,12),r,i,e[2],606105819,17),n,r,e[3],3250441966,22),s=l(s,n=l(n,r=l(r,i,s,n,e[4],4118548399,7),i,s,e[5],1200080426,12),r,i,e[6],2821735955,17),n,r,e[7],4249261313,22),s=l(s,n=l(n,r=l(r,i,s,n,e[8],1770035416,7),i,s,e[9],2336552879,12),r,i,e[10],4294925233,17),n,r,e[11],2304563134,22),s=l(s,n=l(n,r=l(r,i,s,n,e[12],1804603682,7),i,s,e[13],4254626195,12),r,i,e[14],2792965006,17),n,r,e[15],1236535329,22),s=d(s,n=d(n,r=d(r,i,s,n,e[1],4129170786,5),i,s,e[6],3225465664,9),r,i,e[11],643717713,14),n,r,e[0],3921069994,20),s=d(s,n=d(n,r=d(r,i,s,n,e[5],3593408605,5),i,s,e[10],38016083,9),r,i,e[15],3634488961,14),n,r,e[4],3889429448,20),s=d(s,n=d(n,r=d(r,i,s,n,e[9],568446438,5),i,s,e[14],3275163606,9),r,i,e[3],4107603335,14),n,r,e[8],1163531501,20),s=d(s,n=d(n,r=d(r,i,s,n,e[13],2850285829,5),i,s,e[2],4243563512,9),r,i,e[7],1735328473,14),n,r,e[12],2368359562,20),s=p(s,n=p(n,r=p(r,i,s,n,e[5],4294588738,4),i,s,e[8],2272392833,11),r,i,e[11],1839030562,16),n,r,e[14],4259657740,23),s=p(s,n=p(n,r=p(r,i,s,n,e[1],2763975236,4),i,s,e[4],1272893353,11),r,i,e[7],4139469664,16),n,r,e[10],3200236656,23),s=p(s,n=p(n,r=p(r,i,s,n,e[13],681279174,4),i,s,e[0],3936430074,11),r,i,e[3],3572445317,16),n,r,e[6],76029189,23),s=p(s,n=p(n,r=p(r,i,s,n,e[9],3654602809,4),i,s,e[12],3873151461,11),r,i,e[15],530742520,16),n,r,e[2],3299628645,23),s=b(s,n=b(n,r=b(r,i,s,n,e[0],4096336452,6),i,s,e[7],1126891415,10),r,i,e[14],2878612391,15),n,r,e[5],4237533241,21),s=b(s,n=b(n,r=b(r,i,s,n,e[12],1700485571,6),i,s,e[3],2399980690,10),r,i,e[10],4293915773,15),n,r,e[1],2240044497,21),s=b(s,n=b(n,r=b(r,i,s,n,e[8],1873313359,6),i,s,e[15],4264355552,10),r,i,e[6],2734768916,15),n,r,e[13],1309151649,21),s=b(s,n=b(n,r=b(r,i,s,n,e[4],4149444226,6),i,s,e[11],3174756917,10),r,i,e[2],718787259,15),n,r,e[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+i|0,this._c=this._c+s|0,this._d=this._d+n|0},u.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=h.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},r.exports=u}],["hash-base","/index.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(425,r).Buffer,a=__browser_require__(473,r).Transform;function h(e){a.call(this),this._block=o.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}__browser_require__(470,r)(h,a),h.prototype._transform=function(e,t,r){var i=null;try{this.update(e,t)}catch(e){i=e}r(i)},h.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},h.prototype.update=function(e,t){if(function(e,t){if((null==e||!0!==e._isBuffer)&&"string"!=typeof e)throw new TypeError(t+" must be a string or a buffer")}(e,"Data"),this._finalized)throw new Error("Digest already called");null!=e&&!0===e._isBuffer||(e=o.from(e,t));for(var r=this._block,i=0;this._blockOffset+e.length-i>=this._blockSize;){for(var s=this._blockOffset;s<this._blockSize;)r[s++]=e[i++];this._update(),this._blockOffset=0}for(;i<e.length;)r[this._blockOffset++]=e[i++];for(var n=0,a=8*e.length;a>0;++n)this._length[n]+=a,(a=this._length[n]/4294967296|0)>0&&(this._length[n]-=4294967296*a);return this},h.prototype._update=function(){throw new Error("_update is not implemented")},h.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();e!==undefined&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return t},h.prototype._digest=function(){throw new Error("_digest is not implemented")},r.exports=h}],["bpkg","/lib/builtins/stream.js",function(e,t,r,i,s,n){var o=[["stream-browserify","/index.js",function(e,t,r,i,s){t.exports=o;var n=__browser_require__(19,t).EventEmitter;function o(){n.call(this)}h(1)(o,n),o.Readable=h(2),o.Writable=h(19),o.Duplex=h(20),o.Transform=h(21),o.PassThrough=h(22),o.Stream=o,o.prototype.pipe=function(e,t){var r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function s(){r.readable&&r.resume&&r.resume()}r.on("data",i),e.on("drain",s),e._isStdio||t&&!1===t.end||(r.on("end",a),r.on("close",h));var o=!1;function a(){o||(o=!0,e.end())}function h(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(u(),0===n.listenerCount(this,"error"))throw e}function u(){r.removeListener("data",i),e.removeListener("drain",s),r.removeListener("end",a),r.removeListener("close",h),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",u),r.removeListener("close",u),e.removeListener("close",u)}return r.on("error",c),e.on("error",c),r.on("end",u),r.on("close",u),e.on("close",u),e.emit("pipe",r),e}}],["inherits","/inherits_browser.js",function(e,t,r,i,s){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}],["readable-stream","/readable-browser.js",function(e,t,r,i,s){(e=t.exports=h(3)).Stream=e,e.Readable=e,e.Writable=h(14),e.Duplex=h(13),e.Transform=h(17),e.PassThrough=h(18)}],["readable-stream","/lib/_stream_readable.js",function(e,t,r,i,s){"use strict";var n=h(4);t.exports=v;var o,a=h(5);v.ReadableState=y;__browser_require__(19,t).EventEmitter;var c=function(e,t){return e.listeners(t).length},u=h(6),f=h(7).Buffer,l=global.Uint8Array||function(){};var d=h(8);d.inherits=h(9);var p=h(10),b=void 0;b=p&&p.debuglog?p.debuglog("stream"):function(){};var g,m=h(11),_=h(12);d.inherits(v,u);var w=["error","close","destroy","pause","resume"];function y(e,t){o=o||h(13),e=e||{};var r=t instanceof o;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,s=e.readableHighWaterMark,n=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(s||0===s)?s:n,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(g||(g=h(16).StringDecoder),this.decoder=new g(e.encoding),this.encoding=e.encoding)}function v(e){if(o=o||h(13),!(this instanceof v))return new v(e);this._readableState=new y(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),u.call(this)}function E(e,t,r,i,s){var n,o=e._readableState;null===t?(o.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,A(e)}(e,o)):(s||(n=function(e,t){var r;i=t,null!=i&&!0===i._isBuffer||i instanceof l||"string"==typeof t||t===undefined||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var i;return r}(o,t)),n?e.emit("error",n):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===f.prototype||(t=function(e){return f.from(e)}(t)),i?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):S(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||0!==t.length?S(e,o,t,!1):x(e,o)):S(e,o,t,!1))):i||(o.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function S(e,t,r,i){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&A(e)),x(e,t)}Object.defineProperty(v.prototype,"destroyed",{get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),v.prototype.destroy=_.destroy,v.prototype._undestroy=_.undestroy,v.prototype._destroy=function(e,t){this.push(null),t(e)},v.prototype.push=function(e,t){var r,i=this._readableState;return i.objectMode?r=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=f.from(e,t),t=""),r=!0),E(this,e,t,!1,r)},v.prototype.unshift=function(e){return E(this,e,null,!0,!1)},v.prototype.isPaused=function(){return!1===this._readableState.flowing},v.prototype.setEncoding=function(e){return g||(g=h(16).StringDecoder),this._readableState.decoder=new g(e),this._readableState.encoding=e,this};var I=8388608;function k(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=I?e=I:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function A(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(b("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n.nextTick(O,e):O(e))}function O(e){b("emit readable"),e.emit("readable"),B(e)}function x(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(R,e,t))}function R(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(b("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function M(e){b("readable nexttick read 0"),e.read(0)}function P(e,t){t.reading||(b("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),B(e),t.flowing&&!t.reading&&e.read(0)}function B(e){var t=e._readableState;for(b("flow",t.flowing);t.flowing&&null!==e.read(););}function N(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var i;e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):i=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,i=1,s=r.data;e-=s.length;for(;r=r.next;){var n=r.data,o=e>n.length?n.length:e;if(o===n.length?s+=n:s+=n.slice(0,e),0===(e-=o)){o===n.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=n.slice(o));break}++i}return t.length-=i,s}(e,t):function(e,t){var r=f.allocUnsafe(e),i=t.head,s=1;i.data.copy(r),e-=i.data.length;for(;i=i.next;){var n=i.data,o=e>n.length?n.length:e;if(n.copy(r,r.length-e,0,o),0===(e-=o)){o===n.length?(++s,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=n.slice(o));break}++s}return t.length-=s,r}(e,t);return i}(e,t.buffer,t.decoder),r);var r}function T(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,n.nextTick(C,t,e))}function C(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function q(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}v.prototype.read=function(e){b("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return b("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?T(this):A(this),null;if(0===(e=k(e,t))&&t.ended)return 0===t.length&&T(this),null;var i,s=t.needReadable;return b("need readable",s),(0===t.length||t.length-e<t.highWaterMark)&&b("length less than watermark",s=!0),t.ended||t.reading?b("reading or ended",s=!1):s&&(b("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=k(r,t))),null===(i=e>0?N(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&T(this)),null!==i&&this.emit("data",i),i},v.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},v.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,b("pipe count=%d opts=%j",i.pipesCount,t);var s=(!t||!1!==t.end)&&e!==process.stdout&&e!==process.stderr?h:_;function o(t,s){b("onunpipe"),t===r&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,b("cleanup"),e.removeListener("close",g),e.removeListener("finish",m),e.removeListener("drain",u),e.removeListener("error",p),e.removeListener("unpipe",o),r.removeListener("end",h),r.removeListener("end",_),r.removeListener("data",d),f=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}function h(){b("onend"),e.end()}i.endEmitted?n.nextTick(s):r.once("end",s),e.on("unpipe",o);var u=function(e){return function(){var t=e._readableState;b("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&c(e,"data")&&(t.flowing=!0,B(e))}}(r);e.on("drain",u);var f=!1;var l=!1;function d(t){b("ondata"),l=!1,!1!==e.write(t)||l||((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==q(i.pipes,e))&&!f&&(b("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,l=!0),r.pause())}function p(t){b("onerror",t),_(),e.removeListener("error",p),0===c(e,"error")&&e.emit("error",t)}function g(){e.removeListener("finish",m),_()}function m(){b("onfinish"),e.removeListener("close",g),_()}function _(){b("unpipe"),r.unpipe(e)}return r.on("data",d),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?a(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",p),e.once("close",g),e.once("finish",m),e.emit("pipe",r),i.flowing||(b("pipe resume"),r.resume()),e},v.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var i=t.pipes,s=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var n=0;n<s;n++)i[n].emit("unpipe",this,r);return this}var o=q(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},v.prototype.on=function(e,t){var r=u.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&A(this):n.nextTick(M,this))}return r},v.prototype.addListener=v.prototype.on,v.prototype.resume=function(){var e=this._readableState;return e.flowing||(b("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(P,e,t))}(this,e)),this},v.prototype.pause=function(){return b("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(b("pause"),this._readableState.flowing=!1,this.emit("pause")),this},v.prototype.wrap=function(e){var t=this,r=this._readableState,i=!1;for(var s in e.on("end",function(){if(b("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(s){(b("wrapped data"),r.decoder&&(s=r.decoder.write(s)),!r.objectMode||null!==s&&s!==undefined)&&((r.objectMode||s&&s.length)&&(t.push(s)||(i=!0,e.pause())))}),e)this[s]===undefined&&"function"==typeof e[s]&&(this[s]=function(t){return function(){return e[t].apply(e,arguments)}}(s));for(var n=0;n<w.length;n++)e.on(w[n],this.emit.bind(this,w[n]));return this._read=function(t){b("wrapped _read",t),i&&(i=!1,e.resume())},this},Object.defineProperty(v.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),v._fromList=N}],["process-nextick-args","/index.js",function(e,t,r,i,s){"use strict";!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?t.exports={nextTick:function(e,t,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var s,n,o=arguments.length;switch(o){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,t)});case 3:return process.nextTick(function(){e.call(null,t,r)});case 4:return process.nextTick(function(){e.call(null,t,r,i)});default:for(s=new Array(o-1),n=0;n<s.length;)s[n++]=arguments[n];return process.nextTick(function(){e.apply(null,s)})}}}:t.exports=process}],["isarray","/index.js",function(e,t,r,i,s){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}}],["readable-stream","/lib/internal/streams/stream-browser.js",function(e,t,r,i,s){t.exports=__browser_require__(19,t).EventEmitter}],["safe-buffer","/index.js",function(e,t,r,i,s){var n=__browser_require__(426,t),o=n.Buffer;function a(e,t){for(var r in e)t[r]=e[r]}function h(e,t,r){return o(e,t,r)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=n:(a(n,e),e.Buffer=h),a(o,h),h.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,r)},h.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=o(e);return t!==undefined?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},h.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},h.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}}],["core-util-is","/lib/util.js",function(e,t,r,i,s){function n(e){return Object.prototype.toString.call(e)}e.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},e.isBoolean=function(e){return"boolean"==typeof e},e.isNull=function(e){return null===e},e.isNullOrUndefined=function(e){return null==e},e.isNumber=function(e){return"number"==typeof e},e.isString=function(e){return"string"==typeof e},e.isSymbol=function(e){return"symbol"==typeof e},e.isUndefined=function(e){return void 0===e},e.isRegExp=function(e){return"[object RegExp]"===n(e)},e.isObject=function(e){return"object"==typeof e&&null!==e},e.isDate=function(e){return"[object Date]"===n(e)},e.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},e.isFunction=function(e){return"function"==typeof e},e.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},e.isBuffer=Buffer.isBuffer}],["inherits","/inherits_browser.js",function(e,t,r,i,s){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}],["bpkg","/lib/builtins/empty.js",function(e,t,r,i,s){}],["readable-stream","/lib/internal/streams/BufferList.js",function(e,t,r,i,s){"use strict";var n=h(7).Buffer,o=h(10);t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var t,r,i,s=n.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,r=s,i=a,t.copy(r,i),a+=o.data.length,o=o.next;return s},e}(),o&&o.inspect&&o.inspect.custom&&(t.exports.prototype[o.inspect.custom]=function(){var e=o.inspect({length:this.length});return this.constructor.name+" "+e})}],["readable-stream","/lib/internal/streams/destroy.js",function(e,t,r,i,s){"use strict";var n=h(4);function o(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var r=this,i=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return i||s?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n.nextTick(o,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(n.nextTick(o,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}}],["readable-stream","/lib/_stream_duplex.js",function(e,t,r,i,s){"use strict";var n=h(4),o=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=p;var a=h(8);a.inherits=h(9);var c=h(3),u=h(14);a.inherits(p,c);for(var f=o(u.prototype),l=0;l<f.length;l++){var d=f[l];p.prototype[d]||(p.prototype[d]=u.prototype[d])}function p(e){if(!(this instanceof p))return new p(e);c.call(this,e),u.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",b)}function b(){this.allowHalfOpen||this._writableState.ended||n.nextTick(g,this)}function g(e){e.end()}Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(p.prototype,"destroyed",{get:function(){return this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),p.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}}],["readable-stream","/lib/_stream_writable.js",function(e,t,r,i,s){"use strict";var n=h(4);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var i=e.entry;e.entry=null;for(;i;){var s=i.callback;t.pendingcb--,s(r),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}t.exports=w;var a,c=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:n.nextTick;w.WritableState=_;var u=h(8);u.inherits=h(9);var f={deprecate:h(15)},l=h(6),d=h(7).Buffer,p=global.Uint8Array||function(){};var b,g=h(12);function m(){}function _(e,t){a=a||h(13),e=e||{};var r=t instanceof a;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,s=e.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(s||0===s)?s:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var f=!1===e.decodeStrings;this.decodeStrings=!f,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,s=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,s){--t.pendingcb,r?(n.nextTick(s,i),n.nextTick(k,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(s(i),e._writableState.errorEmitted=!0,e.emit("error",i),k(e,t))}(e,r,i,t,s);else{var o=S(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||E(e,r),i?c(v,e,r,o,s):v(e,r,o,s)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function w(e){if(a=a||h(13),!(b.call(w,this)||this instanceof a))return new w(e);this._writableState=new _(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),l.call(this)}function y(e,t,r,i,s,n,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,r?e._writev(s,t.onwrite):e._write(s,n,t.onwrite),t.sync=!1}function v(e,t,r,i){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),k(e,t)}function E(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,s=new Array(i),n=t.corkedRequestsFree;n.entry=r;for(var a=0,h=!0;r;)s[a]=r,r.isBuf||(h=!1),r=r.next,a+=1;s.allBuffers=h,y(e,t,!0,t.length,s,"",n.finish),t.pendingcb++,t.lastBufferedRequest=null,n.next?(t.corkedRequestsFree=n.next,n.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,u=r.encoding,f=r.callback;if(y(e,t,!1,t.objectMode?1:c.length,c,u,f),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function S(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function I(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),k(e,t)})}function k(e,t){var r=S(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,n.nextTick(I,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}u.inherits(w,l),_.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(_.prototype,"buffer",{get:f.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(b=Function.prototype[Symbol.hasInstance],Object.defineProperty(w,Symbol.hasInstance,{value:function(e){return!!b.call(this,e)||this===w&&(e&&e._writableState instanceof _)}})):b=function(e){return e instanceof this},w.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},w.prototype.write=function(e,t,r){var i,s=this._writableState,o=!1,a=!s.objectMode&&(null!=(i=e)&&!0===i._isBuffer||i instanceof p);return!a||null!=e&&!0===e._isBuffer||(e=function(e){return d.from(e)}(e)),"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof r&&(r=m),s.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),n.nextTick(t,r)}(this,r):(a||function(e,t,r,i){var s=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||r===undefined||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),n.nextTick(i,o),s=!1),s}(this,s,e,r))&&(s.pendingcb++,o=function(e,t,r,i,s,n){if(!r){var o=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=d.from(t,r));return t}(t,i,s);i!==o&&(r=!0,s="buffer",i=o)}var a=t.objectMode?1:i.length;t.length+=a;var h=t.length<t.highWaterMark;h||(t.needDrain=!0);if(t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:s,isBuf:r,callback:n,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else y(e,t,!1,a,i,s,n);return h}(this,s,a,e,t,r)),o},w.prototype.cork=function(){this._writableState.corked++},w.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||E(this,e))},w.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),w.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},w.prototype._writev=null,w.prototype.end=function(e,t,r){var i=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&e!==undefined&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,r){t.ending=!0,k(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,i,r)},Object.defineProperty(w.prototype,"destroyed",{get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),w.prototype.destroy=g.destroy,w.prototype._undestroy=g.undestroy,w.prototype._destroy=function(e,t){this.end(),t(e)}}],["util-deprecate","/browser.js",function(e,t,r,i,s){function n(e){try{if(!global.localStorage)return!1}catch(e){return!1}var t=global.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}t.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}],["string_decoder","/lib/string_decoder.js",function(e,t,r,i,s){"use strict";var n=h(7).Buffer,o=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===o||!o(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=f,this.end=l,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=d,this.end=p,t=3;break;default:return this.write=b,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function c(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function u(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return r!==undefined?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function f(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function d(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function p(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function b(e){return e.toString(this.encoding)}function g(e){return e&&e.length?this.write(e):""}e.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if((t=this.fillLast(e))===undefined)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},a.prototype.text=function(e,t){var r=function(e,t,r){var i=t.length-1;if(i<r)return 0;var s=c(t[i]);if(s>=0)return s>0&&(e.lastNeed=s-1),s;if(--i<r||-2===s)return 0;if((s=c(t[i]))>=0)return s>0&&(e.lastNeed=s-2),s;if(--i<r||-2===s)return 0;if((s=c(t[i]))>=0)return s>0&&(2===s?s=0:e.lastNeed=s-3),s;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var i=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}}],["readable-stream","/lib/_stream_transform.js",function(e,t,r,i,s){"use strict";t.exports=a;var n=h(13),o=h(8);function a(e){if(!(this instanceof a))return new a(e);n.call(this,e),this._transformState={afterTransform:function(e,t){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),i(e);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",c)}function c(){var e=this;"function"==typeof this._flush?this._flush(function(t,r){u(e,t,r)}):u(this,null,null)}function u(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}o.inherits=h(9),o.inherits(a,n),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},a.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},a.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var s=this._readableState;(i.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},a.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,function(e){t(e),r.emit("close")})}}],["readable-stream","/lib/_stream_passthrough.js",function(e,t,r,i,s){"use strict";t.exports=a;var n=h(17),o=h(8);function a(e){if(!(this instanceof a))return new a(e);n.call(this,e)}o.inherits=h(9),o.inherits(a,n),a.prototype._transform=function(e,t,r){r(null,e)}}],["readable-stream","/writable-browser.js",function(e,t,r,i,s){t.exports=h(14)}],["readable-stream","/duplex-browser.js",function(e,t,r,i,s){t.exports=h(13)}],["readable-stream","/transform.js",function(e,t,r,i,s){t.exports=h(2).Transform}],["readable-stream","/passthrough.js",function(e,t,r,i,s){t.exports=h(2).PassThrough}]],a=[];function h(t){if(t>>>0!==t||t>o.length)return function(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}(t);for(;a.length<=t;)a.push(null);var n=a[t];if(n)return n.exports;var h=o[t],c=h[0],u=h[1],f=h[2],l=e,d=r;0!==t&&(d={id:"/"+c+u,exports:l={},parent:r.parent,filename:r.filename,loaded:!1,children:r.children,paths:r.paths}),a[t]=d;try{f.call(l,l,d,i,s,void 0)}catch(e){throw a[t]=null,e}return o[t]=null,0!==t&&(d.loaded=!0),d.exports}h(0)}],["ripemd160","/index.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(426,r).Buffer,a=__browser_require__(470,r),h=__browser_require__(472,r),c=new Array(16),u=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],d=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],p=[0,1518500249,1859775393,2400959708,2840853838],b=[1352829926,1548603684,1836072691,2053994217,0];function g(){h.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function m(e,t){return e<<t|e>>>32-t}function _(e,t,r,i,s,n,o,a){return m(e+(t^r^i)+n+o|0,a)+s|0}function w(e,t,r,i,s,n,o,a){return m(e+(t&r|~t&i)+n+o|0,a)+s|0}function y(e,t,r,i,s,n,o,a){return m(e+((t|~r)^i)+n+o|0,a)+s|0}function v(e,t,r,i,s,n,o,a){return m(e+(t&i|r&~i)+n+o|0,a)+s|0}function E(e,t,r,i,s,n,o,a){return m(e+(t^(r|~i))+n+o|0,a)+s|0}a(g,h),g.prototype._update=function(){for(var e=c,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var r=0|this._a,i=0|this._b,s=0|this._c,n=0|this._d,o=0|this._e,a=0|this._a,h=0|this._b,g=0|this._c,S=0|this._d,I=0|this._e,k=0;k<80;k+=1){var A,O;k<16?(A=_(r,i,s,n,o,e[u[k]],p[0],l[k]),O=E(a,h,g,S,I,e[f[k]],b[0],d[k])):k<32?(A=w(r,i,s,n,o,e[u[k]],p[1],l[k]),O=v(a,h,g,S,I,e[f[k]],b[1],d[k])):k<48?(A=y(r,i,s,n,o,e[u[k]],p[2],l[k]),O=y(a,h,g,S,I,e[f[k]],b[2],d[k])):k<64?(A=v(r,i,s,n,o,e[u[k]],p[3],l[k]),O=w(a,h,g,S,I,e[f[k]],b[3],d[k])):(A=E(r,i,s,n,o,e[u[k]],p[4],l[k]),O=_(a,h,g,S,I,e[f[k]],b[4],d[k])),r=o,o=n,n=m(s,10),s=i,i=A,a=I,I=S,S=m(g,10),g=h,h=O}var x=this._b+s+S|0;this._b=this._c+n+I|0,this._c=this._d+o+a|0,this._d=this._e+r+h|0,this._e=this._a+i+g|0,this._a=x},g.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=o.alloc?o.alloc(20):new o(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},r.exports=g}],["sha.js","/index.js",function(e,t,r,i,s,n){(e=r.exports=function(t){t=t.toLowerCase();var r=e[t];if(!r)throw new Error(t+" is not supported (we accept pull requests)");return new r}).sha=__browser_require__(476,r),e.sha1=__browser_require__(478,r),e.sha224=__browser_require__(479,r),e.sha256=__browser_require__(480,r),e.sha384=__browser_require__(481,r),e.sha512=__browser_require__(482,r)}],["sha.js","/sha.js",function(e,t,r,i,s,n){var o=__browser_require__(470,r),a=__browser_require__(477,r),h=__browser_require__(425,r).Buffer,c=[1518500249,1859775393,-1894007588,-899497514],u=new Array(80);function f(){this.init(),this._w=u,a.call(this,64,56)}function l(e){return e<<30|e>>>2}function d(e,t,r,i){return 0===e?t&r|~t&i:2===e?t&r|t&i|r&i:t^r^i}o(f,a),f.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},f.prototype._update=function(e){for(var t,r=this._w,i=0|this._a,s=0|this._b,n=0|this._c,o=0|this._d,a=0|this._e,h=0;h<16;++h)r[h]=e.readInt32BE(4*h);for(;h<80;++h)r[h]=r[h-3]^r[h-8]^r[h-14]^r[h-16];for(var u=0;u<80;++u){var f=~~(u/20),p=0|((t=i)<<5|t>>>27)+d(f,s,n,o)+a+r[u]+c[f];a=o,o=n,n=l(s),s=i,i=p}this._a=i+this._a|0,this._b=s+this._b|0,this._c=n+this._c|0,this._d=o+this._d|0,this._e=a+this._e|0},f.prototype._hash=function(){var e=h.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},r.exports=f}],["sha.js","/hash.js",function(e,t,r,i,s,n){var o=__browser_require__(425,r).Buffer;function a(e,t){this._block=o.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}a.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=o.from(e,t));for(var r=this._block,i=this._blockSize,s=e.length,n=this._len,a=0;a<s;){for(var h=n%i,c=Math.min(s-a,i-h),u=0;u<c;u++)r[h+u]=e[a+u];a+=c,(n+=c)%i==0&&this._update(r)}return this._len+=s,this},a.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var i=(4294967295&r)>>>0,s=(r-i)/4294967296;this._block.writeUInt32BE(s,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var n=this._hash();return e?n.toString(e):n},a.prototype._update=function(){throw new Error("_update must be implemented by subclass")},r.exports=a}],["sha.js","/sha1.js",function(e,t,r,i,s,n){var o=__browser_require__(470,r),a=__browser_require__(477,r),h=__browser_require__(425,r).Buffer,c=[1518500249,1859775393,-1894007588,-899497514],u=new Array(80);function f(){this.init(),this._w=u,a.call(this,64,56)}function l(e){return e<<5|e>>>27}function d(e){return e<<30|e>>>2}function p(e,t,r,i){return 0===e?t&r|~t&i:2===e?t&r|t&i|r&i:t^r^i}o(f,a),f.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},f.prototype._update=function(e){for(var t,r=this._w,i=0|this._a,s=0|this._b,n=0|this._c,o=0|this._d,a=0|this._e,h=0;h<16;++h)r[h]=e.readInt32BE(4*h);for(;h<80;++h)r[h]=(t=r[h-3]^r[h-8]^r[h-14]^r[h-16])<<1|t>>>31;for(var u=0;u<80;++u){var f=~~(u/20),b=l(i)+p(f,s,n,o)+a+r[u]+c[f]|0;a=o,o=n,n=d(s),s=i,i=b}this._a=i+this._a|0,this._b=s+this._b|0,this._c=n+this._c|0,this._d=o+this._d|0,this._e=a+this._e|0},f.prototype._hash=function(){var e=h.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},r.exports=f}],["sha.js","/sha224.js",function(e,t,r,i,s,n){var o=__browser_require__(470,r),a=__browser_require__(480,r),h=__browser_require__(477,r),c=__browser_require__(425,r).Buffer,u=new Array(64);function f(){this.init(),this._w=u,h.call(this,64,56)}o(f,a),f.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},f.prototype._hash=function(){var e=c.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},r.exports=f}],["sha.js","/sha256.js",function(e,t,r,i,s,n){var o=__browser_require__(470,r),a=__browser_require__(477,r),h=__browser_require__(425,r).Buffer,c=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],u=new Array(64);function f(){this.init(),this._w=u,a.call(this,64,56)}function l(e,t,r){return r^e&(t^r)}function d(e,t,r){return e&t|r&(e|t)}function p(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function b(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function g(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}o(f,a),f.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},f.prototype._update=function(e){for(var t,r=this._w,i=0|this._a,s=0|this._b,n=0|this._c,o=0|this._d,a=0|this._e,h=0|this._f,u=0|this._g,f=0|this._h,m=0;m<16;++m)r[m]=e.readInt32BE(4*m);for(;m<64;++m)r[m]=0|(((t=r[m-2])>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)+r[m-7]+g(r[m-15])+r[m-16];for(var _=0;_<64;++_){var w=f+b(a)+l(a,h,u)+c[_]+r[_]|0,y=p(i)+d(i,s,n)|0;f=u,u=h,h=a,a=o+w|0,o=n,n=s,s=i,i=w+y|0}this._a=i+this._a|0,this._b=s+this._b|0,this._c=n+this._c|0,this._d=o+this._d|0,this._e=a+this._e|0,this._f=h+this._f|0,this._g=u+this._g|0,this._h=f+this._h|0},f.prototype._hash=function(){var e=h.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},r.exports=f}],["sha.js","/sha384.js",function(e,t,r,i,s,n){var o=__browser_require__(470,r),a=__browser_require__(482,r),h=__browser_require__(477,r),c=__browser_require__(425,r).Buffer,u=new Array(160);function f(){this.init(),this._w=u,h.call(this,128,112)}o(f,a),f.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},f.prototype._hash=function(){var e=c.allocUnsafe(48);function t(t,r,i){e.writeInt32BE(t,i),e.writeInt32BE(r,i+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},r.exports=f}],["sha.js","/sha512.js",function(e,t,r,i,s,n){var o=__browser_require__(470,r),a=__browser_require__(477,r),h=__browser_require__(425,r).Buffer,c=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],u=new Array(160);function f(){this.init(),this._w=u,a.call(this,128,112)}function l(e,t,r){return r^e&(t^r)}function d(e,t,r){return e&t|r&(e|t)}function p(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function b(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function g(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function m(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function _(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function w(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function y(e,t){return e>>>0<t>>>0?1:0}o(f,a),f.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},f.prototype._update=function(e){for(var t=this._w,r=0|this._ah,i=0|this._bh,s=0|this._ch,n=0|this._dh,o=0|this._eh,a=0|this._fh,h=0|this._gh,u=0|this._hh,f=0|this._al,v=0|this._bl,E=0|this._cl,S=0|this._dl,I=0|this._el,k=0|this._fl,A=0|this._gl,O=0|this._hl,x=0;x<32;x+=2)t[x]=e.readInt32BE(4*x),t[x+1]=e.readInt32BE(4*x+4);for(;x<160;x+=2){var R=t[x-30],M=t[x-30+1],P=g(R,M),B=m(M,R),N=_(R=t[x-4],M=t[x-4+1]),T=w(M,R),C=t[x-14],q=t[x-14+1],j=t[x-32],D=t[x-32+1],U=B+q|0,L=P+C+y(U,B)|0;L=(L=L+N+y(U=U+T|0,T)|0)+j+y(U=U+D|0,D)|0,t[x]=L,t[x+1]=U}for(var z=0;z<160;z+=2){L=t[z],U=t[z+1];var F=d(r,i,s),H=d(f,v,E),V=p(r,f),K=p(f,r),W=b(o,I),G=b(I,o),Y=c[z],X=c[z+1],J=l(o,a,h),Q=l(I,k,A),Z=O+G|0,$=u+W+y(Z,O)|0;$=($=($=$+J+y(Z=Z+Q|0,Q)|0)+Y+y(Z=Z+X|0,X)|0)+L+y(Z=Z+U|0,U)|0;var ee=K+H|0,te=V+F+y(ee,K)|0;u=h,O=A,h=a,A=k,a=o,k=I,o=n+$+y(I=S+Z|0,S)|0,n=s,S=E,s=i,E=v,i=r,v=f,r=$+te+y(f=Z+ee|0,Z)|0}this._al=this._al+f|0,this._bl=this._bl+v|0,this._cl=this._cl+E|0,this._dl=this._dl+S|0,this._el=this._el+I|0,this._fl=this._fl+k|0,this._gl=this._gl+A|0,this._hl=this._hl+O|0,this._ah=this._ah+r+y(this._al,f)|0,this._bh=this._bh+i+y(this._bl,v)|0,this._ch=this._ch+s+y(this._cl,E)|0,this._dh=this._dh+n+y(this._dl,S)|0,this._eh=this._eh+o+y(this._el,I)|0,this._fh=this._fh+a+y(this._fl,k)|0,this._gh=this._gh+h+y(this._gl,A)|0,this._hh=this._hh+u+y(this._hl,O)|0},f.prototype._hash=function(){var e=h.allocUnsafe(64);function t(t,r,i){e.writeInt32BE(t,i),e.writeInt32BE(r,i+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},r.exports=f}],["cipher-base","/index.js",function(e,t,r,i,s,n){var o=__browser_require__(425,r).Buffer,a=__browser_require__(473,r).Transform,h=__browser_require__(484,r).StringDecoder;function c(e){a.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}__browser_require__(470,r)(c,a),c.prototype.update=function(e,t,r){"string"==typeof e&&(e=o.from(e,t));var i=this._update(e);return this.hashMode?this:(r&&(i=this._toString(i,r)),i)},c.prototype.setAutoPadding=function(){},c.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},c.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},c.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},c.prototype._transform=function(e,t,r){var i;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){i=e}finally{r(i)}},c.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},c.prototype._finalOrDigest=function(e){var t=this.__final()||o.alloc(0);return e&&(t=this._toString(t,e,!0)),t},c.prototype._toString=function(e,t,r){if(this._decoder||(this._decoder=new h(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var i=this._decoder.write(e);return r&&(i+=this._decoder.end()),i},r.exports=c}],["bpkg","/lib/builtins/string_decoder.js",function(e,t,r,i,s,n){var o=[["string_decoder","/lib/string_decoder.js",function(e,t,r,i,s){"use strict";var n=h(1).Buffer,o=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===o||!o(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=f,this.end=l,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=d,this.end=p,t=3;break;default:return this.write=b,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function c(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function u(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return r!==undefined?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function f(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function d(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function p(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function b(e){return e.toString(this.encoding)}function g(e){return e&&e.length?this.write(e):""}e.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if((t=this.fillLast(e))===undefined)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},a.prototype.text=function(e,t){var r=function(e,t,r){var i=t.length-1;if(i<r)return 0;var s=c(t[i]);if(s>=0)return s>0&&(e.lastNeed=s-1),s;if(--i<r||-2===s)return 0;if((s=c(t[i]))>=0)return s>0&&(e.lastNeed=s-2),s;if(--i<r||-2===s)return 0;if((s=c(t[i]))>=0)return s>0&&(2===s?s=0:e.lastNeed=s-3),s;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var i=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}}],["safe-buffer","/index.js",function(e,t,r,i,s){var n=__browser_require__(426,t),o=n.Buffer;function a(e,t){for(var r in e)t[r]=e[r]}function h(e,t,r){return o(e,t,r)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=n:(a(n,e),e.Buffer=h),a(o,h),h.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,r)},h.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=o(e);return t!==undefined?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},h.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},h.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}}]],a=[];function h(t){if(t>>>0!==t||t>o.length)return function(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}(t);for(;a.length<=t;)a.push(null);var n=a[t];if(n)return n.exports;var h=o[t],c=h[0],u=h[1],f=h[2],l=e,d=r;0!==t&&(d={id:"/"+c+u,exports:l={},parent:r.parent,filename:r.filename,loaded:!1,children:r.children,paths:r.paths}),a[t]=d;try{f.call(l,l,d,i,s,void 0)}catch(e){throw a[t]=null,e}return o[t]=null,0!==t&&(d.loaded=!0),d.exports}h(0)}],["bpkg","/lib/builtins/crypto.js",function(e,t,r,i,s,n){var o=[["crypto-browserify","/index.js",function(e,t,r,i,s){"use strict";e.randomBytes=e.rng=e.pseudoRandomBytes=e.prng=h(1),e.createHash=e.Hash=h(3),e.createHmac=e.Hmac=h(17);var n=h(20),o=Object.keys(n),a=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(o);e.getHashes=function(){return a};var c=h(22);e.pbkdf2=c.pbkdf2,e.pbkdf2Sync=c.pbkdf2Sync;var u=h(27);e.Cipher=u.Cipher,e.createCipher=u.createCipher,e.Cipheriv=u.Cipheriv,e.createCipheriv=u.createCipheriv,e.Decipher=u.Decipher,e.createDecipher=u.createDecipher,e.Decipheriv=u.Decipheriv,e.createDecipheriv=u.createDecipheriv,e.getCiphers=u.getCiphers,e.listCiphers=u.listCiphers;var f=h(56);e.DiffieHellmanGroup=f.DiffieHellmanGroup,e.createDiffieHellmanGroup=f.createDiffieHellmanGroup,e.getDiffieHellman=f.getDiffieHellman,e.createDiffieHellman=f.createDiffieHellman,e.DiffieHellman=f.DiffieHellman;var l=h(64);e.createSign=l.createSign,e.Sign=l.Sign,e.createVerify=l.createVerify,e.Verify=l.Verify,e.createECDH=h(119);var d=h(120);e.publicEncrypt=d.publicEncrypt,e.privateEncrypt=d.privateEncrypt,e.publicDecrypt=d.publicDecrypt,e.privateDecrypt=d.privateDecrypt;var p=h(126);e.randomFill=p.randomFill,e.randomFillSync=p.randomFillSync,e.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},e.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}}],["randombytes","/browser.js",function(e,t,r,i,s){"use strict";var n=65536,o=4294967295;var a=h(2).Buffer,c=global.crypto||global.msCrypto;c&&c.getRandomValues?t.exports=function(e,t){if(e>o)throw new RangeError("requested too many random bytes");var r=a.allocUnsafe(e);if(e>0)if(e>n)for(var i=0;i<e;i+=n)c.getRandomValues(r.slice(i,i+n));else c.getRandomValues(r);if("function"==typeof t)return process.nextTick(function(){t(null,r)});return r}:t.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}],["safe-buffer","/index.js",function(e,t,r,i,s){var n=__browser_require__(426,t),o=n.Buffer;function a(e,t){for(var r in e)t[r]=e[r]}function h(e,t,r){return o(e,t,r)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=n:(a(n,e),e.Buffer=h),a(o,h),h.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,r)},h.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=o(e);return t!==undefined?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},h.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},h.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}}],["create-hash","/browser.js",function(e,t,r,i,s){"use strict";var n=h(4),o=h(5),a=h(7),c=h(8),u=h(16);function f(e){u.call(this,"digest"),this._hash=e}n(f,u),f.prototype._update=function(e){this._hash.update(e)},f.prototype._final=function(){return this._hash.digest()},t.exports=function(e){return"md5"===(e=e.toLowerCase())?new o:"rmd160"===e||"ripemd160"===e?new a:new f(c(e))}}],["inherits","/inherits_browser.js",function(e,t,r,i,s){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}],["md5.js","/index.js",function(e,t,r,i,s){"use strict";var n=h(4),o=h(6),a=h(2).Buffer,c=new Array(16);function u(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function f(e,t){return e<<t|e>>>32-t}function l(e,t,r,i,s,n,o){return f(e+(t&r|~t&i)+s+n|0,o)+t|0}function d(e,t,r,i,s,n,o){return f(e+(t&i|r&~i)+s+n|0,o)+t|0}function p(e,t,r,i,s,n,o){return f(e+(t^r^i)+s+n|0,o)+t|0}function b(e,t,r,i,s,n,o){return f(e+(r^(t|~i))+s+n|0,o)+t|0}n(u,o),u.prototype._update=function(){for(var e=c,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var r=this._a,i=this._b,s=this._c,n=this._d;i=b(i=b(i=b(i=b(i=p(i=p(i=p(i=p(i=d(i=d(i=d(i=d(i=l(i=l(i=l(i=l(i,s=l(s,n=l(n,r=l(r,i,s,n,e[0],3614090360,7),i,s,e[1],3905402710,12),r,i,e[2],606105819,17),n,r,e[3],3250441966,22),s=l(s,n=l(n,r=l(r,i,s,n,e[4],4118548399,7),i,s,e[5],1200080426,12),r,i,e[6],2821735955,17),n,r,e[7],4249261313,22),s=l(s,n=l(n,r=l(r,i,s,n,e[8],1770035416,7),i,s,e[9],2336552879,12),r,i,e[10],4294925233,17),n,r,e[11],2304563134,22),s=l(s,n=l(n,r=l(r,i,s,n,e[12],1804603682,7),i,s,e[13],4254626195,12),r,i,e[14],2792965006,17),n,r,e[15],1236535329,22),s=d(s,n=d(n,r=d(r,i,s,n,e[1],4129170786,5),i,s,e[6],3225465664,9),r,i,e[11],643717713,14),n,r,e[0],3921069994,20),s=d(s,n=d(n,r=d(r,i,s,n,e[5],3593408605,5),i,s,e[10],38016083,9),r,i,e[15],3634488961,14),n,r,e[4],3889429448,20),s=d(s,n=d(n,r=d(r,i,s,n,e[9],568446438,5),i,s,e[14],3275163606,9),r,i,e[3],4107603335,14),n,r,e[8],1163531501,20),s=d(s,n=d(n,r=d(r,i,s,n,e[13],2850285829,5),i,s,e[2],4243563512,9),r,i,e[7],1735328473,14),n,r,e[12],2368359562,20),s=p(s,n=p(n,r=p(r,i,s,n,e[5],4294588738,4),i,s,e[8],2272392833,11),r,i,e[11],1839030562,16),n,r,e[14],4259657740,23),s=p(s,n=p(n,r=p(r,i,s,n,e[1],2763975236,4),i,s,e[4],1272893353,11),r,i,e[7],4139469664,16),n,r,e[10],3200236656,23),s=p(s,n=p(n,r=p(r,i,s,n,e[13],681279174,4),i,s,e[0],3936430074,11),r,i,e[3],3572445317,16),n,r,e[6],76029189,23),s=p(s,n=p(n,r=p(r,i,s,n,e[9],3654602809,4),i,s,e[12],3873151461,11),r,i,e[15],530742520,16),n,r,e[2],3299628645,23),s=b(s,n=b(n,r=b(r,i,s,n,e[0],4096336452,6),i,s,e[7],1126891415,10),r,i,e[14],2878612391,15),n,r,e[5],4237533241,21),s=b(s,n=b(n,r=b(r,i,s,n,e[12],1700485571,6),i,s,e[3],2399980690,10),r,i,e[10],4293915773,15),n,r,e[1],2240044497,21),s=b(s,n=b(n,r=b(r,i,s,n,e[8],1873313359,6),i,s,e[15],4264355552,10),r,i,e[6],2734768916,15),n,r,e[13],1309151649,21),s=b(s,n=b(n,r=b(r,i,s,n,e[4],4149444226,6),i,s,e[11],3174756917,10),r,i,e[2],718787259,15),n,r,e[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+i|0,this._c=this._c+s|0,this._d=this._d+n|0},u.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=a.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},t.exports=u}],["hash-base","/index.js",function(e,t,r,i,s){"use strict";var n=h(2).Buffer,o=__browser_require__(473,t).Transform;function a(e){o.call(this),this._block=n.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}h(4)(a,o),a.prototype._transform=function(e,t,r){var i=null;try{this.update(e,t)}catch(e){i=e}r(i)},a.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},a.prototype.update=function(e,t){if(function(e,t){if((null==e||!0!==e._isBuffer)&&"string"!=typeof e)throw new TypeError(t+" must be a string or a buffer")}(e,"Data"),this._finalized)throw new Error("Digest already called");null!=e&&!0===e._isBuffer||(e=n.from(e,t));for(var r=this._block,i=0;this._blockOffset+e.length-i>=this._blockSize;){for(var s=this._blockOffset;s<this._blockSize;)r[s++]=e[i++];this._update(),this._blockOffset=0}for(;i<e.length;)r[this._blockOffset++]=e[i++];for(var o=0,a=8*e.length;a>0;++o)this._length[o]+=a,(a=this._length[o]/4294967296|0)>0&&(this._length[o]-=4294967296*a);return this},a.prototype._update=function(){throw new Error("_update is not implemented")},a.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();e!==undefined&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return t},a.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=a}],["ripemd160","/index.js",function(e,t,r,i,s){"use strict";var n=__browser_require__(426,t).Buffer,o=h(4),a=h(6),c=new Array(16),u=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],d=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],p=[0,1518500249,1859775393,2400959708,2840853838],b=[1352829926,1548603684,1836072691,2053994217,0];function g(){a.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function m(e,t){return e<<t|e>>>32-t}function _(e,t,r,i,s,n,o,a){return m(e+(t^r^i)+n+o|0,a)+s|0}function w(e,t,r,i,s,n,o,a){return m(e+(t&r|~t&i)+n+o|0,a)+s|0}function y(e,t,r,i,s,n,o,a){return m(e+((t|~r)^i)+n+o|0,a)+s|0}function v(e,t,r,i,s,n,o,a){return m(e+(t&i|r&~i)+n+o|0,a)+s|0}function E(e,t,r,i,s,n,o,a){return m(e+(t^(r|~i))+n+o|0,a)+s|0}o(g,a),g.prototype._update=function(){for(var e=c,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var r=0|this._a,i=0|this._b,s=0|this._c,n=0|this._d,o=0|this._e,a=0|this._a,h=0|this._b,g=0|this._c,S=0|this._d,I=0|this._e,k=0;k<80;k+=1){var A,O;k<16?(A=_(r,i,s,n,o,e[u[k]],p[0],l[k]),O=E(a,h,g,S,I,e[f[k]],b[0],d[k])):k<32?(A=w(r,i,s,n,o,e[u[k]],p[1],l[k]),O=v(a,h,g,S,I,e[f[k]],b[1],d[k])):k<48?(A=y(r,i,s,n,o,e[u[k]],p[2],l[k]),O=y(a,h,g,S,I,e[f[k]],b[2],d[k])):k<64?(A=v(r,i,s,n,o,e[u[k]],p[3],l[k]),O=w(a,h,g,S,I,e[f[k]],b[3],d[k])):(A=E(r,i,s,n,o,e[u[k]],p[4],l[k]),O=_(a,h,g,S,I,e[f[k]],b[4],d[k])),r=o,o=n,n=m(s,10),s=i,i=A,a=I,I=S,S=m(g,10),g=h,h=O}var x=this._b+s+S|0;this._b=this._c+n+I|0,this._c=this._d+o+a|0,this._d=this._e+r+h|0,this._e=this._a+i+g|0,this._a=x},g.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=n.alloc?n.alloc(20):new n(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},t.exports=g}],["sha.js","/index.js",function(e,t,r,i,s){(e=t.exports=function(t){t=t.toLowerCase();var r=e[t];if(!r)throw new Error(t+" is not supported (we accept pull requests)");return new r}).sha=h(9),e.sha1=h(11),e.sha224=h(12),e.sha256=h(13),e.sha384=h(14),e.sha512=h(15)}],["sha.js","/sha.js",function(e,t,r,i,s){var n=h(4),o=h(10),a=h(2).Buffer,c=[1518500249,1859775393,-1894007588,-899497514],u=new Array(80);function f(){this.init(),this._w=u,o.call(this,64,56)}function l(e){return e<<30|e>>>2}function d(e,t,r,i){return 0===e?t&r|~t&i:2===e?t&r|t&i|r&i:t^r^i}n(f,o),f.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},f.prototype._update=function(e){for(var t,r=this._w,i=0|this._a,s=0|this._b,n=0|this._c,o=0|this._d,a=0|this._e,h=0;h<16;++h)r[h]=e.readInt32BE(4*h);for(;h<80;++h)r[h]=r[h-3]^r[h-8]^r[h-14]^r[h-16];for(var u=0;u<80;++u){var f=~~(u/20),p=0|((t=i)<<5|t>>>27)+d(f,s,n,o)+a+r[u]+c[f];a=o,o=n,n=l(s),s=i,i=p}this._a=i+this._a|0,this._b=s+this._b|0,this._c=n+this._c|0,this._d=o+this._d|0,this._e=a+this._e|0},f.prototype._hash=function(){var e=a.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},t.exports=f}],["sha.js","/hash.js",function(e,t,r,i,s){var n=h(2).Buffer;function o(e,t){this._block=n.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}o.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=n.from(e,t));for(var r=this._block,i=this._blockSize,s=e.length,o=this._len,a=0;a<s;){for(var h=o%i,c=Math.min(s-a,i-h),u=0;u<c;u++)r[h+u]=e[a+u];a+=c,(o+=c)%i==0&&this._update(r)}return this._len+=s,this},o.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var i=(4294967295&r)>>>0,s=(r-i)/4294967296;this._block.writeUInt32BE(s,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var n=this._hash();return e?n.toString(e):n},o.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=o}],["sha.js","/sha1.js",function(e,t,r,i,s){var n=h(4),o=h(10),a=h(2).Buffer,c=[1518500249,1859775393,-1894007588,-899497514],u=new Array(80);function f(){this.init(),this._w=u,o.call(this,64,56)}function l(e){return e<<5|e>>>27}function d(e){return e<<30|e>>>2}function p(e,t,r,i){return 0===e?t&r|~t&i:2===e?t&r|t&i|r&i:t^r^i}n(f,o),f.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},f.prototype._update=function(e){for(var t,r=this._w,i=0|this._a,s=0|this._b,n=0|this._c,o=0|this._d,a=0|this._e,h=0;h<16;++h)r[h]=e.readInt32BE(4*h);for(;h<80;++h)r[h]=(t=r[h-3]^r[h-8]^r[h-14]^r[h-16])<<1|t>>>31;for(var u=0;u<80;++u){var f=~~(u/20),b=l(i)+p(f,s,n,o)+a+r[u]+c[f]|0;a=o,o=n,n=d(s),s=i,i=b}this._a=i+this._a|0,this._b=s+this._b|0,this._c=n+this._c|0,this._d=o+this._d|0,this._e=a+this._e|0},f.prototype._hash=function(){var e=a.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},t.exports=f}],["sha.js","/sha224.js",function(e,t,r,i,s){var n=h(4),o=h(13),a=h(10),c=h(2).Buffer,u=new Array(64);function f(){this.init(),this._w=u,a.call(this,64,56)}n(f,o),f.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},f.prototype._hash=function(){var e=c.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},t.exports=f}],["sha.js","/sha256.js",function(e,t,r,i,s){var n=h(4),o=h(10),a=h(2).Buffer,c=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],u=new Array(64);function f(){this.init(),this._w=u,o.call(this,64,56)}function l(e,t,r){return r^e&(t^r)}function d(e,t,r){return e&t|r&(e|t)}function p(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function b(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function g(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}n(f,o),f.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},f.prototype._update=function(e){for(var t,r=this._w,i=0|this._a,s=0|this._b,n=0|this._c,o=0|this._d,a=0|this._e,h=0|this._f,u=0|this._g,f=0|this._h,m=0;m<16;++m)r[m]=e.readInt32BE(4*m);for(;m<64;++m)r[m]=0|(((t=r[m-2])>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)+r[m-7]+g(r[m-15])+r[m-16];for(var _=0;_<64;++_){var w=f+b(a)+l(a,h,u)+c[_]+r[_]|0,y=p(i)+d(i,s,n)|0;f=u,u=h,h=a,a=o+w|0,o=n,n=s,s=i,i=w+y|0}this._a=i+this._a|0,this._b=s+this._b|0,this._c=n+this._c|0,this._d=o+this._d|0,this._e=a+this._e|0,this._f=h+this._f|0,this._g=u+this._g|0,this._h=f+this._h|0},f.prototype._hash=function(){var e=a.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},t.exports=f}],["sha.js","/sha384.js",function(e,t,r,i,s){var n=h(4),o=h(15),a=h(10),c=h(2).Buffer,u=new Array(160);function f(){this.init(),this._w=u,a.call(this,128,112)}n(f,o),f.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},f.prototype._hash=function(){var e=c.allocUnsafe(48);function t(t,r,i){e.writeInt32BE(t,i),e.writeInt32BE(r,i+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},t.exports=f}],["sha.js","/sha512.js",function(e,t,r,i,s){var n=h(4),o=h(10),a=h(2).Buffer,c=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],u=new Array(160);function f(){this.init(),this._w=u,o.call(this,128,112)}function l(e,t,r){return r^e&(t^r)}function d(e,t,r){return e&t|r&(e|t)}function p(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function b(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function g(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function m(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function _(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function w(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function y(e,t){return e>>>0<t>>>0?1:0}n(f,o),f.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},f.prototype._update=function(e){for(var t=this._w,r=0|this._ah,i=0|this._bh,s=0|this._ch,n=0|this._dh,o=0|this._eh,a=0|this._fh,h=0|this._gh,u=0|this._hh,f=0|this._al,v=0|this._bl,E=0|this._cl,S=0|this._dl,I=0|this._el,k=0|this._fl,A=0|this._gl,O=0|this._hl,x=0;x<32;x+=2)t[x]=e.readInt32BE(4*x),t[x+1]=e.readInt32BE(4*x+4);for(;x<160;x+=2){var R=t[x-30],M=t[x-30+1],P=g(R,M),B=m(M,R),N=_(R=t[x-4],M=t[x-4+1]),T=w(M,R),C=t[x-14],q=t[x-14+1],j=t[x-32],D=t[x-32+1],U=B+q|0,L=P+C+y(U,B)|0;L=(L=L+N+y(U=U+T|0,T)|0)+j+y(U=U+D|0,D)|0,t[x]=L,t[x+1]=U}for(var z=0;z<160;z+=2){L=t[z],U=t[z+1];var F=d(r,i,s),H=d(f,v,E),V=p(r,f),K=p(f,r),W=b(o,I),G=b(I,o),Y=c[z],X=c[z+1],J=l(o,a,h),Q=l(I,k,A),Z=O+G|0,$=u+W+y(Z,O)|0;$=($=($=$+J+y(Z=Z+Q|0,Q)|0)+Y+y(Z=Z+X|0,X)|0)+L+y(Z=Z+U|0,U)|0;var ee=K+H|0,te=V+F+y(ee,K)|0;u=h,O=A,h=a,A=k,a=o,k=I,o=n+$+y(I=S+Z|0,S)|0,n=s,S=E,s=i,E=v,i=r,v=f,r=$+te+y(f=Z+ee|0,Z)|0}this._al=this._al+f|0,this._bl=this._bl+v|0,this._cl=this._cl+E|0,this._dl=this._dl+S|0,this._el=this._el+I|0,this._fl=this._fl+k|0,this._gl=this._gl+A|0,this._hl=this._hl+O|0,this._ah=this._ah+r+y(this._al,f)|0,this._bh=this._bh+i+y(this._bl,v)|0,this._ch=this._ch+s+y(this._cl,E)|0,this._dh=this._dh+n+y(this._dl,S)|0,this._eh=this._eh+o+y(this._el,I)|0,this._fh=this._fh+a+y(this._fl,k)|0,this._gh=this._gh+h+y(this._gl,A)|0,this._hh=this._hh+u+y(this._hl,O)|0},f.prototype._hash=function(){var e=a.allocUnsafe(64);function t(t,r,i){e.writeInt32BE(t,i),e.writeInt32BE(r,i+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},t.exports=f}],["cipher-base","/index.js",function(e,t,r,i,s){var n=h(2).Buffer,o=__browser_require__(473,t).Transform,a=__browser_require__(484,t).StringDecoder;function c(e){o.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}h(4)(c,o),c.prototype.update=function(e,t,r){"string"==typeof e&&(e=n.from(e,t));var i=this._update(e);return this.hashMode?this:(r&&(i=this._toString(i,r)),i)},c.prototype.setAutoPadding=function(){},c.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},c.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},c.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},c.prototype._transform=function(e,t,r){var i;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){i=e}finally{r(i)}},c.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},c.prototype._finalOrDigest=function(e){var t=this.__final()||n.alloc(0);return e&&(t=this._toString(t,e,!0)),t},c.prototype._toString=function(e,t,r){if(this._decoder||(this._decoder=new a(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var i=this._decoder.write(e);return r&&(i+=this._decoder.end()),i},t.exports=c}],["create-hmac","/browser.js",function(e,t,r,i,s){"use strict";var n=h(4),o=h(18),a=h(16),c=h(2).Buffer,u=h(19),f=h(7),l=h(8),d=c.alloc(128);function p(e,t){a.call(this,"digest"),"string"==typeof t&&(t=c.from(t));var r="sha512"===e||"sha384"===e?128:64;(this._alg=e,this._key=t,t.length>r)?t=("rmd160"===e?new f:l(e)).update(t).digest():t.length<r&&(t=c.concat([t,d],r));for(var i=this._ipad=c.allocUnsafe(r),s=this._opad=c.allocUnsafe(r),n=0;n<r;n++)i[n]=54^t[n],s[n]=92^t[n];this._hash="rmd160"===e?new f:l(e),this._hash.update(i)}n(p,a),p.prototype._update=function(e){this._hash.update(e)},p.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new f:l(this._alg)).update(this._opad).update(e).digest()},t.exports=function(e,t){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new p("rmd160",t):"md5"===e?new o(u,t):new p(e,t)}}],["create-hmac","/legacy.js",function(e,t,r,i,s){"use strict";var n=h(4),o=h(2).Buffer,a=h(16),c=o.alloc(128),u=64;function f(e,t){a.call(this,"digest"),"string"==typeof t&&(t=o.from(t)),this._alg=e,this._key=t,t.length>u?t=e(t):t.length<u&&(t=o.concat([t,c],u));for(var r=this._ipad=o.allocUnsafe(u),i=this._opad=o.allocUnsafe(u),s=0;s<u;s++)r[s]=54^t[s],i[s]=92^t[s];this._hash=[r]}n(f,a),f.prototype._update=function(e){this._hash.push(e)},f.prototype._final=function(){var e=this._alg(o.concat(this._hash));return this._alg(o.concat([this._opad,e]))},t.exports=f}],["create-hash","/md5.js",function(e,t,r,i,s){var n=h(5);t.exports=function(e){return(new n).update(e).digest()}}],["browserify-sign","/algos.js",function(e,t,r,i,s){t.exports=h(21)}],["browserify-sign","/browser/algorithms.json",function(e,t,r,i,s){t.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}}],["pbkdf2","/browser.js",function(e,t,r,i,s){e.pbkdf2=h(23),e.pbkdf2Sync=h(26)}],["pbkdf2","/lib/async.js",function(e,t,r,i,s){var n,o=h(24),a=h(25),c=h(26),u=h(2).Buffer,f=global.crypto&&global.crypto.subtle,l={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},d=[];function p(e,t,r,i,s){return f.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]).then(function(e){return f.deriveBits({name:"PBKDF2",salt:t,iterations:r,hash:{name:s}},e,i<<3)}).then(function(e){return u.from(e)})}t.exports=function(e,t,r,i,s,h){"function"==typeof s&&(h=s,s=undefined);var b=l[(s=s||"sha1").toLowerCase()];if(!b||"function"!=typeof global.Promise)return process.nextTick(function(){var n;try{n=c(e,t,r,i,s)}catch(e){return h(e)}h(null,n)});if(o(e,t,r,i),"function"!=typeof h)throw new Error("No callback provided to pbkdf2");null!=e&&!0===e._isBuffer||(e=u.from(e,a)),null!=t&&!0===t._isBuffer||(t=u.from(t,a)),function(e,t){e.then(function(e){process.nextTick(function(){t(null,e)})},function(e){process.nextTick(function(){t(e)})})}(function(e){if(global.process&&!global.process.browser)return Promise.resolve(!1);if(!f||!f.importKey||!f.deriveBits)return Promise.resolve(!1);if(d[e]!==undefined)return d[e];var t=p(n=n||u.alloc(8),n,10,128,e).then(function(){return!0}).catch(function(){return!1});return d[e]=t,t}(b).then(function(n){return n?p(e,t,r,i,b):c(e,t,r,i,s)}),h)}}],["pbkdf2","/lib/precondition.js",function(e,t,r,i,s){var n=Math.pow(2,30)-1;function o(e,t){if("string"!=typeof e&&(null==e||!0!==e._isBuffer))throw new TypeError(t+" must be a buffer or string")}t.exports=function(e,t,r,i){if(o(e,"Password"),o(t,"Salt"),"number"!=typeof r)throw new TypeError("Iterations not a number");if(r<0)throw new TypeError("Bad iterations");if("number"!=typeof i)throw new TypeError("Key length not a number");if(i<0||i>n||i!=i)throw new TypeError("Bad key length")}}],["pbkdf2","/lib/default-encoding.js",function(e,t,r,i,s){var n;process.browser?n="utf-8":n=parseInt(process.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary";t.exports=n}],["pbkdf2","/lib/sync-browser.js",function(e,t,r,i,s){var n=h(19),o=h(7),a=h(8),c=h(24),u=h(25),f=h(2).Buffer,l=f.alloc(128),d={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function p(e,t,r){var i=function(e){return"rmd160"===e||"ripemd160"===e?function(e){return(new o).update(e).digest()}:"md5"===e?n:function(t){return a(e).update(t).digest()}}(e),s="sha512"===e||"sha384"===e?128:64;t.length>s?t=i(t):t.length<s&&(t=f.concat([t,l],s));for(var h=f.allocUnsafe(s+d[e]),c=f.allocUnsafe(s+d[e]),u=0;u<s;u++)h[u]=54^t[u],c[u]=92^t[u];var p=f.allocUnsafe(s+r+4);h.copy(p,0,0,s),this.ipad1=p,this.ipad2=h,this.opad=c,this.alg=e,this.blocksize=s,this.hash=i,this.size=d[e]}p.prototype.run=function(e,t){return e.copy(t,this.blocksize),this.hash(t).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=function(e,t,r,i,s){c(e,t,r,i),null!=e&&!0===e._isBuffer||(e=f.from(e,u)),null!=t&&!0===t._isBuffer||(t=f.from(t,u));var n=new p(s=s||"sha1",e,t.length),o=f.allocUnsafe(i),a=f.allocUnsafe(t.length+4);t.copy(a,0,0,t.length);for(var h=0,l=d[s],b=Math.ceil(i/l),g=1;g<=b;g++){a.writeUInt32BE(g,t.length);for(var m=n.run(a,n.ipad1),_=m,w=1;w<r;w++){_=n.run(_,n.ipad2);for(var y=0;y<l;y++)m[y]^=_[y]}m.copy(o,h),h+=l}return o}}],["browserify-cipher","/browser.js",function(e,t,r,i,s){var n=h(28),o=h(36),a=h(38),c=h(55),u=h(53);function f(e,t,r){if(e=e.toLowerCase(),a[e])return o.createCipheriv(e,t,r);if(c[e])return new n({key:t,iv:r,mode:e});throw new TypeError("invalid suite type")}function l(e,t,r){if(e=e.toLowerCase(),a[e])return o.createDecipheriv(e,t,r);if(c[e])return new n({key:t,iv:r,mode:e,decrypt:!0});throw new TypeError("invalid suite type")}e.createCipher=e.Cipher=function(e,t){var r,i;if(e=e.toLowerCase(),a[e])r=a[e].key,i=a[e].iv;else{if(!c[e])throw new TypeError("invalid suite type");r=8*c[e].key,i=c[e].iv}var s=u(t,!1,r,i);return f(e,s.key,s.iv)},e.createCipheriv=e.Cipheriv=f,e.createDecipher=e.Decipher=function(e,t){var r,i;if(e=e.toLowerCase(),a[e])r=a[e].key,i=a[e].iv;else{if(!c[e])throw new TypeError("invalid suite type");r=8*c[e].key,i=c[e].iv}var s=u(t,!1,r,i);return l(e,s.key,s.iv)},e.createDecipheriv=e.Decipheriv=l,e.listCiphers=e.getCiphers=function(){return Object.keys(c).concat(o.getCiphers())}}],["browserify-des","/index.js",function(e,t,r,i,s){var n=h(16),o=h(29),a=h(4),c=h(2).Buffer,u={"des-ede3-cbc":o.CBC.instantiate(o.EDE),"des-ede3":o.EDE,"des-ede-cbc":o.CBC.instantiate(o.EDE),"des-ede":o.EDE,"des-cbc":o.CBC.instantiate(o.DES),"des-ecb":o.DES};function f(e){n.call(this);var t,r=e.mode.toLowerCase(),i=u[r];t=e.decrypt?"decrypt":"encrypt";var s=e.key;null!=s&&!0===s._isBuffer||(s=c.from(s)),"des-ede"!==r&&"des-ede-cbc"!==r||(s=c.concat([s,s.slice(0,8)]));var o=e.iv;null!=o&&!0===o._isBuffer||(o=c.from(o)),this._des=i.create({key:s,iv:o,type:t})}u.des=u["des-cbc"],u.des3=u["des-ede3-cbc"],t.exports=f,a(f,n),f.prototype._update=function(e){return c.from(this._des.update(e))},f.prototype._final=function(){return c.from(this._des.final())}}],["des.js","/lib/des.js",function(e,t,r,i,s){"use strict";e.utils=h(30),e.Cipher=h(31),e.DES=h(33),e.CBC=h(34),e.EDE=h(35)}],["des.js","/lib/des/utils.js",function(e,t,r,i,s){"use strict";e.readUInt32BE=function(e,t){return(e[0+t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])>>>0},e.writeUInt32BE=function(e,t,r){e[0+r]=t>>>24,e[1+r]=t>>>16&255,e[2+r]=t>>>8&255,e[3+r]=255&t},e.ip=function(e,t,r,i){for(var s=0,n=0,o=6;o>=0;o-=2){for(var a=0;a<=24;a+=8)s<<=1,s|=t>>>a+o&1;for(a=0;a<=24;a+=8)s<<=1,s|=e>>>a+o&1}for(o=6;o>=0;o-=2){for(a=1;a<=25;a+=8)n<<=1,n|=t>>>a+o&1;for(a=1;a<=25;a+=8)n<<=1,n|=e>>>a+o&1}r[i+0]=s>>>0,r[i+1]=n>>>0},e.rip=function(e,t,r,i){for(var s=0,n=0,o=0;o<4;o++)for(var a=24;a>=0;a-=8)s<<=1,s|=t>>>a+o&1,s<<=1,s|=e>>>a+o&1;for(o=4;o<8;o++)for(a=24;a>=0;a-=8)n<<=1,n|=t>>>a+o&1,n<<=1,n|=e>>>a+o&1;r[i+0]=s>>>0,r[i+1]=n>>>0},e.pc1=function(e,t,r,i){for(var s=0,n=0,o=7;o>=5;o--){for(var a=0;a<=24;a+=8)s<<=1,s|=t>>a+o&1;for(a=0;a<=24;a+=8)s<<=1,s|=e>>a+o&1}for(a=0;a<=24;a+=8)s<<=1,s|=t>>a+o&1;for(o=1;o<=3;o++){for(a=0;a<=24;a+=8)n<<=1,n|=t>>a+o&1;for(a=0;a<=24;a+=8)n<<=1,n|=e>>a+o&1}for(a=0;a<=24;a+=8)n<<=1,n|=e>>a+o&1;r[i+0]=s>>>0,r[i+1]=n>>>0},e.r28shl=function(e,t){return e<<t&268435455|e>>>28-t};var n=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];e.pc2=function(e,t,r,i){for(var s=0,o=0,a=n.length>>>1,h=0;h<a;h++)s<<=1,s|=e>>>n[h]&1;for(h=a;h<n.length;h++)o<<=1,o|=t>>>n[h]&1;r[i+0]=s>>>0,r[i+1]=o>>>0},e.expand=function(e,t,r){var i=0,s=0;i=(1&e)<<5|e>>>27;for(var n=23;n>=15;n-=4)i<<=6,i|=e>>>n&63;for(n=11;n>=3;n-=4)s|=e>>>n&63,s<<=6;s|=(31&e)<<1|e>>>31,t[r+0]=i>>>0,t[r+1]=s>>>0};var o=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];e.substitute=function(e,t){for(var r=0,i=0;i<4;i++){r<<=4,r|=o[64*i+(e>>>18-6*i&63)]}for(i=0;i<4;i++){r<<=4,r|=o[256+64*i+(t>>>18-6*i&63)]}return r>>>0};var a=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];e.permute=function(e){for(var t=0,r=0;r<a.length;r++)t<<=1,t|=e>>>a[r]&1;return t>>>0},e.padSplit=function(e,t,r){for(var i=e.toString(2);i.length<t;)i="0"+i;for(var s=[],n=0;n<t;n+=r)s.push(i.slice(n,n+r));return s.join(" ")}}],["des.js","/lib/des/cipher.js",function(e,t,r,i,s){"use strict";var n=h(32);function o(e){this.options=e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}t.exports=o,o.prototype._init=function(){},o.prototype.update=function(e){return 0===e.length?[]:"decrypt"===this.type?this._updateDecrypt(e):this._updateEncrypt(e)},o.prototype._buffer=function(e,t){for(var r=Math.min(this.buffer.length-this.bufferOff,e.length-t),i=0;i<r;i++)this.buffer[this.bufferOff+i]=e[t+i];return this.bufferOff+=r,r},o.prototype._flushBuffer=function(e,t){return this._update(this.buffer,0,e,t),this.bufferOff=0,this.blockSize},o.prototype._updateEncrypt=function(e){var t=0,r=0,i=(this.bufferOff+e.length)/this.blockSize|0,s=new Array(i*this.blockSize);0!==this.bufferOff&&(t+=this._buffer(e,t),this.bufferOff===this.buffer.length&&(r+=this._flushBuffer(s,r)));for(var n=e.length-(e.length-t)%this.blockSize;t<n;t+=this.blockSize)this._update(e,t,s,r),r+=this.blockSize;for(;t<e.length;t++,this.bufferOff++)this.buffer[this.bufferOff]=e[t];return s},o.prototype._updateDecrypt=function(e){for(var t=0,r=0,i=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,s=new Array(i*this.blockSize);i>0;i--)t+=this._buffer(e,t),r+=this._flushBuffer(s,r);return t+=this._buffer(e,t),s},o.prototype.final=function(e){var t,r;return e&&(t=this.update(e)),r="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),t?t.concat(r):r},o.prototype._pad=function(e,t){if(0===t)return!1;for(;t<e.length;)e[t++]=0;return!0},o.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e},o.prototype._unpad=function(e){return e},o.prototype._finalDecrypt=function(){n.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)}}],["minimalistic-assert","/index.js",function(e,t,r,i,s){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}t.exports=n,n.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)}}],["des.js","/lib/des/des.js",function(e,t,r,i,s){"use strict";var n=h(32),o=h(4),a=h(29),c=a.utils,u=a.Cipher;function f(e){u.call(this,e);var t=new function(){this.tmp=new Array(2),this.keys=null};this._desState=t,this.deriveKeys(t,e.key)}o(f,u),t.exports=f,f.create=function(e){return new f(e)};var l=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];f.prototype.deriveKeys=function(e,t){e.keys=new Array(32),n.equal(t.length,this.blockSize,"Invalid key length");var r=c.readUInt32BE(t,0),i=c.readUInt32BE(t,4);c.pc1(r,i,e.tmp,0),r=e.tmp[0],i=e.tmp[1];for(var s=0;s<e.keys.length;s+=2){var o=l[s>>>1];r=c.r28shl(r,o),i=c.r28shl(i,o),c.pc2(r,i,e.keys,s)}},f.prototype._update=function(e,t,r,i){var s=this._desState,n=c.readUInt32BE(e,t),o=c.readUInt32BE(e,t+4);c.ip(n,o,s.tmp,0),n=s.tmp[0],o=s.tmp[1],"encrypt"===this.type?this._encrypt(s,n,o,s.tmp,0):this._decrypt(s,n,o,s.tmp,0),n=s.tmp[0],o=s.tmp[1],c.writeUInt32BE(r,n,i),c.writeUInt32BE(r,o,i+4)},f.prototype._pad=function(e,t){for(var r=e.length-t,i=t;i<e.length;i++)e[i]=r;return!0},f.prototype._unpad=function(e){for(var t=e[e.length-1],r=e.length-t;r<e.length;r++)n.equal(e[r],t);return e.slice(0,e.length-t)},f.prototype._encrypt=function(e,t,r,i,s){for(var n=t,o=r,a=0;a<e.keys.length;a+=2){var h=e.keys[a],u=e.keys[a+1];c.expand(o,e.tmp,0),h^=e.tmp[0],u^=e.tmp[1];var f=c.substitute(h,u),l=o;o=(n^c.permute(f))>>>0,n=l}c.rip(o,n,i,s)},f.prototype._decrypt=function(e,t,r,i,s){for(var n=r,o=t,a=e.keys.length-2;a>=0;a-=2){var h=e.keys[a],u=e.keys[a+1];c.expand(n,e.tmp,0),h^=e.tmp[0],u^=e.tmp[1];var f=c.substitute(h,u),l=n;n=(o^c.permute(f))>>>0,o=l}c.rip(n,o,i,s)}}],["des.js","/lib/des/cbc.js",function(e,t,r,i,s){"use strict";var n=h(32),o=h(4),a={};e.instantiate=function(e){function t(t){e.call(this,t),this._cbcInit()}o(t,e);for(var r=Object.keys(a),i=0;i<r.length;i++){var s=r[i];t.prototype[s]=a[s]}return t.create=function(e){return new t(e)},t},a._cbcInit=function(){var e=new function(e){n.equal(e.length,8,"Invalid IV length"),this.iv=new Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}(this.options.iv);this._cbcState=e},a._update=function(e,t,r,i){var s=this._cbcState,n=this.constructor.super_.prototype,o=s.iv;if("encrypt"===this.type){for(var a=0;a<this.blockSize;a++)o[a]^=e[t+a];n._update.call(this,o,0,r,i);for(a=0;a<this.blockSize;a++)o[a]=r[i+a]}else{n._update.call(this,e,t,r,i);for(a=0;a<this.blockSize;a++)r[i+a]^=o[a];for(a=0;a<this.blockSize;a++)o[a]=e[t+a]}}}],["des.js","/lib/des/ede.js",function(e,t,r,i,s){"use strict";var n=h(32),o=h(4),a=h(29),c=a.Cipher,u=a.DES;function f(e){c.call(this,e);var t=new function(e,t){n.equal(t.length,24,"Invalid key length");var r=t.slice(0,8),i=t.slice(8,16),s=t.slice(16,24);this.ciphers="encrypt"===e?[u.create({type:"encrypt",key:r}),u.create({type:"decrypt",key:i}),u.create({type:"encrypt",key:s})]:[u.create({type:"decrypt",key:s}),u.create({type:"encrypt",key:i}),u.create({type:"decrypt",key:r})]}(this.type,this.options.key);this._edeState=t}o(f,c),t.exports=f,f.create=function(e){return new f(e)},f.prototype._update=function(e,t,r,i){var s=this._edeState;s.ciphers[0]._update(e,t,r,i),s.ciphers[1]._update(r,i,r,i),s.ciphers[2]._update(r,i,r,i)},f.prototype._pad=u.prototype._pad,f.prototype._unpad=u.prototype._unpad}],["browserify-aes","/browser.js",function(e,t,r,i,s){var n=h(37),o=h(54),a=h(48);e.createCipher=e.Cipher=n.createCipher,e.createCipheriv=e.Cipheriv=n.createCipheriv,e.createDecipher=e.Decipher=o.createDecipher,e.createDecipheriv=e.Decipheriv=o.createDecipheriv,e.listCiphers=e.getCiphers=function(){return Object.keys(a)}}],["browserify-aes","/encrypter.js",function(e,t,r,i,s){var n=h(38),o=h(49),a=h(2).Buffer,c=h(52),u=h(16),f=h(50),l=h(53);function d(e,t,r){u.call(this),this._cache=new b,this._cipher=new f.AES(t),this._prev=a.from(r),this._mode=e,this._autopadding=!0}h(4)(d,u),d.prototype._update=function(e){var t,r;this._cache.add(e);for(var i=[];t=this._cache.get();)r=this._mode.encrypt(this,t),i.push(r);return a.concat(i)};var p=a.alloc(16,16);function b(){this.cache=a.allocUnsafe(0)}function g(e,t,r){var i=n[e.toLowerCase()];if(!i)throw new TypeError("invalid suite type");if("string"==typeof t&&(t=a.from(t)),t.length!==i.key/8)throw new TypeError("invalid key length "+t.length);if("string"==typeof r&&(r=a.from(r)),"GCM"!==i.mode&&r.length!==i.iv)throw new TypeError("invalid iv length "+r.length);return"stream"===i.type?new c(i.module,t,r):"auth"===i.type?new o(i.module,t,r):new d(i.module,t,r)}d.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if(!e.equals(p))throw this._cipher.scrub(),new Error("data not multiple of block length")},d.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},b.prototype.add=function(e){this.cache=a.concat([this.cache,e])},b.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},b.prototype.flush=function(){for(var e=16-this.cache.length,t=a.allocUnsafe(e),r=-1;++r<e;)t.writeUInt8(e,r);return a.concat([this.cache,t])},e.createCipheriv=g,e.createCipher=function(e,t){var r=n[e.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var i=l(t,!1,r.key,r.iv);return g(e,i.key,i.iv)}}],["browserify-aes","/modes/index.js",function(e,t,r,i,s){var n={ECB:h(39),CBC:h(40),CFB:h(42),CFB8:h(43),CFB1:h(44),OFB:h(45),CTR:h(46),GCM:h(46)},o=h(48);for(var a in o)o[a].module=n[o[a].mode];t.exports=o}],["browserify-aes","/modes/ecb.js",function(e,t,r,i,s){e.encrypt=function(e,t){return e._cipher.encryptBlock(t)},e.decrypt=function(e,t){return e._cipher.decryptBlock(t)}}],["browserify-aes","/modes/cbc.js",function(e,t,r,i,s){var n=h(41);e.encrypt=function(e,t){var r=n(t,e._prev);return e._prev=e._cipher.encryptBlock(r),e._prev},e.decrypt=function(e,t){var r=e._prev;e._prev=t;var i=e._cipher.decryptBlock(t);return n(i,r)}}],["buffer-xor","/index.js",function(e,t,r,i,s){t.exports=function(e,t){for(var r=Math.min(e.length,t.length),i=new Buffer(r),s=0;s<r;++s)i[s]=e[s]^t[s];return i}}],["browserify-aes","/modes/cfb.js",function(e,t,r,i,s){var n=h(2).Buffer,o=h(41);function a(e,t,r){var i=t.length,s=o(t,e._cache);return e._cache=e._cache.slice(i),e._prev=n.concat([e._prev,r?t:s]),s}e.encrypt=function(e,t,r){for(var i,s=n.allocUnsafe(0);t.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=n.allocUnsafe(0)),!(e._cache.length<=t.length)){s=n.concat([s,a(e,t,r)]);break}i=e._cache.length,s=n.concat([s,a(e,t.slice(0,i),r)]),t=t.slice(i)}return s}}],["browserify-aes","/modes/cfb8.js",function(e,t,r,i,s){var n=h(2).Buffer;function o(e,t,r){var i=e._cipher.encryptBlock(e._prev)[0]^t;return e._prev=n.concat([e._prev.slice(1),n.from([r?t:i])]),i}e.encrypt=function(e,t,r){for(var i=t.length,s=n.allocUnsafe(i),a=-1;++a<i;)s[a]=o(e,t[a],r);return s}}],["browserify-aes","/modes/cfb1.js",function(e,t,r,i,s){var n=h(2).Buffer;function o(e,t,r){for(var i,s,n,o=-1,h=0;++o<8;)i=e._cipher.encryptBlock(e._prev),s=t&1<<7-o?128:0,h+=(128&(n=i[0]^s))>>o%8,e._prev=a(e._prev,r?s:n);return h}function a(e,t){var r=e.length,i=-1,s=n.allocUnsafe(e.length);for(e=n.concat([e,n.from([t])]);++i<r;)s[i]=e[i]<<1|e[i+1]>>7;return s}e.encrypt=function(e,t,r){for(var i=t.length,s=n.allocUnsafe(i),a=-1;++a<i;)s[a]=o(e,t[a],r);return s}}],["browserify-aes","/modes/ofb.js",function(e,t,r,i,s){var n=h(41);function o(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}e.encrypt=function(e,t){for(;e._cache.length<t.length;)e._cache=Buffer.concat([e._cache,o(e)]);var r=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),n(t,r)}}],["browserify-aes","/modes/ctr.js",function(e,t,r,i,s){var n=h(41),o=h(2).Buffer,a=h(47);function c(e){var t=e._cipher.encryptBlockRaw(e._prev);return a(e._prev),t}e.encrypt=function(e,t){var r=Math.ceil(t.length/16),i=e._cache.length;e._cache=o.concat([e._cache,o.allocUnsafe(16*r)]);for(var s=0;s<r;s++){var a=c(e),h=i+16*s;e._cache.writeUInt32BE(a[0],h+0),e._cache.writeUInt32BE(a[1],h+4),e._cache.writeUInt32BE(a[2],h+8),e._cache.writeUInt32BE(a[3],h+12)}var u=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),n(t,u)}}],["browserify-aes","/incr32.js",function(e,t,r,i,s){t.exports=function(e){for(var t,r=e.length;r--;){if(255!==(t=e.readUInt8(r))){t++,e.writeUInt8(t,r);break}e.writeUInt8(0,r)}}}],["browserify-aes","/modes/list.json",function(e,t,r,i,s){t.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}}],["browserify-aes","/authCipher.js",function(e,t,r,i,s){var n=h(50),o=h(2).Buffer,a=h(16),c=h(4),u=h(51),f=h(41),l=h(47);function d(e,t,r,i){a.call(this);var s=o.alloc(4,0);this._cipher=new n.AES(t);var h=this._cipher.encryptBlock(s);this._ghash=new u(h),r=function(e,t,r){if(12===t.length)return e._finID=o.concat([t,o.from([0,0,0,1])]),o.concat([t,o.from([0,0,0,2])]);var i=new u(r),s=t.length,n=s%16;i.update(t),n&&(n=16-n,i.update(o.alloc(n,0))),i.update(o.alloc(8,0));var a=8*s,h=o.alloc(8);h.writeUIntBE(a,0,8),i.update(h),e._finID=i.state;var c=o.from(e._finID);return l(c),c}(this,r,h),this._prev=o.from(r),this._cache=o.allocUnsafe(0),this._secCache=o.allocUnsafe(0),this._decrypt=i,this._alen=0,this._len=0,this._mode=e,this._authTag=null,this._called=!1}c(d,a),d.prototype._update=function(e){if(!this._called&&this._alen){var t=16-this._alen%16;t<16&&(t=o.alloc(t,0),this._ghash.update(t))}this._called=!0;var r=this._mode.encrypt(this,e);return this._decrypt?this._ghash.update(e):this._ghash.update(r),this._len+=e.length,r},d.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var e=f(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(e,t){var r=0;e.length!==t.length&&r++;for(var i=Math.min(e.length,t.length),s=0;s<i;++s)r+=e[s]^t[s];return r}(e,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=e,this._cipher.scrub()},d.prototype.getAuthTag=function(){if(this._decrypt||null==this._authTag||!0!==this._authTag._isBuffer)throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},d.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},d.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length},t.exports=d}],["browserify-aes","/aes.js",function(e,t,r,i,s){var n=h(2).Buffer;function o(e){null!=e&&!0===e._isBuffer||(e=n.from(e));for(var t=e.length/4|0,r=new Array(t),i=0;i<t;i++)r[i]=e.readUInt32BE(4*i);return r}function a(e){for(;0<e.length;e++)e[0]=0}function c(e,t,r,i,s){for(var n,o,a,h,c=r[0],u=r[1],f=r[2],l=r[3],d=e[0]^t[0],p=e[1]^t[1],b=e[2]^t[2],g=e[3]^t[3],m=4,_=1;_<s;_++)n=c[d>>>24]^u[p>>>16&255]^f[b>>>8&255]^l[255&g]^t[m++],o=c[p>>>24]^u[b>>>16&255]^f[g>>>8&255]^l[255&d]^t[m++],a=c[b>>>24]^u[g>>>16&255]^f[d>>>8&255]^l[255&p]^t[m++],h=c[g>>>24]^u[d>>>16&255]^f[p>>>8&255]^l[255&b]^t[m++],d=n,p=o,b=a,g=h;return n=(i[d>>>24]<<24|i[p>>>16&255]<<16|i[b>>>8&255]<<8|i[255&g])^t[m++],o=(i[p>>>24]<<24|i[b>>>16&255]<<16|i[g>>>8&255]<<8|i[255&d])^t[m++],a=(i[b>>>24]<<24|i[g>>>16&255]<<16|i[d>>>8&255]<<8|i[255&p])^t[m++],h=(i[g>>>24]<<24|i[d>>>16&255]<<16|i[p>>>8&255]<<8|i[255&b])^t[m++],[n>>>=0,o>>>=0,a>>>=0,h>>>=0]}var u=[0,1,2,4,8,16,32,64,128,27,54],f=function(){for(var e=new Array(256),t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var r=[],i=[],s=[[],[],[],[]],n=[[],[],[],[]],o=0,a=0,h=0;h<256;++h){var c=a^a<<1^a<<2^a<<3^a<<4;c=c>>>8^255&c^99,r[o]=c,i[c]=o;var u=e[o],f=e[u],l=e[f],d=257*e[c]^16843008*c;s[0][o]=d<<24|d>>>8,s[1][o]=d<<16|d>>>16,s[2][o]=d<<8|d>>>24,s[3][o]=d,d=16843009*l^65537*f^257*u^16843008*o,n[0][c]=d<<24|d>>>8,n[1][c]=d<<16|d>>>16,n[2][c]=d<<8|d>>>24,n[3][c]=d,0===o?o=a=1:(o=u^e[e[e[l^u]]],a^=e[e[a]])}return{SBOX:r,INV_SBOX:i,SUB_MIX:s,INV_SUB_MIX:n}}();function l(e){this._key=o(e),this._reset()}l.blockSize=16,l.keySize=32,l.prototype.blockSize=l.blockSize,l.prototype.keySize=l.keySize,l.prototype._reset=function(){for(var e=this._key,t=e.length,r=t+6,i=4*(r+1),s=[],n=0;n<t;n++)s[n]=e[n];for(n=t;n<i;n++){var o=s[n-1];n%t==0?(o=o<<8|o>>>24,o=f.SBOX[o>>>24]<<24|f.SBOX[o>>>16&255]<<16|f.SBOX[o>>>8&255]<<8|f.SBOX[255&o],o^=u[n/t|0]<<24):t>6&&n%t==4&&(o=f.SBOX[o>>>24]<<24|f.SBOX[o>>>16&255]<<16|f.SBOX[o>>>8&255]<<8|f.SBOX[255&o]),s[n]=s[n-t]^o}for(var a=[],h=0;h<i;h++){var c=i-h,l=s[c-(h%4?0:4)];a[h]=h<4||c<=4?l:f.INV_SUB_MIX[0][f.SBOX[l>>>24]]^f.INV_SUB_MIX[1][f.SBOX[l>>>16&255]]^f.INV_SUB_MIX[2][f.SBOX[l>>>8&255]]^f.INV_SUB_MIX[3][f.SBOX[255&l]]}this._nRounds=r,this._keySchedule=s,this._invKeySchedule=a},l.prototype.encryptBlockRaw=function(e){return c(e=o(e),this._keySchedule,f.SUB_MIX,f.SBOX,this._nRounds)},l.prototype.encryptBlock=function(e){var t=this.encryptBlockRaw(e),r=n.allocUnsafe(16);return r.writeUInt32BE(t[0],0),r.writeUInt32BE(t[1],4),r.writeUInt32BE(t[2],8),r.writeUInt32BE(t[3],12),r},l.prototype.decryptBlock=function(e){var t=(e=o(e))[1];e[1]=e[3],e[3]=t;var r=c(e,this._invKeySchedule,f.INV_SUB_MIX,f.INV_SBOX,this._nRounds),i=n.allocUnsafe(16);return i.writeUInt32BE(r[0],0),i.writeUInt32BE(r[3],4),i.writeUInt32BE(r[2],8),i.writeUInt32BE(r[1],12),i},l.prototype.scrub=function(){a(this._keySchedule),a(this._invKeySchedule),a(this._key)},t.exports.AES=l}],["browserify-aes","/ghash.js",function(e,t,r,i,s){var n=h(2).Buffer,o=n.alloc(16,0);function a(e){var t=n.allocUnsafe(16);return t.writeUInt32BE(e[0]>>>0,0),t.writeUInt32BE(e[1]>>>0,4),t.writeUInt32BE(e[2]>>>0,8),t.writeUInt32BE(e[3]>>>0,12),t}function c(e){this.h=e,this.state=n.alloc(16,0),this.cache=n.allocUnsafe(0)}c.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},c.prototype._multiply=function(){for(var e,t,r,i=[(e=this.h).readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)],s=[0,0,0,0],n=-1;++n<128;){for(0!=(this.state[~~(n/8)]&1<<7-n%8)&&(s[0]^=i[0],s[1]^=i[1],s[2]^=i[2],s[3]^=i[3]),r=0!=(1&i[3]),t=3;t>0;t--)i[t]=i[t]>>>1|(1&i[t-1])<<31;i[0]=i[0]>>>1,r&&(i[0]=i[0]^225<<24)}this.state=a(s)},c.prototype.update=function(e){var t;for(this.cache=n.concat([this.cache,e]);this.cache.length>=16;)t=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(t)},c.prototype.final=function(e,t){return this.cache.length&&this.ghash(n.concat([this.cache,o],16)),this.ghash(a([0,e,0,t])),this.state},t.exports=c}],["browserify-aes","/streamCipher.js",function(e,t,r,i,s){var n=h(50),o=h(2).Buffer,a=h(16);function c(e,t,r,i){a.call(this),this._cipher=new n.AES(t),this._prev=o.from(r),this._cache=o.allocUnsafe(0),this._secCache=o.allocUnsafe(0),this._decrypt=i,this._mode=e}h(4)(c,a),c.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},c.prototype._final=function(){this._cipher.scrub()},t.exports=c}],["evp_bytestokey","/index.js",function(e,t,r,i,s){var n=h(2).Buffer,o=h(5);t.exports=function(e,t,r,i){if(null!=e&&!0===e._isBuffer||(e=n.from(e,"binary")),t&&(null!=t&&!0===t._isBuffer||(t=n.from(t,"binary")),8!==t.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var s=r/8,a=n.alloc(s),h=n.alloc(i||0),c=n.alloc(0);s>0||i>0;){var u=new o;u.update(c),u.update(e),t&&u.update(t),c=u.digest();var f=0;if(s>0){var l=a.length-s;f=Math.min(s,c.length),c.copy(a,l,0,f),s-=f}if(f<c.length&&i>0){var d=h.length-i,p=Math.min(i,c.length-f);c.copy(h,d,f,f+p),i-=p}}return c.fill(0),{key:a,iv:h}}}],["browserify-aes","/decrypter.js",function(e,t,r,i,s){var n=h(49),o=h(2).Buffer,a=h(38),c=h(52),u=h(16),f=h(50),l=h(53);function d(e,t,r){u.call(this),this._cache=new p,this._last=void 0,this._cipher=new f.AES(t),this._prev=o.from(r),this._mode=e,this._autopadding=!0}function p(){this.cache=o.allocUnsafe(0)}function b(e,t,r){var i=a[e.toLowerCase()];if(!i)throw new TypeError("invalid suite type");if("string"==typeof r&&(r=o.from(r)),"GCM"!==i.mode&&r.length!==i.iv)throw new TypeError("invalid iv length "+r.length);if("string"==typeof t&&(t=o.from(t)),t.length!==i.key/8)throw new TypeError("invalid key length "+t.length);return"stream"===i.type?new c(i.module,t,r,!0):"auth"===i.type?new n(i.module,t,r,!0):new d(i.module,t,r)}h(4)(d,u),d.prototype._update=function(e){var t,r;this._cache.add(e);for(var i=[];t=this._cache.get(this._autopadding);)r=this._mode.decrypt(this,t),i.push(r);return o.concat(i)},d.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return function(e){var t=e[15];if(t<1||t>16)throw new Error("unable to decrypt data");var r=-1;for(;++r<t;)if(e[r+(16-t)]!==t)throw new Error("unable to decrypt data");if(16===t)return;return e.slice(0,16-t)}(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},d.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},p.prototype.add=function(e){this.cache=o.concat([this.cache,e])},p.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},p.prototype.flush=function(){if(this.cache.length)return this.cache},e.createDecipher=function(e,t){var r=a[e.toLowerCase()];if(!r)throw new TypeError("invalid suite type");var i=l(t,!1,r.key,r.iv);return b(e,i.key,i.iv)},e.createDecipheriv=b}],["browserify-des","/modes.js",function(e,t,r,i,s){e["des-ecb"]={key:8,iv:0},e["des-cbc"]=e.des={key:8,iv:8},e["des-ede3-cbc"]=e.des3={key:24,iv:8},e["des-ede3"]={key:24,iv:0},e["des-ede-cbc"]={key:16,iv:8},e["des-ede"]={key:16,iv:0}}],["diffie-hellman","/browser.js",function(e,t,r,i,s){var n=h(57),o=h(62),a=h(63);var c={binary:!0,hex:!0,base64:!0};e.DiffieHellmanGroup=e.createDiffieHellmanGroup=e.getDiffieHellman=function(e){var t=new Buffer(o[e].prime,"hex"),r=new Buffer(o[e].gen,"hex");return new a(t,r)},e.createDiffieHellman=e.DiffieHellman=function e(t,r,i,s){return null!=r&&!0===r._isBuffer||c[r]===undefined?e(t,"binary",r,i):(r=r||"binary",s=s||"binary",null!=(i=i||new Buffer([2]))&&!0===i._isBuffer||(i=new Buffer(i,s)),"number"==typeof t?new a(n(t,i),i,!0):(null!=t&&!0===t._isBuffer||(t=new Buffer(t,r)),new a(t,i,!0)))}}],["diffie-hellman","/lib/generatePrime.js",function(e,t,r,i,s){var n=h(1);t.exports=v,v.simpleSieve=w,v.fermatTest=y;var o=h(58),a=new o(24),c=new(h(60)),u=new o(1),f=new o(2),l=new o(5),d=(new o(16),new o(8),new o(10)),p=new o(3),b=(new o(7),new o(11)),g=new o(4),m=(new o(12),null);function _(){if(null!==m)return m;var e=[];e[0]=2;for(var t=1,r=3;r<1048576;r+=2){for(var i=Math.ceil(Math.sqrt(r)),s=0;s<t&&e[s]<=i&&r%e[s]!=0;s++);t!==s&&e[s]<=i||(e[t++]=r)}return m=e,e}function w(e){for(var t=_(),r=0;r<t.length;r++)if(0===e.modn(t[r]))return 0===e.cmpn(t[r]);return!0}function y(e){var t=o.mont(e);return 0===f.toRed(t).redPow(e.subn(1)).fromRed().cmpn(1)}function v(e,t){if(e<16)return new o(2===t||5===t?[140,123]:[140,39]);var r,i;for(t=new o(t);;){for(r=new o(n(Math.ceil(e/8)));r.bitLength()>e;)r.ishrn(1);if(r.isEven()&&r.iadd(u),r.testn(1)||r.iadd(f),t.cmp(f)){if(!t.cmp(l))for(;r.mod(d).cmp(p);)r.iadd(g)}else for(;r.mod(a).cmp(b);)r.iadd(g);if(w(i=r.shrn(1))&&w(r)&&y(i)&&y(r)&&c.test(i)&&c.test(r))return r}}}],["bn.js","/lib/bn.js",function(e,t,r,i,s){!function(e,t){"use strict";function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function s(e,t,r){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var n;"object"==typeof e?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{n=h(59).Buffer}catch(e){}function o(e,t,r){for(var i=0,s=Math.min(e.length,r),n=t;n<s;n++){var o=e.charCodeAt(n)-48;i<<=4,i|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return i}function a(e,t,r,i){for(var s=0,n=Math.min(e.length,r),o=t;o<n;o++){var a=e.charCodeAt(o)-48;s*=i,s+=a>=49?a-49+10:a>=17?a-17+10:a}return s}s.isBN=function(e){return e instanceof s||null!==e&&"object"==typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return e.cmp(t)<0?e:t},s.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var s=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&s++,16===t?this._parseHex(e,s):this._parseBase(e,t,s),"-"===e[0]&&(this.negative=1),this.strip(),"le"===i&&this._initArray(this.toArray(),t,i)},s.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},s.prototype._initArray=function(e,t,i){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var n,o,a=0;if("be"===i)for(s=e.length-1,n=0;s>=0;s-=3)o=e[s]|e[s-1]<<8|e[s-2]<<16,this.words[n]|=o<<a&67108863,this.words[n+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,n++);else if("le"===i)for(s=0,n=0;s<e.length;s+=3)o=e[s]|e[s+1]<<8|e[s+2]<<16,this.words[n]|=o<<a&67108863,this.words[n+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,n++);return this.strip()},s.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,s,n=0;for(r=e.length-6,i=0;r>=t;r-=6)s=o(e,r,r+6),this.words[i]|=s<<n&67108863,this.words[i+1]|=s>>>26-n&4194303,(n+=24)>=26&&(n-=26,i++);r+6!==t&&(s=o(e,t,r+6),this.words[i]|=s<<n&67108863,this.words[i+1]|=s>>>26-n&4194303),this.strip()},s.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var i=0,s=1;s<=67108863;s*=t)i++;i--,s=s/t|0;for(var n=e.length-r,o=n%i,h=Math.min(n,n-o)+r,c=0,u=r;u<h;u+=i)c=a(e,u,u+i,t),this.imuln(s),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==o){var f=1;for(c=a(e,u,e.length,t),u=0;u<o;u++)f*=t;this.imuln(f),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},s.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function l(e,t,r){r.negative=t.negative^e.negative;var i=e.length+t.length|0;r.length=i,i=i-1|0;var s=0|e.words[0],n=0|t.words[0],o=s*n,a=67108863&o,h=o/67108864|0;r.words[0]=a;for(var c=1;c<i;c++){for(var u=h>>>26,f=67108863&h,l=Math.min(c,t.length-1),d=Math.max(0,c-e.length+1);d<=l;d++){var p=c-d|0;u+=(o=(s=0|e.words[p])*(n=0|t.words[d])+f)/67108864|0,f=67108863&o}r.words[c]=0|f,h=0|u}return 0!==h?r.words[c]=0|h:r.length--,r.strip()}s.prototype.toString=function(e,t){var i;if(e=e||10,t=0|t||1,16===e||"hex"===e){i="";for(var s=0,n=0,o=0;o<this.length;o++){var a=this.words[o],h=(16777215&(a<<s|n)).toString(16);i=0!==(n=a>>>24-s&16777215)||o!==this.length-1?c[6-h.length]+h+i:h+i,(s+=2)>=26&&(s-=26,o--)}for(0!==n&&(i=n.toString(16)+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var l=u[e],d=f[e];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var b=p.modn(d).toString(e);i=(p=p.idivn(d)).isZero()?b+i:c[l-b.length]+b+i}for(this.isZero()&&(i="0"+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(e,t){return r(void 0!==n),this.toArrayLike(n,e,t)},s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},s.prototype.toArrayLike=function(e,t,i){var s=this.byteLength(),n=i||Math.max(1,s);r(s<=n,"byte array longer than desired length"),r(n>0,"Requested array length <= 0"),this.strip();var o,a,h="le"===t,c=new e(n),u=this.clone();if(h){for(a=0;!u.isZero();a++)o=u.andln(255),u.iushrn(8),c[a]=o;for(;a<n;a++)c[a]=0}else{for(a=0;a<n-s;a++)c[a]=0;for(a=0;!u.isZero();a++)o=u.andln(255),u.iushrn(8),c[n-a-1]=o}return c},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},s.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},s.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var i=0;i<r.length;i++)this.words[i]=t.words[i]^r.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this.strip()},s.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var s=0;s<t;s++)this.words[s]=67108863&~this.words[s];return i>0&&(this.words[s]=~this.words[s]&67108863>>26-i),this.strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var i=e/26|0,s=e%26;return this._expand(i+1),this.words[i]=t?this.words[i]|1<<s:this.words[i]&~(1<<s),this.strip()},s.prototype.iadd=function(e){var t,r,i;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,i=e):(r=e,i=this);for(var s=0,n=0;n<i.length;n++)t=(0|r.words[n])+(0|i.words[n])+s,this.words[n]=67108863&t,s=t>>>26;for(;0!==s&&n<r.length;n++)t=(0|r.words[n])+s,this.words[n]=67108863&t,s=t>>>26;if(this.length=r.length,0!==s)this.words[this.length]=s,this.length++;else if(r!==this)for(;n<r.length;n++)this.words[n]=r.words[n];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,i,s=this.cmp(e);if(0===s)return this.negative=0,this.length=1,this.words[0]=0,this;s>0?(r=this,i=e):(r=e,i=this);for(var n=0,o=0;o<i.length;o++)n=(t=(0|r.words[o])-(0|i.words[o])+n)>>26,this.words[o]=67108863&t;for(;0!==n&&o<r.length;o++)n=(t=(0|r.words[o])+n)>>26,this.words[o]=67108863&t;if(0===n&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var d=function(e,t,r){var i,s,n,o=e.words,a=t.words,h=r.words,c=0,u=0|o[0],f=8191&u,l=u>>>13,d=0|o[1],p=8191&d,b=d>>>13,g=0|o[2],m=8191&g,_=g>>>13,w=0|o[3],y=8191&w,v=w>>>13,E=0|o[4],S=8191&E,I=E>>>13,k=0|o[5],A=8191&k,O=k>>>13,x=0|o[6],R=8191&x,M=x>>>13,P=0|o[7],B=8191&P,N=P>>>13,T=0|o[8],C=8191&T,q=T>>>13,j=0|o[9],D=8191&j,U=j>>>13,L=0|a[0],z=8191&L,F=L>>>13,H=0|a[1],V=8191&H,K=H>>>13,W=0|a[2],G=8191&W,Y=W>>>13,X=0|a[3],J=8191&X,Q=X>>>13,Z=0|a[4],$=8191&Z,ee=Z>>>13,te=0|a[5],re=8191&te,ie=te>>>13,se=0|a[6],ne=8191&se,oe=se>>>13,ae=0|a[7],he=8191&ae,ce=ae>>>13,ue=0|a[8],fe=8191&ue,le=ue>>>13,de=0|a[9],pe=8191&de,be=de>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(c+(i=Math.imul(f,z))|0)+((8191&(s=(s=Math.imul(f,F))+Math.imul(l,z)|0))<<13)|0;c=((n=Math.imul(l,F))+(s>>>13)|0)+(ge>>>26)|0,ge&=67108863,i=Math.imul(p,z),s=(s=Math.imul(p,F))+Math.imul(b,z)|0,n=Math.imul(b,F);var me=(c+(i=i+Math.imul(f,V)|0)|0)+((8191&(s=(s=s+Math.imul(f,K)|0)+Math.imul(l,V)|0))<<13)|0;c=((n=n+Math.imul(l,K)|0)+(s>>>13)|0)+(me>>>26)|0,me&=67108863,i=Math.imul(m,z),s=(s=Math.imul(m,F))+Math.imul(_,z)|0,n=Math.imul(_,F),i=i+Math.imul(p,V)|0,s=(s=s+Math.imul(p,K)|0)+Math.imul(b,V)|0,n=n+Math.imul(b,K)|0;var _e=(c+(i=i+Math.imul(f,G)|0)|0)+((8191&(s=(s=s+Math.imul(f,Y)|0)+Math.imul(l,G)|0))<<13)|0;c=((n=n+Math.imul(l,Y)|0)+(s>>>13)|0)+(_e>>>26)|0,_e&=67108863,i=Math.imul(y,z),s=(s=Math.imul(y,F))+Math.imul(v,z)|0,n=Math.imul(v,F),i=i+Math.imul(m,V)|0,s=(s=s+Math.imul(m,K)|0)+Math.imul(_,V)|0,n=n+Math.imul(_,K)|0,i=i+Math.imul(p,G)|0,s=(s=s+Math.imul(p,Y)|0)+Math.imul(b,G)|0,n=n+Math.imul(b,Y)|0;var we=(c+(i=i+Math.imul(f,J)|0)|0)+((8191&(s=(s=s+Math.imul(f,Q)|0)+Math.imul(l,J)|0))<<13)|0;c=((n=n+Math.imul(l,Q)|0)+(s>>>13)|0)+(we>>>26)|0,we&=67108863,i=Math.imul(S,z),s=(s=Math.imul(S,F))+Math.imul(I,z)|0,n=Math.imul(I,F),i=i+Math.imul(y,V)|0,s=(s=s+Math.imul(y,K)|0)+Math.imul(v,V)|0,n=n+Math.imul(v,K)|0,i=i+Math.imul(m,G)|0,s=(s=s+Math.imul(m,Y)|0)+Math.imul(_,G)|0,n=n+Math.imul(_,Y)|0,i=i+Math.imul(p,J)|0,s=(s=s+Math.imul(p,Q)|0)+Math.imul(b,J)|0,n=n+Math.imul(b,Q)|0;var ye=(c+(i=i+Math.imul(f,$)|0)|0)+((8191&(s=(s=s+Math.imul(f,ee)|0)+Math.imul(l,$)|0))<<13)|0;c=((n=n+Math.imul(l,ee)|0)+(s>>>13)|0)+(ye>>>26)|0,ye&=67108863,i=Math.imul(A,z),s=(s=Math.imul(A,F))+Math.imul(O,z)|0,n=Math.imul(O,F),i=i+Math.imul(S,V)|0,s=(s=s+Math.imul(S,K)|0)+Math.imul(I,V)|0,n=n+Math.imul(I,K)|0,i=i+Math.imul(y,G)|0,s=(s=s+Math.imul(y,Y)|0)+Math.imul(v,G)|0,n=n+Math.imul(v,Y)|0,i=i+Math.imul(m,J)|0,s=(s=s+Math.imul(m,Q)|0)+Math.imul(_,J)|0,n=n+Math.imul(_,Q)|0,i=i+Math.imul(p,$)|0,s=(s=s+Math.imul(p,ee)|0)+Math.imul(b,$)|0,n=n+Math.imul(b,ee)|0;var ve=(c+(i=i+Math.imul(f,re)|0)|0)+((8191&(s=(s=s+Math.imul(f,ie)|0)+Math.imul(l,re)|0))<<13)|0;c=((n=n+Math.imul(l,ie)|0)+(s>>>13)|0)+(ve>>>26)|0,ve&=67108863,i=Math.imul(R,z),s=(s=Math.imul(R,F))+Math.imul(M,z)|0,n=Math.imul(M,F),i=i+Math.imul(A,V)|0,s=(s=s+Math.imul(A,K)|0)+Math.imul(O,V)|0,n=n+Math.imul(O,K)|0,i=i+Math.imul(S,G)|0,s=(s=s+Math.imul(S,Y)|0)+Math.imul(I,G)|0,n=n+Math.imul(I,Y)|0,i=i+Math.imul(y,J)|0,s=(s=s+Math.imul(y,Q)|0)+Math.imul(v,J)|0,n=n+Math.imul(v,Q)|0,i=i+Math.imul(m,$)|0,s=(s=s+Math.imul(m,ee)|0)+Math.imul(_,$)|0,n=n+Math.imul(_,ee)|0,i=i+Math.imul(p,re)|0,s=(s=s+Math.imul(p,ie)|0)+Math.imul(b,re)|0,n=n+Math.imul(b,ie)|0;var Ee=(c+(i=i+Math.imul(f,ne)|0)|0)+((8191&(s=(s=s+Math.imul(f,oe)|0)+Math.imul(l,ne)|0))<<13)|0;c=((n=n+Math.imul(l,oe)|0)+(s>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(B,z),s=(s=Math.imul(B,F))+Math.imul(N,z)|0,n=Math.imul(N,F),i=i+Math.imul(R,V)|0,s=(s=s+Math.imul(R,K)|0)+Math.imul(M,V)|0,n=n+Math.imul(M,K)|0,i=i+Math.imul(A,G)|0,s=(s=s+Math.imul(A,Y)|0)+Math.imul(O,G)|0,n=n+Math.imul(O,Y)|0,i=i+Math.imul(S,J)|0,s=(s=s+Math.imul(S,Q)|0)+Math.imul(I,J)|0,n=n+Math.imul(I,Q)|0,i=i+Math.imul(y,$)|0,s=(s=s+Math.imul(y,ee)|0)+Math.imul(v,$)|0,n=n+Math.imul(v,ee)|0,i=i+Math.imul(m,re)|0,s=(s=s+Math.imul(m,ie)|0)+Math.imul(_,re)|0,n=n+Math.imul(_,ie)|0,i=i+Math.imul(p,ne)|0,s=(s=s+Math.imul(p,oe)|0)+Math.imul(b,ne)|0,n=n+Math.imul(b,oe)|0;var Se=(c+(i=i+Math.imul(f,he)|0)|0)+((8191&(s=(s=s+Math.imul(f,ce)|0)+Math.imul(l,he)|0))<<13)|0;c=((n=n+Math.imul(l,ce)|0)+(s>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(C,z),s=(s=Math.imul(C,F))+Math.imul(q,z)|0,n=Math.imul(q,F),i=i+Math.imul(B,V)|0,s=(s=s+Math.imul(B,K)|0)+Math.imul(N,V)|0,n=n+Math.imul(N,K)|0,i=i+Math.imul(R,G)|0,s=(s=s+Math.imul(R,Y)|0)+Math.imul(M,G)|0,n=n+Math.imul(M,Y)|0,i=i+Math.imul(A,J)|0,s=(s=s+Math.imul(A,Q)|0)+Math.imul(O,J)|0,n=n+Math.imul(O,Q)|0,i=i+Math.imul(S,$)|0,s=(s=s+Math.imul(S,ee)|0)+Math.imul(I,$)|0,n=n+Math.imul(I,ee)|0,i=i+Math.imul(y,re)|0,s=(s=s+Math.imul(y,ie)|0)+Math.imul(v,re)|0,n=n+Math.imul(v,ie)|0,i=i+Math.imul(m,ne)|0,s=(s=s+Math.imul(m,oe)|0)+Math.imul(_,ne)|0,n=n+Math.imul(_,oe)|0,i=i+Math.imul(p,he)|0,s=(s=s+Math.imul(p,ce)|0)+Math.imul(b,he)|0,n=n+Math.imul(b,ce)|0;var Ie=(c+(i=i+Math.imul(f,fe)|0)|0)+((8191&(s=(s=s+Math.imul(f,le)|0)+Math.imul(l,fe)|0))<<13)|0;c=((n=n+Math.imul(l,le)|0)+(s>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(D,z),s=(s=Math.imul(D,F))+Math.imul(U,z)|0,n=Math.imul(U,F),i=i+Math.imul(C,V)|0,s=(s=s+Math.imul(C,K)|0)+Math.imul(q,V)|0,n=n+Math.imul(q,K)|0,i=i+Math.imul(B,G)|0,s=(s=s+Math.imul(B,Y)|0)+Math.imul(N,G)|0,n=n+Math.imul(N,Y)|0,i=i+Math.imul(R,J)|0,s=(s=s+Math.imul(R,Q)|0)+Math.imul(M,J)|0,n=n+Math.imul(M,Q)|0,i=i+Math.imul(A,$)|0,s=(s=s+Math.imul(A,ee)|0)+Math.imul(O,$)|0,n=n+Math.imul(O,ee)|0,i=i+Math.imul(S,re)|0,s=(s=s+Math.imul(S,ie)|0)+Math.imul(I,re)|0,n=n+Math.imul(I,ie)|0,i=i+Math.imul(y,ne)|0,s=(s=s+Math.imul(y,oe)|0)+Math.imul(v,ne)|0,n=n+Math.imul(v,oe)|0,i=i+Math.imul(m,he)|0,s=(s=s+Math.imul(m,ce)|0)+Math.imul(_,he)|0,n=n+Math.imul(_,ce)|0,i=i+Math.imul(p,fe)|0,s=(s=s+Math.imul(p,le)|0)+Math.imul(b,fe)|0,n=n+Math.imul(b,le)|0;var ke=(c+(i=i+Math.imul(f,pe)|0)|0)+((8191&(s=(s=s+Math.imul(f,be)|0)+Math.imul(l,pe)|0))<<13)|0;c=((n=n+Math.imul(l,be)|0)+(s>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(D,V),s=(s=Math.imul(D,K))+Math.imul(U,V)|0,n=Math.imul(U,K),i=i+Math.imul(C,G)|0,s=(s=s+Math.imul(C,Y)|0)+Math.imul(q,G)|0,n=n+Math.imul(q,Y)|0,i=i+Math.imul(B,J)|0,s=(s=s+Math.imul(B,Q)|0)+Math.imul(N,J)|0,n=n+Math.imul(N,Q)|0,i=i+Math.imul(R,$)|0,s=(s=s+Math.imul(R,ee)|0)+Math.imul(M,$)|0,n=n+Math.imul(M,ee)|0,i=i+Math.imul(A,re)|0,s=(s=s+Math.imul(A,ie)|0)+Math.imul(O,re)|0,n=n+Math.imul(O,ie)|0,i=i+Math.imul(S,ne)|0,s=(s=s+Math.imul(S,oe)|0)+Math.imul(I,ne)|0,n=n+Math.imul(I,oe)|0,i=i+Math.imul(y,he)|0,s=(s=s+Math.imul(y,ce)|0)+Math.imul(v,he)|0,n=n+Math.imul(v,ce)|0,i=i+Math.imul(m,fe)|0,s=(s=s+Math.imul(m,le)|0)+Math.imul(_,fe)|0,n=n+Math.imul(_,le)|0;var Ae=(c+(i=i+Math.imul(p,pe)|0)|0)+((8191&(s=(s=s+Math.imul(p,be)|0)+Math.imul(b,pe)|0))<<13)|0;c=((n=n+Math.imul(b,be)|0)+(s>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(D,G),s=(s=Math.imul(D,Y))+Math.imul(U,G)|0,n=Math.imul(U,Y),i=i+Math.imul(C,J)|0,s=(s=s+Math.imul(C,Q)|0)+Math.imul(q,J)|0,n=n+Math.imul(q,Q)|0,i=i+Math.imul(B,$)|0,s=(s=s+Math.imul(B,ee)|0)+Math.imul(N,$)|0,n=n+Math.imul(N,ee)|0,i=i+Math.imul(R,re)|0,s=(s=s+Math.imul(R,ie)|0)+Math.imul(M,re)|0,n=n+Math.imul(M,ie)|0,i=i+Math.imul(A,ne)|0,s=(s=s+Math.imul(A,oe)|0)+Math.imul(O,ne)|0,n=n+Math.imul(O,oe)|0,i=i+Math.imul(S,he)|0,s=(s=s+Math.imul(S,ce)|0)+Math.imul(I,he)|0,n=n+Math.imul(I,ce)|0,i=i+Math.imul(y,fe)|0,s=(s=s+Math.imul(y,le)|0)+Math.imul(v,fe)|0,n=n+Math.imul(v,le)|0;var Oe=(c+(i=i+Math.imul(m,pe)|0)|0)+((8191&(s=(s=s+Math.imul(m,be)|0)+Math.imul(_,pe)|0))<<13)|0;c=((n=n+Math.imul(_,be)|0)+(s>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,i=Math.imul(D,J),s=(s=Math.imul(D,Q))+Math.imul(U,J)|0,n=Math.imul(U,Q),i=i+Math.imul(C,$)|0,s=(s=s+Math.imul(C,ee)|0)+Math.imul(q,$)|0,n=n+Math.imul(q,ee)|0,i=i+Math.imul(B,re)|0,s=(s=s+Math.imul(B,ie)|0)+Math.imul(N,re)|0,n=n+Math.imul(N,ie)|0,i=i+Math.imul(R,ne)|0,s=(s=s+Math.imul(R,oe)|0)+Math.imul(M,ne)|0,n=n+Math.imul(M,oe)|0,i=i+Math.imul(A,he)|0,s=(s=s+Math.imul(A,ce)|0)+Math.imul(O,he)|0,n=n+Math.imul(O,ce)|0,i=i+Math.imul(S,fe)|0,s=(s=s+Math.imul(S,le)|0)+Math.imul(I,fe)|0,n=n+Math.imul(I,le)|0;var xe=(c+(i=i+Math.imul(y,pe)|0)|0)+((8191&(s=(s=s+Math.imul(y,be)|0)+Math.imul(v,pe)|0))<<13)|0;c=((n=n+Math.imul(v,be)|0)+(s>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(D,$),s=(s=Math.imul(D,ee))+Math.imul(U,$)|0,n=Math.imul(U,ee),i=i+Math.imul(C,re)|0,s=(s=s+Math.imul(C,ie)|0)+Math.imul(q,re)|0,n=n+Math.imul(q,ie)|0,i=i+Math.imul(B,ne)|0,s=(s=s+Math.imul(B,oe)|0)+Math.imul(N,ne)|0,n=n+Math.imul(N,oe)|0,i=i+Math.imul(R,he)|0,s=(s=s+Math.imul(R,ce)|0)+Math.imul(M,he)|0,n=n+Math.imul(M,ce)|0,i=i+Math.imul(A,fe)|0,s=(s=s+Math.imul(A,le)|0)+Math.imul(O,fe)|0,n=n+Math.imul(O,le)|0;var Re=(c+(i=i+Math.imul(S,pe)|0)|0)+((8191&(s=(s=s+Math.imul(S,be)|0)+Math.imul(I,pe)|0))<<13)|0;c=((n=n+Math.imul(I,be)|0)+(s>>>13)|0)+(Re>>>26)|0,Re&=67108863,i=Math.imul(D,re),s=(s=Math.imul(D,ie))+Math.imul(U,re)|0,n=Math.imul(U,ie),i=i+Math.imul(C,ne)|0,s=(s=s+Math.imul(C,oe)|0)+Math.imul(q,ne)|0,n=n+Math.imul(q,oe)|0,i=i+Math.imul(B,he)|0,s=(s=s+Math.imul(B,ce)|0)+Math.imul(N,he)|0,n=n+Math.imul(N,ce)|0,i=i+Math.imul(R,fe)|0,s=(s=s+Math.imul(R,le)|0)+Math.imul(M,fe)|0,n=n+Math.imul(M,le)|0;var Me=(c+(i=i+Math.imul(A,pe)|0)|0)+((8191&(s=(s=s+Math.imul(A,be)|0)+Math.imul(O,pe)|0))<<13)|0;c=((n=n+Math.imul(O,be)|0)+(s>>>13)|0)+(Me>>>26)|0,Me&=67108863,i=Math.imul(D,ne),s=(s=Math.imul(D,oe))+Math.imul(U,ne)|0,n=Math.imul(U,oe),i=i+Math.imul(C,he)|0,s=(s=s+Math.imul(C,ce)|0)+Math.imul(q,he)|0,n=n+Math.imul(q,ce)|0,i=i+Math.imul(B,fe)|0,s=(s=s+Math.imul(B,le)|0)+Math.imul(N,fe)|0,n=n+Math.imul(N,le)|0;var Pe=(c+(i=i+Math.imul(R,pe)|0)|0)+((8191&(s=(s=s+Math.imul(R,be)|0)+Math.imul(M,pe)|0))<<13)|0;c=((n=n+Math.imul(M,be)|0)+(s>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,i=Math.imul(D,he),s=(s=Math.imul(D,ce))+Math.imul(U,he)|0,n=Math.imul(U,ce),i=i+Math.imul(C,fe)|0,s=(s=s+Math.imul(C,le)|0)+Math.imul(q,fe)|0,n=n+Math.imul(q,le)|0;var Be=(c+(i=i+Math.imul(B,pe)|0)|0)+((8191&(s=(s=s+Math.imul(B,be)|0)+Math.imul(N,pe)|0))<<13)|0;c=((n=n+Math.imul(N,be)|0)+(s>>>13)|0)+(Be>>>26)|0,Be&=67108863,i=Math.imul(D,fe),s=(s=Math.imul(D,le))+Math.imul(U,fe)|0,n=Math.imul(U,le);var Ne=(c+(i=i+Math.imul(C,pe)|0)|0)+((8191&(s=(s=s+Math.imul(C,be)|0)+Math.imul(q,pe)|0))<<13)|0;c=((n=n+Math.imul(q,be)|0)+(s>>>13)|0)+(Ne>>>26)|0,Ne&=67108863;var Te=(c+(i=Math.imul(D,pe))|0)+((8191&(s=(s=Math.imul(D,be))+Math.imul(U,pe)|0))<<13)|0;return c=((n=Math.imul(U,be))+(s>>>13)|0)+(Te>>>26)|0,Te&=67108863,h[0]=ge,h[1]=me,h[2]=_e,h[3]=we,h[4]=ye,h[5]=ve,h[6]=Ee,h[7]=Se,h[8]=Ie,h[9]=ke,h[10]=Ae,h[11]=Oe,h[12]=xe,h[13]=Re,h[14]=Me,h[15]=Pe,h[16]=Be,h[17]=Ne,h[18]=Te,0!==c&&(h[19]=c,r.length++),r};function p(e,t,r){return(new b).mulp(e,t,r)}function b(e,t){this.x=e,this.y=t}Math.imul||(d=l),s.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?d(this,e,t):r<63?l(this,e,t):r<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var i=0,s=0,n=0;n<r.length-1;n++){var o=s;s=0;for(var a=67108863&i,h=Math.min(n,t.length-1),c=Math.max(0,n-e.length+1);c<=h;c++){var u=n-c,f=(0|e.words[u])*(0|t.words[c]),l=67108863&f;a=67108863&(l=l+a|0),s+=(o=(o=o+(f/67108864|0)|0)+(l>>>26)|0)>>>26,o&=67108863}r.words[n]=a,i=o,o=s}return 0!==i?r.words[n]=i:r.length--,r.strip()}(this,e,t):p(this,e,t)},b.prototype.makeRBT=function(e){for(var t=new Array(e),r=s.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,r,e);return t},b.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var i=0,s=0;s<t;s++)i|=(1&e)<<t-s-1,e>>=1;return i},b.prototype.permute=function(e,t,r,i,s,n){for(var o=0;o<n;o++)i[o]=t[e[o]],s[o]=r[e[o]]},b.prototype.transform=function(e,t,r,i,s,n){this.permute(n,e,t,r,i,s);for(var o=1;o<s;o<<=1)for(var a=o<<1,h=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),u=0;u<s;u+=a)for(var f=h,l=c,d=0;d<o;d++){var p=r[u+d],b=i[u+d],g=r[u+d+o],m=i[u+d+o],_=f*g-l*m;m=f*m+l*g,g=_,r[u+d]=p+g,i[u+d]=b+m,r[u+d+o]=p-g,i[u+d+o]=b-m,d!==a&&(_=h*f-c*l,l=h*l+c*f,f=_)}},b.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),i=1&r,s=0;for(r=r/2|0;r;r>>>=1)s++;return 1<<s+1+i},b.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var i=0;i<r/2;i++){var s=e[i];e[i]=e[r-i-1],e[r-i-1]=s,s=t[i],t[i]=-t[r-i-1],t[r-i-1]=-s}},b.prototype.normalize13b=function(e,t){for(var r=0,i=0;i<t/2;i++){var s=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+r;e[i]=67108863&s,r=s<67108864?0:s/67108864|0}return e},b.prototype.convert13b=function(e,t,i,s){for(var n=0,o=0;o<t;o++)n+=0|e[o],i[2*o]=8191&n,n>>>=13,i[2*o+1]=8191&n,n>>>=13;for(o=2*t;o<s;++o)i[o]=0;r(0===n),r(0==(-8192&n))},b.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},b.prototype.mulp=function(e,t,r){var i=2*this.guessLen13b(e.length,t.length),s=this.makeRBT(i),n=this.stub(i),o=new Array(i),a=new Array(i),h=new Array(i),c=new Array(i),u=new Array(i),f=new Array(i),l=r.words;l.length=i,this.convert13b(e.words,e.length,o,i),this.convert13b(t.words,t.length,c,i),this.transform(o,n,a,h,i,s),this.transform(c,n,u,f,i,s);for(var d=0;d<i;d++){var p=a[d]*u[d]-h[d]*f[d];h[d]=a[d]*f[d]+h[d]*u[d],a[d]=p}return this.conjugate(a,h,i),this.transform(a,h,l,n,i,s),this.conjugate(l,n,i),this.normalize13b(l,i),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),p(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,i=0;i<this.length;i++){var s=(0|this.words[i])*e,n=(67108863&s)+(67108863&t);t>>=26,t+=s/67108864|0,t+=n>>>26,this.words[i]=67108863&n}return 0!==t&&(this.words[i]=t,this.length++),this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var i=r/26|0,s=r%26;t[r]=(e.words[i]&1<<s)>>>s}return t}(e);if(0===t.length)return new s(1);for(var r=this,i=0;i<t.length&&0===t[i];i++,r=r.sqr());if(++i<t.length)for(var n=r.sqr();i<t.length;i++,n=n.sqr())0!==t[i]&&(r=r.mul(n));return r},s.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,i=e%26,s=(e-i)/26,n=67108863>>>26-i<<26-i;if(0!==i){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&n,h=(0|this.words[t])-a<<i;this.words[t]=h|o,o=a>>>26-i}o&&(this.words[t]=o,this.length++)}if(0!==s){for(t=this.length-1;t>=0;t--)this.words[t+s]=this.words[t];for(t=0;t<s;t++)this.words[t]=0;this.length+=s}return this.strip()},s.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,i){var s;r("number"==typeof e&&e>=0),s=t?(t-t%26)/26:0;var n=e%26,o=Math.min((e-n)/26,this.length),a=67108863^67108863>>>n<<n,h=i;if(s-=o,s=Math.max(0,s),h){for(var c=0;c<o;c++)h.words[c]=this.words[c];h.length=o}if(0===o);else if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(0!==u||c>=s);c--){var f=0|this.words[c];this.words[c]=u<<26-n|f>>>n,u=f&a}return h&&0!==u&&(h.words[h.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(e,t,i){return r(0===this.negative),this.iushrn(e,t,i)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26,s=1<<t;return!(this.length<=i)&&!!(this.words[i]&s)},s.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==t&&i++,this.length=Math.min(i,this.length),0!==t){var s=67108863^67108863>>>t<<t;this.words[this.length-1]&=s}return this.strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,i){var s,n,o=e.length+i;this._expand(o);var a=0;for(s=0;s<e.length;s++){n=(0|this.words[s+i])+a;var h=(0|e.words[s])*t;a=((n-=67108863&h)>>26)-(h/67108864|0),this.words[s+i]=67108863&n}for(;s<this.length-i;s++)a=(n=(0|this.words[s+i])+a)>>26,this.words[s+i]=67108863&n;if(0===a)return this.strip();for(r(-1===a),a=0,s=0;s<this.length;s++)a=(n=-(0|this.words[s])+a)>>26,this.words[s]=67108863&n;return this.negative=1,this.strip()},s.prototype._wordDiv=function(e,t){var r=(this.length,e.length),i=this.clone(),n=e,o=0|n.words[n.length-1];0!==(r=26-this._countBits(o))&&(n=n.ushln(r),i.iushln(r),o=0|n.words[n.length-1]);var a,h=i.length-n.length;if("mod"!==t){(a=new s(null)).length=h+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var u=i.clone()._ishlnsubmul(n,1,h);0===u.negative&&(i=u,a&&(a.words[h]=1));for(var f=h-1;f>=0;f--){var l=67108864*(0|i.words[n.length+f])+(0|i.words[n.length+f-1]);for(l=Math.min(l/o|0,67108863),i._ishlnsubmul(n,l,f);0!==i.negative;)l--,i.negative=0,i._ishlnsubmul(n,1,f),i.isZero()||(i.negative^=1);a&&(a.words[f]=l)}return a&&a.strip(),i.strip(),"div"!==t&&0!==r&&i.iushrn(r),{div:a||null,mod:i}},s.prototype.divmod=function(e,t,i){return r(!e.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(n=a.div.neg()),"div"!==t&&(o=a.mod.neg(),i&&0!==o.negative&&o.iadd(e)),{div:n,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(n=a.div.neg()),{div:n,mod:a.mod}):0!=(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),i&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modn(e.words[0]))}:this._wordDiv(e,t);var n,o,a},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),s=e.andln(1),n=r.cmp(i);return n<0||1===s&&0===n?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,i=0,s=this.length-1;s>=0;s--)i=(t*i+(0|this.words[s]))%e;return i},s.prototype.idivn=function(e){r(e<=67108863);for(var t=0,i=this.length-1;i>=0;i--){var s=(0|this.words[i])+67108864*t;this.words[i]=s/e|0,t=s%e}return this.strip()},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n=new s(1),o=new s(0),a=new s(0),h=new s(1),c=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++c;for(var u=i.clone(),f=t.clone();!t.isZero();){for(var l=0,d=1;0==(t.words[0]&d)&&l<26;++l,d<<=1);if(l>0)for(t.iushrn(l);l-- >0;)(n.isOdd()||o.isOdd())&&(n.iadd(u),o.isub(f)),n.iushrn(1),o.iushrn(1);for(var p=0,b=1;0==(i.words[0]&b)&&p<26;++p,b<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(a.isOdd()||h.isOdd())&&(a.iadd(u),h.isub(f)),a.iushrn(1),h.iushrn(1);t.cmp(i)>=0?(t.isub(i),n.isub(a),o.isub(h)):(i.isub(t),a.isub(n),h.isub(o))}return{a:a,b:h,gcd:i.iushln(c)}},s.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n,o=new s(1),a=new s(0),h=i.clone();t.cmpn(1)>0&&i.cmpn(1)>0;){for(var c=0,u=1;0==(t.words[0]&u)&&c<26;++c,u<<=1);if(c>0)for(t.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);for(var f=0,l=1;0==(i.words[0]&l)&&f<26;++f,l<<=1);if(f>0)for(i.iushrn(f);f-- >0;)a.isOdd()&&a.iadd(h),a.iushrn(1);t.cmp(i)>=0?(t.isub(i),o.isub(a)):(i.isub(t),a.isub(o))}return(n=0===t.cmpn(1)?o:a).cmpn(0)<0&&n.iadd(e),n},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var i=0;t.isEven()&&r.isEven();i++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var s=t.cmp(r);if(s<0){var n=t;t=r,r=n}else if(0===s||0===r.cmpn(1))break;t.isub(r)}return r.iushln(i)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,i=(e-t)/26,s=1<<t;if(this.length<=i)return this._expand(i+1),this.words[i]|=s,this;for(var n=s,o=i;0!==n&&o<this.length;o++){var a=0|this.words[o];n=(a+=n)>>>26,a&=67108863,this.words[o]=a}return 0!==n&&(this.words[o]=n,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)t=1;else{i&&(e=-e),r(e<=67108863,"Number is too big");var s=0|this.words[0];t=s===e?0:s<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],s=0|e.words[r];if(i!==s){i<s?t=-1:i>s&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return-1===this.cmpn(e)},s.prototype.lt=function(e){return-1===this.cmp(e)},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new E(e)},s.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function m(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function y(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function v(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(e){if("string"==typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){E.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},m.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var i=t<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):r.strip(),r},m.prototype.split=function(e,t){e.iushrn(this.n,0,t)},m.prototype.imulK=function(e){return e.imul(this.k)},i(_,m),_.prototype.split=function(e,t){for(var r=Math.min(e.length,9),i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var s=e.words[9];for(t.words[t.length++]=4194303&s,i=10;i<e.length;i++){var n=0|e.words[i];e.words[i-10]=(4194303&n)<<4|s>>>22,s=n}s>>>=22,e.words[i-10]=s,0===s&&e.length>10?e.length-=10:e.length-=9},_.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var i=0|e.words[r];t+=977*i,e.words[r]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(w,m),i(y,m),i(v,m),v.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var i=19*(0|e.words[r])+t,s=67108863&i;i>>>=26,e.words[r]=s,t=i}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new _;else if("p224"===e)t=new w;else if("p192"===e)t=new y;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new v}return g[e]=t,t},E.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},E.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},E.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},E.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},E.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},E.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},E.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},E.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},E.prototype.isqr=function(e){return this.imul(e,e.clone())},E.prototype.sqr=function(e){return this.mul(e,e)},E.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var i=this.m.add(new s(1)).iushrn(2);return this.pow(e,i)}for(var n=this.m.subn(1),o=0;!n.isZero()&&0===n.andln(1);)o++,n.iushrn(1);r(!n.isZero());var a=new s(1).toRed(this),h=a.redNeg(),c=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);0!==this.pow(u,c).cmp(h);)u.redIAdd(h);for(var f=this.pow(u,n),l=this.pow(e,n.addn(1).iushrn(1)),d=this.pow(e,n),p=o;0!==d.cmp(a);){for(var b=d,g=0;0!==b.cmp(a);g++)b=b.redSqr();r(g<p);var m=this.pow(f,new s(1).iushln(p-g-1));l=l.redMul(m),f=m.redSqr(),d=d.redMul(f),p=g}return l},E.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},E.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new s(1).toRed(this),r[1]=e;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],e);var n=r[0],o=0,a=0,h=t.bitLength()%26;for(0===h&&(h=26),i=t.length-1;i>=0;i--){for(var c=t.words[i],u=h-1;u>=0;u--){var f=c>>u&1;n!==r[0]&&(n=this.sqr(n)),0!==f||0!==o?(o<<=1,o|=f,(4===++a||0===i&&0===u)&&(n=this.mul(n,r[o]),a=0,o=0)):a=0}h=26}return n},E.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},E.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new S(e)},i(S,E),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=r.isub(i).iushrn(this.shift),n=s;return s.cmp(this.m)>=0?n=s.isub(this.m):s.cmpn(0)<0&&(n=s.iadd(this.m)),n._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var r=e.mul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===t||t,this)}],["bpkg","/lib/builtins/empty.js",function(e,t,r,i,s){}],["miller-rabin","/lib/mr.js",function(e,t,r,i,s){var n=h(58),o=h(61);function a(e){this.rand=e||new o.Rand}t.exports=a,a.create=function(e){return new a(e)},a.prototype._randbelow=function(e){var t=e.bitLength(),r=Math.ceil(t/8);do{var i=new n(this.rand.generate(r))}while(i.cmp(e)>=0);return i},a.prototype._randrange=function(e,t){var r=t.sub(e);return e.add(this._randbelow(r))},a.prototype.test=function(e,t,r){var i=e.bitLength(),s=n.mont(e),o=new n(1).toRed(s);t||(t=Math.max(1,i/48|0));for(var a=e.subn(1),h=0;!a.testn(h);h++);for(var c=e.shrn(h),u=a.toRed(s);t>0;t--){var f=this._randrange(new n(2),a);r&&r(f);var l=f.toRed(s).redPow(c);if(0!==l.cmp(o)&&0!==l.cmp(u)){for(var d=1;d<h;d++){if(0===(l=l.redSqr()).cmp(o))return!1;if(0===l.cmp(u))break}if(d===h)return!1}}return!0},a.prototype.getDivisor=function(e,t){var r=e.bitLength(),i=n.mont(e),s=new n(1).toRed(i);t||(t=Math.max(1,r/48|0));for(var o=e.subn(1),a=0;!o.testn(a);a++);for(var h=e.shrn(a),c=o.toRed(i);t>0;t--){var u=this._randrange(new n(2),o),f=e.gcd(u);if(0!==f.cmpn(1))return f;var l=u.toRed(i).redPow(h);if(0!==l.cmp(s)&&0!==l.cmp(c)){for(var d=1;d<a;d++){if(0===(l=l.redSqr()).cmp(s))return l.fromRed().subn(1).gcd(e);if(0===l.cmp(c))break}if(d===a)return(l=l.redSqr()).fromRed().subn(1).gcd(e)}}return!1}}],["brorand","/index.js",function(e,t,r,i,s){var n;function o(e){this.rand=e}if(t.exports=function(e){return n||(n=new o(null)),n.generate(e)},t.exports.Rand=o,o.prototype.generate=function(e){return this._rand(e)},o.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?o.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?o.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(o.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var a=h(59);if("function"!=typeof a.randomBytes)throw new Error("Not supported");o.prototype._rand=function(e){return a.randomBytes(e)}}catch(e){}}],["diffie-hellman","/lib/primes.json",function(e,t,r,i,s){t.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}}],["diffie-hellman","/lib/dh.js",function(e,t,r,i,s){var n=h(58),o=new(h(60)),a=new n(24),c=new n(11),u=new n(10),f=new n(3),l=new n(7),d=h(57),p=h(1);function b(e,t){return t=t||"utf8",null!=e&&!0===e._isBuffer||(e=new Buffer(e,t)),this._pub=new n(e),this}function g(e,t){return t=t||"utf8",null!=e&&!0===e._isBuffer||(e=new Buffer(e,t)),this._priv=new n(e),this}t.exports=_;var m={};function _(e,t,r){this.setGenerator(t),this.__prime=new n(e),this._prime=n.mont(this.__prime),this._primeLen=e.length,this._pub=undefined,this._priv=undefined,this._primeCode=undefined,r?(this.setPublicKey=b,this.setPrivateKey=g):this._primeCode=8}function w(e,t){var r=new Buffer(e.toArray());return t?r.toString(t):r}Object.defineProperty(_.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(e,t){var r=t.toString("hex"),i=[r,e.toString(16)].join("_");if(i in m)return m[i];var s,n=0;if(e.isEven()||!d.simpleSieve||!d.fermatTest(e)||!o.test(e))return n+=1,n+="02"===r||"05"===r?8:4,m[i]=n,n;switch(o.test(e.shrn(1))||(n+=2),r){case"02":e.mod(a).cmp(c)&&(n+=8);break;case"05":(s=e.mod(u)).cmp(f)&&s.cmp(l)&&(n+=8);break;default:n+=4}return m[i]=n,n}(this.__prime,this.__gen)),this._primeCode}}),_.prototype.generateKeys=function(){return this._priv||(this._priv=new n(p(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},_.prototype.computeSecret=function(e){var t=(e=(e=new n(e)).toRed(this._prime)).redPow(this._priv).fromRed(),r=new Buffer(t.toArray()),i=this.getPrime();if(r.length<i.length){var s=new Buffer(i.length-r.length);s.fill(0),r=Buffer.concat([s,r])}return r},_.prototype.getPublicKey=function(e){return w(this._pub,e)},_.prototype.getPrivateKey=function(e){return w(this._priv,e)},_.prototype.getPrime=function(e){return w(this.__prime,e)},_.prototype.getGenerator=function(e){return w(this._gen,e)},_.prototype.setGenerator=function(e,t){return t=t||"utf8",null!=e&&!0===e._isBuffer||(e=new Buffer(e,t)),this.__gen=e,this._gen=new n(e),this}}],["browserify-sign","/browser/index.js",function(e,t,r,i,s){var n=h(3),o=__browser_require__(473,t),a=h(4),c=h(65),u=h(118),f=h(21);function l(e){o.Writable.call(this);var t=f[e];if(!t)throw new Error("Unknown message digest");this._hashType=t.hash,this._hash=n(t.hash),this._tag=t.id,this._signType=t.sign}function d(e){o.Writable.call(this);var t=f[e];if(!t)throw new Error("Unknown message digest");this._hash=n(t.hash),this._tag=t.id,this._signType=t.sign}function p(e){return new l(e)}function b(e){return new d(e)}Object.keys(f).forEach(function(e){f[e].id=new Buffer(f[e].id,"hex"),f[e.toLowerCase()]=f[e]}),a(l,o.Writable),l.prototype._write=function(e,t,r){this._hash.update(e),r()},l.prototype.update=function(e,t){return"string"==typeof e&&(e=new Buffer(e,t)),this._hash.update(e),this},l.prototype.sign=function(e,t){this.end();var r=this._hash.digest(),i=c(r,e,this._hashType,this._signType,this._tag);return t?i.toString(t):i},a(d,o.Writable),d.prototype._write=function(e,t,r){this._hash.update(e),r()},d.prototype.update=function(e,t){return"string"==typeof e&&(e=new Buffer(e,t)),this._hash.update(e),this},d.prototype.verify=function(e,t,r){"string"==typeof t&&(t=new Buffer(t,r)),this.end();var i=this._hash.digest();return u(t,i,e,this._signType,this._tag)},t.exports={Sign:p,Verify:b,createSign:p,createVerify:b}}],["browserify-sign","/browser/sign.js",function(e,t,r,i,s){var n=h(17),o=h(66),a=h(67).ec,c=h(58),u=h(98),f=h(117);function l(e,t,r,i){if((e=new Buffer(e.toArray())).length<t.byteLength()){var s=new Buffer(t.byteLength()-e.length);s.fill(0),e=Buffer.concat([s,e])}var o=r.length,a=function(e,t){e=(e=d(e,t)).mod(t);var r=new Buffer(e.toArray());if(r.length<t.byteLength()){var i=new Buffer(t.byteLength()-r.length);i.fill(0),r=Buffer.concat([i,r])}return r}(r,t),h=new Buffer(o);h.fill(1);var c=new Buffer(o);return c.fill(0),c=n(i,c).update(h).update(new Buffer([0])).update(e).update(a).digest(),h=n(i,c).update(h).digest(),{k:c=n(i,c).update(h).update(new Buffer([1])).update(e).update(a).digest(),v:h=n(i,c).update(h).digest()}}function d(e,t){var r=new c(e),i=(e.length<<3)-t.bitLength();return i>0&&r.ishrn(i),r}function p(e,t,r){var i,s;do{for(i=new Buffer(0);8*i.length<e.bitLength();)t.v=n(r,t.k).update(t.v).digest(),i=Buffer.concat([i,t.v]);s=d(i,e),t.k=n(r,t.k).update(t.v).update(new Buffer([0])).digest(),t.v=n(r,t.k).update(t.v).digest()}while(-1!==s.cmp(e));return s}function b(e,t,r,i){return e.toRed(c.mont(r)).redPow(t).fromRed().mod(i)}t.exports=function(e,t,r,i,s){var n=u(t);if(n.curve){if("ecdsa"!==i&&"ecdsa/rsa"!==i)throw new Error("wrong private key type");return function(e,t){var r=f[t.curve.join(".")];if(!r)throw new Error("unknown curve "+t.curve.join("."));var i=new a(r).keyFromPrivate(t.privateKey).sign(e);return new Buffer(i.toDER())}(e,n)}if("dsa"===n.type){if("dsa"!==i)throw new Error("wrong private key type");return function(e,t,r){for(var i,s=t.params.priv_key,n=t.params.p,o=t.params.q,a=t.params.g,h=new c(0),u=d(e,o).mod(o),f=!1,g=l(s,o,e,r);!1===f;)i=p(o,g,r),h=b(a,i,n,o),0===(f=i.invm(o).imul(u.add(s.mul(h))).mod(o)).cmpn(0)&&(f=!1,h=new c(0));return function(e,t){e=e.toArray(),t=t.toArray(),128&e[0]&&(e=[0].concat(e)),128&t[0]&&(t=[0].concat(t));var r=[48,e.length+t.length+4,2,e.length];return r=r.concat(e,[2,t.length],t),new Buffer(r)}(h,f)}(e,n,r)}if("rsa"!==i&&"ecdsa/rsa"!==i)throw new Error("wrong private key type");e=Buffer.concat([s,e]);for(var h=n.modulus.byteLength(),g=[0,1];e.length+g.length+1<h;)g.push(255);g.push(0);for(var m=-1;++m<e.length;)g.push(e[m]);return o(g,n)},t.exports.getKey=l,t.exports.makeKey=p}],["browserify-rsa","/index.js",function(e,t,r,i,s){var n=h(58),o=h(1);function a(e,t){var r=function(e){var t=c(e);return{blinder:t.toRed(n.mont(e.modulus)).redPow(new n(e.publicExponent)).fromRed(),unblinder:t.invm(e.modulus)}}(t),i=t.modulus.byteLength(),s=(n.mont(t.modulus),new n(e).mul(r.blinder).umod(t.modulus)),o=s.toRed(n.mont(t.prime1)),a=s.toRed(n.mont(t.prime2)),h=t.coefficient,u=t.prime1,f=t.prime2,l=o.redPow(t.exponent1),d=a.redPow(t.exponent2);l=l.fromRed(),d=d.fromRed();var p=l.isub(d).imul(h).umod(u);return p.imul(f),d.iadd(p),new Buffer(d.imul(r.unblinder).umod(t.modulus).toArray(!1,i))}function c(e){for(var t=e.modulus.byteLength(),r=new n(o(t));r.cmp(e.modulus)>=0||!r.umod(e.prime1)||!r.umod(e.prime2);)r=new n(o(t));return r}t.exports=a,a.getr=c}],["elliptic","/lib/elliptic.js",function(e,t,r,i,s){"use strict";var n=e;n.version=h(68).version,n.utils=h(69),n.rand=h(61),n.curve=h(71),n.curves=h(76),n.ec=h(91),n.eddsa=h(95)}],["elliptic","/package.json",function(e,t,r,i,s){t.exports={author:{name:"Fedor Indutny",email:"fedor@indutny.com"},bugs:{url:"https://github.com/indutny/elliptic/issues"},bundleDependencies:!1,dependencies:{"bn.js":"^4.4.0",brorand:"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0",inherits:"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"},deprecated:!1,description:"EC cryptography",devDependencies:{brfs:"^1.4.3",coveralls:"^2.11.3",grunt:"^0.4.5","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^8.6.2",istanbul:"^0.4.2",jscs:"^2.9.0",jshint:"^2.6.0",mocha:"^2.1.0"},files:["lib"],homepage:"https://github.com/indutny/elliptic",keywords:["EC","Elliptic","curve","Cryptography"],license:"MIT",main:"lib/elliptic.js",name:"elliptic",repository:{type:"git",url:"git+ssh://git@github.com/indutny/elliptic.git"},scripts:{jscs:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",jshint:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",lint:"npm run jscs && npm run jshint",test:"npm run lint && npm run unit",unit:"istanbul test _mocha --reporter=spec test/index.js",version:"grunt dist && git add dist/"},version:"6.4.1"}}],["elliptic","/lib/elliptic/utils.js",function(e,t,r,i,s){"use strict";var n=e,o=h(58),a=h(32),c=h(70);n.assert=a,n.toArray=c.toArray,n.zero2=c.zero2,n.toHex=c.toHex,n.encode=c.encode,n.getNAF=function(e,t){for(var r=[],i=1<<t+1,s=e.clone();s.cmpn(1)>=0;){var n;if(s.isOdd()){var o=s.andln(i-1);n=o>(i>>1)-1?(i>>1)-o:o,s.isubn(n)}else n=0;r.push(n);for(var a=0!==s.cmpn(0)&&0===s.andln(i-1)?t+1:1,h=1;h<a;h++)r.push(0);s.iushrn(a)}return r},n.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var i=0,s=0;e.cmpn(-i)>0||t.cmpn(-s)>0;){var n,o,a,h=e.andln(3)+i&3,c=t.andln(3)+s&3;3===h&&(h=-1),3===c&&(c=-1),n=0==(1&h)?0:3!=(a=e.andln(7)+i&7)&&5!==a||2!==c?h:-h,r[0].push(n),o=0==(1&c)?0:3!=(a=t.andln(7)+s&7)&&5!==a||2!==h?c:-c,r[1].push(o),2*i===n+1&&(i=1-i),2*s===o+1&&(s=1-s),e.iushrn(1),t.iushrn(1)}return r},n.cachedProperty=function(e,t,r){var i="_"+t;e.prototype[t]=function(){return this[i]!==undefined?this[i]:this[i]=r.call(this)}},n.parseBytes=function(e){return"string"==typeof e?n.toArray(e,"hex"):e},n.intFromLE=function(e){return new o(e,"hex","le")}}],["minimalistic-crypto-utils","/lib/utils.js",function(e,t,r,i,s){"use strict";var n=e;function o(e){return 1===e.length?"0"+e:e}function a(e){for(var t="",r=0;r<e.length;r++)t+=o(e[r].toString(16));return t}n.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var i=0;i<e.length;i++)r[i]=0|e[i];return r}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16));else for(i=0;i<e.length;i++){var s=e.charCodeAt(i),n=s>>8,o=255&s;n?r.push(n,o):r.push(o)}return r},n.zero2=o,n.toHex=a,n.encode=function(e,t){return"hex"===t?a(e):e}}],["elliptic","/lib/elliptic/curve/index.js",function(e,t,r,i,s){"use strict";var n=e;n.base=h(72),n.short=h(73),n.mont=h(74),n.edwards=h(75)}],["elliptic","/lib/elliptic/curve/base.js",function(e,t,r,i,s){"use strict";var n=h(58),o=h(67).utils,a=o.getNAF,c=o.getJSF,u=o.assert;function f(e,t){this.type=e,this.p=new n(t.p,16),this.red=t.prime?n.red(t.prime):n.mont(this.p),this.zero=new n(0).toRed(this.red),this.one=new n(1).toRed(this.red),this.two=new n(2).toRed(this.red),this.n=t.n&&new n(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4);var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function l(e,t){this.curve=e,this.type=t,this.precomputed=null}t.exports=f,f.prototype.point=function(){throw new Error("Not implemented")},f.prototype.validate=function(){throw new Error("Not implemented")},f.prototype._fixedNafMul=function(e,t){u(e.precomputed);var r=e._getDoubles(),i=a(t,1),s=(1<<r.step+1)-(r.step%2==0?2:1);s/=3;for(var n=[],o=0;o<i.length;o+=r.step){var h=0;for(t=o+r.step-1;t>=o;t--)h=(h<<1)+i[t];n.push(h)}for(var c=this.jpoint(null,null,null),f=this.jpoint(null,null,null),l=s;l>0;l--){for(o=0;o<n.length;o++){(h=n[o])===l?f=f.mixedAdd(r.points[o]):h===-l&&(f=f.mixedAdd(r.points[o].neg()))}c=c.add(f)}return c.toP()},f.prototype._wnafMul=function(e,t){var r=4,i=e._getNAFPoints(r);r=i.wnd;for(var s=i.points,n=a(t,r),o=this.jpoint(null,null,null),h=n.length-1;h>=0;h--){for(t=0;h>=0&&0===n[h];h--)t++;if(h>=0&&t++,o=o.dblp(t),h<0)break;var c=n[h];u(0!==c),o="affine"===e.type?c>0?o.mixedAdd(s[c-1>>1]):o.mixedAdd(s[-c-1>>1].neg()):c>0?o.add(s[c-1>>1]):o.add(s[-c-1>>1].neg())}return"affine"===e.type?o.toP():o},f.prototype._wnafMulAdd=function(e,t,r,i,s){for(var n=this._wnafT1,o=this._wnafT2,h=this._wnafT3,u=0,f=0;f<i;f++){var l=(k=t[f])._getNAFPoints(e);n[f]=l.wnd,o[f]=l.points}for(f=i-1;f>=1;f-=2){var d=f-1,p=f;if(1===n[d]&&1===n[p]){var b=[t[d],null,null,t[p]];0===t[d].y.cmp(t[p].y)?(b[1]=t[d].add(t[p]),b[2]=t[d].toJ().mixedAdd(t[p].neg())):0===t[d].y.cmp(t[p].y.redNeg())?(b[1]=t[d].toJ().mixedAdd(t[p]),b[2]=t[d].add(t[p].neg())):(b[1]=t[d].toJ().mixedAdd(t[p]),b[2]=t[d].toJ().mixedAdd(t[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],m=c(r[d],r[p]);u=Math.max(m[0].length,u),h[d]=new Array(u),h[p]=new Array(u);for(var _=0;_<u;_++){var w=0|m[0][_],y=0|m[1][_];h[d][_]=g[3*(w+1)+(y+1)],h[p][_]=0,o[d]=b}}else h[d]=a(r[d],n[d]),h[p]=a(r[p],n[p]),u=Math.max(h[d].length,u),u=Math.max(h[p].length,u)}var v=this.jpoint(null,null,null),E=this._wnafT4;for(f=u;f>=0;f--){for(var S=0;f>=0;){var I=!0;for(_=0;_<i;_++)E[_]=0|h[_][f],0!==E[_]&&(I=!1);if(!I)break;S++,f--}if(f>=0&&S++,v=v.dblp(S),f<0)break;for(_=0;_<i;_++){var k,A=E[_];0!==A&&(A>0?k=o[_][A-1>>1]:A<0&&(k=o[_][-A-1>>1].neg()),v="affine"===k.type?v.mixedAdd(k):v.add(k))}}for(f=0;f<i;f++)o[f]=null;return s?v:v.toP()},f.BasePoint=l,l.prototype.eq=function(){throw new Error("Not implemented")},l.prototype.validate=function(){return this.curve.validate(this)},f.prototype.decodePoint=function(e,t){e=o.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?u(e[e.length-1]%2==0):7===e[0]&&u(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},l.prototype.encodeCompressed=function(e){return this.encode(e,!0)},l.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},l.prototype.encode=function(e,t){return o.encode(this._encode(t),e)},l.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},l.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},l.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],i=this,s=0;s<t;s+=e){for(var n=0;n<e;n++)i=i.dbl();r.push(i)}return{step:e,points:r}},l.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,i=1===r?null:this.dbl(),s=1;s<r;s++)t[s]=t[s-1].add(i);return{wnd:e,points:t}},l.prototype._getBeta=function(){return null},l.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}}],["elliptic","/lib/elliptic/curve/short.js",function(e,t,r,i,s){"use strict";var n=h(71),o=h(67),a=h(58),c=h(4),u=n.base,f=o.utils.assert;function l(e){u.call(this,"short",e),this.a=new a(e.a,16).toRed(this.red),this.b=new a(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function d(e,t,r,i){u.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new a(t,16),this.y=new a(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function p(e,t,r,i){u.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new a(0)):(this.x=new a(t,16),this.y=new a(r,16),this.z=new a(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}c(l,u),t.exports=l,l.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new a(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=(t=i[0].cmp(i[1])<0?i[0]:i[1]).toRed(this.red)}if(e.lambda)r=new a(e.lambda,16);else{var s=this._getEndoRoots(this.n);0===this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))?r=s[0]:(r=s[1],f(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map(function(e){return{a:new a(e.a,16),b:new a(e.b,16)}}):this._getEndoBasis(r)}}},l.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:a.mont(e),r=new a(2).toRed(t).redInvm(),i=r.redNeg(),s=new a(3).toRed(t).redNeg().redSqrt().redMul(r);return[i.redAdd(s).fromRed(),i.redSub(s).fromRed()]},l.prototype._getEndoBasis=function(e){for(var t,r,i,s,n,o,h,c,u,f=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=e,d=this.n.clone(),p=new a(1),b=new a(0),g=new a(0),m=new a(1),_=0;0!==l.cmpn(0);){var w=d.div(l);c=d.sub(w.mul(l)),u=g.sub(w.mul(p));var y=m.sub(w.mul(b));if(!i&&c.cmp(f)<0)t=h.neg(),r=p,i=c.neg(),s=u;else if(i&&2==++_)break;h=c,d=l,l=c,g=p,p=u,m=b,b=y}n=c.neg(),o=u;var v=i.sqr().add(s.sqr());return n.sqr().add(o.sqr()).cmp(v)>=0&&(n=t,o=r),i.negative&&(i=i.neg(),s=s.neg()),n.negative&&(n=n.neg(),o=o.neg()),[{a:i,b:s},{a:n,b:o}]},l.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],i=t[1],s=i.b.mul(e).divRound(this.n),n=r.b.neg().mul(e).divRound(this.n),o=s.mul(r.a),a=n.mul(i.a),h=s.mul(r.b),c=n.mul(i.b);return{k1:e.sub(o).sub(a),k2:h.add(c).neg()}},l.prototype.pointFromX=function(e,t){(e=new a(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=r.redSqrt();if(0!==i.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var s=i.fromRed().isOdd();return(t&&!s||!t&&s)&&(i=i.redNeg()),this.point(e,i)},l.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,i=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return 0===r.redSqr().redISub(s).cmpn(0)},l.prototype._endoWnafMulAdd=function(e,t,r){for(var i=this._endoWnafT1,s=this._endoWnafT2,n=0;n<e.length;n++){var o=this._endoSplit(t[n]),a=e[n],h=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),h=h.neg(!0)),i[2*n]=a,i[2*n+1]=h,s[2*n]=o.k1,s[2*n+1]=o.k2}for(var c=this._wnafMulAdd(1,i,s,2*n,r),u=0;u<2*n;u++)i[u]=null,s[u]=null;return c},c(d,u.BasePoint),l.prototype.point=function(e,t,r){return new d(this,e,t,r)},l.prototype.pointFromJSON=function(e,t){return d.fromJSON(this,e,t)},d.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,i=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}},d.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},d.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var i=e.point(t[0],t[1],r);if(!t[2])return i;function s(t){return e.point(t[0],t[1],r)}var n=t[2];return i.precomputed={beta:null,doubles:n.doubles&&{step:n.doubles.step,points:[i].concat(n.doubles.points.map(s))},naf:n.naf&&{wnd:n.naf.wnd,points:[i].concat(n.naf.points.map(s))}},i},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return this.inf},d.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)},d.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),i=e.redInvm(),s=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(i),n=s.redSqr().redISub(this.x.redAdd(this.x)),o=s.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,o)},d.prototype.getX=function(){return this.x.fromRed()},d.prototype.getY=function(){return this.y.fromRed()},d.prototype.mul=function(e){return e=new a(e,16),this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},d.prototype.mulAdd=function(e,t,r){var i=[this,t],s=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)},d.prototype.jmulAdd=function(e,t,r){var i=[this,t],s=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)},d.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},d.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,i=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return t},d.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},c(p,u.BasePoint),l.prototype.jpoint=function(e,t,r){return new p(this,e,t,r)},p.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(r,i)},p.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},p.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),i=this.x.redMul(t),s=e.x.redMul(r),n=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(r.redMul(this.z)),a=i.redSub(s),h=n.redSub(o);if(0===a.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),u=c.redMul(a),f=i.redMul(c),l=h.redSqr().redIAdd(u).redISub(f).redISub(f),d=h.redMul(f.redISub(l)).redISub(n.redMul(u)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(l,d,p)},p.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,i=e.x.redMul(t),s=this.y,n=e.y.redMul(t).redMul(this.z),o=r.redSub(i),a=s.redSub(n);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h=o.redSqr(),c=h.redMul(o),u=r.redMul(h),f=a.redSqr().redIAdd(c).redISub(u).redISub(u),l=a.redMul(u.redISub(f)).redISub(s.redMul(c)),d=this.z.redMul(o);return this.curve.jpoint(f,l,d)},p.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}var i=this.curve.a,s=this.curve.tinv,n=this.x,o=this.y,a=this.z,h=a.redSqr().redSqr(),c=o.redAdd(o);for(r=0;r<e;r++){var u=n.redSqr(),f=c.redSqr(),l=f.redSqr(),d=u.redAdd(u).redIAdd(u).redIAdd(i.redMul(h)),p=n.redMul(f),b=d.redSqr().redISub(p.redAdd(p)),g=p.redISub(b),m=d.redMul(g);m=m.redIAdd(m).redISub(l);var _=c.redMul(a);r+1<e&&(h=h.redMul(l)),n=b,a=_,c=m}return this.curve.jpoint(n,c.redMul(s),a)},p.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},p.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),n=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(i).redISub(n);o=o.redIAdd(o);var a=i.redAdd(i).redIAdd(i),h=a.redSqr().redISub(o).redISub(o),c=n.redIAdd(n);c=(c=c.redIAdd(c)).redIAdd(c),e=h,t=a.redMul(o.redISub(h)).redISub(c),r=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),f=this.y.redSqr(),l=f.redSqr(),d=this.x.redAdd(f).redSqr().redISub(u).redISub(l);d=d.redIAdd(d);var p=u.redAdd(u).redIAdd(u),b=p.redSqr(),g=l.redIAdd(l);g=(g=g.redIAdd(g)).redIAdd(g),e=b.redISub(d).redISub(d),t=p.redMul(d.redISub(e)).redISub(g),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},p.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),n=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(i).redISub(n);o=o.redIAdd(o);var a=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),h=a.redSqr().redISub(o).redISub(o);e=h;var c=n.redIAdd(n);c=(c=c.redIAdd(c)).redIAdd(c),t=a.redMul(o.redISub(h)).redISub(c),r=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),f=this.y.redSqr(),l=this.x.redMul(f),d=this.x.redSub(u).redMul(this.x.redAdd(u));d=d.redAdd(d).redIAdd(d);var p=l.redIAdd(l),b=(p=p.redIAdd(p)).redAdd(p);e=d.redSqr().redISub(b),r=this.y.redAdd(this.z).redSqr().redISub(f).redISub(u);var g=f.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=d.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,r)},p.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,i=this.z,s=i.redSqr().redSqr(),n=t.redSqr(),o=r.redSqr(),a=n.redAdd(n).redIAdd(n).redIAdd(e.redMul(s)),h=t.redAdd(t),c=(h=h.redIAdd(h)).redMul(o),u=a.redSqr().redISub(c.redAdd(c)),f=c.redISub(u),l=o.redSqr();l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var d=a.redMul(f).redISub(l),p=r.redAdd(r).redMul(i);return this.curve.jpoint(u,d,p)},p.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),i=t.redSqr(),s=e.redAdd(e).redIAdd(e),n=s.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(i),a=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(n)).redSqr(),h=i.redIAdd(i);h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var c=s.redIAdd(o).redSqr().redISub(n).redISub(a).redISub(h),u=t.redMul(c);u=(u=u.redIAdd(u)).redIAdd(u);var f=this.x.redMul(a).redISub(u);f=(f=f.redIAdd(f)).redIAdd(f);var l=this.y.redMul(c.redMul(h.redISub(c)).redISub(o.redMul(a)));l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var d=this.z.redAdd(o).redSqr().redISub(r).redISub(a);return this.curve.jpoint(f,l,d)},p.prototype.mul=function(e,t){return e=new a(e,t),this.curve._wnafMul(this,e)},p.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var i=t.redMul(this.z),s=r.redMul(e.z);return 0===this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)},p.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var i=e.clone(),s=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(s),0===this.x.cmp(r))return!0}},p.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},p.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}}],["elliptic","/lib/elliptic/curve/mont.js",function(e,t,r,i,s){"use strict";var n=h(71),o=h(58),a=h(4),c=n.base,u=h(67).utils;function f(e){c.call(this,"mont",e),this.a=new o(e.a,16).toRed(this.red),this.b=new o(e.b,16).toRed(this.red),this.i4=new o(4).toRed(this.red).redInvm(),this.two=new o(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function l(e,t,r){c.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new o(t,16),this.z=new o(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}a(f,c),t.exports=f,f.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),i=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===i.redSqrt().redSqr().cmp(i)},a(l,c.BasePoint),f.prototype.decodePoint=function(e,t){return this.point(u.toArray(e,t),1)},f.prototype.point=function(e,t){return new l(this,e,t)},f.prototype.pointFromJSON=function(e){return l.fromJSON(this,e)},l.prototype.precompute=function(){},l.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},l.fromJSON=function(e,t){return new l(e,t[0],t[1]||e.one)},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},l.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),i=e.redMul(t),s=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(i,s)},l.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),i=this.x.redSub(this.z),s=e.x.redAdd(e.z),n=e.x.redSub(e.z).redMul(r),o=s.redMul(i),a=t.z.redMul(n.redAdd(o).redSqr()),h=t.x.redMul(n.redISub(o).redSqr());return this.curve.point(a,h)},l.prototype.mul=function(e){for(var t=e.clone(),r=this,i=this.curve.point(null,null),s=[];0!==t.cmpn(0);t.iushrn(1))s.push(t.andln(1));for(var n=s.length-1;n>=0;n--)0===s[n]?(r=r.diffAdd(i,this),i=i.dbl()):(i=r.diffAdd(i,this),r=r.dbl());return i},l.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},l.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()}}],["elliptic","/lib/elliptic/curve/edwards.js",function(e,t,r,i,s){"use strict";var n=h(71),o=h(67),a=h(58),c=h(4),u=n.base,f=o.utils.assert;function l(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,u.call(this,"edwards",e),this.a=new a(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new a(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new a(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),f(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function d(e,t,r,i,s){u.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===i?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new a(t,16),this.y=new a(r,16),this.z=i?new a(i,16):this.curve.one,this.t=s&&new a(s,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}c(l,u),t.exports=l,l.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},l.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},l.prototype.jpoint=function(e,t,r,i){return this.point(e,t,r,i)},l.prototype.pointFromX=function(e,t){(e=new a(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),i=this.c2.redSub(this.a.redMul(r)),s=this.one.redSub(this.c2.redMul(this.d).redMul(r)),n=i.redMul(s.redInvm()),o=n.redSqrt();if(0!==o.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var h=o.fromRed().isOdd();return(t&&!h||!t&&h)&&(o=o.redNeg()),this.point(e,o)},l.prototype.pointFromY=function(e,t){(e=new a(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),i=r.redSub(this.c2),s=r.redMul(this.d).redMul(this.c2).redSub(this.a),n=i.redMul(s.redInvm());if(0===n.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var o=n.redSqrt();if(0!==o.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");return o.fromRed().isOdd()!==t&&(o=o.redNeg()),this.point(o,e)},l.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),i=t.redMul(this.a).redAdd(r),s=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===i.cmp(s)},c(d,u.BasePoint),l.prototype.pointFromJSON=function(e){return d.fromJSON(this,e)},l.prototype.point=function(e,t,r,i){return new d(this,e,t,r,i)},d.fromJSON=function(e,t){return new d(e,t[0],t[1],t[2])},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},d.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var i=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),n=i.redAdd(t),o=n.redSub(r),a=i.redSub(t),h=s.redMul(o),c=n.redMul(a),u=s.redMul(a),f=o.redMul(n);return this.curve.point(h,c,f,u)},d.prototype._projDbl=function(){var e,t,r,i=this.x.redAdd(this.y).redSqr(),s=this.x.redSqr(),n=this.y.redSqr();if(this.curve.twisted){var o=(c=this.curve._mulA(s)).redAdd(n);if(this.zOne)e=i.redSub(s).redSub(n).redMul(o.redSub(this.curve.two)),t=o.redMul(c.redSub(n)),r=o.redSqr().redSub(o).redSub(o);else{var a=this.z.redSqr(),h=o.redSub(a).redISub(a);e=i.redSub(s).redISub(n).redMul(h),t=o.redMul(c.redSub(n)),r=o.redMul(h)}}else{var c=s.redAdd(n);a=this.curve._mulC(this.z).redSqr(),h=c.redSub(a).redSub(a);e=this.curve._mulC(i.redISub(c)).redMul(h),t=this.curve._mulC(c).redMul(s.redISub(n)),r=c.redMul(h)}return this.curve.point(e,t,r)},d.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},d.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),n=r.redSub(t),o=s.redSub(i),a=s.redAdd(i),h=r.redAdd(t),c=n.redMul(o),u=a.redMul(h),f=n.redMul(h),l=o.redMul(a);return this.curve.point(c,u,l,f)},d.prototype._projAdd=function(e){var t,r,i=this.z.redMul(e.z),s=i.redSqr(),n=this.x.redMul(e.x),o=this.y.redMul(e.y),a=this.curve.d.redMul(n).redMul(o),h=s.redSub(a),c=s.redAdd(a),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(n).redISub(o),f=i.redMul(h).redMul(u);return this.curve.twisted?(t=i.redMul(c).redMul(o.redSub(this.curve._mulA(n))),r=h.redMul(c)):(t=i.redMul(c).redMul(o.redSub(n)),r=this.curve._mulC(h).redMul(c)),this.curve.point(f,t,r)},d.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},d.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},d.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},d.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},d.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},d.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},d.prototype.getX=function(){return this.normalize(),this.x.fromRed()},d.prototype.getY=function(){return this.normalize(),this.y.fromRed()},d.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},d.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),i=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(i),0===this.x.cmp(t))return!0}},d.prototype.toP=d.prototype.normalize,d.prototype.mixedAdd=d.prototype.add}],["elliptic","/lib/elliptic/curves.js",function(e,t,r,i,s){"use strict";var n,o=e,a=h(77),c=h(67),u=c.utils.assert;function f(e){"short"===e.type?this.curve=new c.curve.short(e):"edwards"===e.type?this.curve=new c.curve.edwards(e):this.curve=new c.curve.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,u(this.g.validate(),"Invalid curve"),u(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function l(e,t){Object.defineProperty(o,e,{configurable:!0,enumerable:!0,get:function(){var r=new f(t);return Object.defineProperty(o,e,{configurable:!0,enumerable:!0,value:r}),r}})}o.PresetCurve=f,l("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:a.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),l("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:a.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),l("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:a.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),l("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:a.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),l("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:a.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),l("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["9"]}),l("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{n=h(90)}catch(e){n=undefined}l("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:a.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",n]})}],["hash.js","/lib/hash.js",function(e,t,r,i,s){var n=e;n.utils=h(78),n.common=h(80),n.sha=h(81),n.ripemd=h(88),n.hmac=h(89),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160}],["hash.js","/lib/hash/utils.js",function(e,t,r,i,s){"use strict";var n=h(32),o=h(79);function a(e,t){return 55296==(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1)))}function c(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function u(e){return 1===e.length?"0"+e:e}function f(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}e.inherits=o,e.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),s=0;s<e.length;s+=2)r.push(parseInt(e[s]+e[s+1],16))}else for(var i=0,s=0;s<e.length;s++){var n=e.charCodeAt(s);n<128?r[i++]=n:n<2048?(r[i++]=n>>6|192,r[i++]=63&n|128):a(e,s)?(n=65536+((1023&n)<<10)+(1023&e.charCodeAt(++s)),r[i++]=n>>18|240,r[i++]=n>>12&63|128,r[i++]=n>>6&63|128,r[i++]=63&n|128):(r[i++]=n>>12|224,r[i++]=n>>6&63|128,r[i++]=63&n|128)}else for(s=0;s<e.length;s++)r[s]=0|e[s];return r},e.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=u(e[r].toString(16));return t},e.htonl=c,e.toHex32=function(e,t){for(var r="",i=0;i<e.length;i++){var s=e[i];"little"===t&&(s=c(s)),r+=f(s.toString(16))}return r},e.zero2=u,e.zero8=f,e.join32=function(e,t,r,i){var s=r-t;n(s%4==0);for(var o=new Array(s/4),a=0,h=t;a<o.length;a++,h+=4){var c;c="big"===i?e[h]<<24|e[h+1]<<16|e[h+2]<<8|e[h+3]:e[h+3]<<24|e[h+2]<<16|e[h+1]<<8|e[h],o[a]=c>>>0}return o},e.split32=function(e,t){for(var r=new Array(4*e.length),i=0,s=0;i<e.length;i++,s+=4){var n=e[i];"big"===t?(r[s]=n>>>24,r[s+1]=n>>>16&255,r[s+2]=n>>>8&255,r[s+3]=255&n):(r[s+3]=n>>>24,r[s+2]=n>>>16&255,r[s+1]=n>>>8&255,r[s]=255&n)}return r},e.rotr32=function(e,t){return e>>>t|e<<32-t},e.rotl32=function(e,t){return e<<t|e>>>32-t},e.sum32=function(e,t){return e+t>>>0},e.sum32_3=function(e,t,r){return e+t+r>>>0},e.sum32_4=function(e,t,r,i){return e+t+r+i>>>0},e.sum32_5=function(e,t,r,i,s){return e+t+r+i+s>>>0},e.sum64=function(e,t,r,i){var s=e[t],n=i+e[t+1]>>>0,o=(n<i?1:0)+r+s;e[t]=o>>>0,e[t+1]=n},e.sum64_hi=function(e,t,r,i){return(t+i>>>0<t?1:0)+e+r>>>0},e.sum64_lo=function(e,t,r,i){return t+i>>>0},e.sum64_4_hi=function(e,t,r,i,s,n,o,a){var h=0,c=t;return h+=(c=c+i>>>0)<t?1:0,h+=(c=c+n>>>0)<n?1:0,e+r+s+o+(h+=(c=c+a>>>0)<a?1:0)>>>0},e.sum64_4_lo=function(e,t,r,i,s,n,o,a){return t+i+n+a>>>0},e.sum64_5_hi=function(e,t,r,i,s,n,o,a,h,c){var u=0,f=t;return u+=(f=f+i>>>0)<t?1:0,u+=(f=f+n>>>0)<n?1:0,u+=(f=f+a>>>0)<a?1:0,e+r+s+o+h+(u+=(f=f+c>>>0)<c?1:0)>>>0},e.sum64_5_lo=function(e,t,r,i,s,n,o,a,h,c){return t+i+n+a+c>>>0},e.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},e.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},e.shr64_hi=function(e,t,r){return e>>>r},e.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0}}],["inherits","/inherits_browser.js",function(e,t,r,i,s){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}],["hash.js","/lib/hash/common.js",function(e,t,r,i,s){"use strict";var n=h(78),o=h(32);function a(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=a,a.prototype.update=function(e,t){if(e=n.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=n.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},a.prototype.digest=function(e){return this.update(this._pad()),o(null===this.pending),this._digest(e)},a.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,i=new Array(r+this.padLength);i[0]=128;for(var s=1;s<r;s++)i[s]=0;if(e<<=3,"big"===this.endian){for(var n=8;n<this.padLength;n++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=255&e}else for(i[s++]=255&e,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,n=8;n<this.padLength;n++)i[s++]=0;return i}}],["hash.js","/lib/hash/sha.js",function(e,t,r,i,s){"use strict";e.sha1=h(82),e.sha224=h(84),e.sha256=h(85),e.sha384=h(86),e.sha512=h(87)}],["hash.js","/lib/hash/sha/1.js",function(e,t,r,i,s){"use strict";var n=h(78),o=h(80),a=h(83),c=n.rotl32,u=n.sum32,f=n.sum32_5,l=a.ft_1,d=o.BlockHash,p=[1518500249,1859775393,2400959708,3395469782];function b(){if(!(this instanceof b))return new b;d.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(b,d),t.exports=b,b.blockSize=512,b.outSize=160,b.hmacStrength=80,b.padLength=64,b.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=c(r[i-3]^r[i-8]^r[i-14]^r[i-16],1);var s=this.h[0],n=this.h[1],o=this.h[2],a=this.h[3],h=this.h[4];for(i=0;i<r.length;i++){var d=~~(i/20),b=f(c(s,5),l(d,n,o,a),h,r[i],p[d]);h=a,a=o,o=c(n,30),n=s,s=b}this.h[0]=u(this.h[0],s),this.h[1]=u(this.h[1],n),this.h[2]=u(this.h[2],o),this.h[3]=u(this.h[3],a),this.h[4]=u(this.h[4],h)},b.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}}],["hash.js","/lib/hash/sha/common.js",function(e,t,r,i,s){"use strict";var n=h(78).rotr32;function o(e,t,r){return e&t^~e&r}function a(e,t,r){return e&t^e&r^t&r}function c(e,t,r){return e^t^r}e.ft_1=function(e,t,r,i){return 0===e?o(t,r,i):1===e||3===e?c(t,r,i):2===e?a(t,r,i):void 0},e.ch32=o,e.maj32=a,e.p32=c,e.s0_256=function(e){return n(e,2)^n(e,13)^n(e,22)},e.s1_256=function(e){return n(e,6)^n(e,11)^n(e,25)},e.g0_256=function(e){return n(e,7)^n(e,18)^e>>>3},e.g1_256=function(e){return n(e,17)^n(e,19)^e>>>10}}],["hash.js","/lib/hash/sha/224.js",function(e,t,r,i,s){"use strict";var n=h(78),o=h(85);function a(){if(!(this instanceof a))return new a;o.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(a,o),t.exports=a,a.blockSize=512,a.outSize=224,a.hmacStrength=192,a.padLength=64,a.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}}],["hash.js","/lib/hash/sha/256.js",function(e,t,r,i,s){"use strict";var n=h(78),o=h(80),a=h(83),c=h(32),u=n.sum32,f=n.sum32_4,l=n.sum32_5,d=a.ch32,p=a.maj32,b=a.s0_256,g=a.s1_256,m=a.g0_256,_=a.g1_256,w=o.BlockHash,y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function v(){if(!(this instanceof v))return new v;w.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=y,this.W=new Array(64)}n.inherits(v,w),t.exports=v,v.blockSize=512,v.outSize=256,v.hmacStrength=192,v.padLength=64,v.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=f(_(r[i-2]),r[i-7],m(r[i-15]),r[i-16]);var s=this.h[0],n=this.h[1],o=this.h[2],a=this.h[3],h=this.h[4],w=this.h[5],y=this.h[6],v=this.h[7];for(c(this.k.length===r.length),i=0;i<r.length;i++){var E=l(v,g(h),d(h,w,y),this.k[i],r[i]),S=u(b(s),p(s,n,o));v=y,y=w,w=h,h=u(a,E),a=o,o=n,n=s,s=u(E,S)}this.h[0]=u(this.h[0],s),this.h[1]=u(this.h[1],n),this.h[2]=u(this.h[2],o),this.h[3]=u(this.h[3],a),this.h[4]=u(this.h[4],h),this.h[5]=u(this.h[5],w),this.h[6]=u(this.h[6],y),this.h[7]=u(this.h[7],v)},v.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}}],["hash.js","/lib/hash/sha/384.js",function(e,t,r,i,s){"use strict";var n=h(78),o=h(87);function a(){if(!(this instanceof a))return new a;o.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(a,o),t.exports=a,a.blockSize=1024,a.outSize=384,a.hmacStrength=192,a.padLength=128,a.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}}],["hash.js","/lib/hash/sha/512.js",function(e,t,r,i,s){"use strict";var n=h(78),o=h(80),a=h(32),c=n.rotr64_hi,u=n.rotr64_lo,f=n.shr64_hi,l=n.shr64_lo,d=n.sum64,p=n.sum64_hi,b=n.sum64_lo,g=n.sum64_4_hi,m=n.sum64_4_lo,_=n.sum64_5_hi,w=n.sum64_5_lo,y=o.BlockHash,v=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function E(){if(!(this instanceof E))return new E;y.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=v,this.W=new Array(160)}function S(e,t,r,i,s){var n=e&r^~e&s;return n<0&&(n+=4294967296),n}function I(e,t,r,i,s,n){var o=t&i^~t&n;return o<0&&(o+=4294967296),o}function k(e,t,r,i,s){var n=e&r^e&s^r&s;return n<0&&(n+=4294967296),n}function A(e,t,r,i,s,n){var o=t&i^t&n^i&n;return o<0&&(o+=4294967296),o}function O(e,t){var r=c(e,t,28)^c(t,e,2)^c(t,e,7);return r<0&&(r+=4294967296),r}function x(e,t){var r=u(e,t,28)^u(t,e,2)^u(t,e,7);return r<0&&(r+=4294967296),r}function R(e,t){var r=c(e,t,14)^c(e,t,18)^c(t,e,9);return r<0&&(r+=4294967296),r}function M(e,t){var r=u(e,t,14)^u(e,t,18)^u(t,e,9);return r<0&&(r+=4294967296),r}function P(e,t){var r=c(e,t,1)^c(e,t,8)^f(e,t,7);return r<0&&(r+=4294967296),r}function B(e,t){var r=u(e,t,1)^u(e,t,8)^l(e,t,7);return r<0&&(r+=4294967296),r}function N(e,t){var r=c(e,t,19)^c(t,e,29)^f(e,t,6);return r<0&&(r+=4294967296),r}function T(e,t){var r=u(e,t,19)^u(t,e,29)^l(e,t,6);return r<0&&(r+=4294967296),r}n.inherits(E,y),t.exports=E,E.blockSize=1024,E.outSize=512,E.hmacStrength=192,E.padLength=128,E.prototype._prepareBlock=function(e,t){for(var r=this.W,i=0;i<32;i++)r[i]=e[t+i];for(;i<r.length;i+=2){var s=N(r[i-4],r[i-3]),n=T(r[i-4],r[i-3]),o=r[i-14],a=r[i-13],h=P(r[i-30],r[i-29]),c=B(r[i-30],r[i-29]),u=r[i-32],f=r[i-31];r[i]=g(s,n,o,a,h,c,u,f),r[i+1]=m(s,n,o,a,h,c,u,f)}},E.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,i=this.h[0],s=this.h[1],n=this.h[2],o=this.h[3],h=this.h[4],c=this.h[5],u=this.h[6],f=this.h[7],l=this.h[8],g=this.h[9],m=this.h[10],y=this.h[11],v=this.h[12],E=this.h[13],P=this.h[14],B=this.h[15];a(this.k.length===r.length);for(var N=0;N<r.length;N+=2){var T=P,C=B,q=R(l,g),j=M(l,g),D=S(l,g,m,y,v),U=I(l,g,m,y,v,E),L=this.k[N],z=this.k[N+1],F=r[N],H=r[N+1],V=_(T,C,q,j,D,U,L,z,F,H),K=w(T,C,q,j,D,U,L,z,F,H);T=O(i,s),C=x(i,s),q=k(i,s,n,o,h),j=A(i,s,n,o,h,c);var W=p(T,C,q,j),G=b(T,C,q,j);P=v,B=E,v=m,E=y,m=l,y=g,l=p(u,f,V,K),g=b(f,f,V,K),u=h,f=c,h=n,c=o,n=i,o=s,i=p(V,K,W,G),s=b(V,K,W,G)}d(this.h,0,i,s),d(this.h,2,n,o),d(this.h,4,h,c),d(this.h,6,u,f),d(this.h,8,l,g),d(this.h,10,m,y),d(this.h,12,v,E),d(this.h,14,P,B)},E.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}}],["hash.js","/lib/hash/ripemd.js",function(e,t,r,i,s){"use strict";var n=h(78),o=h(80),a=n.rotl32,c=n.sum32,u=n.sum32_3,f=n.sum32_4,l=o.BlockHash;function d(){if(!(this instanceof d))return new d;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function p(e,t,r,i){return e<=15?t^r^i:e<=31?t&r|~t&i:e<=47?(t|~r)^i:e<=63?t&i|r&~i:t^(r|~i)}function b(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function g(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}n.inherits(d,l),e.ripemd160=d,d.blockSize=512,d.outSize=160,d.hmacStrength=192,d.padLength=64,d.prototype._update=function(e,t){for(var r=this.h[0],i=this.h[1],s=this.h[2],n=this.h[3],o=this.h[4],h=r,l=i,d=s,v=n,E=o,S=0;S<80;S++){var I=c(a(f(r,p(S,i,s,n),e[m[S]+t],b(S)),w[S]),o);r=o,o=n,n=a(s,10),s=i,i=I,I=c(a(f(h,p(79-S,l,d,v),e[_[S]+t],g(S)),y[S]),E),h=E,E=v,v=a(d,10),d=l,l=I}I=u(this.h[1],s,v),this.h[1]=u(this.h[2],n,E),this.h[2]=u(this.h[3],o,h),this.h[3]=u(this.h[4],r,l),this.h[4]=u(this.h[0],i,d),this.h[0]=I},d.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"little"):n.split32(this.h,"little")};var m=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],_=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],w=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],y=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]}],["hash.js","/lib/hash/hmac.js",function(e,t,r,i,s){"use strict";var n=h(78),o=h(32);function a(e,t,r){if(!(this instanceof a))return new a(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(t,r))}t.exports=a,a.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),o(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},a.prototype.update=function(e,t){return this.inner.update(e,t),this},a.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}}],["elliptic","/lib/elliptic/precomputed/secp256k1.js",function(e,t,r,i,s){t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}}],["elliptic","/lib/elliptic/ec/index.js",function(e,t,r,i,s){"use strict";var n=h(58),o=h(92),a=h(67),c=a.utils.assert,u=h(93),f=h(94);function l(e){if(!(this instanceof l))return new l(e);"string"==typeof e&&(c(a.curves.hasOwnProperty(e),"Unknown curve "+e),e=a.curves[e]),e instanceof a.curves.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}t.exports=l,l.prototype.keyPair=function(e){return new u(this,e)},l.prototype.keyFromPrivate=function(e,t){return u.fromPrivate(this,e,t)},l.prototype.keyFromPublic=function(e,t){return u.fromPublic(this,e,t)},l.prototype.genKeyPair=function(e){e||(e={});for(var t=new o({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||a.rand(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),i=this.n.sub(new n(2));;){var s=new n(t.generate(r));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}},l.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},l.prototype.sign=function(e,t,r,i){"object"==typeof r&&(i=r,r=null),i||(i={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new n(e,16));for(var s=this.n.byteLength(),a=t.getPrivate().toArray("be",s),h=e.toArray("be",s),c=new o({hash:this.hash,entropy:a,nonce:h,pers:i.pers,persEnc:i.persEnc||"utf8"}),u=this.n.sub(new n(1)),l=0;;l++){var d=i.k?i.k(l):new n(c.generate(this.n.byteLength()));if(!((d=this._truncateToN(d,!0)).cmpn(1)<=0||d.cmp(u)>=0)){var p=this.g.mul(d);if(!p.isInfinity()){var b=p.getX(),g=b.umod(this.n);if(0!==g.cmpn(0)){var m=d.invm(this.n).mul(g.mul(t.getPrivate()).iadd(e));if(0!==(m=m.umod(this.n)).cmpn(0)){var _=(p.getY().isOdd()?1:0)|(0!==b.cmp(g)?2:0);return i.canonical&&m.cmp(this.nh)>0&&(m=this.n.sub(m),_^=1),new f({r:g,s:m,recoveryParam:_})}}}}}},l.prototype.verify=function(e,t,r,i){e=this._truncateToN(new n(e,16)),r=this.keyFromPublic(r,i);var s=(t=new f(t,"hex")).r,o=t.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a,h=o.invm(this.n),c=h.mul(e).umod(this.n),u=h.mul(s).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(c,r.getPublic(),u)).isInfinity()&&a.eqXToP(s):!(a=this.g.mulAdd(c,r.getPublic(),u)).isInfinity()&&0===a.getX().umod(this.n).cmp(s)},l.prototype.recoverPubKey=function(e,t,r,i){c((3&r)===r,"The recovery param is more than two bits"),t=new f(t,i);var s=this.n,o=new n(e),a=t.r,h=t.s,u=1&r,l=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");a=l?this.curve.pointFromX(a.add(this.curve.n),u):this.curve.pointFromX(a,u);var d=t.r.invm(s),p=s.sub(o).mul(d).umod(s),b=h.mul(d).umod(s);return this.g.mulAdd(p,a,b)},l.prototype.getKeyRecoveryParam=function(e,t,r,i){if(null!==(t=new f(t,i)).recoveryParam)return t.recoveryParam;for(var s=0;s<4;s++){var n;try{n=this.recoverPubKey(e,t,s)}catch(e){continue}if(n.eq(r))return s}throw new Error("Unable to find valid recovery factor")}}],["hmac-drbg","/lib/hmac-drbg.js",function(e,t,r,i,s){"use strict";var n=h(77),o=h(70),a=h(32);function c(e){if(!(this instanceof c))return new c(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=o.toArray(e.entropy,e.entropyEnc||"hex"),r=o.toArray(e.nonce,e.nonceEnc||"hex"),i=o.toArray(e.pers,e.persEnc||"hex");a(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,i)}t.exports=c,c.prototype._init=function(e,t,r){var i=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},c.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},c.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},c.prototype.reseed=function(e,t,r,i){"string"!=typeof t&&(i=r,r=t,t=null),e=o.toArray(e,t),r=o.toArray(r,i),a(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},c.prototype.generate=function(e,t,r,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(i=r,r=t,t=null),r&&(r=o.toArray(r,i||"hex"),this._update(r));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var n=s.slice(0,e);return this._update(r),this._reseed++,o.encode(n,t)}}],["elliptic","/lib/elliptic/ec/key.js",function(e,t,r,i,s){"use strict";var n=h(58),o=h(67).utils.assert;function a(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}t.exports=a,a.fromPublic=function(e,t,r){return t instanceof a?t:new a(e,{pub:t,pubEnc:r})},a.fromPrivate=function(e,t,r){return t instanceof a?t:new a(e,{priv:t,privEnc:r})},a.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},a.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},a.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},a.prototype._importPrivate=function(e,t){this.priv=new n(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},a.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?o(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||o(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},a.prototype.derive=function(e){return e.mul(this.priv).getX()},a.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},a.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},a.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}}],["elliptic","/lib/elliptic/ec/signature.js",function(e,t,r,i,s){"use strict";var n=h(58),o=h(67).utils,a=o.assert;function c(e,t){if(e instanceof c)return e;this._importDER(e,t)||(a(e.r&&e.s,"Signature without r or s"),this.r=new n(e.r,16),this.s=new n(e.s,16),e.recoveryParam===undefined?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function u(e,t){var r=e[t.place++];if(!(128&r))return r;for(var i=15&r,s=0,n=0,o=t.place;n<i;n++,o++)s<<=8,s|=e[o];return t.place=o,s}function f(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function l(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}t.exports=c,c.prototype._importDER=function(e,t){e=o.toArray(e,t);var r=new function(){this.place=0};if(48!==e[r.place++])return!1;if(u(e,r)+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var i=u(e,r),s=e.slice(r.place,i+r.place);if(r.place+=i,2!==e[r.place++])return!1;var a=u(e,r);if(e.length!==a+r.place)return!1;var h=e.slice(r.place,a+r.place);return 0===s[0]&&128&s[1]&&(s=s.slice(1)),0===h[0]&&128&h[1]&&(h=h.slice(1)),this.r=new n(s),this.s=new n(h),this.recoveryParam=null,!0},c.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=f(t),r=f(r);!(r[0]||128&r[1]);)r=r.slice(1);var i=[2];l(i,t.length),(i=i.concat(t)).push(2),l(i,r.length);var s=i.concat(r),n=[48];return l(n,s.length),n=n.concat(s),o.encode(n,e)}}],["elliptic","/lib/elliptic/eddsa/index.js",function(e,t,r,i,s){"use strict";var n=h(77),o=h(67),a=o.utils,c=a.assert,u=a.parseBytes,f=h(96),l=h(97);function d(e){if(c("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof d))return new d(e);e=o.curves[e].curve;this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=n.sha512}t.exports=d,d.prototype.sign=function(e,t){e=u(e);var r=this.keyFromSecret(t),i=this.hashInt(r.messagePrefix(),e),s=this.g.mul(i),n=this.encodePoint(s),o=this.hashInt(n,r.pubBytes(),e).mul(r.priv()),a=i.add(o).umod(this.curve.n);return this.makeSignature({R:s,S:a,Rencoded:n})},d.prototype.verify=function(e,t,r){e=u(e),t=this.makeSignature(t);var i=this.keyFromPublic(r),s=this.hashInt(t.Rencoded(),i.pubBytes(),e),n=this.g.mul(t.S());return t.R().add(i.pub().mul(s)).eq(n)},d.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return a.intFromLE(e.digest()).umod(this.curve.n)},d.prototype.keyFromPublic=function(e){return f.fromPublic(this,e)},d.prototype.keyFromSecret=function(e){return f.fromSecret(this,e)},d.prototype.makeSignature=function(e){return e instanceof l?e:new l(this,e)},d.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},d.prototype.decodePoint=function(e){var t=(e=a.parseBytes(e)).length-1,r=e.slice(0,t).concat(-129&e[t]),i=0!=(128&e[t]),s=a.intFromLE(r);return this.curve.pointFromY(s,i)},d.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},d.prototype.decodeInt=function(e){return a.intFromLE(e)},d.prototype.isPoint=function(e){return e instanceof this.pointClass}}],["elliptic","/lib/elliptic/eddsa/key.js",function(e,t,r,i,s){"use strict";var n=h(67).utils,o=n.assert,a=n.parseBytes,c=n.cachedProperty;function u(e,t){this.eddsa=e,this._secret=a(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=a(t.pub)}u.fromPublic=function(e,t){return t instanceof u?t:new u(e,{pub:t})},u.fromSecret=function(e,t){return t instanceof u?t:new u(e,{secret:t})},u.prototype.secret=function(){return this._secret},c(u,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),c(u,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),c(u,"privBytes",function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,i=t.slice(0,e.encodingLength);return i[0]&=248,i[r]&=127,i[r]|=64,i}),c(u,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),c(u,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),c(u,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),u.prototype.sign=function(e){return o(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},u.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},u.prototype.getSecret=function(e){return o(this._secret,"KeyPair is public only"),n.encode(this.secret(),e)},u.prototype.getPublic=function(e){return n.encode(this.pubBytes(),e)},t.exports=u}],["elliptic","/lib/elliptic/eddsa/signature.js",function(e,t,r,i,s){"use strict";var n=h(58),o=h(67).utils,a=o.assert,c=o.cachedProperty,u=o.parseBytes;function f(e,t){this.eddsa=e,"object"!=typeof t&&(t=u(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),a(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof n&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}c(f,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),c(f,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),c(f,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),c(f,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),f.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},f.prototype.toHex=function(){return o.encode(this.toBytes(),"hex").toUpperCase()},t.exports=f}],["parse-asn1","/index.js",function(e,t,r,i,s){var n=h(99),o=h(115),a=h(116),c=h(36),u=h(22),f=h(2).Buffer;function l(e){var t;"object"!=typeof e||null!=e&&!0===e._isBuffer||(t=e.passphrase,e=e.key),"string"==typeof e&&(e=f.from(e));var r,i,s=a(e,t),h=s.tag,l=s.data;switch(h){case"CERTIFICATE":i=n.certificate.decode(l,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(i||(i=n.PublicKey.decode(l,"der")),r=i.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPublicKey.decode(i.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return i.subjectPrivateKey=i.subjectPublicKey,{type:"ec",data:i};case"1.2.840.10040.4.1":return i.algorithm.params.pub_key=n.DSAparam.decode(i.subjectPublicKey.data,"der"),{type:"dsa",data:i.algorithm.params};default:throw new Error("unknown key id "+r)}throw new Error("unknown key type "+h);case"ENCRYPTED PRIVATE KEY":l=function(e,t){var r=e.algorithm.decrypt.kde.kdeparams.salt,i=parseInt(e.algorithm.decrypt.kde.kdeparams.iters.toString(),10),s=o[e.algorithm.decrypt.cipher.algo.join(".")],n=e.algorithm.decrypt.cipher.iv,a=e.subjectPrivateKey,h=parseInt(s.split("-")[1],10)/8,l=u.pbkdf2Sync(t,r,i,h,"sha1"),d=c.createDecipheriv(s,l,n),p=[];return p.push(d.update(a)),p.push(d.final()),f.concat(p)}(l=n.EncryptedPrivateKey.decode(l,"der"),t);case"PRIVATE KEY":switch(r=(i=n.PrivateKey.decode(l,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPrivateKey.decode(i.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:i.algorithm.curve,privateKey:n.ECPrivateKey.decode(i.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return i.algorithm.params.priv_key=n.DSAparam.decode(i.subjectPrivateKey,"der"),{type:"dsa",params:i.algorithm.params};default:throw new Error("unknown key id "+r)}throw new Error("unknown key type "+h);case"RSA PUBLIC KEY":return n.RSAPublicKey.decode(l,"der");case"RSA PRIVATE KEY":return n.RSAPrivateKey.decode(l,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:n.DSAPrivateKey.decode(l,"der")};case"EC PRIVATE KEY":return{curve:(l=n.ECPrivateKey.decode(l,"der")).parameters.value,privateKey:l.privateKey};default:throw new Error("unknown key type "+h)}}t.exports=l,l.signature=n.signature}],["parse-asn1","/asn1.js",function(e,t,r,i,s){"use strict";var n=h(100);e.certificate=h(114);var o=n.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});e.RSAPrivateKey=o;var a=n.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});e.RSAPublicKey=a;var c=n.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(u),this.key("subjectPublicKey").bitstr())});e.PublicKey=c;var u=n.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),f=n.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(u),this.key("subjectPrivateKey").octstr())});e.PrivateKey=f;var l=n.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});e.EncryptedPrivateKey=l;var d=n.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});e.DSAPrivateKey=d,e.DSAparam=n.define("DSAparam",function(){this.int()});var p=n.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(b),this.key("publicKey").optional().explicit(1).bitstr())});e.ECPrivateKey=p;var b=n.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});e.signature=n.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})}],["asn1.js","/lib/asn1.js",function(e,t,r,i,s){var n=e;n.bignum=h(58),n.define=h(101).define,n.base=h(102),n.constants=h(106),n.decoders=h(108),n.encoders=h(111)}],["asn1.js","/lib/asn1/api.js",function(e,t,r,i,s){var n=h(100),o=h(4);function a(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}e.define=function(e,t){return new a(e,t)},a.prototype._createNamed=function(e){var r;try{r=__browser_require__(486,t).runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})")}catch(e){r=function(e){this._initNamed(e)}}return o(r,e),r.prototype._initNamed=function(t){e.call(this,t)},new r(this)},a.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(n.decoders[e])),this.decoders[e]},a.prototype.decode=function(e,t,r){return this._getDecoder(t).decode(e,r)},a.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(n.encoders[e])),this.encoders[e]},a.prototype.encode=function(e,t,r){return this._getEncoder(t).encode(e,r)}}],["asn1.js","/lib/asn1/base/index.js",function(e,t,r,i,s){var n=e;n.Reporter=h(103).Reporter,n.DecoderBuffer=h(104).DecoderBuffer,n.EncoderBuffer=h(104).EncoderBuffer,n.Node=h(105)}],["asn1.js","/lib/asn1/base/reporter.js",function(e,t,r,i,s){var n=h(4);function o(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function a(e,t){this.path=e,this.rethrow(t)}e.Reporter=o,o.prototype.isError=function(e){return e instanceof a},o.prototype.save=function(){var e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},o.prototype.restore=function(e){var t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},o.prototype.enterKey=function(e){return this._reporterState.path.push(e)},o.prototype.exitKey=function(e){var t=this._reporterState;t.path=t.path.slice(0,e-1)},o.prototype.leaveKey=function(e,t,r){var i=this._reporterState;this.exitKey(e),null!==i.obj&&(i.obj[t]=r)},o.prototype.path=function(){return this._reporterState.path.join("/")},o.prototype.enterObject=function(){var e=this._reporterState,t=e.obj;return e.obj={},t},o.prototype.leaveObject=function(e){var t=this._reporterState,r=t.obj;return t.obj=e,r},o.prototype.error=function(e){var t,r=this._reporterState,i=e instanceof a;if(t=i?e:new a(r.path.map(function(e){return"["+JSON.stringify(e)+"]"}).join(""),e.message||e,e.stack),!r.options.partial)throw t;return i||r.errors.push(t),t},o.prototype.wrapResult=function(e){var t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},n(a,Error),a.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,a),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}}],["asn1.js","/lib/asn1/base/buffer.js",function(e,t,r,i,s){var n=h(4),o=h(102).Reporter,a=__browser_require__(426,t).Buffer;function c(e,t){o.call(this,t),null!=e&&!0===e._isBuffer?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function u(e,t){if(Array.isArray(e))this.length=0,this.value=e.map(function(e){return e instanceof u||(e=new u(e,t)),this.length+=e.length,e},this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=a.byteLength(e);else{if(null==e||!0!==e._isBuffer)return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}n(c,o),e.DecoderBuffer=c,c.prototype.save=function(){return{offset:this.offset,reporter:o.prototype.save.call(this)}},c.prototype.restore=function(e){var t=new c(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,o.prototype.restore.call(this,e.reporter),t},c.prototype.isEmpty=function(){return this.offset===this.length},c.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},c.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");var r=new c(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+e,this.offset+=e,r},c.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},e.EncoderBuffer=u,u.prototype.join=function(e,t){return e||(e=new a(this.length)),t||(t=0),0===this.length?e:(Array.isArray(this.value)?this.value.forEach(function(r){r.join(e,t),t+=r.length}):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):null!=this.value&&!0===this.value._isBuffer&&this.value.copy(e,t),t+=this.length),e)}}],["asn1.js","/lib/asn1/base/node.js",function(e,t,r,i,s){var n=h(102).Reporter,o=h(102).EncoderBuffer,a=h(102).DecoderBuffer,c=h(32),u=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],f=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(u);function l(e,t){var r={};this._baseState=r,r.enc=e,r.parent=t||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.contains=null,r.parent||(r.children=[],this._wrap())}t.exports=l;var d=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];l.prototype.clone=function(){var e=this._baseState,t={};d.forEach(function(r){t[r]=e[r]});var r=new this.constructor(t.parent);return r._baseState=t,r},l.prototype._wrap=function(){var e=this._baseState;f.forEach(function(t){this[t]=function(){var r=new this.constructor(this);return e.children.push(r),r[t].apply(r,arguments)}},this)},l.prototype._init=function(e){var t=this._baseState;c(null===t.parent),e.call(this),t.children=t.children.filter(function(e){return e._baseState.parent===this},this),c.equal(t.children.length,1,"Root node can have only one child")},l.prototype._useArgs=function(e){var t=this._baseState,r=e.filter(function(e){return e instanceof this.constructor},this);e=e.filter(function(e){return!(e instanceof this.constructor)},this),0!==r.length&&(c(null===t.children),t.children=r,r.forEach(function(e){e._baseState.parent=this},this)),0!==e.length&&(c(null===t.args),t.args=e,t.reverseArgs=e.map(function(e){if("object"!=typeof e||e.constructor!==Object)return e;var t={};return Object.keys(e).forEach(function(r){r==(0|r)&&(r|=0);var i=e[r];t[i]=r}),t}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(e){l.prototype[e]=function(){var t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}}),u.forEach(function(e){l.prototype[e]=function(){var t=this._baseState,r=Array.prototype.slice.call(arguments);return c(null===t.tag),t.tag=e,this._useArgs(r),this}}),l.prototype.use=function(e){c(e);var t=this._baseState;return c(null===t.use),t.use=e,this},l.prototype.optional=function(){return this._baseState.optional=!0,this},l.prototype.def=function(e){var t=this._baseState;return c(null===t.default),t.default=e,t.optional=!0,this},l.prototype.explicit=function(e){var t=this._baseState;return c(null===t.explicit&&null===t.implicit),t.explicit=e,this},l.prototype.implicit=function(e){var t=this._baseState;return c(null===t.explicit&&null===t.implicit),t.implicit=e,this},l.prototype.obj=function(){var e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},l.prototype.key=function(e){var t=this._baseState;return c(null===t.key),t.key=e,this},l.prototype.any=function(){return this._baseState.any=!0,this},l.prototype.choice=function(e){var t=this._baseState;return c(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map(function(t){return e[t]})),this},l.prototype.contains=function(e){var t=this._baseState;return c(null===t.use),t.contains=e,this},l.prototype._decode=function(e,t){var r=this._baseState;if(null===r.parent)return e.wrapResult(r.children[0]._decode(e,t));var i,s=r.default,n=!0,o=null;if(null!==r.key&&(o=e.enterKey(r.key)),r.optional){var h=null;if(null!==r.explicit?h=r.explicit:null!==r.implicit?h=r.implicit:null!==r.tag&&(h=r.tag),null!==h||r.any){if(n=this._peekTag(e,h,r.any),e.isError(n))return n}else{var c=e.save();try{null===r.choice?this._decodeGeneric(r.tag,e,t):this._decodeChoice(e,t),n=!0}catch(e){n=!1}e.restore(c)}}if(r.obj&&n&&(i=e.enterObject()),n){if(null!==r.explicit){var u=this._decodeTag(e,r.explicit);if(e.isError(u))return u;e=u}var f=e.offset;if(null===r.use&&null===r.choice){if(r.any)c=e.save();var l=this._decodeTag(e,null!==r.implicit?r.implicit:r.tag,r.any);if(e.isError(l))return l;r.any?s=e.raw(c):e=l}if(t&&t.track&&null!==r.tag&&t.track(e.path(),f,e.length,"tagged"),t&&t.track&&null!==r.tag&&t.track(e.path(),e.offset,e.length,"content"),s=r.any?s:null===r.choice?this._decodeGeneric(r.tag,e,t):this._decodeChoice(e,t),e.isError(s))return s;if(r.any||null!==r.choice||null===r.children||r.children.forEach(function(r){r._decode(e,t)}),r.contains&&("octstr"===r.tag||"bitstr"===r.tag)){var d=new a(s);s=this._getUse(r.contains,e._reporterState.obj)._decode(d,t)}}return r.obj&&n&&(s=e.leaveObject(i)),null===r.key||null===s&&!0!==n?null!==o&&e.exitKey(o):e.leaveKey(o,r.key,s),s},l.prototype._decodeGeneric=function(e,t,r){var i=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,i.args[0],r):/str$/.test(e)?this._decodeStr(t,e,r):"objid"===e&&i.args?this._decodeObjid(t,i.args[0],i.args[1],r):"objid"===e?this._decodeObjid(t,null,null,r):"gentime"===e||"utctime"===e?this._decodeTime(t,e,r):"null_"===e?this._decodeNull(t,r):"bool"===e?this._decodeBool(t,r):"objDesc"===e?this._decodeStr(t,e,r):"int"===e||"enum"===e?this._decodeInt(t,i.args&&i.args[0],r):null!==i.use?this._getUse(i.use,t._reporterState.obj)._decode(t,r):t.error("unknown tag: "+e)},l.prototype._getUse=function(e,t){var r=this._baseState;return r.useDecoder=this._use(e,t),c(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},l.prototype._decodeChoice=function(e,t){var r=this._baseState,i=null,s=!1;return Object.keys(r.choice).some(function(n){var o=e.save(),a=r.choice[n];try{var h=a._decode(e,t);if(e.isError(h))return!1;i={type:n,value:h},s=!0}catch(t){return e.restore(o),!1}return!0},this),s?i:e.error("Choice not matched")},l.prototype._createEncoderBuffer=function(e){return new o(e,this.reporter)},l.prototype._encode=function(e,t,r){var i=this._baseState;if(null===i.default||i.default!==e){var s=this._encodeValue(e,t,r);if(s!==undefined&&!this._skipDefault(s,t,r))return s}},l.prototype._encodeValue=function(e,t,r){var i=this._baseState;if(null===i.parent)return i.children[0]._encode(e,t||new n);var s=null;if(this.reporter=t,i.optional&&e===undefined){if(null===i.default)return;e=i.default}var o=null,a=!1;if(i.any)s=this._createEncoderBuffer(e);else if(i.choice)s=this._encodeChoice(e,t);else if(i.contains)o=this._getUse(i.contains,r)._encode(e,t),a=!0;else if(i.children)o=i.children.map(function(r){if("null_"===r._baseState.tag)return r._encode(null,t,e);if(null===r._baseState.key)return t.error("Child should have a key");var i=t.enterKey(r._baseState.key);if("object"!=typeof e)return t.error("Child expected, but input is not object");var s=r._encode(e[r._baseState.key],t,e);return t.leaveKey(i),s},this).filter(function(e){return e}),o=this._createEncoderBuffer(o);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return t.error("Too many args for : "+i.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");var h=this.clone();h._baseState.implicit=null,o=this._createEncoderBuffer(e.map(function(r){var i=this._baseState;return this._getUse(i.args[0],e)._encode(r,t)},h))}else null!==i.use?s=this._getUse(i.use,r)._encode(e,t):(o=this._encodePrimitive(i.tag,e),a=!0);if(!i.any&&null===i.choice){var c=null!==i.implicit?i.implicit:i.tag,u=null===i.implicit?"universal":"context";null===c?null===i.use&&t.error("Tag could be omitted only for .use()"):null===i.use&&(s=this._encodeComposite(c,a,u,o))}return null!==i.explicit&&(s=this._encodeComposite(i.explicit,!1,"context",s)),s},l.prototype._encodeChoice=function(e,t){var r=this._baseState,i=r.choice[e.type];return i||c(!1,e.type+" not found in "+JSON.stringify(Object.keys(r.choice))),i._encode(e.value,t)},l.prototype._encodePrimitive=function(e,t){var r=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&r.args)return this._encodeObjid(t,r.reverseArgs[0],r.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,r.args&&r.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},l.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},l.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(e)}}],["asn1.js","/lib/asn1/constants/index.js",function(e,t,r,i,s){var n=e;n._reverse=function(e){var t={};return Object.keys(e).forEach(function(r){(0|r)==r&&(r|=0);var i=e[r];t[i]=r}),t},n.der=h(107)}],["asn1.js","/lib/asn1/constants/der.js",function(e,t,r,i,s){var n=h(106);e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=n._reverse(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=n._reverse(e.tag)}],["asn1.js","/lib/asn1/decoders/index.js",function(e,t,r,i,s){var n=e;n.der=h(109),n.pem=h(110)}],["asn1.js","/lib/asn1/decoders/der.js",function(e,t,r,i,s){var n=h(4),o=h(100),a=o.base,c=o.bignum,u=o.constants.der;function f(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new l,this.tree._init(e.body)}function l(e){a.Node.call(this,"der",e)}function d(e,t){var r=e.readUInt8(t);if(e.isError(r))return r;var i=u.tagClass[r>>6],s=0==(32&r);if(31==(31&r)){var n=r;for(r=0;128==(128&n);){if(n=e.readUInt8(t),e.isError(n))return n;r<<=7,r|=127&n}}else r&=31;return{cls:i,primitive:s,tag:r,tagStr:u.tag[r]}}function p(e,t,r){var i=e.readUInt8(r);if(e.isError(i))return i;if(!t&&128===i)return null;if(0==(128&i))return i;var s=127&i;if(s>4)return e.error("length octect is too long");i=0;for(var n=0;n<s;n++){i<<=8;var o=e.readUInt8(r);if(e.isError(o))return o;i|=o}return i}t.exports=f,f.prototype.decode=function(e,t){return e instanceof a.DecoderBuffer||(e=new a.DecoderBuffer(e,t)),this.tree._decode(e,t)},n(l,a.Node),l.prototype._peekTag=function(e,t,r){if(e.isEmpty())return!1;var i=e.save(),s=d(e,'Failed to peek tag: "'+t+'"');return e.isError(s)?s:(e.restore(i),s.tag===t||s.tagStr===t||s.tagStr+"of"===t||r)},l.prototype._decodeTag=function(e,t,r){var i=d(e,'Failed to decode tag of "'+t+'"');if(e.isError(i))return i;var s=p(e,i.primitive,'Failed to get length of "'+t+'"');if(e.isError(s))return s;if(!r&&i.tag!==t&&i.tagStr!==t&&i.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(i.primitive||null!==s)return e.skip(s,'Failed to match body of: "'+t+'"');var n=e.save(),o=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(o)?o:(s=e.offset-n.offset,e.restore(n),e.skip(s,'Failed to match body of: "'+t+'"'))},l.prototype._skipUntilEnd=function(e,t){for(;;){var r=d(e,t);if(e.isError(r))return r;var i,s=p(e,r.primitive,t);if(e.isError(s))return s;if(i=r.primitive||null!==s?e.skip(s):this._skipUntilEnd(e,t),e.isError(i))return i;if("end"===r.tagStr)break}},l.prototype._decodeList=function(e,t,r,i){for(var s=[];!e.isEmpty();){var n=this._peekTag(e,"end");if(e.isError(n))return n;var o=r.decode(e,"der",i);if(e.isError(o)&&n)break;s.push(o)}return s},l.prototype._decodeStr=function(e,t){if("bitstr"===t){var r=e.readUInt8();return e.isError(r)?r:{unused:r,data:e.raw()}}if("bmpstr"===t){var i=e.raw();if(i.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");for(var s="",n=0;n<i.length/2;n++)s+=String.fromCharCode(i.readUInt16BE(2*n));return s}if("numstr"===t){var o=e.raw().toString("ascii");return this._isNumstr(o)?o:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){var a=e.raw().toString("ascii");return this._isPrintstr(a)?a:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},l.prototype._decodeObjid=function(e,t,r){for(var i,s=[],n=0;!e.isEmpty();){var o=e.readUInt8();n<<=7,n|=127&o,0==(128&o)&&(s.push(n),n=0)}128&o&&s.push(n);var a=s[0]/40|0,h=s[0]%40;if(i=r?s:[a,h].concat(s.slice(1)),t){var c=t[i.join(" ")];c===undefined&&(c=t[i.join(".")]),c!==undefined&&(i=c)}return i},l.prototype._decodeTime=function(e,t){var r=e.raw().toString();if("gentime"===t)var i=0|r.slice(0,4),s=0|r.slice(4,6),n=0|r.slice(6,8),o=0|r.slice(8,10),a=0|r.slice(10,12),h=0|r.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");i=0|r.slice(0,2),s=0|r.slice(2,4),n=0|r.slice(4,6),o=0|r.slice(6,8),a=0|r.slice(8,10),h=0|r.slice(10,12);i=i<70?2e3+i:1900+i}return Date.UTC(i,s-1,n,o,a,h,0)},l.prototype._decodeNull=function(e){return null},l.prototype._decodeBool=function(e){var t=e.readUInt8();return e.isError(t)?t:0!==t},l.prototype._decodeInt=function(e,t){var r=e.raw(),i=new c(r);return t&&(i=t[i.toString(10)]||i),i},l.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree}}],["asn1.js","/lib/asn1/decoders/pem.js",function(e,t,r,i,s){var n=h(4),o=__browser_require__(426,t).Buffer,a=h(109);function c(e){a.call(this,e),this.enc="pem"}n(c,a),t.exports=c,c.prototype.decode=function(e,t){for(var r=e.toString().split(/[\r\n]+/g),i=t.label.toUpperCase(),s=/^-----(BEGIN|END) ([^-]+)-----$/,n=-1,h=-1,c=0;c<r.length;c++){var u=r[c].match(s);if(null!==u&&u[2]===i){if(-1!==n){if("END"!==u[1])break;h=c;break}if("BEGIN"!==u[1])break;n=c}}if(-1===n||-1===h)throw new Error("PEM section not found for: "+i);var f=r.slice(n+1,h).join("");f.replace(/[^a-z0-9\+\/=]+/gi,"");var l=new o(f,"base64");return a.prototype.decode.call(this,l,t)}}],["asn1.js","/lib/asn1/encoders/index.js",function(e,t,r,i,s){var n=e;n.der=h(112),n.pem=h(113)}],["asn1.js","/lib/asn1/encoders/der.js",function(e,t,r,i,s){var n=h(4),o=__browser_require__(426,t).Buffer,a=h(100),c=a.base,u=a.constants.der;function f(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new l,this.tree._init(e.body)}function l(e){c.Node.call(this,"der",e)}function d(e){return e<10?"0"+e:e}t.exports=f,f.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},n(l,c.Node),l.prototype._encodeComposite=function(e,t,r,i){var s,n=function(e,t,r,i){var s;"seqof"===e?e="seq":"setof"===e&&(e="set");if(u.tagByName.hasOwnProperty(e))s=u.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return i.error("Unknown tag: "+e);s=e}if(s>=31)return i.error("Multi-octet tag encoding unsupported");t||(s|=32);return s|=u.tagClassByName[r||"universal"]<<6}(e,t,r,this.reporter);if(i.length<128)return(s=new o(2))[0]=n,s[1]=i.length,this._createEncoderBuffer([s,i]);for(var a=1,h=i.length;h>=256;h>>=8)a++;(s=new o(2+a))[0]=n,s[1]=128|a;h=1+a;for(var c=i.length;c>0;h--,c>>=8)s[h]=255&c;return this._createEncoderBuffer([s,i])},l.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){for(var r=new o(2*e.length),i=0;i<e.length;i++)r.writeUInt16BE(e.charCodeAt(i),2*i);return this._createEncoderBuffer(r)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)?this._createEncoderBuffer(e):"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},l.prototype._encodeObjid=function(e,t,r){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s\.]+/g);for(var i=0;i<e.length;i++)e[i]|=0}else if(Array.isArray(e)){e=e.slice();for(i=0;i<e.length;i++)e[i]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!r){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}var s=0;for(i=0;i<e.length;i++){var n=e[i];for(s++;n>=128;n>>=7)s++}var a=new o(s),h=a.length-1;for(i=e.length-1;i>=0;i--){n=e[i];for(a[h--]=127&n;(n>>=7)>0;)a[h--]=128|127&n}return this._createEncoderBuffer(a)},l.prototype._encodeTime=function(e,t){var r,i=new Date(e);return"gentime"===t?r=[d(i.getFullYear()),d(i.getUTCMonth()+1),d(i.getUTCDate()),d(i.getUTCHours()),d(i.getUTCMinutes()),d(i.getUTCSeconds()),"Z"].join(""):"utctime"===t?r=[d(i.getFullYear()%100),d(i.getUTCMonth()+1),d(i.getUTCDate()),d(i.getUTCHours()),d(i.getUTCMinutes()),d(i.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(r,"octstr")},l.prototype._encodeNull=function(){return this._createEncoderBuffer("")},l.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&(null==e||!0!==e._isBuffer)){var r=e.toArray();!e.sign&&128&r[0]&&r.unshift(0),e=new o(r)}if(null!=e&&!0===e._isBuffer){var i=e.length;0===e.length&&i++;var s=new o(i);return e.copy(s),0===e.length&&(s[0]=0),this._createEncoderBuffer(s)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);i=1;for(var n=e;n>=256;n>>=8)i++;for(n=(s=new Array(i)).length-1;n>=0;n--)s[n]=255&e,e>>=8;return 128&s[0]&&s.unshift(0),this._createEncoderBuffer(new o(s))},l.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},l.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},l.prototype._skipDefault=function(e,t,r){var i,s=this._baseState;if(null===s.default)return!1;var n=e.join();if(s.defaultBuffer===undefined&&(s.defaultBuffer=this._encodeValue(s.default,t,r).join()),n.length!==s.defaultBuffer.length)return!1;for(i=0;i<n.length;i++)if(n[i]!==s.defaultBuffer[i])return!1;return!0}}],["asn1.js","/lib/asn1/encoders/pem.js",function(e,t,r,i,s){var n=h(4),o=h(112);function a(e){o.call(this,e),this.enc="pem"}n(a,o),t.exports=a,a.prototype.encode=function(e,t){for(var r=o.prototype.encode.call(this,e).toString("base64"),i=["-----BEGIN "+t.label+"-----"],s=0;s<r.length;s+=64)i.push(r.slice(s,s+64));return i.push("-----END "+t.label+"-----"),i.join("\n")}}],["parse-asn1","/certificate.js",function(e,t,r,i,s){"use strict";var n=h(100),o=n.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),a=n.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),c=n.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),u=n.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(c),this.key("subjectPublicKey").bitstr())}),f=n.define("RelativeDistinguishedName",function(){this.setof(a)}),l=n.define("RDNSequence",function(){this.seqof(f)}),d=n.define("Name",function(){this.choice({rdnSequence:this.use(l)})}),p=n.define("Validity",function(){this.seq().obj(this.key("notBefore").use(o),this.key("notAfter").use(o))}),b=n.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),g=n.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(c),this.key("issuer").use(d),this.key("validity").use(p),this.key("subject").use(d),this.key("subjectPublicKeyInfo").use(u),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(b).optional())}),m=n.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(g),this.key("signatureAlgorithm").use(c),this.key("signatureValue").bitstr())});t.exports=m}],["parse-asn1","/aesid.json",function(e,t,r,i,s){t.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}}],["parse-asn1","/fixProc.js",function(e,t,r,i,s){var n=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r\+\/\=]+)[\n\r]+/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,a=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r\+\/\=]+)-----END \1-----$/m,c=h(53),u=h(36),f=h(2).Buffer;t.exports=function(e,t){var r,i=e.toString(),s=i.match(n);if(s){var h="aes"+s[1],l=f.from(s[2],"hex"),d=f.from(s[3].replace(/[\r\n]/g,""),"base64"),p=c(t,l.slice(0,8),parseInt(s[1],10)).key,b=[],g=u.createDecipheriv(h,p,l);b.push(g.update(d)),b.push(g.final()),r=f.concat(b)}else{var m=i.match(a);r=new f(m[2].replace(/[\r\n]/g,""),"base64")}return{tag:i.match(o)[1],data:r}}}],["browserify-sign","/browser/curves.json",function(e,t,r,i,s){t.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}}],["browserify-sign","/browser/verify.js",function(e,t,r,i,s){var n=h(58),o=h(67).ec,a=h(98),c=h(117);function u(e,t){if(e.cmpn(0)<=0)throw new Error("invalid sig");if(e.cmp(t)>=t)throw new Error("invalid sig")}t.exports=function(e,t,r,i,s){var h=a(r);if("ec"===h.type){if("ecdsa"!==i&&"ecdsa/rsa"!==i)throw new Error("wrong public key type");return function(e,t,r){var i=c[r.data.algorithm.curve.join(".")];if(!i)throw new Error("unknown curve "+r.data.algorithm.curve.join("."));var s=new o(i),n=r.data.subjectPrivateKey.data;return s.verify(t,e,n)}(e,t,h)}if("dsa"===h.type){if("dsa"!==i)throw new Error("wrong public key type");return function(e,t,r){var i=r.data.p,s=r.data.q,o=r.data.g,h=r.data.pub_key,c=a.signature.decode(e,"der"),f=c.s,l=c.r;u(f,s),u(l,s);var d=n.mont(i),p=f.invm(s);return 0===o.toRed(d).redPow(new n(t).mul(p).mod(s)).fromRed().mul(h.toRed(d).redPow(l.mul(p).mod(s)).fromRed()).mod(i).mod(s).cmp(l)}(e,t,h)}if("rsa"!==i&&"ecdsa/rsa"!==i)throw new Error("wrong public key type");t=Buffer.concat([s,t]);for(var f=h.modulus.byteLength(),l=[1],d=0;t.length+l.length+2<f;)l.push(255),d++;l.push(0);for(var p=-1;++p<t.length;)l.push(t[p]);l=new Buffer(l);var b=n.mont(h.modulus);e=(e=new n(e).toRed(b)).redPow(new n(h.publicExponent)),e=new Buffer(e.fromRed().toArray());var g=d<8?1:0;for(f=Math.min(e.length,l.length),e.length!==l.length&&(g=1),p=-1;++p<f;)g|=e[p]^l[p];return 0===g}}],["create-ecdh","/browser.js",function(e,t,r,i,s){var n=h(67),o=h(58);t.exports=function(e){return new c(e)};var a={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function c(e){this.curveType=a[e],this.curveType||(this.curveType={name:e}),this.curve=new n.ec(this.curveType.name),this.keys=void 0}function u(e,t,r){Array.isArray(e)||(e=e.toArray());var i=new Buffer(e);if(r&&i.length<r){var s=new Buffer(r-i.length);s.fill(0),i=Buffer.concat([s,i])}return t?i.toString(t):i}a.p224=a.secp224r1,a.p256=a.secp256r1=a.prime256v1,a.p192=a.secp192r1=a.prime192v1,a.p384=a.secp384r1,a.p521=a.secp521r1,c.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},c.prototype.computeSecret=function(e,t,r){return t=t||"utf8",null!=e&&!0===e._isBuffer||(e=new Buffer(e,t)),u(this.curve.keyFromPublic(e).getPublic().mul(this.keys.getPrivate()).getX(),r,this.curveType.byteLength)},c.prototype.getPublicKey=function(e,t){var r=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(r[r.length-1]%2?r[0]=7:r[0]=6),u(r,e)},c.prototype.getPrivateKey=function(e){return u(this.keys.getPrivate(),e)},c.prototype.setPublicKey=function(e,t){return t=t||"utf8",null!=e&&!0===e._isBuffer||(e=new Buffer(e,t)),this.keys._importPublic(e),this},c.prototype.setPrivateKey=function(e,t){t=t||"utf8",null!=e&&!0===e._isBuffer||(e=new Buffer(e,t));var r=new o(e);return r=r.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(r),this}}],["public-encrypt","/browser.js",function(e,t,r,i,s){e.publicEncrypt=h(121),e.privateDecrypt=h(125),e.privateEncrypt=function(t,r){return e.publicEncrypt(t,r,!0)},e.publicDecrypt=function(t,r){return e.privateDecrypt(t,r,!0)}}],["public-encrypt","/publicEncrypt.js",function(e,t,r,i,s){var n=h(98),o=h(1),a=h(3),c=h(122),u=h(123),f=h(58),l=h(124),d=h(66),p=h(2).Buffer;t.exports=function(e,t,r){var i;i=e.padding?e.padding:r?1:4;var s,h=n(e);if(4===i)s=function(e,t){var r=e.modulus.byteLength(),i=t.length,s=a("sha1").update(p.alloc(0)).digest(),n=s.length,h=2*n;if(i>r-h-2)throw new Error("message too long");var l=p.alloc(r-i-h-2),d=r-n-1,b=o(n),g=u(p.concat([s,l,p.alloc(1,1),t],d),c(b,d)),m=u(b,c(g,n));return new f(p.concat([p.alloc(1),m,g],r))}(h,t);else if(1===i)s=function(e,t,r){var i,s=t.length,n=e.modulus.byteLength();if(s>n-11)throw new Error("message too long");i=r?p.alloc(n-s-3,255):function(e){var t,r=p.allocUnsafe(e),i=0,s=o(2*e),n=0;for(;i<e;)n===s.length&&(s=o(2*e),n=0),(t=s[n++])&&(r[i++]=t);return r}(n-s-3);return new f(p.concat([p.from([0,r?1:2]),i,p.alloc(1),t],n))}(h,t,r);else{if(3!==i)throw new Error("unknown padding");if((s=new f(t)).cmp(h.modulus)>=0)throw new Error("data too long for modulus")}return r?d(s,h):l(s,h)}}],["public-encrypt","/mgf.js",function(e,t,r,i,s){var n=h(3),o=h(2).Buffer;function a(e){var t=o.allocUnsafe(4);return t.writeUInt32BE(e,0),t}t.exports=function(e,t){for(var r,i=o.alloc(0),s=0;i.length<t;)r=a(s++),i=o.concat([i,n("sha1").update(e).update(r).digest()]);return i.slice(0,t)}}],["public-encrypt","/xor.js",function(e,t,r,i,s){t.exports=function(e,t){for(var r=e.length,i=-1;++i<r;)e[i]^=t[i];return e}}],["public-encrypt","/withPublic.js",function(e,t,r,i,s){var n=h(58),o=h(2).Buffer;t.exports=function(e,t){return o.from(e.toRed(n.mont(t.modulus)).redPow(new n(t.publicExponent)).fromRed().toArray())}}],["public-encrypt","/privateDecrypt.js",function(e,t,r,i,s){var n=h(98),o=h(122),a=h(123),c=h(58),u=h(66),f=h(3),l=h(124),d=h(2).Buffer;t.exports=function(e,t,r){var i;i=e.padding?e.padding:r?1:4;var s,h=n(e),p=h.modulus.byteLength();if(t.length>p||new c(t).cmp(h.modulus)>=0)throw new Error("decryption error");s=r?l(new c(t),h):u(t,h);var b=d.alloc(p-s.length);if(s=d.concat([b,s],p),4===i)return function(e,t){var r=e.modulus.byteLength(),i=f("sha1").update(d.alloc(0)).digest(),s=i.length;if(0!==t[0])throw new Error("decryption error");var n=t.slice(1,s+1),h=t.slice(s+1),c=a(n,o(h,s)),u=a(h,o(c,r-s-1));if(function(e,t){e=d.from(e),t=d.from(t);var r=0,i=e.length;e.length!==t.length&&(r++,i=Math.min(e.length,t.length));var s=-1;for(;++s<i;)r+=e[s]^t[s];return r}(i,u.slice(0,s)))throw new Error("decryption error");var l=s;for(;0===u[l];)l++;if(1!==u[l++])throw new Error("decryption error");return u.slice(l)}(h,s);if(1===i)return function(e,t,r){var i=t.slice(0,2),s=2,n=0;for(;0!==t[s++];)if(s>=t.length){n++;break}var o=t.slice(2,s-1);("0002"!==i.toString("hex")&&!r||"0001"!==i.toString("hex")&&r)&&n++;o.length<8&&n++;if(n)throw new Error("decryption error");return t.slice(s)}(0,s,r);if(3===i)return s;throw new Error("unknown padding")}}],["randomfill","/browser.js",function(e,t,r,i,s){"use strict";function n(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var o=h(2),a=h(1),c=(o.Buffer,o.kMaxLength),u=global.crypto||global.msCrypto,f=Math.pow(2,32)-1;function l(e,t){if("number"!=typeof e||e!=e)throw new TypeError("offset must be a number");if(e>f||e<0)throw new TypeError("offset must be a uint32");if(e>c||e>t)throw new RangeError("offset out of range")}function d(e,t,r){if("number"!=typeof e||e!=e)throw new TypeError("size must be a number");if(e>f||e<0)throw new TypeError("size must be a uint32");if(e+t>r||e>c)throw new RangeError("buffer too small")}function p(e,t,r,i){if(process.browser){var s=e.buffer,n=new Uint8Array(s,t,r);return u.getRandomValues(n),i?void process.nextTick(function(){i(null,e)}):e}if(!i)return a(r).copy(e,t),e;a(r,function(r,s){if(r)return i(r);s.copy(e,t),i(null,e)})}u&&u.getRandomValues||!process.browser?(e.randomFill=function(e,t,r,i){if(!(null!=e&&!0===e._isBuffer||e instanceof global.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof t)i=t,t=0,r=e.length;else if("function"==typeof r)i=r,r=e.length-t;else if("function"!=typeof i)throw new TypeError('"cb" argument must be a function');return l(t,e.length),d(r,t,e.length),p(e,t,r,i)},e.randomFillSync=function(e,t,r){void 0===t&&(t=0);if(!(null!=e&&!0===e._isBuffer||e instanceof global.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');l(t,e.length),r===undefined&&(r=e.length-t);return d(r,t,e.length),p(e,t,r)}):(e.randomFill=n,e.randomFillSync=n)}]],a=[];function h(t){if(t>>>0!==t||t>o.length)return function(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}(t);for(;a.length<=t;)a.push(null);var n=a[t];if(n)return n.exports;var h=o[t],c=h[0],u=h[1],f=h[2],l=e,d=r;0!==t&&(d={id:"/"+c+u,exports:l={},parent:r.parent,filename:r.filename,loaded:!1,children:r.children,paths:r.paths}),a[t]=d;try{f.call(l,l,d,i,s,void 0)}catch(e){throw a[t]=null,e}return o[t]=null,0!==t&&(d.loaded=!0),d.exports}h(0)}],["bpkg","/lib/builtins/vm.js",function(exports,require,module,__filename,__dirname,__meta){var indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1},Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)t.push(r);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,r){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:r})}}catch(e){return function(e,t,r){e[t]=r}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var r=t.contentWindow,i=r.eval,s=r.execScript;!i&&s&&(s.call(r,"null"),i=r.eval),forEach(Object_keys(e),function(t){r[t]=e[t]}),forEach(globals,function(t){e[t]&&(r[t]=e[t])});var n=Object_keys(r),o=i.call(r,this.code);return forEach(Object_keys(r),function(t){(t in e||-1===indexOf(n,t))&&(e[t]=r[t])}),forEach(globals,function(t){t in e||defineProp(e,t,r[t])}),document.body.removeChild(t),o},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var t=Script.createContext(e),r=this.runInContext(t);return e&&forEach(Object_keys(t),function(r){e[r]=t[r]}),r},forEach(Object_keys(Script.prototype),function(e){exports[e]=Script[e]=function(t){var r=Script(t);return r[e].apply(r,[].slice.call(arguments,1))}}),exports.isContext=function(e){return e instanceof Context},exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t=new Context;return"object"==typeof e&&forEach(Object_keys(e),function(r){t[r]=e[r]}),t}}],["merkle-lib","/fastRoot.js",function(e,t,r,i,s,n){r.exports=function(e,t){if(!Array.isArray(e))throw TypeError("Expected values Array");if("function"!=typeof t)throw TypeError("Expected digest Function");for(var r=e.length,i=e.concat();r>1;){for(var s=0,n=0;n<r;n+=2,++s){var o=i[n],a=n+1===r?o:i[n+1],h=Buffer.concat([o,a]);i[s]=t(h)}r=s}return i[0]}}],["@trezor/utxo-lib","/src/networks.js",function(e,t,r,i,s,n){var o=__browser_require__(489,r);r.exports={dash:{messagePrefix:"DarkCoin Signed Message:\n",bip32:{public:76067358,private:76066276},pubKeyHash:76,scriptHash:16,wif:204,coin:o.DASH},dashTest:{messagePrefix:"DarkCoin Signed Message:\n",bip32:{public:70617039,private:70615956},pubKeyHash:140,scriptHash:19,wif:239,coin:o.DASH},bitcoincash:{messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128,coin:o.BCH,forkId:0},bitcoincashTestnet:{messagePrefix:"Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239,coin:o.BCH},bitcoinsv:{messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128,coin:o.BSV,forkId:0},bitcoinsvTestnet:{messagePrefix:"Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239,coin:o.BSV},zcash:{messagePrefix:"ZCash Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:7352,scriptHash:7357,wif:128,consensusBranchId:{1:0,2:0,3:1537743641,4:733220448},coin:o.ZEC},zcashTest:{messagePrefix:"ZCash Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:7461,scriptHash:7354,wif:239,consensusBranchId:{1:0,2:0,3:1537743641,4:733220448},coin:o.TAZ},bitcoingold:{messagePrefix:"Bitcoin Gold Signed Message:\n",bech32:"btg",bip32:{public:76067358,private:76066276},pubKeyHash:38,scriptHash:23,wif:128,coin:o.BTG,forkId:79},litecoin:{messagePrefix:"Litecoin Signed Message:\n",bech32:"ltc",bip32:{public:27108450,private:27106558},pubKeyHash:48,scriptHash:50,wif:176,coin:o.LTC},litecoinTest:{messagePrefix:"Litecoin Signed Message:\n",bech32:"tltc",bip32:{public:76067358,private:76066276},pubKeyHash:111,scriptHash:58,wif:176,coin:o.LTC},bitcoin:{messagePrefix:"Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128,coin:o.BTC},testnet:{messagePrefix:"Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239,coin:o.BTC},capricoin:{messagePrefix:"Capricoin Signed Message:\n",bech32:null,bip32:{public:76067358,private:76066276},pubKeyHash:28,scriptHash:35,wif:0,coin:o.CAPRICOIN},peercoin:{messagePrefix:"Peercoin Signed Message:\n",bech32:"pc",bip32:{public:76067358,private:76066276},pubKeyHash:55,scriptHash:117,wif:0,coin:o.PEERCOIN},peercoinTest:{messagePrefix:"Peercoin Signed Message:\n",bech32:"tpc",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:0,coin:o.PEERCOINTEST},komodo:{messagePrefix:"Komodo Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:60,scriptHash:5,wif:188,consensusBranchId:{1:0,2:0,3:1537743641,4:1991772603},coin:o.KMD}}}],["@trezor/utxo-lib","/src/coins.js",function(e,t,r,i,s,n){const o=__browser_require__(432,r),a={BCH:"bch",BSV:"bsv",BTC:"btc",BTG:"btg",LTC:"ltc",ZEC:"zec",TAZ:"taz",DASH:"dash",CAPRICOIN:"cpc",PEERCOIN:"ppc",PEERCOINTEST:"tppc",KMD:"kmd",isBitcoin:function(e){return o.value(a.BTC)(e.coin)},isBitcoinCash:function(e){return o.value(a.BCH)(e.coin)},isBitcoinSV:function(e){return o.value(a.BSV)(e.coin)},isBitcoinGold:function(e){return o.value(a.BTG)(e.coin)},isDash:function(e){return o.value(a.DASH)(e.coin)},isLitecoin:function(e){return o.value(a.LTC)(e.coin)},isZcash:function(e){return o.value(a.ZEC)(e.coin)},isTaz:function(e){return o.value(a.TAZ)(e.coin)},isKomodo:function(e){return o.value(a.KMD)(e.coin)},isZcashType:function(e){return this.isZcash(e)||this.isKomodo(e)||this.isTaz(e)},isCapricoin:function(e){return o.value(a.CAPRICOIN)(e.coin)},isPeercoin:function(e){return o.value(a.PEERCOIN)(e.coin)||o.value(a.PEERCOINTEST)(e.coin)},hasTimestamp:function(e){return this.isCapricoin(e)||this.isPeercoin(e)}};a.isValidCoin=o.oneOf(a.isBitcoin,a.isBitcoinCash,a.isBitcoinSV,a.isBitcoinGold,a.isLitecoin,a.isZcash,a.isKomodo,a.isZcashType,a.isCapricoin,a.isPeercoin),r.exports=a}],["@trezor/utxo-lib","/src/transaction.js",function(e,t,r,i,s,n){var o=__browser_require__(425,r).Buffer,a=__browser_require__(491,r),h=__browser_require__(468,r),c=__browser_require__(428,r),u=__browser_require__(461,r),f=__browser_require__(489,r),l=__browser_require__(431,r),d=__browser_require__(488,r),p=__browser_require__(432,r),b=__browser_require__(436,r),g=__browser_require__(462,r),m=__browser_require__(492,r);function _(e){var t=e.length;return g.encodingLength(t)+t}function w(e=d.bitcoin){this.version=1,this.locktime=0,this.ins=[],this.outs=[],this.network=e,f.isZcashType(e)&&(this.joinsplits=[],this.joinsplitPubkey=[],this.joinsplitSig=[],this.overwintered=0,this.versionGroupId=0,this.expiryHeight=0,this.valueBalance=0,this.vShieldedSpend=[],this.vShieldedOutput=[],this.bindingSig=0),f.isDash(e)&&(this.type=0,this.extraPayload=o.alloc(0)),f.hasTimestamp(e)&&(this.timestamp=0)}w.USE_STRING_VALUES=!1,w.DEFAULT_SEQUENCE=4294967295,w.SIGHASH_ALL=1,w.SIGHASH_NONE=2,w.SIGHASH_SINGLE=3,w.SIGHASH_ANYONECANPAY=128,w.SIGHASH_BITCOINCASHBIP143=64,w.ADVANCED_TRANSACTION_MARKER=0,w.ADVANCED_TRANSACTION_FLAG=1;var y=o.allocUnsafe(0),v=[],E=o.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),S=o.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),I=o.from("ffffffffffffffff","hex"),k={script:y,valueBuffer:I};w.ZCASH_OVERWINTER_VERSION=3,w.ZCASH_SAPLING_VERSION=4,w.ZCASH_JOINSPLITS_SUPPORT_VERSION=2,w.ZCASH_NUM_JOINSPLITS_INPUTS=2,w.ZCASH_NUM_JOINSPLITS_OUTPUTS=2,w.ZCASH_NOTECIPHERTEXT_SIZE=601,w.ZCASH_G1_PREFIX_MASK=2,w.ZCASH_G2_PREFIX_MASK=10,w.DASH_NORMAL=0,w.DASH_PROVIDER_REGISTER=1,w.DASH_PROVIDER_UPDATE_SERVICE=2,w.DASH_PROVIDER_UPDATE_REGISTRAR=3,w.DASH_PROVIDER_UPDATE_REVOKE=4,w.DASH_COINBASE=5,w.DASH_QUORUM_COMMITMENT=6,w.fromBuffer=function(e,t=d.bitcoin,r){var i=0;function s(t){return i+=t,e.slice(i-t,i)}function n(){var t=e.readUInt8(i);return i+=1,t}function o(){var t=e.readUInt32LE(i);return i+=4,t}function a(){var t=u.readUInt64LE(e,i);return i+=8,t}function h(){var t=u.readUInt64LEasString(e,i);return i+=8,t}function c(){var t=g.decode(e,i);return i+=g.decode.bytes,t}function l(){return s(c())}function p(){for(var e=c(),t=[],r=0;r<e;r++)t.push(l());return t}function b(){var e=1&n();return{x:s(32),yLsb:e}}function m(){var e;return y.isSaplingCompatible()?{sA:s(48),sB:s(96),sC:s(48)}:{gA:b(),gAPrime:b(),gB:(e=1&n(),{x:s(64),yLsb:e}),gBPrime:b(),gC:b(),gCPrime:b(),gK:b(),gH:b()}}function _(){for(var e=a(),t=a(),r=s(32),i=[],n=0;n<w.ZCASH_NUM_JOINSPLITS_INPUTS;n++)i.push(s(32));var o=[];for(n=0;n<w.ZCASH_NUM_JOINSPLITS_OUTPUTS;n++)o.push(s(32));var h=s(32),c=s(32),u=[];for(n=0;n<w.ZCASH_NUM_JOINSPLITS_INPUTS;n++)u.push(s(32));var f=m(),l=[];for(n=0;n<w.ZCASH_NUM_JOINSPLITS_OUTPUTS;n++)l.push(s(w.ZCASH_NOTECIPHERTEXT_SIZE));return{vpubOld:e,vpubNew:t,anchor:r,nullifiers:i,commitments:o,ephemeralKey:h,randomSeed:c,macs:u,zkproof:f,ciphertexts:l}}var y=new w(t);if(y.version=function(){var t=e.readInt32LE(i);return i+=4,t}(),f.isZcashType(t)&&(y.overwintered=y.version>>>31,y.version=2147483647&y.version,!t.consensusBranchId.hasOwnProperty(y.version)))throw new Error("Unsupported Zcash transaction");if(f.isDash(t)&&(y.type=y.version>>16,y.version=65535&y.version,3===y.version&&(y.type<w.DASH_NORMAL||y.type>w.DASH_QUORUM_COMMITMENT)))throw new Error("Unsupported Dash transaction type");var E=e.readUInt8(i),S=e.readUInt8(i+1),I=!1;E!==w.ADVANCED_TRANSACTION_MARKER||S!==w.ADVANCED_TRANSACTION_FLAG||f.isZcashType(t)||(i+=2,I=!0),y.isOverwinterCompatible()&&(y.versionGroupId=o()),f.hasTimestamp(y.network)&&(y.timestamp=o());for(var k=c(),A=0;A<k;++A)y.ins.push({hash:s(32),index:o(),script:l(),sequence:o(),witness:v});var O=c();for(A=0;A<O;++A)y.outs.push({value:w.USE_STRING_VALUES?h():a(),script:l()});if(I){for(A=0;A<k;++A)y.ins[A].witness=p();if(!y.hasWitnesses())throw new Error("Transaction has superfluous witness data")}if(y.locktime=o(),f.isZcashType(t)){if(y.isOverwinterCompatible()&&(y.expiryHeight=o()),y.isSaplingCompatible()){y.valueBalance=function(){var t=u.readInt64LE(e,i);return i+=8,t}();var x=c();for(A=0;A<x;++A)y.vShieldedSpend.push({cv:s(32),anchor:s(32),nullifier:s(32),rk:s(32),zkproof:m(),spendAuthSig:s(64)});var R=c();for(A=0;A<R;++A)y.vShieldedOutput.push({cv:s(32),cmu:s(32),ephemeralKey:s(32),encCiphertext:s(580),outCiphertext:s(80),zkproof:m()})}if(y.supportsJoinSplits()){var M=c();for(A=0;A<M;++A)y.joinsplits.push(_());M>0&&(y.joinsplitPubkey=s(32),y.joinsplitSig=s(64))}y.isSaplingCompatible()&&y.vShieldedSpend.length+y.vShieldedOutput.length>0&&(y.bindingSig=s(64))}if(y.isDashSpecialTransaction()&&(y.extraPayload=l()),y.network=t,r)return y;if(i!==e.length)throw new Error("Transaction has unexpected data");return y},w.fromHex=function(e,t){return w.fromBuffer(o.from(e,"hex"),t)},w.isCoinbaseHash=function(e){p(b.Hash256bit,e);for(var t=0;t<32;++t)if(0!==e[t])return!1;return!0},w.prototype.isSaplingCompatible=function(){return f.isZcashType(this.network)&&this.version>=w.ZCASH_SAPLING_VERSION},w.prototype.isOverwinterCompatible=function(){return f.isZcashType(this.network)&&this.version>=w.ZCASH_OVERWINTER_VERSION},w.prototype.supportsJoinSplits=function(){return f.isZcashType(this.network)&&this.version>=w.ZCASH_JOINSPLITS_SUPPORT_VERSION},w.prototype.versionSupportsDashSpecialTransactions=function(){return f.isDash(this.network)&&this.version>=3},w.prototype.isDashSpecialTransaction=function(){return this.versionSupportsDashSpecialTransactions()&&this.type!==w.DASH_NORMAL},w.prototype.isCoinbase=function(){return 1===this.ins.length&&w.isCoinbaseHash(this.ins[0].hash)},w.prototype.addInput=function(e,t,r,i){return p(b.tuple(b.Hash256bit,b.UInt32,b.maybe(b.UInt32),b.maybe(b.Buffer)),arguments),b.Null(r)&&(r=w.DEFAULT_SEQUENCE),this.ins.push({hash:e,index:t,script:i||y,sequence:r,witness:v})-1},w.prototype.addOutput=function(e,t){return p(b.tuple(b.Buffer,b.Satoshi),arguments),this.outs.push({script:e,value:t})-1},w.prototype.hasWitnesses=function(){return this.ins.some(function(e){return 0!==e.witness.length})},w.prototype.weight=function(){return 3*this.__byteLength(!1)+this.__byteLength(!0)},w.prototype.virtualSize=function(){return Math.ceil(this.weight()/4)},w.prototype.byteLength=function(){return this.__byteLength(!0)},w.prototype.getShieldedSpendByteLength=function(){if(!this.isSaplingCompatible())return 0;var e=0;return e+=g.encodingLength(this.vShieldedSpend.length),e+=384*this.vShieldedSpend.length},w.prototype.getShieldedOutputByteLength=function(){if(!this.isSaplingCompatible())return 0;var e=0;return e+=g.encodingLength(this.vShieldedOutput.length),e+=948*this.vShieldedOutput.length},w.prototype.getJoinSplitByteLength=function(){if(!this.supportsJoinSplits())return 0;var e=this.joinsplits.length,t=0;return t+=u.varIntSize(e),e>0&&(this.isSaplingCompatible()?t+=1698*e:t+=1802*e,t+=32,t+=64),t},w.prototype.zcashTransactionByteLength=function(){if(!f.isZcashType(this.network))throw new Error("zcashTransactionByteLength can only be called when using Zcash network");var e=0;return e+=4,this.isOverwinterCompatible()&&(e+=4),e+=g.encodingLength(this.ins.length),e+=this.ins.reduce(function(e,t){return e+40+_(t.script)},0),e+=g.encodingLength(this.outs.length),e+=this.outs.reduce(function(e,t){return e+8+_(t.script)},0),e+=4,this.isOverwinterCompatible()&&(e+=4),this.isSaplingCompatible()&&(e+=8,e+=this.getShieldedSpendByteLength(),e+=this.getShieldedOutputByteLength()),this.supportsJoinSplits()&&(e+=this.getJoinSplitByteLength()),this.isSaplingCompatible()&&this.vShieldedSpend.length+this.vShieldedOutput.length>0&&(e+=64),e},w.prototype.__byteLength=function(e){var t=e&&this.hasWitnesses();return f.isZcashType(this.network)?this.zcashTransactionByteLength():(t?10:8)+(this.timestamp?4:0)+g.encodingLength(this.ins.length)+g.encodingLength(this.outs.length)+this.ins.reduce(function(e,t){return e+40+_(t.script)},0)+this.outs.reduce(function(e,t){return e+8+_(t.script)},0)+(this.isDashSpecialTransaction()?_(this.extraPayload):0)+(t?this.ins.reduce(function(e,t){return e+(r=t.witness,i=r.length,g.encodingLength(i)+r.reduce(function(e,t){return e+_(t)},0));var r,i},0):0)},w.prototype.clone=function(){var e=new w(this.network);return e.version=this.version,e.locktime=this.locktime,e.network=this.network,f.isDash(this.network)&&(e.type=this.type,e.extraPayload=this.extraPayload),f.hasTimestamp(this.network)&&(e.timestamp=this.timestamp),this.isOverwinterCompatible()&&(e.overwintered=this.overwintered,e.versionGroupId=this.versionGroupId,e.expiryHeight=this.expiryHeight),this.isSaplingCompatible()&&(e.valueBalance=this.valueBalance),e.ins=this.ins.map(function(e){return{hash:e.hash,index:e.index,script:e.script,sequence:e.sequence,witness:e.witness}}),e.outs=this.outs.map(function(e){return{script:e.script,value:e.value}}),this.isSaplingCompatible()&&(e.vShieldedSpend=this.vShieldedSpend.map(function(e){return{cv:e.cv,anchor:e.anchor,nullifier:e.nullifier,rk:e.rk,zkproof:e.zkproof,spendAuthSig:e.spendAuthSig}}),e.vShieldedOutput=this.vShieldedOutput.map(function(e){return{cv:e.cv,cmu:e.cmu,ephemeralKey:e.ephemeralKey,encCiphertext:e.encCiphertext,outCiphertext:e.outCiphertext,zkproof:e.zkproof}})),this.supportsJoinSplits()&&(e.joinsplits=this.joinsplits.map(function(e){return{vpubOld:e.vpubOld,vpubNew:e.vpubNew,anchor:e.anchor,nullifiers:e.nullifiers,commitments:e.commitments,ephemeralKey:e.ephemeralKey,randomSeed:e.randomSeed,macs:e.macs,zkproof:e.zkproof,ciphertexts:e.ciphertexts}}),e.joinsplitPubkey=this.joinsplitPubkey,e.joinsplitSig=this.joinsplitSig),this.isSaplingCompatible()&&this.vShieldedSpend.length+this.vShieldedOutput.length>0&&(e.bindingSig=this.bindingSig),e},w.prototype.getHeader=function(){var e=this.overwintered?1:0;return this.version|e<<31},w.prototype.hashForSignature=function(e,t,r){if(p(b.tuple(b.UInt32,b.Buffer,b.Number),arguments),e>=this.ins.length)return S;var i=c.compile(c.decompile(t).filter(function(e){return e!==l.OP_CODESEPARATOR})),s=this.clone();if((31&r)===w.SIGHASH_NONE)s.outs=[],s.ins.forEach(function(t,r){r!==e&&(t.sequence=0)});else if((31&r)===w.SIGHASH_SINGLE){if(e>=this.outs.length)return S;s.outs.length=e+1;for(var n=0;n<e;n++)s.outs[n]=k;s.ins.forEach(function(t,r){r!==e&&(t.sequence=0)})}r&w.SIGHASH_ANYONECANPAY?(s.ins=[s.ins[e]],s.ins[0].script=i):(s.ins.forEach(function(e){e.script=y}),s.ins[e].script=i);var a=o.allocUnsafe(s.__byteLength(!1)+4);return a.writeInt32LE(r,a.length-4),s.__toBuffer(a,0,!1),h.hash256(a)},w.prototype.getBlake2bHash=function(e,t){var r=o.allocUnsafe(32);return m(r.length,null,null,o.from(t)).update(e).digest(r)},w.prototype.getPrevoutHash=function(e){if(!(e&w.SIGHASH_ANYONECANPAY)){var t=new a(36*this.ins.length);return this.ins.forEach(function(e){t.writeSlice(e.hash),t.writeUInt32(e.index)}),f.isZcashType(this.network)?this.getBlake2bHash(t.getBuffer(),"ZcashPrevoutHash"):h.hash256(t.getBuffer())}return E},w.prototype.getSequenceHash=function(e){if(!(e&w.SIGHASH_ANYONECANPAY)&&(31&e)!==w.SIGHASH_SINGLE&&(31&e)!==w.SIGHASH_NONE){var t=new a(4*this.ins.length);return this.ins.forEach(function(e){t.writeUInt32(e.sequence)}),f.isZcashType(this.network)?this.getBlake2bHash(t.getBuffer(),"ZcashSequencHash"):h.hash256(t.getBuffer())}return E},w.prototype.getOutputsHash=function(e,t){var r;if((31&e)!==w.SIGHASH_SINGLE&&(31&e)!==w.SIGHASH_NONE){var i=this.outs.reduce(function(e,t){return e+8+_(t.script)},0);return r=new a(i),this.outs.forEach(function(e){r.writeUInt64(e.value),r.writeVarSlice(e.script)}),f.isZcashType(this.network)?this.getBlake2bHash(r.getBuffer(),"ZcashOutputsHash"):h.hash256(r.getBuffer())}if((31&e)===w.SIGHASH_SINGLE&&t<this.outs.length){var s=this.outs[t];return(r=new a(8+_(s.script))).writeUInt64(s.value),r.writeVarSlice(s.script),f.isZcashType(this.network)?this.getBlake2bHash(r.getBuffer(),"ZcashOutputsHash"):h.hash256(r.getBuffer())}return E},w.prototype.hashForZcashSignature=function(e,t,r,i){if(p(b.tuple(b.UInt32,b.Buffer,b.Satoshi,b.UInt32),arguments),!f.isZcashType(this.network))throw new Error("hashForZcashSignature can only be called when using Zcash network");if(this.joinsplits.length>0)throw new Error("Hash signature for Zcash protected transactions is not supported");if(e>=this.ins.length&&e!==I)throw new Error("Input index is out of range");if(this.isOverwinterCompatible()){var s,n=this.getPrevoutHash(i),h=this.getSequenceHash(i),c=this.getOutputsHash(i,e),u=E,l=E,d=E,g=0;if(g+=20,g+=128,e!==I&&(g+=8,g+=8,g+=32,g+=_(t)),this.isSaplingCompatible()&&(g+=64,g+=8),(s=new a(g)).writeInt32(this.getHeader()),s.writeUInt32(this.versionGroupId),s.writeSlice(n),s.writeSlice(h),s.writeSlice(c),s.writeSlice(u),this.isSaplingCompatible()&&(s.writeSlice(l),s.writeSlice(d)),s.writeUInt32(this.locktime),s.writeUInt32(this.expiryHeight),this.isSaplingCompatible()&&s.writeUInt64(this.valueBalance),s.writeUInt32(i),e!==I){var m=this.ins[e];s.writeSlice(m.hash),s.writeUInt32(m.index),s.writeVarSlice(t),s.writeUInt64(r),s.writeUInt32(m.sequence)}var w=o.alloc(16);return w.write("ZcashSigHash"),w.writeUInt32LE(this.network.consensusBranchId[this.version],"ZcashSigHash".length),this.getBlake2bHash(s.getBuffer(),w)}},w.prototype.hashForWitnessV0=function(e,t,r,i){p(b.tuple(b.UInt32,b.Buffer,b.Satoshi,b.UInt32),arguments);var s=this.getPrevoutHash(i),n=this.getSequenceHash(i),o=this.getOutputsHash(i,e),c=new a(156+_(t)),u=this.ins[e];return c.writeUInt32(this.version),c.writeSlice(s),c.writeSlice(n),c.writeSlice(u.hash),c.writeUInt32(u.index),c.writeVarSlice(t),c.writeUInt64(r),c.writeUInt32(u.sequence),c.writeSlice(o),c.writeUInt32(this.locktime),c.writeUInt32(i),h.hash256(c.getBuffer())},w.prototype.hashForCashSignature=function(e,t,r,i){if(p(b.tuple(b.UInt32,b.Buffer,b.Number,b.maybe(b.UInt53)),arguments),i&w.SIGHASH_BITCOINCASHBIP143){if(b.Null(r))throw new Error("Bitcoin Cash sighash requires value of input to be signed.");return this.hashForWitnessV0(e,t,r,i)}return this.hashForSignature(e,t,i)},w.prototype.hashForGoldSignature=function(e,t,r,i,s){p(b.tuple(b.UInt32,b.Buffer,b.Number,b.maybe(b.UInt53)),arguments);var n=i,o=(i&w.SIGHASH_BITCOINCASHBIP143)>0;if(o&&(n|=this.network.forkId<<8),s||o){if(b.Null(r))throw new Error("Bitcoin Cash sighash requires value of input to be signed.");return this.hashForWitnessV0(e,t,r,n)}return this.hashForSignature(e,t,n)},w.prototype.getHash=function(){return h.hash256(this.__toBuffer(undefined,undefined,!1))},w.prototype.getId=function(){return this.getHash().reverse().toString("hex")},w.prototype.toBuffer=function(e,t){return this.__toBuffer(e,t,!0)},w.prototype.__toBuffer=function(e,t,r){e||(e=o.allocUnsafe(this.__byteLength(r)));var i=t||0;function s(t){i+=t.copy(e,i)}function n(t){i=e.writeUInt8(t,i)}function a(t){i=e.writeUInt16LE(t,i)}function h(t){i=e.writeUInt32LE(t,i)}function c(t){i=e.writeInt32LE(t,i)}function f(t){i=u.writeUInt64LE(e,t,i)}function l(t){g.encode(t,e,i),i+=g.encode.bytes}function d(e){l(e.length),s(e)}function p(e){n(w.ZCASH_G1_PREFIX_MASK|e.yLsb),s(e.x)}if(this.isOverwinterCompatible()){var b=this.overwintered?1:0;c(this.version|b<<31),h(this.versionGroupId)}else this.isDashSpecialTransaction()?(a(this.version),a(this.type)):c(this.version);var m=r&&this.hasWitnesses();return m&&(n(w.ADVANCED_TRANSACTION_MARKER),n(w.ADVANCED_TRANSACTION_FLAG)),this.timestamp&&h(this.timestamp),l(this.ins.length),this.ins.forEach(function(e){s(e.hash),h(e.index),d(e.script),h(e.sequence)}),l(this.outs.length),this.outs.forEach(function(t){var r;w.USE_STRING_VALUES?(r=t.value,i=u.writeUInt64LEasString(e,r,i)):t.valueBuffer?s(t.valueBuffer):f(t.value),d(t.script)}),m&&this.ins.forEach(function(e){var t;l((t=e.witness).length),t.forEach(d)}),h(this.locktime),this.isOverwinterCompatible()&&h(this.expiryHeight),this.isSaplingCompatible()&&(f(this.valueBalance),l(this.vShieldedSpend.length),this.vShieldedSpend.forEach(function(e){s(e.cv),s(e.anchor),s(e.nullifier),s(e.rk),s(e.zkproof.sA),s(e.zkproof.sB),s(e.zkproof.sC),s(e.spendAuthSig)}),l(this.vShieldedOutput.length),this.vShieldedOutput.forEach(function(e){s(e.cv),s(e.cmu),s(e.ephemeralKey),s(e.encCiphertext),s(e.outCiphertext),s(e.zkproof.sA),s(e.zkproof.sB),s(e.zkproof.sC)})),this.supportsJoinSplits()&&(l(this.joinsplits.length),this.joinsplits.forEach(function(e){var t;f(e.vpubOld),f(e.vpubNew),s(e.anchor),e.nullifiers.forEach(function(e){s(e)}),e.commitments.forEach(function(e){s(e)}),s(e.ephemeralKey),s(e.randomSeed),e.macs.forEach(function(e){s(e)}),this.isSaplingCompatible()?(s(e.zkproof.sA),s(e.zkproof.sB),s(e.zkproof.sC)):(p(e.zkproof.gA),p(e.zkproof.gAPrime),t=e.zkproof.gB,n(w.ZCASH_G2_PREFIX_MASK|t.yLsb),s(t.x),p(e.zkproof.gBPrime),p(e.zkproof.gC),p(e.zkproof.gCPrime),p(e.zkproof.gK),p(e.zkproof.gH)),e.ciphertexts.forEach(function(e){s(e)})},this),this.joinsplits.length>0&&(s(this.joinsplitPubkey),s(this.joinsplitSig))),this.isSaplingCompatible()&&this.vShieldedSpend.length+this.vShieldedOutput.length>0&&s(this.bindingSig),this.isDashSpecialTransaction()&&d(this.extraPayload),t!==undefined?e.slice(t,i):e.slice(0,i)},w.prototype.toHex=function(){return this.toBuffer().toString("hex")},w.prototype.setInputScript=function(e,t){p(b.tuple(b.Number,b.Buffer),arguments),this.ins[e].script=t},w.prototype.setWitness=function(e,t){p(b.tuple(b.Number,[b.Buffer]),arguments),this.ins[e].witness=t},w.prototype.getExtraData=function(){if(this.supportsJoinSplits()){var e=this.toBuffer(),t=this.getJoinSplitByteLength();return e.slice(e.length-t)}if(this.isDashSpecialTransaction()){var r=g.encode(this.extraPayload.length);return o.concat([r,this.extraPayload])}return null},r.exports=w}],["@trezor/utxo-lib","/src/bufferWriter.js",function(e,t,r,i,s,n){var o=__browser_require__(425,r).Buffer,a=__browser_require__(461,r),h=__browser_require__(462,r);function c(e){this.buffer=o.allocUnsafe(e),this.offset=0}c.prototype.getBuffer=function(){return this.buffer},c.prototype.writeSlice=function(e){this.offset+=e.copy(this.buffer,this.offset)},c.prototype.writeInt32=function(e){this.offset=this.buffer.writeInt32LE(e,this.offset)},c.prototype.writeUInt32=function(e){this.offset=this.buffer.writeUInt32LE(e,this.offset)},c.prototype.writeUInt64=function(e){this.offset=a.writeUInt64LE(this.buffer,e,this.offset)},c.prototype.writeVarInt=function(e){h.encode(e,this.buffer,this.offset),this.offset+=h.encode.bytes},c.prototype.writeVarSlice=function(e){this.writeVarInt(e.length),this.writeSlice(e)},r.exports=c}],["blake2b","/index.js",function(e,t,r,i,s,n){var o=__browser_require__(493,r),a=__browser_require__(494,r);function h(e,t,r){var i=e[t]+e[r],s=e[t+1]+e[r+1];i>=4294967296&&s++,e[t]=i,e[t+1]=s}function c(e,t,r,i){var s=e[t]+r;r<0&&(s+=4294967296);var n=e[t+1]+i;s>=4294967296&&n++,e[t]=s,e[t+1]=n}function u(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function f(e,t,r,i,s,n){var o=b[s],a=b[s+1],u=b[n],f=b[n+1];h(p,e,t),c(p,e,o,a);var l=p[i]^p[e],d=p[i+1]^p[e+1];p[i]=d,p[i+1]=l,h(p,r,i),l=p[t]^p[r],d=p[t+1]^p[r+1],p[t]=l>>>24^d<<8,p[t+1]=d>>>24^l<<8,h(p,e,t),c(p,e,u,f),l=p[i]^p[e],d=p[i+1]^p[e+1],p[i]=l>>>16^d<<16,p[i+1]=d>>>16^l<<16,h(p,r,i),l=p[t]^p[r],d=p[t+1]^p[r+1],p[t]=d>>>31^l<<1,p[t+1]=l>>>31^d<<1}var l=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),d=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map(function(e){return 2*e})),p=new Uint32Array(32),b=new Uint32Array(32);function g(e,t){var r=0;for(r=0;r<16;r++)p[r]=e.h[r],p[r+16]=l[r];for(p[24]=p[24]^e.t,p[25]=p[25]^e.t/4294967296,t&&(p[28]=~p[28],p[29]=~p[29]),r=0;r<32;r++)b[r]=u(e.b,4*r);for(r=0;r<12;r++)f(0,8,16,24,d[16*r+0],d[16*r+1]),f(2,10,18,26,d[16*r+2],d[16*r+3]),f(4,12,20,28,d[16*r+4],d[16*r+5]),f(6,14,22,30,d[16*r+6],d[16*r+7]),f(0,10,20,30,d[16*r+8],d[16*r+9]),f(2,12,22,24,d[16*r+10],d[16*r+11]),f(4,14,16,26,d[16*r+12],d[16*r+13]),f(6,8,18,28,d[16*r+14],d[16*r+15]);for(r=0;r<16;r++)e.h[r]=e.h[r]^p[r]^p[r+16]}var m=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function _(e,t,r,i){m.fill(0),this.b=new Uint8Array(128),this.h=new Uint32Array(16),this.t=0,this.c=0,this.outlen=e,m[0]=e,t&&(m[1]=t.length),m[2]=1,m[3]=1,r&&m.set(r,32),i&&m.set(i,48);for(var s=0;s<16;s++)this.h[s]=l[s]^u(m,4*s);t&&(w(this,t),this.c=128)}function w(e,t){for(var r=0;r<t.length;r++)128===e.c&&(e.t+=e.c,g(e,!1),e.c=0),e.b[e.c++]=t[r]}function y(e){return e<16?"0"+e.toString(16):e.toString(16)}_.prototype.update=function(e){return o(null!=e,"input must be Uint8Array or Buffer"),w(this,e),this},_.prototype.digest=function(e){var t=e&&"binary"!==e&&"hex"!==e?e:new Uint8Array(this.outlen);return o(t.length>=this.outlen,"out must have at least outlen bytes of space"),function(e,t){e.t+=e.c;for(;e.c<128;)e.b[e.c++]=0;g(e,!0);for(var r=0;r<e.outlen;r++)t[r]=e.h[r>>2]>>8*(3&r)}(this,t),"hex"===e?function(e){for(var t="",r=0;r<e.length;r++)t+=y(e[r]);return t}(t):t},_.prototype.final=_.prototype.digest,_.ready=function(e){a.ready(function(){e()})};var v=_;r.exports=function(e,t,r,i,s){return!0!==s&&(o(e>=E,"outlen must be at least "+E+", was given "+e),o(e<=S,"outlen must be at most "+S+", was given "+e),null!=t&&o(t.length>=I,"key must be at least "+I+", was given "+t.length),null!=t&&o(t.length<=k,"key must be at most "+k+", was given "+t.length),null!=r&&o(r.length===A,"salt must be exactly "+A+", was given "+r.length),null!=i&&o(i.length===O,"personal must be exactly "+O+", was given "+i.length)),new v(e,t,r,i)},r.exports.ready=function(e){a.ready(function(){e()})},r.exports.WASM_SUPPORTED=a.SUPPORTED,r.exports.WASM_LOADED=!1;var E=r.exports.BYTES_MIN=16,S=r.exports.BYTES_MAX=64,I=(r.exports.BYTES=32,r.exports.KEYBYTES_MIN=16),k=r.exports.KEYBYTES_MAX=64,A=(r.exports.KEYBYTES=32,r.exports.SALTBYTES=16),O=r.exports.PERSONALBYTES=16;a.ready(function(e){e||(r.exports.WASM_LOADED=!0,v=a)})}],["nanoassert","/index.js",function(e,t,r,i,s,n){function o(e,t){if(!e)throw new Error(t||"AssertionError")}o.notEqual=function(e,t,r){o(e!=t,r)},o.notOk=function(e,t){o(!e,t)},o.equal=function(e,t,r){o(e==t,r)},o.ok=o,r.exports=o}],["blake2b-wasm","/index.js",function(e,t,r,i,s,n){var o=__browser_require__(493,r),a=__browser_require__(495,r)(),h=64,c=[];r.exports=g;var u=r.exports.BYTES_MIN=16,f=r.exports.BYTES_MAX=64,l=(r.exports.BYTES=32,r.exports.KEYBYTES_MIN=16),d=r.exports.KEYBYTES_MAX=64,p=(r.exports.KEYBYTES=32,r.exports.SALTBYTES=16),b=r.exports.PERSONALBYTES=16;function g(e,t,r,i,s){if(!(this instanceof g))return new g(e,t,r,i,s);if(!a||!a.exports)throw new Error("WASM not loaded. Wait for Blake2b.ready(cb)");e||(e=32),!0!==s&&(o(e>=u,"digestLength must be at least "+u+", was given "+e),o(e<=f,"digestLength must be at most "+f+", was given "+e),null!=t&&o(t.length>=l,"key must be at least "+l+", was given "+t.length),null!=t&&o(t.length<=d,"key must be at least "+d+", was given "+t.length),null!=r&&o(r.length===p,"salt must be exactly "+p+", was given "+r.length),null!=i&&o(i.length===b,"personal must be exactly "+b+", was given "+i.length)),c.length||(c.push(h),h+=216),this.digestLength=e,this.finalized=!1,this.pointer=c.pop(),a.memory.fill(0,0,64),a.memory[0]=this.digestLength,a.memory[1]=t?t.length:0,a.memory[2]=1,a.memory[3]=1,r&&a.memory.set(r,32),i&&a.memory.set(i,48),this.pointer+216>a.memory.length&&a.realloc(this.pointer+216),a.exports.blake2b_init(this.pointer,this.digestLength),t&&(this.update(t),a.memory.fill(0,h,h+t.length),a.memory[this.pointer+200]=128)}function m(){}function _(e){return e<16?"0"+e.toString(16):e.toString(16)}g.prototype.update=function(e){return o(!1===this.finalized,"Hash instance finalized"),o(e,"input must be TypedArray or Buffer"),h+e.length>a.memory.length&&a.realloc(h+e.length),a.memory.set(e,h),a.exports.blake2b_update(this.pointer,h,h+e.length),this},g.prototype.digest=function(e){if(o(!1===this.finalized,"Hash instance finalized"),this.finalized=!0,c.push(this.pointer),a.exports.blake2b_final(this.pointer),!e||"binary"===e)return a.memory.slice(this.pointer+128,this.pointer+128+this.digestLength);if("hex"===e)return function(e,t,r){for(var i="",s=0;s<r;s++)i+=_(e[t+s]);return i}(a.memory,this.pointer+128,this.digestLength);o(e.length>=this.digestLength,"input must be TypedArray or Buffer");for(var t=0;t<this.digestLength;t++)e[t]=a.memory[this.pointer+128+t];return e},g.prototype.final=g.prototype.digest,g.WASM=a&&a.buffer,g.SUPPORTED="undefined"!=typeof WebAssembly,g.ready=function(e){return e||(e=m),a?new Promise(function(t,r){a.onload(function(i){i?r():t(),e(i)})}):e(new Error("WebAssembly not supported"))},g.prototype.ready=g.ready}],["blake2b-wasm","/blake2b.js",function(e,t,r,i,s,n){function o(e){if(!o.supported)return null;var r,i=e&&e.imports,s=(r="AGFzbQEAAAABEANgAn9/AGADf39/AGABfwADBQQAAQICBQUBAQroBwdNBQZtZW1vcnkCAAxibGFrZTJiX2luaXQAAA5ibGFrZTJiX3VwZGF0ZQABDWJsYWtlMmJfZmluYWwAAhBibGFrZTJiX2NvbXByZXNzAAMKvz8EwAIAIABCADcDACAAQgA3AwggAEIANwMQIABCADcDGCAAQgA3AyAgAEIANwMoIABCADcDMCAAQgA3AzggAEIANwNAIABCADcDSCAAQgA3A1AgAEIANwNYIABCADcDYCAAQgA3A2ggAEIANwNwIABCADcDeCAAQoiS853/zPmE6gBBACkDAIU3A4ABIABCu86qptjQ67O7f0EIKQMAhTcDiAEgAEKr8NP0r+68tzxBECkDAIU3A5ABIABC8e30+KWn/aelf0EYKQMAhTcDmAEgAELRhZrv+s+Uh9EAQSApAwCFNwOgASAAQp/Y+dnCkdqCm39BKCkDAIU3A6gBIABC6/qG2r+19sEfQTApAwCFNwOwASAAQvnC+JuRo7Pw2wBBOCkDAIU3A7gBIABCADcDwAEgAEIANwPIASAAQgA3A9ABC20BA38gAEHAAWohAyAAQcgBaiEEIAQpAwCnIQUCQANAIAEgAkYNASAFQYABRgRAIAMgAykDACAFrXw3AwBBACEFIAAQAwsgACAFaiABLQAAOgAAIAVBAWohBSABQQFqIQEMAAsLIAQgBa03AwALYQEDfyAAQcABaiEBIABByAFqIQIgASABKQMAIAIpAwB8NwMAIABCfzcD0AEgAikDAKchAwJAA0AgA0GAAUYNASAAIANqQQA6AAAgA0EBaiEDDAALCyACIAOtNwMAIAAQAwuqOwIgfgl/IABBgAFqISEgAEGIAWohIiAAQZABaiEjIABBmAFqISQgAEGgAWohJSAAQagBaiEmIABBsAFqIScgAEG4AWohKCAhKQMAIQEgIikDACECICMpAwAhAyAkKQMAIQQgJSkDACEFICYpAwAhBiAnKQMAIQcgKCkDACEIQoiS853/zPmE6gAhCUK7zqqm2NDrs7t/IQpCq/DT9K/uvLc8IQtC8e30+KWn/aelfyEMQtGFmu/6z5SH0QAhDUKf2PnZwpHagpt/IQ5C6/qG2r+19sEfIQ9C+cL4m5Gjs/DbACEQIAApAwAhESAAKQMIIRIgACkDECETIAApAxghFCAAKQMgIRUgACkDKCEWIAApAzAhFyAAKQM4IRggACkDQCEZIAApA0ghGiAAKQNQIRsgACkDWCEcIAApA2AhHSAAKQNoIR4gACkDcCEfIAApA3ghICANIAApA8ABhSENIA8gACkD0AGFIQ8gASAFIBF8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSASfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgE3x8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBR8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAVfHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgFnx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBd8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAYfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgGXx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBp8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAbfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgHHx8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIB18fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCAefHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgH3x8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFICB8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAffHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgG3x8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBV8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAZfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgGnx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHICB8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAefHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggF3x8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBJ8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAdfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgEXx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBN8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAcfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggGHx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBZ8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAUfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgHHx8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBl8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAdfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgEXx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBZ8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByATfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggIHx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIB58fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAbfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgH3x8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBR8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAXfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggGHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBJ8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAafHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFXx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIBh8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAafHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgFHx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBJ8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAefHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgHXx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBx8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAffHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgE3x8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBd8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAWfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgG3x8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBV8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCARfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgIHx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBl8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAafHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgEXx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBZ8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAYfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgE3x8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBV8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAbfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggIHx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIB98fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiASfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgHHx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIB18fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAXfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggGXx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBR8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAefHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgE3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIB18fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAXfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgG3x8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBF8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAcfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggGXx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBR8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAVfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgHnx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBh8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAWfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggIHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIB98fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSASfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgGnx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIB18fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSAWfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgEnx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGICB8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAffHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgHnx8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBV8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAbfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgEXx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBh8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAXfHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgFHx8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBp8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCATfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgGXx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBx8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSAefHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgHHx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBh8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAffHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgHXx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBJ8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAUfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggGnx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBZ8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiARfHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgIHx8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBV8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAZfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggF3x8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIBN8fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAbfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgF3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFICB8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAffHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgGnx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBx8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAUfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggEXx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBl8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiAdfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgE3x8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIB58fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByAYfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggEnx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBV8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAbfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFnx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgASAFIBt8fCEBIA0gAYVCIIohDSAJIA18IQkgBSAJhUIYiiEFIAEgBSATfHwhASANIAGFQhCKIQ0gCSANfCEJIAUgCYVCP4ohBSACIAYgGXx8IQIgDiAChUIgiiEOIAogDnwhCiAGIAqFQhiKIQYgAiAGIBV8fCECIA4gAoVCEIohDiAKIA58IQogBiAKhUI/iiEGIAMgByAYfHwhAyAPIAOFQiCKIQ8gCyAPfCELIAcgC4VCGIohByADIAcgF3x8IQMgDyADhUIQiiEPIAsgD3whCyAHIAuFQj+KIQcgBCAIIBJ8fCEEIBAgBIVCIIohECAMIBB8IQwgCCAMhUIYiiEIIAQgCCAWfHwhBCAQIASFQhCKIRAgDCAQfCEMIAggDIVCP4ohCCABIAYgIHx8IQEgECABhUIgiiEQIAsgEHwhCyAGIAuFQhiKIQYgASAGIBx8fCEBIBAgAYVCEIohECALIBB8IQsgBiALhUI/iiEGIAIgByAafHwhAiANIAKFQiCKIQ0gDCANfCEMIAcgDIVCGIohByACIAcgH3x8IQIgDSAChUIQiiENIAwgDXwhDCAHIAyFQj+KIQcgAyAIIBR8fCEDIA4gA4VCIIohDiAJIA58IQkgCCAJhUIYiiEIIAMgCCAdfHwhAyAOIAOFQhCKIQ4gCSAOfCEJIAggCYVCP4ohCCAEIAUgHnx8IQQgDyAEhUIgiiEPIAogD3whCiAFIAqFQhiKIQUgBCAFIBF8fCEEIA8gBIVCEIohDyAKIA98IQogBSAKhUI/iiEFIAEgBSARfHwhASANIAGFQiCKIQ0gCSANfCEJIAUgCYVCGIohBSABIAUgEnx8IQEgDSABhUIQiiENIAkgDXwhCSAFIAmFQj+KIQUgAiAGIBN8fCECIA4gAoVCIIohDiAKIA58IQogBiAKhUIYiiEGIAIgBiAUfHwhAiAOIAKFQhCKIQ4gCiAOfCEKIAYgCoVCP4ohBiADIAcgFXx8IQMgDyADhUIgiiEPIAsgD3whCyAHIAuFQhiKIQcgAyAHIBZ8fCEDIA8gA4VCEIohDyALIA98IQsgByALhUI/iiEHIAQgCCAXfHwhBCAQIASFQiCKIRAgDCAQfCEMIAggDIVCGIohCCAEIAggGHx8IQQgECAEhUIQiiEQIAwgEHwhDCAIIAyFQj+KIQggASAGIBl8fCEBIBAgAYVCIIohECALIBB8IQsgBiALhUIYiiEGIAEgBiAafHwhASAQIAGFQhCKIRAgCyAQfCELIAYgC4VCP4ohBiACIAcgG3x8IQIgDSAChUIgiiENIAwgDXwhDCAHIAyFQhiKIQcgAiAHIBx8fCECIA0gAoVCEIohDSAMIA18IQwgByAMhUI/iiEHIAMgCCAdfHwhAyAOIAOFQiCKIQ4gCSAOfCEJIAggCYVCGIohCCADIAggHnx8IQMgDiADhUIQiiEOIAkgDnwhCSAIIAmFQj+KIQggBCAFIB98fCEEIA8gBIVCIIohDyAKIA98IQogBSAKhUIYiiEFIAQgBSAgfHwhBCAPIASFQhCKIQ8gCiAPfCEKIAUgCoVCP4ohBSABIAUgH3x8IQEgDSABhUIgiiENIAkgDXwhCSAFIAmFQhiKIQUgASAFIBt8fCEBIA0gAYVCEIohDSAJIA18IQkgBSAJhUI/iiEFIAIgBiAVfHwhAiAOIAKFQiCKIQ4gCiAOfCEKIAYgCoVCGIohBiACIAYgGXx8IQIgDiAChUIQiiEOIAogDnwhCiAGIAqFQj+KIQYgAyAHIBp8fCEDIA8gA4VCIIohDyALIA98IQsgByALhUIYiiEHIAMgByAgfHwhAyAPIAOFQhCKIQ8gCyAPfCELIAcgC4VCP4ohByAEIAggHnx8IQQgECAEhUIgiiEQIAwgEHwhDCAIIAyFQhiKIQggBCAIIBd8fCEEIBAgBIVCEIohECAMIBB8IQwgCCAMhUI/iiEIIAEgBiASfHwhASAQIAGFQiCKIRAgCyAQfCELIAYgC4VCGIohBiABIAYgHXx8IQEgECABhUIQiiEQIAsgEHwhCyAGIAuFQj+KIQYgAiAHIBF8fCECIA0gAoVCIIohDSAMIA18IQwgByAMhUIYiiEHIAIgByATfHwhAiANIAKFQhCKIQ0gDCANfCEMIAcgDIVCP4ohByADIAggHHx8IQMgDiADhUIgiiEOIAkgDnwhCSAIIAmFQhiKIQggAyAIIBh8fCEDIA4gA4VCEIohDiAJIA58IQkgCCAJhUI/iiEIIAQgBSAWfHwhBCAPIASFQiCKIQ8gCiAPfCEKIAUgCoVCGIohBSAEIAUgFHx8IQQgDyAEhUIQiiEPIAogD3whCiAFIAqFQj+KIQUgISAhKQMAIAEgCYWFNwMAICIgIikDACACIAqFhTcDACAjICMpAwAgAyALhYU3AwAgJCAkKQMAIAQgDIWFNwMAICUgJSkDACAFIA2FhTcDACAmICYpAwAgBiAOhYU3AwAgJyAnKQMAIAcgD4WFNwMAICggKCkDACAIIBCFhTcDAAs=","function"==typeof atob?new Uint8Array(atob(r).split("").map(a)):new(t("buffer").Buffer)(r,"base64")),n=null,h={buffer:s,memory:null,exports:null,realloc:function(e){h.exports.memory.grow(Math.ceil(Math.abs(e-h.memory.length)/65536)),h.memory=new Uint8Array(h.exports.memory.buffer)},onload:c};return c(function(){}),h;function c(t){if(h.exports)return t();if(n)n.then(t.bind(null,null)).catch(t);else{try{if(e&&e.async)throw new Error("async");u({instance:new WebAssembly.Instance(new WebAssembly.Module(s),i)})}catch(e){n=WebAssembly.instantiate(s,i).then(u)}c(t)}}function u(e){h.exports=e.instance.exports,h.memory=h.exports.memory&&h.exports.memory.buffer&&new Uint8Array(h.exports.memory.buffer)}}function a(e){return e.charCodeAt(0)}r.exports=o,o.supported=!1}],["@trezor/utxo-lib","/src/ecpair.js",function(e,t,r,i,s,n){var o=__browser_require__(497,r),a=__browser_require__(468,r),h=__browser_require__(503,r),c=__browser_require__(424,r),u=__browser_require__(432,r),f=__browser_require__(436,r),l=__browser_require__(513,r),d=__browser_require__(488,r),p=__browser_require__(463,r),b=__browser_require__(508,r),g=b.getCurveByName("secp256k1"),m=h.__curve,_=__browser_require__(514,r);function w(e,t,r){if(r&&u({compressed:f.maybe(f.Boolean),network:f.maybe(f.Network)},r),r=r||{},e){if(e.signum()<=0)throw new Error("Private key must be greater than 0");if(e.compareTo(m.n)>=0)throw new Error("Private key must be less than the curve order");if(t)throw new TypeError("Unexpected publicKey parameter");this.d=e}else u(f.ECPoint,t),this.__Q=t;this.compressed=r.compressed===undefined||r.compressed,this.network=r.network||d.bitcoin}Object.defineProperty(w.prototype,"Q",{get:function(){return!this.__Q&&this.d&&(this.__Q=m.G.multiply(this.d)),this.__Q}}),w.fromPublicKeyBuffer=function(e,t){var r=b.Point.decodeFrom(m,e);return new w(null,r,{compressed:r.compressed,network:t})},w.fromPrivateKeyBuffer=function(e,t){if(null==e||!0!==e._isBuffer||32!==e.length)throw new Error("invalid private key buffer");var r=p.fromBuffer(e);if(r.signum()<=0||r.compareTo(g.n)>=0)throw new Error("private key out of range");var i=new w(r,null,{network:t});return!i.__Q&&g&&(i.__Q=b.Point.decodeFrom(g,_.publicKeyCreate(r.toBuffer(32),!1))),i},w.fromWIF=function(e,t){var r=l.decode(e),i=r.version;if(f.Array(t)){if(!(t=t.filter(function(e){return i===e.wif}).pop()))throw new Error("Unknown network version")}else if(t=t||d.bitcoin,i!==t.wif)throw new Error("Invalid network version");return new w(p.fromBuffer(r.privateKey),null,{compressed:r.compressed,network:t})},w.makeRandom=function(e){var t,r=(e=e||{}).rng||c;do{var i=r(32);u(f.Buffer256bit,i),t=p.fromBuffer(i)}while(t.signum()<=0||t.compareTo(m.n)>=0);return new w(t,null,e)},w.prototype.getAddress=function(){return o.toBase58Check(a.hash160(this.getPublicKeyBuffer()),this.getNetwork().pubKeyHash)},w.prototype.getNetwork=function(){return this.network},w.prototype.getPublicKeyBuffer=function(){return this.Q.getEncoded(this.compressed)},w.prototype.getPrivateKeyBuffer=function(){if(!this.d)throw new Error("Missing private key");var e=this.d.toBuffer();if(e.length>32)throw new Error("Private key size exceeds 32 bytes");if(32===e.length)return e;var t=Buffer.alloc(32);return e.copy(t,t.length-e.length,0,e.length),t},w.prototype.sign=function(e){if(!this.d)throw new Error("Missing private key");var t=_.sign(e,this.d);return t!==undefined?t:h.sign(e,this.d)},w.prototype.toWIF=function(){if(!this.d)throw new Error("Missing private key");return l.encode(this.network.wif,this.d.toBuffer(32),this.compressed)},w.prototype.verify=function(e,t){var r=_.verify(e,t,this.getPublicKeyBuffer());return r!==undefined?r:h.verify(e,t,this.Q)},r.exports=w}],["@trezor/utxo-lib","/src/address.js",function(e,t,r,i,s,n){var o=__browser_require__(425,r).Buffer,a=__browser_require__(498,r),h=__browser_require__(499,r),c=__browser_require__(428,r),u=__browser_require__(439,r),f=__browser_require__(488,r),l=__browser_require__(432,r),d=__browser_require__(436,r);function p(e){var t=h.decode(e);if(t.length<21)throw new TypeError(e+" is too short");if(t.length>22)throw new TypeError(e+" is too long");var r=22===t.length,i=r?2:1;return{version:r?t.readUInt16BE(0):t[0],hash:t.slice(i)}}function b(e){var t=a.decode(e),r=a.fromWords(t.words.slice(1));return{version:t.words[0],prefix:t.prefix,data:o.from(r)}}function g(e,t){l(d.tuple(d.Hash160bit,d.UInt16),arguments);var r=t>255,i=r?22:21,s=r?2:1,n=o.allocUnsafe(i);return r?n.writeUInt16BE(t,0):n.writeUInt8(t,0),e.copy(n,s),h.encode(n)}function m(e,t,r){var i=a.toWords(e);return i.unshift(t),a.encode(r,i)}r.exports={fromBase58Check:p,fromBech32:b,fromOutputScript:function(e,t){if(t=t||f.bitcoin,u.pubKeyHash.output.check(e))return g(c.compile(e).slice(3,23),t.pubKeyHash);if(u.scriptHash.output.check(e))return g(c.compile(e).slice(2,22),t.scriptHash);if(u.witnessPubKeyHash.output.check(e))return m(c.compile(e).slice(2,22),0,t.bech32);if(u.witnessScriptHash.output.check(e))return m(c.compile(e).slice(2,34),0,t.bech32);throw new Error(c.toASM(e)+" has no matching Address")},toBase58Check:g,toBech32:m,toOutputScript:function(e,t){var r;t=t||f.bitcoin;try{r=p(e)}catch(e){}if(r){if(r.version===t.pubKeyHash)return u.pubKeyHash.output.encode(r.hash);if(r.version===t.scriptHash)return u.scriptHash.output.encode(r.hash)}else{try{r=b(e)}catch(e){}if(r){if(r.prefix!==t.bech32)throw new Error(e+" has an invalid prefix");if(0===r.version){if(20===r.data.length)return u.witnessPubKeyHash.output.encode(r.data);if(32===r.data.length)return u.witnessScriptHash.output.encode(r.data)}}}throw new Error(e+" has no matching Script")}}}],["bech32","/index.js",function(e,t,r,i,s,n){"use strict";let o="qpzry9x8gf2tvdw0s3jn54khce6mua7l",a={};for(let e=0;e<o.length;e++){let t=o.charAt(e);if(a[t]!==undefined)throw new TypeError(t+" is ambiguous");a[t]=e}function h(e){let t=e>>25;return(33554431&e)<<5^996825010&-(t>>0&1)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function c(e){let t=1;for(let r=0;r<e.length;++r){let i=e.charCodeAt(r);if(i<33||i>126)throw new Error("Invalid prefix ("+e+")");t=h(t)^i>>5}t=h(t);for(let r=0;r<e.length;++r){let i=e.charCodeAt(r);t=h(t)^31&i}return t}function u(e,t,r,i){let s=0,n=0,o=(1<<r)-1,a=[];for(let i=0;i<e.length;++i)for(s=s<<t|e[i],n+=t;n>=r;)n-=r,a.push(s>>n&o);if(i)n>0&&a.push(s<<r-n&o);else{if(n>=t)throw new Error("Excess padding");if(s<<r-n&o)throw new Error("Non-zero padding")}return a}r.exports={decode:function(e){if(e.length<8)throw new TypeError(e+" too short");if(e.length>90)throw new TypeError(e+" too long");let t=e.toLowerCase(),r=e.toUpperCase();if(e!==t&&e!==r)throw new Error("Mixed-case string "+e);let i=(e=t).lastIndexOf("1");if(0===i)throw new Error("Missing prefix for "+e);let s=e.slice(0,i),n=e.slice(i+1);if(n.length<6)throw new Error("Data too short");let o=c(s),u=[];for(let e=0;e<n.length;++e){let t=n.charAt(e),r=a[t];if(r===undefined)throw new Error("Unknown character "+t);o=h(o)^r,e+6>=n.length||u.push(r)}if(1!==o)throw new Error("Invalid checksum for "+e);return{prefix:s,words:u}},encode:function(e,t){if(e.length+7+t.length>90)throw new TypeError("Exceeds Bech32 maximum length");let r=c(e=e.toLowerCase()),i=e+"1";for(let e=0;e<t.length;++e){let s=t[e];if(s>>5!=0)throw new Error("Non 5-bit word");r=h(r)^s,i+=o.charAt(s)}for(let e=0;e<6;++e)r=h(r);r^=1;for(let e=0;e<6;++e){let t=r>>5*(5-e)&31;i+=o.charAt(t)}return i},toWords:function(e){return u(e,8,5,!0)},fromWords:function(e){return u(e,5,8,!1)}}}],["bs58check","/index.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(469,r),a=__browser_require__(500,r);r.exports=a(function(e){var t=o("sha256").update(e).digest();return o("sha256").update(t).digest()})}],["bs58check","/base.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(501,r),a=__browser_require__(425,r).Buffer;r.exports=function(e){function t(t){var r=t.slice(0,-4),i=t.slice(-4),s=e(r);if(!(i[0]^s[0]|i[1]^s[1]|i[2]^s[2]|i[3]^s[3]))return r}return{encode:function(t){var r=e(t);return o.encode(a.concat([t,r],t.length+4))},decode:function(e){var r=t(o.decode(e));if(!r)throw new Error("Invalid checksum");return r},decodeUnsafe:function(e){var r=o.decodeUnsafe(e);if(r)return t(r)}}}}],["bs58","/index.js",function(e,t,r,i,s,n){var o=__browser_require__(502,r);r.exports=o("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")}],["base-x","/src/index.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(425,r).Buffer;r.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");var t=new Uint8Array(256);t.fill(255);for(var r=0;r<e.length;r++){var i=e.charAt(r),s=i.charCodeAt(0);if(255!==t[s])throw new TypeError(i+" is ambiguous");t[s]=r}var n=e.length,a=e.charAt(0),h=Math.log(n)/Math.log(256),c=Math.log(256)/Math.log(n);function u(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return o.alloc(0);var r=0;if(" "!==e[r]){for(var i=0,s=0;e[r]===a;)i++,r++;for(var c=(e.length-r)*h+1>>>0,u=new Uint8Array(c);e[r];){var f=t[e.charCodeAt(r)];if(255===f)return;for(var l=0,d=c-1;(0!==f||l<s)&&-1!==d;d--,l++)f+=n*u[d]>>>0,u[d]=f%256>>>0,f=f/256>>>0;if(0!==f)throw new Error("Non-zero carry");s=l,r++}if(" "!==e[r]){for(var p=c-s;p!==c&&0===u[p];)p++;var b=o.allocUnsafe(i+(c-p));b.fill(0,0,i);for(var g=i;p!==c;)b[g++]=u[p++];return b}}}return{encode:function(t){if(!o.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,i=0,s=0,h=t.length;s!==h&&0===t[s];)s++,r++;for(var u=(h-s)*c+1>>>0,f=new Uint8Array(u);s!==h;){for(var l=t[s],d=0,p=u-1;(0!==l||d<i)&&-1!==p;p--,d++)l+=256*f[p]>>>0,f[p]=l%n>>>0,l=l/n>>>0;if(0!==l)throw new Error("Non-zero carry");i=d,s++}for(var b=u-i;b!==u&&0===f[b];)b++;for(var g=a.repeat(r);b<u;++b)g+=e.charAt(f[b]);return g},decodeUnsafe:u,decode:function(e){var t=u(e);if(t)return t;throw new Error("Non-base"+n+" character")}}}}],["@trezor/utxo-lib","/src/ecdsa.js",function(e,t,r,i,s,n){var o=__browser_require__(425,r).Buffer,a=__browser_require__(504,r),h=__browser_require__(432,r),c=__browser_require__(436,r),u=__browser_require__(463,r),f=__browser_require__(507,r),l=o.alloc(1,0),d=o.alloc(1,1),p=__browser_require__(508,r).getCurveByName("secp256k1");function b(e,t,r){h(c.tuple(c.Hash256bit,c.Buffer256bit,c.Function),arguments);var i=o.alloc(32,0),s=o.alloc(32,1);i=a("sha256",i).update(s).update(l).update(t).update(e).digest(),s=a("sha256",i).update(s).digest(),i=a("sha256",i).update(s).update(d).update(t).update(e).digest(),s=a("sha256",i).update(s).digest(),s=a("sha256",i).update(s).digest();for(var n=u.fromBuffer(s);n.signum()<=0||n.compareTo(p.n)>=0||!r(n);)i=a("sha256",i).update(s).update(l).digest(),s=a("sha256",i).update(s).digest(),s=a("sha256",i).update(s).digest(),n=u.fromBuffer(s);return n}var g=p.n.shiftRight(1);r.exports={deterministicGenerateK:b,sign:function(e,t){h(c.tuple(c.Hash256bit,c.BigInt),arguments);var r,i,s=t.toBuffer(32),n=u.fromBuffer(e),o=p.n,a=p.G;return b(e,s,function(e){var s=a.multiply(e);return!p.isInfinity(s)&&0!==(r=s.affineX.mod(o)).signum()&&0!==(i=e.modInverse(o).multiply(n.add(t.multiply(r))).mod(o)).signum()}),i.compareTo(g)>0&&(i=o.subtract(i)),new f(r,i)},verify:function(e,t,r){h(c.tuple(c.Hash256bit,c.ECSignature,c.ECPoint),arguments);var i=p.n,s=p.G,n=t.r,o=t.s;if(n.signum()<=0||n.compareTo(i)>=0)return!1;if(o.signum()<=0||o.compareTo(i)>=0)return!1;var a=u.fromBuffer(e),f=o.modInverse(i),l=a.multiply(f).mod(i),d=n.multiply(f).mod(i),b=s.multiplyTwo(l,r,d);return!p.isInfinity(b)&&b.affineX.mod(i).equals(n)},__curve:p}}],["create-hmac","/browser.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(470,r),a=__browser_require__(505,r),h=__browser_require__(483,r),c=__browser_require__(425,r).Buffer,u=__browser_require__(506,r),f=__browser_require__(474,r),l=__browser_require__(475,r),d=c.alloc(128);function p(e,t){h.call(this,"digest"),"string"==typeof t&&(t=c.from(t));var r="sha512"===e||"sha384"===e?128:64;(this._alg=e,this._key=t,t.length>r)?t=("rmd160"===e?new f:l(e)).update(t).digest():t.length<r&&(t=c.concat([t,d],r));for(var i=this._ipad=c.allocUnsafe(r),s=this._opad=c.allocUnsafe(r),n=0;n<r;n++)i[n]=54^t[n],s[n]=92^t[n];this._hash="rmd160"===e?new f:l(e),this._hash.update(i)}o(p,h),p.prototype._update=function(e){this._hash.update(e)},p.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new f:l(this._alg)).update(this._opad).update(e).digest()},r.exports=function(e,t){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new p("rmd160",t):"md5"===e?new a(u,t):new p(e,t)}}],["create-hmac","/legacy.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(470,r),a=__browser_require__(425,r).Buffer,h=__browser_require__(483,r),c=a.alloc(128),u=64;function f(e,t){h.call(this,"digest"),"string"==typeof t&&(t=a.from(t)),this._alg=e,this._key=t,t.length>u?t=e(t):t.length<u&&(t=a.concat([t,c],u));for(var r=this._ipad=a.allocUnsafe(u),i=this._opad=a.allocUnsafe(u),s=0;s<u;s++)r[s]=54^t[s],i[s]=92^t[s];this._hash=[r]}o(f,h),f.prototype._update=function(e){this._hash.push(e)},f.prototype._final=function(){var e=this._alg(a.concat(this._hash));return this._alg(a.concat([this._opad,e]))},r.exports=f}],["create-hash","/md5.js",function(e,t,r,i,s,n){var o=__browser_require__(471,r);r.exports=function(e){return(new o).update(e).digest()}}],["@trezor/utxo-lib","/src/ecsignature.js",function(e,t,r,i,s,n){var o=__browser_require__(429,r),a=__browser_require__(432,r),h=__browser_require__(436,r),c=__browser_require__(463,r);function u(e,t){a(h.tuple(h.BigInt,h.BigInt),arguments),this.r=e,this.s=t}u.parseCompact=function(e){a(h.BufferN(65),e);var t=e.readUInt8(0)-27;if(t!==(7&t))throw new Error("Invalid signature parameter");return{compressed:!!(4&t),i:3&t,signature:u.fromRSBuffer(e.slice(1))}},u.fromRSBuffer=function(e){return a(h.BufferN(64),e),new u(c.fromBuffer(e.slice(0,32)),c.fromBuffer(e.slice(32,64)))},u.fromDER=function(e){var t=o.decode(e);return new u(c.fromDERInteger(t.r),c.fromDERInteger(t.s))},u.parseScriptSignature=function(e){var t=e.readUInt8(e.length-1),r=-193&t;if(r<=0||r>=4)throw new Error("Invalid hashType "+t);return{signature:u.fromDER(e.slice(0,-1)),hashType:t}},u.prototype.toCompact=function(e,t){t&&(e+=4),e+=27;var r=Buffer.alloc(65);return r.writeUInt8(e,0),this.toRSBuffer(r,1),r},u.prototype.toDER=function(){var e=Buffer.from(this.r.toDERInteger()),t=Buffer.from(this.s.toDERInteger());return o.encode(e,t)},u.prototype.toRSBuffer=function(e,t){return e=e||Buffer.alloc(64),this.r.toBuffer(32).copy(e,t),this.s.toBuffer(32).copy(e,t+32),e},u.prototype.toScriptSignature=function(e){var t=-193&e;if(t<=0||t>=4)throw new Error("Invalid hashType "+e);var r=Buffer.alloc(1);return r.writeUInt8(e,0),Buffer.concat([this.toDER(),r])},r.exports=u}],["ecurve","/lib/index.js",function(e,t,r,i,s,n){var o=__browser_require__(509,r),a=__browser_require__(510,r),h=__browser_require__(511,r);r.exports={Curve:a,Point:o,getCurveByName:h}}],["ecurve","/lib/point.js",function(e,t,r,i,s,n){var o=__browser_require__(44,r),a=__browser_require__(425,r).Buffer,h=__browser_require__(463,r),c=h.valueOf(3);function u(e,t,r,i){o.notStrictEqual(i,undefined,"Missing Z coordinate"),this.curve=e,this.x=t,this.y=r,this.z=i,this._zInv=null,this.compressed=!0}Object.defineProperty(u.prototype,"zInv",{get:function(){return null===this._zInv&&(this._zInv=this.z.modInverse(this.curve.p)),this._zInv}}),Object.defineProperty(u.prototype,"affineX",{get:function(){return this.x.multiply(this.zInv).mod(this.curve.p)}}),Object.defineProperty(u.prototype,"affineY",{get:function(){return this.y.multiply(this.zInv).mod(this.curve.p)}}),u.fromAffine=function(e,t,r){return new u(e,t,r,h.ONE)},u.prototype.equals=function(e){return e===this||(this.curve.isInfinity(this)?this.curve.isInfinity(e):this.curve.isInfinity(e)?this.curve.isInfinity(this):0===e.y.multiply(this.z).subtract(this.y.multiply(e.z)).mod(this.curve.p).signum()&&0===e.x.multiply(this.z).subtract(this.x.multiply(e.z)).mod(this.curve.p).signum())},u.prototype.negate=function(){var e=this.curve.p.subtract(this.y);return new u(this.curve,this.x,e,this.z)},u.prototype.add=function(e){if(this.curve.isInfinity(this))return e;if(this.curve.isInfinity(e))return this;var t=this.x,r=this.y,i=e.x,s=e.y.multiply(this.z).subtract(r.multiply(e.z)).mod(this.curve.p),n=i.multiply(this.z).subtract(t.multiply(e.z)).mod(this.curve.p);if(0===n.signum())return 0===s.signum()?this.twice():this.curve.infinity;var o=n.square(),a=o.multiply(n),h=t.multiply(o),f=s.square().multiply(this.z),l=f.subtract(h.shiftLeft(1)).multiply(e.z).subtract(a).multiply(n).mod(this.curve.p),d=h.multiply(c).multiply(s).subtract(r.multiply(a)).subtract(f.multiply(s)).multiply(e.z).add(s.multiply(a)).mod(this.curve.p),p=a.multiply(this.z).multiply(e.z).mod(this.curve.p);return new u(this.curve,l,d,p)},u.prototype.twice=function(){if(this.curve.isInfinity(this))return this;if(0===this.y.signum())return this.curve.infinity;var e=this.x,t=this.y,r=t.multiply(this.z).mod(this.curve.p),i=r.multiply(t).mod(this.curve.p),s=this.curve.a,n=e.square().multiply(c);0!==s.signum()&&(n=n.add(this.z.square().multiply(s)));var o=(n=n.mod(this.curve.p)).square().subtract(e.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(r).mod(this.curve.p),a=n.multiply(c).multiply(e).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(n.pow(3)).mod(this.curve.p),h=r.pow(3).shiftLeft(3).mod(this.curve.p);return new u(this.curve,o,a,h)},u.prototype.multiply=function(e){if(this.curve.isInfinity(this))return this;if(0===e.signum())return this.curve.infinity;for(var t=e,r=t.multiply(c),i=this.negate(),s=this,n=r.bitLength()-2;n>0;--n){var o=r.testBit(n),a=t.testBit(n);s=s.twice(),o!==a&&(s=s.add(o?this:i))}return s},u.prototype.multiplyTwo=function(e,t,r){for(var i=Math.max(e.bitLength(),r.bitLength())-1,s=this.curve.infinity,n=this.add(t);i>=0;){var o=e.testBit(i),a=r.testBit(i);s=s.twice(),o?s=a?s.add(n):s.add(this):a&&(s=s.add(t)),--i}return s},u.prototype.getEncoded=function(e){if(null==e&&(e=this.compressed),this.curve.isInfinity(this))return a.alloc(1,0);var t,r=this.affineX,i=this.affineY,s=this.curve.pLength;return e?(t=a.allocUnsafe(1+s)).writeUInt8(i.isEven()?2:3,0):((t=a.allocUnsafe(1+s+s)).writeUInt8(4,0),i.toBuffer(s).copy(t,1+s)),r.toBuffer(s).copy(t,1),t},u.decodeFrom=function(e,t){var r,i=t.readUInt8(0),s=4!==i,n=Math.floor((e.p.bitLength()+7)/8),a=h.fromBuffer(t.slice(1,1+n));if(s){o.equal(t.length,n+1,"Invalid sequence length"),o(2===i||3===i,"Invalid sequence tag");var c=3===i;r=e.pointFromX(c,a)}else{o.equal(t.length,1+n+n,"Invalid sequence length");var f=h.fromBuffer(t.slice(1+n));r=u.fromAffine(e,a,f)}return r.compressed=s,r},u.prototype.toString=function(){return this.curve.isInfinity(this)?"(INFINITY)":"("+this.affineX.toString()+","+this.affineY.toString()+")"},r.exports=u}],["ecurve","/lib/curve.js",function(e,t,r,i,s,n){var o=__browser_require__(44,r),a=__browser_require__(463,r),h=__browser_require__(509,r);function c(e,t,r,i,s,n,o){this.p=e,this.a=t,this.b=r,this.G=h.fromAffine(this,i,s),this.n=n,this.h=o,this.infinity=new h(this,null,null,a.ZERO),this.pOverFour=e.add(a.ONE).shiftRight(2),this.pLength=Math.floor((this.p.bitLength()+7)/8)}c.prototype.pointFromX=function(e,t){var r=t.pow(3).add(this.a.multiply(t)).add(this.b).mod(this.p).modPow(this.pOverFour,this.p),i=r;return r.isEven()^!e&&(i=this.p.subtract(i)),h.fromAffine(this,t,i)},c.prototype.isInfinity=function(e){return e===this.infinity||0===e.z.signum()&&0!==e.y.signum()},c.prototype.isOnCurve=function(e){if(this.isInfinity(e))return!0;var t=e.affineX,r=e.affineY,i=this.a,s=this.b,n=this.p;if(t.signum()<0||t.compareTo(n)>=0)return!1;if(r.signum()<0||r.compareTo(n)>=0)return!1;var o=r.square().mod(n),a=t.pow(3).add(i.multiply(t)).add(s).mod(n);return o.equals(a)},c.prototype.validate=function(e){o(!this.isInfinity(e),"Point is at infinity"),o(this.isOnCurve(e),"Point is not on the curve");var t=e.multiply(this.n);return o(this.isInfinity(t),"Point is not a scalar multiple of G"),!0},r.exports=c}],["ecurve","/lib/names.js",function(e,t,r,i,s,n){var o=__browser_require__(463,r),a=__browser_require__(512,r),h=__browser_require__(510,r);r.exports=function(e){var t=a[e];if(!t)return null;var r=new o(t.p,16),i=new o(t.a,16),s=new o(t.b,16),n=new o(t.n,16),c=new o(t.h,16),u=new o(t.Gx,16),f=new o(t.Gy,16);return new h(r,i,s,u,f,n,c)}}],["ecurve","/lib/curves.json",function(e,t,r,i,s,n){r.exports={secp128r1:{p:"fffffffdffffffffffffffffffffffff",a:"fffffffdfffffffffffffffffffffffc",b:"e87579c11079f43dd824993c2cee5ed3",n:"fffffffe0000000075a30d1b9038a115",h:"01",Gx:"161ff7528b899b2d0c28607ca52c5b86",Gy:"cf5ac8395bafeb13c02da292dded7a83"},secp160k1:{p:"fffffffffffffffffffffffffffffffeffffac73",a:"00",b:"07",n:"0100000000000000000001b8fa16dfab9aca16b6b3",h:"01",Gx:"3b4c382ce37aa192a4019e763036f4f5dd4d7ebb",Gy:"938cf935318fdced6bc28286531733c3f03c4fee"},secp160r1:{p:"ffffffffffffffffffffffffffffffff7fffffff",a:"ffffffffffffffffffffffffffffffff7ffffffc",b:"1c97befc54bd7a8b65acf89f81d4d4adc565fa45",n:"0100000000000000000001f4c8f927aed3ca752257",h:"01",Gx:"4a96b5688ef573284664698968c38bb913cbfc82",Gy:"23a628553168947d59dcc912042351377ac5fb32"},secp192k1:{p:"fffffffffffffffffffffffffffffffffffffffeffffee37",a:"00",b:"03",n:"fffffffffffffffffffffffe26f2fc170f69466a74defd8d",h:"01",Gx:"db4ff10ec057e9ae26b07d0280b7f4341da5d1b1eae06c7d",Gy:"9b2f2f6d9c5628a7844163d015be86344082aa88d95e2f9d"},secp192r1:{p:"fffffffffffffffffffffffffffffffeffffffffffffffff",a:"fffffffffffffffffffffffffffffffefffffffffffffffc",b:"64210519e59c80e70fa7e9ab72243049feb8deecc146b9b1",n:"ffffffffffffffffffffffff99def836146bc9b1b4d22831",h:"01",Gx:"188da80eb03090f67cbf20eb43a18800f4ff0afd82ff1012",Gy:"07192b95ffc8da78631011ed6b24cdd573f977a11e794811"},secp256k1:{p:"fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f",a:"00",b:"07",n:"fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",h:"01",Gx:"79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",Gy:"483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8"},secp256r1:{p:"ffffffff00000001000000000000000000000000ffffffffffffffffffffffff",a:"ffffffff00000001000000000000000000000000fffffffffffffffffffffffc",b:"5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b",n:"ffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551",h:"01",Gx:"6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296",Gy:"4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"}}}],["wif","/index.js",function(e,t,r,i,s,n){var o=__browser_require__(499,r);function a(e,t){if(t!==undefined&&e[0]!==t)throw new Error("Invalid network version");if(33===e.length)return{version:e[0],privateKey:e.slice(1,33),compressed:!1};if(34!==e.length)throw new Error("Invalid WIF length");if(1!==e[33])throw new Error("Invalid compression flag");return{version:e[0],privateKey:e.slice(1,33),compressed:!0}}function h(e,t,r){var i=new Buffer(r?34:33);return i.writeUInt8(e,0),t.copy(i,1),r&&(i[33]=1),i}r.exports={decode:function(e,t){return a(o.decode(e),t)},decodeRaw:a,encode:function(e,t,r){return"number"==typeof e?o.encode(h(e,t,r)):o.encode(h(e.version,e.privateKey,e.compressed))},encodeRaw:h}}],["@trezor/utxo-lib","/src/fastcurve.js",function(e,t,r,i,s,n){var o,a=__browser_require__(432,r),h=__browser_require__(507,r),c=__browser_require__(436,r),u=!1;try{o=__browser_require__(515,r),u=!0}catch(e){}r.exports={available:u,publicKeyCreate:function(e,t){return a(c.tuple(c.Buffer256bit,c.Boolean),arguments),u?o.publicKeyCreate(e,t):undefined},sign:function(e,t){if(a(c.tuple(c.Buffer256bit,c.BigInt),arguments),!u)return undefined;var r=o.sign(e,t.toBuffer(32)).signature;return h.fromDER(o.signatureExport(r))},verify:function(e,t,r){return a(c.tuple(c.Hash256bit,c.ECSignature,c.oneOf(c.BufferN(33),c.BufferN(65))),arguments),u?(t=new h(t.r,t.s),t=o.signatureNormalize(o.signatureImport(t.toDER())),o.verify(e,t,r)):undefined}}}],["secp256k1","/elliptic.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(516,r)(__browser_require__(520,r))}],["secp256k1","/lib/index.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(517,r),a=__browser_require__(518,r),h=__browser_require__(519,r);function c(e,t){return e===undefined?t:(o.isBoolean(e,h.COMPRESSED_TYPE_INVALID),e)}r.exports=function(e){return{privateKeyVerify:function(t){return o.isBuffer(t,h.EC_PRIVATE_KEY_TYPE_INVALID),32===t.length&&e.privateKeyVerify(t)},privateKeyExport:function(t,r){o.isBuffer(t,h.EC_PRIVATE_KEY_TYPE_INVALID),o.isBufferLength(t,32,h.EC_PRIVATE_KEY_LENGTH_INVALID),r=c(r,!0);var i=e.privateKeyExport(t,r);return a.privateKeyExport(t,i,r)},privateKeyImport:function(t){if(o.isBuffer(t,h.EC_PRIVATE_KEY_TYPE_INVALID),(t=a.privateKeyImport(t))&&32===t.length&&e.privateKeyVerify(t))return t;throw new Error(h.EC_PRIVATE_KEY_IMPORT_DER_FAIL)},privateKeyNegate:function(t){return o.isBuffer(t,h.EC_PRIVATE_KEY_TYPE_INVALID),o.isBufferLength(t,32,h.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyNegate(t)},privateKeyModInverse:function(t){return o.isBuffer(t,h.EC_PRIVATE_KEY_TYPE_INVALID),o.isBufferLength(t,32,h.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyModInverse(t)},privateKeyTweakAdd:function(t,r){return o.isBuffer(t,h.EC_PRIVATE_KEY_TYPE_INVALID),o.isBufferLength(t,32,h.EC_PRIVATE_KEY_LENGTH_INVALID),o.isBuffer(r,h.TWEAK_TYPE_INVALID),o.isBufferLength(r,32,h.TWEAK_LENGTH_INVALID),e.privateKeyTweakAdd(t,r)},privateKeyTweakMul:function(t,r){return o.isBuffer(t,h.EC_PRIVATE_KEY_TYPE_INVALID),o.isBufferLength(t,32,h.EC_PRIVATE_KEY_LENGTH_INVALID),o.isBuffer(r,h.TWEAK_TYPE_INVALID),o.isBufferLength(r,32,h.TWEAK_LENGTH_INVALID),e.privateKeyTweakMul(t,r)},publicKeyCreate:function(t,r){return o.isBuffer(t,h.EC_PRIVATE_KEY_TYPE_INVALID),o.isBufferLength(t,32,h.EC_PRIVATE_KEY_LENGTH_INVALID),r=c(r,!0),e.publicKeyCreate(t,r)},publicKeyConvert:function(t,r){return o.isBuffer(t,h.EC_PUBLIC_KEY_TYPE_INVALID),o.isBufferLength2(t,33,65,h.EC_PUBLIC_KEY_LENGTH_INVALID),r=c(r,!0),e.publicKeyConvert(t,r)},publicKeyVerify:function(t){return o.isBuffer(t,h.EC_PUBLIC_KEY_TYPE_INVALID),e.publicKeyVerify(t)},publicKeyTweakAdd:function(t,r,i){return o.isBuffer(t,h.EC_PUBLIC_KEY_TYPE_INVALID),o.isBufferLength2(t,33,65,h.EC_PUBLIC_KEY_LENGTH_INVALID),o.isBuffer(r,h.TWEAK_TYPE_INVALID),o.isBufferLength(r,32,h.TWEAK_LENGTH_INVALID),i=c(i,!0),e.publicKeyTweakAdd(t,r,i)},publicKeyTweakMul:function(t,r,i){return o.isBuffer(t,h.EC_PUBLIC_KEY_TYPE_INVALID),o.isBufferLength2(t,33,65,h.EC_PUBLIC_KEY_LENGTH_INVALID),o.isBuffer(r,h.TWEAK_TYPE_INVALID),o.isBufferLength(r,32,h.TWEAK_LENGTH_INVALID),i=c(i,!0),e.publicKeyTweakMul(t,r,i)},publicKeyCombine:function(t,r){o.isArray(t,h.EC_PUBLIC_KEYS_TYPE_INVALID),o.isLengthGTZero(t,h.EC_PUBLIC_KEYS_LENGTH_INVALID);for(var i=0;i<t.length;++i)o.isBuffer(t[i],h.EC_PUBLIC_KEY_TYPE_INVALID),o.isBufferLength2(t[i],33,65,h.EC_PUBLIC_KEY_LENGTH_INVALID);return r=c(r,!0),e.publicKeyCombine(t,r)},signatureNormalize:function(t){return o.isBuffer(t,h.ECDSA_SIGNATURE_TYPE_INVALID),o.isBufferLength(t,64,h.ECDSA_SIGNATURE_LENGTH_INVALID),e.signatureNormalize(t)},signatureExport:function(t){o.isBuffer(t,h.ECDSA_SIGNATURE_TYPE_INVALID),o.isBufferLength(t,64,h.ECDSA_SIGNATURE_LENGTH_INVALID);var r=e.signatureExport(t);return a.signatureExport(r)},signatureImport:function(t){o.isBuffer(t,h.ECDSA_SIGNATURE_TYPE_INVALID),o.isLengthGTZero(t,h.ECDSA_SIGNATURE_LENGTH_INVALID);var r=a.signatureImport(t);if(r)return e.signatureImport(r);throw new Error(h.ECDSA_SIGNATURE_PARSE_DER_FAIL)},signatureImportLax:function(t){o.isBuffer(t,h.ECDSA_SIGNATURE_TYPE_INVALID),o.isLengthGTZero(t,h.ECDSA_SIGNATURE_LENGTH_INVALID);var r=a.signatureImportLax(t);if(r)return e.signatureImport(r);throw new Error(h.ECDSA_SIGNATURE_PARSE_DER_FAIL)},sign:function(t,r,i){o.isBuffer(t,h.MSG32_TYPE_INVALID),o.isBufferLength(t,32,h.MSG32_LENGTH_INVALID),o.isBuffer(r,h.EC_PRIVATE_KEY_TYPE_INVALID),o.isBufferLength(r,32,h.EC_PRIVATE_KEY_LENGTH_INVALID);var s=null,n=null;return i!==undefined&&(o.isObject(i,h.OPTIONS_TYPE_INVALID),i.data!==undefined&&(o.isBuffer(i.data,h.OPTIONS_DATA_TYPE_INVALID),o.isBufferLength(i.data,32,h.OPTIONS_DATA_LENGTH_INVALID),s=i.data),i.noncefn!==undefined&&(o.isFunction(i.noncefn,h.OPTIONS_NONCEFN_TYPE_INVALID),n=i.noncefn)),e.sign(t,r,n,s)},verify:function(t,r,i){return o.isBuffer(t,h.MSG32_TYPE_INVALID),o.isBufferLength(t,32,h.MSG32_LENGTH_INVALID),o.isBuffer(r,h.ECDSA_SIGNATURE_TYPE_INVALID),o.isBufferLength(r,64,h.ECDSA_SIGNATURE_LENGTH_INVALID),o.isBuffer(i,h.EC_PUBLIC_KEY_TYPE_INVALID),o.isBufferLength2(i,33,65,h.EC_PUBLIC_KEY_LENGTH_INVALID),e.verify(t,r,i)},recover:function(t,r,i,s){return o.isBuffer(t,h.MSG32_TYPE_INVALID),o.isBufferLength(t,32,h.MSG32_LENGTH_INVALID),o.isBuffer(r,h.ECDSA_SIGNATURE_TYPE_INVALID),o.isBufferLength(r,64,h.ECDSA_SIGNATURE_LENGTH_INVALID),o.isNumber(i,h.RECOVERY_ID_TYPE_INVALID),o.isNumberInInterval(i,-1,4,h.RECOVERY_ID_VALUE_INVALID),s=c(s,!0),e.recover(t,r,i,s)},ecdh:function(t,r){return o.isBuffer(t,h.EC_PUBLIC_KEY_TYPE_INVALID),o.isBufferLength2(t,33,65,h.EC_PUBLIC_KEY_LENGTH_INVALID),o.isBuffer(r,h.EC_PRIVATE_KEY_TYPE_INVALID),o.isBufferLength(r,32,h.EC_PRIVATE_KEY_LENGTH_INVALID),e.ecdh(t,r)},ecdhUnsafe:function(t,r,i){return o.isBuffer(t,h.EC_PUBLIC_KEY_TYPE_INVALID),o.isBufferLength2(t,33,65,h.EC_PUBLIC_KEY_LENGTH_INVALID),o.isBuffer(r,h.EC_PRIVATE_KEY_TYPE_INVALID),o.isBufferLength(r,32,h.EC_PRIVATE_KEY_LENGTH_INVALID),i=c(i,!0),e.ecdhUnsafe(t,r,i)}}}}],["secp256k1","/lib/assert.js",function(e,t,r,i,s,n){"use strict";var o=Object.prototype.toString;e.isArray=function(e,t){if(!Array.isArray(e))throw TypeError(t)},e.isBoolean=function(e,t){if("[object Boolean]"!==o.call(e))throw TypeError(t)},e.isBuffer=function(e,t){if(null==e||!0!==e._isBuffer)throw TypeError(t)},e.isFunction=function(e,t){if("[object Function]"!==o.call(e))throw TypeError(t)},e.isNumber=function(e,t){if("[object Number]"!==o.call(e))throw TypeError(t)},e.isObject=function(e,t){if("[object Object]"!==o.call(e))throw TypeError(t)},e.isBufferLength=function(e,t,r){if(e.length!==t)throw RangeError(r)},e.isBufferLength2=function(e,t,r,i){if(e.length!==t&&e.length!==r)throw RangeError(i)},e.isLengthGTZero=function(e,t){if(0===e.length)throw RangeError(t)},e.isNumberInInterval=function(e,t,r,i){if(e<=t||e>=r)throw RangeError(i)}}],["secp256k1","/lib/der.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(425,r).Buffer,a=__browser_require__(429,r),h=o.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),c=o.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e.privateKeyExport=function(e,t,r){var i=o.from(r?h:c);return e.copy(i,r?8:9),t.copy(i,r?181:214),i},e.privateKeyImport=function(e){var t=e.length,r=0;if(!(t<r+1||48!==e[r])&&!(t<(r+=1)+1)&&128&e[r]){var i=127&e[r];if(r+=1,!(i<1||i>2||t<r+i)){var s=e[r+i-1]|(i>1?e[r+i-2]<<8:0);if(!(t<(r+=i)+s||t<r+3||2!==e[r]||1!==e[r+1]||1!==e[r+2]||t<(r+=3)+2||4!==e[r]||e[r+1]>32||t<r+2+e[r+1]))return e.slice(r+2,r+2+e[r+1])}}},e.signatureExport=function(e){for(var t=o.concat([o.from([0]),e.r]),r=33,i=0;r>1&&0===t[i]&&!(128&t[i+1]);--r,++i);for(var s=o.concat([o.from([0]),e.s]),n=33,h=0;n>1&&0===s[h]&&!(128&s[h+1]);--n,++h);return a.encode(t.slice(i),s.slice(h))},e.signatureImport=function(e){var t=o.alloc(32,0),r=o.alloc(32,0);try{var i=a.decode(e);if(33===i.r.length&&0===i.r[0]&&(i.r=i.r.slice(1)),i.r.length>32)throw new Error("R length is too long");if(33===i.s.length&&0===i.s[0]&&(i.s=i.s.slice(1)),i.s.length>32)throw new Error("S length is too long")}catch(e){return}return i.r.copy(t,32-i.r.length),i.s.copy(r,32-i.s.length),{r:t,s:r}},e.signatureImportLax=function(e){var t=o.alloc(32,0),r=o.alloc(32,0),i=e.length,s=0;if(48===e[s++]){var n=e[s++];if(!(128&n&&(s+=n-128)>i)&&2===e[s++]){var a=e[s++];if(128&a){if(s+(n=a-128)>i)return;for(;n>0&&0===e[s];s+=1,n-=1);for(a=0;n>0;s+=1,n-=1)a=(a<<8)+e[s]}if(!(a>i-s)){var h=s;if(s+=a,2===e[s++]){var c=e[s++];if(128&c){if(s+(n=c-128)>i)return;for(;n>0&&0===e[s];s+=1,n-=1);for(c=0;n>0;s+=1,n-=1)c=(c<<8)+e[s]}if(!(c>i-s)){var u=s;for(s+=c;a>0&&0===e[h];a-=1,h+=1);if(!(a>32)){var f=e.slice(h,h+a);for(f.copy(t,32-f.length);c>0&&0===e[u];c-=1,u+=1);if(!(c>32)){var l=e.slice(u,u+c);return l.copy(r,32-l.length),{r:t,s:r}}}}}}}}}}],["secp256k1","/lib/messages.json",function(e,t,r,i,s,n){r.exports={COMPRESSED_TYPE_INVALID:"compressed should be a boolean",EC_PRIVATE_KEY_TYPE_INVALID:"private key should be a Buffer",EC_PRIVATE_KEY_LENGTH_INVALID:"private key length is invalid",EC_PRIVATE_KEY_RANGE_INVALID:"private key range is invalid",EC_PRIVATE_KEY_TWEAK_ADD_FAIL:"tweak out of range or resulting private key is invalid",EC_PRIVATE_KEY_TWEAK_MUL_FAIL:"tweak out of range",EC_PRIVATE_KEY_EXPORT_DER_FAIL:"couldn't export to DER format",EC_PRIVATE_KEY_IMPORT_DER_FAIL:"couldn't import from DER format",EC_PUBLIC_KEYS_TYPE_INVALID:"public keys should be an Array",EC_PUBLIC_KEYS_LENGTH_INVALID:"public keys Array should have at least 1 element",EC_PUBLIC_KEY_TYPE_INVALID:"public key should be a Buffer",EC_PUBLIC_KEY_LENGTH_INVALID:"public key length is invalid",EC_PUBLIC_KEY_PARSE_FAIL:"the public key could not be parsed or is invalid",EC_PUBLIC_KEY_CREATE_FAIL:"private was invalid, try again",EC_PUBLIC_KEY_TWEAK_ADD_FAIL:"tweak out of range or resulting public key is invalid",EC_PUBLIC_KEY_TWEAK_MUL_FAIL:"tweak out of range",EC_PUBLIC_KEY_COMBINE_FAIL:"the sum of the public keys is not valid",ECDH_FAIL:"scalar was invalid (zero or overflow)",ECDSA_SIGNATURE_TYPE_INVALID:"signature should be a Buffer",ECDSA_SIGNATURE_LENGTH_INVALID:"signature length is invalid",ECDSA_SIGNATURE_PARSE_FAIL:"couldn't parse signature",ECDSA_SIGNATURE_PARSE_DER_FAIL:"couldn't parse DER signature",ECDSA_SIGNATURE_SERIALIZE_DER_FAIL:"couldn't serialize signature to DER format",ECDSA_SIGN_FAIL:"nonce generation function failed or private key is invalid",ECDSA_RECOVER_FAIL:"couldn't recover public key from signature",MSG32_TYPE_INVALID:"message should be a Buffer",MSG32_LENGTH_INVALID:"message length is invalid",OPTIONS_TYPE_INVALID:"options should be an Object",OPTIONS_DATA_TYPE_INVALID:"options.data should be a Buffer",OPTIONS_DATA_LENGTH_INVALID:"options.data length is invalid",OPTIONS_NONCEFN_TYPE_INVALID:"options.noncefn should be a Function",RECOVERY_ID_TYPE_INVALID:"recovery should be a Number",RECOVERY_ID_VALUE_INVALID:"recovery should have value between -1 and 4",TWEAK_TYPE_INVALID:"tweak should be a Buffer",TWEAK_LENGTH_INVALID:"tweak length is invalid"}}],["secp256k1","/lib/elliptic/index.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(425,r).Buffer,a=__browser_require__(469,r),h=__browser_require__(521,r),c=__browser_require__(523,r).ec,u=__browser_require__(519,r),f=new c("secp256k1"),l=f.curve;function d(e){var t=e[0];switch(t){case 2:case 3:return 33!==e.length?null:function(e,t){var r=new h(t);if(r.cmp(l.p)>=0)return null;var i=(r=r.toRed(l.red)).redSqr().redIMul(r).redIAdd(l.b).redSqrt();return 3===e!==i.isOdd()&&(i=i.redNeg()),f.keyPair({pub:{x:r,y:i}})}(t,e.slice(1,33));case 4:case 6:case 7:return 65!==e.length?null:function(e,t,r){var i=new h(t),s=new h(r);if(i.cmp(l.p)>=0||s.cmp(l.p)>=0)return null;if(i=i.toRed(l.red),s=s.toRed(l.red),(6===e||7===e)&&s.isOdd()!==(7===e))return null;var n=i.redSqr().redIMul(i);return s.redSqr().redISub(n.redIAdd(l.b)).isZero()?f.keyPair({pub:{x:i,y:s}}):null}(t,e.slice(1,33),e.slice(33,65));default:return null}}e.privateKeyVerify=function(e){var t=new h(e);return t.cmp(l.n)<0&&!t.isZero()},e.privateKeyExport=function(e,t){var r=new h(e);if(r.cmp(l.n)>=0||r.isZero())throw new Error(u.EC_PRIVATE_KEY_EXPORT_DER_FAIL);return o.from(f.keyFromPrivate(e).getPublic(t,!0))},e.privateKeyNegate=function(e){var t=new h(e);return t.isZero()?o.alloc(32):l.n.sub(t).umod(l.n).toArrayLike(o,"be",32)},e.privateKeyModInverse=function(e){var t=new h(e);if(t.cmp(l.n)>=0||t.isZero())throw new Error(u.EC_PRIVATE_KEY_RANGE_INVALID);return t.invm(l.n).toArrayLike(o,"be",32)},e.privateKeyTweakAdd=function(e,t){var r=new h(t);if(r.cmp(l.n)>=0)throw new Error(u.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);if(r.iadd(new h(e)),r.cmp(l.n)>=0&&r.isub(l.n),r.isZero())throw new Error(u.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);return r.toArrayLike(o,"be",32)},e.privateKeyTweakMul=function(e,t){var r=new h(t);if(r.cmp(l.n)>=0||r.isZero())throw new Error(u.EC_PRIVATE_KEY_TWEAK_MUL_FAIL);return r.imul(new h(e)),r.cmp(l.n)&&(r=r.umod(l.n)),r.toArrayLike(o,"be",32)},e.publicKeyCreate=function(e,t){var r=new h(e);if(r.cmp(l.n)>=0||r.isZero())throw new Error(u.EC_PUBLIC_KEY_CREATE_FAIL);return o.from(f.keyFromPrivate(e).getPublic(t,!0))},e.publicKeyConvert=function(e,t){var r=d(e);if(null===r)throw new Error(u.EC_PUBLIC_KEY_PARSE_FAIL);return o.from(r.getPublic(t,!0))},e.publicKeyVerify=function(e){return null!==d(e)},e.publicKeyTweakAdd=function(e,t,r){var i=d(e);if(null===i)throw new Error(u.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new h(t)).cmp(l.n)>=0)throw new Error(u.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);var s=l.g.mul(t).add(i.pub);if(s.isInfinity())throw new Error(u.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);return o.from(s.encode(!0,r))},e.publicKeyTweakMul=function(e,t,r){var i=d(e);if(null===i)throw new Error(u.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new h(t)).cmp(l.n)>=0||t.isZero())throw new Error(u.EC_PUBLIC_KEY_TWEAK_MUL_FAIL);return o.from(i.pub.mul(t).encode(!0,r))},e.publicKeyCombine=function(e,t){for(var r=new Array(e.length),i=0;i<e.length;++i)if(r[i]=d(e[i]),null===r[i])throw new Error(u.EC_PUBLIC_KEY_PARSE_FAIL);for(var s=r[0].pub,n=1;n<r.length;++n)s=s.add(r[n].pub);if(s.isInfinity())throw new Error(u.EC_PUBLIC_KEY_COMBINE_FAIL);return o.from(s.encode(!0,t))},e.signatureNormalize=function(e){var t=new h(e.slice(0,32)),r=new h(e.slice(32,64));if(t.cmp(l.n)>=0||r.cmp(l.n)>=0)throw new Error(u.ECDSA_SIGNATURE_PARSE_FAIL);var i=o.from(e);return 1===r.cmp(f.nh)&&l.n.sub(r).toArrayLike(o,"be",32).copy(i,32),i},e.signatureExport=function(e){var t=e.slice(0,32),r=e.slice(32,64);if(new h(t).cmp(l.n)>=0||new h(r).cmp(l.n)>=0)throw new Error(u.ECDSA_SIGNATURE_PARSE_FAIL);return{r:t,s:r}},e.signatureImport=function(e){var t=new h(e.r);t.cmp(l.n)>=0&&(t=new h(0));var r=new h(e.s);return r.cmp(l.n)>=0&&(r=new h(0)),o.concat([t.toArrayLike(o,"be",32),r.toArrayLike(o,"be",32)])},e.sign=function(e,t,r,i){if("function"==typeof r){var s=r;r=function(r){var n=s(e,t,null,i,r);if(null==n||!0!==n._isBuffer||32!==n.length)throw new Error(u.ECDSA_SIGN_FAIL);return new h(n)}}var n=new h(t);if(n.cmp(l.n)>=0||n.isZero())throw new Error(u.ECDSA_SIGN_FAIL);var a=f.sign(e,t,{canonical:!0,k:r,pers:i});return{signature:o.concat([a.r.toArrayLike(o,"be",32),a.s.toArrayLike(o,"be",32)]),recovery:a.recoveryParam}},e.verify=function(e,t,r){var i={r:t.slice(0,32),s:t.slice(32,64)},s=new h(i.r),n=new h(i.s);if(s.cmp(l.n)>=0||n.cmp(l.n)>=0)throw new Error(u.ECDSA_SIGNATURE_PARSE_FAIL);if(1===n.cmp(f.nh)||s.isZero()||n.isZero())return!1;var o=d(r);if(null===o)throw new Error(u.EC_PUBLIC_KEY_PARSE_FAIL);return f.verify(e,i,{x:o.pub.x,y:o.pub.y})},e.recover=function(e,t,r,i){var s={r:t.slice(0,32),s:t.slice(32,64)},n=new h(s.r),a=new h(s.s);if(n.cmp(l.n)>=0||a.cmp(l.n)>=0)throw new Error(u.ECDSA_SIGNATURE_PARSE_FAIL);try{if(n.isZero()||a.isZero())throw new Error;var c=f.recoverPubKey(e,s,r);return o.from(c.encode(!0,i))}catch(e){throw new Error(u.ECDSA_RECOVER_FAIL)}},e.ecdh=function(t,r){var i=e.ecdhUnsafe(t,r,!0);return a("sha256").update(i).digest()},e.ecdhUnsafe=function(e,t,r){var i=d(e);if(null===i)throw new Error(u.EC_PUBLIC_KEY_PARSE_FAIL);var s=new h(t);if(s.cmp(l.n)>=0||s.isZero())throw new Error(u.ECDH_FAIL);return o.from(i.pub.mul(s).encode(!0,r))}}],["bn.js","/lib/bn.js",function(e,t,r,i,s,n){!function(e,t){"use strict";function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function s(e,t,r){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var n;"object"==typeof e?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{n=__browser_require__(522,e).Buffer}catch(e){}function o(e,t,r){for(var i=0,s=Math.min(e.length,r),n=t;n<s;n++){var o=e.charCodeAt(n)-48;i<<=4,i|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return i}function a(e,t,r,i){for(var s=0,n=Math.min(e.length,r),o=t;o<n;o++){var a=e.charCodeAt(o)-48;s*=i,s+=a>=49?a-49+10:a>=17?a-17+10:a}return s}s.isBN=function(e){return e instanceof s||null!==e&&"object"==typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return e.cmp(t)<0?e:t},s.prototype._init=function(e,t,i){if("number"==typeof e)return this._initNumber(e,t,i);if("object"==typeof e)return this._initArray(e,t,i);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var s=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&s++,16===t?this._parseHex(e,s):this._parseBase(e,t,s),"-"===e[0]&&(this.negative=1),this.strip(),"le"===i&&this._initArray(this.toArray(),t,i)},s.prototype._initNumber=function(e,t,i){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),t,i)},s.prototype._initArray=function(e,t,i){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var s=0;s<this.length;s++)this.words[s]=0;var n,o,a=0;if("be"===i)for(s=e.length-1,n=0;s>=0;s-=3)o=e[s]|e[s-1]<<8|e[s-2]<<16,this.words[n]|=o<<a&67108863,this.words[n+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,n++);else if("le"===i)for(s=0,n=0;s<e.length;s+=3)o=e[s]|e[s+1]<<8|e[s+2]<<16,this.words[n]|=o<<a&67108863,this.words[n+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,n++);return this.strip()},s.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,s,n=0;for(r=e.length-6,i=0;r>=t;r-=6)s=o(e,r,r+6),this.words[i]|=s<<n&67108863,this.words[i+1]|=s>>>26-n&4194303,(n+=24)>=26&&(n-=26,i++);r+6!==t&&(s=o(e,t,r+6),this.words[i]|=s<<n&67108863,this.words[i+1]|=s>>>26-n&4194303),this.strip()},s.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var i=0,s=1;s<=67108863;s*=t)i++;i--,s=s/t|0;for(var n=e.length-r,o=n%i,h=Math.min(n,n-o)+r,c=0,u=r;u<h;u+=i)c=a(e,u,u+i,t),this.imuln(s),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==o){var f=1;for(c=a(e,u,e.length,t),u=0;u<o;u++)f*=t;this.imuln(f),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}},s.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],u=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(e,t,r){r.negative=t.negative^e.negative;var i=e.length+t.length|0;r.length=i,i=i-1|0;var s=0|e.words[0],n=0|t.words[0],o=s*n,a=67108863&o,h=o/67108864|0;r.words[0]=a;for(var c=1;c<i;c++){for(var u=h>>>26,f=67108863&h,l=Math.min(c,t.length-1),d=Math.max(0,c-e.length+1);d<=l;d++){var p=c-d|0;u+=(o=(s=0|e.words[p])*(n=0|t.words[d])+f)/67108864|0,f=67108863&o}r.words[c]=0|f,h=0|u}return 0!==h?r.words[c]=0|h:r.length--,r.strip()}s.prototype.toString=function(e,t){var i;if(e=e||10,t=0|t||1,16===e||"hex"===e){i="";for(var s=0,n=0,o=0;o<this.length;o++){var a=this.words[o],f=(16777215&(a<<s|n)).toString(16);i=0!==(n=a>>>24-s&16777215)||o!==this.length-1?h[6-f.length]+f+i:f+i,(s+=2)>=26&&(s-=26,o--)}for(0!==n&&(i=n.toString(16)+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(e===(0|e)&&e>=2&&e<=36){var l=c[e],d=u[e];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var b=p.modn(d).toString(e);i=(p=p.idivn(d)).isZero()?b+i:h[l-b.length]+b+i}for(this.isZero()&&(i="0"+i);i.length%t!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(e,t){return r(void 0!==n),this.toArrayLike(n,e,t)},s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},s.prototype.toArrayLike=function(e,t,i){var s=this.byteLength(),n=i||Math.max(1,s);r(s<=n,"byte array longer than desired length"),r(n>0,"Requested array length <= 0"),this.strip();var o,a,h="le"===t,c=new e(n),u=this.clone();if(h){for(a=0;!u.isZero();a++)o=u.andln(255),u.iushrn(8),c[a]=o;for(;a<n;a++)c[a]=0}else{for(a=0;a<n-s;a++)c[a]=0;for(a=0;!u.isZero();a++)o=u.andln(255),u.iushrn(8),c[n-a-1]=o}return c},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},s.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},s.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var i=0;i<r.length;i++)this.words[i]=t.words[i]^r.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this.strip()},s.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),i=e%26;this._expand(t),i>0&&t--;for(var s=0;s<t;s++)this.words[s]=67108863&~this.words[s];return i>0&&(this.words[s]=~this.words[s]&67108863>>26-i),this.strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var i=e/26|0,s=e%26;return this._expand(i+1),this.words[i]=t?this.words[i]|1<<s:this.words[i]&~(1<<s),this.strip()},s.prototype.iadd=function(e){var t,r,i;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,i=e):(r=e,i=this);for(var s=0,n=0;n<i.length;n++)t=(0|r.words[n])+(0|i.words[n])+s,this.words[n]=67108863&t,s=t>>>26;for(;0!==s&&n<r.length;n++)t=(0|r.words[n])+s,this.words[n]=67108863&t,s=t>>>26;if(this.length=r.length,0!==s)this.words[this.length]=s,this.length++;else if(r!==this)for(;n<r.length;n++)this.words[n]=r.words[n];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,i,s=this.cmp(e);if(0===s)return this.negative=0,this.length=1,this.words[0]=0,this;s>0?(r=this,i=e):(r=e,i=this);for(var n=0,o=0;o<i.length;o++)n=(t=(0|r.words[o])-(0|i.words[o])+n)>>26,this.words[o]=67108863&t;for(;0!==n&&o<r.length;o++)n=(t=(0|r.words[o])+n)>>26,this.words[o]=67108863&t;if(0===n&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var l=function(e,t,r){var i,s,n,o=e.words,a=t.words,h=r.words,c=0,u=0|o[0],f=8191&u,l=u>>>13,d=0|o[1],p=8191&d,b=d>>>13,g=0|o[2],m=8191&g,_=g>>>13,w=0|o[3],y=8191&w,v=w>>>13,E=0|o[4],S=8191&E,I=E>>>13,k=0|o[5],A=8191&k,O=k>>>13,x=0|o[6],R=8191&x,M=x>>>13,P=0|o[7],B=8191&P,N=P>>>13,T=0|o[8],C=8191&T,q=T>>>13,j=0|o[9],D=8191&j,U=j>>>13,L=0|a[0],z=8191&L,F=L>>>13,H=0|a[1],V=8191&H,K=H>>>13,W=0|a[2],G=8191&W,Y=W>>>13,X=0|a[3],J=8191&X,Q=X>>>13,Z=0|a[4],$=8191&Z,ee=Z>>>13,te=0|a[5],re=8191&te,ie=te>>>13,se=0|a[6],ne=8191&se,oe=se>>>13,ae=0|a[7],he=8191&ae,ce=ae>>>13,ue=0|a[8],fe=8191&ue,le=ue>>>13,de=0|a[9],pe=8191&de,be=de>>>13;r.negative=e.negative^t.negative,r.length=19;var ge=(c+(i=Math.imul(f,z))|0)+((8191&(s=(s=Math.imul(f,F))+Math.imul(l,z)|0))<<13)|0;c=((n=Math.imul(l,F))+(s>>>13)|0)+(ge>>>26)|0,ge&=67108863,i=Math.imul(p,z),s=(s=Math.imul(p,F))+Math.imul(b,z)|0,n=Math.imul(b,F);var me=(c+(i=i+Math.imul(f,V)|0)|0)+((8191&(s=(s=s+Math.imul(f,K)|0)+Math.imul(l,V)|0))<<13)|0;c=((n=n+Math.imul(l,K)|0)+(s>>>13)|0)+(me>>>26)|0,me&=67108863,i=Math.imul(m,z),s=(s=Math.imul(m,F))+Math.imul(_,z)|0,n=Math.imul(_,F),i=i+Math.imul(p,V)|0,s=(s=s+Math.imul(p,K)|0)+Math.imul(b,V)|0,n=n+Math.imul(b,K)|0;var _e=(c+(i=i+Math.imul(f,G)|0)|0)+((8191&(s=(s=s+Math.imul(f,Y)|0)+Math.imul(l,G)|0))<<13)|0;c=((n=n+Math.imul(l,Y)|0)+(s>>>13)|0)+(_e>>>26)|0,_e&=67108863,i=Math.imul(y,z),s=(s=Math.imul(y,F))+Math.imul(v,z)|0,n=Math.imul(v,F),i=i+Math.imul(m,V)|0,s=(s=s+Math.imul(m,K)|0)+Math.imul(_,V)|0,n=n+Math.imul(_,K)|0,i=i+Math.imul(p,G)|0,s=(s=s+Math.imul(p,Y)|0)+Math.imul(b,G)|0,n=n+Math.imul(b,Y)|0;var we=(c+(i=i+Math.imul(f,J)|0)|0)+((8191&(s=(s=s+Math.imul(f,Q)|0)+Math.imul(l,J)|0))<<13)|0;c=((n=n+Math.imul(l,Q)|0)+(s>>>13)|0)+(we>>>26)|0,we&=67108863,i=Math.imul(S,z),s=(s=Math.imul(S,F))+Math.imul(I,z)|0,n=Math.imul(I,F),i=i+Math.imul(y,V)|0,s=(s=s+Math.imul(y,K)|0)+Math.imul(v,V)|0,n=n+Math.imul(v,K)|0,i=i+Math.imul(m,G)|0,s=(s=s+Math.imul(m,Y)|0)+Math.imul(_,G)|0,n=n+Math.imul(_,Y)|0,i=i+Math.imul(p,J)|0,s=(s=s+Math.imul(p,Q)|0)+Math.imul(b,J)|0,n=n+Math.imul(b,Q)|0;var ye=(c+(i=i+Math.imul(f,$)|0)|0)+((8191&(s=(s=s+Math.imul(f,ee)|0)+Math.imul(l,$)|0))<<13)|0;c=((n=n+Math.imul(l,ee)|0)+(s>>>13)|0)+(ye>>>26)|0,ye&=67108863,i=Math.imul(A,z),s=(s=Math.imul(A,F))+Math.imul(O,z)|0,n=Math.imul(O,F),i=i+Math.imul(S,V)|0,s=(s=s+Math.imul(S,K)|0)+Math.imul(I,V)|0,n=n+Math.imul(I,K)|0,i=i+Math.imul(y,G)|0,s=(s=s+Math.imul(y,Y)|0)+Math.imul(v,G)|0,n=n+Math.imul(v,Y)|0,i=i+Math.imul(m,J)|0,s=(s=s+Math.imul(m,Q)|0)+Math.imul(_,J)|0,n=n+Math.imul(_,Q)|0,i=i+Math.imul(p,$)|0,s=(s=s+Math.imul(p,ee)|0)+Math.imul(b,$)|0,n=n+Math.imul(b,ee)|0;var ve=(c+(i=i+Math.imul(f,re)|0)|0)+((8191&(s=(s=s+Math.imul(f,ie)|0)+Math.imul(l,re)|0))<<13)|0;c=((n=n+Math.imul(l,ie)|0)+(s>>>13)|0)+(ve>>>26)|0,ve&=67108863,i=Math.imul(R,z),s=(s=Math.imul(R,F))+Math.imul(M,z)|0,n=Math.imul(M,F),i=i+Math.imul(A,V)|0,s=(s=s+Math.imul(A,K)|0)+Math.imul(O,V)|0,n=n+Math.imul(O,K)|0,i=i+Math.imul(S,G)|0,s=(s=s+Math.imul(S,Y)|0)+Math.imul(I,G)|0,n=n+Math.imul(I,Y)|0,i=i+Math.imul(y,J)|0,s=(s=s+Math.imul(y,Q)|0)+Math.imul(v,J)|0,n=n+Math.imul(v,Q)|0,i=i+Math.imul(m,$)|0,s=(s=s+Math.imul(m,ee)|0)+Math.imul(_,$)|0,n=n+Math.imul(_,ee)|0,i=i+Math.imul(p,re)|0,s=(s=s+Math.imul(p,ie)|0)+Math.imul(b,re)|0,n=n+Math.imul(b,ie)|0;var Ee=(c+(i=i+Math.imul(f,ne)|0)|0)+((8191&(s=(s=s+Math.imul(f,oe)|0)+Math.imul(l,ne)|0))<<13)|0;c=((n=n+Math.imul(l,oe)|0)+(s>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(B,z),s=(s=Math.imul(B,F))+Math.imul(N,z)|0,n=Math.imul(N,F),i=i+Math.imul(R,V)|0,s=(s=s+Math.imul(R,K)|0)+Math.imul(M,V)|0,n=n+Math.imul(M,K)|0,i=i+Math.imul(A,G)|0,s=(s=s+Math.imul(A,Y)|0)+Math.imul(O,G)|0,n=n+Math.imul(O,Y)|0,i=i+Math.imul(S,J)|0,s=(s=s+Math.imul(S,Q)|0)+Math.imul(I,J)|0,n=n+Math.imul(I,Q)|0,i=i+Math.imul(y,$)|0,s=(s=s+Math.imul(y,ee)|0)+Math.imul(v,$)|0,n=n+Math.imul(v,ee)|0,i=i+Math.imul(m,re)|0,s=(s=s+Math.imul(m,ie)|0)+Math.imul(_,re)|0,n=n+Math.imul(_,ie)|0,i=i+Math.imul(p,ne)|0,s=(s=s+Math.imul(p,oe)|0)+Math.imul(b,ne)|0,n=n+Math.imul(b,oe)|0;var Se=(c+(i=i+Math.imul(f,he)|0)|0)+((8191&(s=(s=s+Math.imul(f,ce)|0)+Math.imul(l,he)|0))<<13)|0;c=((n=n+Math.imul(l,ce)|0)+(s>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(C,z),s=(s=Math.imul(C,F))+Math.imul(q,z)|0,n=Math.imul(q,F),i=i+Math.imul(B,V)|0,s=(s=s+Math.imul(B,K)|0)+Math.imul(N,V)|0,n=n+Math.imul(N,K)|0,i=i+Math.imul(R,G)|0,s=(s=s+Math.imul(R,Y)|0)+Math.imul(M,G)|0,n=n+Math.imul(M,Y)|0,i=i+Math.imul(A,J)|0,s=(s=s+Math.imul(A,Q)|0)+Math.imul(O,J)|0,n=n+Math.imul(O,Q)|0,i=i+Math.imul(S,$)|0,s=(s=s+Math.imul(S,ee)|0)+Math.imul(I,$)|0,n=n+Math.imul(I,ee)|0,i=i+Math.imul(y,re)|0,s=(s=s+Math.imul(y,ie)|0)+Math.imul(v,re)|0,n=n+Math.imul(v,ie)|0,i=i+Math.imul(m,ne)|0,s=(s=s+Math.imul(m,oe)|0)+Math.imul(_,ne)|0,n=n+Math.imul(_,oe)|0,i=i+Math.imul(p,he)|0,s=(s=s+Math.imul(p,ce)|0)+Math.imul(b,he)|0,n=n+Math.imul(b,ce)|0;var Ie=(c+(i=i+Math.imul(f,fe)|0)|0)+((8191&(s=(s=s+Math.imul(f,le)|0)+Math.imul(l,fe)|0))<<13)|0;c=((n=n+Math.imul(l,le)|0)+(s>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(D,z),s=(s=Math.imul(D,F))+Math.imul(U,z)|0,n=Math.imul(U,F),i=i+Math.imul(C,V)|0,s=(s=s+Math.imul(C,K)|0)+Math.imul(q,V)|0,n=n+Math.imul(q,K)|0,i=i+Math.imul(B,G)|0,s=(s=s+Math.imul(B,Y)|0)+Math.imul(N,G)|0,n=n+Math.imul(N,Y)|0,i=i+Math.imul(R,J)|0,s=(s=s+Math.imul(R,Q)|0)+Math.imul(M,J)|0,n=n+Math.imul(M,Q)|0,i=i+Math.imul(A,$)|0,s=(s=s+Math.imul(A,ee)|0)+Math.imul(O,$)|0,n=n+Math.imul(O,ee)|0,i=i+Math.imul(S,re)|0,s=(s=s+Math.imul(S,ie)|0)+Math.imul(I,re)|0,n=n+Math.imul(I,ie)|0,i=i+Math.imul(y,ne)|0,s=(s=s+Math.imul(y,oe)|0)+Math.imul(v,ne)|0,n=n+Math.imul(v,oe)|0,i=i+Math.imul(m,he)|0,s=(s=s+Math.imul(m,ce)|0)+Math.imul(_,he)|0,n=n+Math.imul(_,ce)|0,i=i+Math.imul(p,fe)|0,s=(s=s+Math.imul(p,le)|0)+Math.imul(b,fe)|0,n=n+Math.imul(b,le)|0;var ke=(c+(i=i+Math.imul(f,pe)|0)|0)+((8191&(s=(s=s+Math.imul(f,be)|0)+Math.imul(l,pe)|0))<<13)|0;c=((n=n+Math.imul(l,be)|0)+(s>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(D,V),s=(s=Math.imul(D,K))+Math.imul(U,V)|0,n=Math.imul(U,K),i=i+Math.imul(C,G)|0,s=(s=s+Math.imul(C,Y)|0)+Math.imul(q,G)|0,n=n+Math.imul(q,Y)|0,i=i+Math.imul(B,J)|0,s=(s=s+Math.imul(B,Q)|0)+Math.imul(N,J)|0,n=n+Math.imul(N,Q)|0,i=i+Math.imul(R,$)|0,s=(s=s+Math.imul(R,ee)|0)+Math.imul(M,$)|0,n=n+Math.imul(M,ee)|0,i=i+Math.imul(A,re)|0,s=(s=s+Math.imul(A,ie)|0)+Math.imul(O,re)|0,n=n+Math.imul(O,ie)|0,i=i+Math.imul(S,ne)|0,s=(s=s+Math.imul(S,oe)|0)+Math.imul(I,ne)|0,n=n+Math.imul(I,oe)|0,i=i+Math.imul(y,he)|0,s=(s=s+Math.imul(y,ce)|0)+Math.imul(v,he)|0,n=n+Math.imul(v,ce)|0,i=i+Math.imul(m,fe)|0,s=(s=s+Math.imul(m,le)|0)+Math.imul(_,fe)|0,n=n+Math.imul(_,le)|0;var Ae=(c+(i=i+Math.imul(p,pe)|0)|0)+((8191&(s=(s=s+Math.imul(p,be)|0)+Math.imul(b,pe)|0))<<13)|0;c=((n=n+Math.imul(b,be)|0)+(s>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(D,G),s=(s=Math.imul(D,Y))+Math.imul(U,G)|0,n=Math.imul(U,Y),i=i+Math.imul(C,J)|0,s=(s=s+Math.imul(C,Q)|0)+Math.imul(q,J)|0,n=n+Math.imul(q,Q)|0,i=i+Math.imul(B,$)|0,s=(s=s+Math.imul(B,ee)|0)+Math.imul(N,$)|0,n=n+Math.imul(N,ee)|0,i=i+Math.imul(R,re)|0,s=(s=s+Math.imul(R,ie)|0)+Math.imul(M,re)|0,n=n+Math.imul(M,ie)|0,i=i+Math.imul(A,ne)|0,s=(s=s+Math.imul(A,oe)|0)+Math.imul(O,ne)|0,n=n+Math.imul(O,oe)|0,i=i+Math.imul(S,he)|0,s=(s=s+Math.imul(S,ce)|0)+Math.imul(I,he)|0,n=n+Math.imul(I,ce)|0,i=i+Math.imul(y,fe)|0,s=(s=s+Math.imul(y,le)|0)+Math.imul(v,fe)|0,n=n+Math.imul(v,le)|0;var Oe=(c+(i=i+Math.imul(m,pe)|0)|0)+((8191&(s=(s=s+Math.imul(m,be)|0)+Math.imul(_,pe)|0))<<13)|0;c=((n=n+Math.imul(_,be)|0)+(s>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,i=Math.imul(D,J),s=(s=Math.imul(D,Q))+Math.imul(U,J)|0,n=Math.imul(U,Q),i=i+Math.imul(C,$)|0,s=(s=s+Math.imul(C,ee)|0)+Math.imul(q,$)|0,n=n+Math.imul(q,ee)|0,i=i+Math.imul(B,re)|0,s=(s=s+Math.imul(B,ie)|0)+Math.imul(N,re)|0,n=n+Math.imul(N,ie)|0,i=i+Math.imul(R,ne)|0,s=(s=s+Math.imul(R,oe)|0)+Math.imul(M,ne)|0,n=n+Math.imul(M,oe)|0,i=i+Math.imul(A,he)|0,s=(s=s+Math.imul(A,ce)|0)+Math.imul(O,he)|0,n=n+Math.imul(O,ce)|0,i=i+Math.imul(S,fe)|0,s=(s=s+Math.imul(S,le)|0)+Math.imul(I,fe)|0,n=n+Math.imul(I,le)|0;var xe=(c+(i=i+Math.imul(y,pe)|0)|0)+((8191&(s=(s=s+Math.imul(y,be)|0)+Math.imul(v,pe)|0))<<13)|0;c=((n=n+Math.imul(v,be)|0)+(s>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(D,$),s=(s=Math.imul(D,ee))+Math.imul(U,$)|0,n=Math.imul(U,ee),i=i+Math.imul(C,re)|0,s=(s=s+Math.imul(C,ie)|0)+Math.imul(q,re)|0,n=n+Math.imul(q,ie)|0,i=i+Math.imul(B,ne)|0,s=(s=s+Math.imul(B,oe)|0)+Math.imul(N,ne)|0,n=n+Math.imul(N,oe)|0,i=i+Math.imul(R,he)|0,s=(s=s+Math.imul(R,ce)|0)+Math.imul(M,he)|0,n=n+Math.imul(M,ce)|0,i=i+Math.imul(A,fe)|0,s=(s=s+Math.imul(A,le)|0)+Math.imul(O,fe)|0,n=n+Math.imul(O,le)|0;var Re=(c+(i=i+Math.imul(S,pe)|0)|0)+((8191&(s=(s=s+Math.imul(S,be)|0)+Math.imul(I,pe)|0))<<13)|0;c=((n=n+Math.imul(I,be)|0)+(s>>>13)|0)+(Re>>>26)|0,Re&=67108863,i=Math.imul(D,re),s=(s=Math.imul(D,ie))+Math.imul(U,re)|0,n=Math.imul(U,ie),i=i+Math.imul(C,ne)|0,s=(s=s+Math.imul(C,oe)|0)+Math.imul(q,ne)|0,n=n+Math.imul(q,oe)|0,i=i+Math.imul(B,he)|0,s=(s=s+Math.imul(B,ce)|0)+Math.imul(N,he)|0,n=n+Math.imul(N,ce)|0,i=i+Math.imul(R,fe)|0,s=(s=s+Math.imul(R,le)|0)+Math.imul(M,fe)|0,n=n+Math.imul(M,le)|0;var Me=(c+(i=i+Math.imul(A,pe)|0)|0)+((8191&(s=(s=s+Math.imul(A,be)|0)+Math.imul(O,pe)|0))<<13)|0;c=((n=n+Math.imul(O,be)|0)+(s>>>13)|0)+(Me>>>26)|0,Me&=67108863,i=Math.imul(D,ne),s=(s=Math.imul(D,oe))+Math.imul(U,ne)|0,n=Math.imul(U,oe),i=i+Math.imul(C,he)|0,s=(s=s+Math.imul(C,ce)|0)+Math.imul(q,he)|0,n=n+Math.imul(q,ce)|0,i=i+Math.imul(B,fe)|0,s=(s=s+Math.imul(B,le)|0)+Math.imul(N,fe)|0,n=n+Math.imul(N,le)|0;var Pe=(c+(i=i+Math.imul(R,pe)|0)|0)+((8191&(s=(s=s+Math.imul(R,be)|0)+Math.imul(M,pe)|0))<<13)|0;c=((n=n+Math.imul(M,be)|0)+(s>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,i=Math.imul(D,he),s=(s=Math.imul(D,ce))+Math.imul(U,he)|0,n=Math.imul(U,ce),i=i+Math.imul(C,fe)|0,s=(s=s+Math.imul(C,le)|0)+Math.imul(q,fe)|0,n=n+Math.imul(q,le)|0;var Be=(c+(i=i+Math.imul(B,pe)|0)|0)+((8191&(s=(s=s+Math.imul(B,be)|0)+Math.imul(N,pe)|0))<<13)|0;c=((n=n+Math.imul(N,be)|0)+(s>>>13)|0)+(Be>>>26)|0,Be&=67108863,i=Math.imul(D,fe),s=(s=Math.imul(D,le))+Math.imul(U,fe)|0,n=Math.imul(U,le);var Ne=(c+(i=i+Math.imul(C,pe)|0)|0)+((8191&(s=(s=s+Math.imul(C,be)|0)+Math.imul(q,pe)|0))<<13)|0;c=((n=n+Math.imul(q,be)|0)+(s>>>13)|0)+(Ne>>>26)|0,Ne&=67108863;var Te=(c+(i=Math.imul(D,pe))|0)+((8191&(s=(s=Math.imul(D,be))+Math.imul(U,pe)|0))<<13)|0;return c=((n=Math.imul(U,be))+(s>>>13)|0)+(Te>>>26)|0,Te&=67108863,h[0]=ge,h[1]=me,h[2]=_e,h[3]=we,h[4]=ye,h[5]=ve,h[6]=Ee,h[7]=Se,h[8]=Ie,h[9]=ke,h[10]=Ae,h[11]=Oe,h[12]=xe,h[13]=Re,h[14]=Me,h[15]=Pe,h[16]=Be,h[17]=Ne,h[18]=Te,0!==c&&(h[19]=c,r.length++),r};function d(e,t,r){return(new p).mulp(e,t,r)}function p(e,t){this.x=e,this.y=t}Math.imul||(l=f),s.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?l(this,e,t):r<63?f(this,e,t):r<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var i=0,s=0,n=0;n<r.length-1;n++){var o=s;s=0;for(var a=67108863&i,h=Math.min(n,t.length-1),c=Math.max(0,n-e.length+1);c<=h;c++){var u=n-c,f=(0|e.words[u])*(0|t.words[c]),l=67108863&f;a=67108863&(l=l+a|0),s+=(o=(o=o+(f/67108864|0)|0)+(l>>>26)|0)>>>26,o&=67108863}r.words[n]=a,i=o,o=s}return 0!==i?r.words[n]=i:r.length--,r.strip()}(this,e,t):d(this,e,t)},p.prototype.makeRBT=function(e){for(var t=new Array(e),r=s.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,r,e);return t},p.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var i=0,s=0;s<t;s++)i|=(1&e)<<t-s-1,e>>=1;return i},p.prototype.permute=function(e,t,r,i,s,n){for(var o=0;o<n;o++)i[o]=t[e[o]],s[o]=r[e[o]]},p.prototype.transform=function(e,t,r,i,s,n){this.permute(n,e,t,r,i,s);for(var o=1;o<s;o<<=1)for(var a=o<<1,h=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),u=0;u<s;u+=a)for(var f=h,l=c,d=0;d<o;d++){var p=r[u+d],b=i[u+d],g=r[u+d+o],m=i[u+d+o],_=f*g-l*m;m=f*m+l*g,g=_,r[u+d]=p+g,i[u+d]=b+m,r[u+d+o]=p-g,i[u+d+o]=b-m,d!==a&&(_=h*f-c*l,l=h*l+c*f,f=_)}},p.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),i=1&r,s=0;for(r=r/2|0;r;r>>>=1)s++;return 1<<s+1+i},p.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var i=0;i<r/2;i++){var s=e[i];e[i]=e[r-i-1],e[r-i-1]=s,s=t[i],t[i]=-t[r-i-1],t[r-i-1]=-s}},p.prototype.normalize13b=function(e,t){for(var r=0,i=0;i<t/2;i++){var s=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+r;e[i]=67108863&s,r=s<67108864?0:s/67108864|0}return e},p.prototype.convert13b=function(e,t,i,s){for(var n=0,o=0;o<t;o++)n+=0|e[o],i[2*o]=8191&n,n>>>=13,i[2*o+1]=8191&n,n>>>=13;for(o=2*t;o<s;++o)i[o]=0;r(0===n),r(0==(-8192&n))},p.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},p.prototype.mulp=function(e,t,r){var i=2*this.guessLen13b(e.length,t.length),s=this.makeRBT(i),n=this.stub(i),o=new Array(i),a=new Array(i),h=new Array(i),c=new Array(i),u=new Array(i),f=new Array(i),l=r.words;l.length=i,this.convert13b(e.words,e.length,o,i),this.convert13b(t.words,t.length,c,i),this.transform(o,n,a,h,i,s),this.transform(c,n,u,f,i,s);for(var d=0;d<i;d++){var p=a[d]*u[d]-h[d]*f[d];h[d]=a[d]*f[d]+h[d]*u[d],a[d]=p}return this.conjugate(a,h,i),this.transform(a,h,l,n,i,s),this.conjugate(l,n,i),this.normalize13b(l,i),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),d(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,i=0;i<this.length;i++){var s=(0|this.words[i])*e,n=(67108863&s)+(67108863&t);t>>=26,t+=s/67108864|0,t+=n>>>26,this.words[i]=67108863&n}return 0!==t&&(this.words[i]=t,this.length++),this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var i=r/26|0,s=r%26;t[r]=(e.words[i]&1<<s)>>>s}return t}(e);if(0===t.length)return new s(1);for(var r=this,i=0;i<t.length&&0===t[i];i++,r=r.sqr());if(++i<t.length)for(var n=r.sqr();i<t.length;i++,n=n.sqr())0!==t[i]&&(r=r.mul(n));return r},s.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,i=e%26,s=(e-i)/26,n=67108863>>>26-i<<26-i;if(0!==i){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&n,h=(0|this.words[t])-a<<i;this.words[t]=h|o,o=a>>>26-i}o&&(this.words[t]=o,this.length++)}if(0!==s){for(t=this.length-1;t>=0;t--)this.words[t+s]=this.words[t];for(t=0;t<s;t++)this.words[t]=0;this.length+=s}return this.strip()},s.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,i){var s;r("number"==typeof e&&e>=0),s=t?(t-t%26)/26:0;var n=e%26,o=Math.min((e-n)/26,this.length),a=67108863^67108863>>>n<<n,h=i;if(s-=o,s=Math.max(0,s),h){for(var c=0;c<o;c++)h.words[c]=this.words[c];h.length=o}if(0===o);else if(this.length>o)for(this.length-=o,c=0;c<this.length;c++)this.words[c]=this.words[c+o];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(0!==u||c>=s);c--){var f=0|this.words[c];this.words[c]=u<<26-n|f>>>n,u=f&a}return h&&0!==u&&(h.words[h.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(e,t,i){return r(0===this.negative),this.iushrn(e,t,i)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26,s=1<<t;return!(this.length<=i)&&!!(this.words[i]&s)},s.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,i=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==t&&i++,this.length=Math.min(i,this.length),0!==t){var s=67108863^67108863>>>t<<t;this.words[this.length-1]&=s}return this.strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,i){var s,n,o=e.length+i;this._expand(o);var a=0;for(s=0;s<e.length;s++){n=(0|this.words[s+i])+a;var h=(0|e.words[s])*t;a=((n-=67108863&h)>>26)-(h/67108864|0),this.words[s+i]=67108863&n}for(;s<this.length-i;s++)a=(n=(0|this.words[s+i])+a)>>26,this.words[s+i]=67108863&n;if(0===a)return this.strip();for(r(-1===a),a=0,s=0;s<this.length;s++)a=(n=-(0|this.words[s])+a)>>26,this.words[s]=67108863&n;return this.negative=1,this.strip()},s.prototype._wordDiv=function(e,t){var r=(this.length,e.length),i=this.clone(),n=e,o=0|n.words[n.length-1];0!==(r=26-this._countBits(o))&&(n=n.ushln(r),i.iushln(r),o=0|n.words[n.length-1]);var a,h=i.length-n.length;if("mod"!==t){(a=new s(null)).length=h+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var u=i.clone()._ishlnsubmul(n,1,h);0===u.negative&&(i=u,a&&(a.words[h]=1));for(var f=h-1;f>=0;f--){var l=67108864*(0|i.words[n.length+f])+(0|i.words[n.length+f-1]);for(l=Math.min(l/o|0,67108863),i._ishlnsubmul(n,l,f);0!==i.negative;)l--,i.negative=0,i._ishlnsubmul(n,1,f),i.isZero()||(i.negative^=1);a&&(a.words[f]=l)}return a&&a.strip(),i.strip(),"div"!==t&&0!==r&&i.iushrn(r),{div:a||null,mod:i}},s.prototype.divmod=function(e,t,i){return r(!e.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(n=a.div.neg()),"div"!==t&&(o=a.mod.neg(),i&&0!==o.negative&&o.iadd(e)),{div:n,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(n=a.div.neg()),{div:n,mod:a.mod}):0!=(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),i&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modn(e.words[0]))}:this._wordDiv(e,t);var n,o,a},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),s=e.andln(1),n=r.cmp(i);return n<0||1===s&&0===n?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,i=0,s=this.length-1;s>=0;s--)i=(t*i+(0|this.words[s]))%e;return i},s.prototype.idivn=function(e){r(e<=67108863);for(var t=0,i=this.length-1;i>=0;i--){var s=(0|this.words[i])+67108864*t;this.words[i]=s/e|0,t=s%e}return this.strip()},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n=new s(1),o=new s(0),a=new s(0),h=new s(1),c=0;t.isEven()&&i.isEven();)t.iushrn(1),i.iushrn(1),++c;for(var u=i.clone(),f=t.clone();!t.isZero();){for(var l=0,d=1;0==(t.words[0]&d)&&l<26;++l,d<<=1);if(l>0)for(t.iushrn(l);l-- >0;)(n.isOdd()||o.isOdd())&&(n.iadd(u),o.isub(f)),n.iushrn(1),o.iushrn(1);for(var p=0,b=1;0==(i.words[0]&b)&&p<26;++p,b<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(a.isOdd()||h.isOdd())&&(a.iadd(u),h.isub(f)),a.iushrn(1),h.iushrn(1);t.cmp(i)>=0?(t.isub(i),n.isub(a),o.isub(h)):(i.isub(t),a.isub(n),h.isub(o))}return{a:a,b:h,gcd:i.iushln(c)}},s.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,i=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n,o=new s(1),a=new s(0),h=i.clone();t.cmpn(1)>0&&i.cmpn(1)>0;){for(var c=0,u=1;0==(t.words[0]&u)&&c<26;++c,u<<=1);if(c>0)for(t.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);for(var f=0,l=1;0==(i.words[0]&l)&&f<26;++f,l<<=1);if(f>0)for(i.iushrn(f);f-- >0;)a.isOdd()&&a.iadd(h),a.iushrn(1);t.cmp(i)>=0?(t.isub(i),o.isub(a)):(i.isub(t),a.isub(o))}return(n=0===t.cmpn(1)?o:a).cmpn(0)<0&&n.iadd(e),n},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var i=0;t.isEven()&&r.isEven();i++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var s=t.cmp(r);if(s<0){var n=t;t=r,r=n}else if(0===s||0===r.cmpn(1))break;t.isub(r)}return r.iushln(i)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return 0==(1&this.words[0])},s.prototype.isOdd=function(){return 1==(1&this.words[0])},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,i=(e-t)/26,s=1<<t;if(this.length<=i)return this._expand(i+1),this.words[i]|=s,this;for(var n=s,o=i;0!==n&&o<this.length;o++){var a=0|this.words[o];n=(a+=n)>>>26,a&=67108863,this.words[o]=a}return 0!==n&&(this.words[o]=n,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,i=e<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)t=1;else{i&&(e=-e),r(e<=67108863,"Number is too big");var s=0|this.words[0];t=s===e?0:s<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],s=0|e.words[r];if(i!==s){i<s?t=-1:i>s&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return-1===this.cmpn(e)},s.prototype.lt=function(e){return-1===this.cmp(e)},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new v(e)},s.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var b={k256:null,p224:null,p192:null,p25519:null};function g(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function m(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function y(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function v(e){if("string"==typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function E(e){v.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},g.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var i=t<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):r.strip(),r},g.prototype.split=function(e,t){e.iushrn(this.n,0,t)},g.prototype.imulK=function(e){return e.imul(this.k)},i(m,g),m.prototype.split=function(e,t){for(var r=Math.min(e.length,9),i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var s=e.words[9];for(t.words[t.length++]=4194303&s,i=10;i<e.length;i++){var n=0|e.words[i];e.words[i-10]=(4194303&n)<<4|s>>>22,s=n}s>>>=22,e.words[i-10]=s,0===s&&e.length>10?e.length-=10:e.length-=9},m.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var i=0|e.words[r];t+=977*i,e.words[r]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(_,g),i(w,g),i(y,g),y.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var i=19*(0|e.words[r])+t,s=67108863&i;i>>>=26,e.words[r]=s,t=i}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){if(b[e])return b[e];var t;if("k256"===e)t=new m;else if("p224"===e)t=new _;else if("p192"===e)t=new w;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new y}return b[e]=t,t},v.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},v.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},v.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},v.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},v.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},v.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},v.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},v.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},v.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},v.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},v.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},v.prototype.isqr=function(e){return this.imul(e,e.clone())},v.prototype.sqr=function(e){return this.mul(e,e)},v.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var i=this.m.add(new s(1)).iushrn(2);return this.pow(e,i)}for(var n=this.m.subn(1),o=0;!n.isZero()&&0===n.andln(1);)o++,n.iushrn(1);r(!n.isZero());var a=new s(1).toRed(this),h=a.redNeg(),c=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);0!==this.pow(u,c).cmp(h);)u.redIAdd(h);for(var f=this.pow(u,n),l=this.pow(e,n.addn(1).iushrn(1)),d=this.pow(e,n),p=o;0!==d.cmp(a);){for(var b=d,g=0;0!==b.cmp(a);g++)b=b.redSqr();r(g<p);var m=this.pow(f,new s(1).iushln(p-g-1));l=l.redMul(m),f=m.redSqr(),d=d.redMul(f),p=g}return l},v.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},v.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new s(1).toRed(this),r[1]=e;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],e);var n=r[0],o=0,a=0,h=t.bitLength()%26;for(0===h&&(h=26),i=t.length-1;i>=0;i--){for(var c=t.words[i],u=h-1;u>=0;u--){var f=c>>u&1;n!==r[0]&&(n=this.sqr(n)),0!==f||0!==o?(o<<=1,o|=f,(4===++a||0===i&&0===u)&&(n=this.mul(n,r[o]),a=0,o=0)):a=0}h=26}return n},v.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},v.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new E(e)},i(E,v),E.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},E.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},E.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=r.isub(i).iushrn(this.shift),n=s;return s.cmp(this.m)>=0?n=s.isub(this.m):s.cmpn(0)<0&&(n=s.iadd(this.m)),n._forceRed(this)},E.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var r=e.mul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},E.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===r||r,this)}],["bpkg","/lib/builtins/empty.js",function(e,t,r,i,s,n){}],["elliptic","/lib/elliptic.js",function(e,t,r,i,s,n){"use strict";var o=e;o.version=__browser_require__(524,r).version,o.utils=__browser_require__(525,r),o.rand=__browser_require__(528,r),o.curve=__browser_require__(529,r),o.curves=__browser_require__(534,r),o.ec=__browser_require__(548,r),o.eddsa=__browser_require__(552,r)}],["elliptic","/package.json",function(e,t,r,i,s,n){r.exports={author:{name:"Fedor Indutny",email:"fedor@indutny.com"},bugs:{url:"https://github.com/indutny/elliptic/issues"},description:"EC cryptography",homepage:"https://github.com/indutny/elliptic",keywords:["EC","Elliptic","curve","Cryptography"],license:"MIT",main:"lib/elliptic.js",name:"elliptic",repository:{type:"git",url:"git+ssh://git@github.com/indutny/elliptic.git"},version:"6.5.2"}}],["elliptic","/lib/elliptic/utils.js",function(e,t,r,i,s,n){"use strict";var o=e,a=__browser_require__(521,r),h=__browser_require__(526,r),c=__browser_require__(527,r);o.assert=h,o.toArray=c.toArray,o.zero2=c.zero2,o.toHex=c.toHex,o.encode=c.encode,o.getNAF=function(e,t,r){var i=new Array(Math.max(e.bitLength(),r)+1);i.fill(0);for(var s=1<<t+1,n=e.clone(),o=0;o<i.length;o++){var a,h=n.andln(s-1);n.isOdd()?(a=h>(s>>1)-1?(s>>1)-h:h,n.isubn(a)):a=0,i[o]=a,n.iushrn(1)}return i},o.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var i=0,s=0;e.cmpn(-i)>0||t.cmpn(-s)>0;){var n,o,a,h=e.andln(3)+i&3,c=t.andln(3)+s&3;3===h&&(h=-1),3===c&&(c=-1),n=0==(1&h)?0:3!=(a=e.andln(7)+i&7)&&5!==a||2!==c?h:-h,r[0].push(n),o=0==(1&c)?0:3!=(a=t.andln(7)+s&7)&&5!==a||2!==h?c:-c,r[1].push(o),2*i===n+1&&(i=1-i),2*s===o+1&&(s=1-s),e.iushrn(1),t.iushrn(1)}return r},o.cachedProperty=function(e,t,r){var i="_"+t;e.prototype[t]=function(){return this[i]!==undefined?this[i]:this[i]=r.call(this)}},o.parseBytes=function(e){return"string"==typeof e?o.toArray(e,"hex"):e},o.intFromLE=function(e){return new a(e,"hex","le")}}],["minimalistic-assert","/index.js",function(e,t,r,i,s,n){function o(e,t){if(!e)throw new Error(t||"Assertion failed")}r.exports=o,o.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)}}],["minimalistic-crypto-utils","/lib/utils.js",function(e,t,r,i,s,n){"use strict";var o=e;function a(e){return 1===e.length?"0"+e:e}function h(e){for(var t="",r=0;r<e.length;r++)t+=a(e[r].toString(16));return t}o.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var i=0;i<e.length;i++)r[i]=0|e[i];return r}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16));else for(i=0;i<e.length;i++){var s=e.charCodeAt(i),n=s>>8,o=255&s;n?r.push(n,o):r.push(o)}return r},o.zero2=a,o.toHex=h,o.encode=function(e,t){return"hex"===t?h(e):e}}],["brorand","/index.js",function(e,t,r,i,s,n){var o;function a(e){this.rand=e}if(r.exports=function(e){return o||(o=new a(null)),o.generate(e)},r.exports.Rand=a,a.prototype.generate=function(e){return this._rand(e)},a.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?a.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?a.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(a.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var h=__browser_require__(522,r);if("function"!=typeof h.randomBytes)throw new Error("Not supported");a.prototype._rand=function(e){return h.randomBytes(e)}}catch(e){}}],["elliptic","/lib/elliptic/curve/index.js",function(e,t,r,i,s,n){"use strict";var o=e;o.base=__browser_require__(530,r),o.short=__browser_require__(531,r),o.mont=__browser_require__(532,r),o.edwards=__browser_require__(533,r)}],["elliptic","/lib/elliptic/curve/base.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(521,r),a=__browser_require__(525,r),h=a.getNAF,c=a.getJSF,u=a.assert;function f(e,t){this.type=e,this.p=new o(t.p,16),this.red=t.prime?o.red(t.prime):o.mont(this.p),this.zero=new o(0).toRed(this.red),this.one=new o(1).toRed(this.red),this.two=new o(2).toRed(this.red),this.n=t.n&&new o(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function l(e,t){this.curve=e,this.type=t,this.precomputed=null}r.exports=f,f.prototype.point=function(){throw new Error("Not implemented")},f.prototype.validate=function(){throw new Error("Not implemented")},f.prototype._fixedNafMul=function(e,t){u(e.precomputed);var r=e._getDoubles(),i=h(t,1,this._bitLength),s=(1<<r.step+1)-(r.step%2==0?2:1);s/=3;for(var n=[],o=0;o<i.length;o+=r.step){var a=0;for(t=o+r.step-1;t>=o;t--)a=(a<<1)+i[t];n.push(a)}for(var c=this.jpoint(null,null,null),f=this.jpoint(null,null,null),l=s;l>0;l--){for(o=0;o<n.length;o++){(a=n[o])===l?f=f.mixedAdd(r.points[o]):a===-l&&(f=f.mixedAdd(r.points[o].neg()))}c=c.add(f)}return c.toP()},f.prototype._wnafMul=function(e,t){var r=4,i=e._getNAFPoints(r);r=i.wnd;for(var s=i.points,n=h(t,r,this._bitLength),o=this.jpoint(null,null,null),a=n.length-1;a>=0;a--){for(t=0;a>=0&&0===n[a];a--)t++;if(a>=0&&t++,o=o.dblp(t),a<0)break;var c=n[a];u(0!==c),o="affine"===e.type?c>0?o.mixedAdd(s[c-1>>1]):o.mixedAdd(s[-c-1>>1].neg()):c>0?o.add(s[c-1>>1]):o.add(s[-c-1>>1].neg())}return"affine"===e.type?o.toP():o},f.prototype._wnafMulAdd=function(e,t,r,i,s){for(var n=this._wnafT1,o=this._wnafT2,a=this._wnafT3,u=0,f=0;f<i;f++){var l=(k=t[f])._getNAFPoints(e);n[f]=l.wnd,o[f]=l.points}for(f=i-1;f>=1;f-=2){var d=f-1,p=f;if(1===n[d]&&1===n[p]){var b=[t[d],null,null,t[p]];0===t[d].y.cmp(t[p].y)?(b[1]=t[d].add(t[p]),b[2]=t[d].toJ().mixedAdd(t[p].neg())):0===t[d].y.cmp(t[p].y.redNeg())?(b[1]=t[d].toJ().mixedAdd(t[p]),b[2]=t[d].add(t[p].neg())):(b[1]=t[d].toJ().mixedAdd(t[p]),b[2]=t[d].toJ().mixedAdd(t[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],m=c(r[d],r[p]);u=Math.max(m[0].length,u),a[d]=new Array(u),a[p]=new Array(u);for(var _=0;_<u;_++){var w=0|m[0][_],y=0|m[1][_];a[d][_]=g[3*(w+1)+(y+1)],a[p][_]=0,o[d]=b}}else a[d]=h(r[d],n[d],this._bitLength),a[p]=h(r[p],n[p],this._bitLength),u=Math.max(a[d].length,u),u=Math.max(a[p].length,u)}var v=this.jpoint(null,null,null),E=this._wnafT4;for(f=u;f>=0;f--){for(var S=0;f>=0;){var I=!0;for(_=0;_<i;_++)E[_]=0|a[_][f],0!==E[_]&&(I=!1);if(!I)break;S++,f--}if(f>=0&&S++,v=v.dblp(S),f<0)break;for(_=0;_<i;_++){var k,A=E[_];0!==A&&(A>0?k=o[_][A-1>>1]:A<0&&(k=o[_][-A-1>>1].neg()),v="affine"===k.type?v.mixedAdd(k):v.add(k))}}for(f=0;f<i;f++)o[f]=null;return s?v:v.toP()},f.BasePoint=l,l.prototype.eq=function(){throw new Error("Not implemented")},l.prototype.validate=function(){return this.curve.validate(this)},f.prototype.decodePoint=function(e,t){e=a.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?u(e[e.length-1]%2==0):7===e[0]&&u(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},l.prototype.encodeCompressed=function(e){return this.encode(e,!0)},l.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},l.prototype.encode=function(e,t){return a.encode(this._encode(t),e)},l.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},l.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},l.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],i=this,s=0;s<t;s+=e){for(var n=0;n<e;n++)i=i.dbl();r.push(i)}return{step:e,points:r}},l.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,i=1===r?null:this.dbl(),s=1;s<r;s++)t[s]=t[s-1].add(i);return{wnd:e,points:t}},l.prototype._getBeta=function(){return null},l.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}}],["elliptic","/lib/elliptic/curve/short.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(525,r),a=__browser_require__(521,r),h=__browser_require__(470,r),c=__browser_require__(530,r),u=o.assert;function f(e){c.call(this,"short",e),this.a=new a(e.a,16).toRed(this.red),this.b=new a(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function l(e,t,r,i){c.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new a(t,16),this.y=new a(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function d(e,t,r,i){c.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new a(0)):(this.x=new a(t,16),this.y=new a(r,16),this.z=new a(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}h(f,c),r.exports=f,f.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new a(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=(t=i[0].cmp(i[1])<0?i[0]:i[1]).toRed(this.red)}if(e.lambda)r=new a(e.lambda,16);else{var s=this._getEndoRoots(this.n);0===this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))?r=s[0]:(r=s[1],u(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map(function(e){return{a:new a(e.a,16),b:new a(e.b,16)}}):this._getEndoBasis(r)}}},f.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:a.mont(e),r=new a(2).toRed(t).redInvm(),i=r.redNeg(),s=new a(3).toRed(t).redNeg().redSqrt().redMul(r);return[i.redAdd(s).fromRed(),i.redSub(s).fromRed()]},f.prototype._getEndoBasis=function(e){for(var t,r,i,s,n,o,h,c,u,f=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=e,d=this.n.clone(),p=new a(1),b=new a(0),g=new a(0),m=new a(1),_=0;0!==l.cmpn(0);){var w=d.div(l);c=d.sub(w.mul(l)),u=g.sub(w.mul(p));var y=m.sub(w.mul(b));if(!i&&c.cmp(f)<0)t=h.neg(),r=p,i=c.neg(),s=u;else if(i&&2==++_)break;h=c,d=l,l=c,g=p,p=u,m=b,b=y}n=c.neg(),o=u;var v=i.sqr().add(s.sqr());return n.sqr().add(o.sqr()).cmp(v)>=0&&(n=t,o=r),i.negative&&(i=i.neg(),s=s.neg()),n.negative&&(n=n.neg(),o=o.neg()),[{a:i,b:s},{a:n,b:o}]},f.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],i=t[1],s=i.b.mul(e).divRound(this.n),n=r.b.neg().mul(e).divRound(this.n),o=s.mul(r.a),a=n.mul(i.a),h=s.mul(r.b),c=n.mul(i.b);return{k1:e.sub(o).sub(a),k2:h.add(c).neg()}},f.prototype.pointFromX=function(e,t){(e=new a(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=r.redSqrt();if(0!==i.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var s=i.fromRed().isOdd();return(t&&!s||!t&&s)&&(i=i.redNeg()),this.point(e,i)},f.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,i=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return 0===r.redSqr().redISub(s).cmpn(0)},f.prototype._endoWnafMulAdd=function(e,t,r){for(var i=this._endoWnafT1,s=this._endoWnafT2,n=0;n<e.length;n++){var o=this._endoSplit(t[n]),a=e[n],h=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),h=h.neg(!0)),i[2*n]=a,i[2*n+1]=h,s[2*n]=o.k1,s[2*n+1]=o.k2}for(var c=this._wnafMulAdd(1,i,s,2*n,r),u=0;u<2*n;u++)i[u]=null,s[u]=null;return c},h(l,c.BasePoint),f.prototype.point=function(e,t,r){return new l(this,e,t,r)},f.prototype.pointFromJSON=function(e,t){return l.fromJSON(this,e,t)},l.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,i=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}},l.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},l.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var i=e.point(t[0],t[1],r);if(!t[2])return i;function s(t){return e.point(t[0],t[1],r)}var n=t[2];return i.precomputed={beta:null,doubles:n.doubles&&{step:n.doubles.step,points:[i].concat(n.doubles.points.map(s))},naf:n.naf&&{wnd:n.naf.wnd,points:[i].concat(n.naf.points.map(s))}},i},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return this.inf},l.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)},l.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),i=e.redInvm(),s=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(i),n=s.redSqr().redISub(this.x.redAdd(this.x)),o=s.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,o)},l.prototype.getX=function(){return this.x.fromRed()},l.prototype.getY=function(){return this.y.fromRed()},l.prototype.mul=function(e){return e=new a(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},l.prototype.mulAdd=function(e,t,r){var i=[this,t],s=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)},l.prototype.jmulAdd=function(e,t,r){var i=[this,t],s=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)},l.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},l.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,i=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return t},l.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},h(d,c.BasePoint),f.prototype.jpoint=function(e,t,r){return new d(this,e,t,r)},d.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(r,i)},d.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},d.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),i=this.x.redMul(t),s=e.x.redMul(r),n=this.y.redMul(t.redMul(e.z)),o=e.y.redMul(r.redMul(this.z)),a=i.redSub(s),h=n.redSub(o);if(0===a.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),u=c.redMul(a),f=i.redMul(c),l=h.redSqr().redIAdd(u).redISub(f).redISub(f),d=h.redMul(f.redISub(l)).redISub(n.redMul(u)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(l,d,p)},d.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,i=e.x.redMul(t),s=this.y,n=e.y.redMul(t).redMul(this.z),o=r.redSub(i),a=s.redSub(n);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h=o.redSqr(),c=h.redMul(o),u=r.redMul(h),f=a.redSqr().redIAdd(c).redISub(u).redISub(u),l=a.redMul(u.redISub(f)).redISub(s.redMul(c)),d=this.z.redMul(o);return this.curve.jpoint(f,l,d)},d.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}var i=this.curve.a,s=this.curve.tinv,n=this.x,o=this.y,a=this.z,h=a.redSqr().redSqr(),c=o.redAdd(o);for(r=0;r<e;r++){var u=n.redSqr(),f=c.redSqr(),l=f.redSqr(),d=u.redAdd(u).redIAdd(u).redIAdd(i.redMul(h)),p=n.redMul(f),b=d.redSqr().redISub(p.redAdd(p)),g=p.redISub(b),m=d.redMul(g);m=m.redIAdd(m).redISub(l);var _=c.redMul(a);r+1<e&&(h=h.redMul(l)),n=b,a=_,c=m}return this.curve.jpoint(n,c.redMul(s),a)},d.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},d.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),n=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(i).redISub(n);o=o.redIAdd(o);var a=i.redAdd(i).redIAdd(i),h=a.redSqr().redISub(o).redISub(o),c=n.redIAdd(n);c=(c=c.redIAdd(c)).redIAdd(c),e=h,t=a.redMul(o.redISub(h)).redISub(c),r=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),f=this.y.redSqr(),l=f.redSqr(),d=this.x.redAdd(f).redSqr().redISub(u).redISub(l);d=d.redIAdd(d);var p=u.redAdd(u).redIAdd(u),b=p.redSqr(),g=l.redIAdd(l);g=(g=g.redIAdd(g)).redIAdd(g),e=b.redISub(d).redISub(d),t=p.redMul(d.redISub(e)).redISub(g),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},d.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),n=s.redSqr(),o=this.x.redAdd(s).redSqr().redISub(i).redISub(n);o=o.redIAdd(o);var a=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),h=a.redSqr().redISub(o).redISub(o);e=h;var c=n.redIAdd(n);c=(c=c.redIAdd(c)).redIAdd(c),t=a.redMul(o.redISub(h)).redISub(c),r=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),f=this.y.redSqr(),l=this.x.redMul(f),d=this.x.redSub(u).redMul(this.x.redAdd(u));d=d.redAdd(d).redIAdd(d);var p=l.redIAdd(l),b=(p=p.redIAdd(p)).redAdd(p);e=d.redSqr().redISub(b),r=this.y.redAdd(this.z).redSqr().redISub(f).redISub(u);var g=f.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=d.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,r)},d.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,i=this.z,s=i.redSqr().redSqr(),n=t.redSqr(),o=r.redSqr(),a=n.redAdd(n).redIAdd(n).redIAdd(e.redMul(s)),h=t.redAdd(t),c=(h=h.redIAdd(h)).redMul(o),u=a.redSqr().redISub(c.redAdd(c)),f=c.redISub(u),l=o.redSqr();l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var d=a.redMul(f).redISub(l),p=r.redAdd(r).redMul(i);return this.curve.jpoint(u,d,p)},d.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),i=t.redSqr(),s=e.redAdd(e).redIAdd(e),n=s.redSqr(),o=this.x.redAdd(t).redSqr().redISub(e).redISub(i),a=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(n)).redSqr(),h=i.redIAdd(i);h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var c=s.redIAdd(o).redSqr().redISub(n).redISub(a).redISub(h),u=t.redMul(c);u=(u=u.redIAdd(u)).redIAdd(u);var f=this.x.redMul(a).redISub(u);f=(f=f.redIAdd(f)).redIAdd(f);var l=this.y.redMul(c.redMul(h.redISub(c)).redISub(o.redMul(a)));l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var d=this.z.redAdd(o).redSqr().redISub(r).redISub(a);return this.curve.jpoint(f,l,d)},d.prototype.mul=function(e,t){return e=new a(e,t),this.curve._wnafMul(this,e)},d.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var i=t.redMul(this.z),s=r.redMul(e.z);return 0===this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)},d.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var i=e.clone(),s=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(s),0===this.x.cmp(r))return!0}},d.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},d.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}}],["elliptic","/lib/elliptic/curve/mont.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(521,r),a=__browser_require__(470,r),h=__browser_require__(530,r),c=__browser_require__(525,r);function u(e){h.call(this,"mont",e),this.a=new o(e.a,16).toRed(this.red),this.b=new o(e.b,16).toRed(this.red),this.i4=new o(4).toRed(this.red).redInvm(),this.two=new o(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function f(e,t,r){h.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new o(t,16),this.z=new o(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}a(u,h),r.exports=u,u.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),i=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===i.redSqrt().redSqr().cmp(i)},a(f,h.BasePoint),u.prototype.decodePoint=function(e,t){return this.point(c.toArray(e,t),1)},u.prototype.point=function(e,t){return new f(this,e,t)},u.prototype.pointFromJSON=function(e){return f.fromJSON(this,e)},f.prototype.precompute=function(){},f.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},f.fromJSON=function(e,t){return new f(e,t[0],t[1]||e.one)},f.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},f.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},f.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),i=e.redMul(t),s=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(i,s)},f.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},f.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),i=this.x.redSub(this.z),s=e.x.redAdd(e.z),n=e.x.redSub(e.z).redMul(r),o=s.redMul(i),a=t.z.redMul(n.redAdd(o).redSqr()),h=t.x.redMul(n.redISub(o).redSqr());return this.curve.point(a,h)},f.prototype.mul=function(e){for(var t=e.clone(),r=this,i=this.curve.point(null,null),s=[];0!==t.cmpn(0);t.iushrn(1))s.push(t.andln(1));for(var n=s.length-1;n>=0;n--)0===s[n]?(r=r.diffAdd(i,this),i=i.dbl()):(i=r.diffAdd(i,this),r=r.dbl());return i},f.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},f.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},f.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},f.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},f.prototype.getX=function(){return this.normalize(),this.x.fromRed()}}],["elliptic","/lib/elliptic/curve/edwards.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(525,r),a=__browser_require__(521,r),h=__browser_require__(470,r),c=__browser_require__(530,r),u=o.assert;function f(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,c.call(this,"edwards",e),this.a=new a(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new a(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new a(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),u(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function l(e,t,r,i,s){c.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===i?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new a(t,16),this.y=new a(r,16),this.z=i?new a(i,16):this.curve.one,this.t=s&&new a(s,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}h(f,c),r.exports=f,f.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},f.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},f.prototype.jpoint=function(e,t,r,i){return this.point(e,t,r,i)},f.prototype.pointFromX=function(e,t){(e=new a(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),i=this.c2.redSub(this.a.redMul(r)),s=this.one.redSub(this.c2.redMul(this.d).redMul(r)),n=i.redMul(s.redInvm()),o=n.redSqrt();if(0!==o.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var h=o.fromRed().isOdd();return(t&&!h||!t&&h)&&(o=o.redNeg()),this.point(e,o)},f.prototype.pointFromY=function(e,t){(e=new a(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),i=r.redSub(this.c2),s=r.redMul(this.d).redMul(this.c2).redSub(this.a),n=i.redMul(s.redInvm());if(0===n.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var o=n.redSqrt();if(0!==o.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");return o.fromRed().isOdd()!==t&&(o=o.redNeg()),this.point(o,e)},f.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),i=t.redMul(this.a).redAdd(r),s=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===i.cmp(s)},h(l,c.BasePoint),f.prototype.pointFromJSON=function(e){return l.fromJSON(this,e)},f.prototype.point=function(e,t,r,i){return new l(this,e,t,r,i)},l.fromJSON=function(e,t){return new l(e,t[0],t[1],t[2])},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},l.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var i=this.curve._mulA(e),s=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),n=i.redAdd(t),o=n.redSub(r),a=i.redSub(t),h=s.redMul(o),c=n.redMul(a),u=s.redMul(a),f=o.redMul(n);return this.curve.point(h,c,f,u)},l.prototype._projDbl=function(){var e,t,r,i=this.x.redAdd(this.y).redSqr(),s=this.x.redSqr(),n=this.y.redSqr();if(this.curve.twisted){var o=(c=this.curve._mulA(s)).redAdd(n);if(this.zOne)e=i.redSub(s).redSub(n).redMul(o.redSub(this.curve.two)),t=o.redMul(c.redSub(n)),r=o.redSqr().redSub(o).redSub(o);else{var a=this.z.redSqr(),h=o.redSub(a).redISub(a);e=i.redSub(s).redISub(n).redMul(h),t=o.redMul(c.redSub(n)),r=o.redMul(h)}}else{var c=s.redAdd(n);a=this.curve._mulC(this.z).redSqr(),h=c.redSub(a).redSub(a);e=this.curve._mulC(i.redISub(c)).redMul(h),t=this.curve._mulC(c).redMul(s.redISub(n)),r=c.redMul(h)}return this.curve.point(e,t,r)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},l.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),s=this.z.redMul(e.z.redAdd(e.z)),n=r.redSub(t),o=s.redSub(i),a=s.redAdd(i),h=r.redAdd(t),c=n.redMul(o),u=a.redMul(h),f=n.redMul(h),l=o.redMul(a);return this.curve.point(c,u,l,f)},l.prototype._projAdd=function(e){var t,r,i=this.z.redMul(e.z),s=i.redSqr(),n=this.x.redMul(e.x),o=this.y.redMul(e.y),a=this.curve.d.redMul(n).redMul(o),h=s.redSub(a),c=s.redAdd(a),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(n).redISub(o),f=i.redMul(h).redMul(u);return this.curve.twisted?(t=i.redMul(c).redMul(o.redSub(this.curve._mulA(n))),r=h.redMul(c)):(t=i.redMul(c).redMul(o.redSub(n)),r=this.curve._mulC(h).redMul(c)),this.curve.point(f,t,r)},l.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},l.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},l.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},l.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},l.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},l.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()},l.prototype.getY=function(){return this.normalize(),this.y.fromRed()},l.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},l.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),i=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(i),0===this.x.cmp(t))return!0}},l.prototype.toP=l.prototype.normalize,l.prototype.mixedAdd=l.prototype.add}],["elliptic","/lib/elliptic/curves.js",function(e,t,r,i,s,n){"use strict";var o,a=e,h=__browser_require__(535,r),c=__browser_require__(529,r),u=__browser_require__(525,r).assert;function f(e){"short"===e.type?this.curve=new c.short(e):"edwards"===e.type?this.curve=new c.edwards(e):this.curve=new c.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,u(this.g.validate(),"Invalid curve"),u(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function l(e,t){Object.defineProperty(a,e,{configurable:!0,enumerable:!0,get:function(){var r=new f(t);return Object.defineProperty(a,e,{configurable:!0,enumerable:!0,value:r}),r}})}a.PresetCurve=f,l("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:h.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),l("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:h.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),l("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:h.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),l("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:h.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),l("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:h.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),l("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:h.sha256,gRed:!1,g:["9"]}),l("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:h.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{o=__browser_require__(547,r)}catch(e){o=undefined}l("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:h.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})}],["hash.js","/lib/hash.js",function(e,t,r,i,s,n){var o=e;o.utils=__browser_require__(536,r),o.common=__browser_require__(537,r),o.sha=__browser_require__(538,r),o.ripemd=__browser_require__(545,r),o.hmac=__browser_require__(546,r),o.sha1=o.sha.sha1,o.sha256=o.sha.sha256,o.sha224=o.sha.sha224,o.sha384=o.sha.sha384,o.sha512=o.sha.sha512,o.ripemd160=o.ripemd.ripemd160}],["hash.js","/lib/hash/utils.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(526,r),a=__browser_require__(470,r);function h(e,t){return 55296==(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1)))}function c(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function u(e){return 1===e.length?"0"+e:e}function f(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}e.inherits=a,e.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),s=0;s<e.length;s+=2)r.push(parseInt(e[s]+e[s+1],16))}else for(var i=0,s=0;s<e.length;s++){var n=e.charCodeAt(s);n<128?r[i++]=n:n<2048?(r[i++]=n>>6|192,r[i++]=63&n|128):h(e,s)?(n=65536+((1023&n)<<10)+(1023&e.charCodeAt(++s)),r[i++]=n>>18|240,r[i++]=n>>12&63|128,r[i++]=n>>6&63|128,r[i++]=63&n|128):(r[i++]=n>>12|224,r[i++]=n>>6&63|128,r[i++]=63&n|128)}else for(s=0;s<e.length;s++)r[s]=0|e[s];return r},e.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=u(e[r].toString(16));return t},e.htonl=c,e.toHex32=function(e,t){for(var r="",i=0;i<e.length;i++){var s=e[i];"little"===t&&(s=c(s)),r+=f(s.toString(16))}return r},e.zero2=u,e.zero8=f,e.join32=function(e,t,r,i){var s=r-t;o(s%4==0);for(var n=new Array(s/4),a=0,h=t;a<n.length;a++,h+=4){var c;c="big"===i?e[h]<<24|e[h+1]<<16|e[h+2]<<8|e[h+3]:e[h+3]<<24|e[h+2]<<16|e[h+1]<<8|e[h],n[a]=c>>>0}return n},e.split32=function(e,t){for(var r=new Array(4*e.length),i=0,s=0;i<e.length;i++,s+=4){var n=e[i];"big"===t?(r[s]=n>>>24,r[s+1]=n>>>16&255,r[s+2]=n>>>8&255,r[s+3]=255&n):(r[s+3]=n>>>24,r[s+2]=n>>>16&255,r[s+1]=n>>>8&255,r[s]=255&n)}return r},e.rotr32=function(e,t){return e>>>t|e<<32-t},e.rotl32=function(e,t){return e<<t|e>>>32-t},e.sum32=function(e,t){return e+t>>>0},e.sum32_3=function(e,t,r){return e+t+r>>>0},e.sum32_4=function(e,t,r,i){return e+t+r+i>>>0},e.sum32_5=function(e,t,r,i,s){return e+t+r+i+s>>>0},e.sum64=function(e,t,r,i){var s=e[t],n=i+e[t+1]>>>0,o=(n<i?1:0)+r+s;e[t]=o>>>0,e[t+1]=n},e.sum64_hi=function(e,t,r,i){return(t+i>>>0<t?1:0)+e+r>>>0},e.sum64_lo=function(e,t,r,i){return t+i>>>0},e.sum64_4_hi=function(e,t,r,i,s,n,o,a){var h=0,c=t;return h+=(c=c+i>>>0)<t?1:0,h+=(c=c+n>>>0)<n?1:0,e+r+s+o+(h+=(c=c+a>>>0)<a?1:0)>>>0},e.sum64_4_lo=function(e,t,r,i,s,n,o,a){return t+i+n+a>>>0},e.sum64_5_hi=function(e,t,r,i,s,n,o,a,h,c){var u=0,f=t;return u+=(f=f+i>>>0)<t?1:0,u+=(f=f+n>>>0)<n?1:0,u+=(f=f+a>>>0)<a?1:0,e+r+s+o+h+(u+=(f=f+c>>>0)<c?1:0)>>>0},e.sum64_5_lo=function(e,t,r,i,s,n,o,a,h,c){return t+i+n+a+c>>>0},e.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},e.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},e.shr64_hi=function(e,t,r){return e>>>r},e.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0}}],["hash.js","/lib/hash/common.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(536,r),a=__browser_require__(526,r);function h(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=h,h.prototype.update=function(e,t){if(e=o.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=o.join32(e,0,e.length-r,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},h.prototype.digest=function(e){return this.update(this._pad()),a(null===this.pending),this._digest(e)},h.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,i=new Array(r+this.padLength);i[0]=128;for(var s=1;s<r;s++)i[s]=0;if(e<<=3,"big"===this.endian){for(var n=8;n<this.padLength;n++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=255&e}else for(i[s++]=255&e,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,n=8;n<this.padLength;n++)i[s++]=0;return i}}],["hash.js","/lib/hash/sha.js",function(e,t,r,i,s,n){"use strict";e.sha1=__browser_require__(539,r),e.sha224=__browser_require__(541,r),e.sha256=__browser_require__(542,r),e.sha384=__browser_require__(543,r),e.sha512=__browser_require__(544,r)}],["hash.js","/lib/hash/sha/1.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(536,r),a=__browser_require__(537,r),h=__browser_require__(540,r),c=o.rotl32,u=o.sum32,f=o.sum32_5,l=h.ft_1,d=a.BlockHash,p=[1518500249,1859775393,2400959708,3395469782];function b(){if(!(this instanceof b))return new b;d.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}o.inherits(b,d),r.exports=b,b.blockSize=512,b.outSize=160,b.hmacStrength=80,b.padLength=64,b.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=c(r[i-3]^r[i-8]^r[i-14]^r[i-16],1);var s=this.h[0],n=this.h[1],o=this.h[2],a=this.h[3],h=this.h[4];for(i=0;i<r.length;i++){var d=~~(i/20),b=f(c(s,5),l(d,n,o,a),h,r[i],p[d]);h=a,a=o,o=c(n,30),n=s,s=b}this.h[0]=u(this.h[0],s),this.h[1]=u(this.h[1],n),this.h[2]=u(this.h[2],o),this.h[3]=u(this.h[3],a),this.h[4]=u(this.h[4],h)},b.prototype._digest=function(e){return"hex"===e?o.toHex32(this.h,"big"):o.split32(this.h,"big")}}],["hash.js","/lib/hash/sha/common.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(536,r).rotr32;function a(e,t,r){return e&t^~e&r}function h(e,t,r){return e&t^e&r^t&r}function c(e,t,r){return e^t^r}e.ft_1=function(e,t,r,i){return 0===e?a(t,r,i):1===e||3===e?c(t,r,i):2===e?h(t,r,i):void 0},e.ch32=a,e.maj32=h,e.p32=c,e.s0_256=function(e){return o(e,2)^o(e,13)^o(e,22)},e.s1_256=function(e){return o(e,6)^o(e,11)^o(e,25)},e.g0_256=function(e){return o(e,7)^o(e,18)^e>>>3},e.g1_256=function(e){return o(e,17)^o(e,19)^e>>>10}}],["hash.js","/lib/hash/sha/224.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(536,r),a=__browser_require__(542,r);function h(){if(!(this instanceof h))return new h;a.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}o.inherits(h,a),r.exports=h,h.blockSize=512,h.outSize=224,h.hmacStrength=192,h.padLength=64,h.prototype._digest=function(e){return"hex"===e?o.toHex32(this.h.slice(0,7),"big"):o.split32(this.h.slice(0,7),"big")}}],["hash.js","/lib/hash/sha/256.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(536,r),a=__browser_require__(537,r),h=__browser_require__(540,r),c=__browser_require__(526,r),u=o.sum32,f=o.sum32_4,l=o.sum32_5,d=h.ch32,p=h.maj32,b=h.s0_256,g=h.s1_256,m=h.g0_256,_=h.g1_256,w=a.BlockHash,y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function v(){if(!(this instanceof v))return new v;w.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=y,this.W=new Array(64)}o.inherits(v,w),r.exports=v,v.blockSize=512,v.outSize=256,v.hmacStrength=192,v.padLength=64,v.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=f(_(r[i-2]),r[i-7],m(r[i-15]),r[i-16]);var s=this.h[0],n=this.h[1],o=this.h[2],a=this.h[3],h=this.h[4],w=this.h[5],y=this.h[6],v=this.h[7];for(c(this.k.length===r.length),i=0;i<r.length;i++){var E=l(v,g(h),d(h,w,y),this.k[i],r[i]),S=u(b(s),p(s,n,o));v=y,y=w,w=h,h=u(a,E),a=o,o=n,n=s,s=u(E,S)}this.h[0]=u(this.h[0],s),this.h[1]=u(this.h[1],n),this.h[2]=u(this.h[2],o),this.h[3]=u(this.h[3],a),this.h[4]=u(this.h[4],h),this.h[5]=u(this.h[5],w),this.h[6]=u(this.h[6],y),this.h[7]=u(this.h[7],v)},v.prototype._digest=function(e){return"hex"===e?o.toHex32(this.h,"big"):o.split32(this.h,"big")}}],["hash.js","/lib/hash/sha/384.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(536,r),a=__browser_require__(544,r);function h(){if(!(this instanceof h))return new h;a.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}o.inherits(h,a),r.exports=h,h.blockSize=1024,h.outSize=384,h.hmacStrength=192,h.padLength=128,h.prototype._digest=function(e){return"hex"===e?o.toHex32(this.h.slice(0,12),"big"):o.split32(this.h.slice(0,12),"big")}}],["hash.js","/lib/hash/sha/512.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(536,r),a=__browser_require__(537,r),h=__browser_require__(526,r),c=o.rotr64_hi,u=o.rotr64_lo,f=o.shr64_hi,l=o.shr64_lo,d=o.sum64,p=o.sum64_hi,b=o.sum64_lo,g=o.sum64_4_hi,m=o.sum64_4_lo,_=o.sum64_5_hi,w=o.sum64_5_lo,y=a.BlockHash,v=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function E(){if(!(this instanceof E))return new E;y.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=v,this.W=new Array(160)}function S(e,t,r,i,s){var n=e&r^~e&s;return n<0&&(n+=4294967296),n}function I(e,t,r,i,s,n){var o=t&i^~t&n;return o<0&&(o+=4294967296),o}function k(e,t,r,i,s){var n=e&r^e&s^r&s;return n<0&&(n+=4294967296),n}function A(e,t,r,i,s,n){var o=t&i^t&n^i&n;return o<0&&(o+=4294967296),o}function O(e,t){var r=c(e,t,28)^c(t,e,2)^c(t,e,7);return r<0&&(r+=4294967296),r}function x(e,t){var r=u(e,t,28)^u(t,e,2)^u(t,e,7);return r<0&&(r+=4294967296),r}function R(e,t){var r=c(e,t,14)^c(e,t,18)^c(t,e,9);return r<0&&(r+=4294967296),r}function M(e,t){var r=u(e,t,14)^u(e,t,18)^u(t,e,9);return r<0&&(r+=4294967296),r}function P(e,t){var r=c(e,t,1)^c(e,t,8)^f(e,t,7);return r<0&&(r+=4294967296),r}function B(e,t){var r=u(e,t,1)^u(e,t,8)^l(e,t,7);return r<0&&(r+=4294967296),r}function N(e,t){var r=c(e,t,19)^c(t,e,29)^f(e,t,6);return r<0&&(r+=4294967296),r}function T(e,t){var r=u(e,t,19)^u(t,e,29)^l(e,t,6);return r<0&&(r+=4294967296),r}o.inherits(E,y),r.exports=E,E.blockSize=1024,E.outSize=512,E.hmacStrength=192,E.padLength=128,E.prototype._prepareBlock=function(e,t){for(var r=this.W,i=0;i<32;i++)r[i]=e[t+i];for(;i<r.length;i+=2){var s=N(r[i-4],r[i-3]),n=T(r[i-4],r[i-3]),o=r[i-14],a=r[i-13],h=P(r[i-30],r[i-29]),c=B(r[i-30],r[i-29]),u=r[i-32],f=r[i-31];r[i]=g(s,n,o,a,h,c,u,f),r[i+1]=m(s,n,o,a,h,c,u,f)}},E.prototype._update=function(e,t){this._prepareBlock(e,t);var r=this.W,i=this.h[0],s=this.h[1],n=this.h[2],o=this.h[3],a=this.h[4],c=this.h[5],u=this.h[6],f=this.h[7],l=this.h[8],g=this.h[9],m=this.h[10],y=this.h[11],v=this.h[12],E=this.h[13],P=this.h[14],B=this.h[15];h(this.k.length===r.length);for(var N=0;N<r.length;N+=2){var T=P,C=B,q=R(l,g),j=M(l,g),D=S(l,g,m,y,v),U=I(l,g,m,y,v,E),L=this.k[N],z=this.k[N+1],F=r[N],H=r[N+1],V=_(T,C,q,j,D,U,L,z,F,H),K=w(T,C,q,j,D,U,L,z,F,H);T=O(i,s),C=x(i,s),q=k(i,s,n,o,a),j=A(i,s,n,o,a,c);var W=p(T,C,q,j),G=b(T,C,q,j);P=v,B=E,v=m,E=y,m=l,y=g,l=p(u,f,V,K),g=b(f,f,V,K),u=a,f=c,a=n,c=o,n=i,o=s,i=p(V,K,W,G),s=b(V,K,W,G)}d(this.h,0,i,s),d(this.h,2,n,o),d(this.h,4,a,c),d(this.h,6,u,f),d(this.h,8,l,g),d(this.h,10,m,y),d(this.h,12,v,E),d(this.h,14,P,B)},E.prototype._digest=function(e){return"hex"===e?o.toHex32(this.h,"big"):o.split32(this.h,"big")}}],["hash.js","/lib/hash/ripemd.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(536,r),a=__browser_require__(537,r),h=o.rotl32,c=o.sum32,u=o.sum32_3,f=o.sum32_4,l=a.BlockHash;function d(){if(!(this instanceof d))return new d;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function p(e,t,r,i){return e<=15?t^r^i:e<=31?t&r|~t&i:e<=47?(t|~r)^i:e<=63?t&i|r&~i:t^(r|~i)}function b(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function g(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}o.inherits(d,l),e.ripemd160=d,d.blockSize=512,d.outSize=160,d.hmacStrength=192,d.padLength=64,d.prototype._update=function(e,t){for(var r=this.h[0],i=this.h[1],s=this.h[2],n=this.h[3],o=this.h[4],a=r,l=i,d=s,v=n,E=o,S=0;S<80;S++){var I=c(h(f(r,p(S,i,s,n),e[m[S]+t],b(S)),w[S]),o);r=o,o=n,n=h(s,10),s=i,i=I,I=c(h(f(a,p(79-S,l,d,v),e[_[S]+t],g(S)),y[S]),E),a=E,E=v,v=h(d,10),d=l,l=I}I=u(this.h[1],s,v),this.h[1]=u(this.h[2],n,E),this.h[2]=u(this.h[3],o,a),this.h[3]=u(this.h[4],r,l),this.h[4]=u(this.h[0],i,d),this.h[0]=I},d.prototype._digest=function(e){return"hex"===e?o.toHex32(this.h,"little"):o.split32(this.h,"little")};var m=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],_=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],w=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],y=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]}],["hash.js","/lib/hash/hmac.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(536,r),a=__browser_require__(526,r);function h(e,t,r){if(!(this instanceof h))return new h(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(o.toArray(t,r))}r.exports=h,h.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),a(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},h.prototype.update=function(e,t){return this.inner.update(e,t),this},h.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}}],["elliptic","/lib/elliptic/precomputed/secp256k1.js",function(e,t,r,i,s,n){r.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}}],["elliptic","/lib/elliptic/ec/index.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(521,r),a=__browser_require__(549,r),h=__browser_require__(525,r),c=__browser_require__(534,r),u=__browser_require__(528,r),f=h.assert,l=__browser_require__(550,r),d=__browser_require__(551,r);function p(e){if(!(this instanceof p))return new p(e);"string"==typeof e&&(f(c.hasOwnProperty(e),"Unknown curve "+e),e=c[e]),e instanceof c.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}r.exports=p,p.prototype.keyPair=function(e){return new l(this,e)},p.prototype.keyFromPrivate=function(e,t){return l.fromPrivate(this,e,t)},p.prototype.keyFromPublic=function(e,t){return l.fromPublic(this,e,t)},p.prototype.genKeyPair=function(e){e||(e={});for(var t=new a({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||u(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),i=this.n.sub(new o(2));;){var s=new o(t.generate(r));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}},p.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},p.prototype.sign=function(e,t,r,i){"object"==typeof r&&(i=r,r=null),i||(i={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new o(e,16));for(var s=this.n.byteLength(),n=t.getPrivate().toArray("be",s),h=e.toArray("be",s),c=new a({hash:this.hash,entropy:n,nonce:h,pers:i.pers,persEnc:i.persEnc||"utf8"}),u=this.n.sub(new o(1)),f=0;;f++){var l=i.k?i.k(f):new o(c.generate(this.n.byteLength()));if(!((l=this._truncateToN(l,!0)).cmpn(1)<=0||l.cmp(u)>=0)){var p=this.g.mul(l);if(!p.isInfinity()){var b=p.getX(),g=b.umod(this.n);if(0!==g.cmpn(0)){var m=l.invm(this.n).mul(g.mul(t.getPrivate()).iadd(e));if(0!==(m=m.umod(this.n)).cmpn(0)){var _=(p.getY().isOdd()?1:0)|(0!==b.cmp(g)?2:0);return i.canonical&&m.cmp(this.nh)>0&&(m=this.n.sub(m),_^=1),new d({r:g,s:m,recoveryParam:_})}}}}}},p.prototype.verify=function(e,t,r,i){e=this._truncateToN(new o(e,16)),r=this.keyFromPublic(r,i);var s=(t=new d(t,"hex")).r,n=t.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;if(n.cmpn(1)<0||n.cmp(this.n)>=0)return!1;var a,h=n.invm(this.n),c=h.mul(e).umod(this.n),u=h.mul(s).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(c,r.getPublic(),u)).isInfinity()&&a.eqXToP(s):!(a=this.g.mulAdd(c,r.getPublic(),u)).isInfinity()&&0===a.getX().umod(this.n).cmp(s)},p.prototype.recoverPubKey=function(e,t,r,i){f((3&r)===r,"The recovery param is more than two bits"),t=new d(t,i);var s=this.n,n=new o(e),a=t.r,h=t.s,c=1&r,u=r>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");a=u?this.curve.pointFromX(a.add(this.curve.n),c):this.curve.pointFromX(a,c);var l=t.r.invm(s),p=s.sub(n).mul(l).umod(s),b=h.mul(l).umod(s);return this.g.mulAdd(p,a,b)},p.prototype.getKeyRecoveryParam=function(e,t,r,i){if(null!==(t=new d(t,i)).recoveryParam)return t.recoveryParam;for(var s=0;s<4;s++){var n;try{n=this.recoverPubKey(e,t,s)}catch(e){continue}if(n.eq(r))return s}throw new Error("Unable to find valid recovery factor")}}],["hmac-drbg","/lib/hmac-drbg.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(535,r),a=__browser_require__(527,r),h=__browser_require__(526,r);function c(e){if(!(this instanceof c))return new c(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=a.toArray(e.entropy,e.entropyEnc||"hex"),r=a.toArray(e.nonce,e.nonceEnc||"hex"),i=a.toArray(e.pers,e.persEnc||"hex");h(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,i)}r.exports=c,c.prototype._init=function(e,t,r){var i=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},c.prototype._hmac=function(){return new o.hmac(this.hash,this.K)},c.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},c.prototype.reseed=function(e,t,r,i){"string"!=typeof t&&(i=r,r=t,t=null),e=a.toArray(e,t),r=a.toArray(r,i),h(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},c.prototype.generate=function(e,t,r,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(i=r,r=t,t=null),r&&(r=a.toArray(r,i||"hex"),this._update(r));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var n=s.slice(0,e);return this._update(r),this._reseed++,a.encode(n,t)}}],["elliptic","/lib/elliptic/ec/key.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(521,r),a=__browser_require__(525,r).assert;function h(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}r.exports=h,h.fromPublic=function(e,t,r){return t instanceof h?t:new h(e,{pub:t,pubEnc:r})},h.fromPrivate=function(e,t,r){return t instanceof h?t:new h(e,{priv:t,privEnc:r})},h.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},h.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},h.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},h.prototype._importPrivate=function(e,t){this.priv=new o(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},h.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?a(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||a(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},h.prototype.derive=function(e){return e.mul(this.priv).getX()},h.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},h.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},h.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}}],["elliptic","/lib/elliptic/ec/signature.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(521,r),a=__browser_require__(525,r),h=a.assert;function c(e,t){if(e instanceof c)return e;this._importDER(e,t)||(h(e.r&&e.s,"Signature without r or s"),this.r=new o(e.r,16),this.s=new o(e.s,16),e.recoveryParam===undefined?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function u(e,t){var r=e[t.place++];if(!(128&r))return r;for(var i=15&r,s=0,n=0,o=t.place;n<i;n++,o++)s<<=8,s|=e[o];return t.place=o,s}function f(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function l(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}r.exports=c,c.prototype._importDER=function(e,t){e=a.toArray(e,t);var r=new function(){this.place=0};if(48!==e[r.place++])return!1;if(u(e,r)+r.place!==e.length)return!1;if(2!==e[r.place++])return!1;var i=u(e,r),s=e.slice(r.place,i+r.place);if(r.place+=i,2!==e[r.place++])return!1;var n=u(e,r);if(e.length!==n+r.place)return!1;var h=e.slice(r.place,n+r.place);return 0===s[0]&&128&s[1]&&(s=s.slice(1)),0===h[0]&&128&h[1]&&(h=h.slice(1)),this.r=new o(s),this.s=new o(h),this.recoveryParam=null,!0},c.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=f(t),r=f(r);!(r[0]||128&r[1]);)r=r.slice(1);var i=[2];l(i,t.length),(i=i.concat(t)).push(2),l(i,r.length);var s=i.concat(r),n=[48];return l(n,s.length),n=n.concat(s),a.encode(n,e)}}],["elliptic","/lib/elliptic/eddsa/index.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(535,r),a=__browser_require__(534,r),h=__browser_require__(525,r),c=h.assert,u=h.parseBytes,f=__browser_require__(553,r),l=__browser_require__(554,r);function d(e){if(c("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof d))return new d(e);e=a[e].curve;this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=o.sha512}r.exports=d,d.prototype.sign=function(e,t){e=u(e);var r=this.keyFromSecret(t),i=this.hashInt(r.messagePrefix(),e),s=this.g.mul(i),n=this.encodePoint(s),o=this.hashInt(n,r.pubBytes(),e).mul(r.priv()),a=i.add(o).umod(this.curve.n);return this.makeSignature({R:s,S:a,Rencoded:n})},d.prototype.verify=function(e,t,r){e=u(e),t=this.makeSignature(t);var i=this.keyFromPublic(r),s=this.hashInt(t.Rencoded(),i.pubBytes(),e),n=this.g.mul(t.S());return t.R().add(i.pub().mul(s)).eq(n)},d.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return h.intFromLE(e.digest()).umod(this.curve.n)},d.prototype.keyFromPublic=function(e){return f.fromPublic(this,e)},d.prototype.keyFromSecret=function(e){return f.fromSecret(this,e)},d.prototype.makeSignature=function(e){return e instanceof l?e:new l(this,e)},d.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},d.prototype.decodePoint=function(e){var t=(e=h.parseBytes(e)).length-1,r=e.slice(0,t).concat(-129&e[t]),i=0!=(128&e[t]),s=h.intFromLE(r);return this.curve.pointFromY(s,i)},d.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},d.prototype.decodeInt=function(e){return h.intFromLE(e)},d.prototype.isPoint=function(e){return e instanceof this.pointClass}}],["elliptic","/lib/elliptic/eddsa/key.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(525,r),a=o.assert,h=o.parseBytes,c=o.cachedProperty;function u(e,t){this.eddsa=e,this._secret=h(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=h(t.pub)}u.fromPublic=function(e,t){return t instanceof u?t:new u(e,{pub:t})},u.fromSecret=function(e,t){return t instanceof u?t:new u(e,{secret:t})},u.prototype.secret=function(){return this._secret},c(u,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),c(u,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),c(u,"privBytes",function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,i=t.slice(0,e.encodingLength);return i[0]&=248,i[r]&=127,i[r]|=64,i}),c(u,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),c(u,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),c(u,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),u.prototype.sign=function(e){return a(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},u.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},u.prototype.getSecret=function(e){return a(this._secret,"KeyPair is public only"),o.encode(this.secret(),e)},u.prototype.getPublic=function(e){return o.encode(this.pubBytes(),e)},r.exports=u}],["elliptic","/lib/elliptic/eddsa/signature.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(521,r),a=__browser_require__(525,r),h=a.assert,c=a.cachedProperty,u=a.parseBytes;function f(e,t){this.eddsa=e,"object"!=typeof t&&(t=u(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),h(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof o&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}c(f,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),c(f,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),c(f,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),c(f,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),f.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},f.prototype.toHex=function(){return a.encode(this.toBytes(),"hex").toUpperCase()},r.exports=f}],["@trezor/utxo-lib","/src/hdnode.js",function(e,t,r,i,s,n){var o=__browser_require__(425,r).Buffer,a=__browser_require__(499,r),h=__browser_require__(468,r),c=__browser_require__(504,r),u=__browser_require__(432,r),f=__browser_require__(436,r),l=__browser_require__(488,r),d=__browser_require__(463,r),p=__browser_require__(496,r),b=__browser_require__(508,r),g=b.getCurveByName("secp256k1"),m=__browser_require__(514,r);function _(e,t){if(u(f.tuple("ECPair",f.Buffer256bit),arguments),!e.compressed)throw new TypeError("BIP32 only allows compressed keyPairs");this.keyPair=e,this.chainCode=t,this.depth=0,this.index=0,this.parentFingerprint=0,this.derivationCache={}}_.HIGHEST_BIT=2147483648,_.LENGTH=78,_.MASTER_SECRET=o.from("Bitcoin seed","utf8"),_.fromSeedBuffer=function(e,t){if(u(f.tuple(f.Buffer,f.maybe(f.Network)),arguments),e.length<16)throw new TypeError("Seed should be at least 128 bits");if(e.length>64)throw new TypeError("Seed should be at most 512 bits");var r=c("sha512",_.MASTER_SECRET).update(e).digest(),i=r.slice(0,32),s=r.slice(32),n=d.fromBuffer(i);return new _(new p(n,null,{network:t}),s)},_.fromSeedHex=function(e,t){return _.fromSeedBuffer(o.from(e,"hex"),t)},_.fromBase58=function(e,t,r=!1){var i=a.decode(e);if(78!==i.length)throw new Error("Invalid buffer length");var s,n=i.readUInt32BE(0);if(Array.isArray(t)){if(!(s=t.filter(function(e){return n===e.bip32.private||n===e.bip32.public}).pop()))throw new Error("Unknown network version")}else s=t||l.bitcoin;if(n!==s.bip32.private&&n!==s.bip32.public)throw new Error("Invalid network version");var o=i[4],h=i.readUInt32BE(5);if(0===o&&0!==h)throw new Error("Invalid parent fingerprint");var c=i.readUInt32BE(9);if(0===o&&0!==c)throw new Error("Invalid index");var u,f=i.slice(13,45);if(n===s.bip32.private){if(0!==i.readUInt8(45))throw new Error("Invalid private key");var m=d.fromBuffer(i.slice(46,78));u=new p(m,null,{network:s})}else{var w=b.Point.decodeFrom(g,i.slice(45,78));r||g.validate(w),u=new p(null,w,{network:s})}var y=new _(u,f);return y.depth=o,y.index=c,y.parentFingerprint=h,y},_.prototype.getAddress=function(){return this.keyPair.getAddress()},_.prototype.getIdentifier=function(){return h.hash160(this.keyPair.getPublicKeyBuffer())},_.prototype.getFingerprint=function(){return this.getIdentifier().slice(0,4)},_.prototype.getNetwork=function(){return this.keyPair.getNetwork()},_.prototype.getPublicKeyBuffer=function(){return this.keyPair.getPublicKeyBuffer()},_.prototype.neutered=function(){var e=new _(new p(null,this.keyPair.Q,{network:this.keyPair.network}),this.chainCode);return e.depth=this.depth,e.index=this.index,e.parentFingerprint=this.parentFingerprint,e},_.prototype.sign=function(e){return this.keyPair.sign(e)},_.prototype.verify=function(e,t){return this.keyPair.verify(e,t)},_.prototype.toBase58=function(e){if(e!==undefined)throw new TypeError("Unsupported argument in 2.0.0");var t=this.keyPair.network,r=this.isNeutered()?t.bip32.public:t.bip32.private,i=o.allocUnsafe(78);return i.writeUInt32BE(r,0),i.writeUInt8(this.depth,4),i.writeUInt32BE(this.parentFingerprint,5),i.writeUInt32BE(this.index,9),this.chainCode.copy(i,13),this.isNeutered()?this.keyPair.getPublicKeyBuffer().copy(i,45):(i.writeUInt8(0,45),this.keyPair.d.toBuffer(32).copy(i,46)),a.encode(i)},_.prototype.derive=function(e){u(f.UInt32,e);var t=e>=_.HIGHEST_BIT,r=o.allocUnsafe(37);if(t){if(this.isNeutered())throw new TypeError("Could not derive hardened child key");r[0]=0,this.keyPair.d.toBuffer(32).copy(r,1),r.writeUInt32BE(e,33)}else this.keyPair.getPublicKeyBuffer().copy(r,0),r.writeUInt32BE(e,33);var i,s=c("sha512",this.chainCode).update(r).digest(),n=s.slice(0,32),a=s.slice(32),h=d.fromBuffer(n);if(h.compareTo(g.n)>=0)return this.derive(e+1);if(this.isNeutered()){var l=m.publicKeyCreate(n,!1),w=l!==undefined?b.Point.decodeFrom(g,l).add(this.keyPair.Q):g.G.multiply(h).add(this.keyPair.Q);if(g.isInfinity(w))return this.derive(e+1);i=new p(null,w,{network:this.keyPair.network})}else{var y=h.add(this.keyPair.d).mod(g.n);if(0===y.signum())return this.derive(e+1);i=new p(y,null,{network:this.keyPair.network})}var v=new _(i,a);return v.depth=this.depth+1,v.index=e,v.parentFingerprint=this.getFingerprint().readUInt32BE(0),v},_.prototype.deriveHardened=function(e){return u(f.UInt31,e),this.derive(e+_.HIGHEST_BIT)},_.prototype.isNeutered=function(){return!this.keyPair.d},_.prototype.derivePath=function(e,t){u(f.BIP32Path,e),u(f.maybe(f.Object),t),t=t||this.derivationCache;var r=e.split("/");if("m"===r[0]){if(this.parentFingerprint)throw new Error("Not a master node");r=r.slice(1)}return r.reduce(function(e,r){var i,s=t[r]||{};return s.node?(t=s.next,s.node):("'"===r.slice(-1)?(i=parseInt(r.slice(0,-1),10),s.node=e.deriveHardened(i)):(i=parseInt(r,10),s.node=e.derive(i)),t[r]=s,s.next={},t=s.next,s.node)},this)},_.prototype.cloneKeypair=function(){var e=this.keyPair,t=new p(e.d,e.d?null:e.Q,{network:e.network,compressed:e.compressed});if(!t.__Q){var r=m.publicKeyCreate(e.d.toBuffer(32),!1);r!==undefined&&(t.__Q=b.Point.decodeFrom(g,r))}return t},r.exports=_}],["@trezor/utxo-lib","/src/transaction_builder.js",function(e,t,r,i,s,n){var o=__browser_require__(425,r).Buffer,a=__browser_require__(497,r),h=__browser_require__(468,r),c=__browser_require__(428,r),u=__browser_require__(439,r),f=__browser_require__(489,r),l=__browser_require__(488,r),d=__browser_require__(431,r),p=__browser_require__(432,r),b=__browser_require__(436,r),g=u.types,m=[u.types.P2PKH,u.types.P2PK,u.types.MULTISIG],_=m.concat([u.types.P2WPKH,u.types.P2WSH]),w=__browser_require__(496,r),y=__browser_require__(507,r),v=__browser_require__(490,r),E=__browser_require__(557,r)("bitgo:utxolib:txbuilder");function S(e){return-1!==m.indexOf(e)}function I(e){return-1!==_.indexOf(e)}function k(e,t){if(0===e.length&&0===t.length)return{};var r,i,s,n,o,a,f,l,d,p,b=!1,m=!1,_=!1,w=c.decompile(e);u.classifyInput(w,!0)===g.P2SH&&(_=!0,o=w[w.length-1],l=u.classifyOutput(o),r=u.scriptHash.output.encode(h.hash160(o)),i=g.P2SH,n=o);var y=u.classifyWitness(t,!0);if(y===g.P2WSH){if(a=t[t.length-1],f=u.classifyOutput(a),m=!0,b=!0,0===e.length){if(r=u.witnessScriptHash.output.encode(h.sha256(a)),i=g.P2WSH,o!==undefined)throw new Error("Redeem script given when unnecessary")}else{if(!o)throw new Error("No redeemScript provided for P2WSH, but scriptSig non-empty");if(d=u.witnessScriptHash.output.encode(h.sha256(a)),!o.equals(d))throw new Error("Redeem script didn't match witnessScript")}if(!S(u.classifyOutput(a)))throw new Error("unsupported witness script");n=a,s=f,p=t.slice(0,-1)}else if(y===g.P2WPKH){b=!0;var v=t[t.length-1],E=h.hash160(v);if(0===e.length){if(r=u.witnessPubKeyHash.output.encode(E),i=g.P2WPKH,void 0!==o)throw new Error("Redeem script given when unnecessary")}else{if(!o)throw new Error("No redeemScript provided for P2WPKH, but scriptSig wasn't empty");if(d=u.witnessPubKeyHash.output.encode(E),!o.equals(d))throw new Error("Redeem script did not have the right witness program")}s=g.P2PKH,p=t}else if(o){if(!I(l))throw new Error("Bad redeemscript!");n=o,s=l,p=w.slice(0,-1)}else i=s=u.classifyInput(e),p=w;var k=function(e,t,r){var i=[],s=[];switch(e){case g.P2PKH:i=t.slice(1),s=t.slice(0,1);break;case g.P2PK:i[0]=r?u.pubKey.output.decode(r):undefined,s=t.slice(0,1);break;case g.MULTISIG:r&&(i=u.multisig.output.decode(r).pubKeys),s=t.slice(1).map(function(e){return 0===e.length?undefined:e})}return{pubKeys:i,signatures:s}}(s,p,n),A={pubKeys:k.pubKeys,signatures:k.signatures,prevOutScript:r,prevOutType:i,signType:s,signScript:n,witness:Boolean(b)};return _&&(A.redeemScript=o,A.redeemScriptType=l),m&&(A.witnessScript=a,A.witnessScriptType=f),A}function A(e,t,r){p(b.Buffer,e);var i=c.decompile(e);t||(t=u.classifyOutput(e));var s=[];switch(t){case g.P2PKH:if(!r)break;var n=i[2],o=h.hash160(r);n.equals(o)&&(s=[r]);break;case g.P2WPKH:if(!r)break;var a=i[1],f=h.hash160(r);a.equals(f)&&(s=[r]);break;case g.P2PK:s=i.slice(0,1);break;case g.MULTISIG:s=i.slice(1,-2);break;default:return{scriptType:t}}return{pubKeys:s,scriptType:t,signatures:s.map(function(){return undefined})}}function O(e,t){if(e.prevOutType){if(e.prevOutType!==g.P2SH)throw new Error("PrevOutScript must be P2SH");if(!c.decompile(e.prevOutScript)[1].equals(t))throw new Error("Inconsistent hash160(RedeemScript)")}}function x(e,t,r,i,s){var n,o,a,f,l,d,p,b,m,_=!1,w=!1,y=!1;if(r&&s){if(l=h.hash160(r),p=h.sha256(s),O(e,l),!r.equals(u.witnessScriptHash.output.encode(p)))throw new Error("Witness script inconsistent with redeem script");if(!(n=A(s,undefined,t)).pubKeys)throw new Error('WitnessScript not supported "'+c.toASM(r)+'"');o=u.types.P2SH,a=u.scriptHash.output.encode(l),_=w=y=!0,f=u.types.P2WSH,b=d=n.scriptType,m=s}else if(r){if(O(e,l=h.hash160(r)),!(n=A(r,undefined,t)).pubKeys)throw new Error('RedeemScript not supported "'+c.toASM(r)+'"');o=u.types.P2SH,a=u.scriptHash.output.encode(l),_=!0,m=r,w=(b=f=n.scriptType)===u.types.P2WPKH}else if(s){if(function(e,t){if(e.prevOutType){if(e.prevOutType!==g.P2WSH)throw new Error("PrevOutScript must be P2WSH");if(!c.decompile(e.prevOutScript)[1].equals(t))throw new Error("Inconsistent sha25(WitnessScript)")}}(e,p=h.sha256(s)),!(n=A(s,undefined,t)).pubKeys)throw new Error('WitnessScript not supported "'+c.toASM(r)+'"');o=u.types.P2WSH,a=u.witnessScriptHash.output.encode(p),w=y=!0,b=d=n.scriptType,m=s}else if(e.prevOutType){if(e.prevOutType===g.P2SH||e.prevOutType===g.P2WSH)throw new Error("PrevOutScript is "+e.prevOutType+", requires redeemScript");if(o=e.prevOutType,a=e.prevOutScript,!(n=A(e.prevOutScript,e.prevOutType,t)).pubKeys)return;w=e.prevOutType===g.P2WPKH,b=o,m=a}else n=A(a=u.pubKeyHash.output.encode(h.hash160(t)),g.P2PKH,t),w=!1,b=o=g.P2PKH,m=a;b===g.P2WPKH&&(m=u.pubKeyHash.output.encode(u.witnessPubKeyHash.output.decode(m))),_&&(e.redeemScript=r,e.redeemScriptType=f),y&&(e.witnessScript=s,e.witnessScriptType=d),e.pubKeys=n.pubKeys,e.signatures=n.signatures,e.signScript=m,e.signType=b,e.prevOutScript=a,e.prevOutType=o,e.witness=w}function R(e,t,r,i){if(e===g.P2PKH){if(1===t.length&&null!=t[0]&&!0===t[0]._isBuffer&&1===r.length)return u.pubKeyHash.input.encodeStack(t[0],r[0])}else if(e===g.P2PK){if(1===t.length&&null!=t[0]&&!0===t[0]._isBuffer)return u.pubKey.input.encodeStack(t[0])}else{if(e!==g.MULTISIG)throw new Error("Not yet supported");if(t.length>0)return t=t.map(function(e){return e||d.OP_0}),i||(t=t.filter(function(e){return e!==d.OP_0})),u.multisig.input.encodeStack(t)}if(!i)throw new Error("Not enough signatures provided");return[]}function M(e,t){this.prevTxMap={},this.network=e||l.bitcoin,this.maximumFeeRate=t||2500,this.inputs=[],this.tx=new v(this.network)}function P(e){return e.prevOutScript!==undefined&&e.signScript!==undefined&&e.pubKeys!==undefined&&e.signatures!==undefined&&e.signatures.length===e.pubKeys.length&&e.pubKeys.length>0&&(!1===e.witness||!0===e.witness&&e.value!==undefined)}function B(e){return e.readUInt8(e.length-1)}M.prototype.setLockTime=function(e){if(p(b.UInt32,e),this.inputs.some(function(e){return!!e.signatures&&e.signatures.some(function(e){return e})}))throw new Error("No, this would invalidate signatures");this.tx.locktime=e},M.prototype.setVersion=function(e,t=!0){if(p(b.UInt32,e),f.isZcashType(this.network)){if(!this.network.consensusBranchId.hasOwnProperty(this.tx.version))throw new Error("Unsupported Zcash transaction");this.tx.overwintered=t?1:0}this.tx.version=e},M.prototype.setVersionGroupId=function(e){if(!f.isZcashType(this.network)||!this.tx.isOverwinterCompatible())throw new Error("expiryHeight can only be set for Zcash starting at overwinter version. Current network coin: "+this.network.coin+", version: "+this.tx.version);p(b.UInt32,e),this.tx.versionGroupId=e},M.prototype.setExpiryHeight=function(e){if(!f.isZcashType(this.network)||!this.tx.isOverwinterCompatible())throw new Error("expiryHeight can only be set for Zcash starting at overwinter version. Current network coin: "+this.network.coin+", version: "+this.tx.version);p(b.UInt32,e),this.tx.expiryHeight=e},M.prototype.setJoinSplits=function(e){if(!f.isZcashType(this.network)||!this.tx.supportsJoinSplits())throw new Error("joinsplits can only be set for Zcash starting at version 2. Current network coin: "+this.network.coin+", version: "+this.tx.version);if(e&&e.joinsplits)return this.tx.joinsplits=e.joinsplits.map(function(e){return{vpubOld:e.vpubOld,vpubNew:e.vpubNew,anchor:e.anchor,nullifiers:e.nullifiers,commitments:e.commitments,ephemeralKey:e.ephemeralKey,randomSeed:e.randomSeed,macs:e.macs,zproof:e.zproof,ciphertexts:e.ciphertexts}}),this.tx.joinsplitPubkey=e.joinsplitPubkey,void(this.tx.joinsplitSig=e.joinsplitSig);throw new Error("Invalid transaction with joinsplits")},M.fromTransaction=function(e,t){var r=t||l.bitcoin,i=new M(r);if(i.network.coin!==e.network.coin)throw new Error("This transaction is incompatible with the transaction builder");return i.setVersion(e.version,e.overwintered),i.setLockTime(e.locktime),f.isZcashType(r)&&(i.tx.isOverwinterCompatible()&&(i.setVersionGroupId(e.versionGroupId),i.setExpiryHeight(e.expiryHeight)),i.tx.supportsJoinSplits()&&i.setJoinSplits(e)),f.isDash(r)&&(p(b.UInt16,e.type),i.tx.type=e.type,i.tx.versionSupportsDashSpecialTransactions()&&(p(b.Buffer,e.extraPayload),i.tx.extraPayload=e.extraPayload)),e.outs.forEach(function(e){i.addOutput(e.script,e.value)}),e.ins.forEach(function(e){i.__addInputUnsafe(e.hash,e.index,{sequence:e.sequence,script:e.script,witness:e.witness,value:e.value})}),i.inputs.forEach(function(t,i){!function(e,t,r,i,s){if(e.redeemScriptType===g.MULTISIG&&e.redeemScript&&e.pubKeys.length!==e.signatures.length){s=s||l.bitcoin;var n=e.signatures.concat();e.signatures=e.pubKeys.map(function(o){var a,h=w.fromPublicKeyBuffer(o);return n.some(function(o,c){if(!o)return!1;var u,l=y.parseScriptSignature(o);switch(s.coin){case f.BSV:case f.BCH:u=t.hashForCashSignature(r,e.signScript,i,l.hashType);break;case f.BTG:u=t.hashForGoldSignature(r,e.signScript,i,l.hashType);break;case f.ZEC:case f.TAZ:if(i===undefined)return!1;u=t.hashForZcashSignature(r,e.signScript,i,l.hashType);break;default:u=e.witness?t.hashForWitnessV0(r,e.signScript,i,l.hashType):t.hashForSignature(r,e.signScript,l.hashType)}return!!h.verify(u,l.signature)&&(n[c]=undefined,a=o,!0)}),a})}}(t,e,i,t.value,r)}),i},M.prototype.addInput=function(e,t,r,i){if(!this.__canModifyInputs())throw new Error("No, this would invalidate signatures");var s;if("string"==typeof e)e=o.from(e,"hex").reverse();else if(e instanceof v){var n=e.outs[t];i=n.script,s=n.value,e=e.getHash()}return this.__addInputUnsafe(e,t,{sequence:r,prevOutScript:i,value:s})},M.prototype.__addInputUnsafe=function(e,t,r){if(v.isCoinbaseHash(e))throw new Error("coinbase inputs not supported");var i=e.toString("hex")+":"+t;if(this.prevTxMap[i]!==undefined)throw new Error("Duplicate TxOut: "+i);var s={};if(r.script!==undefined&&(s=k(r.script,r.witness||[])),r.value!==undefined&&(s.value=r.value),!s.prevOutScript&&r.prevOutScript){var n;if(!s.pubKeys&&!s.signatures){var o=A(r.prevOutScript);o.pubKeys&&(s.pubKeys=o.pubKeys,s.signatures=o.signatures),n=o.scriptType}s.prevOutScript=r.prevOutScript,s.prevOutType=n||u.classifyOutput(r.prevOutScript)}var a=this.tx.addInput(e,t,r.sequence,r.scriptSig);return this.inputs[a]=s,this.prevTxMap[i]=a,a},M.prototype.addOutput=function(e,t){if(!this.__canModifyOutputs())throw new Error("No, this would invalidate signatures");return"string"==typeof e&&(e=a.toOutputScript(e,this.network)),this.tx.addOutput(e,t)},M.prototype.build=function(){return this.__build(!1)},M.prototype.buildIncomplete=function(){return this.__build(!0)},M.prototype.__build=function(e){if(!e){if(!this.tx.ins.length)throw new Error("Transaction has no inputs");if(!this.tx.outs.length)throw new Error("Transaction has no outputs")}var t=this.tx.clone();if(this.inputs.forEach(function(r,i){if(!(r.witnessScriptType||r.redeemScriptType||r.prevOutType)&&!e)throw new Error("Transaction is not complete");var s=function(e,t){var r=e.prevOutType,i=[],s=[];S(r)&&(i=R(r,e.signatures,e.pubKeys,t));var n=!1;if(r===u.types.P2SH){if(!t&&!I(e.redeemScriptType))throw new Error("Impossible to sign this type");S(e.redeemScriptType)&&(i=R(e.redeemScriptType,e.signatures,e.pubKeys,t)),e.redeemScriptType&&(n=!0,r=e.redeemScriptType)}switch(r){case u.types.P2WPKH:s=R(u.types.P2PKH,e.signatures,e.pubKeys,t);break;case u.types.P2WSH:if(!t&&!S(e.witnessScriptType))throw new Error("Impossible to sign this type");S(e.witnessScriptType)&&((s=R(e.witnessScriptType,e.signatures,e.pubKeys,t)).push(e.witnessScript),r=e.witnessScriptType)}return n&&i.push(e.redeemScript),{type:r,script:c.compile(i),witness:s}}(r,e);if(!e&&!S(s.type)&&s.type!==u.types.P2WPKH)throw new Error(s.type+" not supported");t.setInputScript(i,s.script),t.setWitness(i,s.witness)}),!e&&this.__overMaximumFees(t.virtualSize()))throw new Error("Transaction has absurd fees");return t},M.prototype.sign=function(e,t,r,i,s,n){if(E("Signing transaction: (input: %d, hashType: %d, witnessVal: %s, witnessScript: %j)",e,i,s,n),E("Transaction Builder network: %j",this.network),t.network&&t.network!==this.network)throw new TypeError("Inconsistent network");if(!this.inputs[e])throw new Error("No input at index: "+e);i=i||v.SIGHASH_ALL;var o=this.inputs[e];if(o.redeemScript!==undefined&&r&&!o.redeemScript.equals(r))throw new Error("Inconsistent redeemScript");var a,h=t.publicKey||t.getPublicKeyBuffer();if(!P(o)){if(s!==undefined){if(o.value!==undefined&&o.value!==s)throw new Error("Input didn't match witnessValue");p(b.Satoshi,s),o.value=s}if(E("Preparing input %d for signing",e),P(o)||x(o,h,r,0,n),!P(o))throw Error(o.prevOutType+" not supported")}if(f.isBitcoinGold(this.network)?(a=this.tx.hashForGoldSignature(e,o.signScript,s,i,o.witness),E("Calculated BTG sighash (%s)",a.toString("hex"))):f.isBitcoinCash(this.network)||f.isBitcoinSV(this.network)?(a=this.tx.hashForCashSignature(e,o.signScript,s,i),E("Calculated BCH sighash (%s)",a.toString("hex"))):f.isZcashType(this.network)?(a=this.tx.hashForZcashSignature(e,o.signScript,s,i),E("Calculated ZEC sighash (%s)",a.toString("hex"))):o.witness?(a=this.tx.hashForWitnessV0(e,o.signScript,s,i),E("Calculated witnessv0 sighash (%s)",a.toString("hex"))):(a=this.tx.hashForSignature(e,o.signScript,i),E("Calculated sighash (%s)",a.toString("hex"))),!o.pubKeys.some(function(e,r){if(!h.equals(e))return!1;if(o.signatures[r])throw new Error("Signature already exists");if(33!==h.length&&o.signType===g.P2WPKH)throw new Error("BIP143 rejects uncompressed public keys in P2WPKH or P2WSH");var s=t.sign(a);return null!=s&&!0===s._isBuffer&&(s=y.fromRSBuffer(s)),E("Produced signature (r: %s, s: %s)",s.r,s.s),o.signatures[r]=s.toScriptSignature(i),!0}))throw new Error("Key pair cannot sign for this input")},M.prototype.__canModifyInputs=function(){return this.inputs.every(function(e){return e.signatures===undefined||e.signatures.every(function(e){return!e||B(e)&v.SIGHASH_ANYONECANPAY})})},M.prototype.__canModifyOutputs=function(){var e=this.tx.ins.length,t=this.tx.outs.length;return this.inputs.every(function(r){return r.signatures===undefined||r.signatures.every(function(r){if(!r)return!0;var i=31&B(r);return i===v.SIGHASH_NONE||(i===v.SIGHASH_SINGLE?e<=t:void 0)})})},M.prototype.__overMaximumFees=function(e){return(this.inputs.reduce(function(e,t){return e+(t.value>>>0)},0)-this.tx.outs.reduce(function(e,t){return e+t.value},0))/e>this.maximumFeeRate},r.exports=M}],["debug","/src/browser.js",function(e,t,r,i,s,n){function o(){var t;try{t=e.storage.debug}catch(e){}return!t&&void 0!==process&&"env"in process&&(t=process.env.DEBUG),t}(e=r.exports=__browser_require__(558,r)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var r=this.useColors;if(t[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+t[0]+(r?"%c ":" ")+"+"+e.humanize(this.diff),!r)return;var i="color: "+this.color;t.splice(1,0,i,"color: inherit");var s=0,n=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&"%c"===e&&(n=++s)}),t.splice(n,0,i)},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(e){}},e.load=o,e.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},e.enable(o())}],["debug","/src/debug.js",function(e,t,r,i,s,n){function o(t){var r;function i(){if(i.enabled){var t=i,s=+new Date,n=s-(r||s);t.diff=n,t.prev=r,t.curr=s,r=s;for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=e.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var h=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(r,i){if("%%"===r)return r;h++;var s=e.formatters[i];if("function"==typeof s){var n=o[h];r=s.call(t,n),o.splice(h,1),h--}return r}),e.formatArgs.call(t,o),(i.log||e.log||console.log.bind(console)).apply(t,o)}}return i.namespace=t,i.enabled=e.enabled(t),i.useColors=e.useColors(),i.color=function(t){var r,i=0;for(r in t)i=(i<<5)-i+t.charCodeAt(r),i|=0;return e.colors[Math.abs(i)%e.colors.length]}(t),i.destroy=a,"function"==typeof e.init&&e.init(i),e.instances.push(i),i}function a(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=r.exports=o.debug=o.default=o).coerce=function(e){return e instanceof Error?e.stack||e.message:e},e.disable=function(){e.enable("")},e.enable=function(t){var r;e.save(t),e.names=[],e.skips=[];var i=("string"==typeof t?t:"").split(/[\s,]+/),s=i.length;for(r=0;r<s;r++)i[r]&&("-"===(t=i[r].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(r=0;r<e.instances.length;r++){var n=e.instances[r];n.enabled=e.enabled(n.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var r,i;for(r=0,i=e.skips.length;r<i;r++)if(e.skips[r].test(t))return!1;for(r=0,i=e.names.length;r<i;r++)if(e.names[r].test(t))return!0;return!1},e.humanize=__browser_require__(559,r),e.instances=[],e.names=[],e.skips=[],e.formatters={}}],["ms","/index.js",function(e,t,r,i,s,n){var o=1e3,a=60*o,h=60*a,c=24*h,u=365.25*c;function f(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}r.exports=function(e,t){t=t||{};var r,i=typeof e;if("string"===i&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*u;case"days":case"day":case"d":return r*c;case"hours":case"hour":case"hrs":case"hr":case"h":return r*h;case"minutes":case"minute":case"mins":case"min":case"m":return r*a;case"seconds":case"second":case"secs":case"sec":case"s":return r*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return undefined}}(e);if("number"===i&&!1===isNaN(e))return t.long?f(r=e,c,"day")||f(r,h,"hour")||f(r,a,"minute")||f(r,o,"second")||r+" ms":function(e){if(e>=c)return Math.round(e/c)+"d";if(e>=h)return Math.round(e/h)+"h";if(e>=a)return Math.round(e/a)+"m";if(e>=o)return Math.round(e/o)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}],["trezor-connect","/lib/utils/hdnode.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r);e.__esModule=!0,e.xpubToHDNodeType=e.xpubDerive=e.convertBitcoinXpub=e.convertXpub=void 0;o(__browser_require__(561,r));var a=o(__browser_require__(427,r)),h=o(__browser_require__(508,r));const c=h.getCurveByName("secp256k1"),u=(e,t,r)=>{const i=a.HDNode.fromBase58(e,t);return r&&(i.keyPair.network=r),i.toBase58()};e.convertXpub=u;e.convertBitcoinXpub=((e,t)=>{if(76067358===t.bip32.public)return e;{const r=a.HDNode.fromBase58(e);return r.keyPair.network=t,r.toBase58()}});const f=(e,t)=>{const r=((e,t)=>{const r=Buffer.from(e.chain_code,"hex"),i=Buffer.from(e.public_key,"hex");if(null==c)throw new Error("secp256k1 is null");const s=h.Point.decodeFrom(c,i),n=new a.HDNode(new a.ECPair(null,s,{network:t}),r);return n.depth=+e.depth,n.index=+e.child_num,n.parentFingerprint=e.fingerprint,n})(e.node,t),i=r.toBase58(),s=u(e.xpub,t);if(i!==s)throw new Error("Invalid public key transmission detected - invalid xpub check. Key: "+i+", Received: "+s);return r};e.xpubDerive=((e,t,r,i,s)=>{return((e,t,r)=>{const i=e.derive(r).toBase58(),s=t.toBase58();if(i!==s)throw new Error("Invalid public key transmission detected - invalid child cross-check. Computed derived: "+i+", Computed received: "+s)})(f(e,i||a.networks.bitcoin),f(t,i||a.networks.bitcoin),r),e});e.xpubToHDNodeType=((e,t)=>{const r=a.HDNode.fromBase58(e,t);return{depth:r.depth,child_num:r.index,fingerprint:r.parentFingerprint,public_key:r.keyPair.getPublicKeyBuffer().toString("hex"),chain_code:r.chainCode.toString("hex")}})}],["trezor-connect","/lib/types/trezor.js",function(e,t,r,i,s,n){"use strict"}],["trezor-connect","/lib/utils/accountUtils.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.getAccountLabel=e.getAccountAddressN=void 0;var a=o(__browser_require__(384,r)),h=__browser_require__(413,r);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}e.getAccountAddressN=((e,t,r)=>{if(!e)throw new Error("no coin info");const i="number"==typeof t?t:0,s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({purpose:44,coinType:e.slip44},r);return"bitcoin"===e.type?[(0,h.toHardened)(s.purpose),(0,h.toHardened)(s.coinType),(0,h.toHardened)(i)]:"ethereum"===e.type?[(0,h.toHardened)(s.purpose),(0,h.toHardened)(s.coinType),(0,h.toHardened)(0),0,i]:"tXRP"===e.shortcut?[(0,h.toHardened)(s.purpose),(0,h.toHardened)(144),(0,h.toHardened)(i),0,0]:[(0,h.toHardened)(s.purpose),(0,h.toHardened)(s.coinType),(0,h.toHardened)(i),0,0]});e.getAccountLabel=((e,t)=>{if("bitcoin"===t.type){const r=(0,h.fromHardened)(e[0]),i=(0,h.fromHardened)(e[2]);let s="";return 48===r?s="multisig":49===r&&t.segwit?s="segwit":44===r&&t.segwit&&(s="legacy"),`${s} <span>account #${i+1}</span>`}return`account #${(0,h.fromHardened)(e[4])+1}`})}],["trezor-connect","/lib/utils/ethereumUtils.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.getNetworkLabel=e.toChecksumAddress=void 0;var a=o(__browser_require__(564,r)),h=__browser_require__(570,r);e.toChecksumAddress=((e,t)=>{if((0,h.hasHexPrefix)(e))return e;let r=(0,h.stripHexPrefix)(e);t&&t.rskip60&&(r=t.chainId+"0x"+e);const i=(0,a.default)("keccak256").update(r).digest("hex");let s="0x";for(let t=0;t<e.length;t++)parseInt(i[t],16)>=8?s+=e[t].toUpperCase():s+=e[t];return s});e.getNetworkLabel=((e,t)=>{if(t){const r=t.name.toLowerCase().indexOf("testnet")>=0?"Testnet":t.name;return e.replace("#NETWORK",r)}return e.replace("#NETWORK","")})}],["keccak","/js.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(565,r)(__browser_require__(568,r))}],["keccak","/lib/api/index.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(566,r),a=__browser_require__(567,r);r.exports=function(e){const t=o(e),r=a(e);return function(e,i){switch("string"==typeof e?e.toLowerCase():e){case"keccak224":return new t(1152,448,null,224,i);case"keccak256":return new t(1088,512,null,256,i);case"keccak384":return new t(832,768,null,384,i);case"keccak512":return new t(576,1024,null,512,i);case"sha3-224":return new t(1152,448,6,224,i);case"sha3-256":return new t(1088,512,6,256,i);case"sha3-384":return new t(832,768,6,384,i);case"sha3-512":return new t(576,1024,6,512,i);case"shake128":return new r(1344,256,31,i);case"shake256":return new r(1088,512,31,i);default:throw new Error("Invald algorithm: "+e)}}}}],["keccak","/lib/api/keccak.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(425,r).Buffer,a=__browser_require__(473,r).Transform,h=__browser_require__(470,r);r.exports=function(e){function t(t,r,i,s,n){a.call(this,n),this._rate=t,this._capacity=r,this._delimitedSuffix=i,this._hashBitLength=s,this._options=n,this._state=new e,this._state.initialize(t,r),this._finalized=!1}return h(t,a),t.prototype._transform=function(e,t,r){let i=null;try{this.update(e,t)}catch(e){i=e}r(i)},t.prototype._flush=function(e){let t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},t.prototype.update=function(e,t){if((null==e||!0!==e._isBuffer)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return null!=e&&!0===e._isBuffer||(e=o.from(e,t)),this._state.absorb(e),this},t.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let t=this._state.squeeze(this._hashBitLength/8);return e!==undefined&&(t=t.toString(e)),this._resetState(),t},t.prototype._resetState=function(){return this._state.initialize(this._rate,this._capacity),this},t.prototype._clone=function(){const e=new t(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(e._state),e._finalized=this._finalized,e},t}}],["keccak","/lib/api/shake.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(425,r).Buffer,a=__browser_require__(473,r).Transform,h=__browser_require__(470,r);r.exports=function(e){function t(t,r,i,s){a.call(this,s),this._rate=t,this._capacity=r,this._delimitedSuffix=i,this._options=s,this._state=new e,this._state.initialize(t,r),this._finalized=!1}return h(t,a),t.prototype._transform=function(e,t,r){let i=null;try{this.update(e,t)}catch(e){i=e}r(i)},t.prototype._flush=function(){},t.prototype._read=function(e){this.push(this.squeeze(e))},t.prototype.update=function(e,t){if((null==e||!0!==e._isBuffer)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return null!=e&&!0===e._isBuffer||(e=o.from(e,t)),this._state.absorb(e),this},t.prototype.squeeze=function(e,t){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let r=this._state.squeeze(e);return t!==undefined&&(r=r.toString(t)),r},t.prototype._resetState=function(){return this._state.initialize(this._rate,this._capacity),this},t.prototype._clone=function(){const e=new t(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(e._state),e._finalized=this._finalized,e},t}}],["keccak","/lib/keccak.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(425,r).Buffer,a=__browser_require__(569,r);function h(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}h.prototype.initialize=function(e,t){for(let e=0;e<50;++e)this.state[e]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1},h.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<this.count%4*8,this.count+=1,this.count===this.blockSize&&(a.p1600(this.state),this.count=0)},h.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<this.count%4*8,0!=(128&e)&&this.count===this.blockSize-1&&a.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<(this.blockSize-1)%4*8,a.p1600(this.state),this.count=0,this.squeezing=!0},h.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);const t=o.alloc(e);for(var r=0;r<e;++r)t[r]=this.state[~~(this.count/4)]>>>this.count%4*8&255,this.count+=1,this.count===this.blockSize&&(a.p1600(this.state),this.count=0);return t},h.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing},r.exports=h}],["keccak","/lib/keccak-state-unroll.js",function(e,t,r,i,s,n){"use strict";const o=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];e.p1600=function(e){for(let t=0;t<24;++t){const r=e[0]^e[10]^e[20]^e[30]^e[40],i=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],n=e[3]^e[13]^e[23]^e[33]^e[43],a=e[4]^e[14]^e[24]^e[34]^e[44],h=e[5]^e[15]^e[25]^e[35]^e[45],c=e[6]^e[16]^e[26]^e[36]^e[46],u=e[7]^e[17]^e[27]^e[37]^e[47],f=e[8]^e[18]^e[28]^e[38]^e[48],l=e[9]^e[19]^e[29]^e[39]^e[49];let d=f^(s<<1|n>>>31),p=l^(n<<1|s>>>31);const b=e[0]^d,g=e[1]^p,m=e[10]^d,_=e[11]^p,w=e[20]^d,y=e[21]^p,v=e[30]^d,E=e[31]^p,S=e[40]^d,I=e[41]^p;d=r^(a<<1|h>>>31),p=i^(h<<1|a>>>31);const k=e[2]^d,A=e[3]^p,O=e[12]^d,x=e[13]^p,R=e[22]^d,M=e[23]^p,P=e[32]^d,B=e[33]^p,N=e[42]^d,T=e[43]^p;d=s^(c<<1|u>>>31),p=n^(u<<1|c>>>31);const C=e[4]^d,q=e[5]^p,j=e[14]^d,D=e[15]^p,U=e[24]^d,L=e[25]^p,z=e[34]^d,F=e[35]^p,H=e[44]^d,V=e[45]^p;d=a^(f<<1|l>>>31),p=h^(l<<1|f>>>31);const K=e[6]^d,W=e[7]^p,G=e[16]^d,Y=e[17]^p,X=e[26]^d,J=e[27]^p,Q=e[36]^d,Z=e[37]^p,$=e[46]^d,ee=e[47]^p;d=c^(r<<1|i>>>31),p=u^(i<<1|r>>>31);const te=e[8]^d,re=e[9]^p,ie=e[18]^d,se=e[19]^p,ne=e[28]^d,oe=e[29]^p,ae=e[38]^d,he=e[39]^p,ce=e[48]^d,ue=e[49]^p,fe=b,le=g,de=_<<4|m>>>28,pe=m<<4|_>>>28,be=w<<3|y>>>29,ge=y<<3|w>>>29,me=E<<9|v>>>23,_e=v<<9|E>>>23,we=S<<18|I>>>14,ye=I<<18|S>>>14,ve=k<<1|A>>>31,Ee=A<<1|k>>>31,Se=x<<12|O>>>20,Ie=O<<12|x>>>20,ke=R<<10|M>>>22,Ae=M<<10|R>>>22,Oe=B<<13|P>>>19,xe=P<<13|B>>>19,Re=N<<2|T>>>30,Me=T<<2|N>>>30,Pe=q<<30|C>>>2,Be=C<<30|q>>>2,Ne=j<<6|D>>>26,Te=D<<6|j>>>26,Ce=L<<11|U>>>21,qe=U<<11|L>>>21,je=z<<15|F>>>17,De=F<<15|z>>>17,Ue=V<<29|H>>>3,Le=H<<29|V>>>3,ze=K<<28|W>>>4,Fe=W<<28|K>>>4,He=Y<<23|G>>>9,Ve=G<<23|Y>>>9,Ke=X<<25|J>>>7,We=J<<25|X>>>7,Ge=Q<<21|Z>>>11,Ye=Z<<21|Q>>>11,Xe=ee<<24|$>>>8,Je=$<<24|ee>>>8,Qe=te<<27|re>>>5,Ze=re<<27|te>>>5,$e=ie<<20|se>>>12,et=se<<20|ie>>>12,tt=oe<<7|ne>>>25,rt=ne<<7|oe>>>25,it=ae<<8|he>>>24,st=he<<8|ae>>>24,nt=ce<<14|ue>>>18,ot=ue<<14|ce>>>18;e[0]=fe^~Se&Ce,e[1]=le^~Ie&qe,e[10]=ze^~$e&be,e[11]=Fe^~et&ge,e[20]=ve^~Ne&Ke,e[21]=Ee^~Te&We,e[30]=Qe^~de&ke,e[31]=Ze^~pe&Ae,e[40]=Pe^~He&tt,e[41]=Be^~Ve&rt,e[2]=Se^~Ce&Ge,e[3]=Ie^~qe&Ye,e[12]=$e^~be&Oe,e[13]=et^~ge&xe,e[22]=Ne^~Ke&it,e[23]=Te^~We&st,e[32]=de^~ke&je,e[33]=pe^~Ae&De,e[42]=He^~tt&me,e[43]=Ve^~rt&_e,e[4]=Ce^~Ge&nt,e[5]=qe^~Ye&ot,e[14]=be^~Oe&Ue,e[15]=ge^~xe&Le,e[24]=Ke^~it&we,e[25]=We^~st&ye,e[34]=ke^~je&Xe,e[35]=Ae^~De&Je,e[44]=tt^~me&Re,e[45]=rt^~_e&Me,e[6]=Ge^~nt&fe,e[7]=Ye^~ot&le,e[16]=Oe^~Ue&ze,e[17]=xe^~Le&Fe,e[26]=it^~we&ve,e[27]=st^~ye&Ee,e[36]=je^~Xe&Qe,e[37]=De^~Je&Ze,e[46]=me^~Re&Pe,e[47]=_e^~Me&Be,e[8]=nt^~fe&Se,e[9]=ot^~le&Ie,e[18]=Ue^~ze&$e,e[19]=Le^~Fe&et,e[28]=we^~ve&Ne,e[29]=ye^~Ee&Te,e[38]=Xe^~Qe&de,e[39]=Je^~Ze&pe,e[48]=Re^~Pe&He,e[49]=Me^~Be&Ve,e[0]^=o[2*t],e[1]^=o[2*t+1]}}}],["trezor-connect","/lib/utils/formatUtils.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.messageToHex=e.stripHexPrefix=e.hasHexPrefix=e.btckb2satoshib=e.formatTime=e.formatAmountOld=e.formatAmount=void 0;var a=o(__browser_require__(571,r));e.formatAmount=((e,t)=>new a.default(e).div(10**t.decimals).toString(10)+" "+t.shortcut);e.formatAmountOld=((e,t)=>{const r=e/1e8;return`${r.toString()} ${t.shortcut}`});e.formatTime=(e=>{const t=Math.floor(e/60),r=e%60;if(!e)return"No time estimate";let i="";return 0!==t&&(i+=t+" hour",t>1&&(i+="s"),i+=" "),0!==r&&(i+=r+" minutes"),i});e.btckb2satoshib=(e=>new a.default(e).times(1e5).toFixed(0,a.default.ROUND_HALF_UP));const h=e=>"0x"===e.slice(0,2).toLowerCase();e.hasHexPrefix=h;const c=e=>h(e)?e.slice(2):e;e.stripHexPrefix=c;e.messageToHex=(e=>{let t;if(((e,t)=>!("string"!=typeof e||!e.match(/^(0x|0X)?[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t))(e)){let r=c(e);r.length%2!=0&&(r="0"+r),t=Buffer.from(r,"hex")}else t=Buffer.from(e);return t.toString("hex")})}],["bignumber.js","/bignumber.js",function(e,t,r,i,s,n){!function(e){"use strict";var t,i=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,s=Math.ceil,n=Math.floor,o="[BigNumber Error] ",a=o+"Number primitive has more than 15 significant digits: ",h=1e14,c=14,u=9007199254740991,f=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],l=1e7,d=1e9;function p(e){var t=0|e;return e>0||e===t?t:t-1}function b(e){for(var t,r,i=1,s=e.length,n=e[0]+"";i<s;){for(t=e[i++]+"",r=c-t.length;r--;t="0"+t);n+=t}for(s=n.length;48===n.charCodeAt(--s););return n.slice(0,s+1||1)}function g(e,t){var r,i,s=e.c,n=t.c,o=e.s,a=t.s,h=e.e,c=t.e;if(!o||!a)return null;if(r=s&&!s[0],i=n&&!n[0],r||i)return r?i?0:-a:o;if(o!=a)return o;if(r=o<0,i=h==c,!s||!n)return i?0:!s^r?1:-1;if(!i)return h>c^r?1:-1;for(a=(h=s.length)<(c=n.length)?h:c,o=0;o<a;o++)if(s[o]!=n[o])return s[o]>n[o]^r?1:-1;return h==c?0:h>c^r?1:-1}function m(e,t,r,i){if(e<t||e>r||e!==n(e))throw Error(o+(i||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function _(e){var t=e.c.length-1;return p(e.e/c)==t&&e.c[t]%2!=0}function w(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function y(e,t,r){var i,s;if(t<0){for(s=r+".";++t;s+=r);e=s+e}else if(++t>(i=e.length)){for(s=r,t-=i;--t;s+=r);e+=s}else t<i&&(e=e.slice(0,t)+"."+e.slice(t));return e}(t=function e(t){var r,v,E,S,I,k,A,O,x,R=F.prototype={constructor:F,toString:null,valueOf:null},M=new F(1),P=20,B=4,N=-7,T=21,C=-1e7,q=1e7,j=!1,D=1,U=0,L={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},z="0123456789abcdefghijklmnopqrstuvwxyz";function F(e,t){var r,s,o,h,f,l,d,p,b=this;if(!(b instanceof F))return new F(e,t);if(null==t){if(e&&!0===e._isBigNumber)return b.s=e.s,void(!e.c||e.e>q?b.c=b.e=null:e.e<C?b.c=[b.e=0]:(b.e=e.e,b.c=e.c.slice()));if((l="number"==typeof e)&&0*e==0){if(b.s=1/e<0?(e=-e,-1):1,e===~~e){for(h=0,f=e;f>=10;f/=10,h++);return void(h>q?b.c=b.e=null:(b.e=h,b.c=[e]))}p=String(e)}else{if(!i.test(p=String(e)))return E(b,p,l);b.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(h=p.indexOf("."))>-1&&(p=p.replace(".","")),(f=p.search(/e/i))>0?(h<0&&(h=f),h+=+p.slice(f+1),p=p.substring(0,f)):h<0&&(h=p.length)}else{if(m(t,2,z.length,"Base"),10==t)return W(b=new F(e),P+b.e+1,B);if(p=String(e),l="number"==typeof e){if(0*e!=0)return E(b,p,l,t);if(b.s=1/e<0?(p=p.slice(1),-1):1,F.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(a+e)}else b.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(r=z.slice(0,t),h=f=0,d=p.length;f<d;f++)if(r.indexOf(s=p.charAt(f))<0){if("."==s){if(f>h){h=d;continue}}else if(!o&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){o=!0,f=-1,h=0;continue}return E(b,String(e),l,t)}l=!1,(h=(p=v(p,t,10,b.s)).indexOf("."))>-1?p=p.replace(".",""):h=p.length}for(f=0;48===p.charCodeAt(f);f++);for(d=p.length;48===p.charCodeAt(--d););if(p=p.slice(f,++d)){if(d-=f,l&&F.DEBUG&&d>15&&(e>u||e!==n(e)))throw Error(a+b.s*e);if((h=h-f-1)>q)b.c=b.e=null;else if(h<C)b.c=[b.e=0];else{if(b.e=h,b.c=[],f=(h+1)%c,h<0&&(f+=c),f<d){for(f&&b.c.push(+p.slice(0,f)),d-=c;f<d;)b.c.push(+p.slice(f,f+=c));f=c-(p=p.slice(f)).length}else f-=d;for(;f--;p+="0");b.c.push(+p)}}else b.c=[b.e=0]}function H(e,t,r,i){var s,n,o,a,h;if(null==r?r=B:m(r,0,8),!e.c)return e.toString();if(s=e.c[0],o=e.e,null==t)h=b(e.c),h=1==i||2==i&&(o<=N||o>=T)?w(h,o):y(h,o,"0");else if(n=(e=W(new F(e),t,r)).e,a=(h=b(e.c)).length,1==i||2==i&&(t<=n||n<=N)){for(;a<t;h+="0",a++);h=w(h,n)}else if(t-=o,h=y(h,n,"0"),n+1>a){if(--t>0)for(h+=".";t--;h+="0");}else if((t+=n-a)>0)for(n+1==a&&(h+=".");t--;h+="0");return e.s<0&&s?"-"+h:h}function V(e,t){for(var r,i=1,s=new F(e[0]);i<e.length;i++){if(!(r=new F(e[i])).s){s=r;break}t.call(s,r)&&(s=r)}return s}function K(e,t,r){for(var i=1,s=t.length;!t[--s];t.pop());for(s=t[0];s>=10;s/=10,i++);return(r=i+r*c-1)>q?e.c=e.e=null:r<C?e.c=[e.e=0]:(e.e=r,e.c=t),e}function W(e,t,r,i){var o,a,u,l,d,p,b,g=e.c,m=f;if(g){e:{for(o=1,l=g[0];l>=10;l/=10,o++);if((a=t-o)<0)a+=c,u=t,b=(d=g[p=0])/m[o-u-1]%10|0;else if((p=s((a+1)/c))>=g.length){if(!i)break e;for(;g.length<=p;g.push(0));d=b=0,o=1,u=(a%=c)-c+1}else{for(d=l=g[p],o=1;l>=10;l/=10,o++);b=(u=(a%=c)-c+o)<0?0:d/m[o-u-1]%10|0}if(i=i||t<0||null!=g[p+1]||(u<0?d:d%m[o-u-1]),i=r<4?(b||i)&&(0==r||r==(e.s<0?3:2)):b>5||5==b&&(4==r||i||6==r&&(a>0?u>0?d/m[o-u]:0:g[p-1])%10&1||r==(e.s<0?8:7)),t<1||!g[0])return g.length=0,i?(t-=e.e+1,g[0]=m[(c-t%c)%c],e.e=-t||0):g[0]=e.e=0,e;if(0==a?(g.length=p,l=1,p--):(g.length=p+1,l=m[c-a],g[p]=u>0?n(d/m[o-u]%m[u])*l:0),i)for(;;){if(0==p){for(a=1,u=g[0];u>=10;u/=10,a++);for(u=g[0]+=l,l=1;u>=10;u/=10,l++);a!=l&&(e.e++,g[0]==h&&(g[0]=1));break}if(g[p]+=l,g[p]!=h)break;g[p--]=0,l=1}for(a=g.length;0===g[--a];g.pop());}e.e>q?e.c=e.e=null:e.e<C&&(e.c=[e.e=0])}return e}function G(e){var t,r=e.e;return null===r?e.toString():(t=b(e.c),t=r<=N||r>=T?w(t,r):y(t,r,"0"),e.s<0?"-"+t:t)}return F.clone=e,F.ROUND_UP=0,F.ROUND_DOWN=1,F.ROUND_CEIL=2,F.ROUND_FLOOR=3,F.ROUND_HALF_UP=4,F.ROUND_HALF_DOWN=5,F.ROUND_HALF_EVEN=6,F.ROUND_HALF_CEIL=7,F.ROUND_HALF_FLOOR=8,F.EUCLID=9,F.config=F.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(o+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(m(r=e[t],0,d,t),P=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(m(r=e[t],0,8,t),B=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(m(r[0],-d,0,t),m(r[1],0,d,t),N=r[0],T=r[1]):(m(r,-d,d,t),N=-(T=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)m(r[0],-d,-1,t),m(r[1],1,d,t),C=r[0],q=r[1];else{if(m(r,-d,d,t),!r)throw Error(o+t+" cannot be zero: "+r);C=-(q=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(o+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw j=!r,Error(o+"crypto unavailable");j=r}else j=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(m(r=e[t],0,9,t),D=r),e.hasOwnProperty(t="POW_PRECISION")&&(m(r=e[t],0,d,t),U=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(o+t+" not an object: "+r);L=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.$|[+-.\s]|(.).*\1/.test(r))throw Error(o+t+" invalid: "+r);z=r}}return{DECIMAL_PLACES:P,ROUNDING_MODE:B,EXPONENTIAL_AT:[N,T],RANGE:[C,q],CRYPTO:j,MODULO_MODE:D,POW_PRECISION:U,FORMAT:L,ALPHABET:z}},F.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!F.DEBUG)return!0;var t,r,i=e.c,s=e.e,a=e.s;e:if("[object Array]"=={}.toString.call(i)){if((1===a||-1===a)&&s>=-d&&s<=d&&s===n(s)){if(0===i[0]){if(0===s&&1===i.length)return!0;break e}if((t=(s+1)%c)<1&&(t+=c),String(i[0]).length==t){for(t=0;t<i.length;t++)if((r=i[t])<0||r>=h||r!==n(r))break e;if(0!==r)return!0}}}else if(null===i&&null===s&&(null===a||1===a||-1===a))return!0;throw Error(o+"Invalid BigNumber: "+e)},F.maximum=F.max=function(){return V(arguments,R.lt)},F.minimum=F.min=function(){return V(arguments,R.gt)},F.random=(S=9007199254740992*Math.random()&2097151?function(){return n(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,i,a,h,u=0,l=[],p=new F(M);if(null==e?e=P:m(e,0,d),a=s(e/c),j)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(a*=2));u<a;)(h=131072*t[u]+(t[u+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[u]=r[0],t[u+1]=r[1]):(l.push(h%1e14),u+=2);u=a/2}else{if(!crypto.randomBytes)throw j=!1,Error(o+"crypto unavailable");for(t=crypto.randomBytes(a*=7);u<a;)(h=281474976710656*(31&t[u])+1099511627776*t[u+1]+4294967296*t[u+2]+16777216*t[u+3]+(t[u+4]<<16)+(t[u+5]<<8)+t[u+6])>=9e15?crypto.randomBytes(7).copy(t,u):(l.push(h%1e14),u+=7);u=a/7}if(!j)for(;u<a;)(h=S())<9e15&&(l[u++]=h%1e14);for(a=l[--u],e%=c,a&&e&&(h=f[c-e],l[u]=n(a/h)*h);0===l[u];l.pop(),u--);if(u<0)l=[i=0];else{for(i=-1;0===l[0];l.splice(0,1),i-=c);for(u=1,h=l[0];h>=10;h/=10,u++);u<c&&(i-=c-u)}return p.e=i,p.c=l,p}),F.sum=function(){for(var e=1,t=arguments,r=new F(t[0]);e<t.length;)r=r.plus(t[e++]);return r},v=function(){function e(e,t,r,i){for(var s,n,o=[0],a=0,h=e.length;a<h;){for(n=o.length;n--;o[n]*=t);for(o[0]+=i.indexOf(e.charAt(a++)),s=0;s<o.length;s++)o[s]>r-1&&(null==o[s+1]&&(o[s+1]=0),o[s+1]+=o[s]/r|0,o[s]%=r)}return o.reverse()}return function(t,i,s,n,o){var a,h,c,u,f,l,d,p,g=t.indexOf("."),m=P,_=B;for(g>=0&&(u=U,U=0,t=t.replace(".",""),l=(p=new F(i)).pow(t.length-g),U=u,p.c=e(y(b(l.c),l.e,"0"),10,s,"0123456789"),p.e=p.c.length),c=u=(d=e(t,i,s,o?(a=z,"0123456789"):(a="0123456789",z))).length;0==d[--u];d.pop());if(!d[0])return a.charAt(0);if(g<0?--c:(l.c=d,l.e=c,l.s=n,d=(l=r(l,p,m,_,s)).c,f=l.r,c=l.e),g=d[h=c+m+1],u=s/2,f=f||h<0||null!=d[h+1],f=_<4?(null!=g||f)&&(0==_||_==(l.s<0?3:2)):g>u||g==u&&(4==_||f||6==_&&1&d[h-1]||_==(l.s<0?8:7)),h<1||!d[0])t=f?y(a.charAt(1),-m,a.charAt(0)):a.charAt(0);else{if(d.length=h,f)for(--s;++d[--h]>s;)d[h]=0,h||(++c,d=[1].concat(d));for(u=d.length;!d[--u];);for(g=0,t="";g<=u;t+=a.charAt(d[g++]));t=y(t,c,a.charAt(0))}return t}}(),r=function(){function e(e,t,r){var i,s,n,o,a=0,h=e.length,c=t%l,u=t/l|0;for(e=e.slice();h--;)a=((s=c*(n=e[h]%l)+(i=u*n+(o=e[h]/l|0)*c)%l*l+a)/r|0)+(i/l|0)+u*o,e[h]=s%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,i){var s,n;if(r!=i)n=r>i?1:-1;else for(s=n=0;s<r;s++)if(e[s]!=t[s]){n=e[s]>t[s]?1:-1;break}return n}function r(e,t,r,i){for(var s=0;r--;)e[r]-=s,s=e[r]<t[r]?1:0,e[r]=s*i+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(i,s,o,a,u){var f,l,d,b,g,m,_,w,y,v,E,S,I,k,A,O,x,R=i.s==s.s?1:-1,M=i.c,P=s.c;if(!(M&&M[0]&&P&&P[0]))return new F(i.s&&s.s&&(M?!P||M[0]!=P[0]:P)?M&&0==M[0]||!P?0*R:R/0:NaN);for(y=(w=new F(R)).c=[],R=o+(l=i.e-s.e)+1,u||(u=h,l=p(i.e/c)-p(s.e/c),R=R/c|0),d=0;P[d]==(M[d]||0);d++);if(P[d]>(M[d]||0)&&l--,R<0)y.push(1),b=!0;else{for(k=M.length,O=P.length,d=0,R+=2,(g=n(u/(P[0]+1)))>1&&(P=e(P,g,u),M=e(M,g,u),O=P.length,k=M.length),I=O,E=(v=M.slice(0,O)).length;E<O;v[E++]=0);x=P.slice(),x=[0].concat(x),A=P[0],P[1]>=u/2&&A++;do{if(g=0,(f=t(P,v,O,E))<0){if(S=v[0],O!=E&&(S=S*u+(v[1]||0)),(g=n(S/A))>1)for(g>=u&&(g=u-1),_=(m=e(P,g,u)).length,E=v.length;1==t(m,v,_,E);)g--,r(m,O<_?x:P,_,u),_=m.length,f=1;else 0==g&&(f=g=1),_=(m=P.slice()).length;if(_<E&&(m=[0].concat(m)),r(v,m,E,u),E=v.length,-1==f)for(;t(P,v,O,E)<1;)g++,r(v,O<E?x:P,E,u),E=v.length}else 0===f&&(g++,v=[0]);y[d++]=g,v[0]?v[E++]=M[I]||0:(v=[M[I]],E=1)}while((I++<k||null!=v[0])&&R--);b=null!=v[0],y[0]||y.splice(0,1)}if(u==h){for(d=1,R=y[0];R>=10;R/=10,d++);W(w,o+(w.e=d+l*c-1)+1,a,b)}else w.e=l,w.r=+b;return w}}(),I=/^(-?)0([xbo])(?=\w[\w.]*$)/i,k=/^([^.]+)\.$/,A=/^\.([^.]+)$/,O=/^-?(Infinity|NaN)$/,x=/^\s*\+(?=[\w.])|^\s+|\s+$/g,E=function(e,t,r,i){var s,n=r?t:t.replace(x,"");if(O.test(n))e.s=isNaN(n)?null:n<0?-1:1;else{if(!r&&(n=n.replace(I,function(e,t,r){return s="x"==(r=r.toLowerCase())?16:"b"==r?2:8,i&&i!=s?e:t}),i&&(s=i,n=n.replace(k,"$1").replace(A,"0.$1")),t!=n))return new F(n,s);if(F.DEBUG)throw Error(o+"Not a"+(i?" base "+i:"")+" number: "+t);e.s=null}e.c=e.e=null},R.absoluteValue=R.abs=function(){var e=new F(this);return e.s<0&&(e.s=1),e},R.comparedTo=function(e,t){return g(this,new F(e,t))},R.decimalPlaces=R.dp=function(e,t){var r,i,s,n=this;if(null!=e)return m(e,0,d),null==t?t=B:m(t,0,8),W(new F(n),e+n.e+1,t);if(!(r=n.c))return null;if(i=((s=r.length-1)-p(this.e/c))*c,s=r[s])for(;s%10==0;s/=10,i--);return i<0&&(i=0),i},R.dividedBy=R.div=function(e,t){return r(this,new F(e,t),P,B)},R.dividedToIntegerBy=R.idiv=function(e,t){return r(this,new F(e,t),0,1)},R.exponentiatedBy=R.pow=function(e,t){var r,i,a,h,u,f,l,d,p=this;if((e=new F(e)).c&&!e.isInteger())throw Error(o+"Exponent not an integer: "+G(e));if(null!=t&&(t=new F(t)),u=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return d=new F(Math.pow(+G(p),u?2-_(e):+G(e))),t?d.mod(t):d;if(f=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new F(NaN);(i=!f&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||u&&p.c[1]>=24e7:p.c[0]<8e13||u&&p.c[0]<=9999975e7)))return h=p.s<0&&_(e)?-0:0,p.e>-1&&(h=1/h),new F(f?1/h:h);U&&(h=s(U/c+2))}for(u?(r=new F(.5),f&&(e.s=1),l=_(e)):l=(a=Math.abs(+G(e)))%2,d=new F(M);;){if(l){if(!(d=d.times(p)).c)break;h?d.c.length>h&&(d.c.length=h):i&&(d=d.mod(t))}if(a){if(0===(a=n(a/2)))break;l=a%2}else if(W(e=e.times(r),e.e+1,1),e.e>14)l=_(e);else{if(0==(a=+G(e)))break;l=a%2}p=p.times(p),h?p.c&&p.c.length>h&&(p.c.length=h):i&&(p=p.mod(t))}return i?d:(f&&(d=M.div(d)),t?d.mod(t):h?W(d,U,B,void 0):d)},R.integerValue=function(e){var t=new F(this);return null==e?e=B:m(e,0,8),W(t,t.e+1,e)},R.isEqualTo=R.eq=function(e,t){return 0===g(this,new F(e,t))},R.isFinite=function(){return!!this.c},R.isGreaterThan=R.gt=function(e,t){return g(this,new F(e,t))>0},R.isGreaterThanOrEqualTo=R.gte=function(e,t){return 1===(t=g(this,new F(e,t)))||0===t},R.isInteger=function(){return!!this.c&&p(this.e/c)>this.c.length-2},R.isLessThan=R.lt=function(e,t){return g(this,new F(e,t))<0},R.isLessThanOrEqualTo=R.lte=function(e,t){return-1===(t=g(this,new F(e,t)))||0===t},R.isNaN=function(){return!this.s},R.isNegative=function(){return this.s<0},R.isPositive=function(){return this.s>0},R.isZero=function(){return!!this.c&&0==this.c[0]},R.minus=function(e,t){var r,i,s,n,o=this,a=o.s;if(t=(e=new F(e,t)).s,!a||!t)return new F(NaN);if(a!=t)return e.s=-t,o.plus(e);var u=o.e/c,f=e.e/c,l=o.c,d=e.c;if(!u||!f){if(!l||!d)return l?(e.s=-t,e):new F(d?o:NaN);if(!l[0]||!d[0])return d[0]?(e.s=-t,e):new F(l[0]?o:3==B?-0:0)}if(u=p(u),f=p(f),l=l.slice(),a=u-f){for((n=a<0)?(a=-a,s=l):(f=u,s=d),s.reverse(),t=a;t--;s.push(0));s.reverse()}else for(i=(n=(a=l.length)<(t=d.length))?a:t,a=t=0;t<i;t++)if(l[t]!=d[t]){n=l[t]<d[t];break}if(n&&(s=l,l=d,d=s,e.s=-e.s),(t=(i=d.length)-(r=l.length))>0)for(;t--;l[r++]=0);for(t=h-1;i>a;){if(l[--i]<d[i]){for(r=i;r&&!l[--r];l[r]=t);--l[r],l[i]+=h}l[i]-=d[i]}for(;0==l[0];l.splice(0,1),--f);return l[0]?K(e,l,f):(e.s=3==B?-1:1,e.c=[e.e=0],e)},R.modulo=R.mod=function(e,t){var i,s,n=this;return e=new F(e,t),!n.c||!e.s||e.c&&!e.c[0]?new F(NaN):!e.c||n.c&&!n.c[0]?new F(n):(9==D?(s=e.s,e.s=1,i=r(n,e,0,3),e.s=s,i.s*=s):i=r(n,e,0,D),(e=n.minus(i.times(e))).c[0]||1!=D||(e.s=n.s),e)},R.multipliedBy=R.times=function(e,t){var r,i,s,n,o,a,u,f,d,b,g,m,_,w,y,v=this,E=v.c,S=(e=new F(e,t)).c;if(!(E&&S&&E[0]&&S[0]))return!v.s||!e.s||E&&!E[0]&&!S||S&&!S[0]&&!E?e.c=e.e=e.s=null:(e.s*=v.s,E&&S?(e.c=[0],e.e=0):e.c=e.e=null),e;for(i=p(v.e/c)+p(e.e/c),e.s*=v.s,(u=E.length)<(b=S.length)&&(_=E,E=S,S=_,s=u,u=b,b=s),s=u+b,_=[];s--;_.push(0));for(w=h,y=l,s=b;--s>=0;){for(r=0,g=S[s]%y,m=S[s]/y|0,n=s+(o=u);n>s;)r=((f=g*(f=E[--o]%y)+(a=m*f+(d=E[o]/y|0)*g)%y*y+_[n]+r)/w|0)+(a/y|0)+m*d,_[n--]=f%w;_[n]=r}return r?++i:_.splice(0,1),K(e,_,i)},R.negated=function(){var e=new F(this);return e.s=-e.s||null,e},R.plus=function(e,t){var r,i=this,s=i.s;if(t=(e=new F(e,t)).s,!s||!t)return new F(NaN);if(s!=t)return e.s=-t,i.minus(e);var n=i.e/c,o=e.e/c,a=i.c,u=e.c;if(!n||!o){if(!a||!u)return new F(s/0);if(!a[0]||!u[0])return u[0]?e:new F(a[0]?i:0*s)}if(n=p(n),o=p(o),a=a.slice(),s=n-o){for(s>0?(o=n,r=u):(s=-s,r=a),r.reverse();s--;r.push(0));r.reverse()}for((s=a.length)-(t=u.length)<0&&(r=u,u=a,a=r,t=s),s=0;t;)s=(a[--t]=a[t]+u[t]+s)/h|0,a[t]=h===a[t]?0:a[t]%h;return s&&(a=[s].concat(a),++o),K(e,a,o)},R.precision=R.sd=function(e,t){var r,i,s,n=this;if(null!=e&&e!==!!e)return m(e,1,d),null==t?t=B:m(t,0,8),W(new F(n),e,t);if(!(r=n.c))return null;if(i=(s=r.length-1)*c+1,s=r[s]){for(;s%10==0;s/=10,i--);for(s=r[0];s>=10;s/=10,i++);}return e&&n.e+1>i&&(i=n.e+1),i},R.shiftedBy=function(e){return m(e,-u,u),this.times("1e"+e)},R.squareRoot=R.sqrt=function(){var e,t,i,s,n,o=this,a=o.c,h=o.s,c=o.e,u=P+4,f=new F("0.5");if(1!==h||!a||!a[0])return new F(!h||h<0&&(!a||a[0])?NaN:a?o:1/0);if(0==(h=Math.sqrt(+G(o)))||h==1/0?(((t=b(a)).length+c)%2==0&&(t+="0"),h=Math.sqrt(+t),c=p((c+1)/2)-(c<0||c%2),i=new F(t=h==1/0?"1e"+c:(t=h.toExponential()).slice(0,t.indexOf("e")+1)+c)):i=new F(h+""),i.c[0])for((h=(c=i.e)+u)<3&&(h=0);;)if(n=i,i=f.times(n.plus(r(o,n,u,1))),b(n.c).slice(0,h)===(t=b(i.c)).slice(0,h)){if(i.e<c&&--h,"9999"!=(t=t.slice(h-3,h+1))&&(s||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(W(i,i.e+P+2,1),e=!i.times(i).eq(o));break}if(!s&&(W(n,n.e+P+2,0),n.times(n).eq(o))){i=n;break}u+=4,h+=4,s=1}return W(i,i.e+P+1,B,e)},R.toExponential=function(e,t){return null!=e&&(m(e,0,d),e++),H(this,e,t,1)},R.toFixed=function(e,t){return null!=e&&(m(e,0,d),e=e+this.e+1),H(this,e,t)},R.toFormat=function(e,t,r){var i,s=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=L;else if("object"!=typeof r)throw Error(o+"Argument not an object: "+r);if(i=s.toFixed(e,t),s.c){var n,a=i.split("."),h=+r.groupSize,c=+r.secondaryGroupSize,u=r.groupSeparator||"",f=a[0],l=a[1],d=s.s<0,p=d?f.slice(1):f,b=p.length;if(c&&(n=h,h=c,c=n,b-=n),h>0&&b>0){for(n=b%h||h,f=p.substr(0,n);n<b;n+=h)f+=u+p.substr(n,h);c>0&&(f+=u+p.slice(n)),d&&(f="-"+f)}i=l?f+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?l.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):l):f}return(r.prefix||"")+i+(r.suffix||"")},R.toFraction=function(e){var t,i,s,n,a,h,u,l,d,p,g,m,_=this,w=_.c;if(null!=e&&(!(u=new F(e)).isInteger()&&(u.c||1!==u.s)||u.lt(M)))throw Error(o+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+G(u));if(!w)return new F(_);for(t=new F(M),d=i=new F(M),s=l=new F(M),m=b(w),a=t.e=m.length-_.e-1,t.c[0]=f[(h=a%c)<0?c+h:h],e=!e||u.comparedTo(t)>0?a>0?t:d:u,h=q,q=1/0,u=new F(m),l.c[0]=0;p=r(u,t,0,1),1!=(n=i.plus(p.times(s))).comparedTo(e);)i=s,s=n,d=l.plus(p.times(n=d)),l=n,t=u.minus(p.times(n=t)),u=n;return n=r(e.minus(i),s,0,1),l=l.plus(n.times(d)),i=i.plus(n.times(s)),l.s=d.s=_.s,g=r(d,s,a*=2,B).minus(_).abs().comparedTo(r(l,i,a,B).minus(_).abs())<1?[d,s]:[l,i],q=h,g},R.toNumber=function(){return+G(this)},R.toPrecision=function(e,t){return null!=e&&m(e,1,d),H(this,e,t,2)},R.toString=function(e){var t,r=this,i=r.s,s=r.e;return null===s?i?(t="Infinity",i<0&&(t="-"+t)):t="NaN":(null==e?t=s<=N||s>=T?w(b(r.c),s):y(b(r.c),s,"0"):10===e?t=y(b((r=W(new F(r),P+s+1,B)).c),r.e,"0"):(m(e,2,z.length,"Base"),t=v(y(b(r.c),s,"0"),10,e,i,!0)),i<0&&r.c[0]&&(t="-"+t)),t},R.valueOf=R.toJSON=function(){return G(this)},R._isBigNumber=!0,null!=t&&F.set(t),F}()).default=t.BigNumber=t,"function"==typeof define&&define.amd?define(function(){return t}):void 0!==r&&r.exports?r.exports=t:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=t)}(this)}],["trezor-connect","/lib/utils/deferred.js",function(e,t,r,i,s,n){"use strict";e.__esModule=!0,e.create=function(e,t){let r,i=e=>{},s=e=>{};const n=new Promise(async(t,n)=>{if(i=t,s=n,"function"==typeof e)try{await e()}catch(e){n(e)}"string"==typeof e&&(r=e)});return{id:r,device:t,resolve:i,reject:s,promise:n}},e.createAsync=function(e){let t=e=>{},r=e=>{};const i=new Promise((e,i)=>{t=e,r=i});return{resolve:t,reject:r,promise:i,run:()=>((async()=>{await e()})(),i)}},e.resolveTimeoutPromise=function(e,t){return new Promise(r=>{setTimeout(()=>{r(t)},e)})},e.rejectTimeoutPromise=function(e,t){return new Promise((r,i)=>{setTimeout(()=>{i(t)},e)})}}],["trezor-link","/lib/index.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=u(__browser_require__(574,r)),a=u(__browser_require__(609,r)),h=u(__browser_require__(617,r)),c=u(__browser_require__(618,r));function u(e){return e&&e.__esModule?e:{default:e}}try{__browser_require__(411,r)}catch(e){}if("undefined"==typeof window){var f=__browser_require__(619,r);o.default.setFetch(f,!0)}else o.default.setFetch(fetch,!1);var l={BridgeV2:o.default,Fallback:h.default,Lowlevel:a.default,WebUsb:c.default};e.default=l,r.exports=e.default}],["trezor-link","/lib/bridge/v2.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,a=b(__browser_require__(575,r)),h=b(__browser_require__(418,r)),c=__browser_require__(577,r),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}(__browser_require__(578,r)),f=__browser_require__(579,r),l=__browser_require__(584,r),d=__browser_require__(606,r),p=__browser_require__(608,r);function b(e){return e&&e.__esModule?e:{default:e}}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(r,!0).forEach(function(t){_(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e,t,r,i,s,n,o){try{var a=e[n](o),h=a.value}catch(e){return void r(e)}a.done?t(h):Promise.resolve(h).then(i,s)}function y(e){return function(){var t=this,r=arguments;return new Promise(function(i,s){var n=e.apply(t,r);function o(e){w(n,i,s,o,a,"next",e)}function a(e){w(n,i,s,o,a,"throw",e)}o(undefined)})}}function v(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function E(e,t,r,i,s){var n={};return Object.keys(i).forEach(function(e){n[e]=i[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce(function(r,i){return i(e,t,r)||r},n),s&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(s):void 0,n.initializer=undefined),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}var S="http://127.0.0.1:21325",I="https://wallet.trezor.io/data/bridge/latest.txt",k=(E((o=function(){function e(t,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name="BridgeTransport",this.version="",this.debug=!1,this.configured=!1,this.stopped=!1,this.requestNeeded=!1,this.url=null==t?S:t,this.newestVersionUrl=null==r?I:r,this.newVersion=i}var t,r,i;return t=e,r=[{key:"_post",value:function(){var e=y(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.stopped){e.next=2;break}return e.abrupt("return",Promise.reject("Transport stopped."));case 2:return e.next=4,(0,c.request)(m({},t,{method:"POST",url:this.url+t.url,skipContentTypeHeader:!0}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=y(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.debug=!!t,e.next=3,this._silentInit();case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_silentInit",value:function(){var e=y(a.default.mark(function e(){var t,r,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.request)({url:this.url,method:"POST"});case 2:if(t=e.sent,r=u.info(t),this.version=r.version,"string"!=typeof this.newVersion){e.next=9;break}e.t0=this.newVersion,e.next=14;break;case 9:return e.t1=u,e.next=12,(0,c.request)({url:"".concat(this.newestVersionUrl,"?").concat(Date.now()),method:"GET"});case 12:e.t2=e.sent,e.t0=e.t1.version.call(e.t1,e.t2);case 14:i=e.t0,this.isOutdated=(0,h.default)(this.version,i)<0;case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"configure",value:function(){var e=y(a.default.mark(function e(t){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=(0,l.parseConfigure)(t),this.configured=!0,this._messages=r;case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"listen",value:function(){var e=y(a.default.mark(function e(t){var r,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("Bridge v2 does not support listen without previous.");case 2:return e.next=4,this._post({url:"/listen",body:t});case 4:return r=e.sent,i=u.devices(r),e.abrupt("return",i);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"enumerate",value:function(){var e=y(a.default.mark(function e(){var t,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._post({url:"/enumerate"});case 2:return t=e.sent,r=u.devices(t),e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_acquireMixed",value:function(){var e=y(a.default.mark(function e(t,r){var i,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=null==t.previous?"null":t.previous,s=(r?"/debug":"")+"/acquire/"+t.path+"/"+i,e.abrupt("return",this._post({url:s}));case 3:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"acquire",value:function(){var e=y(a.default.mark(function e(t,r){var i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._acquireMixed(t,r);case 2:return i=e.sent,e.abrupt("return",u.acquire(i));case 4:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"release",value:function(){var e=y(a.default.mark(function e(t,r,i){var s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=this._post({url:(i?"/debug":"")+"/release/"+t}),!r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,s;case 5:case"end":return e.stop()}},e,this)}));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"call",value:function(){var e=y(a.default.mark(function e(t,r,i,s){var n,o,h,c;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this._messages){e.next=2;break}throw new Error("Transport not configured.");case 2:return n=this._messages,o=(0,f.buildOne)(n,r,i).toString("hex"),e.next=6,this._post({url:(s?"/debug":"")+"/call/"+t,body:o});case 6:if("string"==typeof(h=e.sent)){e.next=9;break}throw new Error("Returning data is not string.");case 9:return c=(0,d.receiveOne)(n,new Buffer(h,"hex")),e.abrupt("return",u.call(c));case 11:case"end":return e.stop()}},e,this)}));return function(t,r,i,s){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=y(a.default.mark(function e(t,r,i,s){var n,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this._messages){e.next=2;break}throw new Error("Transport not configured.");case 2:return n=this._messages,o=(0,f.buildOne)(n,r,i).toString("hex"),e.next=6,this._post({url:(s?"/debug":"")+"/post/"+t,body:o});case 6:return e.abrupt("return");case 7:case"end":return e.stop()}},e,this)}));return function(t,r,i,s){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=y(a.default.mark(function e(t,r){var i,s,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this._messages){e.next=2;break}throw new Error("Transport not configured.");case 2:return i=this._messages,e.next=5,this._post({url:(r?"/debug":"")+"/read/"+t});case 5:if("string"==typeof(s=e.sent)){e.next=8;break}throw new Error("Returning data is not string.");case 8:return n=(0,d.receiveOne)(i,new Buffer(s,"hex")),e.abrupt("return",u.call(n));case 10:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"requestDevice",value:function(){return Promise.reject()}},{key:"setBridgeLatestUrl",value:function(e){this.newestVersionUrl=e}},{key:"stop",value:function(){this.stopped=!0}}],i=[{key:"setFetch",value:function(e,t){(0,c.setFetch)(e,t)}}],r&&v(t.prototype,r),i&&v(t,i),e}()).prototype,"init",[p.debugInOut],Object.getOwnPropertyDescriptor(o.prototype,"init"),o.prototype),E(o.prototype,"configure",[p.debugInOut],Object.getOwnPropertyDescriptor(o.prototype,"configure"),o.prototype),E(o.prototype,"listen",[p.debugInOut],Object.getOwnPropertyDescriptor(o.prototype,"listen"),o.prototype),E(o.prototype,"enumerate",[p.debugInOut],Object.getOwnPropertyDescriptor(o.prototype,"enumerate"),o.prototype),E(o.prototype,"acquire",[p.debugInOut],Object.getOwnPropertyDescriptor(o.prototype,"acquire"),o.prototype),E(o.prototype,"release",[p.debugInOut],Object.getOwnPropertyDescriptor(o.prototype,"release"),o.prototype),E(o.prototype,"call",[p.debugInOut],Object.getOwnPropertyDescriptor(o.prototype,"call"),o.prototype),E(o.prototype,"post",[p.debugInOut],Object.getOwnPropertyDescriptor(o.prototype,"post"),o.prototype),E(o.prototype,"read",[p.debugInOut],Object.getOwnPropertyDescriptor(o.prototype,"read"),o.prototype),o);e.default=k,r.exports=e.default}],["@babel/runtime","/regenerator/index.js",function(e,t,r,i,s,n){r.exports=__browser_require__(576,r)}],["regenerator-runtime","/runtime.js",function(e,t,r,i,s,n){var o=function(e){"use strict";var t,r=Object.prototype,i=r.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},n=s.iterator||"@@iterator",o=s.asyncIterator||"@@asyncIterator",a=s.toStringTag||"@@toStringTag";function h(e,t,r,i){var s=t&&t.prototype instanceof b?t:b,n=Object.create(s.prototype),o=new O(i||[]);return n._invoke=function(e,t,r){var i=u;return function(s,n){if(i===l)throw new Error("Generator is already running");if(i===d){if("throw"===s)throw n;return R()}for(r.method=s,r.arg=n;;){var o=r.delegate;if(o){var a=I(o,r);if(a){if(a===p)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===u)throw i=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=l;var h=c(e,t,r);if("normal"===h.type){if(i=r.done?d:f,h.arg===p)continue;return{value:h.arg,done:r.done}}"throw"===h.type&&(i=d,r.method="throw",r.arg=h.arg)}}}(e,r,o),n}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=h;var u="suspendedStart",f="suspendedYield",l="executing",d="completed",p={};function b(){}function g(){}function m(){}var _={};_[n]=function(){return this};var w=Object.getPrototypeOf,y=w&&w(w(x([])));y&&y!==r&&i.call(y,n)&&(_=y);var v=m.prototype=b.prototype=Object.create(_);function E(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function S(e){var t;this._invoke=function(r,s){function n(){return new Promise(function(t,n){!function t(r,s,n,o){var a=c(e[r],e,s);if("throw"!==a.type){var h=a.arg,u=h.value;return u&&"object"==typeof u&&i.call(u,"__await")?Promise.resolve(u.__await).then(function(e){t("next",e,n,o)},function(e){t("throw",e,n,o)}):Promise.resolve(u).then(function(e){h.value=e,n(h)},function(e){return t("throw",e,n,o)})}o(a.arg)}(r,s,t,n)})}return t=t?t.then(n,n):n()}}function I(e,r){var i=e.iterator[r.method];if(i===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,I(e,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var s=c(i,e.iterator,r.arg);if("throw"===s.type)return r.method="throw",r.arg=s.arg,r.delegate=null,p;var n=s.arg;return n?n.done?(r[e.resultName]=n.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function x(e){if(e){var r=e[n];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,o=function r(){for(;++s<e.length;)if(i.call(e,s))return r.value=e[s],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}return{next:R}}function R(){return{value:t,done:!0}}return g.prototype=v.constructor=m,m.constructor=g,m[a]=g.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},E(S.prototype),S.prototype[o]=function(){return this},e.AsyncIterator=S,e.async=function(t,r,i,s){var n=new S(h(t,r,i,s));return e.isGeneratorFunction(r)?n:n.next().then(function(e){return e.done?e.value:n.next()})},E(v),v[a]="Generator",v[n]=function(){return this},v.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var i=t.pop();if(i in e)return r.value=i,r.done=!1,r}return r.done=!0,r}},e.values=x,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function s(i,s){return a.type="throw",a.arg=e,r.next=i,s&&(r.method="next",r.arg=t),!!s}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return s("end");if(o.tryLoc<=this.prev){var h=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(h&&c){if(this.prev<o.catchLoc)return s(o.catchLoc,!0);if(this.prev<o.finallyLoc)return s(o.finallyLoc)}else if(h){if(this.prev<o.catchLoc)return s(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return s(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var s=this.tryEntries[r];if(s.tryLoc<=this.prev&&i.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var n=s;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var o=n?n.completion:{};return o.type=e,o.arg=t,n?(this.method="next",this.next=n.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var s=i.arg;A(r)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:x(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),p}},e}("object"==typeof r?r.exports:{});try{regeneratorRuntime=o}catch(e){Function("r","regeneratorRuntime = r")(o)}}],["trezor-link","/lib/bridge/http.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setFetch=function(e,t){d=e,p=!!t},e.request=function(e){return m.apply(this,arguments)};var o,a=(o=__browser_require__(575,r))&&o.__esModule?o:{default:o};function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(r,!0).forEach(function(t){f(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t,r,i,s,n,o){try{var a=e[n](o),h=a.value}catch(e){return void r(e)}a.done?t(h):Promise.resolve(h).then(i,s)}var d="undefined"==typeof window?function(){return Promise.reject()}:window.fetch,p=!1;function b(e){return"string"==typeof e?""===e?"text/plain":"application/octet-stream":"application/json"}function g(e){try{return JSON.parse(e)}catch(t){return e}}function m(){var e;return e=a.default.mark(function e(t){var r,i,s,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:t.method,body:(o=t.body,"string"==typeof o?o:JSON.stringify(o)),credentials:"same-origin",headers:{}},null!=t.skipContentTypeHeader&&!1!==t.skipContentTypeHeader||(r.headers=u({},r.headers,{"Content-Type":b(null==t.body?"":t.body)})),p&&(r.headers=u({},r.headers,{Origin:"https://node.trezor.io"})),e.next=5,d(t.url,r);case 5:return i=e.sent,e.next=8,i.text();case 8:if(s=e.sent,!i.ok){e.next=13;break}return e.abrupt("return",g(s));case 13:if("object"!==h(n=g(s))||null==n||null==n.error){e.next=18;break}throw new Error(n.error);case 18:throw new Error(s);case 19:case"end":return e.stop()}var o},e)}),(m=function(){var t=this,r=arguments;return new Promise(function(i,s){var n=e.apply(t,r);function o(e){l(n,i,s,o,a,"next",e)}function a(e){l(n,i,s,o,a,"throw",e)}o(undefined)})}).apply(this,arguments)}}],["trezor-link","/lib/highlevel-checks.js",function(e,t,r,i,s,n){"use strict";function o(e){if(null==e)return null;if("string"!=typeof e)throw new Error("Wrong result type.");return e}Object.defineProperty(e,"__esModule",{value:!0}),e.info=function(e){if("object"!=typeof e||null==e)throw new Error("Wrong result type.");var t=e.version;if("string"!=typeof t)throw new Error("Wrong result type.");var r=!!e.configured;return{version:t,configured:r}},e.version=function(e){if("string"!=typeof e)throw new Error("Wrong result type.");return e.trim()},e.devices=function(e){if("object"!=typeof e)throw new Error("Wrong result type.");if(!(e instanceof Array))throw new Error("Wrong result type.");return e.map(function(e){if("object"!=typeof e||null==e)throw new Error("Wrong result type.");var t=e.path;if("string"!=typeof t)throw new Error("Wrong result type.");var r=t.toString();return{path:r,session:o(e.session),debugSession:o(e.debugSession),product:e.product,vendor:e.vendor,debug:!!e.debug}})},e.acquire=function(e){if("object"!=typeof e||null==e)throw new Error("Wrong result type.");var t=e.session;if("string"!=typeof t&&"number"!=typeof t)throw new Error("Wrong result type.");return t.toString()},e.call=function(e){if("object"!=typeof e||null==e)throw new Error("Wrong result type.");var t=e.type;if("string"!=typeof t)throw new Error("Wrong result type.");var r=e.message;if("object"!=typeof r||null==r)throw new Error("Wrong result type.");return{type:t,message:r}}}],["trezor-link","/lib/lowlevel/send.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildOne=function(e,t,r){return new b(e,t,r).encodeOne()},e.buildAndSend=function(e,t,r,i){return m.apply(this,arguments)};var o,a=(o=__browser_require__(575,r))&&o.__esModule?o:{default:o},h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}(__browser_require__(580,r));function c(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function f(e,t,r,i,s,n,o){try{var a=e[n](o),h=a.value}catch(e){return void r(e)}a.done?t(h):Promise.resolve(h).then(i,s)}function l(e){return function(){var t=this,r=arguments;return new Promise(function(i,s){var n=e.apply(t,r);function o(e){f(n,i,s,o,a,"next",e)}function a(e){f(n,i,s,o,a,"throw",e)}o(undefined)})}}function d(e,t){return p.apply(this,arguments)}function p(){return(p=l(a.default.mark(function e(t,r){var i,s,n,o,h,c;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=!0,s=!1,n=undefined,e.prev=3,o=r[Symbol.iterator]();case 5:if(i=(h=o.next()).done){e.next=12;break}return c=h.value,e.next=9,t(c);case 9:i=!0,e.next=5;break;case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),s=!0,n=e.t0;case 18:e.prev=18,e.prev=19,i||null==o.return||o.return();case 21:if(e.prev=21,!s){e.next=24;break}throw n;case 24:return e.finish(21);case 25:return e.finish(18);case 26:case"end":return e.stop()}},e,null,[[3,14,18,26],[19,,21,25]])}))).apply(this,arguments)}var b=function(){function e(t,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var s=t.messagesByName[r];if(null==s)throw new Error("The message name ".concat(r," is not found."));!function e(t){delete t.$$hashKey;for(var r in t){var i=t[r];null==i?delete t[r]:(Array.isArray(i)&&i.forEach(function(t){"object"==typeof t&&e(t)}),"object"==typeof i&&e(i))}}(i),this.message=i?new s(i):new s,this.type=t.messageTypes["MessageType_".concat(r)]}var t,r,i;return t=e,(r=[{key:"_encodeLong",value:function(e){var t=new Uint8Array(this.message.encodeAB()),r=(e?8:6)+t.length,i=new h.ByteBuffer(r);return e&&(i.writeByte(35),i.writeByte(35)),i.writeUint16(this.type),i.writeUint32(t.length),i.append(t),new Uint8Array(i.buffer)}},{key:"encode",value:function(){for(var e=this._encodeLong(!0),t=[],r=Math.floor((e.length-1)/63)+1,i=0;i<r;i++){var s=e.subarray(63*i,63*(i+1)),n=new Uint8Array(63);n.set(s),t.push(n.buffer)}return t}},{key:"encodeOne",value:function(){var e=this._encodeLong(!1);return Buffer.from(c(e))}}])&&u(t.prototype,r),i&&u(t,i),e}();function g(e,t,r){return new b(e,t,r).encode()}function m(){return(m=l(a.default.mark(function e(t,r,i,s){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=g(t,i,s),e.abrupt("return",d(r,n));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}}],["protobufjs-old-fixed-webpack","/index.js",function(e,t,r,i,s,n){var o=__browser_require__(581,r);r.exports=o}],["protobufjs-old-fixed-webpack","/dist/ProtoBuf.js",function(e,t,r,i,s,n){!function(e){"use strict";var t,i;r.exports=(t=__browser_require__(582,r),(i={VERSION:"3.8.2",WIRE_TYPES:{}}).WIRE_TYPES.VARINT=0,i.WIRE_TYPES.BITS64=1,i.WIRE_TYPES.LDELIM=2,i.WIRE_TYPES.STARTGROUP=3,i.WIRE_TYPES.ENDGROUP=4,i.WIRE_TYPES.BITS32=5,i.PACKABLE_WIRE_TYPES=[i.WIRE_TYPES.VARINT,i.WIRE_TYPES.BITS64,i.WIRE_TYPES.BITS32],i.TYPES={int32:{name:"int32",wireType:i.WIRE_TYPES.VARINT},uint32:{name:"uint32",wireType:i.WIRE_TYPES.VARINT},sint32:{name:"sint32",wireType:i.WIRE_TYPES.VARINT},int64:{name:"int64",wireType:i.WIRE_TYPES.VARINT},uint64:{name:"uint64",wireType:i.WIRE_TYPES.VARINT},sint64:{name:"sint64",wireType:i.WIRE_TYPES.VARINT},bool:{name:"bool",wireType:i.WIRE_TYPES.VARINT},double:{name:"double",wireType:i.WIRE_TYPES.BITS64},string:{name:"string",wireType:i.WIRE_TYPES.LDELIM},bytes:{name:"bytes",wireType:i.WIRE_TYPES.LDELIM},fixed32:{name:"fixed32",wireType:i.WIRE_TYPES.BITS32},sfixed32:{name:"sfixed32",wireType:i.WIRE_TYPES.BITS32},fixed64:{name:"fixed64",wireType:i.WIRE_TYPES.BITS64},sfixed64:{name:"sfixed64",wireType:i.WIRE_TYPES.BITS64},float:{name:"float",wireType:i.WIRE_TYPES.BITS32},enum:{name:"enum",wireType:i.WIRE_TYPES.VARINT},message:{name:"message",wireType:i.WIRE_TYPES.LDELIM},group:{name:"group",wireType:i.WIRE_TYPES.STARTGROUP}},i.ID_MIN=1,i.ID_MAX=536870911,i.ByteBuffer=t,i.Long=t.Long||null,i.convertFieldsToCamelCase=!1,i.populateAccessors=!0,i.Util=function(){Object.create||(Object.create=function(e){if(arguments.length>1)throw Error("Object.create polyfill only accepts the first parameter.");function t(){}return t.prototype=e,new t});var e={IS_NODE:!1,XHR:function(){for(var e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],t=null,r=0;r<e.length;r++){try{t=e[r]()}catch(e){continue}break}if(!t)throw Error("XMLHttpRequest is not supported");return t},fetch:function(t,r){if(r&&"function"!=typeof r&&(r=null),e.IS_NODE);else{var i=e.XHR();if(i.open("GET",t,!!r),i.setRequestHeader("Accept","text/plain"),"function"==typeof i.overrideMimeType&&i.overrideMimeType("text/plain"),!r)return i.send(null),200==i.status||0==i.status&&"string"==typeof i.responseText?i.responseText:null;if(i.onreadystatechange=function(){4==i.readyState&&(200==i.status||0==i.status&&"string"==typeof i.responseText?r(i.responseText):r(null))},4==i.readyState)return;i.send(null)}}};return e.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},e}(),i.Lang={OPEN:"{",CLOSE:"}",OPTOPEN:"[",OPTCLOSE:"]",OPTEND:",",EQUAL:"=",END:";",STRINGOPEN:'"',STRINGCLOSE:'"',STRINGOPEN_SQ:"'",STRINGCLOSE_SQ:"'",COPTOPEN:"(",COPTCLOSE:")",DELIM:/[\s\{\}=;\[\],'"\(\)]/g,RULE:/^(?:required|optional|repeated)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,FQTYPEREF:/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+|([0-9]*\.[0-9]+([Ee][+-]?[0-9]+)?))$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0x[0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^[0-9]*\.[0-9]+([Ee][+-]?[0-9]+)?$/,ID:/^(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\-?(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\s/,STRING:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,BOOL:/^(?:true|false)$/i},i.DotProto=function(e,t){var r={},i=function(e){this.source=""+e,this.index=0,this.line=1,this.stack=[],this.readingString=!1,this.stringEndsWith=t.STRINGCLOSE},s=i.prototype;s._readString=function(){var e;if(t.STRING.lastIndex=this.index-1,null!==(e=t.STRING.exec(this.source))){var r=void 0!==e[1]?e[1]:e[2];return this.index=t.STRING.lastIndex,this.stack.push(this.stringEndsWith),r}throw Error("Unterminated string at line "+this.line+", index "+this.index)},s.next=function(){if(this.stack.length>0)return this.stack.shift();if(this.index>=this.source.length)return null;if(this.readingString)return this.readingString=!1,this._readString();var e,r;do{for(e=!1;t.WHITESPACE.test(r=this.source.charAt(this.index));)if(this.index++,"\n"===r&&this.line++,this.index===this.source.length)return null;if("/"===this.source.charAt(this.index))if("/"===this.source.charAt(++this.index)){for(;"\n"!==this.source.charAt(this.index);)if(this.index++,this.index==this.source.length)return null;this.index++,this.line++,e=!0}else{if("*"!==this.source.charAt(this.index))throw Error("Unterminated comment at line "+this.line+": /"+this.source.charAt(this.index));for(r="";r+(r=this.source.charAt(this.index))!=="*/";)if(this.index++,"\n"===r&&this.line++,this.index===this.source.length)return null;this.index++,e=!0}}while(e);if(this.index===this.source.length)return null;var i=this.index;if(t.DELIM.lastIndex=0,t.DELIM.test(this.source.charAt(i)))++i;else for(++i;i<this.source.length&&!t.DELIM.test(this.source.charAt(i));)i++;var s=this.source.substring(this.index,this.index=i);return s===t.STRINGOPEN?(this.readingString=!0,this.stringEndsWith=t.STRINGCLOSE):s===t.STRINGOPEN_SQ&&(this.readingString=!0,this.stringEndsWith=t.STRINGCLOSE_SQ),s},s.peek=function(){if(0===this.stack.length){var e=this.next();if(null===e)return null;this.stack.push(e)}return this.stack[0]},s.toString=function(){return"Tokenizer("+this.index+"/"+this.source.length+" at line "+this.line+")"},r.Tokenizer=i;var n=function(e){this.tn=new i(e)},o=n.prototype;return o.parse=function(){for(var e,t={name:"[ROOT]",package:null,messages:[],enums:[],imports:[],options:{},services:[]},r=!0;e=this.tn.next();)switch(e){case"package":if(!r||null!==t.package)throw Error("Unexpected package at line "+this.tn.line);t.package=this._parsePackage(e);break;case"import":if(!r)throw Error("Unexpected import at line "+this.tn.line);t.imports.push(this._parseImport(e));break;case"message":this._parseMessage(t,null,e),r=!1;break;case"enum":this._parseEnum(t,e),r=!1;break;case"option":if(!r)throw Error("Unexpected option at line "+this.tn.line);this._parseOption(t,e);break;case"service":this._parseService(t,e);break;case"extend":this._parseExtend(t,e);break;case"syntax":this._parseIgnoredStatement(t,e);break;default:throw Error("Unexpected token at line "+this.tn.line+": "+e)}return delete t.name,t},o._parseNumber=function(e){var r=1;if("-"==e.charAt(0)&&(r=-1,e=e.substring(1)),t.NUMBER_DEC.test(e))return r*parseInt(e,10);if(t.NUMBER_HEX.test(e))return r*parseInt(e.substring(2),16);if(t.NUMBER_OCT.test(e))return r*parseInt(e.substring(1),8);if(t.NUMBER_FLT.test(e))return r*parseFloat(e);throw Error("Illegal number at line "+this.tn.line+": "+(r<0?"-":"")+e)},o._parseString=function(){var e,r="";do{if(e=this.tn.next(),r+=this.tn.next(),(e=this.tn.next())!==this.tn.stringEndsWith)throw Error("Illegal end of string at line "+this.tn.line+": "+e);e=this.tn.peek()}while(e===t.STRINGOPEN||e===t.STRINGOPEN_SQ);return r},o._parseId=function(e,r){var i=-1,s=1;if("-"==e.charAt(0)&&(s=-1,e=e.substring(1)),t.NUMBER_DEC.test(e))i=parseInt(e);else if(t.NUMBER_HEX.test(e))i=parseInt(e.substring(2),16);else{if(!t.NUMBER_OCT.test(e))throw Error("Illegal id at line "+this.tn.line+": "+(s<0?"-":"")+e);i=parseInt(e.substring(1),8)}if(i=s*i|0,!r&&i<0)throw Error("Illegal id at line "+this.tn.line+": "+(s<0?"-":"")+e);return i},o._parsePackage=function(e){if(e=this.tn.next(),!t.TYPEREF.test(e))throw Error("Illegal package name at line "+this.tn.line+": "+e);var r=e;if((e=this.tn.next())!=t.END)throw Error("Illegal end of package at line "+this.tn.line+": "+e);return r},o._parseImport=function(e){if("public"===(e=this.tn.peek())&&(this.tn.next(),e=this.tn.peek()),e!==t.STRINGOPEN&&e!==t.STRINGOPEN_SQ)throw Error("Illegal start of import at line "+this.tn.line+": "+e);var r=this._parseString();if((e=this.tn.next())!==t.END)throw Error("Illegal end of import at line "+this.tn.line+": "+e);return r},o._parseOption=function(e,r){var i=!1;if((r=this.tn.next())==t.COPTOPEN&&(i=!0,r=this.tn.next()),!t.TYPEREF.test(r)&&!/google\.protobuf\./.test(r))throw Error("Illegal option name in message "+e.name+" at line "+this.tn.line+": "+r);var s,n=r;if(r=this.tn.next(),i){if(r!==t.COPTCLOSE)throw Error("Illegal end in message "+e.name+", option "+n+" at line "+this.tn.line+": "+r);n="("+n+")",r=this.tn.next(),t.FQTYPEREF.test(r)&&(n+=r,r=this.tn.next())}if(r!==t.EQUAL)throw Error("Illegal operator in message "+e.name+", option "+n+" at line "+this.tn.line+": "+r);if((r=this.tn.peek())===t.STRINGOPEN||r===t.STRINGOPEN_SQ)s=this._parseString();else if(this.tn.next(),t.NUMBER.test(r))s=this._parseNumber(r,!0);else if(t.BOOL.test(r))s="true"===r;else{if(!t.TYPEREF.test(r))throw Error("Illegal option value in message "+e.name+", option "+n+" at line "+this.tn.line+": "+r);s=r}if((r=this.tn.next())!==t.END)throw Error("Illegal end of option in message "+e.name+", option "+n+" at line "+this.tn.line+": "+r);e.options[n]=s},o._parseIgnoredStatement=function(e,r){for(var i;;){if(null===(i=this.tn.next()))throw Error("Unexpected EOF in "+e.name+", "+r+" at line "+this.tn.line);if(i===t.END)break}},o._parseService=function(e,r){if(r=this.tn.next(),!t.NAME.test(r))throw Error("Illegal service name at line "+this.tn.line+": "+r);var i=r,s={name:i,rpc:{},options:{}};if((r=this.tn.next())!==t.OPEN)throw Error("Illegal start of service "+i+" at line "+this.tn.line+": "+r);do{if("option"===(r=this.tn.next()))this._parseOption(s,r);else if("rpc"===r)this._parseServiceRPC(s,r);else if(r!==t.CLOSE)throw Error("Illegal type of service "+i+" at line "+this.tn.line+": "+r)}while(r!==t.CLOSE);e.services.push(s)},o._parseServiceRPC=function(e,r){var i=r;if(r=this.tn.next(),!t.NAME.test(r))throw Error("Illegal method name in service "+e.name+" at line "+this.tn.line+": "+r);var s=r,n={request:null,response:null,options:{}};if((r=this.tn.next())!==t.COPTOPEN)throw Error("Illegal start of request type in service "+e.name+"#"+s+" at line "+this.tn.line+": "+r);if(r=this.tn.next(),!t.TYPEREF.test(r))throw Error("Illegal request type in service "+e.name+"#"+s+" at line "+this.tn.line+": "+r);if(n.request=r,(r=this.tn.next())!=t.COPTCLOSE)throw Error("Illegal end of request type in service "+e.name+"#"+s+" at line "+this.tn.line+": "+r);if("returns"!==(r=this.tn.next()).toLowerCase())throw Error("Illegal delimiter in service "+e.name+"#"+s+" at line "+this.tn.line+": "+r);if((r=this.tn.next())!=t.COPTOPEN)throw Error("Illegal start of response type in service "+e.name+"#"+s+" at line "+this.tn.line+": "+r);if(r=this.tn.next(),n.response=r,(r=this.tn.next())!==t.COPTCLOSE)throw Error("Illegal end of response type in service "+e.name+"#"+s+" at line "+this.tn.line+": "+r);if((r=this.tn.next())===t.OPEN){do{if("option"===(r=this.tn.next()))this._parseOption(n,r);else if(r!==t.CLOSE)throw Error("Illegal start of option inservice "+e.name+"#"+s+" at line "+this.tn.line+": "+r)}while(r!==t.CLOSE);this.tn.peek()===t.END&&this.tn.next()}else if(r!==t.END)throw Error("Illegal delimiter in service "+e.name+"#"+s+" at line "+this.tn.line+": "+r);void 0===e[i]&&(e[i]={}),e[i][s]=n},o._parseMessage=function(e,r,i){var s={},n="group"===i;if(i=this.tn.next(),!t.NAME.test(i))throw Error("Illegal "+(n?"group":"message")+" name"+(e?" in message "+e.name:"")+" at line "+this.tn.line+": "+i);if(s.name=i,n){if((i=this.tn.next())!==t.EQUAL)throw Error("Illegal id assignment after group "+s.name+" at line "+this.tn.line+": "+i);i=this.tn.next();try{r.id=this._parseId(i)}catch(e){throw Error("Illegal field id value for group "+s.name+"#"+r.name+" at line "+this.tn.line+": "+i)}s.isGroup=!0}if(s.fields=[],s.enums=[],s.messages=[],s.options={},s.oneofs={},(i=this.tn.next())===t.OPTOPEN&&r&&(this._parseFieldOptions(s,r,i),i=this.tn.next()),i!==t.OPEN)throw Error("Illegal start of "+(n?"group":"message")+" "+s.name+" at line "+this.tn.line+": "+i);for(;;){if((i=this.tn.next())===t.CLOSE){(i=this.tn.peek())===t.END&&this.tn.next();break}if(t.RULE.test(i))this._parseMessageField(s,i);else if("oneof"===i)this._parseMessageOneOf(s,i);else if("enum"===i)this._parseEnum(s,i);else if("message"===i)this._parseMessage(s,null,i);else if("option"===i)this._parseOption(s,i);else if("extensions"===i)s.extensions=this._parseExtensions(s,i);else{if("extend"!==i)throw Error("Illegal token in message "+s.name+" at line "+this.tn.line+": "+i);this._parseExtend(s,i)}}return e.messages.push(s),s},o._parseMessageField=function(e,r){var i={},s=null;if(i.rule=r,i.options={},"group"===(r=this.tn.next())){if(s=this._parseMessage(e,i,r),!/^[A-Z]/.test(s.name))throw Error("Group names must start with a capital letter");i.type=s.name,i.name=s.name.toLowerCase(),(r=this.tn.peek())===t.END&&this.tn.next()}else{if(!t.TYPE.test(r)&&!t.TYPEREF.test(r))throw Error("Illegal field type in message "+e.name+" at line "+this.tn.line+": "+r);if(i.type=r,r=this.tn.next(),!t.NAME.test(r))throw Error("Illegal field name in message "+e.name+" at line "+this.tn.line+": "+r);if(i.name=r,(r=this.tn.next())!==t.EQUAL)throw Error("Illegal token in field "+e.name+"#"+i.name+" at line "+this.tn.line+": "+r);r=this.tn.next();try{i.id=this._parseId(r)}catch(t){throw Error("Illegal field id in message "+e.name+"#"+i.name+" at line "+this.tn.line+": "+r)}if((r=this.tn.next())===t.OPTOPEN&&(this._parseFieldOptions(e,i,r),r=this.tn.next()),r!==t.END)throw Error("Illegal delimiter in message "+e.name+"#"+i.name+" at line "+this.tn.line+": "+r)}return e.fields.push(i),i},o._parseMessageOneOf=function(e,r){if(r=this.tn.next(),!t.NAME.test(r))throw Error("Illegal oneof name in message "+e.name+" at line "+this.tn.line+": "+r);var i,s=r,n=[];if((r=this.tn.next())!==t.OPEN)throw Error("Illegal start of oneof "+s+" at line "+this.tn.line+": "+r);for(;this.tn.peek()!==t.CLOSE;)(i=this._parseMessageField(e,"optional")).oneof=s,n.push(i.id);this.tn.next(),e.oneofs[s]=n},o._parseFieldOptions=function(e,r,i){for(var s=!0;(i=this.tn.next())!==t.OPTCLOSE;){if(i===t.OPTEND){if(s)throw Error("Illegal start of options in message "+e.name+"#"+r.name+" at line "+this.tn.line+": "+i);i=this.tn.next()}this._parseFieldOption(e,r,i),s=!1}},o._parseFieldOption=function(e,r,i){var s=!1;if(i===t.COPTOPEN&&(i=this.tn.next(),s=!0),!t.TYPEREF.test(i))throw Error("Illegal field option in "+e.name+"#"+r.name+" at line "+this.tn.line+": "+i);var n,o=i;if(i=this.tn.next(),s){if(i!==t.COPTCLOSE)throw Error("Illegal delimiter in "+e.name+"#"+r.name+" at line "+this.tn.line+": "+i);o="("+o+")",i=this.tn.next(),t.FQTYPEREF.test(i)&&(o+=i,i=this.tn.next())}if(i!==t.EQUAL)throw Error("Illegal token in "+e.name+"#"+r.name+" at line "+this.tn.line+": "+i);if((i=this.tn.peek())===t.STRINGOPEN||i===t.STRINGOPEN_SQ)n=this._parseString();else if(t.NUMBER.test(i,!0))n=this._parseNumber(this.tn.next(),!0);else if(t.BOOL.test(i))n="true"===this.tn.next().toLowerCase();else{if(!t.TYPEREF.test(i))throw Error("Illegal value in message "+e.name+"#"+r.name+", option "+o+" at line "+this.tn.line+": "+i);n=this.tn.next()}r.options[o]=n},o._parseEnum=function(e,r){var i={};if(r=this.tn.next(),!t.NAME.test(r))throw Error("Illegal enum name in message "+e.name+" at line "+this.tn.line+": "+r);if(i.name=r,(r=this.tn.next())!==t.OPEN)throw Error("Illegal start of enum "+i.name+" at line "+this.tn.line+": "+r);for(i.values=[],i.options={};;){if((r=this.tn.next())===t.CLOSE){(r=this.tn.peek())===t.END&&this.tn.next();break}if("option"==r)this._parseOption(i,r);else{if(!t.NAME.test(r))throw Error("Illegal name in enum "+i.name+" at line "+this.tn.line+": "+r);this._parseEnumValue(i,r)}}e.enums.push(i)},o._parseEnumValue=function(e,r){var i={};if(i.name=r,(r=this.tn.next())!==t.EQUAL)throw Error("Illegal token in enum "+e.name+" at line "+this.tn.line+": "+r);r=this.tn.next();try{i.id=this._parseId(r,!0)}catch(t){throw Error("Illegal id in enum "+e.name+" at line "+this.tn.line+": "+r)}if(e.values.push(i),(r=this.tn.next())===t.OPTOPEN&&(this._parseFieldOptions(e,{options:{}},r),r=this.tn.next()),r!==t.END)throw Error("Illegal delimiter in enum "+e.name+" at line "+this.tn.line+": "+r)},o._parseExtensions=function(r,i){var s=[];if("min"===(i=this.tn.next())?s.push(e.ID_MIN):"max"===i?s.push(e.ID_MAX):s.push(this._parseNumber(i)),"to"!==(i=this.tn.next()))throw Error("Illegal extensions delimiter in message "+r.name+" at line "+this.tn.line+": "+i);if("min"===(i=this.tn.next())?s.push(e.ID_MIN):"max"===i?s.push(e.ID_MAX):s.push(this._parseNumber(i)),(i=this.tn.next())!==t.END)throw Error("Illegal extensions delimiter in message "+r.name+" at line "+this.tn.line+": "+i);return s},o._parseExtend=function(e,r){if(r=this.tn.next(),!t.TYPEREF.test(r))throw Error("Illegal message name at line "+this.tn.line+": "+r);var i={};if(i.ref=r,i.fields=[],(r=this.tn.next())!==t.OPEN)throw Error("Illegal start of extend "+i.name+" at line "+this.tn.line+": "+r);for(;;){if((r=this.tn.next())===t.CLOSE){(r=this.tn.peek())==t.END&&this.tn.next();break}if(!t.RULE.test(r))throw Error("Illegal token in extend "+i.name+" at line "+this.tn.line+": "+r);this._parseMessageField(i,r)}return e.messages.push(i),i},o.toString=function(){return"Parser"},r.Parser=n,r}(i,i.Lang),i.Reflect=function(e){var r={},i=function(e,t,r){this.builder=e,this.parent=t,this.name=r,this.className},s=i.prototype;s.fqn=function(){for(var e=this.name,t=this;null!=(t=t.parent);)e=t.name+"."+e;return e},s.toString=function(e){return(e?this.className+" ":"")+this.fqn()},s.build=function(){throw Error(this.toString(!0)+" cannot be built directly")},r.T=i;var n=function(e,t,r,s){i.call(this,e,t,r),this.className="Namespace",this.children=[],this.options=s||{}},o=n.prototype=Object.create(i.prototype);o.getChildren=function(e){if(null==(e=e||null))return this.children.slice();for(var t=[],r=0,i=this.children.length;r<i;++r)this.children[r]instanceof e&&t.push(this.children[r]);return t},o.addChild=function(e){var t;if(t=this.getChild(e.name))if(t instanceof a.Field&&t.name!==t.originalName&&null===this.getChild(t.originalName))t.name=t.originalName;else{if(!(e instanceof a.Field&&e.name!==e.originalName&&null===this.getChild(e.originalName)))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+e.name);e.name=e.originalName}this.children.push(e)},o.getChild=function(e){for(var t="number"==typeof e?"id":"name",r=0,i=this.children.length;r<i;++r)if(this.children[r][t]===e)return this.children[r];return null},o.resolve=function(e,t){var i,s=e.split("."),n=this,o=0;if(""===s[o]){for(;null!==n.parent;)n=n.parent;o++}do{do{if(!(i=n.getChild(s[o]))||!(i instanceof r.T)||t&&i instanceof r.Message.Field){n=null;break}n=i,o++}while(o<s.length);if(null!=n)break;if(null!==this.parent)return this.parent.resolve(e,t)}while(null!=n);return n},o.build=function(){for(var e,t={},r=this.children,i=0,s=r.length;i<s;++i)(e=r[i])instanceof n&&(t[e.name]=e.build());return Object.defineProperty&&Object.defineProperty(t,"$options",{value:this.buildOpt()}),t},o.buildOpt=function(){for(var e={},t=Object.keys(this.options),r=0,i=t.length;r<i;++r){var s=t[r],n=this.options[t[r]];e[s]=n}return e},o.getOption=function(e){return void 0===e?this.options:void 0!==this.options[e]?this.options[e]:null},r.Namespace=n;var a=function(t,r,i,s,o){n.call(this,t,r,i,s),this.className="Message",this.extensions=[e.ID_MIN,e.ID_MAX],this.clazz=null,this.isGroup=!!o,this._fields=null,this._fieldsById=null,this._fieldsByName=null},h=a.prototype=Object.create(n.prototype);function c(t,r){var i=r.readVarint32(),s=7&i,n=i>>3;switch(s){case e.WIRE_TYPES.VARINT:do{i=r.readUint8()}while(128==(128&i));break;case e.WIRE_TYPES.BITS64:r.offset+=8;break;case e.WIRE_TYPES.LDELIM:i=r.readVarint32(),r.offset+=i;break;case e.WIRE_TYPES.STARTGROUP:c(n,r);break;case e.WIRE_TYPES.ENDGROUP:if(n===t)return!1;throw Error("Illegal GROUPEND after unknown group: "+n+" ("+t+" expected)");case e.WIRE_TYPES.BITS32:r.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+t+": "+s)}return!0}h.build=function(r){if(this.clazz&&!r)return this.clazz;var i=function(e,r){var i=r.getChildren(e.Reflect.Message.Field),s=r.getChildren(e.Reflect.Message.OneOf),n=function(r,n){e.Builder.Message.call(this);for(var o=0,a=s.length;o<a;++o)this[s[o].name]=null;for(o=0,a=i.length;o<a;++o){var h=i[o];this[h.name]=h.repeated?[]:null,h.required&&null!==h.defaultValue&&(this[h.name]=h.defaultValue)}if(arguments.length>0)if(1!==arguments.length||"object"!=typeof r||"function"==typeof r.encode||e.Util.isArray(r)||r instanceof t||r instanceof ArrayBuffer||e.Long&&r instanceof e.Long)for(o=0,a=arguments.length;o<a;++o)this.$set(i[o].name,arguments[o]);else{var c=Object.keys(r);for(o=0,a=c.length;o<a;++o)this.$set(c[o],r[c[o]])}},o=n.prototype=Object.create(e.Builder.Message.prototype);o.add=function(t,i,s){var n=r._fieldsByName[t];if(!s){if(!n)throw Error(this+"#"+t+" is undefined");if(!(n instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: "+n.toString(!0));if(!n.repeated)throw Error(this+"#"+t+" is not a repeated field")}null===this[n.name]&&(this[n.name]=[]),this[n.name].push(s?i:n.verifyValue(i,!0))},o.$add=o.add,o.set=function(t,i,s){if(t&&"object"==typeof t){for(var n in t)t.hasOwnProperty(n)&&this.$set(n,t[n],s);return this}var o=r._fieldsByName[t];if(s)this[o.name]=i;else{if(!o)throw Error(this+"#"+t+" is not a field: undefined");if(!(o instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: "+o.toString(!0));this[o.name]=i=o.verifyValue(i)}return o.oneof&&(null!==i?(null!==this[o.oneof.name]&&(this[this[o.oneof.name]]=null),this[o.oneof.name]=o.name):o.oneof.name===t&&(this[o.oneof.name]=null)),this},o.$set=o.set,o.get=function(t,i){if(i)return this[t];var s=r._fieldsByName[t];if(!(s&&s instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: undefined");if(!(s instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: "+s.toString(!0));return this[s.name]},o.$get=o.get;for(var a=0;a<i.length;a++){var h=i[a];h instanceof e.Reflect.Message.ExtensionField||r.builder.options.populateAccessors&&function(e){var t=e.originalName.replace(/(_[a-zA-Z])/g,function(e){return e.toUpperCase().replace("_","")});t=t.substring(0,1).toUpperCase()+t.substring(1);var i=e.originalName.replace(/([A-Z])/g,function(e){return"_"+e}),s=function(t,r){return this[e.name]=r?t:e.verifyValue(t),this},n=function(){return this[e.name]};null===r.getChild("set"+t)&&(o["set"+t]=s),null===r.getChild("set_"+i)&&(o["set_"+i]=s),null===r.getChild("get"+t)&&(o["get"+t]=n),null===r.getChild("get_"+i)&&(o["get_"+i]=n)}(h)}return o.encode=function(e,i){"boolean"==typeof e&&(i=e,e=undefined);var s=!1;e||(e=new t,s=!0);var n=e.littleEndian;try{return r.encode(this,e.LE(),i),(s?e.flip():e).LE(n)}catch(t){throw e.LE(n),t}},o.calculate=function(){return r.calculate(this)},o.encodeDelimited=function(e){var i=!1;e||(e=new t,i=!0);var s=(new t).LE();return r.encode(this,s).flip(),e.writeVarint32(s.remaining()),e.append(s),i?e.flip():e},o.encodeAB=function(){try{return this.encode().toArrayBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toArrayBuffer()),e}},o.toArrayBuffer=o.encodeAB,o.encodeNB=function(){try{return this.encode().toBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBuffer()),e}},o.toBuffer=o.encodeNB,o.encode64=function(){try{return this.encode().toBase64()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBase64()),e}},o.toBase64=o.encode64,o.encodeHex=function(){try{return this.encode().toHex()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toHex()),e}},o.toHex=o.encodeHex,o.toRaw=function(e){return function e(r,i){var s={};for(var n in r)r.hasOwnProperty(n)&&(null===r[n]||"object"!=typeof r[n]?s[n]=r[n]:r[n]instanceof t?i&&(s[n]=r[n].toBase64()):s[n]=e(r[n],i));return s}(this,!!e)},n.decode=function(e,i){"string"==typeof e&&(e=t.wrap(e,i||"base64"));var s=(e=e instanceof t?e:t.wrap(e)).littleEndian;try{var n=r.decode(e.LE());return e.LE(s),n}catch(t){throw e.LE(s),t}},n.decodeDelimited=function(e,i){if("string"==typeof e&&(e=t.wrap(e,i||"base64")),(e=e instanceof t?e:t.wrap(e)).remaining()<1)return null;var s=e.offset,n=e.readVarint32();if(e.remaining()<n)return e.offset=s,null;try{var o=r.decode(e.slice(e.offset,e.offset+n).LE());return e.offset+=n,o}catch(t){throw e.offset+=n,t}},n.decode64=function(e){return n.decode(e,"base64")},n.decodeHex=function(e){return n.decode(e,"hex")},o.toString=function(){return r.toString()},Object.defineProperty&&(Object.defineProperty(n,"$options",{value:r.buildOpt()}),Object.defineProperty(o,"$type",{get:function(){return r}})),n}(e,this);this._fields=[],this._fieldsById={},this._fieldsByName={};for(var s,n=0,o=this.children.length;n<o;n++)if((s=this.children[n])instanceof p)i[s.name]=s.build();else if(s instanceof a)i[s.name]=s.build();else if(s instanceof a.Field)s.build(),this._fields.push(s),this._fieldsById[s.id]=s,this._fieldsByName[s.name]=s;else if(!(s instanceof a.OneOf||s instanceof g))throw Error("Illegal reflect child of "+this.toString(!0)+": "+children[n].toString(!0));return this.clazz=i},h.encode=function(e,t,r){for(var i,s,n=null,o=0,a=this._fields.length;o<a;++o)s=e[(i=this._fields[o]).name],i.required&&null===s?null===n&&(n=i):i.encode(r?s:i.verifyValue(s),t);if(null!==n){var h=Error("Missing at least one required field for "+this.toString(!0)+": "+n);throw h.encoded=t,h}return t},h.calculate=function(e){for(var t,r,i=0,s=0,n=this._fields.length;s<n;++s){if(r=e[(t=this._fields[s]).name],t.required&&null===r)throw Error("Missing at least one required field for "+this.toString(!0)+": "+t);i+=t.calculate(r)}return i},h.decode=function(t,r,i){r="number"==typeof r?r:-1;for(var s,n,o,a,h=t.offset,u=new this.clazz;t.offset<h+r||-1===r&&t.remaining()>0;){if(o=(s=t.readVarint32())>>3,(n=7&s)===e.WIRE_TYPES.ENDGROUP){if(o!==i)throw Error("Illegal group end indicator for "+this.toString(!0)+": "+o+" ("+(i?i+" expected":"not a group")+")");break}if(a=this._fieldsById[o])a.repeated&&!a.options.packed?u[a.name].push(a.decode(n,t)):(u[a.name]=a.decode(n,t),a.oneof&&(null!==this[a.oneof.name]&&(this[this[a.oneof.name]]=null),u[a.oneof.name]=a.name));else switch(n){case e.WIRE_TYPES.VARINT:t.readVarint32();break;case e.WIRE_TYPES.BITS32:t.offset+=4;break;case e.WIRE_TYPES.BITS64:t.offset+=8;break;case e.WIRE_TYPES.LDELIM:var f=t.readVarint32();t.offset+=f;break;case e.WIRE_TYPES.STARTGROUP:for(;c(o,t););break;default:throw Error("Illegal wire type for unknown field "+o+" in "+this.toString(!0)+"#decode: "+n)}}for(var l=0,d=this._fields.length;l<d;++l)if(null===u[(a=this._fields[l]).name]){if(a.required){var p=Error("Missing at least one required field for "+this.toString(!0)+": "+a.name);throw p.decoded=u,p}null!==a.defaultValue&&(u[a.name]=a.defaultValue)}return u},r.Message=a;var u=function(e,t,r,s,n,o,h,c){i.call(this,e,t,n),this.className="Message.Field",this.required="required"===r,this.repeated="repeated"===r,this.type=s,this.resolvedType=null,this.id=o,this.options=h||{},this.defaultValue=null,this.oneof=c||null,this.originalName=this.name,!this.builder.options.convertFieldsToCamelCase||this instanceof a.ExtensionField||(this.name=u._toCamelCase(this.name))};u._toCamelCase=function(e){return e.replace(/_([a-zA-Z])/g,function(e,t){return t.toUpperCase()})};var f=u.prototype=Object.create(i.prototype);function l(t,r){if(t&&"number"==typeof t.low&&"number"==typeof t.high&&"boolean"==typeof t.unsigned&&t.low==t.low&&t.high==t.high)return new e.Long(t.low,t.high,void 0===r?t.unsigned:r);if("string"==typeof t)return e.Long.fromString(t,r||!1,10);if("number"==typeof t)return e.Long.fromNumber(t,r||!1);throw Error("not convertible to Long")}f.build=function(){this.defaultValue=void 0!==this.options.default?this.verifyValue(this.options.default):null},f.verifyValue=function(r,i){i=i||!1;var s=function(e,t){throw Error("Illegal value for "+this.toString(!0)+" of type "+this.type.name+": "+e+" ("+t+")")}.bind(this);if(null===r)return this.required&&s(typeof r,"required"),null;if(this.repeated&&!i){e.Util.isArray(r)||(r=[r]);var n=[];for(h=0;h<r.length;h++)n.push(this.verifyValue(r[h],!0));return n}switch(!this.repeated&&e.Util.isArray(r)&&s(typeof r,"no array expected"),this.type){case e.TYPES.int32:case e.TYPES.sint32:case e.TYPES.sfixed32:return("number"!=typeof r||r==r&&r%1!=0)&&s(typeof r,"not an integer"),r>4294967295?0|r:r;case e.TYPES.uint32:case e.TYPES.fixed32:return("number"!=typeof r||r==r&&r%1!=0)&&s(typeof r,"not an integer"),r<0?r>>>0:r;case e.TYPES.int64:case e.TYPES.sint64:case e.TYPES.sfixed64:if(e.Long)try{return l(r,!1)}catch(e){s(typeof r,e.message)}else s(typeof r,"requires Long.js");case e.TYPES.uint64:case e.TYPES.fixed64:if(e.Long)try{return l(r,!0)}catch(e){s(typeof r,e.message)}else s(typeof r,"requires Long.js");case e.TYPES.bool:return"boolean"!=typeof r&&s(typeof r,"not a boolean"),r;case e.TYPES.float:case e.TYPES.double:return"number"!=typeof r&&s(typeof r,"not a number"),r;case e.TYPES.string:return"string"==typeof r||r&&r instanceof String||s(typeof r,"not a string"),""+r;case e.TYPES.bytes:return t.isByteBuffer(r)?r:t.wrap(r,"base64");case e.TYPES.enum:var o=this.resolvedType.getChildren(p.Value);for(h=0;h<o.length;h++){if(o[h].name==r)return o[h].id;if(o[h].id==r)return o[h].id}s(r,"not a valid enum value");case e.TYPES.group:case e.TYPES.message:if(r&&"object"==typeof r||s(typeof r,"object expected"),r instanceof this.resolvedType.clazz)return r;if(r instanceof e.Builder.Message){var a={};for(var h in r)r.hasOwnProperty(h)&&(a[h]=r[h]);r=a}return new this.resolvedType.clazz(r)}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+r+" (undefined type "+this.type+")")},f.encode=function(r,i){if(null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===r||this.repeated&&0==r.length)return i;try{var s;if(this.repeated)if(this.options.packed&&e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){i.writeVarint32(this.id<<3|e.WIRE_TYPES.LDELIM),i.ensureCapacity(i.offset+=1);var n=i.offset;for(s=0;s<r.length;s++)this.encodeValue(r[s],i);var o=i.offset-n,a=t.calculateVarint32(o);if(a>1){var h=i.slice(n,i.offset);n+=a-1,i.offset=n,i.append(h)}i.writeVarint32(o,n-a)}else for(s=0;s<r.length;s++)i.writeVarint32(this.id<<3|this.type.wireType),this.encodeValue(r[s],i);else i.writeVarint32(this.id<<3|this.type.wireType),this.encodeValue(r,i)}catch(e){throw Error("Illegal value for "+this.toString(!0)+": "+r+" ("+e+")")}return i},f.encodeValue=function(r,i){if(null===r)return i;switch(this.type){case e.TYPES.int32:r<0?i.writeVarint64(r):i.writeVarint32(r);break;case e.TYPES.uint32:i.writeVarint32(r);break;case e.TYPES.sint32:i.writeVarint32ZigZag(r);break;case e.TYPES.fixed32:i.writeUint32(r);break;case e.TYPES.sfixed32:i.writeInt32(r);break;case e.TYPES.int64:case e.TYPES.uint64:i.writeVarint64(r);break;case e.TYPES.sint64:i.writeVarint64ZigZag(r);break;case e.TYPES.fixed64:i.writeUint64(r);break;case e.TYPES.sfixed64:i.writeInt64(r);break;case e.TYPES.bool:"string"==typeof r?i.writeVarint32("false"===r.toLowerCase()?0:!!r):i.writeVarint32(r?1:0);break;case e.TYPES.enum:i.writeVarint32(r);break;case e.TYPES.float:i.writeFloat32(r);break;case e.TYPES.double:i.writeFloat64(r);break;case e.TYPES.string:i.writeVString(r);break;case e.TYPES.bytes:if(r.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+r.remaining()+" bytes remaining");var s=r.offset;i.writeVarint32(r.remaining()),i.append(r),r.offset=s;break;case e.TYPES.message:var n=(new t).LE();this.resolvedType.encode(r,n),i.writeVarint32(n.offset),i.append(n.flip());break;case e.TYPES.group:this.resolvedType.encode(r,i),i.writeVarint32(this.id<<3|e.WIRE_TYPES.ENDGROUP);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+r+" (unknown type)")}return i},f.calculate=function(r){if(r=this.verifyValue(r),null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===r||this.repeated&&0==r.length)return 0;var i=0;try{var s,n;if(this.repeated)if(this.options.packed&&e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){for(i+=t.calculateVarint32(this.id<<3|e.WIRE_TYPES.LDELIM),n=0,s=0;s<r.length;s++)n+=this.calculateValue(r[s]);i+=t.calculateVarint32(n),i+=n}else for(s=0;s<r.length;s++)i+=t.calculateVarint32(this.id<<3|this.type.wireType),i+=this.calculateValue(r[s]);else i+=t.calculateVarint32(this.id<<3|this.type.wireType),i+=this.calculateValue(r)}catch(e){throw Error("Illegal value for "+this.toString(!0)+": "+r+" ("+e+")")}return i},f.calculateValue=function(r){if(null===r)return 0;var i;switch(this.type){case e.TYPES.int32:return r<0?t.calculateVarint64(r):t.calculateVarint32(r);case e.TYPES.uint32:return t.calculateVarint32(r);case e.TYPES.sint32:return t.calculateVarint32(t.zigZagEncode32(r));case e.TYPES.fixed32:case e.TYPES.sfixed32:case e.TYPES.float:return 4;case e.TYPES.int64:case e.TYPES.uint64:return t.calculateVarint64(r);case e.TYPES.sint64:return t.calculateVarint64(t.zigZagEncode64(r));case e.TYPES.fixed64:case e.TYPES.sfixed64:return 8;case e.TYPES.bool:return 1;case e.TYPES.enum:return t.calculateVarint32(r);case e.TYPES.double:return 8;case e.TYPES.string:return i=t.calculateUTF8Bytes(r),t.calculateVarint32(i)+i;case e.TYPES.bytes:if(r.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+r.remaining()+" bytes remaining");return t.calculateVarint32(r.remaining())+r.remaining();case e.TYPES.message:return i=this.resolvedType.calculate(r),t.calculateVarint32(i)+i;case e.TYPES.group:return(i=this.resolvedType.calculate(r))+t.calculateVarint32(this.id<<3|e.WIRE_TYPES.ENDGROUP)}throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+r+" (unknown type)")},f.decode=function(t,r,i){var s,n;if(t!=this.type.wireType&&(i||t!=e.WIRE_TYPES.LDELIM||!this.repeated))throw Error("Illegal wire type for field "+this.toString(!0)+": "+t+" ("+this.type.wireType+" expected)");if(t==e.WIRE_TYPES.LDELIM&&this.repeated&&this.options.packed&&e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0&&!i){n=r.readVarint32(),n=r.offset+n;for(var o=[];r.offset<n;)o.push(this.decode(this.type.wireType,r,!0));return o}switch(this.type){case e.TYPES.int32:return 0|r.readVarint32();case e.TYPES.uint32:return r.readVarint32()>>>0;case e.TYPES.sint32:return 0|r.readVarint32ZigZag();case e.TYPES.fixed32:return r.readUint32()>>>0;case e.TYPES.sfixed32:return 0|r.readInt32();case e.TYPES.int64:return r.readVarint64();case e.TYPES.uint64:return r.readVarint64().toUnsigned();case e.TYPES.sint64:return r.readVarint64ZigZag();case e.TYPES.fixed64:return r.readUint64();case e.TYPES.sfixed64:return r.readInt64();case e.TYPES.bool:return!!r.readVarint32();case e.TYPES.enum:return r.readVarint32();case e.TYPES.float:return r.readFloat();case e.TYPES.double:return r.readDouble();case e.TYPES.string:return r.readVString();case e.TYPES.bytes:if(n=r.readVarint32(),r.remaining()<n)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+n+" required but got only "+r.remaining());return(s=r.clone()).limit=s.offset+n,r.offset+=n,s;case e.TYPES.message:return n=r.readVarint32(),this.resolvedType.decode(r,n);case e.TYPES.group:return this.resolvedType.decode(r,-1,this.id)}throw Error("[INTERNAL] Illegal wire type for "+this.toString(!0)+": "+t)},r.Message.Field=u;var d=function(e,t,r,i,s,n,o){u.call(this,e,t,r,i,s,n,o),this.extension};d.prototype=Object.create(u.prototype),r.Message.ExtensionField=d,r.Message.OneOf=function(e,t,r){i.call(this,e,t,r),this.fields=[]};var p=function(e,t,r,i){n.call(this,e,t,r,i),this.className="Enum",this.object=null};(p.prototype=Object.create(n.prototype)).build=function(){for(var e={},t=this.getChildren(p.Value),r=0,i=t.length;r<i;++r)e[t[r].name]=t[r].id;return Object.defineProperty&&Object.defineProperty(e,"$options",{value:this.buildOpt()}),this.object=e},r.Enum=p;var b=function(e,t,r,s){i.call(this,e,t,r),this.className="Enum.Value",this.id=s};b.prototype=Object.create(i.prototype),r.Enum.Value=b;var g=function(e,t,r,s){i.call(this,e,t,r),this.field=s};g.prototype=Object.create(i.prototype),r.Extension=g;var m=function(e,t,r,i){n.call(this,e,t,r,i),this.className="Service",this.clazz=null};(m.prototype=Object.create(n.prototype)).build=function(t){return this.clazz&&!t?this.clazz:this.clazz=function(e,t){var r=function(t){e.Builder.Service.call(this),this.rpcImpl=t||function(e,t,r){setTimeout(r.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0)}},i=r.prototype=Object.create(e.Builder.Service.prototype);Object.defineProperty&&(Object.defineProperty(r,"$options",{value:t.buildOpt()}),Object.defineProperty(i,"$options",{value:r.$options}));for(var s=t.getChildren(e.Reflect.Service.RPCMethod),n=0;n<s.length;n++)!function(e){i[e.name]=function(r,i){try{if(!(r&&r instanceof e.resolvedRequestType.clazz))return void setTimeout(i.bind(this,Error("Illegal request type provided to service method "+t.name+"#"+e.name)),0);this.rpcImpl(e.fqn(),r,function(r,s){if(r)i(r);else{try{s=e.resolvedResponseType.clazz.decode(s)}catch(e){}s&&s instanceof e.resolvedResponseType.clazz?i(null,s):i(Error("Illegal response type received in service method "+t.name+"#"+e.name))}})}catch(e){setTimeout(i.bind(this,e),0)}},r[e.name]=function(t,i,s){new r(t)[e.name](i,s)},Object.defineProperty&&(Object.defineProperty(r[e.name],"$options",{value:e.buildOpt()}),Object.defineProperty(i[e.name],"$options",{value:r[e.name].$options}))}(s[n]);return r}(e,this)},r.Service=m;var _=function(e,t,r,s){i.call(this,e,t,r),this.className="Service.Method",this.options=s||{}};(_.prototype=Object.create(i.prototype)).buildOpt=o.buildOpt,r.Service.Method=_;var w=function(e,t,r,i,s,n){_.call(this,e,t,r,n),this.className="Service.RPCMethod",this.requestName=i,this.responseName=s,this.resolvedRequestType=null,this.resolvedResponseType=null};return w.prototype=Object.create(_.prototype),r.Service.RPCMethod=w,r}(i),i.Builder=function(e,t,i){var s=function(e){this.ns=new i.Namespace(this,null,""),this.ptr=this.ns,this.resolved=!1,this.result=null,this.files={},this.importRoot=null,this.options=e||{}},n=s.prototype;return n.reset=function(){this.ptr=this.ns},n.define=function(e,r){if("string"!=typeof e||!t.TYPEREF.test(e))throw Error("Illegal package: "+e);var s,n=e.split(".");for(s=0;s<n.length;s++)if(!t.NAME.test(n[s]))throw Error("Illegal package: "+n[s]);for(s=0;s<n.length;s++)null===this.ptr.getChild(n[s])&&this.ptr.addChild(new i.Namespace(this,this.ptr,n[s],r)),this.ptr=this.ptr.getChild(n[s]);return this},s.isValidMessage=function(r){if("string"!=typeof r.name||!t.NAME.test(r.name))return!1;if(void 0!==r.values||void 0!==r.rpc)return!1;var i;if(void 0!==r.fields){if(!e.Util.isArray(r.fields))return!1;var n,o=[];for(i=0;i<r.fields.length;i++){if(!s.isValidMessageField(r.fields[i]))return!1;if(n=parseInt(r.fields[i].id,10),o.indexOf(n)>=0)return!1;o.push(n)}o=null}if(void 0!==r.enums){if(!e.Util.isArray(r.enums))return!1;for(i=0;i<r.enums.length;i++)if(!s.isValidEnum(r.enums[i]))return!1}if(void 0!==r.messages){if(!e.Util.isArray(r.messages))return!1;for(i=0;i<r.messages.length;i++)if(!s.isValidMessage(r.messages[i])&&!s.isValidExtend(r.messages[i]))return!1}return!!(void 0===r.extensions||e.Util.isArray(r.extensions)&&2===r.extensions.length&&"number"==typeof r.extensions[0]&&"number"==typeof r.extensions[1])},s.isValidMessageField=function(e){if("string"!=typeof e.rule||"string"!=typeof e.name||"string"!=typeof e.type||void 0===e.id)return!1;if(!(t.RULE.test(e.rule)&&t.NAME.test(e.name)&&t.TYPEREF.test(e.type)&&t.ID.test(""+e.id)))return!1;if(void 0!==e.options){if("object"!=typeof e.options)return!1;for(var r,i=Object.keys(e.options),s=0;s<i.length;s++)if("string"!=typeof(r=i[s])||"string"!=typeof e.options[r]&&"number"!=typeof e.options[r]&&"boolean"!=typeof e.options[r])return!1}return!0},s.isValidEnum=function(r){if("string"!=typeof r.name||!t.NAME.test(r.name))return!1;if(void 0===r.values||!e.Util.isArray(r.values)||0==r.values.length)return!1;for(var i=0;i<r.values.length;i++){if("object"!=typeof r.values[i])return!1;if("string"!=typeof r.values[i].name||void 0===r.values[i].id)return!1;if(!t.NAME.test(r.values[i].name)||!t.NEGID.test(""+r.values[i].id))return!1}return!0},n.create=function(t){if(!t)return this;if(e.Util.isArray(t)||(t=[t]),0==t.length)return this;var r=[];for(r.push(t);r.length>0;){if(t=r.pop(),!e.Util.isArray(t))throw Error("Not a valid namespace: "+JSON.stringify(t));for(;t.length>0;){var n=t.shift();if(s.isValidMessage(n)){var o=new i.Message(this,this.ptr,n.name,n.options,n.isGroup),a={};if(n.oneofs)for(var h=Object.keys(n.oneofs),c=0,u=h.length;c<u;++c)o.addChild(a[h[c]]=new i.Message.OneOf(this,o,h[c]));if(n.fields&&n.fields.length>0)for(c=0,u=n.fields.length;c<u;++c){var f=n.fields[c];if(null!==o.getChild(f.id))throw Error("Duplicate field id in message "+o.name+": "+f.id);if(f.options)for(var l=Object.keys(f.options),d=0,p=l.length;d<p;++d){if("string"!=typeof l[d])throw Error("Illegal field option name in message "+o.name+"#"+f.name+": "+l[d]);if("string"!=typeof f.options[l[d]]&&"number"!=typeof f.options[l[d]]&&"boolean"!=typeof f.options[l[d]])throw Error("Illegal field option value in message "+o.name+"#"+f.name+"#"+l[d]+": "+f.options[l[d]])}var b=null;if("string"==typeof f.oneof&&void 0===(b=a[f.oneof]))throw Error("Illegal oneof in message "+o.name+"#"+f.name+": "+f.oneof);f=new i.Message.Field(this,o,f.rule,f.type,f.name,f.id,f.options,b),b&&b.fields.push(f),o.addChild(f)}var g=[];if(void 0!==n.enums&&n.enums.length>0)for(c=0;c<n.enums.length;c++)g.push(n.enums[c]);if(n.messages&&n.messages.length>0)for(c=0;c<n.messages.length;c++)g.push(n.messages[c]);if(n.extensions&&(o.extensions=n.extensions,o.extensions[0]<e.ID_MIN&&(o.extensions[0]=e.ID_MIN),o.extensions[1]>e.ID_MAX&&(o.extensions[1]=e.ID_MAX)),this.ptr.addChild(o),g.length>0){r.push(t),t=g,g=null,this.ptr=o,o=null;continue}g=null,o=null}else if(s.isValidEnum(n)){for(o=new i.Enum(this,this.ptr,n.name,n.options),c=0;c<n.values.length;c++)o.addChild(new i.Enum.Value(this,o,n.values[c].name,n.values[c].id));this.ptr.addChild(o),o=null}else if(s.isValidService(n)){for(c in o=new i.Service(this,this.ptr,n.name,n.options),n.rpc)n.rpc.hasOwnProperty(c)&&o.addChild(new i.Service.RPCMethod(this,o,c,n.rpc[c].request,n.rpc[c].response,n.rpc[c].options));this.ptr.addChild(o),o=null}else{if(!s.isValidExtend(n))throw Error("Not a valid definition: "+JSON.stringify(n));if(o=this.ptr.resolve(n.ref))for(c=0;c<n.fields.length;c++){if(null!==o.getChild(n.fields[c].id))throw Error("Duplicate extended field id in message "+o.name+": "+n.fields[c].id);if(n.fields[c].id<o.extensions[0]||n.fields[c].id>o.extensions[1])throw Error("Illegal extended field id in message "+o.name+": "+n.fields[c].id+" ("+o.extensions.join(" to ")+" expected)");var m=n.fields[c].name;this.options.convertFieldsToCamelCase&&(m=i.Message.Field._toCamelCase(n.fields[c].name)),f=new i.Message.ExtensionField(this,o,n.fields[c].rule,n.fields[c].type,this.ptr.fqn()+"."+m,n.fields[c].id,n.fields[c].options);var _=new i.Extension(this,this.ptr,n.fields[c].name,f);f.extension=_,this.ptr.addChild(_),o.addChild(f)}else if(!/\.?google\.protobuf\./.test(n.ref))throw Error("Extended message "+n.ref+" is not defined")}n=null}t=null,this.ptr=this.ptr.parent}return this.resolved=!1,this.result=null,this},n.import=function(t,i){if("string"==typeof i){if(e.Util.IS_NODE&&(i=__browser_require__(195,r).resolve(i)),!0===this.files[i])return this.reset(),this;this.files[i]=!0}if(t.imports&&t.imports.length>0){var s,n="/",o=!1;"object"==typeof i?(this.importRoot=i.root,o=!0,s=this.importRoot,i=i.file,(s.indexOf("\\")>=0||i.indexOf("\\")>=0)&&(n="\\")):"string"==typeof i?this.importRoot?s=this.importRoot:i.indexOf("/")>=0?""===(s=i.replace(/\/[^\/]*$/,""))&&(s="/"):i.indexOf("\\")>=0?(s=i.replace(/\\[^\\]*$/,""),n="\\"):s=".":s=null;for(var a=0;a<t.imports.length;a++)if("string"==typeof t.imports[a]){if(!s)throw Error("Cannot determine import root: File name is unknown");var h=t.imports[a];if(/^google\/protobuf\//.test(h))continue;if(h=s+n+h,!0===this.files[h])continue;/\.proto$/i.test(h)&&!e.DotProto&&(h=h.replace(/\.proto$/,".json"));var c=e.Util.fetch(h);if(null===c)throw Error("Failed to import '"+h+"' in '"+i+"': File not found");/\.json$/i.test(h)?this.import(JSON.parse(c+""),h):this.import(new e.DotProto.Parser(c+"").parse(),h)}else i?/\.(\w+)$/.test(i)?this.import(t.imports[a],i.replace(/^(.+)\.(\w+)$/,function(e,t,r){return t+"_import"+a+"."+r})):this.import(t.imports[a],i+"_import"+a):this.import(t.imports[a]);o&&(this.importRoot=null)}return t.messages&&(t.package&&this.define(t.package,t.options),this.create(t.messages),this.reset()),t.enums&&(t.package&&this.define(t.package,t.options),this.create(t.enums),this.reset()),t.services&&(t.package&&this.define(t.package,t.options),this.create(t.services),this.reset()),t.extends&&(t.package&&this.define(t.package,t.options),this.create(t.extends),this.reset()),this},s.isValidService=function(e){return!("string"!=typeof e.name||!t.NAME.test(e.name)||"object"!=typeof e.rpc)},s.isValidExtend=function(r){if("string"!=typeof r.ref||!t.TYPEREF.test(r.ref))return!1;var i;if(void 0!==r.fields){if(!e.Util.isArray(r.fields))return!1;var n,o=[];for(i=0;i<r.fields.length;i++){if(!s.isValidMessageField(r.fields[i]))return!1;if(n=parseInt(r.id,10),o.indexOf(n)>=0)return!1;o.push(n)}o=null}return!0},n.resolveAll=function(){var r;if(null!=this.ptr&&"object"!=typeof this.ptr.type){if(this.ptr instanceof i.Namespace)for(var s=this.ptr.children,n=0,o=s.length;n<o;++n)this.ptr=s[n],this.resolveAll();else if(this.ptr instanceof i.Message.Field)if(t.TYPE.test(this.ptr.type))this.ptr.type=e.TYPES[this.ptr.type];else{if(!t.TYPEREF.test(this.ptr.type))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(!(r=(this.ptr instanceof i.Message.ExtensionField?this.ptr.extension.parent:this.ptr.parent).resolve(this.ptr.type,!0)))throw Error("Unresolvable type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(this.ptr.resolvedType=r,r instanceof i.Enum)this.ptr.type=e.TYPES.enum;else{if(!(r instanceof i.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);this.ptr.type=r.isGroup?e.TYPES.group:e.TYPES.message}}else if(this.ptr instanceof e.Reflect.Enum.Value);else if(this.ptr instanceof e.Reflect.Service.Method){if(!(this.ptr instanceof e.Reflect.Service.RPCMethod))throw Error("Illegal service type in "+this.ptr.toString(!0));if(!((r=this.ptr.parent.resolve(this.ptr.requestName))&&r instanceof e.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.requestName);if(this.ptr.resolvedRequestType=r,!((r=this.ptr.parent.resolve(this.ptr.responseName))&&r instanceof e.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.responseName);this.ptr.resolvedResponseType=r}else if(!(this.ptr instanceof e.Reflect.Message.OneOf||this.ptr instanceof e.Reflect.Extension))throw Error("Illegal object in namespace: "+typeof this.ptr+":"+this.ptr);this.reset()}},n.build=function(e){if(this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),null==this.result&&(this.result=this.ns.build()),e){for(var t=e.split("."),r=this.result,i=0;i<t.length;i++){if(!r[t[i]]){r=null;break}r=r[t[i]]}return r}return this.result},n.lookup=function(e){return e?this.ns.resolve(e):this.ns},n.toString=function(){return"Builder"},s.Message=function(){},s.Service=function(){},s}(i,i.Lang,i.Reflect),i.loadProto=function(e,t,r){return("string"==typeof t||t&&"string"==typeof t.file&&"string"==typeof t.root)&&(r=t,t=undefined),i.loadJson(new i.DotProto.Parser(e).parse(),t,r)},i.protoFromString=i.loadProto,i.loadProtoFile=function(e,t,r){if(t&&"object"==typeof t?(r=t,t=null):t&&"function"==typeof t||(t=null),t)return i.Util.fetch("string"==typeof e?e:e.root+"/"+e.file,function(s){if(null!==s)try{t(null,i.loadProto(s,r,e))}catch(e){t(e)}else t(Error("Failed to fetch file"))});var s=i.Util.fetch("object"==typeof e?e.root+"/"+e.file:e);return null===s?null:i.loadProto(s,r,e)},i.protoFromFile=i.loadProtoFile,i.newBuilder=function(e){return void 0===(e=e||{}).convertFieldsToCamelCase&&(e.convertFieldsToCamelCase=i.convertFieldsToCamelCase),void 0===e.populateAccessors&&(e.populateAccessors=i.populateAccessors),new i.Builder(e)},i.loadJson=function(e,t,r){return("string"==typeof t||t&&"string"==typeof t.file&&"string"==typeof t.root)&&(r=t,t=null),t&&"object"==typeof t||(t=i.newBuilder()),"string"==typeof e&&(e=JSON.parse(e)),t.import(e,r),t.resolveAll(),t},i.loadJsonFile=function(e,t,r){if(t&&"object"==typeof t?(r=t,t=null):t&&"function"==typeof t||(t=null),t)return i.Util.fetch("string"==typeof e?e:e.root+"/"+e.file,function(s){if(null!==s)try{t(null,i.loadJson(JSON.parse(s),r,e))}catch(e){t(e)}else t(Error("Failed to fetch file"))});var s=i.Util.fetch("object"==typeof e?e.root+"/"+e.file:e);return null===s?null:i.loadJson(JSON.parse(s),r,e)},i)}()}],["bytebuffer-old-fixed-webpack","/dist/ByteBufferAB.js",function(e,t,r,s,n,o){!function(e){"use strict";r.exports=function(){var e;try{e=__browser_require__(583,r)}catch(e){}return function(e){var t=function(e,r,i){if(void 0===e&&(e=t.DEFAULT_CAPACITY),void 0===r&&(r=t.DEFAULT_ENDIAN),void 0===i&&(i=t.DEFAULT_NOASSERT),!i){if((e|=0)<0)throw RangeError("Illegal capacity");r=!!r,i=!!i}this.buffer=0===e?s:new ArrayBuffer(e),this.view=0===e?null:new DataView(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=e,this.littleEndian=void 0!==r&&!!r,this.noAssert=!!i};t.VERSION="3.5.5",t.LITTLE_ENDIAN=!0,t.BIG_ENDIAN=!1,t.DEFAULT_CAPACITY=16,t.DEFAULT_ENDIAN=t.BIG_ENDIAN,t.DEFAULT_NOASSERT=!1,t.Long=e||null;var r=t.prototype,s=new ArrayBuffer(0),n=String.fromCharCode;function o(e){var t=0;return function(){return t<e.length?e.charCodeAt(t++):null}}function a(){var e=[],t=[];return function(){if(0===arguments.length)return t.join("")+n.apply(String,e);e.length+arguments.length>1024&&(t.push(n.apply(String,e)),e.length=0),Array.prototype.push.apply(e,arguments)}}t.allocate=function(e,r,i){return new t(e,r,i)},t.concat=function(e,r,i,s){"boolean"!=typeof r&&"string"==typeof r||(s=i,i=r,r=undefined);for(var n,o=0,a=0,h=e.length;a<h;++a)t.isByteBuffer(e[a])||(e[a]=t.wrap(e[a],r)),(n=e[a].limit-e[a].offset)>0&&(o+=n);if(0===o)return new t(0,i,s);var c,u=new t(o,i,s),f=new Uint8Array(u.buffer);for(a=0;a<h;)(n=(c=e[a++]).limit-c.offset)<=0||(f.set(new Uint8Array(c.buffer).subarray(c.offset,c.limit),u.offset),u.offset+=n);return u.limit=u.offset,u.offset=0,u},t.isByteBuffer=function(e){return!0===(e&&e instanceof t)},t.type=function(){return ArrayBuffer},t.wrap=function(e,s,n,o){if("string"!=typeof s&&(o=n,n=s,s=undefined),"string"==typeof e)switch(void 0===s&&(s="utf8"),s){case"base64":return t.fromBase64(e,n);case"hex":return t.fromHex(e,n);case"binary":return t.fromBinary(e,n);case"utf8":return t.fromUTF8(e,n);case"debug":return t.fromDebug(e,n);default:throw Error("Unsupported encoding: "+s)}if(null===e||"object"!=typeof e)throw TypeError("Illegal buffer");var a;if(t.isByteBuffer(e))return(a=r.clone.call(e)).markedOffset=-1,a;if(e instanceof Uint8Array)a=new t(0,n,o),e.length>0&&(a.buffer=e.buffer,a.offset=e.byteOffset,a.limit=e.byteOffset+e.length,a.view=e.length>0?new DataView(e.buffer):null);else if(e instanceof ArrayBuffer)a=new t(0,n,o),e.byteLength>0&&(a.buffer=e,a.offset=0,a.limit=e.byteLength,a.view=e.byteLength>0?new DataView(e):null);else{if("[object Array]"!==Object.prototype.toString.call(e))throw TypeError("Illegal buffer");for((a=new t(e.length,n,o)).limit=e.length,i=0;i<e.length;++i)a.view.setUint8(i,e[i])}return a},r.writeInt8=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=1,this.view.setInt8(t,e),r&&(this.offset+=1),this},r.writeByte=r.writeInt8,r.readInt8=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r=this.view.getInt8(e);return t&&(this.offset+=1),r},r.readByte=r.readInt8,r.writeUint8=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=1,this.view.setUint8(t,e),r&&(this.offset+=1),this},r.readUint8=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r=this.view.getUint8(e);return t&&(this.offset+=1),r},r.writeInt16=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=2,this.view.setInt16(t,e,this.littleEndian),r&&(this.offset+=2),this},r.writeShort=r.writeInt16,r.readInt16=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var r=this.view.getInt16(e,this.littleEndian);return t&&(this.offset+=2),r},r.readShort=r.readInt16,r.writeUint16=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=2,this.view.setUint16(t,e,this.littleEndian),r&&(this.offset+=2),this},r.readUint16=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var r=this.view.getUint16(e,this.littleEndian);return t&&(this.offset+=2),r},r.writeInt32=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=4,this.view.setInt32(t,e,this.littleEndian),r&&(this.offset+=4),this},r.writeInt=r.writeInt32,r.readInt32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var r=this.view.getInt32(e,this.littleEndian);return t&&(this.offset+=4),r},r.readInt=r.readInt32,r.writeUint32=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=4,this.view.setUint32(t,e,this.littleEndian),r&&(this.offset+=4),this},r.readUint32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var r=this.view.getUint32(e,this.littleEndian);return t&&(this.offset+=4),r},e&&(r.writeInt64=function(t,r){var i=void 0===r;if(i&&(r=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t)),r+=8;var s=this.buffer.byteLength;return r>s&&this.resize((s*=2)>r?s:r),r-=8,this.littleEndian?(this.view.setInt32(r,t.low,!0),this.view.setInt32(r+4,t.high,!0)):(this.view.setInt32(r,t.high,!1),this.view.setInt32(r+4,t.low,!1)),i&&(this.offset+=8),this},r.writeLong=r.writeInt64,r.readInt64=function(t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var i=this.littleEndian?new e(this.view.getInt32(t,!0),this.view.getInt32(t+4,!0),!1):new e(this.view.getInt32(t+4,!1),this.view.getInt32(t,!1),!1);return r&&(this.offset+=8),i},r.readLong=r.readInt64,r.writeUint64=function(t,r){var i=void 0===r;if(i&&(r=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t)),r+=8;var s=this.buffer.byteLength;return r>s&&this.resize((s*=2)>r?s:r),r-=8,this.littleEndian?(this.view.setInt32(r,t.low,!0),this.view.setInt32(r+4,t.high,!0)):(this.view.setInt32(r,t.high,!1),this.view.setInt32(r+4,t.low,!1)),i&&(this.offset+=8),this},r.readUint64=function(t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var i=this.littleEndian?new e(this.view.getInt32(t,!0),this.view.getInt32(t+4,!0),!0):new e(this.view.getInt32(t+4,!1),this.view.getInt32(t,!1),!0);return r&&(this.offset+=8),i}),r.writeFloat32=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=4,this.view.setFloat32(t,e,this.littleEndian),r&&(this.offset+=4),this},r.writeFloat=r.writeFloat32,r.readFloat32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var r=this.view.getFloat32(e,this.littleEndian);return t&&(this.offset+=4),r},r.readFloat=r.readFloat32,r.writeFloat64=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=8;var i=this.buffer.byteLength;return t>i&&this.resize((i*=2)>t?i:t),t-=8,this.view.setFloat64(t,e,this.littleEndian),r&&(this.offset+=8),this},r.writeDouble=r.writeFloat64,r.readFloat64=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var r=this.view.getFloat64(e,this.littleEndian);return t&&(this.offset+=8),r},r.readDouble=r.readFloat64,t.MAX_VARINT32_BYTES=5,t.calculateVarint32=function(e){return(e>>>=0)<128?1:e<16384?2:e<1<<21?3:e<1<<28?4:5},t.zigZagEncode32=function(e){return((e|=0)<<1^e>>31)>>>0},t.zigZagDecode32=function(e){return e>>>1^-(1&e)|0},r.writeVarint32=function(e,r){var i=void 0===r;if(i&&(r=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var s,n=t.calculateVarint32(e);r+=n;var o=this.buffer.byteLength;return r>o&&this.resize((o*=2)>r?o:r),r-=n,this.view.setUint8(r,s=128|e),(e>>>=0)>=128?(s=e>>7|128,this.view.setUint8(r+1,s),e>=16384?(s=e>>14|128,this.view.setUint8(r+2,s),e>=1<<21?(s=e>>21|128,this.view.setUint8(r+3,s),e>=1<<28?(this.view.setUint8(r+4,e>>28&15),n=5):(this.view.setUint8(r+3,127&s),n=4)):(this.view.setUint8(r+2,127&s),n=3)):(this.view.setUint8(r+1,127&s),n=2)):(this.view.setUint8(r,127&s),n=1),i?(this.offset+=n,this):n},r.writeVarint32ZigZag=function(e,r){return this.writeVarint32(t.zigZagEncode32(e),r)},r.readVarint32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r,i,s=0,n=0;do{if(i=e+s,!this.noAssert&&i>this.limit){var o=Error("Truncated");throw o.truncated=!0,o}r=this.view.getUint8(i),s<5&&(n|=(127&r)<<7*s>>>0),++s}while(128==(128&r));return n|=0,t?(this.offset+=s,n):{value:n,length:s}},r.readVarint32ZigZag=function(e){var r=this.readVarint32(e);return"object"==typeof r?r.value=t.zigZagDecode32(r.value):r=t.zigZagDecode32(r),r},e&&(t.MAX_VARINT64_BYTES=10,t.calculateVarint64=function(t){"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t));var r=t.toInt()>>>0,i=t.shiftRightUnsigned(28).toInt()>>>0,s=t.shiftRightUnsigned(56).toInt()>>>0;return 0==s?0==i?r<16384?r<128?1:2:r<1<<21?3:4:i<16384?i<128?5:6:i<1<<21?7:8:s<128?9:10},t.zigZagEncode64=function(t){return"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftLeft(1).xor(t.shiftRight(63)).toUnsigned()},t.zigZagDecode64=function(t){return"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftRightUnsigned(1).xor(t.and(e.ONE).toSigned().negate()).toSigned()},r.writeVarint64=function(r,i){var s=void 0===i;if(s&&(i=this.offset),!this.noAssert){if("number"==typeof r)r=e.fromNumber(r);else if("string"==typeof r)r=e.fromString(r);else if(!(r&&r instanceof e))throw TypeError("Illegal value: "+r+" (not an integer or Long)");if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}"number"==typeof r?r=e.fromNumber(r,!1):"string"==typeof r?r=e.fromString(r,!1):!1!==r.unsigned&&(r=r.toSigned());var n=t.calculateVarint64(r),o=r.toInt()>>>0,a=r.shiftRightUnsigned(28).toInt()>>>0,h=r.shiftRightUnsigned(56).toInt()>>>0;i+=n;var c=this.buffer.byteLength;switch(i>c&&this.resize((c*=2)>i?c:i),i-=n,n){case 10:this.view.setUint8(i+9,h>>>7&1);case 9:this.view.setUint8(i+8,9!==n?128|h:127&h);case 8:this.view.setUint8(i+7,8!==n?a>>>21|128:a>>>21&127);case 7:this.view.setUint8(i+6,7!==n?a>>>14|128:a>>>14&127);case 6:this.view.setUint8(i+5,6!==n?a>>>7|128:a>>>7&127);case 5:this.view.setUint8(i+4,5!==n?128|a:127&a);case 4:this.view.setUint8(i+3,4!==n?o>>>21|128:o>>>21&127);case 3:this.view.setUint8(i+2,3!==n?o>>>14|128:o>>>14&127);case 2:this.view.setUint8(i+1,2!==n?o>>>7|128:o>>>7&127);case 1:this.view.setUint8(i,1!==n?128|o:127&o)}return s?(this.offset+=n,this):n},r.writeVarint64ZigZag=function(e,r){return this.writeVarint64(t.zigZagEncode64(e),r)},r.readVarint64=function(t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i=t,s=0,n=0,o=0,a=0;if(s=127&(a=this.view.getUint8(t++)),128&a&&(s|=(127&(a=this.view.getUint8(t++)))<<7,128&a&&(s|=(127&(a=this.view.getUint8(t++)))<<14,128&a&&(s|=(127&(a=this.view.getUint8(t++)))<<21,128&a&&(n=127&(a=this.view.getUint8(t++)),128&a&&(n|=(127&(a=this.view.getUint8(t++)))<<7,128&a&&(n|=(127&(a=this.view.getUint8(t++)))<<14,128&a&&(n|=(127&(a=this.view.getUint8(t++)))<<21,128&a&&(o=127&(a=this.view.getUint8(t++)),128&a&&(o|=(127&(a=this.view.getUint8(t++)))<<7,128&a))))))))))throw Error("Buffer overrun");var h=e.fromBits(s|n<<28,n>>>4|o<<24,!1);return r?(this.offset=t,h):{value:h,length:t-i}},r.readVarint64ZigZag=function(r){var i=this.readVarint64(r);return i&&i.value instanceof e?i.value=t.zigZagDecode64(i.value):i=t.zigZagDecode64(i),i}),r.writeCString=function(e,t){var r=void 0===t;r&&(t=this.offset);var i,s=e.length;if(!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");for(i=0;i<s;++i)if(0===e.charCodeAt(i))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}s=c.calculateUTF16asUTF8(o(e))[1],t+=s+1;var n=this.buffer.byteLength;return t>n&&this.resize((n*=2)>t?n:t),t-=s+1,c.encodeUTF16toUTF8(o(e),function(e){this.view.setUint8(t++,e)}.bind(this)),this.view.setUint8(t++,0),r?(this.offset=t,this):s},r.readCString=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r,i=e,s=-1;return c.decodeUTF8toUTF16(function(){if(0===s)return null;if(e>=this.limit)throw RangeError("Illegal range: Truncated data, "+e+" < "+this.limit);return 0===(s=this.view.getUint8(e++))?null:s}.bind(this),r=a(),!0),t?(this.offset=e,r()):{string:r(),length:e-i}},r.writeIString=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var i,s=t;i=c.calculateUTF16asUTF8(o(e),this.noAssert)[1],t+=4+i;var n=this.buffer.byteLength;if(t>n&&this.resize((n*=2)>t?n:t),t-=4+i,this.view.setUint32(t,i,this.littleEndian),t+=4,c.encodeUTF16toUTF8(o(e),function(e){this.view.setUint8(t++,e)}.bind(this)),t!==s+4+i)throw RangeError("Illegal range: Truncated data, "+t+" == "+(t+4+i));return r?(this.offset=t,this):t-s},r.readIString=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var r,i,s=e;r=this.view.getUint32(e,this.littleEndian);var n,o=(e+=4)+r;return c.decodeUTF8toUTF16(function(){return e<o?this.view.getUint8(e++):null}.bind(this),n=a(),this.noAssert),i=n(),t?(this.offset=e,i):{string:i,length:e-s}},t.METRICS_CHARS="c",t.METRICS_BYTES="b",r.writeUTF8String=function(e,t){var r,i=void 0===t;if(i&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var s=t;r=c.calculateUTF16asUTF8(o(e))[1],t+=r;var n=this.buffer.byteLength;return t>n&&this.resize((n*=2)>t?n:t),t-=r,c.encodeUTF16toUTF8(o(e),function(e){this.view.setUint8(t++,e)}.bind(this)),i?(this.offset=t,this):t-s},r.writeString=r.writeUTF8String,t.calculateUTF8Chars=function(e){return c.calculateUTF16asUTF8(o(e))[0]},t.calculateUTF8Bytes=function(e){return c.calculateUTF16asUTF8(o(e))[1]},r.readUTF8String=function(e,r,i){"number"==typeof r&&(i=r,r=undefined);var s=void 0===i;if(s&&(i=this.offset),void 0===r&&(r=t.METRICS_CHARS),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal length: "+e+" (not an integer)");if(e|=0,"number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var n,o=0,h=i;if(r===t.METRICS_CHARS){if(n=a(),c.decodeUTF8(function(){return o<e&&i<this.limit?this.view.getUint8(i++):null}.bind(this),function(e){++o,c.UTF8toUTF16(e,n)}.bind(this)),o!==e)throw RangeError("Illegal range: Truncated data, "+o+" == "+e);return s?(this.offset=i,n()):{string:n(),length:i-h}}if(r===t.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+"+e+") <= "+this.buffer.byteLength)}var u=i+e;if(c.decodeUTF8toUTF16(function(){return i<u?this.view.getUint8(i++):null}.bind(this),n=a(),this.noAssert),i!==u)throw RangeError("Illegal range: Truncated data, "+i+" == "+u);return s?(this.offset=i,n()):{string:n(),length:i-h}}throw TypeError("Unsupported metrics: "+r)},r.readString=r.readUTF8String,r.writeVString=function(e,r){var i=void 0===r;if(i&&(r=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var s,n,a=r;s=c.calculateUTF16asUTF8(o(e),this.noAssert)[1],n=t.calculateVarint32(s),r+=n+s;var h=this.buffer.byteLength;if(r>h&&this.resize((h*=2)>r?h:r),r-=n+s,r+=this.writeVarint32(s,r),c.encodeUTF16toUTF8(o(e),function(e){this.view.setUint8(r++,e)}.bind(this)),r!==a+s+n)throw RangeError("Illegal range: Truncated data, "+r+" == "+(r+s+n));return i?(this.offset=r,this):r-a},r.readVString=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r,i=this.readVarint32(e),s=e;e+=i.length,i=i.value;var n=e+i,o=a();return c.decodeUTF8toUTF16(function(){return e<n?this.view.getUint8(e++):null}.bind(this),o,this.noAssert),r=o(),t?(this.offset=e,r):{string:r,length:e-s}},r.append=function(e,r,i){"number"!=typeof r&&"string"==typeof r||(i=r,r=undefined);var s=void 0===i;if(s&&(i=this.offset),!this.noAssert){if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}e instanceof t||(e=t.wrap(e,r));var n=e.limit-e.offset;if(n<=0)return this;i+=n;var o=this.buffer.byteLength;return i>o&&this.resize((o*=2)>i?o:i),i-=n,new Uint8Array(this.buffer,i).set(new Uint8Array(e.buffer).subarray(e.offset,e.limit)),e.offset+=n,s&&(this.offset+=n),this},r.appendTo=function(e,t){return e.append(this,t),this},r.assert=function(e){return this.noAssert=!e,this},r.capacity=function(){return this.buffer.byteLength},r.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},r.clone=function(e){var r=new t(0,this.littleEndian,this.noAssert);if(e){var i=new ArrayBuffer(this.buffer.byteLength);new Uint8Array(i).set(this.buffer),r.buffer=i,r.view=new DataView(i)}else r.buffer=this.buffer,r.view=this.view;return r.offset=this.offset,r.markedOffset=this.markedOffset,r.limit=this.limit,r},r.compact=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(0===e&&t===this.buffer.byteLength)return this;var r=t-e;if(0===r)return this.buffer=s,this.view=null,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=0,this;var i=new ArrayBuffer(r);return new Uint8Array(i).set(new Uint8Array(this.buffer).subarray(e,t)),this.buffer=i,this.view=new DataView(i),this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=r,this},r.copy=function(e,r){if(void 0===e&&(e=this.offset),void 0===r&&(r=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof r||r%1!=0)throw TypeError("Illegal end: Not an integer");if(r>>>=0,e<0||e>r||r>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+r+" <= "+this.buffer.byteLength)}if(e===r)return new t(0,this.littleEndian,this.noAssert);var i=r-e,s=new t(i,this.littleEndian,this.noAssert);return s.offset=0,s.limit=i,s.markedOffset>=0&&(s.markedOffset-=e),this.copyTo(s,0,e,r),s},r.copyTo=function(e,r,i,s){var n,o;if(!this.noAssert&&!t.isByteBuffer(e))throw TypeError("Illegal target: Not a ByteBuffer");if(r=(o=void 0===r)?e.offset:0|r,i=(n=void 0===i)?this.offset:0|i,s=void 0===s?this.limit:0|s,r<0||r>e.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+r+" <= "+e.buffer.byteLength);if(i<0||s>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+i+" <= "+this.buffer.byteLength);var a=s-i;return 0===a?e:(e.ensureCapacity(r+a),new Uint8Array(e.buffer).set(new Uint8Array(this.buffer).subarray(i,s),r),n&&(this.offset+=a),o&&(e.offset+=a),this)},r.ensureCapacity=function(e){var t=this.buffer.byteLength;return t<e?this.resize((t*=2)>e?t:e):this},r.fill=function(e,t,r){var i=void 0===t;if(i&&(t=this.offset),"string"==typeof e&&e.length>0&&(e=e.charCodeAt(0)),void 0===t&&(t=this.offset),void 0===r&&(r=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof r||r%1!=0)throw TypeError("Illegal end: Not an integer");if(r>>>=0,t<0||t>r||r>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+r+" <= "+this.buffer.byteLength)}if(t>=r)return this;for(;t<r;)this.view.setUint8(t++,e);return i&&(this.offset=t),this},r.flip=function(){return this.limit=this.offset,this.offset=0,this},r.mark=function(e){if(e=void 0===e?this.offset:e,!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=e,this},r.order=function(e){if(!this.noAssert&&"boolean"!=typeof e)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!e,this},r.LE=function(e){return this.littleEndian=void 0===e||!!e,this},r.BE=function(e){return this.littleEndian=void 0!==e&&!e,this},r.prepend=function(e,r,i){"number"!=typeof r&&"string"==typeof r||(i=r,r=undefined);var s=void 0===i;if(s&&(i=this.offset),!this.noAssert){if("number"!=typeof i||i%1!=0)throw TypeError("Illegal offset: "+i+" (not an integer)");if((i>>>=0)<0||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}e instanceof t||(e=t.wrap(e,r));var n=e.limit-e.offset;if(n<=0)return this;var o,a=n-i;if(a>0){var h=new ArrayBuffer(this.buffer.byteLength+a);(o=new Uint8Array(h)).set(new Uint8Array(this.buffer).subarray(i,this.buffer.byteLength),n),this.buffer=h,this.view=new DataView(h),this.offset+=a,this.markedOffset>=0&&(this.markedOffset+=a),this.limit+=a,i+=a}else o=new Uint8Array(this.buffer);return o.set(new Uint8Array(e.buffer).subarray(e.offset,e.limit),i-n),e.offset=e.limit,s&&(this.offset-=n),this},r.prependTo=function(e,t){return e.prepend(this,t),this},r.printDebug=function(e){"function"!=typeof e&&(e=console.log.bind(console)),e(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0))},r.remaining=function(){return this.limit-this.offset},r.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},r.resize=function(e){if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal capacity: "+e+" (not an integer)");if((e|=0)<0)throw RangeError("Illegal capacity: 0 <= "+e)}if(this.buffer.byteLength<e){var t=new ArrayBuffer(e);new Uint8Array(t).set(new Uint8Array(this.buffer)),this.buffer=t,this.view=new DataView(t)}return this},r.reverse=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}return e===t?this:(Array.prototype.reverse.call(new Uint8Array(this.buffer).subarray(e,t)),this.view=new DataView(this.buffer),this)},r.skip=function(e){if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal length: "+e+" (not an integer)");e|=0}var t=this.offset+e;if(!this.noAssert&&(t<0||t>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+e+" <= "+this.buffer.byteLength);return this.offset=t,this},r.slice=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var r=this.clone();return r.offset=e,r.limit=t,r},r.toBuffer=function(e){var t=this.offset,r=this.limit;if(t>r){var i=t;t=r,r=i}if(!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: Not an integer");if(t>>>=0,"number"!=typeof r||r%1!=0)throw TypeError("Illegal limit: Not an integer");if(r>>>=0,t<0||t>r||r>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+r+" <= "+this.buffer.byteLength)}if(!e&&0===t&&r===this.buffer.byteLength)return this.buffer;if(t===r)return s;var n=new ArrayBuffer(r-t);return new Uint8Array(n).set(new Uint8Array(this.buffer).subarray(t,r),0),n},r.toArrayBuffer=r.toBuffer,r.toString=function(e,t,r){if(void 0===e)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof e&&(r=t=e="utf8"),e){case"utf8":return this.toUTF8(t,r);case"base64":return this.toBase64(t,r);case"hex":return this.toHex(t,r);case"binary":return this.toBinary(t,r);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+e)}};var h=function(){for(var e={},t=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],r=[],i=0,s=t.length;i<s;++i)r[t[i]]=i;return e.encode=function(e,r){for(var i,s;null!==(i=e());)r(t[i>>2&63]),s=(3&i)<<4,null!==(i=e())?(r(t[63&((s|=i>>4&15)|i>>4&15)]),s=(15&i)<<2,null!==(i=e())?(r(t[63&(s|i>>6&3)]),r(t[63&i])):(r(t[63&s]),r(61))):(r(t[63&s]),r(61),r(61))},e.decode=function(e,t){var i,s,n;function o(e){throw Error("Illegal character code: "+e)}for(;null!==(i=e());)if(void 0===(s=r[i])&&o(i),null!==(i=e())&&(void 0===(n=r[i])&&o(i),t(s<<2>>>0|(48&n)>>4),null!==(i=e()))){if(void 0===(s=r[i])){if(61===i)break;o(i)}if(t((15&n)<<4>>>0|(60&s)>>2),null!==(i=e())){if(void 0===(n=r[i])){if(61===i)break;o(i)}t((3&s)<<6>>>0|n)}}},e.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)},e}();r.toBase64=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var r;return h.encode(function(){return e<t?this.view.getUint8(e++):null}.bind(this),r=a()),r()},t.fromBase64=function(e,r,i){if(!i){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if(e.length%4!=0)throw TypeError("Illegal str: Length not a multiple of 4")}var s=new t(e.length/4*3,r,i),n=0;return h.decode(o(e),function(e){s.view.setUint8(n++,e)}),s.limit=n,s},t.btoa=function(e){return t.fromBinary(e).toBase64()},t.atob=function(e){return t.fromBase64(e).toBinary()},r.toBinary=function(e,t){if(e=void 0===e?this.offset:e,t=void 0===t?this.limit:t,!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(e===t)return"";for(var r=[],i=[];e<t;)r.push(this.view.getUint8(e++)),r.length>=1024&&(i.push(String.fromCharCode.apply(String,r)),r=[]);return i.join("")+String.fromCharCode.apply(String,r)},t.fromBinary=function(e,r,i){if(!i&&"string"!=typeof e)throw TypeError("Illegal str: Not a string");for(var s,n=0,o=e.length,a=new t(o,r,i);n<o;){if(s=e.charCodeAt(n),!i&&s>255)throw RangeError("Illegal charCode at "+n+": 0 <= "+s+" <= 255");a.view.setUint8(n++,s)}return a.limit=o,a},r.toDebug=function(e){for(var t,r=-1,i=this.buffer.byteLength,s="",n="",o="";r<i;){if(-1!==r&&(s+=(t=this.view.getUint8(r))<16?"0"+t.toString(16).toUpperCase():t.toString(16).toUpperCase(),e&&(n+=t>32&&t<127?String.fromCharCode(t):".")),++r,e&&r>0&&r%16==0&&r!==i){for(;s.length<51;)s+=" ";o+=s+n+"\n",s=n=""}r===this.offset&&r===this.limit?s+=r===this.markedOffset?"!":"|":r===this.offset?s+=r===this.markedOffset?"[":"<":r===this.limit?s+=r===this.markedOffset?"]":">":s+=r===this.markedOffset?"'":e||0!==r&&r!==i?" ":""}if(e&&" "!==s){for(;s.length<51;)s+=" ";o+=s+n+"\n"}return e?o:s},t.fromDebug=function(e,r,i){for(var s,n,o=e.length,a=new t((o+1)/3|0,r,i),h=0,c=0,u=!1,f=!1,l=!1,d=!1,p=!1;h<o;){switch(s=e.charAt(h++)){case"!":if(!i){if(f||l||d){p=!0;break}f=l=d=!0}a.offset=a.markedOffset=a.limit=c,u=!1;break;case"|":if(!i){if(f||d){p=!0;break}f=d=!0}a.offset=a.limit=c,u=!1;break;case"[":if(!i){if(f||l){p=!0;break}f=l=!0}a.offset=a.markedOffset=c,u=!1;break;case"<":if(!i){if(f){p=!0;break}f=!0}a.offset=c,u=!1;break;case"]":if(!i){if(d||l){p=!0;break}d=l=!0}a.limit=a.markedOffset=c,u=!1;break;case">":if(!i){if(d){p=!0;break}d=!0}a.limit=c,u=!1;break;case"'":if(!i){if(l){p=!0;break}l=!0}a.markedOffset=c,u=!1;break;case" ":u=!1;break;default:if(!i&&u){p=!0;break}if(n=parseInt(s+e.charAt(h++),16),!i&&(isNaN(n)||n<0||n>255))throw TypeError("Illegal str: Not a debug encoded string");a.view.setUint8(c++,n),u=!0}if(p)throw TypeError("Illegal str: Invalid symbol at "+h)}if(!i){if(!f||!d)throw TypeError("Illegal str: Missing offset or limit");if(c<a.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+c+" < "+o)}return a},r.toHex=function(e,t){if(e=void 0===e?this.offset:e,t=void 0===t?this.limit:t,!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}for(var r,i=new Array(t-e);e<t;)(r=this.view.getUint8(e++))<16?i.push("0",r.toString(16)):i.push(r.toString(16));return i.join("")},t.fromHex=function(e,r,i){if(!i){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if(e.length%2!=0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var s,n=e.length,o=new t(n/2|0,r),a=0,h=0;a<n;a+=2){if(s=parseInt(e.substring(a,a+2),16),!i&&(!isFinite(s)||s<0||s>255))throw TypeError("Illegal str: Contains non-hex characters");o.view.setUint8(h++,s)}return o.limit=h,o};var c=function(){var e={MAX_CODEPOINT:1114111,encodeUTF8:function(e,t){var r=null;for("number"==typeof e&&(r=e,e=function(){return null});null!==r||null!==(r=e());)r<128?t(127&r):r<2048?(t(r>>6&31|192),t(63&r|128)):r<65536?(t(r>>12&15|224),t(r>>6&63|128),t(63&r|128)):(t(r>>18&7|240),t(r>>12&63|128),t(r>>6&63|128),t(63&r|128)),r=null},decodeUTF8:function(e,t){for(var r,i,s,n,o=function(e){e=e.slice(0,e.indexOf(null));var t=Error(e.toString());throw t.name="TruncatedError",t.bytes=e,t};null!==(r=e());)if(0==(128&r))t(r);else if(192==(224&r))null===(i=e())&&o([r,i]),t((31&r)<<6|63&i);else if(224==(240&r))(null===(i=e())||null===(s=e()))&&o([r,i,s]),t((15&r)<<12|(63&i)<<6|63&s);else{if(240!=(248&r))throw RangeError("Illegal starting byte: "+r);(null===(i=e())||null===(s=e())||null===(n=e()))&&o([r,i,s,n]),t((7&r)<<18|(63&i)<<12|(63&s)<<6|63&n)}},UTF16toUTF8:function(e,t){for(var r,i=null;null!==(r=null!==i?i:e());)r>=55296&&r<=57343&&null!==(i=e())&&i>=56320&&i<=57343?(t(1024*(r-55296)+i-56320+65536),i=null):t(r);null!==i&&t(i)},UTF8toUTF16:function(e,t){var r=null;for("number"==typeof e&&(r=e,e=function(){return null});null!==r||null!==(r=e());)r<=65535?t(r):(t(55296+((r-=65536)>>10)),t(r%1024+56320)),r=null},encodeUTF16toUTF8:function(t,r){e.UTF16toUTF8(t,function(t){e.encodeUTF8(t,r)})},decodeUTF8toUTF16:function(t,r){e.decodeUTF8(t,function(t){e.UTF8toUTF16(t,r)})},calculateCodePoint:function(e){return e<128?1:e<2048?2:e<65536?3:4},calculateUTF8:function(t){for(var r,i=0;null!==(r=t());)i+=e.calculateCodePoint(r);return i},calculateUTF16asUTF8:function(t){var r=0,i=0;return e.UTF16toUTF8(t,function(t){++r,i+=e.calculateCodePoint(t)}),[r,i]}};return e}();return r.toUTF8=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var r;try{c.decodeUTF8toUTF16(function(){return e<t?this.view.getUint8(e++):null}.bind(this),r=a())}catch(r){if(e!==t)throw RangeError("Illegal range: Truncated data, "+e+" != "+t)}return r()},t.fromUTF8=function(e,r,i){if(!i&&"string"!=typeof e)throw TypeError("Illegal str: Not a string");var s=new t(c.calculateUTF16asUTF8(o(e),!0)[1],r,i),n=0;return c.encodeUTF16toUTF8(o(e),function(e){s.view.setUint8(n++,e)}),s.limit=n,s},t}(e)}()}()}],["long","/dist/Long.js",function(e,t,r,i,s,n){var o,a;o=this,a=function(){"use strict";function e(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}e.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),e.isLong=function(e){return!0===(e&&e.__isLong__)};var t={},r={};e.fromInt=function(i,s){var n,o;return s?0<=(i>>>=0)&&i<256&&(o=r[i])?o:(n=new e(i,(0|i)<0?-1:0,!0),0<=i&&i<256&&(r[i]=n),n):-128<=(i|=0)&&i<128&&(o=t[i])?o:(n=new e(i,i<0?-1:0,!1),-128<=i&&i<128&&(t[i]=n),n)},e.fromNumber=function(t,r){return r=!!r,isNaN(t)||!isFinite(t)?e.ZERO:!r&&t<=-n?e.MIN_VALUE:!r&&t+1>=n?e.MAX_VALUE:r&&t>=s?e.MAX_UNSIGNED_VALUE:t<0?e.fromNumber(-t,r).negate():new e(t%i|0,t/i|0,r)},e.fromBits=function(t,r,i){return new e(t,r,i)},e.fromString=function(t,r,i){if(0===t.length)throw Error("number format error: empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return e.ZERO;if("number"==typeof r&&(i=r,r=!1),(i=i||10)<2||36<i)throw Error("radix out of range: "+i);var s;if((s=t.indexOf("-"))>0)throw Error('number format error: interior "-" character: '+t);if(0===s)return e.fromString(t.substring(1),r,i).negate();for(var n=e.fromNumber(Math.pow(i,8)),o=e.ZERO,a=0;a<t.length;a+=8){var h=Math.min(8,t.length-a),c=parseInt(t.substring(a,a+h),i);if(h<8){var u=e.fromNumber(Math.pow(i,h));o=o.multiply(u).add(e.fromNumber(c))}else o=(o=o.multiply(n)).add(e.fromNumber(c))}return o.unsigned=r,o},e.fromValue=function(t){return t instanceof e?t:"number"==typeof t?e.fromNumber(t):"string"==typeof t?e.fromString(t):new e(t.low,t.high,t.unsigned)};var i=4294967296,s=i*i,n=s/2,o=e.fromInt(1<<24);return e.ZERO=e.fromInt(0),e.UZERO=e.fromInt(0,!0),e.ONE=e.fromInt(1),e.UONE=e.fromInt(1,!0),e.NEG_ONE=e.fromInt(-1),e.MAX_VALUE=e.fromBits(-1,2147483647,!1),e.MAX_UNSIGNED_VALUE=e.fromBits(-1,-1,!0),e.MIN_VALUE=e.fromBits(0,-2147483648,!1),e.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},e.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*i+(this.low>>>0):this.high*i+(this.low>>>0)},e.prototype.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix out of range: "+t);if(this.isZero())return"0";var r;if(this.isNegative()){if(this.equals(e.MIN_VALUE)){var i=e.fromNumber(t),s=this.divide(i);return r=s.multiply(i).subtract(this),s.toString(t)+r.toInt().toString(t)}return"-"+this.negate().toString(t)}var n=e.fromNumber(Math.pow(t,6),this.unsigned);r=this;for(var o="";;){var a=r.divide(n),h=(r.subtract(a.multiply(n)).toInt()>>>0).toString(t);if((r=a).isZero())return h+o;for(;h.length<6;)h="0"+h;o=""+h+o}},e.prototype.getHighBits=function(){return this.high},e.prototype.getHighBitsUnsigned=function(){return this.high>>>0},e.prototype.getLowBits=function(){return this.low},e.prototype.getLowBitsUnsigned=function(){return this.low>>>0},e.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(e.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,r=31;r>0&&0==(t&1<<r);r--);return 0!=this.high?r+33:r+1},e.prototype.isZero=function(){return 0===this.high&&0===this.low},e.prototype.isNegative=function(){return!this.unsigned&&this.high<0},e.prototype.isPositive=function(){return this.unsigned||this.high>=0},e.prototype.isOdd=function(){return 1==(1&this.low)},e.prototype.isEven=function(){return 0==(1&this.low)},e.prototype.equals=function(t){return e.isLong(t)||(t=e.fromValue(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},e.eq=e.prototype.equals,e.prototype.notEquals=function(e){return!this.equals(e)},e.neq=e.prototype.notEquals,e.prototype.lessThan=function(e){return this.compare(e)<0},e.prototype.lt=e.prototype.lessThan,e.prototype.lessThanOrEqual=function(e){return this.compare(e)<=0},e.prototype.lte=e.prototype.lessThanOrEqual,e.prototype.greaterThan=function(e){return this.compare(e)>0},e.prototype.gt=e.prototype.greaterThan,e.prototype.greaterThanOrEqual=function(e){return this.compare(e)>=0},e.prototype.gte=e.prototype.greaterThanOrEqual,e.prototype.compare=function(t){if(e.isLong(t)||(t=e.fromValue(t)),this.equals(t))return 0;var r=this.isNegative(),i=t.isNegative();return r&&!i?-1:!r&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.subtract(t).isNegative()?-1:1},e.prototype.negate=function(){return!this.unsigned&&this.equals(e.MIN_VALUE)?e.MIN_VALUE:this.not().add(e.ONE)},e.prototype.neg=e.prototype.negate,e.prototype.add=function(t){e.isLong(t)||(t=e.fromValue(t));var r=this.high>>>16,i=65535&this.high,s=this.low>>>16,n=65535&this.low,o=t.high>>>16,a=65535&t.high,h=t.low>>>16,c=0,u=0,f=0,l=0;return f+=(l+=n+(65535&t.low))>>>16,l&=65535,u+=(f+=s+h)>>>16,f&=65535,c+=(u+=i+a)>>>16,u&=65535,c+=r+o,c&=65535,e.fromBits(f<<16|l,c<<16|u,this.unsigned)},e.prototype.subtract=function(t){return e.isLong(t)||(t=e.fromValue(t)),this.add(t.negate())},e.prototype.sub=e.prototype.subtract,e.prototype.multiply=function(t){if(this.isZero())return e.ZERO;if(e.isLong(t)||(t=e.fromValue(t)),t.isZero())return e.ZERO;if(this.equals(e.MIN_VALUE))return t.isOdd()?e.MIN_VALUE:e.ZERO;if(t.equals(e.MIN_VALUE))return this.isOdd()?e.MIN_VALUE:e.ZERO;if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(o)&&t.lessThan(o))return e.fromNumber(this.toNumber()*t.toNumber(),this.unsigned);var r=this.high>>>16,i=65535&this.high,s=this.low>>>16,n=65535&this.low,a=t.high>>>16,h=65535&t.high,c=t.low>>>16,u=65535&t.low,f=0,l=0,d=0,p=0;return d+=(p+=n*u)>>>16,p&=65535,l+=(d+=s*u)>>>16,d&=65535,l+=(d+=n*c)>>>16,d&=65535,f+=(l+=i*u)>>>16,l&=65535,f+=(l+=s*c)>>>16,l&=65535,f+=(l+=n*h)>>>16,l&=65535,f+=r*u+i*c+s*h+n*a,f&=65535,e.fromBits(d<<16|p,f<<16|l,this.unsigned)},e.prototype.mul=e.prototype.multiply,e.prototype.divide=function(t){if(e.isLong(t)||(t=e.fromValue(t)),t.isZero())throw new Error("division by zero");if(this.isZero())return this.unsigned?e.UZERO:e.ZERO;var r,i,s;{if(this.equals(e.MIN_VALUE))return t.equals(e.ONE)||t.equals(e.NEG_ONE)?e.MIN_VALUE:t.equals(e.MIN_VALUE)?e.ONE:(r=this.shiftRight(1).divide(t).shiftLeft(1)).equals(e.ZERO)?t.isNegative()?e.ONE:e.NEG_ONE:(i=this.subtract(t.multiply(r)),s=r.add(i.divide(t)));if(t.equals(e.MIN_VALUE))return this.unsigned?e.UZERO:e.ZERO}if(this.isNegative())return t.isNegative()?this.negate().divide(t.negate()):this.negate().divide(t).negate();if(t.isNegative())return this.divide(t.negate()).negate();for(s=e.ZERO,i=this;i.greaterThanOrEqual(t);){r=Math.max(1,Math.floor(i.toNumber()/t.toNumber()));for(var n=Math.ceil(Math.log(r)/Math.LN2),o=n<=48?1:Math.pow(2,n-48),a=e.fromNumber(r),h=a.multiply(t);h.isNegative()||h.greaterThan(i);)r-=o,h=(a=e.fromNumber(r,this.unsigned)).multiply(t);a.isZero()&&(a=e.ONE),s=s.add(a),i=i.subtract(h)}return s},e.prototype.div=e.prototype.divide,e.prototype.modulo=function(t){return e.isLong(t)||(t=e.fromValue(t)),this.subtract(this.divide(t).multiply(t))},e.prototype.mod=e.prototype.modulo,e.prototype.not=function(){return e.fromBits(~this.low,~this.high,this.unsigned)},e.prototype.and=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low&t.low,this.high&t.high,this.unsigned)},e.prototype.or=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low|t.low,this.high|t.high,this.unsigned)},e.prototype.xor=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low^t.low,this.high^t.high,this.unsigned)},e.prototype.shiftLeft=function(t){return e.isLong(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?e.fromBits(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):e.fromBits(0,this.low<<t-32,this.unsigned)},e.prototype.shl=e.prototype.shiftLeft,e.prototype.shiftRight=function(t){return e.isLong(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?e.fromBits(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):e.fromBits(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},e.prototype.shr=e.prototype.shiftRight,e.prototype.shiftRightUnsigned=function(t){if(e.isLong(t)&&(t=t.toInt()),0===(t&=63))return this;var r=this.high;if(t<32){var i=this.low;return e.fromBits(i>>>t|r<<32-t,r>>>t,this.unsigned)}return 32===t?e.fromBits(r,0,this.unsigned):e.fromBits(r>>>t-32,0,this.unsigned)},e.prototype.shru=e.prototype.shiftRightUnsigned,e.prototype.toSigned=function(){return this.unsigned?new e(this.low,this.high,!1):this},e.prototype.toUnsigned=function(){return this.unsigned?this:new e(this.low,this.high,!0)},e},"function"==typeof define&&define.amd?define([],a):"function"==typeof t&&"object"==typeof r&&r&&r.exports?r.exports=a():(o.dcodeIO=o.dcodeIO||{}).Long=a()}],["trezor-link","/lib/lowlevel/protobuf/parse_protocol.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseConfigure=function(e){if(e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"messages")){var t=o.newBuilder({}).import(e).build();return new a.Messages(t)}if("string"!=typeof e)throw new Error("Unexpected messages format");if(e.match(/^\{.*\}$/)){var r=o.newBuilder({}).import(JSON.parse(e)).build();return new a.Messages(r)}var i=Buffer.from(e.slice(128),"hex"),s=c.Configuration.decode(i),n=s.valid_until,u=Math.floor(Date.now()/1e3);if(u>=n)throw new Error("Config too old; "+u+" >= "+n);var f=s.wire_protocol,l=(0,h.protocolToJSON)(f.toRaw()),d=o.newBuilder({}).import(l).build();return new a.Messages(d)};var o=u(__browser_require__(580,r)),a=__browser_require__(585,r),h=__browser_require__(586,r),c=u(__browser_require__(605,r));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}}],["trezor-link","/lib/lowlevel/protobuf/messages.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Messages=void 0;!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}t.default=e}(__browser_require__(580,r));e.Messages=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.messagesByName=t;var r={};Object.keys(t.MessageType).forEach(function(e){var i=t.MessageType[e],s=e.split("_")[1];r[i]={name:s,constructor:t[s]}}),this.messagesByType=r,this.messageTypes=t.MessageType}}],["trezor-link","/lib/lowlevel/protobuf/to_json.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.protocolToJSON=function(e){var t=a(e.file[2]);return t.imports=[a(e.file[1])],t};var o=__browser_require__(587,r);function a(e){var t={};t.package=e.package,t.options=e.options,t.services=[];var r=Object.values(e.message_type).map(u),i=function(e){var t={};return Object.values(e).forEach(function(e){var r=e.extendee.slice(1);null==t[r]&&(t[r]={},t[r].ref=r,t[r].fields=[]),t[r].fields.push(l(e))}),Object.values(t)}(e.extension);return t.messages=i.concat(r),t.enums=Object.values(e.enum_type).map(h),t}function h(e){var t={};return t.name=e.name,t.values=Object.values(e.value).map(c),t.options={},t}function c(e){var t={};return t.name=e.name,t.id=e.number,t}function u(e){var t={enums:[]};return t.name=e.name,t.options=e.options||{},t.messages=[],t.fields=Object.values(e.field).map(l),t.oneofs={},t}Object.values||(0,o.shim)();var f={1:"double",2:"float",3:"int64",4:"uint64",5:"int32",6:"fixed64",7:"fixed32",8:"bool",9:"string",10:"group",11:"message",12:"bytes",13:"uint32",14:"enum",15:"sfixed32",16:"sfixed64",17:"sint32",18:"sint64"};function l(e){var t={};return 1===e.label&&(t.rule="optional"),2===e.label&&(t.rule="required"),3===e.label&&(t.rule="repeated"),t.type=f[e.type],e.type_name&&(t.type=e.type_name.slice(1)),t.name=e.name,t.options=e.options||{},t.id=e.number,t}}],["object.values","/index.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(588,r),a=__browser_require__(592,r),h=__browser_require__(603,r),c=__browser_require__(604,r),u=h();o(u,{getPolyfill:h,implementation:a,shim:c}),r.exports=u}],["define-properties","/index.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(589,r),a="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),h=Object.prototype.toString,c=Array.prototype.concat,u=Object.defineProperty,f=u&&function(){var e={};try{for(var t in u(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}(),l=function(e,t,r,i){var s;t in e&&("function"!=typeof(s=i)||"[object Function]"!==h.call(s)||!i())||(f?u(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r)},d=function(e,t){var r=arguments.length>2?arguments[2]:{},i=o(t);a&&(i=c.call(i,Object.getOwnPropertySymbols(t)));for(var s=0;s<i.length;s+=1)l(e,i[s],t[i[s]],r[i[s]])};d.supportsDescriptors=!!f,r.exports=d}],["object-keys","/index.js",function(e,t,r,i,s,n){"use strict";var o=Array.prototype.slice,a=__browser_require__(590,r),h=Object.keys,c=h?function(e){return h(e)}:__browser_require__(591,r),u=Object.keys;c.shim=function(){Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return a(e)?u(o.call(e)):u(e)}):Object.keys=c;return Object.keys||c},r.exports=c}],["object-keys","/isArguments.js",function(e,t,r,i,s,n){"use strict";var o=Object.prototype.toString;r.exports=function(e){var t=o.call(e),r="[object Arguments]"===t;return r||(r="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===o.call(e.callee)),r}}],["object-keys","/implementation.js",function(e,t,r,i,s,n){"use strict";var o;if(!Object.keys){var a=Object.prototype.hasOwnProperty,h=Object.prototype.toString,c=__browser_require__(590,r),u=Object.prototype.propertyIsEnumerable,f=!u.call({toString:null},"toString"),l=u.call(function(){},"prototype"),d=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=function(e){var t=e.constructor;return t&&t.prototype===e},b={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},g=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!b["$"+e]&&a.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{p(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();o=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===h.call(e),i=c(e),s=t&&"[object String]"===h.call(e),n=[];if(!t&&!r&&!i)throw new TypeError("Object.keys called on a non-object");var o=l&&r;if(s&&e.length>0&&!a.call(e,0))for(var u=0;u<e.length;++u)n.push(String(u));if(i&&e.length>0)for(var b=0;b<e.length;++b)n.push(String(b));else for(var m in e)o&&"prototype"===m||!a.call(e,m)||n.push(String(m));if(f)for(var _=function(e){if("undefined"==typeof window||!g)return p(e);try{return p(e)}catch(e){return!1}}(e),w=0;w<d.length;++w)_&&"constructor"===d[w]||!a.call(e,d[w])||n.push(d[w]);return n}}r.exports=o}],["object.values","/implementation.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(593,r),a=__browser_require__(596,r),h=__browser_require__(601,r)("Object.prototype.propertyIsEnumerable");r.exports=function(e){var t=a(e),r=[];for(var i in t)o(t,i)&&h(t,i)&&r.push(t[i]);return r}}],["has","/src/index.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(594,r);r.exports=o.call(Function.call,Object.prototype.hasOwnProperty)}],["function-bind","/index.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(595,r);r.exports=Function.prototype.bind||o}],["function-bind","/implementation.js",function(e,t,r,i,s,n){"use strict";var o=Array.prototype.slice,a=Object.prototype.toString;r.exports=function(e){var t=this;if("function"!=typeof t||"[object Function]"!==a.call(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var r,i=o.call(arguments,1),s=Math.max(0,t.length-i.length),n=[],h=0;h<s;h++)n.push("$"+h);if(r=Function("binder","return function ("+n.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof r){var s=t.apply(this,i.concat(o.call(arguments)));return Object(s)===s?s:this}return t.apply(e,i.concat(o.call(arguments)))}),t.prototype){var c=function(){};c.prototype=t.prototype,r.prototype=new c,c.prototype=null}return r}}],["es-abstract","/2019/RequireObjectCoercible.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(597,r)}],["es-abstract","/5/CheckObjectCoercible.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(598,r)("%TypeError%");r.exports=function(e,t){if(null==e)throw new o(t||"Cannot call method on "+e);return e}}],["es-abstract","/GetIntrinsic.js",function(e,t,r,i,s,n){"use strict";var o=TypeError,a=Object.getOwnPropertyDescriptor;if(a)try{a({},"")}catch(e){a=null}var h=function(){throw new o},c=a?function(){try{return arguments.callee,h}catch(e){try{return a(arguments,"callee").get}catch(e){return h}}}():h,u=__browser_require__(599,r)(),f=Object.getPrototypeOf||function(e){return e.__proto__},l=void 0,d="undefined"==typeof Uint8Array?void 0:f(Uint8Array),p={"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer.prototype,"%ArrayIteratorPrototype%":u?f([][Symbol.iterator]()):void 0,"%ArrayPrototype%":Array.prototype,"%ArrayProto_entries%":Array.prototype.entries,"%ArrayProto_forEach%":Array.prototype.forEach,"%ArrayProto_keys%":Array.prototype.keys,"%ArrayProto_values%":Array.prototype.values,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":void 0,"%AsyncFunctionPrototype%":void 0,"%AsyncGenerator%":void 0,"%AsyncGeneratorFunction%":void 0,"%AsyncGeneratorPrototype%":void 0,"%AsyncIteratorPrototype%":l&&u&&Symbol.asyncIterator?l[Symbol.asyncIterator]():void 0,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%Boolean%":Boolean,"%BooleanPrototype%":Boolean.prototype,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%DataViewPrototype%":"undefined"==typeof DataView?void 0:DataView.prototype,"%Date%":Date,"%DatePrototype%":Date.prototype,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%ErrorPrototype%":Error.prototype,"%eval%":eval,"%EvalError%":EvalError,"%EvalErrorPrototype%":EvalError.prototype,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float32ArrayPrototype%":"undefined"==typeof Float32Array?void 0:Float32Array.prototype,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%Float64ArrayPrototype%":"undefined"==typeof Float64Array?void 0:Float64Array.prototype,"%Function%":Function,"%FunctionPrototype%":Function.prototype,"%Generator%":void 0,"%GeneratorFunction%":void 0,"%GeneratorPrototype%":void 0,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int8ArrayPrototype%":"undefined"==typeof Int8Array?void 0:Int8Array.prototype,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int16ArrayPrototype%":"undefined"==typeof Int16Array?void 0:Int8Array.prototype,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%Int32ArrayPrototype%":"undefined"==typeof Int32Array?void 0:Int32Array.prototype,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":u?f(f([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%JSONParse%":"object"==typeof JSON?JSON.parse:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&u?f((new Map)[Symbol.iterator]()):void 0,"%MapPrototype%":"undefined"==typeof Map?void 0:Map.prototype,"%Math%":Math,"%Number%":Number,"%NumberPrototype%":Number.prototype,"%Object%":Object,"%ObjectPrototype%":Object.prototype,"%ObjProto_toString%":Object.prototype.toString,"%ObjProto_valueOf%":Object.prototype.valueOf,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%PromisePrototype%":"undefined"==typeof Promise?void 0:Promise.prototype,"%PromiseProto_then%":"undefined"==typeof Promise?void 0:Promise.prototype.then,"%Promise_all%":"undefined"==typeof Promise?void 0:Promise.all,"%Promise_reject%":"undefined"==typeof Promise?void 0:Promise.reject,"%Promise_resolve%":"undefined"==typeof Promise?void 0:Promise.resolve,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%RangeErrorPrototype%":RangeError.prototype,"%ReferenceError%":ReferenceError,"%ReferenceErrorPrototype%":ReferenceError.prototype,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%RegExpPrototype%":RegExp.prototype,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&u?f((new Set)[Symbol.iterator]()):void 0,"%SetPrototype%":"undefined"==typeof Set?void 0:Set.prototype,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer.prototype,"%String%":String,"%StringIteratorPrototype%":u?f(""[Symbol.iterator]()):void 0,"%StringPrototype%":String.prototype,"%Symbol%":u?Symbol:void 0,"%SymbolPrototype%":u?Symbol.prototype:void 0,"%SyntaxError%":SyntaxError,"%SyntaxErrorPrototype%":SyntaxError.prototype,"%ThrowTypeError%":c,"%TypedArray%":d,"%TypedArrayPrototype%":d?d.prototype:void 0,"%TypeError%":o,"%TypeErrorPrototype%":o.prototype,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?void 0:Uint8Array.prototype,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray.prototype,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?void 0:Uint16Array.prototype,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?void 0:Uint32Array.prototype,"%URIError%":URIError,"%URIErrorPrototype%":URIError.prototype,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakMapPrototype%":"undefined"==typeof WeakMap?void 0:WeakMap.prototype,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet,"%WeakSetPrototype%":"undefined"==typeof WeakSet?void 0:WeakSet.prototype},b=__browser_require__(594,r).call(Function.call,String.prototype.replace),g=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,m=/\\(\\)?/g;r.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new TypeError('"allowMissing" argument must be a boolean');for(var r,i=(r=[],b(e,g,function(e,t,i,s){r[r.length]=i?b(s,m,"$1"):t||e}),r),s=function(e,t){if(!(e in p))throw new SyntaxError("intrinsic "+e+" does not exist!");if(void 0===p[e]&&!t)throw new o("intrinsic "+e+" exists, but is not available. Please file an issue!");return p[e]}("%"+(i.length>0?i[0]:"")+"%",t),n=1;n<i.length;n+=1)if(null!=s)if(a&&n+1>=i.length){var h=a(s,i[n]);if(!(t||i[n]in s))throw new o("base intrinsic for "+e+" exists, but the property is not available.");s=h?h.get||h.value:s[i[n]]}else s=s[i[n]];return s}}],["has-symbols","/index.js",function(e,t,r,i,s,n){"use strict";var o=global.Symbol,a=__browser_require__(600,r);r.exports=function(){return"function"==typeof o&&("function"==typeof Symbol&&("symbol"==typeof o("foo")&&("symbol"==typeof Symbol("bar")&&a())))}}],["has-symbols","/shams.js",function(e,t,r,i,s,n){"use strict";r.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var i=Object.getOwnPropertySymbols(e);if(1!==i.length||i[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var s=Object.getOwnPropertyDescriptor(e,t);if(42!==s.value||!0!==s.enumerable)return!1}return!0}}],["es-abstract","/helpers/callBound.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(598,r),a=__browser_require__(602,r),h=a(o("String.prototype.indexOf"));r.exports=function(e,t){var r=o(e,!!t);return"function"==typeof r&&h(e,".prototype.")?a(r):r}}],["es-abstract","/helpers/callBind.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(594,r),a=__browser_require__(598,r)("%Function%"),h=a.apply,c=a.call;r.exports=function(){return o.apply(c,arguments)},r.exports.apply=function(){return o.apply(h,arguments)}}],["object.values","/polyfill.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(592,r);r.exports=function(){return"function"==typeof Object.values?Object.values:o}}],["object.values","/shim.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(603,r),a=__browser_require__(588,r);r.exports=function(){var e=o();return a(Object,{values:e},{values:function(){return Object.values!==e}}),e}}],["trezor-link","/lib/lowlevel/protobuf/config_proto_compiled.js",function(e,t,r,i,s,n){"use strict";r.exports=__browser_require__(580,r).newBuilder({}).import({package:null,messages:[{name:"DeviceDescriptor",fields:[{rule:"optional",options:{},type:"uint32",name:"vendor_id",id:1},{rule:"optional",options:{},type:"uint32",name:"product_id",id:2},{rule:"optional",options:{},type:"string",name:"serial_number",id:3},{rule:"optional",options:{},type:"string",name:"path",id:4}],enums:[],messages:[],options:{},oneofs:{}},{name:"Configuration",fields:[{rule:"repeated",options:{},type:"string",name:"whitelist_urls",id:1},{rule:"repeated",options:{},type:"string",name:"blacklist_urls",id:2},{rule:"required",options:{},type:"google.protobuf.FileDescriptorSet",name:"wire_protocol",id:3},{rule:"repeated",options:{},type:"DeviceDescriptor",name:"known_devices",id:4},{rule:"optional",options:{},type:"uint32",name:"valid_until",id:5}],enums:[],messages:[],options:{},oneofs:{}}],enums:[],imports:[{package:"google.protobuf",messages:[{name:"FileDescriptorSet",fields:[{rule:"repeated",options:{},type:"FileDescriptorProto",name:"file",id:1}],enums:[],messages:[],options:{},oneofs:{}},{name:"FileDescriptorProto",fields:[{rule:"optional",options:{},type:"string",name:"name",id:1},{rule:"optional",options:{},type:"string",name:"package",id:2},{rule:"repeated",options:{},type:"string",name:"dependency",id:3},{rule:"repeated",options:{},type:"int32",name:"public_dependency",id:10},{rule:"repeated",options:{},type:"int32",name:"weak_dependency",id:11},{rule:"repeated",options:{},type:"DescriptorProto",name:"message_type",id:4},{rule:"repeated",options:{},type:"EnumDescriptorProto",name:"enum_type",id:5},{rule:"repeated",options:{},type:"ServiceDescriptorProto",name:"service",id:6},{rule:"repeated",options:{},type:"FieldDescriptorProto",name:"extension",id:7},{rule:"optional",options:{},type:"FileOptions",name:"options",id:8},{rule:"optional",options:{},type:"SourceCodeInfo",name:"source_code_info",id:9}],enums:[],messages:[],options:{},oneofs:{}},{name:"DescriptorProto",fields:[{rule:"optional",options:{},type:"string",name:"name",id:1},{rule:"repeated",options:{},type:"FieldDescriptorProto",name:"field",id:2},{rule:"repeated",options:{},type:"FieldDescriptorProto",name:"extension",id:6},{rule:"repeated",options:{},type:"DescriptorProto",name:"nested_type",id:3},{rule:"repeated",options:{},type:"EnumDescriptorProto",name:"enum_type",id:4},{rule:"repeated",options:{},type:"ExtensionRange",name:"extension_range",id:5},{rule:"optional",options:{},type:"MessageOptions",name:"options",id:7}],enums:[],messages:[{name:"ExtensionRange",fields:[{rule:"optional",options:{},type:"int32",name:"start",id:1},{rule:"optional",options:{},type:"int32",name:"end",id:2}],enums:[],messages:[],options:{},oneofs:{}}],options:{},oneofs:{}},{name:"FieldDescriptorProto",fields:[{rule:"optional",options:{},type:"string",name:"name",id:1},{rule:"optional",options:{},type:"int32",name:"number",id:3},{rule:"optional",options:{},type:"Label",name:"label",id:4},{rule:"optional",options:{},type:"Type",name:"type",id:5},{rule:"optional",options:{},type:"string",name:"type_name",id:6},{rule:"optional",options:{},type:"string",name:"extendee",id:2},{rule:"optional",options:{},type:"string",name:"default_value",id:7},{rule:"optional",options:{},type:"FieldOptions",name:"options",id:8}],enums:[{name:"Type",values:[{name:"TYPE_DOUBLE",id:1},{name:"TYPE_FLOAT",id:2},{name:"TYPE_INT64",id:3},{name:"TYPE_UINT64",id:4},{name:"TYPE_INT32",id:5},{name:"TYPE_FIXED64",id:6},{name:"TYPE_FIXED32",id:7},{name:"TYPE_BOOL",id:8},{name:"TYPE_STRING",id:9},{name:"TYPE_GROUP",id:10},{name:"TYPE_MESSAGE",id:11},{name:"TYPE_BYTES",id:12},{name:"TYPE_UINT32",id:13},{name:"TYPE_ENUM",id:14},{name:"TYPE_SFIXED32",id:15},{name:"TYPE_SFIXED64",id:16},{name:"TYPE_SINT32",id:17},{name:"TYPE_SINT64",id:18}],options:{}},{name:"Label",values:[{name:"LABEL_OPTIONAL",id:1},{name:"LABEL_REQUIRED",id:2},{name:"LABEL_REPEATED",id:3}],options:{}}],messages:[],options:{},oneofs:{}},{name:"EnumDescriptorProto",fields:[{rule:"optional",options:{},type:"string",name:"name",id:1},{rule:"repeated",options:{},type:"EnumValueDescriptorProto",name:"value",id:2},{rule:"optional",options:{},type:"EnumOptions",name:"options",id:3}],enums:[],messages:[],options:{},oneofs:{}},{name:"EnumValueDescriptorProto",fields:[{rule:"optional",options:{},type:"string",name:"name",id:1},{rule:"optional",options:{},type:"int32",name:"number",id:2},{rule:"optional",options:{},type:"EnumValueOptions",name:"options",id:3}],enums:[],messages:[],options:{},oneofs:{}},{name:"ServiceDescriptorProto",fields:[{rule:"optional",options:{},type:"string",name:"name",id:1},{rule:"repeated",options:{},type:"MethodDescriptorProto",name:"method",id:2},{rule:"optional",options:{},type:"ServiceOptions",name:"options",id:3}],enums:[],messages:[],options:{},oneofs:{}},{name:"MethodDescriptorProto",fields:[{rule:"optional",options:{},type:"string",name:"name",id:1},{rule:"optional",options:{},type:"string",name:"input_type",id:2},{rule:"optional",options:{},type:"string",name:"output_type",id:3},{rule:"optional",options:{},type:"MethodOptions",name:"options",id:4}],enums:[],messages:[],options:{},oneofs:{}},{name:"FileOptions",fields:[{rule:"optional",options:{},type:"string",name:"java_package",id:1},{rule:"optional",options:{},type:"string",name:"java_outer_classname",id:8},{rule:"optional",options:{default:!1},type:"bool",name:"java_multiple_files",id:10},{rule:"optional",options:{default:!1},type:"bool",name:"java_generate_equals_and_hash",id:20},{rule:"optional",options:{default:"SPEED"},type:"OptimizeMode",name:"optimize_for",id:9},{rule:"optional",options:{},type:"string",name:"go_package",id:11},{rule:"optional",options:{default:!1},type:"bool",name:"cc_generic_services",id:16},{rule:"optional",options:{default:!1},type:"bool",name:"java_generic_services",id:17},{rule:"optional",options:{default:!1},type:"bool",name:"py_generic_services",id:18},{rule:"repeated",options:{},type:"UninterpretedOption",name:"uninterpreted_option",id:999}],enums:[{name:"OptimizeMode",values:[{name:"SPEED",id:1},{name:"CODE_SIZE",id:2},{name:"LITE_RUNTIME",id:3}],options:{}}],messages:[],options:{},oneofs:{},extensions:[1e3,536870911]},{name:"MessageOptions",fields:[{rule:"optional",options:{default:!1},type:"bool",name:"message_set_wire_format",id:1},{rule:"optional",options:{default:!1},type:"bool",name:"no_standard_descriptor_accessor",id:2},{rule:"repeated",options:{},type:"UninterpretedOption",name:"uninterpreted_option",id:999}],enums:[],messages:[],options:{},oneofs:{},extensions:[1e3,536870911]},{name:"FieldOptions",fields:[{rule:"optional",options:{default:"STRING"},type:"CType",name:"ctype",id:1},{rule:"optional",options:{},type:"bool",name:"packed",id:2},{rule:"optional",options:{default:!1},type:"bool",name:"lazy",id:5},{rule:"optional",options:{default:!1},type:"bool",name:"deprecated",id:3},{rule:"optional",options:{},type:"string",name:"experimental_map_key",id:9},{rule:"optional",options:{default:!1},type:"bool",name:"weak",id:10},{rule:"repeated",options:{},type:"UninterpretedOption",name:"uninterpreted_option",id:999}],enums:[{name:"CType",values:[{name:"STRING",id:0},{name:"CORD",id:1},{name:"STRING_PIECE",id:2}],options:{}}],messages:[],options:{},oneofs:{},extensions:[1e3,536870911]},{name:"EnumOptions",fields:[{rule:"optional",options:{default:!0},type:"bool",name:"allow_alias",id:2},{rule:"repeated",options:{},type:"UninterpretedOption",name:"uninterpreted_option",id:999}],enums:[],messages:[],options:{},oneofs:{},extensions:[1e3,536870911]},{name:"EnumValueOptions",fields:[{rule:"repeated",options:{},type:"UninterpretedOption",name:"uninterpreted_option",id:999}],enums:[],messages:[],options:{},oneofs:{},extensions:[1e3,536870911]},{name:"ServiceOptions",fields:[{rule:"repeated",options:{},type:"UninterpretedOption",name:"uninterpreted_option",id:999}],enums:[],messages:[],options:{},oneofs:{},extensions:[1e3,536870911]},{name:"MethodOptions",fields:[{rule:"repeated",options:{},type:"UninterpretedOption",name:"uninterpreted_option",id:999}],enums:[],messages:[],options:{},oneofs:{},extensions:[1e3,536870911]},{name:"UninterpretedOption",fields:[{rule:"repeated",options:{},type:"NamePart",name:"name",id:2},{rule:"optional",options:{},type:"string",name:"identifier_value",id:3},{rule:"optional",options:{},type:"uint64",name:"positive_int_value",id:4},{rule:"optional",options:{},type:"int64",name:"negative_int_value",id:5},{rule:"optional",options:{},type:"double",name:"double_value",id:6},{rule:"optional",options:{},type:"bytes",name:"string_value",id:7},{rule:"optional",options:{},type:"string",name:"aggregate_value",id:8}],enums:[],messages:[{name:"NamePart",fields:[{rule:"required",options:{},type:"string",name:"name_part",id:1},{rule:"required",options:{},type:"bool",name:"is_extension",id:2}],enums:[],messages:[],options:{},oneofs:{}}],options:{},oneofs:{}},{name:"SourceCodeInfo",fields:[{rule:"repeated",options:{},type:"Location",name:"location",id:1}],enums:[],messages:[{name:"Location",fields:[{rule:"repeated",options:{packed:!0},type:"int32",name:"path",id:1},{rule:"repeated",options:{packed:!0},type:"int32",name:"span",id:2},{rule:"optional",options:{},type:"string",name:"leading_comments",id:3},{rule:"optional",options:{},type:"string",name:"trailing_comments",id:4}],enums:[],messages:[],options:{},oneofs:{}}],options:{},oneofs:{}}],enums:[],imports:[],options:{java_package:"com.google.protobuf",java_outer_classname:"DescriptorProtos",optimize_for:"SPEED"},services:[]}],options:{},services:[]}).build()}],["trezor-link","/lib/lowlevel/receive.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.receiveOne=function(e,t){var r=c.ByteBuffer.concat([t]),i=r.readUint16();r.readUint32();var s=new h.MessageDecoder(e,i,r.toArrayBuffer());return{message:s.decodedJSON(),type:s.messageName()}},e.receiveAndParse=function(e,t){return y.apply(this,arguments)};var o,a=(o=__browser_require__(575,r))&&o.__esModule?o:{default:o},h=__browser_require__(607,r),c=__browser_require__(580,r);function u(e,t,r,i,s,n,o){try{var a=e[n](o),h=a.value}catch(e){return void r(e)}a.done?t(h):Promise.resolve(h).then(i,s)}function f(e){return function(){var t=this,r=arguments;return new Promise(function(i,s){var n=e.apply(t,r);function o(e){u(n,i,s,o,a,"next",e)}function a(e){u(n,i,s,o,a,"throw",e)}o(undefined)})}}function l(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var d=35,p=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.typeNumber=t,this.expectedLength=r,this.buffer=new c.ByteBuffer(r)}var t,r,i;return t=e,(r=[{key:"isDone",value:function(){return this.buffer.offset>=this.expectedLength}},{key:"append",value:function(e){this.buffer.append(e)}},{key:"arrayBuffer",value:function(){var e=this.buffer;return e.reset(),e.toArrayBuffer()}}])&&l(t.prototype,r),i&&l(t,i),e}();function b(e){var t=c.ByteBuffer.concat([e]),r=t.readByte(),i=t.readByte();if(r!==d||i!==d)throw new Error("Didn't receive expected header signature.");var s=t.readUint16(),n=t.readUint32(),o=new p(s,n);return o.append(t),o}function g(e,t){return m.apply(this,arguments)}function m(){return(m=f(a.default.mark(function e(t,r){var i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isDone()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,r();case 4:if(null!=(i=e.sent)){e.next=7;break}throw new Error("Received no data.");case 7:return t.append(i),e.abrupt("return",g(t,r));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _(e){return w.apply(this,arguments)}function w(){return(w=f(a.default.mark(function e(t){var r,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return r=e.sent,i=b(r),e.next=6,g(i,t);case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function y(){return(y=f(a.default.mark(function e(t,r){var i,s,n,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(r);case 2:return i=e.sent,s=i.typeNumber,n=i.arrayBuffer(),o=new h.MessageDecoder(t,s,n),e.abrupt("return",{message:o.decodedJSON(),type:o.messageName()});case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}}],["trezor-link","/lib/lowlevel/protobuf/message_decoder.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MessageDecoder=void 0;var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}(__browser_require__(580,r));__browser_require__(585,r);function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=o.ByteBuffer,u=o.Long,f=function(){function e(t,r,i){h(this,e),this.type=r,this.data=i,this.messages=t}var t,r,i;return t=e,(r=[{key:"_messageInfo",value:function(){var e=this.messages.messagesByType[this.type];if(null==e)throw new Error("Method type not found - ".concat(this.type));return new function e(t,r){h(this,e),this.messageConstructor=t,this.name=r}(e.constructor,e.name)}},{key:"messageName",value:function(){return this._messageInfo().name}},{key:"_decodedMessage",value:function(){return this._messageInfo().messageConstructor.decode(this.data)}},{key:"decodedJSON",value:function(){var e=function e(t){var r={};var i=t.$type;var s=function(s){var n=t[s];if("function"==typeof n);else if(n instanceof c){var a=n.toHex();r[s]=a}else if(n instanceof u){var h=n.toNumber();r[s]=h}else if(Array.isArray(n)){var f=n.map(function(t){if("features"===s&&"enum"===i._fieldsByName[s].type.name){var r=i._fieldsByName[s].resolvedType.getChildren();return r.find(function(e){return e.id===t}).name}return"object"==typeof t?e(t):t});r[s]=f}else if(n instanceof o.Builder.Message)r[s]=e(n);else if("enum"===i._fieldsByName[s].type.name)if(null==n)r[s]=null;else{var l=i._fieldsByName[s].resolvedType.getChildren();r[s]=l.find(function(e){return e.id===n}).name}else r[s]=n};for(var n in t)s(n);return r}(this._decodedMessage());return JSON.parse(JSON.stringify(e))}}])&&a(t.prototype,r),i&&a(t,i),e}();e.MessageDecoder=f}],["trezor-link","/lib/debug-decorator.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.debugInOut=function(e,t,r){var i=r.value;return r.value=function(){var e,r,s=this.debug||"init"===t&&arguments[0],n=this.name,o=Array.prototype.slice.call(arguments);return s&&(e=console).log.apply(e,["[trezor-link] Calling ".concat(n,".").concat(t,"(")].concat(function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(r=o.map(function(e){return"string"==typeof e&&e.length>1e3?"".concat(e.substring(0,1e3),"..."):e}))||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}(),[")"])),i.apply(this,arguments).then(function(e){return s&&(null==e?console.log("[trezor-link] Done ".concat(n,".").concat(t)):console.log("[trezor-link] Done ".concat(n,".").concat(t,", result "),e)),e},function(e){throw s&&console.error("[trezor-link] Error in ".concat(n,".").concat(t),e),e})},r}}],["trezor-link","/lib/lowlevel/withSharedConnections.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,a,h=(o=__browser_require__(575,r))&&o.__esModule?o:{default:o},c=__browser_require__(610,r),u=__browser_require__(611,r),f=__browser_require__(584,r),l=__browser_require__(579,r),d=__browser_require__(606,r),p=__browser_require__(608,r),b=__browser_require__(612,r);function g(e,t,r,i,s,n,o){try{var a=e[n](o),h=a.value}catch(e){return void r(e)}a.done?t(h):Promise.resolve(h).then(i,s)}function m(e){return function(){var t=this,r=arguments;return new Promise(function(i,s){var n=e.apply(t,r);function o(e){g(n,i,s,o,a,"next",e)}function a(e){g(n,i,s,o,a,"throw",e)}o(undefined)})}}function _(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function w(e,t,r,i,s){var n={};return Object.keys(i).forEach(function(e){n[e]=i[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce(function(r,i){return i(e,t,r)||r},n),s&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(s):void 0,n.initializer=undefined),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}(0,c.patch)();var y=__browser_require__(613,r);function v(e){if(null==e)return"null";var t=e.map(function(e){return{path:e.path,session:null==e.session?null:e.session}});return y(t)}function E(e,t){return isNaN(parseInt(e.path))?e.path<t.path?-1:e.path>t.path?1:0:parseInt(e.path)-parseInt(t.path)}var S=(w((a=function(){function e(t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name="LowlevelTransportWithSharedConnections",this.debug=!1,this.deferedDebugOnRelease={},this.deferedNormalOnRelease={},this.configured=!1,this.stopped=!1,this._lastStringified="",this.requestNeeded=!1,this.latestId=0,this.defereds={},this.isOutdated=!1,this.plugin=t,this.version=t.version,this._sharedWorkerFactory=r,!this.plugin.allowsWriteAndEnumerate)throw new Error("Plugin with shared connections cannot disallow write and enumerate")}var t,r,i;return t=e,(r=[{key:"enumerate",value:function(){return this._silentEnumerate()}},{key:"_silentEnumerate",value:function(){var e=m(h.default.mark(function e(){var t,r,i,s,n;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sendToWorker({type:"enumerate-intent"});case 2:return t=[],e.prev=3,e.next=6,this.plugin.enumerate();case 6:t=e.sent;case 7:return e.prev=7,e.next=10,this.sendToWorker({type:"enumerate-done"});case 10:return e.finish(7);case 11:return e.next=13,this.sendToWorker({type:"get-sessions-and-disconnect",devices:t});case 13:if("sessions"===(r=e.sent).type){e.next=16;break}throw new Error("Wrong reply");case 16:return i=r.debugSessions,s=r.normalSessions,n=t.map(function(e){var t=s[e.path],r=i[e.path];return{path:e.path,session:t,debug:e.debug,debugSession:r}}),this._releaseDisconnected(n),e.abrupt("return",n.sort(E));case 21:case"end":return e.stop()}},e,this,[[3,,7,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"_releaseDisconnected",value:function(e){var t=this,r={};e.forEach(function(e){null!=e.session&&(r[e.session]=!0)}),Object.keys(this.deferedDebugOnRelease).forEach(function(e){null==r[e]&&t._releaseCleanup(e,!0)}),Object.keys(this.deferedNormalOnRelease).forEach(function(e){null==r[e]&&t._releaseCleanup(e,!1)})}},{key:"listen",value:function(){var e=m(h.default.mark(function e(t){var r,i;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=v(t),i=null==t?this._lastStringified:r,e.abrupt("return",this._runIter(0,i));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_runIter",value:function(){var e=m(h.default.mark(function e(t,r){var i,s;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._silentEnumerate();case 2:if(i=e.sent,(s=v(i))===r&&60!==t){e.next=7;break}return this._lastStringified=s,e.abrupt("return",i);case 7:return e.next=9,(0,u.resolveTimeoutPromise)(500,null);case 9:return e.abrupt("return",this._runIter(t+1,s));case 10:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"acquire",value:function(){var e=m(h.default.mark(function e(t,r){var i,s,n,o;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sendToWorker({type:"acquire-intent",path:t.path,previous:t.previous,debug:r});case 2:if("wrong-previous-session"!==(i=e.sent).type){e.next=5;break}throw new Error("wrong previous session");case 5:if("other-session"===i.type){e.next=7;break}throw new Error("Strange reply");case 7:return s=null==i.otherSession,e.prev=8,e.next=11,this.plugin.connect(t.path,r,s);case 11:e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(8),e.next=17,this.sendToWorker({type:"acquire-failed"});case 17:throw e.t0;case 18:return e.next=20,this.sendToWorker({type:"acquire-done"});case 20:if("session-number"===(n=e.sent).type){e.next=23;break}throw new Error("Strange reply.");case 23:return o=n.number,r?this.deferedDebugOnRelease[o]=(0,u.create)():this.deferedNormalOnRelease[o]=(0,u.create)(),e.abrupt("return",o);case 26:case"end":return e.stop()}},e,this,[[8,13]])}));return function(t,r){return e.apply(this,arguments)}}()},{key:"release",value:function(){var e=m(h.default.mark(function e(t,r,i){var s,n,o,a;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r||i){e.next=3;break}return this.sendToWorker({type:"release-onclose",session:t}),e.abrupt("return");case 3:return e.next=5,this.sendToWorker({type:"release-intent",session:t,debug:i});case 5:if("double-release"!==(s=e.sent).type){e.next=8;break}throw new Error("Trying to double release.");case 8:if("path"===s.type){e.next=10;break}throw new Error("Strange reply.");case 10:return n=s.path,o=s.otherSession,a=null==o,this._releaseCleanup(t,i),e.prev=14,e.next=17,this.plugin.disconnect(n,i,a);case 17:e.next=21;break;case 19:e.prev=19,e.t0=e.catch(14);case 21:return e.next=23,this.sendToWorker({type:"release-done"});case 23:case"end":return e.stop()}},e,this,[[14,19]])}));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"_releaseCleanup",value:function(e,t){var r=t?this.deferedDebugOnRelease:this.deferedNormalOnRelease;null!=r[e]&&(r[e].reject(new Error("Device released or disconnected")),delete r[e])}},{key:"configure",value:function(){var e=m(h.default.mark(function e(t){var r;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=(0,f.parseConfigure)(t),this._messages=r,this.configured=!0;case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_sendLowlevel",value:function(e,t){var r=this;return function(i){return r.plugin.send(e,i,t)}}},{key:"_receiveLowlevel",value:function(e,t){var r=this;return function(){return r.plugin.receive(e,t)}}},{key:"messages",value:function(){if(null==this._messages)throw new Error("Transport not configured.");return this._messages}},{key:"doWithSession",value:function(){var e=m(h.default.mark(function e(t,r,i){var s,n,o,a,c,u;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sendToWorker({type:"get-sessions"});case 2:if("sessions"===(s=e.sent).type){e.next=5;break}throw new Error("Wrong reply");case 5:if(n=r?s.debugSessions:s.normalSessions,o=null,Object.keys(n).forEach(function(e){n[e]===t&&(o=e)}),null!=o){e.next=10;break}throw new Error("Session not available.");case 10:return a=o,e.next=13,i(a);case 13:return c=e.sent,u=r?this.deferedDebugOnRelease[t]:this.deferedNormalOnRelease[t],e.abrupt("return",Promise.race([u.rejectingPromise,c]));case 16:case"end":return e.stop()}},e,this)}));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"call",value:function(){var e=m(h.default.mark(function e(t,r,i,s){var n,o=this;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=m(h.default.mark(function e(t){var n,a;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.messages(),e.next=3,(0,l.buildAndSend)(n,o._sendLowlevel(t,s),r,i);case 3:return e.next=5,(0,d.receiveAndParse)(n,o._receiveLowlevel(t,s));case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),e.abrupt("return",this.doWithSession(t,s,n));case 2:case"end":return e.stop()}},e,this)}));return function(t,r,i,s){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=m(h.default.mark(function e(t,r,i,s){var n,o=this;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){var e=m(h.default.mark(function e(t){var n;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.messages(),e.next=3,(0,l.buildAndSend)(n,o._sendLowlevel(t,s),r,i);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),e.abrupt("return",this.doWithSession(t,s,n));case 2:case"end":return e.stop()}},e,this)}));return function(t,r,i,s){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=m(h.default.mark(function e(t,r){var i,s=this;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(){var e=m(h.default.mark(function e(t){var i,n;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.messages(),e.next=3,(0,d.receiveAndParse)(i,s._receiveLowlevel(t,r));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),e.abrupt("return",this.doWithSession(t,r,i));case 2:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=m(h.default.mark(function e(t){var r=this;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.debug=!!t,this.requestNeeded=this.plugin.requestNeeded,e.next=4,this.plugin.init(t);case 4:null!=this._sharedWorkerFactory&&(this.sharedWorker=this._sharedWorkerFactory(),null!=this.sharedWorker&&(this.sharedWorker.port.onmessage=function(e){r.receiveFromWorker(e.data)}));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"requestDevice",value:function(){var e=m(h.default.mark(function e(){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.plugin.requestDevice());case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"sendToWorker",value:function(e){var t=this;if(this.stopped)return Promise.reject("Transport stopped.");this.latestId++;var r=this.latestId;return this.defereds[r]=(0,u.create)(),null!=this.sharedWorker?this.sharedWorker.port.postMessage({id:r,message:e}):(0,b.postModuleMessage)({id:r,message:e},function(e){return t.receiveFromWorker(e)}),this.defereds[r].promise}},{key:"receiveFromWorker",value:function(e){this.defereds[e.id].resolve(e.message),delete this.defereds[e.id]}},{key:"setBridgeLatestUrl",value:function(e){}},{key:"stop",value:function(){this.stopped=!0,this.sharedWorker=null}}])&&_(t.prototype,r),i&&_(t,i),e}()).prototype,"enumerate",[p.debugInOut],Object.getOwnPropertyDescriptor(a.prototype,"enumerate"),a.prototype),w(a.prototype,"listen",[p.debugInOut],Object.getOwnPropertyDescriptor(a.prototype,"listen"),a.prototype),w(a.prototype,"acquire",[p.debugInOut],Object.getOwnPropertyDescriptor(a.prototype,"acquire"),a.prototype),w(a.prototype,"release",[p.debugInOut],Object.getOwnPropertyDescriptor(a.prototype,"release"),a.prototype),w(a.prototype,"configure",[p.debugInOut],Object.getOwnPropertyDescriptor(a.prototype,"configure"),a.prototype),w(a.prototype,"call",[p.debugInOut],Object.getOwnPropertyDescriptor(a.prototype,"call"),a.prototype),w(a.prototype,"post",[p.debugInOut],Object.getOwnPropertyDescriptor(a.prototype,"post"),a.prototype),w(a.prototype,"read",[p.debugInOut],Object.getOwnPropertyDescriptor(a.prototype,"read"),a.prototype),w(a.prototype,"init",[p.debugInOut],Object.getOwnPropertyDescriptor(a.prototype,"init"),a.prototype),a);e.default=S,r.exports=e.default}],["trezor-link","/lib/lowlevel/protobuf/monkey_patch.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.patch=function(){h||(o.Reflect.Message.Field.prototype.verifyValueOriginal=o.Reflect.Message.Field.prototype.verifyValue,o.Reflect.Message.Field.prototype.verifyValue=function(e,t){var r=e;return this.type===o.TYPES.bytes&&null!=e&&"string"==typeof e&&(r=a.wrap(e,"hex")),this.verifyValueOriginal(r,t)});h=!0};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}(__browser_require__(580,r));var a=o.ByteBuffer,h=!1}],["trezor-link","/lib/defered.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var e=function(e){},t=function(e){},r=new Promise(function(r,i){e=r,t=i}),i=r.then(function(){throw new Error("Promise is always rejecting")});return i.catch(function(){}),{resolve:e,reject:t,promise:r,rejectingPromise:i}},e.resolveTimeoutPromise=function(e,t){return new Promise(function(r){setTimeout(function(){r(t)},e)})},e.rejectTimeoutPromise=function(e,t){return new Promise(function(r,i){setTimeout(function(){i(t)},e)})}}],["trezor-link","/lib/lowlevel/sharedConnectionWorker.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.postModuleMessage=function(e,t){var r=e.id,i=e.message;b({id:r,message:i},{postMessage:t})};var o=__browser_require__(611,r);"undefined"!=typeof onconnect&&(onconnect=function(e){var t=e.ports[0];t.onmessage=function(e){b(e.data,t)}});var a={},h={},c=null,u=Promise.resolve();function f(){var e=(0,o.create)();c=e,setTimeout(function(){return e.reject(new Error("Timed out"))},1e4)}function l(e){null!=c&&c.resolve(e)}function d(){return null==c?Promise.reject(new Error("???")):c.promise}function p(e){var t=u.then(function(){return e()});u=t.catch(function(){})}function b(e,t){var r=e.id,i=e.message;if("acquire-intent"===i.type){var s=i.path,n=i.previous,o=i.debug;p(function(){return function(e,t,r,i,s){var n=!1,o=r?h:a,c=r?a:h,u=o[e];n=null==u?null!=t:t!==u;return n?(w({type:"wrong-previous-session"},i,s),Promise.resolve()):(f(),w({type:"other-session",otherSession:c[e]},i,s),d().then(function(t){if(t.good){var i=(++_).toString();r&&(i="debug"+i),o[e]=i,w({type:"session-number",number:i},t.id,s)}else w({type:"ok"},t.id,s)}))}(s,n,o,r,t)})}if("acquire-done"===i.type&&function(e){l({good:!0,id:e})}(r),"acquire-failed"===i.type&&function(e){l({good:!1,id:e})}(r),"get-sessions"===i.type&&p(function(){return m(r,t)}),"get-sessions-and-disconnect"===i.type){var c=i.devices;p(function(){return m(r,t,c)})}if("release-onclose"===i.type){var u=i.session;p(function(){return function(e){var t=null;if(Object.keys(a).forEach(function(r){a[r]===e&&(t=r)}),null==t)return Promise.resolve();var r=t;return delete a[r],delete h[r],Promise.resolve()}(u)})}if("release-intent"===i.type){var b=i.session,y=i.debug;p(function(){return function(e,t,r,i){var s=null,n=t?h:a,o=t?a:h;if(Object.keys(n).forEach(function(t){n[t]===e&&(s=t)}),null==s)return w({type:"double-release"},r,i),Promise.resolve();var c=s,u=o[c];return f(),w({type:"path",path:c,otherSession:u},r,i),d().then(function(e){delete n[c],w({type:"ok"},e.id,i)})}(b,y,r,t)})}"release-done"===i.type&&g(r),"enumerate-intent"===i.type&&p(function(){return function(e,t){return f(),w({type:"ok"},e,t),d().then(function(e){w({type:"ok"},e.id,t)})}(r,t)}),"enumerate-done"===i.type&&g(r)}function g(e){l({id:e})}function m(e,t,r){if(null!=r){var i={};r.forEach(function(e){i[e.path]=!0}),Object.keys(a).forEach(function(e){a[e]||delete a[e]}),Object.keys(h).forEach(function(e){h[e]||delete h[e]})}return w({type:"sessions",debugSessions:h,normalSessions:a},e,t),Promise.resolve()}var _=0;function w(e,t,r){r.postMessage({id:t,message:e})}}],["json-stable-stringify","/index.js",function(e,t,r,i,s,n){var o="undefined"!=typeof JSON?JSON:__browser_require__(614,r);r.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var r=t.space||"";"number"==typeof r&&(r=Array(r+1).join(" "));var i,s="boolean"==typeof t.cycles&&t.cycles,n=t.replacer||function(e,t){return t},c=t.cmp&&(i=t.cmp,function(e){return function(t,r){var s={key:t,value:e[t]},n={key:r,value:e[r]};return i(s,n)}}),u=[];return function e(t,i,f,l){var d=r?"\n"+new Array(l+1).join(r):"",p=r?": ":":";if(f&&f.toJSON&&"function"==typeof f.toJSON&&(f=f.toJSON()),(f=n.call(t,i,f))!==undefined){if("object"!=typeof f||null===f)return o.stringify(f);if(a(f)){for(var b=[],g=0;g<f.length;g++){var m=e(f,g,f[g],l+1)||o.stringify(null);b.push(d+r+m)}return"["+b.join(",")+d+"]"}if(-1!==u.indexOf(f)){if(s)return o.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}u.push(f);var _=h(f).sort(c&&c(f));for(b=[],g=0;g<_.length;g++){var w=e(f,i=_[g],f[i],l+1);if(w){var y=o.stringify(i)+p+w;b.push(d+r+y)}}return u.splice(u.indexOf(f),1),"{"+b.join(",")+d+"}"}}({"":e},"",e,0)};var a=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},h=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},r=[];for(var i in e)t.call(e,i)&&r.push(i);return r}}],["jsonify","/index.js",function(e,t,r,i,s,n){e.parse=__browser_require__(615,r),e.stringify=__browser_require__(616,r)}],["jsonify","/lib/parse.js",function(e,t,r,i,s,n){var o,a,h,c,u={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},f=function(e){throw{name:"SyntaxError",message:e,at:o,text:h}},l=function(e){return e&&e!==a&&f("Expected '"+e+"' instead of '"+a+"'"),a=h.charAt(o),o+=1,a},d=function(){var e,t="";for("-"===a&&(t="-",l("-"));a>="0"&&a<="9";)t+=a,l();if("."===a)for(t+=".";l()&&a>="0"&&a<="9";)t+=a;if("e"===a||"E"===a)for(t+=a,l(),"-"!==a&&"+"!==a||(t+=a,l());a>="0"&&a<="9";)t+=a,l();if(e=+t,isFinite(e))return e;f("Bad number")},p=function(){var e,t,r,i="";if('"'===a)for(;l();){if('"'===a)return l(),i;if("\\"===a)if(l(),"u"===a){for(r=0,t=0;t<4&&(e=parseInt(l(),16),isFinite(e));t+=1)r=16*r+e;i+=String.fromCharCode(r)}else{if("string"!=typeof u[a])break;i+=u[a]}else i+=a}f("Bad string")},b=function(){for(;a&&a<=" ";)l()};c=function(){switch(b(),a){case"{":return function(){var e,t={};if("{"===a){if(l("{"),b(),"}"===a)return l("}"),t;for(;a;){if(e=p(),b(),l(":"),Object.hasOwnProperty.call(t,e)&&f('Duplicate key "'+e+'"'),t[e]=c(),b(),"}"===a)return l("}"),t;l(","),b()}}f("Bad object")}();case"[":return function(){var e=[];if("["===a){if(l("["),b(),"]"===a)return l("]"),e;for(;a;){if(e.push(c()),b(),"]"===a)return l("]"),e;l(","),b()}}f("Bad array")}();case'"':return p();case"-":return d();default:return a>="0"&&a<="9"?d():function(){switch(a){case"t":return l("t"),l("r"),l("u"),l("e"),!0;case"f":return l("f"),l("a"),l("l"),l("s"),l("e"),!1;case"n":return l("n"),l("u"),l("l"),l("l"),null}f("Unexpected '"+a+"'")}()}},r.exports=function(e,t){var r;return h=e,o=0,a=" ",r=c(),b(),a&&f("Syntax error"),"function"==typeof t?function e(r,i){var s,n,o=r[i];if(o&&"object"==typeof o)for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&((n=e(o,s))!==undefined?o[s]=n:delete o[s]);return t.call(r,i,o)}({"":r},""):r}}],["jsonify","/lib/stringify.js",function(e,t,r,i,s,n){var o,a,h,c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,u={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function f(e){return c.lastIndex=0,c.test(e)?'"'+e.replace(c,function(e){var t=u[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}r.exports=function(e,t,r){var i;if(o="",a="","number"==typeof r)for(i=0;i<r;i+=1)a+=" ";else"string"==typeof r&&(a=r);if(h=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return function e(t,r){var i,s,n,c,u,l=o,d=r[t];switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(t)),"function"==typeof h&&(d=h.call(r,t,d)),typeof d){case"string":return f(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(o+=a,u=[],"[object Array]"===Object.prototype.toString.apply(d)){for(c=d.length,i=0;i<c;i+=1)u[i]=e(i,d)||"null";return n=0===u.length?"[]":o?"[\n"+o+u.join(",\n"+o)+"\n"+l+"]":"["+u.join(",")+"]",o=l,n}if(h&&"object"==typeof h)for(c=h.length,i=0;i<c;i+=1)"string"==typeof(s=h[i])&&(n=e(s,d))&&u.push(f(s)+(o?": ":":")+n);else for(s in d)Object.prototype.hasOwnProperty.call(d,s)&&(n=e(s,d))&&u.push(f(s)+(o?": ":":")+n);return n=0===u.length?"{}":o?"{\n"+o+u.join(",\n"+o)+"\n"+l+"}":"{"+u.join(",")+"}",o=l,n}}("",{"":e})}}],["trezor-link","/lib/fallback.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,a,h=(o=__browser_require__(575,r))&&o.__esModule?o:{default:o},c=__browser_require__(608,r);function u(e,t,r,i,s,n,o){try{var a=e[n](o),h=a.value}catch(e){return void r(e)}a.done?t(h):Promise.resolve(h).then(i,s)}function f(e){return function(){var t=this,r=arguments;return new Promise(function(i,s){var n=e.apply(t,r);function o(e){u(n,i,s,o,a,"next",e)}function a(e){u(n,i,s,o,a,"throw",e)}o(undefined)})}}function l(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var d,p,b,g,m,_,w=(d=(a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name="FallbackTransport",this.activeName="",this.debug=!1,this.requestNeeded=!1,this.transports=t}var t,r,i;return t=e,(r=[{key:"_tryInitTransports",value:function(){var e=f(h.default.mark(function e(){var t,r,i,s,n,o,a,c;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=[],r=null,i=!0,s=!1,n=undefined,e.prev=5,o=this.transports[Symbol.iterator]();case 7:if(i=(a=o.next()).done){e.next=21;break}return c=a.value,e.prev=9,e.next=12,c.init(this.debug);case 12:t.push(c),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(9),r=e.t0;case 18:i=!0,e.next=7;break;case 21:e.next=27;break;case 23:e.prev=23,e.t1=e.catch(5),s=!0,n=e.t1;case 27:e.prev=27,e.prev=28,i||null==o.return||o.return();case 30:if(e.prev=30,!s){e.next=33;break}throw n;case 33:return e.finish(30);case 34:return e.finish(27);case 35:if(0!==t.length){e.next=37;break}throw r||new Error("No transport could be initialized.");case 37:return e.abrupt("return",t);case 38:case"end":return e.stop()}},e,this,[[5,23,27,35],[9,15],[28,,30,34]])}));return function(){return e.apply(this,arguments)}}()},{key:"_tryConfigureTransports",value:function(){var e=f(h.default.mark(function e(t){var r,i,s,n,o,a,c;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=null,i=!0,s=!1,n=undefined,e.prev=4,o=this._availableTransports[Symbol.iterator]();case 6:if(i=(a=o.next()).done){e.next=20;break}return c=a.value,e.prev=8,e.next=11,c.configure(t);case 11:return e.abrupt("return",c);case 14:e.prev=14,e.t0=e.catch(8),r=e.t0;case 17:i=!0,e.next=6;break;case 20:e.next=26;break;case 22:e.prev=22,e.t1=e.catch(4),s=!0,n=e.t1;case 26:e.prev=26,e.prev=27,i||null==o.return||o.return();case 29:if(e.prev=29,!s){e.next=32;break}throw n;case 32:return e.finish(29);case 33:return e.finish(26);case 34:throw r||new Error("No transport could be initialized.");case 35:case"end":return e.stop()}},e,this,[[4,22,26,34],[8,14],[27,,29,33]])}));return function(t){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=f(h.default.mark(function e(t){var r;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.debug=!!t,e.next=3,this._tryInitTransports();case 3:r=e.sent,this._availableTransports=r,this.version=r[0].version,this.configured=!1;case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"configure",value:function(){var e=f(h.default.mark(function e(t){var r;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._tryConfigureTransports(t),e.next=3,r;case 3:this.activeTransport=e.sent,this.configured=this.activeTransport.configured,this.version=this.activeTransport.version,this.activeName=this.activeTransport.name,this.requestNeeded=this.activeTransport.requestNeeded,this.isOutdated=this.activeTransport.isOutdated;case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"enumerate",value:function(){var e=f(h.default.mark(function e(){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.activeTransport.enumerate());case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"listen",value:function(){var e=f(h.default.mark(function e(t){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.activeTransport.listen(t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"acquire",value:function(){var e=f(h.default.mark(function e(t,r){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.activeTransport.acquire(t,r));case 1:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"release",value:function(){var e=f(h.default.mark(function e(t,r,i){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.activeTransport.release(t,r,i));case 1:case"end":return e.stop()}},e,this)}));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"call",value:function(){var e=f(h.default.mark(function e(t,r,i,s){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.activeTransport.call(t,r,i,s));case 1:case"end":return e.stop()}},e,this)}));return function(t,r,i,s){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=f(h.default.mark(function e(t,r,i,s){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.activeTransport.post(t,r,i,s));case 1:case"end":return e.stop()}},e,this)}));return function(t,r,i,s){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=f(h.default.mark(function e(t,r){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.activeTransport.read(t,r));case 1:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},{key:"requestDevice",value:function(){var e=f(h.default.mark(function e(){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.activeTransport.requestDevice());case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setBridgeLatestUrl",value:function(e){var t=!0,r=!1,i=undefined;try{for(var s,n=this.transports[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){s.value.setBridgeLatestUrl(e)}}catch(e){r=!0,i=e}finally{try{t||null==n.return||n.return()}finally{if(r)throw i}}}},{key:"stop",value:function(){var e=!0,t=!1,r=undefined;try{for(var i,s=this.transports[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){i.value.stop()}}catch(e){t=!0,r=e}finally{try{e||null==s.return||s.return()}finally{if(t)throw r}}}}])&&l(t.prototype,r),i&&l(t,i),e}()).prototype,p="init",b=[c.debugInOut],g=Object.getOwnPropertyDescriptor(a.prototype,"init"),m=a.prototype,_={},Object.keys(g).forEach(function(e){_[e]=g[e]}),_.enumerable=!!_.enumerable,_.configurable=!!_.configurable,("value"in _||_.initializer)&&(_.writable=!0),_=b.slice().reverse().reduce(function(e,t){return t(d,p,e)||e},_),m&&void 0!==_.initializer&&(_.value=_.initializer?_.initializer.call(m):void 0,_.initializer=undefined),void 0===_.initializer&&(Object.defineProperty(d,p,_),_=null),a);e.default=w,r.exports=e.default}],["trezor-link","/lib/lowlevel/webusb.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,a=u(__browser_require__(575,r)),h=u(__browser_require__(19,r)),c=__browser_require__(608,r);function u(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,r,i,s,n,o){try{var a=e[n](o),h=a.value}catch(e){return void r(e)}a.done?t(h):Promise.resolve(h).then(i,s)}function d(e){return function(){var t=this,r=arguments;return new Promise(function(i,s){var n=e.apply(t,r);function o(e){l(n,i,s,o,a,"next",e)}function a(e){l(n,i,s,o,a,"throw",e)}o(undefined)})}}function p(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function b(e,t,r,i,s){var n={};return Object.keys(i).forEach(function(e){n[e]=i[e]}),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=r.slice().reverse().reduce(function(r,i){return i(e,t,r)||r},n),s&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(s):void 0,n.initializer=undefined),void 0===n.initializer&&(Object.defineProperty(e,t,n),n=null),n}var g=[{vendorId:21324,productId:1},{vendorId:4617,productId:21440},{vendorId:4617,productId:21441}],m=1,_=0,w=1,y=1,v=2,E=(b((o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name="WebUsbPlugin",this.version="1.6.7",this.debug=!1,this.allowsWriteAndEnumerate=!0,this.configurationId=m,this.normalInterfaceId=_,this.normalEndpointId=w,this.debugInterfaceId=y,this.debugEndpointId=v,this.unreadableHidDevice=!1,this.unreadableHidDeviceChange=new h.default,this._lastDevices=[],this.requestNeeded=!0}var t,r,i;return t=e,(r=[{key:"init",value:function(){var e=d(a.default.mark(function e(t){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.debug=!!t,null!=(r=navigator.usb)){e.next=6;break}throw new Error("WebUSB is not available on this browser.");case 6:this.usb=r;case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_deviceHasDebugLink",value:function(e){try{var t=e.configurations[0].interfaces[y].alternates[0];return 255===t.interfaceClass&&t.endpoints[0].endpointNumber===v}catch(e){return!1}}},{key:"_deviceIsHid",value:function(e){return 21324===e.vendorId}},{key:"_listDevices",value:function(){var e=d(a.default.mark(function e(){var t,r,i,s,n,o,h=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0,e.next=3,this.usb.getDevices();case 3:return r=e.sent,i=r.filter(function(e){return g.some(function(t){return e.vendorId===t.vendorId&&e.productId===t.productId})}),s=i.filter(function(e){return h._deviceIsHid(e)}),n=i.filter(function(e){return!h._deviceIsHid(e)}),this._lastDevices=n.map(function(e){var r=e.serialNumber,i=null==r||""===r?"bootloader":r;return"bootloader"===i&&(i+=++t),{path:i,device:e,debug:h._deviceHasDebugLink(e)}}),o=this.unreadableHidDevice,this.unreadableHidDevice=s.length>0,o!==this.unreadableHidDevice&&this.unreadableHidDeviceChange.emit("change"),e.abrupt("return",this._lastDevices);case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"enumerate",value:function(){var e=d(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._listDevices();case 2:return e.t0=function(e){return{path:e.path,debug:e.debug}},e.abrupt("return",e.sent.map(e.t0));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_findDevice",value:function(){var e=d(a.default.mark(function e(t){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(r=this._lastDevices.find(function(e){return e.path===t}))){e.next=3;break}throw new Error("Action was interrupted.");case 3:return e.abrupt("return",r.device);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=d(a.default.mark(function e(t,r,i){var s,n,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._findDevice(t);case 2:if(s=e.sent,(n=new Uint8Array(64))[0]=63,n.set(new Uint8Array(r),1),s.opened){e.next=9;break}return e.next=9,this.connect(t,i,!1);case 9:return o=i?this.debugEndpointId:this.normalEndpointId,e.abrupt("return",s.transferOut(o,n).then(function(){}));case 11:case"end":return e.stop()}},e,this)}));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"receive",value:function(){var e=d(a.default.mark(function e(t,r){var i,s,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._findDevice(t);case 2:if(i=e.sent,s=r?this.debugEndpointId:this.normalEndpointId,e.prev=4,i.opened){e.next=8;break}return e.next=8,this.connect(t,r,!1);case 8:return e.next=10,i.transferIn(s,64);case 10:if(0!==(n=e.sent).data.byteLength){e.next=13;break}return e.abrupt("return",this.receive(t,r));case 13:return e.abrupt("return",n.data.buffer.slice(1));case 16:if(e.prev=16,e.t0=e.catch(4),"Device unavailable."!==e.t0.message){e.next=22;break}throw new Error("Action was interrupted.");case 22:throw e.t0;case 23:case"end":return e.stop()}},e,this,[[4,16]])}));return function(t,r){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=d(a.default.mark(function e(t,r,i){var s,n,o,h=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s=a.default.mark(function e(s){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s>0)){e.next=3;break}return e.next=3,new Promise(function(e){return setTimeout(function(){return e()},200*s)});case 3:return e.prev=3,e.next=6,h._connectIn(t,r,i);case 6:return e.t0=e.sent,e.abrupt("return",{v:e.t0});case 10:if(e.prev=10,e.t1=e.catch(3),4!==s){e.next=14;break}throw e.t1;case 14:case"end":return e.stop()}},e,null,[[3,10]])}),n=0;case 2:if(!(n<5)){e.next=10;break}return e.delegateYield(s(n),"t0",4);case 4:if("object"!==f(o=e.t0)){e.next=7;break}return e.abrupt("return",o.v);case 7:n++,e.next=2;break;case 10:case"end":return e.stop()}},e)}));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"_connectIn",value:function(){var e=d(a.default.mark(function e(t,r,i){var s,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._findDevice(t);case 2:return s=e.sent,e.next=5,s.open();case 5:if(!i){e.next=13;break}return e.next=8,s.selectConfiguration(this.configurationId);case 8:if("undefined"==typeof navigator){e.next=13;break}if(/\bCrOS\b/.test(navigator.userAgent)){e.next=13;break}return e.next=13,s.reset();case 13:return n=r?this.debugInterfaceId:this.normalInterfaceId,e.next=16,s.claimInterface(n);case 16:case"end":return e.stop()}},e,this)}));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=d(a.default.mark(function e(t,r,i){var s,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._findDevice(t);case 2:return s=e.sent,n=r?this.debugInterfaceId:this.normalInterfaceId,e.next=6,s.releaseInterface(n);case 6:if(!i){e.next=9;break}return e.next=9,s.close();case 9:case"end":return e.stop()}},e,this)}));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"requestDevice",value:function(){var e=d(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.usb.requestDevice({filters:g});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}])&&p(t.prototype,r),i&&p(t,i),e}()).prototype,"init",[c.debugInOut],Object.getOwnPropertyDescriptor(o.prototype,"init"),o.prototype),b(o.prototype,"connect",[c.debugInOut],Object.getOwnPropertyDescriptor(o.prototype,"connect"),o.prototype),b(o.prototype,"disconnect",[c.debugInOut],Object.getOwnPropertyDescriptor(o.prototype,"disconnect"),o.prototype),o);e.default=E,r.exports=e.default}],["node-fetch","/browser.js",function(e,t,r,i,s,n){"use strict";var o=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==o)return o;throw new Error("unable to locate global object")}();r.exports=e=o.fetch,e.default=o.fetch.bind(o),e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response}],["trezor-connect","/lib/env/browser/workers.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.ReactNativeUsbPlugin=e.WebUsbPlugin=void 0;var a=o(__browser_error__("sharedworker-loader?name=workers/shared-connection-worker.[hash].js!trezor-link/lib/lowlevel/sharedConnectionWorker")),h=o(__browser_error__("worker-loader?name=workers/blockbook-worker.[hash].js!@trezor/blockchain-link/lib/workers/blockbook/index.js"));e.BlockbookWorker=h.default;var c=o(__browser_error__("worker-loader?name=workers/ripple-worker.[hash].js!@trezor/blockchain-link/lib/workers/ripple/index.js"));e.RippleWorker=c.default;var u=o(__browser_require__(573,r));e.WebUsbPlugin=(()=>new u.default.Lowlevel(new u.default.WebUsb,()=>new a.default));const f=undefined;e.ReactNativeUsbPlugin=f}],["trezor-connect","/lib/message/builder.js",function(e,t,r,i,s,n){"use strict";e.__esModule=!0,e.BlockchainMessage=e.ResponseMessage=e.TransportMessage=e.DeviceMessage=e.UiMessage=void 0;var o=__browser_require__(385,r);e.UiMessage=((e,t)=>({event:o.UI_EVENT,type:e,payload:t}));e.DeviceMessage=((e,t)=>({event:o.DEVICE_EVENT,type:e,payload:t}));e.TransportMessage=((e,t)=>({event:o.TRANSPORT_EVENT,type:e,payload:t}));e.ResponseMessage=((e,t,r=null)=>({event:o.RESPONSE_EVENT,type:o.RESPONSE_EVENT,id:e,success:t,payload:r}));e.BlockchainMessage=((e,t)=>({event:o.BLOCKCHAIN_EVENT,type:e,payload:t}))}],["trezor-connect","/lib/core/methods/AbstractMethod.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=__browser_require__(427,r),c=a(__browser_require__(418,r)),u=(a(__browser_require__(422,r)),a(__browser_require__(409,r))),f=o(__browser_require__(388,r)),l=o(__browser_require__(389,r)),d=o(__browser_require__(414,r)),p=__browser_require__(623,r),b=__browser_require__(621,r);e.default=class{constructor(e){const t=e.payload;this.name=t.method,this.responseID=e.id||0,this.devicePath=t.device?t.device.path:null,this.deviceInstance=t.device?t.device.instance:0,this.deviceState=t.device?t.device.state:null,this.hasExpectedDeviceState=!!t.device&&Object.prototype.hasOwnProperty.call(t.device,"state"),this.keepSession="boolean"==typeof t.keepSession&&t.keepSession,this.skipFinalReload="boolean"==typeof t.skipFinalReload&&t.skipFinalReload,this.skipFirmwareCheck=!1,this.overridePreviousCall="boolean"==typeof t.override&&t.override,this.overridden=!1,this.useEmptyPassphrase="boolean"==typeof t.useEmptyPassphrase&&t.useEmptyPassphrase,this.allowSeedlessDevice="boolean"==typeof t.allowSeedlessDevice&&t.allowSeedlessDevice,this.allowDeviceMode=[],this.requireDeviceMode=[],this.allowSeedlessDevice&&(this.allowDeviceMode=[f.SEEDLESS]),this.debugLink=!1,this.firmwareRange={1:{min:"1.0.0",max:"0"},2:{min:"2.0.0",max:"0"}},this.requiredPermissions=[],this.useDevice=!0,this.useDeviceState=!0,this.useUi=!0}setDevice(e){this.device=e,this.devicePath=e.getDevicePath()}async run(){return new Promise(e=>e({}))}async requestPermissions(){await this.getPopupPromise().promise;const e=this.createUiPromise(f.RECEIVE_PERMISSION,this.device);this.postMessage((0,b.UiMessage)(f.REQUEST_PERMISSION,{permissions:this.requiredPermissions,device:this.device.toMessageObject()}));const t=(await e.promise).payload;return!!t.granted&&(this.savePermissions(!t.remember),!0)}checkPermissions(){const e=(0,p.load)(p.PERMISSIONS_KEY);let t=[...this.requiredPermissions];if(e&&Array.isArray(e)){const r=e.filter(e=>e.origin===u.default.getSettings("origin"));r.length>0&&(t=t.filter(e=>!r.find(t=>t.type===e&&t.device===this.device.features.device_id)))}this.requiredPermissions=t}savePermissions(e=!1){let t=(0,p.load)(p.PERMISSIONS_KEY,e);t&&Array.isArray(t)||(t=JSON.parse("[]"));let r=this.requiredPermissions.map(e=>({origin:u.default.getSettings("origin"),type:e,device:this.device.features.device_id})),i=!1;this.requiredPermissions.indexOf("read")>=0&&t.filter(e=>e.origin===u.default.getSettings("origin")&&"read"===e.type&&e.device===this.device.features.device_id).length<1&&(i=!0);const s=t.filter(e=>e.origin===u.default.getSettings("origin"));s.length>0&&(r=r.filter(e=>!s.find(t=>t.type===e.type&&t.device===e.device))),(0,p.save)(p.PERMISSIONS_KEY,t.concat(r),e),i&&this.postMessage((0,b.DeviceMessage)(l.CONNECT,this.device.toMessageObject()))}async checkFirmwareRange(e){if(this.skipFirmwareCheck)return null;const t=this.device;if(!t.features)return null;const r=t.features.major_version,i=this.firmwareRange[r];if("none"===t.firmwareStatus)return f.FIRMWARE_NOT_INSTALLED;if("0"===i.min)return f.FIRMWARE_NOT_SUPPORTED;if("required"===t.firmwareStatus||(0,c.default)(t.getVersion(),i.min)<0)return f.FIRMWARE_OLD;if("0"!==i.max&&(0,c.default)(t.getVersion(),i.max)>0){if(!e)return f.FIRMWARE_NOT_COMPATIBLE;{await this.getPopupPromise().promise;const e=this.createUiPromise(f.RECEIVE_CONFIRMATION,t);if(this.postMessage((0,b.UiMessage)(f.FIRMWARE_NOT_COMPATIBLE,t.toMessageObject())),!(await e.promise).payload)throw d.PERMISSIONS_NOT_GRANTED}}return null}getCustomMessages(){return null}__hash(e){const t=u.default.getSettings("origin"),r=`${e}#${this.device.features.device_id}#${t}`;return h.crypto.hash256(Buffer.from(r,"binary")).toString("hex")}dispose(){}}}],["trezor-connect","/lib/storage/index.js",function(e,t,r,i,s,n){"use strict";e.__esModule=!0,e.load=e.save=e.CONFIRMATION_KEY=e.PERMISSIONS_KEY=e.BROWSER_KEY=void 0;e.BROWSER_KEY="trezorconnect_browser";e.PERMISSIONS_KEY="trezorconnect_permissions";e.CONFIRMATION_KEY="trezorconnect_confirmations";const o={};e.save=((e,t,r=!1)=>{if(r)o[e]=JSON.stringify(t);else{try{return void(window.localStorage[e]=JSON.stringify(t))}catch(e){}try{window.document.cookie=encodeURIComponent(e)+"="+JSON.stringify(t)+";"}catch(e){}}});e.load=((e,t=!1)=>{let r;if(t)return(r=o[e])?JSON.parse(r):null;try{r=window.localStorage[e]}catch(e){}if(void 0===r)try{const t=window.document.cookie,i=t.indexOf(encodeURIComponent(e)+"=");if(-1!==i){const e=/^([^;]+)/.exec(t.slice(i));e&&(r=e[1])}}catch(e){}return r?JSON.parse(r):null})}],["trezor-connect","/lib/core/methods/index.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.default=e.find=void 0;o(__browser_require__(622,r));var a=o(__browser_require__(625,r)),h=o(__browser_require__(634,r)),c=o(__browser_require__(636,r)),u=o(__browser_require__(637,r)),f=o(__browser_require__(638,r)),l=o(__browser_require__(639,r)),d=o(__browser_require__(640,r)),p=o(__browser_require__(641,r)),b=o(__browser_require__(643,r)),g=o(__browser_require__(644,r)),m=o(__browser_require__(689,r)),_=o(__browser_require__(690,r)),w=o(__browser_require__(691,r)),y=o(__browser_require__(692,r)),v=o(__browser_require__(693,r)),E=o(__browser_require__(694,r)),S=o(__browser_require__(695,r)),I=o(__browser_require__(697,r)),k=o(__browser_require__(698,r)),A=o(__browser_require__(699,r)),O=o(__browser_require__(700,r)),x=o(__browser_require__(701,r)),R=o(__browser_require__(702,r)),M=o(__browser_require__(703,r)),P=o(__browser_require__(704,r)),B=o(__browser_require__(705,r)),N=o(__browser_require__(706,r)),T=o(__browser_require__(707,r)),C=o(__browser_require__(708,r)),q=o(__browser_require__(710,r)),j=o(__browser_require__(711,r)),D=o(__browser_require__(712,r)),U=o(__browser_require__(713,r)),L=o(__browser_require__(714,r)),z=o(__browser_require__(715,r)),F=o(__browser_require__(716,r)),H=o(__browser_require__(717,r)),V=o(__browser_require__(719,r)),K=o(__browser_require__(720,r)),W=o(__browser_require__(721,r)),G=o(__browser_require__(722,r)),Y=o(__browser_require__(724,r)),X=o(__browser_require__(725,r)),J=o(__browser_require__(726,r)),Q=o(__browser_require__(728,r)),Z=o(__browser_require__(729,r)),$=o(__browser_require__(731,r)),ee=o(__browser_require__(732,r)),te=o(__browser_require__(733,r)),re=o(__browser_require__(735,r)),ie=o(__browser_require__(736,r)),se=o(__browser_require__(737,r)),ne=o(__browser_require__(738,r)),oe=o(__browser_require__(739,r)),ae=o(__browser_require__(740,r)),he=o(__browser_require__(741,r)),ce=o(__browser_require__(743,r));const ue={blockchainDisconnect:a.default,blockchainEstimateFee:h.default,blockchainGetTransactions:c.default,blockchainSubscribe:u.default,blockchainUnsubscribe:f.default,cardanoGetAddress:l.default,cardanoGetPublicKey:d.default,cardanoSignTransaction:p.default,cipherKeyValue:b.default,composeTransaction:g.default,customMessage:m.default,debugLinkDecision:_.default,debugLinkGetState:w.default,ethereumGetAddress:y.default,ethereumGetPublicKey:v.default,ethereumSignMessage:E.default,ethereumSignTransaction:S.default,ethereumVerifyMessage:I.default,getAccountInfo:k.default,getAddress:A.default,getDeviceState:O.default,getFeatures:x.default,getPublicKey:R.default,getSettings:M.default,liskGetAddress:P.default,liskGetPublicKey:B.default,liskSignMessage:N.default,liskSignTransaction:C.default,liskVerifyMessage:T.default,loadDevice:q.default,pushTransaction:j.default,requestLogin:D.default,resetDevice:U.default,rippleGetAddress:L.default,rippleSignTransaction:z.default,nemGetAddress:F.default,nemSignTransaction:H.default,signMessage:V.default,signTransaction:K.default,stellarGetAddress:W.default,stellarSignTransaction:G.default,tezosGetAddress:Y.default,tezosGetPublicKey:X.default,tezosSignTransaction:J.default,eosGetPublicKey:Q.default,eosSignTransaction:Z.default,binanceGetPublicKey:$.default,binanceGetAddress:ee.default,binanceSignTransaction:te.default,verifyMessage:re.default,wipeDevice:ie.default,applyFlags:se.default,applySettings:ne.default,backupDevice:oe.default,changePin:ae.default,firmwareUpdate:he.default,recoveryDevice:ce.default},fe=e=>{if(!e.payload)throw new Error("Message payload not found");if(!e.payload.method||"string"!=typeof e.payload.method)throw new Error("Message method is not set");if(ue[e.payload.method])return new ue[e.payload.method](e);throw new Error(`Method ${e.payload.method} not found`)};e.find=fe;var le=fe;e.default=le}],["trezor-connect","/lib/core/methods/blockchain/BlockchainDisconnect.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var a=o(__browser_require__(622,r)),h=__browser_require__(626,r),c=__browser_require__(414,r),u=__browser_require__(627,r),f=__browser_require__(412,r);e.default=class extends a.default{constructor(e){super(e),this.requiredPermissions=[],this.info="",this.useDevice=!1,this.useUi=!1;const t=e.payload;(0,h.validateParams)(t,[{name:"coin",type:"string",obligatory:!0}]);let r=(0,f.getCoinInfo)(t.coin);if(r||(r=(0,f.getCoinInfo)(t.coin)),!r)throw c.NO_COIN_INFO;if(!r.blockchainLink)throw(0,c.backendNotSupported)(r.name);this.params={coinInfo:r}}async run(){const e=await(0,u.find)(this.params.coinInfo.name);return e&&e.disconnect(),{disconnected:!0}}}}],["trezor-connect","/lib/core/methods/helpers/paramsValidator.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.getFirmwareRange=e.validateCoinPath=e.validateParams=void 0;var a=o(__browser_require__(571,r)),h=o(__browser_require__(418,r)),c=__browser_require__(414,r),u=__browser_require__(413,r),f=o(__browser_require__(409,r));e.validateParams=((e,t)=>{t.forEach(t=>{if(Object.prototype.hasOwnProperty.call(e,t.name)){const r=e[t.name];if(t.type)if("array"===t.type){if(!Array.isArray(r))throw(0,c.invalidParameter)(`Parameter "${t.name}" has invalid type. "${t.type}" expected.`);if(!t.allowEmpty&&r.length<1)throw(0,c.invalidParameter)(`Parameter "${t.name}" is empty.`)}else if("amount"===t.type){if("string"!=typeof r)throw(0,c.invalidParameter)(`Parameter "${t.name}" has invalid type. "string" expected.`);try{if(new a.default(r).toFixed(0)!==r)throw new Error("")}catch(e){throw(0,c.invalidParameter)(`Parameter "${t.name}" has invalid value "${r}". Integer representation expected.`)}}else if("buffer"===t.type){if(void 0===r||"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r))throw(0,c.invalidParameter)(`Parameter "${t.name}" has invalid type. "buffer" expected.`)}else if(typeof r!==t.type)throw(0,c.invalidParameter)(`Parameter "${t.name}" has invalid type. "${t.type}" expected.`)}else if(t.obligatory)throw(0,c.invalidParameter)(`Parameter "${t.name}" is missing.`)})});e.validateCoinPath=((e,t)=>{if(e&&e.slip44!==(0,u.fromHardened)(t[1]))throw(0,c.invalidParameter)('Parameters "path" and "coin" do not match.')});e.getFirmwareRange=((e,t,r)=>{const i=JSON.parse(JSON.stringify(r));t&&(t.support&&"string"==typeof t.support.trezor1?(0,h.default)(t.support.trezor1,i[1].min)>0&&(i[1].min=t.support.trezor1):i[1].min="0",t.support&&"string"==typeof t.support.trezor2?(0,h.default)(t.support.trezor2,i[2].min)>0&&(i[2].min=t.support.trezor2):i[2].min="0");const s=t?t.type:null,n=t?t.shortcut.toLowerCase():null,{supportedFirmware:o}=f.default.getConfig(),a=o.find(e=>e.coinType===s||Array.isArray(e.coin)&&e.coin.includes(n)||"string"==typeof e.coin&&e.coin===n)||o.find(t=>!t.coinType&&!t.coin&&t.excludedMethods&&t.excludedMethods.includes(e));if(a){if(a.excludedMethods&&!a.excludedMethods.includes(e))return i;const{min:t,max:r}=a;t&&(("0"===i[1].min||(0,h.default)(i[1].min,t[0])<0)&&(i[1].min=t[0]),("0"===i[2].min||(0,h.default)(i[2].min,t[1])<0)&&(i[2].min=t[1])),r&&(("0"===i[1].max||(0,h.default)(i[1].max,r[0])<0)&&(i[1].max=r[0]),("0"===i[2].max||(0,h.default)(i[2].max,r[1])<0)&&(i[2].max=r[1]))}return i})}],["trezor-connect","/lib/backend/BlockchainLink.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.initBlockchain=e.find=e.default=void 0;var h=a(__browser_require__(384,r)),c=__browser_require__(427,r),u=a(__browser_require__(628,r)),f=__browser_require__(621,r),l=o(__browser_require__(390,r)),d=__browser_require__(620,r);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}c.Transaction.USE_STRING_VALUES=!0;const g=e=>{switch(e){case"blockbook":return d.BlockbookWorker;case"ripple":return d.RippleWorker;default:return null}};class m{constructor(e){(0,h.default)(this,"feeForBlock",[]),(0,h.default)(this,"feeTimestamp",0),this.coinInfo=e.coinInfo,this.postMessage=e.postMessage;const t=e.coinInfo.blockchainLink;if(!t)throw new Error("BlockchainLink settings not found in coins.json");const r=g(t.type);if(!r)throw new Error(`BlockchainLink worker not found ${t.type}`);this.link=new u.default({name:this.coinInfo.shortcut,worker:r,server:t.url,debug:!1})}onError(e){this.link.removeAllListeners(),this.postMessage((0,f.BlockchainMessage)(l.ERROR,{coin:this.coinInfo,error:e})),w(this)}async init(){this.link.on("connected",async()=>{const e=await this.link.getInfo();this.postMessage((0,f.BlockchainMessage)(l.CONNECT,b({coin:this.coinInfo},e)))}),this.link.on("disconnected",()=>{this.onError("Disconnected")}),this.link.on("error",e=>{this.onError(e.message)});try{await this.link.connect()}catch(e){throw this.onError(e.message),e}}async loadTransaction(e){const t=await this.link.getTransaction(e);return c.Transaction.fromHex(t.tx.hex,this.coinInfo.network)}async getTransactions(e){return Promise.all(e.map(e=>this.link.getTransaction(e)))}async getReferencedTransactions(e){return Promise.all(e.map(e=>this.loadTransaction(e)))}async getNetworkInfo(){return this.link.getInfo()}async getAccountInfo(e){return this.link.getAccountInfo(e)}async getAccountUtxo(e){return this.link.getAccountUtxo(e)}async estimateFee(e){const{blocks:t}=e;if(t){const r=Date.now(),i=r-this.feeTimestamp>12e5,s=t.filter(e=>"string"!=typeof this.feeForBlock);!i&&s.length;const n=await this.link.estimateFee(e);t.forEach((e,t)=>{this.feeForBlock[e]=n[t]}),this.feeTimestamp=r}return this.link.estimateFee(e)}async subscribe(e){return 0===this.link.listenerCount("block")&&this.link.on("block",e=>{this.postMessage((0,f.BlockchainMessage)(l.BLOCK,b({coin:this.coinInfo},e)))}),0===this.link.listenerCount("notification")&&this.link.on("notification",e=>{this.postMessage((0,f.BlockchainMessage)(l.NOTIFICATION,{coin:this.coinInfo,notification:e}))}),await this.link.subscribe({type:"block"}),this.link.subscribe({type:"accounts",accounts:e})}async unsubscribe(e){return e?this.link.unsubscribe({type:"accounts",accounts:e}):(this.link.removeAllListeners("block"),this.link.removeAllListeners("notification"),await this.link.unsubscribe({type:"block"}),this.link.unsubscribe({type:"notification"}))}async pushTransaction(e){return await this.link.pushTransaction(e)}async disconnect(){this.link.removeAllListeners(),this.link.disconnect(),this.onError("Disconnected")}}e.default=m;const _=[],w=e=>{const t=_.indexOf(e);t>=0&&_.splice(t,1)},y=e=>{for(let t=0;t<_.length;t++)if(_[t].coinInfo.name===e)return _[t];return null};e.find=y;e.initBlockchain=(async(e,t)=>{let r=y(e.name);if(!r){r=new m({coinInfo:e,postMessage:t});try{await r.init()}catch(e){throw w(r),e}_.push(r)}return r})}],["@trezor/blockchain-link","/lib/index.js",function(e,t,r,i,s,n){"use strict";var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),h=this&&this.__assign||function(){return(h=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},c=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(s,n){function o(e){try{h(i.next(e))}catch(e){n(e)}}function a(e){try{h(i.throw(e))}catch(e){n(e)}}function h(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}h((i=i.apply(e,t||[])).next())})},u=this&&this.__generator||function(e,t){var r,i,s,n,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function a(n){return function(a){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(s=2&n[0]?i.return:n[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,n[1])).done)return s;switch(i=0,s&&(n=[2&n[0],s.value]),n[0]){case 0:case 1:s=n;break;case 4:return o.label++,{value:n[1],done:!1};case 5:o.label++,i=n[1],n=[0];continue;case 7:n=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){o=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){o.label=n[1];break}if(6===n[0]&&o.label<s[1]){o.label=s[1],s=n;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(n);break}s[2]&&o.ops.pop(),o.trys.pop();continue}n=t.call(e,o)}catch(e){n=[6,e],i=0}finally{r=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,a])}}};Object.defineProperty(e,"__esModule",{value:!0});var f=__browser_require__(19,r),l=__browser_require__(629,r),d=__browser_require__(630,r),p=__browser_require__(633,r),b=function(e){return c(void 0,void 0,void 0,function(){var t,r,i;return u(this,function(s){if(t=p.create(-1),"object"!=typeof(r=function(e){if("function"==typeof e)return e();if("string"==typeof e&&"undefined"!=typeof Worker)return new Worker(e);throw new l.CustomError("worker_not_found")}(e.worker))||"function"!=typeof r.postMessage)throw new l.CustomError("worker_invalid");return i=setTimeout(function(){r.onmessage=null,r.onerror=null,t.reject(new l.CustomError("worker_timeout"))},e.timeout||3e4),r.onmessage=function(s){s.data.type===d.MESSAGES.HANDSHAKE&&(clearTimeout(i),delete e.worker,r.postMessage({type:d.MESSAGES.HANDSHAKE,settings:e}),t.resolve(r))},r.onerror=function(s){clearTimeout(i),r.onmessage=null,r.onerror=null;try{r.terminate()}catch(s){}delete e.worker;var n=s.message?"Worker runtime error: Line "+s.lineno+" in "+s.filename+": "+s.message:"Worker handshake error";t.reject(new l.CustomError("worker_runtime",n))},[2,t.promise]})})},g=function(e){function t(t){var r=e.call(this)||this;return r.messageId=0,r.deferred=[],r.onMessage=function(e){if(e.data){var t=e.data;if(-1!==t.id){var i=r.deferred.find(function(e){return e.id===t.id});i&&(t.type===d.RESPONSES.ERROR?i.reject(new l.CustomError(t.payload.code,t.payload.message)):i.resolve(t.payload),r.deferred=r.deferred.filter(function(e){return e!==i}))}else r.onEvent(t)}},r.onEvent=function(e){e.type===d.RESPONSES.CONNECTED&&r.emit("connected"),e.type===d.RESPONSES.DISCONNECTED&&r.emit("disconnected"),e.type===d.RESPONSES.NOTIFICATION&&r.emit(e.payload.type,e.payload.payload)},r.onError=function(e){var t=e.message?"Worker runtime error: Line "+e.lineno+" in "+e.filename+": "+e.message:"Worker handshake error",i=new l.CustomError("worker_runtime",t);r.deferred.forEach(function(e){e.reject(i)}),r.deferred=[]},r.settings=t,r}return a(t,e),t.prototype.getWorker=function(){return c(this,void 0,void 0,function(){var e;return u(this,function(t){switch(t.label){case 0:return this.worker?[3,2]:(e=this,[4,b(this.settings)]);case 1:e.worker=t.sent(),this.worker.onmessage=this.onMessage.bind(this),this.worker.onerror=this.onError.bind(this),t.label=2;case 2:return[2,this.worker]}})})},t.prototype.sendMessage=function(e){return c(this,void 0,void 0,function(){var t,r;return u(this,function(i){switch(i.label){case 0:return[4,this.getWorker()];case 1:return t=i.sent(),r=p.create(this.messageId),this.deferred.push(r),t.postMessage(h({id:this.messageId},e)),this.messageId++,[2,r.promise]}})})},t.prototype.connect=function(){return c(this,void 0,void 0,function(){return u(this,function(e){return[2,this.sendMessage({type:d.MESSAGES.CONNECT})]})})},t.prototype.getInfo=function(){return c(this,void 0,void 0,function(){return u(this,function(e){return[2,this.sendMessage({type:d.MESSAGES.GET_INFO})]})})},t.prototype.getBlockHash=function(e){return c(this,void 0,void 0,function(){return u(this,function(t){return[2,this.sendMessage({type:d.MESSAGES.GET_BLOCK_HASH,payload:e})]})})},t.prototype.getAccountInfo=function(e){return c(this,void 0,void 0,function(){return u(this,function(t){return[2,this.sendMessage({type:d.MESSAGES.GET_ACCOUNT_INFO,payload:e})]})})},t.prototype.getAccountUtxo=function(e){return c(this,void 0,void 0,function(){return u(this,function(t){return[2,this.sendMessage({type:d.MESSAGES.GET_ACCOUNT_UTXO,payload:e})]})})},t.prototype.getTransaction=function(e){return c(this,void 0,void 0,function(){return u(this,function(t){return[2,this.sendMessage({type:d.MESSAGES.GET_TRANSACTION,payload:e})]})})},t.prototype.estimateFee=function(e){return c(this,void 0,void 0,function(){return u(this,function(t){return[2,this.sendMessage({type:d.MESSAGES.ESTIMATE_FEE,payload:e})]})})},t.prototype.subscribe=function(e){return c(this,void 0,void 0,function(){return u(this,function(t){return[2,this.sendMessage({type:d.MESSAGES.SUBSCRIBE,payload:e})]})})},t.prototype.unsubscribe=function(e){return c(this,void 0,void 0,function(){return u(this,function(t){return[2,this.sendMessage({type:d.MESSAGES.UNSUBSCRIBE,payload:e})]})})},t.prototype.pushTransaction=function(e){return c(this,void 0,void 0,function(){return u(this,function(t){return[2,this.sendMessage({type:d.MESSAGES.PUSH_TRANSACTION,payload:e})]})})},t.prototype.disconnect=function(){return c(this,void 0,void 0,function(){return u(this,function(e){return this.worker?[2,this.sendMessage({type:d.MESSAGES.DISCONNECT})]:[2,!0]})})},t.prototype.dispose=function(){this.removeAllListeners();var e=this.worker;e&&(e.terminate(),delete this.worker)},t}(f.EventEmitter);e.default=g}],["@trezor/blockchain-link","/lib/constants/errors.js",function(e,t,r,i,s,n){"use strict";var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var h="blockchain_link/",c={worker_not_found:"Worker not found",worker_invalid:"Invalid worker object",worker_timeout:"Worker timeout",worker_unknown_request:"Unknown message type:",worker_runtime:undefined,invalid_param:"Invalid parameter:",websocket_not_initialized:"WebSocket not initialized",websocket_no_url:"Cannot connect because no server was specified",websocket_timeout:"Websocket timeout",websocket_error_message:undefined,websocket_runtime_error:undefined},u=function(e){function t(t,r){void 0===r&&(r="");var i=e.call(this,r)||this;if(i.message="",i.message=r,"string"==typeof t){var s=0===t.indexOf(h)?t.substring(h.length,t.length):t;i.code=""+h+s;var n=c[s];"string"==typeof n&&(""===i.message?i.message=n:0===r.indexOf("+")&&(i.message=n+" "+r.substr(1,r.length)))}return"string"==typeof i.message&&""!==i.message||(i.message="Message not set"),i}return a(t,e),t}(Error);e.CustomError=u}],["@trezor/blockchain-link","/lib/constants/index.js",function(e,t,r,i,s,n){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(e,"__esModule",{value:!0});var a=o(__browser_require__(631,r));e.MESSAGES=a;var h=o(__browser_require__(632,r));e.RESPONSES=h,e.NETWORKS={RIPPLE:"ripple",BLOCKBOOK:"blockbook"}}],["@trezor/blockchain-link","/lib/constants/messages.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HANDSHAKE="m_handshake",e.INIT="m_init",e.CONNECT="m_connect",e.DISCONNECT="m_disconnect",e.GET_INFO="m_get_info",e.GET_BLOCK_HASH="m_get_block_hash",e.GET_ACCOUNT_INFO="m_get_account_info",e.GET_ACCOUNT_UTXO="m_get_account_utxo",e.GET_TRANSACTION="m_get_transaction",e.ESTIMATE_FEE="m_estimate_fee",e.SUBSCRIBE="m_subscribe",e.UNSUBSCRIBE="m_unsubscribe",e.PUSH_TRANSACTION="m_push_tx"}],["@trezor/blockchain-link","/lib/constants/responses.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ERROR="r_error",e.CONNECT="r_connect",e.GET_INFO="r_info",e.GET_BLOCK_HASH="r_get_block_hash",e.GET_ACCOUNT_INFO="r_account_info",e.GET_ACCOUNT_UTXO="r_get_account_utxo",e.GET_TRANSACTION="r_get_transaction",e.ESTIMATE_FEE="r_estimate_fee",e.SUBSCRIBE="r_subscribe",e.UNSUBSCRIBE="r_unsubscribe",e.PUSH_TRANSACTION="r_push_tx",e.CONNECTED="r_connected",e.DISCONNECTED="r_disconnected",e.NOTIFICATION="r_notification"}],["@trezor/blockchain-link","/lib/utils/deferred.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(e){var t=function(){},r=function(){},i=new Promise(function(e,i){t=e,r=i});return{id:e,resolve:t,reject:r,promise:i}}}],["trezor-connect","/lib/core/methods/blockchain/BlockchainEstimateFee.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var a=o(__browser_require__(622,r)),h=__browser_require__(626,r),c=__browser_require__(414,r),u=o(__browser_require__(635,r)),f=__browser_require__(627,r),l=__browser_require__(412,r);e.default=class extends a.default{constructor(e){super(e),this.useDevice=!1,this.useUi=!1;const t=e.payload;(0,h.validateParams)(t,[{name:"coin",type:"string",obligatory:!0},{name:"request",type:"object"}]);const r=t.request;r&&((0,h.validateParams)(r,[{name:"blocks",type:"array"},{name:"specific",type:"object"},{name:"feeLevels",type:"string"}]),r.specific&&(0,h.validateParams)(r.specific,[{name:"conservative",type:"boolean"},{name:"data",type:"string"},{name:"from",type:"string"},{name:"to",type:"string"},{name:"txsize",type:"number"}]));const i=(0,l.getCoinInfo)(t.coin);if(!i)throw c.NO_COIN_INFO;if(!i.blockchainLink)throw(0,c.backendNotSupported)(i.name);this.params={coinInfo:i,request:r}}async run(){const{coinInfo:e,request:t}=this.params,r={blockTime:e.blocktime,minFee:e.minFee,maxFee:e.maxFee,levels:[]};if(t&&t.feeLevels){const i=new u.default(e);if("smart"===t.feeLevels){const t=await(0,f.initBlockchain)(e,this.postMessage);await i.load(t)}r.levels=i.levels}else{const i=await(0,f.initBlockchain)(e,this.postMessage);r.levels=await i.estimateFee(t||{})}return r}}}],["trezor-connect","/lib/core/methods/tx/Fees.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var a=o(__browser_require__(384,r)),h=o(__browser_require__(571,r));o(__browser_require__(627,r));function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const f={btc:{high:1,normal:6,economy:36,low:144},bch:{high:1,normal:5,economy:10,low:10},btg:{high:1,normal:5,economy:10,low:10},dgb:{high:1,normal:5,economy:10,low:10}},l=(e,t)=>f[e]&&f[e][t]?f[e][t]:1,d=e=>{const t=new h.default(e);if(!t.isNaN()&&!t.lte("0"))return t.div(1e3).integerValue(h.default.ROUND_HALF_CEIL).toString()},p=(e,t,r)=>{const i=[];for(let s=e+t;s<=e+r;s+=t)i.push(s);return i},b=e=>{const t=[];return e.forEach(e=>{"string"==typeof e&&t.indexOf(e)<0&&t.push(e)}),t[t.length-1]},g=(e,t)=>{const r=t.length,i=t[e];if("string"==typeof i)return i;const s=t.slice().reverse().find(e=>"string"==typeof e);if(!s)return;if(e>=t.indexOf(s))return s;let n=e;for(;"string"!=typeof t[n]&&n<r;)n++;return t[n]},m=(e,t)=>{const r=new h.default(e),i=t.find(e=>"string"==typeof e&&r.gte(e));return i?t.indexOf(i):-1};e.default=class{constructor(e){(0,a.default)(this,"blocks",[]),this.coinInfo=e;const t=e.shortcut.toLowerCase();"ethereum"!==e.type?this.levels=Object.keys(e.defaultFees).sort((t,r)=>e.defaultFees[r]-e.defaultFees[t]).map(r=>{const i=r.toLowerCase(),s=l(t,i);return{label:i,feePerUnit:e.defaultFees[r].toString(),blocks:s}}):this.levels=e.defaultFees.map(e=>u({},e,{blocks:1}))}async loadMisc(e){try{const t=await e.estimateFee({blocks:[1]});this.levels[0]=u({},this.levels[0],{},t[0])}catch(e){}return this.levels}async load(e){if("bitcoin"!==this.coinInfo.type)return this.loadMisc(e);let t=p(0,1,10);this.levels.length>1&&(t=this.levels.map(e=>e.blocks).reduce((e,t)=>{if(0===e.length)return e.concat([t]);const r=e[e.length-1],i=t-r,s=p(r,i<=30?1:6,i);return e.concat(s)},[]));try{if((await e.estimateFee({blocks:t})).forEach((e,r)=>{this.blocks[t[r]]=d(e.feePerUnit)}),1===this.levels.length){const e=b(this.blocks);"string"==typeof e&&(this.levels[0].blocks=this.blocks.indexOf(e),this.levels[0].feePerUnit=e)}else this.levels.forEach(e=>{const t=g(e.blocks,this.blocks);"string"==typeof t&&(e.blocks=this.blocks.indexOf(t),e.feePerUnit=t)})}catch(e){}return this.levels}updateCustomFee(e){this.levels=this.levels.filter(e=>"custom"!==e.label);const t=m(e,this.blocks);this.levels.push({label:"custom",feePerUnit:e,blocks:t})}}}],["trezor-connect","/lib/core/methods/blockchain/BlockchainGetTransactions.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var a=o(__browser_require__(622,r)),h=__browser_require__(626,r),c=__browser_require__(414,r),u=__browser_require__(627,r),f=__browser_require__(412,r);e.default=class extends a.default{constructor(e){super(e),this.useDevice=!1,this.useUi=!1;const t=e.payload;(0,h.validateParams)(t,[{name:"txs",type:"array",obligatory:!0},{name:"coin",type:"string",obligatory:!0}]);const r=(0,f.getCoinInfo)(t.coin);if(!r)throw c.NO_COIN_INFO;if(!r.blockchainLink)throw(0,c.backendNotSupported)(r.name);this.params={txs:t.txs,coinInfo:r}}async run(){return(await(0,u.initBlockchain)(this.params.coinInfo,this.postMessage)).getTransactions(this.params.txs)}}}],["trezor-connect","/lib/core/methods/blockchain/BlockchainSubscribe.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var a=o(__browser_require__(622,r)),h=__browser_require__(626,r),c=__browser_require__(414,r),u=__browser_require__(627,r),f=__browser_require__(412,r);e.default=class extends a.default{constructor(e){super(e),this.useDevice=!1,this.useUi=!1;const t=e.payload;(0,h.validateParams)(t,[{name:"accounts",type:"array",obligatory:!0},{name:"coin",type:"string",obligatory:!0}]),t.accounts.forEach(e=>{(0,h.validateParams)(e,[{name:"descriptor",type:"string",obligatory:!0}])});const r=(0,f.getCoinInfo)(t.coin);if(!r)throw c.NO_COIN_INFO;if(!r.blockchainLink)throw(0,c.backendNotSupported)(r.name);this.params={accounts:t.accounts,coinInfo:r}}async run(){return(await(0,u.initBlockchain)(this.params.coinInfo,this.postMessage)).subscribe(this.params.accounts)}}}],["trezor-connect","/lib/core/methods/blockchain/BlockchainUnsubscribe.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var a=o(__browser_require__(622,r)),h=__browser_require__(626,r),c=__browser_require__(414,r),u=__browser_require__(627,r),f=__browser_require__(412,r);e.default=class extends a.default{constructor(e){super(e),this.useDevice=!1,this.useUi=!1;const t=e.payload;(0,h.validateParams)(t,[{name:"accounts",type:"array"},{name:"coin",type:"string",obligatory:!0}]),t.accounts&&t.accounts.forEach(e=>{(0,h.validateParams)(e,[{name:"descriptor",type:"string",obligatory:!0}])});const r=(0,f.getCoinInfo)(t.coin);if(!r)throw c.NO_COIN_INFO;if(!r.blockchainLink)throw(0,c.backendNotSupported)(r.name);this.params={accounts:t.accounts,coinInfo:r}}async run(){return(await(0,u.initBlockchain)(this.params.coinInfo,this.postMessage)).unsubscribe(this.params.accounts)}}}],["trezor-connect","/lib/core/methods/CardanoGetAddress.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(384,r)),c=a(__browser_require__(622,r)),u=__browser_require__(626,r),f=__browser_require__(412,r),l=__browser_require__(413,r),d=o(__browser_require__(388,r)),p=__browser_require__(621,r);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}e.default=class extends c.default{constructor(e){super(e),(0,h.default)(this,"confirmed",!1),(0,h.default)(this,"progress",0),this.requiredPermissions=["read"],this.firmwareRange=(0,u.getFirmwareRange)(this.name,(0,f.getMiscNetwork)("Cardano"),this.firmwareRange),this.hasBundle=Object.prototype.hasOwnProperty.call(e.payload,"bundle");const t=this.hasBundle?e.payload:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e.payload,{bundle:[e.payload]});(0,u.validateParams)(t,[{name:"bundle",type:"array"},{name:"useEventListener",type:"boolean"}]);const r=[];t.bundle.forEach(e=>{(0,u.validateParams)(e,[{name:"path",obligatory:!0},{name:"address",type:"string"},{name:"showOnTrezor",type:"boolean"}]);const t=(0,l.validatePath)(e.path,3);let i=!0;Object.prototype.hasOwnProperty.call(e,"showOnTrezor")&&(i=e.showOnTrezor),r.push({path:t,address:e.address,showOnTrezor:i})});const i=t.useEventListener&&1===r.length&&"string"==typeof r[0].address&&r[0].showOnTrezor;this.confirmed=i,this.useUi=!i,this.params=r,1===r.length?this.info=`Export Cardano address for account #${(0,l.fromHardened)(this.params[0].path[2])+1}`:this.info="Export multiple Cardano addresses"}getButtonRequestData(e){return"ButtonRequest_Address"===e?{type:"address",serializedPath:(0,l.getSerializedPath)(this.params[this.progress].path),address:this.params[this.progress].address||"not-set"}:null}async confirmation(){if(this.confirmed)return!0;await this.getPopupPromise().promise;const e=this.createUiPromise(d.RECEIVE_CONFIRMATION,this.device),t=this.info;this.postMessage((0,p.UiMessage)(d.REQUEST_CONFIRMATION,{view:"export-address",label:t}));const r=await e.promise;return this.confirmed=r.payload,this.confirmed}async noBackupConfirmation(){await this.getPopupPromise().promise;const e=this.createUiPromise(d.RECEIVE_CONFIRMATION,this.device);return this.postMessage((0,p.UiMessage)(d.REQUEST_CONFIRMATION,{view:"no-backup"})),(await e.promise).payload}async run(){const e=[];for(let t=0;t<this.params.length;t++){const r=this.params[t];if(r.showOnTrezor){const e=await this.device.getCommands().cardanoGetAddress(r.path,!1);if("string"==typeof r.address){if(r.address!==e.address)throw new Error("Addresses do not match")}else r.address=e.address}const i=await this.device.getCommands().cardanoGetAddress(r.path,r.showOnTrezor);e.push({path:r.path,serializedPath:(0,l.getSerializedPath)(r.path),address:i.address}),this.hasBundle&&this.postMessage((0,p.UiMessage)(d.BUNDLE_PROGRESS,{progress:t,response:i})),this.progress++}return this.hasBundle?e:e[0]}}}],["trezor-connect","/lib/core/methods/CardanoGetPublicKey.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(384,r)),c=a(__browser_require__(622,r)),u=__browser_require__(626,r),f=__browser_require__(412,r),l=__browser_require__(413,r),d=o(__browser_require__(388,r)),p=__browser_require__(621,r);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}e.default=class extends c.default{constructor(e){super(e),(0,h.default)(this,"confirmed",!1),this.requiredPermissions=["read"],this.firmwareRange=(0,u.getFirmwareRange)(this.name,(0,f.getMiscNetwork)("Cardano"),this.firmwareRange),this.info="Export Cardano public key",this.hasBundle=Object.prototype.hasOwnProperty.call(e.payload,"bundle");const t=this.hasBundle?e.payload:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e.payload,{bundle:[e.payload]});(0,u.validateParams)(t,[{name:"bundle",type:"array"}]);const r=[];t.bundle.forEach(e=>{(0,u.validateParams)(e,[{name:"path",obligatory:!0},{name:"showOnTrezor",type:"boolean"}]);const t=(0,l.validatePath)(e.path,3);let i=!1;Object.prototype.hasOwnProperty.call(e,"showOnTrezor")&&(i=e.showOnTrezor),r.push({path:t,showOnTrezor:i})}),this.params=r}async confirmation(){if(this.confirmed)return!0;await this.getPopupPromise().promise;const e=this.createUiPromise(d.RECEIVE_CONFIRMATION,this.device);let t;t=this.params.length>1?"Export multiple Cardano public keys":`Export Cardano public key for account #${(0,l.fromHardened)(this.params[0].path[2])+1}`,this.postMessage((0,p.UiMessage)(d.REQUEST_CONFIRMATION,{view:"export-xpub",label:t}));const r=await e.promise;return this.confirmed=r.payload,this.confirmed}async run(){const e=[];for(let t=0;t<this.params.length;t++){const r=this.params[t],i=await this.device.getCommands().cardanoGetPublicKey(r.path,r.showOnTrezor);e.push({path:r.path,serializedPath:(0,l.getSerializedPath)(r.path),publicKey:i.xpub,node:i.node}),this.hasBundle&&this.postMessage((0,p.UiMessage)(d.BUNDLE_PROGRESS,{progress:t,response:i}))}return this.hasBundle?e:e[0]}}}],["trezor-connect","/lib/core/methods/CardanoSignTransaction.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(622,r)),c=__browser_require__(626,r),u=__browser_require__(412,r),f=__browser_require__(413,r),l=o(__browser_require__(642,r));e.default=class extends h.default{constructor(e){super(e),this.requiredPermissions=["read","write"],this.firmwareRange=(0,c.getFirmwareRange)(this.name,(0,u.getMiscNetwork)("Cardano"),this.firmwareRange),this.info="Sign Cardano transaction";const t=e.payload;(0,c.validateParams)(t,[{name:"inputs",type:"array",obligatory:!0},{name:"outputs",type:"array",obligatory:!0},{name:"transactions",type:"array",obligatory:!0},{name:"protocol_magic",type:"number",obligatory:!0}]);const r=t.inputs.map(e=>((0,c.validateParams)(e,[{name:"path",obligatory:!0},{name:"prev_hash",type:"string",obligatory:!0},{name:"prev_index",type:"number",obligatory:!0},{name:"type",type:"number",obligatory:!0}]),{address_n:(0,f.validatePath)(e.path,5),prev_hash:e.prev_hash,prev_index:e.prev_index,type:e.type})),i=t.outputs.map(e=>((0,c.validateParams)(e,[{name:"address",type:"string"},{name:"amount",type:"amount",obligatory:!0}]),e.path?{address_n:(0,f.validatePath)(e.path,5),amount:e.amount}:{address:e.address,amount:e.amount}));this.params={inputs:r,outputs:i,transactions:t.transactions,protocol_magic:t.protocol_magic}}async run(){const e=await l.cardanoSignTx(this.device.getCommands().typedCall.bind(this.device.getCommands()),this.params.inputs,this.params.outputs,this.params.transactions,this.params.protocol_magic);return{hash:e.tx_hash,body:e.tx_body}}}}],["trezor-connect","/lib/core/methods/helpers/cardanoSignTx.js",function(e,t,r,i,s,n){"use strict";e.__esModule=!0,e.cardanoSignTx=void 0;const o=async(e,t,r)=>{const i=r[t.tx_index];if(t.tx_index<r.length-1){const t=await e("CardanoTxAck","CardanoTxRequest",{transaction:i});return o(e,t.message,r)}return(await e("CardanoTxAck","CardanoSignedTx",{transaction:i})).message};e.cardanoSignTx=(async(e,t,r,i,s)=>{const n=await e("CardanoSignTx","CardanoTxRequest",{inputs:t,outputs:r,transactions_count:i.length,protocol_magic:s});return await o(e,n.message,i)})}],["trezor-connect","/lib/core/methods/CipherKeyValue.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(384,r)),c=o(__browser_require__(388,r)),u=__browser_require__(621,r),f=a(__browser_require__(622,r)),l=__browser_require__(626,r),d=__browser_require__(413,r);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}e.default=class extends f.default{constructor(e){super(e),(0,h.default)(this,"confirmed",!1),this.requiredPermissions=["read","write"],this.firmwareRange=(0,l.getFirmwareRange)(this.name,null,this.firmwareRange),this.info="Cypher key value",this.useEmptyPassphrase=!0,this.hasBundle=Object.prototype.hasOwnProperty.call(e.payload,"bundle");const t=this.hasBundle?e.payload:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e.payload,{bundle:[e.payload]});(0,l.validateParams)(t,[{name:"bundle",type:"array"}]);const r=[];t.bundle.forEach(e=>{(0,l.validateParams)(e,[{name:"path",obligatory:!0},{name:"key",type:"string"},{name:"value",type:"string"},{name:"encrypt",type:"boolean"},{name:"askOnEncrypt",type:"boolean"},{name:"askOnDecrypt",type:"boolean"},{name:"iv",type:"string"}]);const t=(0,d.validatePath)(e.path);r.push({path:t,key:e.key,value:e.value,encrypt:e.encrypt,askOnEncrypt:e.askOnEncrypt,askOnDecrypt:e.askOnDecrypt,iv:e.iv})}),this.params=r}async run(){const e=[];for(let t=0;t<this.params.length;t++){const r=this.params[t],i=await this.device.getCommands().cipherKeyValue(r.path,r.key,r.value,r.encrypt,r.askOnEncrypt,r.askOnDecrypt,r.iv);e.push(i),this.hasBundle&&this.postMessage((0,u.UiMessage)(c.BUNDLE_PROGRESS,{progress:t,response:i}))}return this.hasBundle?e:e[0]}}}],["trezor-connect","/lib/core/methods/ComposeTransaction.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(384,r)),c=a(__browser_require__(571,r)),u=a(__browser_require__(622,r)),f=a(__browser_require__(645,r)),l=__browser_require__(626,r),d=__browser_require__(413,r),p=__browser_require__(421,r),b=o(__browser_require__(388,r)),g=__browser_require__(412,r),m=__browser_require__(570,r),_=__browser_require__(414,r),w=__browser_require__(627,r),y=a(__browser_require__(646,r)),v=__browser_require__(680,r),E=a(__browser_require__(687,r)),S=a(__browser_require__(688,r)),I=__browser_require__(621,r);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}e.default=class extends u.default{constructor(e){super(e),this.requiredPermissions=["read","write"];const t=e.payload;(0,l.validateParams)(t,[{name:"outputs",type:"array",obligatory:!0,allowEmpty:!0},{name:"coin",type:"string",obligatory:!0},{name:"push",type:"boolean"},{name:"account",type:"object"},{name:"feeLevels",type:"array"}]);const r=(0,g.getBitcoinNetwork)(t.coin);if(!r)throw _.NO_COIN_INFO;if(!r.blockchainLink)throw(0,_.backendNotSupported)(r.name);this.firmwareRange=(0,l.getFirmwareRange)(this.name,r,this.firmwareRange);const i=[];let s=new c.default(0);t.outputs.forEach(e=>{const t=(0,v.validateHDOutput)(e,r);"string"==typeof t.amount&&(s=s.plus(t.amount)),i.push(t)});const n=i.find(e=>"send-max"===e.type)!==undefined;if(n&&i.length>1)throw new Error('Only one output allowed when using "send-max" option.');this.info=n?"Send maximum amount":`Send ${(0,m.formatAmount)(s.toString(),r)}`,this.useDevice=this.useUi=!t.account&&!t.feeLevels,this.params={outputs:i,coinInfo:r,account:t.account,feeLevels:t.feeLevels,push:"boolean"==typeof t.push&&t.push}}async precompose(e,t){const{coinInfo:r,outputs:i}=this.params,s=new y.default({account:{type:"normal",label:"normal",descriptor:"normal",address_n:(0,d.validatePath)(e.path),addresses:e.addresses},utxo:e.utxo,coinInfo:r,outputs:i}),n=await(0,w.initBlockchain)(this.params.coinInfo,this.postMessage);return await s.init(n),t.map(e=>{s.composeCustomFee(e.feePerUnit);const t=s.composed.custom;if("final"===t.type){const e=t.transaction.inputs.map(e=>(0,v.inputToTrezor)(e,0)),i=t.transaction.outputs.sorted.map(e=>(0,v.outputToTrezor)(e,r));return{type:"final",max:t.max,totalSpent:t.totalSpent,fee:t.fee,feePerByte:t.feePerByte,bytes:t.bytes,transaction:{inputs:e,outputs:i}}}return t})}async run(){if(this.params.account&&this.params.feeLevels)return this.precompose(this.params.account,this.params.feeLevels);const{account:e,utxo:t}=await this.selectAccount(),r=await this.selectFee(e,t);if(!this.discovery)throw new Error("ComposeTransaction selectFee response received after dispose");return"string"==typeof r?this.run():r}async selectAccount(){const{coinInfo:e}=this.params,t=await(0,w.initBlockchain)(e,this.postMessage),r=this.createUiPromise(b.RECEIVE_ACCOUNT,this.device);if(this.discovery&&this.discovery.completed){const{discovery:i}=this;this.postMessage((0,I.UiMessage)(b.SELECT_ACCOUNT,{type:"end",coinInfo:e,accountTypes:i.types.map(e=>e.type),accounts:i.accounts}));const s=await r.promise,n=i.accounts[s.payload];return{account:n,utxo:await t.getAccountUtxo(n.descriptor)}}const i=this.discovery||new f.default({blockchain:t,commands:this.device.getCommands()});this.discovery=i,i.on("progress",t=>{this.postMessage((0,I.UiMessage)(b.SELECT_ACCOUNT,{type:"progress",coinInfo:e,accounts:t}))}),i.on("complete",()=>{this.postMessage((0,I.UiMessage)(b.SELECT_ACCOUNT,{type:"end",coinInfo:e}))}),i.start("tokens").catch(e=>{r.reject(e)}),this.postMessage((0,I.UiMessage)(b.SELECT_ACCOUNT,{type:"start",accountTypes:i.types.map(e=>e.type),coinInfo:e}));const s=await r.promise;i.removeAllListeners(),i.stop(),i.completed||await(0,p.resolveAfter)(501);const n=i.accounts[s.payload];return this.params.coinInfo=(0,g.fixCoinInfoNetwork)(this.params.coinInfo,n.address_n),{account:n,utxo:await t.getAccountUtxo(n.descriptor)}}async selectFee(e,t){const{coinInfo:r,outputs:i}=this.params,s=await(0,w.initBlockchain)(r,this.postMessage),n=new y.default({account:e,utxo:t,coinInfo:r,outputs:i});return await n.init(s),n.composeAllFeeLevels()?(this.postMessage((0,I.UiMessage)(b.SELECT_FEE,{feeLevels:n.getFeeLevelList(),coinInfo:this.params.coinInfo})),await this._selectFeeUiResponse(n)):(this.postMessage((0,I.UiMessage)(b.INSUFFICIENT_FUNDS)),await(0,p.resolveAfter)(2e3,null),"change-account")}async _selectFeeUiResponse(e){const t=await this.createUiPromise(b.RECEIVE_FEE,this.device).promise;switch(t.payload.type){case"compose-custom":return e.composeCustomFee(t.payload.value),this.postMessage((0,I.UiMessage)(b.UPDATE_CUSTOM_FEE,{feeLevels:e.getFeeLevelList(),coinInfo:this.params.coinInfo})),await this._selectFeeUiResponse(e);case"send":return await this._sign(e.composed[t.payload.value]);default:return"change-account"}}async _sign(e){if("final"!==e.type)throw new Error("Trying to sign unfinished tx");const{coinInfo:t}=this.params;let r=[];const i=(0,v.getReferencedTransactions)(e.transaction.inputs);if(i.length>0){const e=await(0,w.initBlockchain)(t,this.postMessage),s=await e.getReferencedTransactions(i);r=(0,v.transformReferencedTransactions)(s)}const s=t.hasTimestamp?Math.round((new Date).getTime()/1e3):undefined,n=e.transaction.inputs.map(e=>(0,v.inputToTrezor)(e,0)),o=e.transaction.outputs.sorted.map(e=>(0,v.outputToTrezor)(e,t)),a=await(0,E.default)(this.device.getCommands().typedCall.bind(this.device.getCommands()),n,o,r,{timestamp:s},t);if(await(0,S.default)(this.device.getCommands().getHDNode.bind(this.device.getCommands()),n,o,a.serializedTx,t),this.params.push){const e=await(0,w.initBlockchain)(t,this.postMessage);return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},a,{txid:await e.pushTransaction(a.serializedTx)})}return a}dispose(){const{discovery:e}=this;e&&(e.stop(),e.removeAllListeners(),this.discovery=undefined)}}}],["trezor-connect","/lib/core/methods/helpers/Discovery.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var a=o(__browser_require__(384,r)),h=o(__browser_require__(19,r)),c=(o(__browser_require__(627,r)),o(__browser_require__(423,r)),__browser_require__(562,r)),u=__browser_require__(570,r);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}e.default=class extends h.default{constructor(e){super(),(0,a.default)(this,"types",[]),this.accounts=[],this.index=0,this.typeIndex=0,this.interrupted=!1,this.completed=!1,this.blockchain=e.blockchain,this.commands=e.commands,this.coinInfo=e.blockchain.coinInfo;const{coinInfo:t}=this;if("bitcoin"===t.type){const e=(e,r)=>(0,c.getAccountAddressN)(t,r,{purpose:e});t.xPubMagicSegwitNative&&this.types.push({type:"normal",getPath:e.bind(this,84)}),t.xPubMagicSegwit&&this.types.push({type:this.types.length>0?"segwit":"normal",getPath:e.bind(this,49)}),this.types.push({type:this.types.length>0?"legacy":"normal",getPath:e.bind(this,44)})}else this.types.push({type:"normal",getPath:c.getAccountAddressN.bind(this,t)})}async start(e){for(this.interrupted=!1;!this.completed&&!this.interrupted;){const t=this.types[this.typeIndex],r=`Account #${this.index+1}`,i=this.index>=10,s=t.getPath(this.index),n=await this.commands.getAccountDescriptor(this.coinInfo,s);if(!n)throw new Error("Discovery descriptor not found");if(this.interrupted)return;const o=l({},n,{type:t.type,label:r});this.accounts=this.accounts.filter(e=>e.descriptor!==o.descriptor),i||(this.accounts.push(o),this.emit("progress",this.accounts));const a=await this.blockchain.getAccountInfo({descriptor:o.descriptor,details:e});if(this.interrupted)return;if(this.accounts=this.accounts.filter(e=>e.descriptor!==o.descriptor),!i||i&&!a.empty){const e=(0,u.formatAmount)(a.availableBalance,this.coinInfo);this.accounts.push(l({},o,{empty:a.empty,balance:e,addresses:a.addresses})),this.emit("progress",this.accounts)}a.empty?this.typeIndex+1<this.types.length?(this.typeIndex++,this.index=0):(this.emit("complete"),this.completed=!0):this.index++}}stop(){this.interrupted=!this.completed}dispose(){this.accounts=[]}}}],["trezor-connect","/lib/core/methods/tx/TransactionComposer.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var a=o(__browser_require__(384,r)),h=o(__browser_require__(571,r)),c=__browser_require__(647,r),u=o(__browser_require__(635,r)),f=(o(__browser_require__(627,r)),__browser_require__(413,r));e.default=class{constructor(e){(0,a.default)(this,"blockHeight",0),(0,a.default)(this,"composed",{}),this.account=e.account,this.outputs=e.outputs,this.coinInfo=e.coinInfo,this.blockHeight=0,this.feeLevels=new u.default(e.coinInfo);const{addresses:t}=e.account,r=t?t.used.concat(t.unused).concat(t.change).map(e=>e.address):[];this.utxos=e.utxo.map(e=>{const t=(0,f.getHDPath)(e.path);return{index:e.vout,transactionHash:e.txid,value:e.amount,addressPath:[t[3],t[4]],height:e.blockHeight,tsize:0,vsize:0,coinbase:"boolean"==typeof e.coinbase&&e.coinbase,own:r.indexOf(e.address)>=0}})}async init(e){const{blockHeight:t}=await e.getNetworkInfo();this.blockHeight=t,await this.feeLevels.load(e)}composeAllFeeLevels(){const{levels:e}=this.feeLevels;if(this.utxos.length<1)return!1;this.composed={};let t=!1;for(const r of e)if("0"!==r.feePerUnit){const e=this.compose(r.feePerUnit);"final"===e.type&&(t=!0),this.composed[r.label]=e}if(!t){const t=e[e.length-1];let r=new h.default(t.feePerUnit);for(;r.gt(this.coinInfo.minFee)&&this.composed.custom===undefined;){r=r.minus(1);const e=this.compose(r.toString());if("final"===e.type)return this.feeLevels.updateCustomFee(e.feePerByte),this.composed.custom=e,!0}return!1}return!0}composeCustomFee(e){const t=this.compose(e);this.composed.custom=t,"final"===t.type?this.feeLevels.updateCustomFee(t.feePerByte):this.feeLevels.updateCustomFee(e)}getFeeLevelList(){const e=[],{levels:t}=this.feeLevels;return t.forEach(t=>{const r=this.composed[t.label];r&&"final"===r.type?e.push({name:t.label,fee:r.fee,feePerByte:t.feePerUnit,minutes:t.blocks*this.coinInfo.blocktime,total:r.totalSpent}):e.push({name:t.label,fee:"0",disabled:!0})}),e}compose(e){const t=this.account,{addresses:r}=t;if(!r)return{type:"error",error:"ADDRESSES-NOT-SET"};const i=r.change.findIndex(e=>e.transfers<1);if(i<0)return{type:"error",error:"CHANGE-ADDRESS-NOT-SET"};const s=r.change[i].address;return(0,c.buildTx)({utxos:this.utxos,outputs:this.outputs,height:this.blockHeight,feeRate:e,segwit:this.coinInfo.segwit,inputAmounts:this.coinInfo.segwit||null!==this.coinInfo.forkid,basePath:t.address_n,network:this.coinInfo.network,changeId:i,changeAddress:s,dustThreshold:this.coinInfo.dustLimit})}dispose(){}}}],["hd-wallet","/lib/index.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={setLogCommunication:!0};Object.defineProperty(e,"setLogCommunication",{enumerable:!0,get:function(){return p.setLogCommunication}});var a=__browser_require__(648,r);Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(o,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}}))});var h=__browser_require__(649,r);Object.keys(h).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(o,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return h[t]}}))});var c=__browser_require__(654,r);Object.keys(c).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(o,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return c[t]}}))});var u=__browser_require__(655,r);Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(o,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}}))});var f=__browser_require__(650,r);Object.keys(f).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(o,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return f[t]}}))});var l=__browser_require__(665,r);Object.keys(l).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(o,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}}))});var d=__browser_require__(666,r);Object.keys(d).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(o,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return d[t]}}))});var p=__browser_require__(652,r)}],["hd-wallet","/lib/address-source.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WorkerAddressSource=e.BrowserAddressSource=void 0;var o=__browser_require__(427,r);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),e}var u=function(){function e(t,r,i){a(this,e),this.network=r,this.segwit=i,this.node=t}return c(e,[{key:"derive",value:function(e,t){for(var r=[],i=e;i<=t;i++){var s=this.node.derive(i),n="";if(this.segwit){var a=s.getIdentifier(),h=Buffer.alloc(a.length+2);h[0]=0,h[1]=20,a.copy(h,2);var c=o.crypto.hash160(h);n=o.address.toBase58Check(c,this.network.scriptHash)}else n=s.getAddress();r.push(n)}return Promise.resolve(r)}}]),e}();e.BrowserAddressSource=u;var f=function(){function e(t,r,i,s){a(this,e),this.channel=t,this.node={depth:r.depth,child_num:r.index,fingerprint:r.parentFingerprint,chain_code:Array.prototype.slice.call(r.chainCode),public_key:Array.prototype.slice.call(r.keyPair.getPublicKeyBuffer())},this.version=i,this.segwit=s}return c(e,[{key:"derive",value:function(e,t){var r={type:"deriveAddressRange",node:this.node,version:this.version,firstIndex:e,lastIndex:t,addressFormat:"p2sh"===this.segwit?1:0};return this.channel.postMessage(r).then(function(e){return e.addresses})}}]),e}();e.WorkerAddressSource=f}],["hd-wallet","/lib/bitcore.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BitcoreBlockchain=void 0;var o=__browser_require__(427,r),a=__browser_require__(650,r),h=__browser_require__(652,r),c=__browser_require__(651,r),u=__browser_require__(653,r);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(r,!0).forEach(function(t){m(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],i=!0,s=!1,n=undefined;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(e){s=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(s)throw n}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function p(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function g(e,t,r){return t&&b(e.prototype,t),r&&b(e,r),e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _=function(){function e(t,r){var i=this,s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:o.networks.bitcoin;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,"socket",(0,c.deferred)()),m(this,"workingUrl","none"),m(this,"_silent",!1),m(this,"closeOnInit",new a.Emitter),this.addresses=new Set,this.socketWorkerFactory=r,this.endpoints=t,this.network=s;var n=a.Stream.setLater(),h=a.Stream.setLater(),u=a.Stream.setLater();this.errors=n.stream,this.notifications=h.stream,this.blocks=u.stream;e._tryEndpoint(t,r,{"-1":!0},this.closeOnInit).then(function(e){var t=e.socket,r=e.url;i.closeOnInit.destroy(),E(t,2,!1).then(function(){i.hasSmartTxFees=!0},function(){i.hasSmartTxFees=!1}).then(function(){i.workingUrl=r,i.socket.resolve(t),n.setter(S(t)),h.setter(function(e){return a.Stream.filterError(e.observe("bitcoind/addresstxid").mapPromise(function(e){var t=e.txid;return i.lookupTransaction(t)}))}(t)),u.setter(function(e){return e.subscribe("bitcoind/hashblock"),e.observe("bitcoind/hashblock")}(t))})},function(){n.setter(a.Stream.simple(new Error("All backends are offline."))),i.socket.reject(new Error("All backends are offline.")),i.socket.promise.catch(function(e){i._silent||console.error(e)})})}return g(e,null,[{key:"_tryEndpoint",value:function(t,r,i,s){var n=i,o=t.filter(function(e,t){return!i[t.toString()]});if(0===o.length)return Promise.reject(new Error("All backends are down."));var a=(0,u.uniqueRandom)(o.length);return function(e,t,r){var i=new h.Socket(e,t,r);return new Promise(function(e){S(i).awaitFirst().then(function(){e(!1)}),Promise.race([new Promise(function(e,t){return setTimeout(function(){return t()},3e4)}),v(i,0)]).then(function(){e(!0)},function(){e(!1)})}).then(function(e){return e?i:(i.close(),null)})}(r,o[a],s).then(function(i){return i?{socket:i,url:o[a]}:(n[a.toString()]=!0,e._tryEndpoint(t,r,n,s))})}}]),g(e,[{key:"hardStatusCheck",value:function(){var t=new e(this.endpoints,this.socketWorkerFactory);return t.socket.promise.then(function(){return t.destroy().then(function(){return!0})},function(){return t.destroy().then(function(){return!1})})}},{key:"subscribe",value:function(e){var t=this;if(!(e instanceof Set))throw new Error("Input not a set of strings.");var r=!1;if(e.forEach(function(e){"string"!=typeof e&&(r=!0)}),r)throw new Error("Input not a set of strings.");this.socket.promise.then(function(r){var i=p(e).filter(function(e){return!t.addresses.has(e)});if(i.forEach(function(e){return t.addresses.add(e)}),0!==i.length)for(var s=0;s<i.length;s+=20)r.subscribe("bitcoind/addresstxid",i.slice(s,s+20))},function(){})}},{key:"destroy",value:function(){var e=this,t=new Promise(function(e){return setTimeout(e,1e3)}),r=this.socket.promise.catch(function(){});return Promise.race([t,r]).then(function(t){return e.closeOnInit.destroyed||e.closeOnInit.emit(),e.errors.dispose(),e.notifications.dispose(),e.blocks.dispose(),null!=t?t.close():Promise.resolve()})}},{key:"lookupTransactionsStream",value:function(e,t,r){var i=this;return a.Stream.fromPromise(this.socket.promise.then(function(s){return function(e,t,r,i){return a.Stream.combineFlat([w(e,t,!0,r,i),w(e,t,!1,r,i)])}(s,e,t,r).map(function(e){return e instanceof Error?e:e.items.map(function(e){return I(e.tx,i.network)})})}))}},{key:"lookupTransactions",value:function(e,t,r){return this.lookupTransactionsStream(e,t,r).reduce(function(e,t){return e instanceof Error?e:t instanceof Error?t:e.concat(t)},[]).then(function(e){if(e instanceof Error)throw e;return e})}},{key:"lookupTransactionsIds",value:function(e,t,r){return this.socket.promise.then(function(i){return Promise.all([y(i,e,!0,t,r),y(i,e,!1,t,r)])}).then(function(e){var t=d(e,2),r=t[0],i=t[1];return r.concat(i)})}},{key:"lookupTransaction",value:function(e){var t=this;return this.socket.promise.then(function(r){return function(e,t){var r=[t];return e.send({method:"getDetailedTransaction",params:r})}(r,e).then(function(e){return I(e,t.network)})})}},{key:"sendTransaction",value:function(e){return this.socket.promise.then(function(t){return function(e,t){var r=[t];return e.send({method:"sendTransaction",params:r})}(t,e)})}},{key:"lookupBlockHash",value:function(e){return this.socket.promise.then(function(t){return v(t,e)})}},{key:"lookupSyncStatus",value:function(){return this.socket.promise.then(function(e){return function(e){return e.send({method:"getInfo",params:[]}).then(function(e){return{height:e.blocks}})}(e)})}},{key:"estimateSmartTxFees",value:function(e,t){var r=this;return this.socket.promise.then(function(i){var s=Promise.resolve({});return e.forEach(function(e){s=s.then(function(s){return(r.hasSmartTxFees?E(i,e,t):Promise.resolve("-1")).then(function(t){var r=s;return r[e]=t.toString(),r})})}),s})}},{key:"estimateTxFees",value:function(e,t){return this.socket.promise.then(function(r){var i=Promise.resolve({});return e.forEach(function(e){i=i.then(function(i){return function(e,t){var r=[t];return e.send({method:"estimateFee",params:r})}(r,e).then(function(r){var s=i;return(!t||-1!==r)&&(s[e]=r.toString()),s})})}),i})}}]),e}();function w(e,t,r,i,s){var n=1,o=!0;return a.Stream.generate({from:0,to:0,items:[],totalCount:0},function(a){a.items.reduce(function(e,t){return e+t.tx.hex.length/2},0)<=5e3&&!o&&(n*=5,n=Math.min(50,n)),o=!1;var h=a.to,c=a.to+n;return function(e,t,r,i,s,n,o){var a=[t,l({},s?{start:n,end:o,queryMempoolOnly:!0}:{start:n,end:o,queryMempol:!1},{from:r,to:i})];return e.send({method:"getAddressHistory",params:a})}(e,t,h,c,r,i,s).then(function(e){return l({},e,{from:h,to:c})})},function(e){return e.to<e.totalCount})}function y(e,t,r,i,s){var n=[t,r?{start:i,end:s,queryMempoolOnly:!0}:{start:i,end:s,queryMempool:!1}];return e.send({method:"getAddressTxids",params:n})}function v(e,t){var r=[t];return e.send({method:"getBlockHeader",params:r}).then(function(e){return e.hash})}function E(e,t,r){var i=[t,r];return e.send({method:"estimateSmartFee",params:i})}function S(e){var t=["connect_error","reconnect_error","error","close","disconnect"].map(function(t){return e.observe(t).map(function(e){var r=JSON.stringify(e);return new Error("".concat(r!==undefined?r:"undefined"," (").concat(t,")"))})});return a.Stream.combineFlat(t)}function I(e,t){return{network:t,hex:e.hex,height:-1===e.height?null:e.height,timestamp:null==e.blockTimestamp?null:e.blockTimestamp,time:e.time,hash:e.hash,inputAddresses:e.inputs.map(function(e){return e.address}),outputAddresses:e.outputs.map(function(e){return e.address}),vsize:null==e.size?e.hex.length/2:e.size,rawTx:e}}e.BitcoreBlockchain=_}],["hd-wallet","/lib/utils/stream.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StreamWithEnding=e.Stream=e.Emitter=void 0;var o=__browser_require__(651,r);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e){return"object"===f(e)&&null!=e&&e instanceof Error?e:"object"===f(e)&&null!=e&&null!=e.message?new Error(e.message):new Error(JSON.stringify(e))}var d=function(){function e(){a(this,e),u(this,"listeners",[]),u(this,"destroyed",!1)}return c(e,[{key:"destroy",value:function(){var e=this;this.listeners.forEach(function(t){return e.detach(t)}),this.listeners=[],this.destroyed=!0}},{key:"attach",value:function(e){if(this.destroyed)throw new Error("Attaching on a destroyed emitter");this.listeners.forEach(function(t){if(t===e)throw new Error("Cannot attach the same listener twice")}),this.listeners.push(e)}},{key:"detach",value:function(e){this.listeners=this.listeners.filter(function(t){return t!==e})}},{key:"emit",value:function(e){var t=this;this.destroyed&&console.warn(new Error("Emitting on a destroyed emitter")),this.listeners.forEach(function(r){r(e,function(){t.detach(r)})})}}]),e}();e.Emitter=d;var p=function(){function e(t){var r=this;a(this,e),u(this,"disposed",!1),this.values=new d,this.finish=new d;var i=t(function(e){r.values.emit(e)},function(){r.finish.emit()});this.dispose=function(){i(),r.values.destroy(),r.finish.destroy(),r.disposed=!0}}return c(e,null,[{key:"fromEmitter",value:function(t,r){return new e(function(e){var i=!1,s=function(t){e(t)};return t.attach(s),function(){i||(i=!0,t.detach(s),r())}})}},{key:"fromEmitterFinish",value:function(t,r,i){return new e(function(e,s){var n=!1,o=function(t){e(t)};t.attach(o);var a=function(e,r){s(),r(),t.detach(o)};return r.attach(a),function(){n||(n=!0,t.detach(o),r.detach(a),i())}})}},{key:"empty",value:function(){return new e(function(e,t){var r=!1;return setTimeout(function(){r||t()},0),function(){r=!0}})}},{key:"fromPromise",value:function(t,r){var i=null!=r&&r;return new e(function(e,r){var s,n=!1;return t.then(function(t){n||t.disposed||(t.values.attach(function(t){return e(t)}),t.finish.attach(function(){return r()}),s=t)},function(t){n||(i||e(l(t)),setTimeout(function(){n||r()},10))}),function(){n=!0,null!=s&&s.dispose()}})}},{key:"setLater",value:function(){var t=(0,o.deferred)(),r=!1;return{stream:e.fromPromise(t.promise),setter:function(e){if(r)throw new Error("Setting stream twice.");r=!0,t.resolve(e)}}}},{key:"generate",value:function(t,r,i){return new e(function(e,s){var n=!1;return setTimeout(function(){return function t(o){var a;try{a=r(o)}catch(t){return void(n||(e(l(t)),s()))}a.then(function(r){n||(e(r),i(r)?t(r):s())},function(t){n||(e(l(t)),s())})}(t)},1),function(){n=!0}})}},{key:"simple",value:function(t){var r=new d,i=new d,s=e.fromEmitterFinish(r,i,function(){});return setTimeout(function(){r.emit(t),setTimeout(function(){i.emit()},1)},1),s}},{key:"combineFlat",value:function(t){return 0===t.length?e.empty():new e(function(e,r){var i=new Set;return t.forEach(function(s,n){s.values.attach(function(t){e(t)}),s.finish.attach(function(){i.add(n),i.size>=t.length&&r()})}),function(){t.forEach(function(e){return e.dispose()})}})}},{key:"filterError",value:function(e){return e.filter(function(e){return!(e instanceof Error)})}}]),c(e,[{key:"awaitFirst",value:function(){var e=this;return new Promise(function(t,r){var i=function(){},s=function r(s){e.values.detach(r),e.finish.detach(i),t(s)};i=function(){e.values.detach(s),e.finish.detach(i),r(new Error("No first value."))},e.values.attach(s),e.finish.attach(i)})}},{key:"awaitFinish",value:function(){var e=this;return new Promise(function(t){e.finish.attach(function(e,r){r(),t()})})}},{key:"map",value:function(t){var r=this;return new e(function(e,i){return r.values.attach(function(r){e(t(r))}),r.finish.attach(i),r.dispose})}},{key:"mapPromise",value:function(t){var r=this;return new e(function(e,i){var s=Promise.resolve(),n=!1;return r.values.attach(function(r){var i=s,o=function(){try{return t(r)}catch(e){return Promise.reject(e)}}();s=o.then(function(t){return i.then(function(){n||e(t)})},function(t){return i.then(function(){n||e(t)})})}),r.finish.attach(function(){s.then(function(){n||i()})}),function(){n=!0,r.dispose()}})}},{key:"filter",value:function(t){var r=this;return new e(function(e,i){return r.values.attach(function(r){t(r)&&e(r)}),r.finish.attach(i),r.dispose})}},{key:"reduce",value:function(e,t){var r=this;return new Promise(function(i){var s=t,n=function(t){s=e(s,t)};r.values.attach(n),r.finish.attach(function(e,t){i(s),t(),r.values.detach(n)})})}}]),e}();e.Stream=p;var b=function(){function e(){a(this,e)}return c(e,null,[{key:"fromStreamAndPromise",value:function(t,r){r.catch(function(){});var i=new e;i.stream=t;var s=(0,o.deferred)();return i.dispose=function(e){s.reject(e),s.promise.catch(function(){}),t.dispose()},t.awaitFinish().then(function(){s.resolve()}),i.ending=s.promise.then(function(){return r}),i.ending.catch(function(){}),i}},{key:"fromPromise",value:function(t){var r=new e,i=!1;r.stream=p.fromPromise(t.then(function(e){if(i)throw new Error("disposed");return e.stream}),!0),r.ending=t.then(function(e){return e.ending}),r.ending.catch(function(){});var s=null;return t.then(function(e){s=e}),r.dispose=function(e){i=!0,null!=s&&s.dispose(e)},r}}]),e}();e.StreamWithEnding=b}],["hd-wallet","/lib/utils/deferred.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deferred=function(){var e=function(){},t=function(){};return{promise:new Promise(function(r,i){e=r,t=i}),resolve:e,reject:t}}}],["hd-wallet","/lib/socketio-worker/outside.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setLogCommunication=function(){l=!0},e.Socket=void 0;var o=__browser_require__(650,r),a=__browser_require__(651,r);function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=!1;var d=function(){function e(t,r,i){h(this,e),f(this,"streams",[]),this.endpoint=r,this.socket=new g(t,i),this._socketInited=this.socket.init(this.endpoint),this.destroyerOnInit=i}return u(e,[{key:"send",value:function(e){var t=this;return this._socketInited.then(function(){return t.socket.send(e)})}},{key:"close",value:function(){var e=this;this.destroyerOnInit.destroyed||this.destroyerOnInit.emit(),this.streams.forEach(function(e){return e.dispose()}),this._socketInited.then(function(){e.socket.close()},function(){})}},{key:"observe",value:function(e){var t=this,r=o.Stream.fromPromise(this._socketInited.then(function(){return t.socket.observe(e)}));return this.streams.push(r),r}},{key:"subscribe",value:function(e){for(var t=this,r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return this._socketInited.then(function(){var r;return(r=t.socket).subscribe.apply(r,[e].concat(i))}).catch(function(){})}}]),e}();e.Socket=d;var p=["connect_error","reconnect_error","error","close","disconnect"],b=["connect_error","reconnect_error","close","disconnect"],g=function(){function e(t,r){h(this,e),f(this,"stopped",!1),f(this,"observers",{}),this.workerFactory=t,this.counter=0,this.destroyerOnInit=r}return u(e,[{key:"_tryWorker",value:function(e,t){var r=this,i=this.workerFactory(),s=(0,a.deferred)(),n=!1,o=function(e,t){n=!0,i.terminate(),t()};return this.destroyerOnInit.attach(o),i.onmessage=function(e){var t=e.data;(r.destroyerOnInit.detach(o),"string"==typeof t)&&("initDone"===JSON.parse(t).type?s.resolve(i):(n||i.terminate(),s.reject(new Error("Connection failed."))))},i.postMessage(JSON.stringify({type:"init",endpoint:e,connectionType:t})),s.promise}},{key:"init",value:function(e){var t=this;return this._tryWorker(e,"websocket").catch(function(){return t._tryWorker(e,"polling")}).then(function(e){var r=e;t._worker=r;var i=new o.Emitter;r.onmessage=function(e){var r=e.data;"string"==typeof r&&(t.stopped||i.emit(JSON.parse(r)))},t._emitter=i,b.forEach(function(e){t.observe(e).map(function(){return t._sendMessage({type:"close"}),t._emitter=null,null})})})}},{key:"close",value:function(){var e=this;return this.stopped=!0,this._sendMessage({type:"close"}),null!=this._emitter&&(this._emitter.destroy(),this._emitter=null),new Promise(function(t){setTimeout(function(){null!=e._worker&&e._worker.terminate(),t()},10)})}},{key:"send",value:function(e){this.counter++;var t=this.counter;this._sendMessage({type:"send",message:e,id:t});var r=(0,a.deferred)();return null==this._emitter?Promise.reject(new Error("Server disconnected.")):(this._emitter.attach(function(e,i){if(l&&console.log("[socket.io] in message",e),"sendReply"===e.type&&e.id===t){var s=e.reply,n=s.result,o=s.error;null!=o?r.reject(o):r.resolve(n),i()}"emit"===e.type&&-1!==p.indexOf(e.event)&&(r.reject(new Error("Server disconnected.")),i())}),r.promise)}},{key:"observe",value:function(e){if(null!=this.observers[e])return this.observers[e];var t=this._newObserve(e);return this.observers[e]=t,t}},{key:"_newObserve",value:function(e){var t=this;this.counter++;var r=this.counter;this._sendMessage({type:"observe",event:e,id:r});var i=this._emitter;return o.Stream.fromEmitter(i,function(){t._sendMessage({type:"unobserve",event:e,id:r}),delete t.observers[e]}).filter(function(t){return"emit"===t.type&&t.event===e}).map(function(e){return e.data})}},{key:"subscribe",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];this._sendMessage({type:"subscribe",event:e,values:r})}},{key:"_sendMessage",value:function(e){var t=this._worker;l&&console.log("[socket.io] out message",e),t.postMessage(JSON.stringify(e))}}]),e}()}],["hd-wallet","/lib/utils/unique-random.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.uniqueRandom=function(e){for(var t=void 0!==process&&!!process.version,r=t?process.version:navigator.userAgent,i=(new Date).getTimezoneOffset(),s=t?"node":null==navigator.languages?navigator.language:navigator.languages.toString(),n=r+i+s,o=a.default.createHash("md5").update(n).digest(),h=0,c=0;c<o.length;c++)h+=o[c],h%=e;return h};var o,a=(o=__browser_require__(485,r))&&o.__esModule?o:{default:o}}],["hd-wallet","/lib/discovery/index.js",function(e,t,r,i,s,n){"use strict";__browser_require__(650,r)}],["hd-wallet","/lib/discovery/worker-discovery.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WorkerDiscovery=void 0;var o=__browser_require__(427,r),a=__browser_require__(650,r),h=__browser_require__(656,r),c=__browser_require__(665,r),u=__browser_require__(648,r);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],i=!0,s=!1,n=undefined;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(e){s=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(s)throw n}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function l(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=function(){function e(t,r,i,s){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"forceAddedTransactions",[]),d(this,"forceAddedTransactionsEmitter",new a.Emitter),d(this,"forceAddedTransactionsStream",a.Stream.fromEmitter(this.forceAddedTransactionsEmitter,function(){}).map(function(){return"block"})),this.discoveryWorkerFactory=t,this.addressWorkerChannel="undefined"==typeof WebAssembly?null:new c.WorkerChannel(r),i.then(function(e){null!==n.addressWorkerChannel&&r.postMessage({type:"init",binary:e})},function(e){return console.error(e)}),this.chain=s}var t,r,i;return t=e,(r=[{key:"destroy",value:function(){null!=this.addressWorkerChannel&&this.addressWorkerChannel.destroy()}},{key:"forceAddTransaction",value:function(e){this.forceAddedTransactions.push(e),this.forceAddedTransactionsEmitter.emit(!0)}},{key:"discoverAccount",value:function(e,t,r,i,s,n,c){var u=this,l=b(t,r);return l instanceof Error?a.StreamWithEnding.fromStreamAndPromise(a.Stream.empty(),Promise.reject(l)):a.StreamWithEnding.fromPromise(Promise.all([this.deriveXpub(t,r,0),this.deriveXpub(t,r,1)]).then(function(a){var l=f(a,2),d=l[0],p=l[1],b=o.HDNode.fromBase58(p,r,!0),g=o.HDNode.fromBase58(d,r,!0),m=[u.createWorkerAddressSource(g,r,i),u.createWorkerAddressSource(b,r,i)];return new h.WorkerDiscoveryHandler(u.discoveryWorkerFactory,u.chain,m,r,s||!1,u.forceAddedTransactions).discovery(e,t,"p2sh"===i,n,c)}))}},{key:"monitorAccountActivity",value:function(e,t,r,i,s,n,c){var u=this,l=b(t,r);return l instanceof Error?a.Stream.simple(l):a.Stream.fromPromise(Promise.all([this.deriveXpub(t,r,0),this.deriveXpub(t,r,1)]).then(function(l){var d=f(l,2),p=d[0],b=d[1],g=o.HDNode.fromBase58(b,r,!0),m=o.HDNode.fromBase58(p,r,!0),_=[u.createWorkerAddressSource(m,r,i),u.createWorkerAddressSource(g,r,i)];function w(e){return null==e?new Set([]):new Set(e.usedAddresses.map(function(e){return e.address}).concat(e.unusedAddresses).concat(e.changeAddresses))}u.chain.subscribe(w(e));var y=e,v=u.chain.notifications.filter(function(e){var t=w(y),r=!1;return e.inputAddresses.concat(e.outputAddresses).forEach(function(e){null!=e&&t.has(e)&&(r=!0)}),r}).map(function(e){return e}),E=u.chain.blocks.map(function(){return"block"});return a.Stream.combineFlat([E,v,u.forceAddedTransactionsStream]).mapPromise(function(){return new h.WorkerDiscoveryHandler(u.discoveryWorkerFactory,u.chain,_,r,s||!1,u.forceAddedTransactions).discovery(y,t,"p2sh"===i,n,c).ending.then(function(e){return y=e,e})})}))}},{key:"createWorkerAddressSource",value:function(e,t,r){if(null==this.addressWorkerChannel)return null;var i="p2sh"===r?t.scriptHash:t.pubKeyHash;return new u.WorkerAddressSource(this.addressWorkerChannel,e,i,r)}},{key:"deriveXpub",value:function(e,t,r){return null==this.addressWorkerChannel?Promise.resolve(o.HDNode.fromBase58(e,t,!0).derive(r).toBase58()):this.addressWorkerChannel.postMessage({type:"deriveNode",xpub:e,version:t.bip32.public,index:r}).then(function(e){return e.xpub})}}])&&l(t.prototype,r),i&&l(t,i),e}();function b(e,t){try{var r=o.HDNode.fromBase58(e,t,!0);if(!r.isNeutered())throw new Error("XPRV entrered instead of XPUB. Exiting.");return r}catch(e){return e}}e.WorkerDiscovery=p}],["hd-wallet","/lib/discovery/worker/outside/index.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WorkerDiscoveryHandler=void 0;var o,a=(o=__browser_require__(657,r))&&o.__esModule?o:{default:o},h=__browser_require__(650,r),c=__browser_require__(663,r);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=function(){function e(t,r,i,s,n,o){var a=this;f(this,e),p(this,"forceAddedTransactions",[]),p(this,"counter",new g),this.blockchain=r,this.addressSources=i,this.workerChannel=new c.WorkerChannel(t,function(e){return a.getPromise(e)},function(e){return a.getStream(e)}),this.network=s,this.cashAddress=n,this.forceAddedTransactions=o}return d(e,[{key:"discovery",value:function(e,t,r,i,s){var n=this,o="undefined"!=typeof WebAssembly;this.workerChannel.postToWorker({type:"init",state:e,network:this.network,webassembly:o,xpub:t,segwit:r,cashAddress:this.cashAddress,gap:i,timeOffset:s}),this.workerChannel.postToWorker({type:"startDiscovery"});var a=this.workerChannel.resPromise(function(){n.counter.finisher.emit(),n.counter.stream.dispose()});return h.StreamWithEnding.fromStreamAndPromise(this.counter.stream,a)}},{key:"getStream",value:function(e){if("chunkTransactions"===e.type){var t=this.addressSources[e.chainId];return 0===e.chainId&&this.counter.setCount(e.pseudoCount),this.getChunkStream(t,e.firstIndex,e.lastIndex,e.startBlock,e.endBlock,0===e.chainId,e.addresses)}return h.Stream.simple("Unknown request ".concat(e.type))}},{key:"getPromise",value:function(e){return"lookupBlockHash"===e.type?this.blockchain.lookupBlockHash(e.height):"lookupSyncStatus"===e.type?this.blockchain.lookupSyncStatus().then(function(e){return e.height}):"doesTransactionExist"===e.type?this.blockchain.lookupTransaction(e.txid).then(function(){return!0},function(){return!1}):Promise.reject(new Error("Unknown request ".concat(e.type)))}},{key:"getChunkStream",value:function(t,r,i,s,n,o,c){var f=this,l=e.deriveAddresses(t,c,r,i);return h.Stream.fromPromise(l.then(function(e){var t=f.cashAddress?e.map(function(e){return a.default.toCashAddress(e)}):e;return f.blockchain.lookupTransactionsStream(t,n,s).map(function(e){if(e instanceof Error)return e.message;var r=e,i=[];return f.forceAddedTransactions.slice().forEach(function(e,s){var n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(r,!0).forEach(function(t){p(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e,{height:null,timestamp:null});if(r.map(function(e){return e.hash}).some(function(t){return e.hash===t}))f.forceAddedTransactions.splice(s,1);else{var o=new Set;e.inputAddresses.concat(e.outputAddresses).forEach(function(e){null!=e&&o.add(e)}),t.some(function(e){return o.has(e)})&&i.push(n)}}),f.counter.setCount(f.counter.count+e.length),{transactions:e.concat(i),addresses:t}})})).map(function(e){return e instanceof Error?e.message:e})}}],[{key:"deriveAddresses",value:function(e,t,r,i){return null==t?null==e?Promise.reject(new Error("Cannot derive addresses in worker without webassembly")):e.derive(r,i):Promise.resolve(t)}}]),e}();e.WorkerDiscoveryHandler=b;var g=function(){function e(){f(this,e),p(this,"count",0),p(this,"emitter",new h.Emitter),p(this,"finisher",new h.Emitter),p(this,"stream",h.Stream.fromEmitterFinish(this.emitter,this.finisher,function(){}))}return d(e,[{key:"setCount",value:function(e){e>this.count&&(this.count=e,this.emitter.emit({transactions:this.count}))}}]),e}()}],["bchaddrjs","/src/bchaddr.js",function(e,t,r,i,s,n){var o=__browser_require__(499,r),a=__browser_require__(658,r),h={Legacy:"legacy",Bitpay:"bitpay",Cashaddr:"cashaddr"},c={Mainnet:"mainnet",Testnet:"testnet"},u={};function f(e){return b(e).format}function l(e){return b(e).network}function d(e){return b(e).type}u.P2PKH="p2pkh",u.P2SH="p2sh";var p={};function b(e){try{return function(e){try{var t=o.decode(e);if(t.length!==g)throw new _;var r=t[0],i=Array.prototype.slice.call(t,1);switch(r){case p[h.Legacy][c.Mainnet][u.P2PKH]:return{hash:i,format:h.Legacy,network:c.Mainnet,type:u.P2PKH};case p[h.Legacy][c.Mainnet][u.P2SH]:return{hash:i,format:h.Legacy,network:c.Mainnet,type:u.P2SH};case p[h.Legacy][c.Testnet][u.P2PKH]:return{hash:i,format:h.Legacy,network:c.Testnet,type:u.P2PKH};case p[h.Legacy][c.Testnet][u.P2SH]:return{hash:i,format:h.Legacy,network:c.Testnet,type:u.P2SH};case p[h.Bitpay][c.Mainnet][u.P2PKH]:return{hash:i,format:h.Bitpay,network:c.Mainnet,type:u.P2PKH};case p[h.Bitpay][c.Mainnet][u.P2SH]:return{hash:i,format:h.Bitpay,network:c.Mainnet,type:u.P2SH}}}catch(e){}throw new _}(e)}catch(e){}try{return function(e){if(-1!==e.indexOf(":"))try{return m(e)}catch(e){}else for(var t=["bitcoincash","bchtest","bchreg"],r=0;r<t.length;++r)try{var i=t[r];return m(i+":"+e)}catch(e){}throw new _}(e)}catch(e){}throw new _}p[h.Legacy]={},p[h.Legacy][c.Mainnet]={},p[h.Legacy][c.Mainnet][u.P2PKH]=0,p[h.Legacy][c.Mainnet][u.P2SH]=5,p[h.Legacy][c.Testnet]={},p[h.Legacy][c.Testnet][u.P2PKH]=111,p[h.Legacy][c.Testnet][u.P2SH]=196,p[h.Bitpay]={},p[h.Bitpay][c.Mainnet]={},p[h.Bitpay][c.Mainnet][u.P2PKH]=28,p[h.Bitpay][c.Mainnet][u.P2SH]=40,p[h.Bitpay][c.Testnet]={},p[h.Bitpay][c.Testnet][u.P2PKH]=111,p[h.Bitpay][c.Testnet][u.P2SH]=196;var g=21;function m(e){try{var t=a.decode(e),r=Array.prototype.slice.call(t.hash,0),i="P2PKH"===t.type?u.P2PKH:u.P2SH;switch(t.prefix){case"bitcoincash":return{hash:r,format:h.Cashaddr,network:c.Mainnet,type:i};case"bchtest":case"bchreg":return{hash:r,format:h.Cashaddr,network:c.Testnet,type:i}}}catch(e){}throw new _}function _(){var e=new Error;this.name=e.name="InvalidAddressError",this.message=e.message="Received an invalid Bitcoin Cash address as input.",this.stack=e.stack}_.prototype=Object.create(Error.prototype),r.exports={Format:h,Network:c,Type:u,detectAddressFormat:f,detectAddressNetwork:l,detectAddressType:d,toLegacyAddress:function(e){var t=b(e);return t.format===h.Legacy?e:function(e){var t=p[h.Legacy][e.network][e.type],r=Buffer.alloc(1+e.hash.length);return r[0]=t,r.set(e.hash,1),o.encode(r)}(t)},toBitpayAddress:function(e){var t=b(e);return t.format===h.Bitpay?e:function(e){var t=p[h.Bitpay][e.network][e.type],r=Buffer.alloc(1+e.hash.length);return r[0]=t,r.set(e.hash,1),o.encode(r)}(t)},toCashAddress:function(e){return function(e){var t=e.network===c.Mainnet?"bitcoincash":"bchtest",r=e.type===u.P2PKH?"P2PKH":"P2SH",i=new Uint8Array(e.hash);return a.encode(t,r,i)}(b(e))},isLegacyAddress:function(e){return f(e)===h.Legacy},isBitpayAddress:function(e){return f(e)===h.Bitpay},isCashAddress:function(e){return f(e)===h.Cashaddr},isMainnetAddress:function(e){return l(e)===c.Mainnet},isTestnetAddress:function(e){return l(e)===c.Testnet},isP2PKHAddress:function(e){return d(e)===u.P2PKH},isP2SHAddress:function(e){return d(e)===u.P2SH},InvalidAddressError:_}}],["cashaddrjs","/src/cashaddr.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(659,r),a=__browser_require__(661,r),h=__browser_require__(662,r),c=__browser_require__(660,r),u=c.validate;var f=c.ValidationError,l=["bitcoincash","bchtest","bchreg"];function d(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;++r)t[r]=31&e[r].charCodeAt(0);return t}function p(e,t){var r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}function b(e){for(var t=[656907472481,522768456162,0xf33e5fb3c4,748107326120,130178868336],r=a(1),i=0;i<e.length;++i){var s=e[i],n=r.shiftRight(35);r=r.and(34359738367).shiftLeft(5).xor(s);for(var o=0;o<t.length;++o)n.shiftRight(o).and(1).equals(1)&&(r=r.xor(t[o]))}return r.xor(1)}function g(e){return e===e.toLowerCase()||e===e.toUpperCase()}r.exports={encode:function(e,t,r){u("string"==typeof e&&function(e){return g(e)&&-1!==l.indexOf(e.toLowerCase())}(e),"Invalid prefix: "+e+"."),u("string"==typeof t,"Invalid type: "+t+"."),u(r instanceof Uint8Array,"Invalid hash: "+r+".");var i,s=p(d(e),new Uint8Array(1)),n=function(e){switch(e){case"P2PKH":return 0;case"P2SH":return 8;default:throw new f("Invalid type: "+e+".")}}(t)+function(e){switch(8*e.length){case 160:return 0;case 192:return 1;case 224:return 2;case 256:return 3;case 320:return 4;case 384:return 5;case 448:return 6;case 512:return 7;default:throw new f("Invalid hash size: "+e.length+".")}}(r),a=(i=p(new Uint8Array([n]),r),h(i,8,5)),c=p(a,function(e){for(var t=new Uint8Array(8),r=0;r<8;++r)t[7-r]=e.and(31).toJSNumber(),e=e.shiftRight(5);return t}(b(p(p(s,a),new Uint8Array(8)))));return e+":"+o.encode(c)},decode:function(e){u("string"==typeof e&&g(e),"Invalid address: "+e+".");var t=e.toLowerCase().split(":");u(2===t.length,"Missing prefix: "+e+".");var r=t[0],i=o.decode(t[1]);u(function(e,t){return b(p(p(d(e),new Uint8Array(1)),t)).equals(0)}(r,i),"Invalid checksum: "+e+".");var s,n=(s=i.subarray(0,-8),h(s,5,8,!0)),a=n[0],c=n.subarray(1);return u(function(e){switch(7&e){case 0:return 160;case 1:return 192;case 2:return 224;case 3:return 256;case 4:return 320;case 5:return 384;case 6:return 448;case 7:return 512}}(a)===8*c.length,"Invalid hash size: "+e+"."),{prefix:r,type:function(e){switch(120&e){case 0:return"P2PKH";case 8:return"P2SH";default:throw new f("Invalid address type in version byte: "+e+".")}}(a),hash:c}},ValidationError:f}}],["cashaddrjs","/src/base32.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(660,r).validate,a="qpzry9x8gf2tvdw0s3jn54khce6mua7l",h={q:0,p:1,z:2,r:3,y:4,9:5,x:6,8:7,g:8,f:9,2:10,t:11,v:12,d:13,w:14,0:15,s:16,3:17,j:18,n:19,5:20,4:21,k:22,h:23,c:24,e:25,6:26,m:27,u:28,a:29,7:30,l:31};r.exports={encode:function(e){o(e instanceof Uint8Array,"Invalid data: "+e+".");for(var t="",r=0;r<e.length;++r){var i=e[r];o(0<=i&&i<32,"Invalid value: "+i+"."),t+=a[i]}return t},decode:function(e){o("string"==typeof e,"Invalid base32-encoded string: "+e+".");for(var t=new Uint8Array(e.length),r=0;r<e.length;++r){var i=e[r];o(i in h,"Invalid value: "+i+"."),t[r]=h[i]}return t}}}],["cashaddrjs","/src/validation.js",function(e,t,r,i,s,n){"use strict";function o(e){var t=new Error;this.name=t.name="ValidationError",this.message=t.message=e,this.stack=t.stack}o.prototype=Object.create(Error.prototype),r.exports={ValidationError:o,validate:function(e,t){if(!e)throw new o(t)}}}],["big-integer","/BigInteger.js",function(e,t,r,i,s,n){var o=function(e){"use strict";var t=1e7,r=7,i=9007199254740992,s=f(i),n=Math.log(i);function a(e,t){return void 0===e?a[0]:void 0!==t?10==+t?Y(e):F(e,t):Y(e)}function h(e,t){this.value=e,this.sign=t,this.isSmall=!1}function c(e){this.value=e,this.sign=e<0,this.isSmall=!0}function u(e){return-i<e&&e<i}function f(e){return e<1e7?[e]:e<1e14?[e%1e7,Math.floor(e/1e7)]:[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]}function l(e){d(e);var r=e.length;if(r<4&&x(e,s)<0)switch(r){case 0:return 0;case 1:return e[0];case 2:return e[0]+e[1]*t;default:return e[0]+(e[1]+e[2]*t)*t}return e}function d(e){for(var t=e.length;0===e[--t];);e.length=t+1}function p(e){for(var t=new Array(e),r=-1;++r<e;)t[r]=0;return t}function b(e){return e>0?Math.floor(e):Math.ceil(e)}function g(e,r){var i,s,n=e.length,o=r.length,a=new Array(n),h=0,c=t;for(s=0;s<o;s++)h=(i=e[s]+r[s]+h)>=c?1:0,a[s]=i-h*c;for(;s<n;)h=(i=e[s]+h)===c?1:0,a[s++]=i-h*c;return h>0&&a.push(h),a}function m(e,t){return e.length>=t.length?g(e,t):g(t,e)}function _(e,r){var i,s,n=e.length,o=new Array(n),a=t;for(s=0;s<n;s++)i=e[s]-a+r,r=Math.floor(i/a),o[s]=i-r*a,r+=1;for(;r>0;)o[s++]=r%a,r=Math.floor(r/a);return o}function w(e,r){var i,s,n=e.length,o=r.length,a=new Array(n),h=0,c=t;for(i=0;i<o;i++)(s=e[i]-h-r[i])<0?(s+=c,h=1):h=0,a[i]=s;for(i=o;i<n;i++){if(!((s=e[i]-h)<0)){a[i++]=s;break}s+=c,a[i]=s}for(;i<n;i++)a[i]=e[i];return d(a),a}function y(e,r,i){var s,n,o=e.length,a=new Array(o),u=-r,f=t;for(s=0;s<o;s++)n=e[s]+u,u=Math.floor(n/f),n%=f,a[s]=n<0?n+f:n;return"number"==typeof(a=l(a))?(i&&(a=-a),new c(a)):new h(a,i)}function v(e,r){var i,s,n,o,a=e.length,h=r.length,c=p(a+h),u=t;for(n=0;n<a;++n){o=e[n];for(var f=0;f<h;++f)i=o*r[f]+c[n+f],s=Math.floor(i/u),c[n+f]=i-s*u,c[n+f+1]+=s}return d(c),c}function E(e,r){var i,s,n=e.length,o=new Array(n),a=t,h=0;for(s=0;s<n;s++)i=e[s]*r+h,h=Math.floor(i/a),o[s]=i-h*a;for(;h>0;)o[s++]=h%a,h=Math.floor(h/a);return o}function S(e,t){for(var r=[];t-- >0;)r.push(0);return r.concat(e)}function I(e,r,i){return new h(e<t?E(r,e):v(r,f(e)),i)}function k(e){var r,i,s,n,o=e.length,a=p(o+o),h=t;for(s=0;s<o;s++){i=0-(n=e[s])*n;for(var c=s;c<o;c++)r=n*e[c]*2+a[s+c]+i,i=Math.floor(r/h),a[s+c]=r-i*h;a[s+o]=i}return d(a),a}function A(e,r){var i,s,n,o,a=e.length,h=p(a),c=t;for(n=0,i=a-1;i>=0;--i)n=(o=n*c+e[i])-(s=b(o/r))*r,h[i]=0|s;return[h,0|n]}function O(e,r){var i,s,n=Y(r),o=e.value,u=n.value;if(0===u)throw new Error("Cannot divide by zero");if(e.isSmall)return n.isSmall?[new c(b(o/u)),new c(o%u)]:[a[0],e];if(n.isSmall){if(1===u)return[e,a[0]];if(-1==u)return[e.negate(),a[0]];var g=Math.abs(u);if(g<t){s=l((i=A(o,g))[0]);var m=i[1];return e.sign&&(m=-m),"number"==typeof s?(e.sign!==n.sign&&(s=-s),[new c(s),new c(m)]):[new h(s,e.sign!==n.sign),new c(m)]}u=f(g)}var _=x(o,u);if(-1===_)return[a[0],e];if(0===_)return[a[e.sign===n.sign?1:-1],a[0]];s=(i=o.length+u.length<=200?function(e,r){var i,s,n,o,a,h,c,u=e.length,f=r.length,d=t,b=p(r.length),g=r[f-1],m=Math.ceil(d/(2*g)),_=E(e,m),w=E(r,m);for(_.length<=u&&_.push(0),w.push(0),g=w[f-1],s=u-f;s>=0;s--){for(i=d-1,_[s+f]!==g&&(i=Math.floor((_[s+f]*d+_[s+f-1])/g)),n=0,o=0,h=w.length,a=0;a<h;a++)n+=i*w[a],c=Math.floor(n/d),o+=_[s+a]-(n-c*d),n=c,o<0?(_[s+a]=o+d,o=-1):(_[s+a]=o,o=0);for(;0!==o;){for(i-=1,n=0,a=0;a<h;a++)(n+=_[s+a]-d+w[a])<0?(_[s+a]=n+d,n=0):(_[s+a]=n,n=1);o+=n}b[s]=i}return _=A(_,m)[0],[l(b),l(_)]}(o,u):function(e,r){for(var i,s,n,o,a,h=e.length,c=r.length,u=[],f=[],p=t;h;)if(f.unshift(e[--h]),d(f),x(f,r)<0)u.push(0);else{n=f[(s=f.length)-1]*p+f[s-2],o=r[c-1]*p+r[c-2],s>c&&(n=(n+1)*p),i=Math.ceil(n/o);do{if(x(a=E(r,i),f)<=0)break;i--}while(i);u.push(i),f=w(f,a)}return u.reverse(),[l(u),l(f)]}(o,u))[0];var y=e.sign!==n.sign,v=i[1],S=e.sign;return"number"==typeof s?(y&&(s=-s),s=new c(s)):s=new h(s,y),"number"==typeof v?(S&&(v=-v),v=new c(v)):v=new h(v,S),[s,v]}function x(e,t){if(e.length!==t.length)return e.length>t.length?1:-1;for(var r=e.length-1;r>=0;r--)if(e[r]!==t[r])return e[r]>t[r]?1:-1;return 0}function R(e){var t=e.abs();return!t.isUnit()&&(!!(t.equals(2)||t.equals(3)||t.equals(5))||!(t.isEven()||t.isDivisibleBy(3)||t.isDivisibleBy(5))&&(!!t.lesser(49)||void 0))}function M(e,t){for(var r,i,s,n=e.prev(),h=n,c=0;h.isEven();)h=h.divide(2),c++;e:for(i=0;i<t.length;i++)if(!e.lesser(t[i])&&!(s=o(t[i]).modPow(h,e)).equals(a[1])&&!s.equals(n)){for(r=c-1;0!=r;r--){if((s=s.square().mod(e)).isUnit())return!1;if(s.equals(n))continue e}return!1}return!0}h.prototype=Object.create(a.prototype),c.prototype=Object.create(a.prototype),h.prototype.add=function(e){var t=Y(e);if(this.sign!==t.sign)return this.subtract(t.negate());var r=this.value,i=t.value;return t.isSmall?new h(_(r,Math.abs(i)),this.sign):new h(m(r,i),this.sign)},h.prototype.plus=h.prototype.add,c.prototype.add=function(e){var t=Y(e),r=this.value;if(r<0!==t.sign)return this.subtract(t.negate());var i=t.value;if(t.isSmall){if(u(r+i))return new c(r+i);i=f(Math.abs(i))}return new h(_(i,Math.abs(r)),r<0)},c.prototype.plus=c.prototype.add,h.prototype.subtract=function(e){var t=Y(e);if(this.sign!==t.sign)return this.add(t.negate());var r=this.value,i=t.value;return t.isSmall?y(r,Math.abs(i),this.sign):function(e,t,r){var i;return x(e,t)>=0?i=w(e,t):(i=w(t,e),r=!r),"number"==typeof(i=l(i))?(r&&(i=-i),new c(i)):new h(i,r)}(r,i,this.sign)},h.prototype.minus=h.prototype.subtract,c.prototype.subtract=function(e){var t=Y(e),r=this.value;if(r<0!==t.sign)return this.add(t.negate());var i=t.value;return t.isSmall?new c(r-i):y(i,Math.abs(r),r>=0)},c.prototype.minus=c.prototype.subtract,h.prototype.negate=function(){return new h(this.value,!this.sign)},c.prototype.negate=function(){var e=this.sign,t=new c(-this.value);return t.sign=!e,t},h.prototype.abs=function(){return new h(this.value,!1)},c.prototype.abs=function(){return new c(Math.abs(this.value))},h.prototype.multiply=function(e){var r,i,s,n=Y(e),o=this.value,c=n.value,u=this.sign!==n.sign;if(n.isSmall){if(0===c)return a[0];if(1===c)return this;if(-1===c)return this.negate();if((r=Math.abs(c))<t)return new h(E(o,r),u);c=f(r)}return i=o.length,s=c.length,new h(-.012*i-.012*s+15e-6*i*s>0?function e(t,r){var i=Math.max(t.length,r.length);if(i<=30)return v(t,r);i=Math.ceil(i/2);var s=t.slice(i),n=t.slice(0,i),o=r.slice(i),a=r.slice(0,i),h=e(n,a),c=e(s,o),u=m(m(h,S(w(w(e(m(n,s),m(a,o)),h),c),i)),S(c,2*i));return d(u),u}(o,c):v(o,c),u)},h.prototype.times=h.prototype.multiply,c.prototype._multiplyBySmall=function(e){return u(e.value*this.value)?new c(e.value*this.value):I(Math.abs(e.value),f(Math.abs(this.value)),this.sign!==e.sign)},h.prototype._multiplyBySmall=function(e){return 0===e.value?a[0]:1===e.value?this:-1===e.value?this.negate():I(Math.abs(e.value),this.value,this.sign!==e.sign)},c.prototype.multiply=function(e){return Y(e)._multiplyBySmall(this)},c.prototype.times=c.prototype.multiply,h.prototype.square=function(){return new h(k(this.value),!1)},c.prototype.square=function(){var e=this.value*this.value;return u(e)?new c(e):new h(k(f(Math.abs(this.value))),!1)},h.prototype.divmod=function(e){var t=O(this,e);return{quotient:t[0],remainder:t[1]}},c.prototype.divmod=h.prototype.divmod,h.prototype.divide=function(e){return O(this,e)[0]},c.prototype.over=c.prototype.divide=h.prototype.over=h.prototype.divide,h.prototype.mod=function(e){return O(this,e)[1]},c.prototype.remainder=c.prototype.mod=h.prototype.remainder=h.prototype.mod,h.prototype.pow=function(e){var t,r,i,s=Y(e),n=this.value,o=s.value;if(0===o)return a[1];if(0===n)return a[0];if(1===n)return a[1];if(-1===n)return s.isEven()?a[1]:a[-1];if(s.sign)return a[0];if(!s.isSmall)throw new Error("The exponent "+s.toString()+" is too large.");if(this.isSmall&&u(t=Math.pow(n,o)))return new c(b(t));for(r=this,i=a[1];!0&o&&(i=i.times(r),--o),0!==o;)o/=2,r=r.square();return i},c.prototype.pow=h.prototype.pow,h.prototype.modPow=function(e,t){if(e=Y(e),(t=Y(t)).isZero())throw new Error("Cannot take modPow with modulus 0");for(var r=a[1],i=this.mod(t);e.isPositive();){if(i.isZero())return a[0];e.isOdd()&&(r=r.multiply(i).mod(t)),e=e.divide(2),i=i.square().mod(t)}return r},c.prototype.modPow=h.prototype.modPow,h.prototype.compareAbs=function(e){var t=Y(e),r=this.value,i=t.value;return t.isSmall?1:x(r,i)},c.prototype.compareAbs=function(e){var t=Y(e),r=Math.abs(this.value),i=t.value;return t.isSmall?r===(i=Math.abs(i))?0:r>i?1:-1:-1},h.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=Y(e),r=this.value,i=t.value;return this.sign!==t.sign?t.sign?1:-1:t.isSmall?this.sign?-1:1:x(r,i)*(this.sign?-1:1)},h.prototype.compareTo=h.prototype.compare,c.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=Y(e),r=this.value,i=t.value;return t.isSmall?r==i?0:r>i?1:-1:r<0!==t.sign?r<0?-1:1:r<0?1:-1},c.prototype.compareTo=c.prototype.compare,h.prototype.equals=function(e){return 0===this.compare(e)},c.prototype.eq=c.prototype.equals=h.prototype.eq=h.prototype.equals,h.prototype.notEquals=function(e){return 0!==this.compare(e)},c.prototype.neq=c.prototype.notEquals=h.prototype.neq=h.prototype.notEquals,h.prototype.greater=function(e){return this.compare(e)>0},c.prototype.gt=c.prototype.greater=h.prototype.gt=h.prototype.greater,h.prototype.lesser=function(e){return this.compare(e)<0},c.prototype.lt=c.prototype.lesser=h.prototype.lt=h.prototype.lesser,h.prototype.greaterOrEquals=function(e){return this.compare(e)>=0},c.prototype.geq=c.prototype.greaterOrEquals=h.prototype.geq=h.prototype.greaterOrEquals,h.prototype.lesserOrEquals=function(e){return this.compare(e)<=0},c.prototype.leq=c.prototype.lesserOrEquals=h.prototype.leq=h.prototype.lesserOrEquals,h.prototype.isEven=function(){return 0==(1&this.value[0])},c.prototype.isEven=function(){return 0==(1&this.value)},h.prototype.isOdd=function(){return 1==(1&this.value[0])},c.prototype.isOdd=function(){return 1==(1&this.value)},h.prototype.isPositive=function(){return!this.sign},c.prototype.isPositive=function(){return this.value>0},h.prototype.isNegative=function(){return this.sign},c.prototype.isNegative=function(){return this.value<0},h.prototype.isUnit=function(){return!1},c.prototype.isUnit=function(){return 1===Math.abs(this.value)},h.prototype.isZero=function(){return!1},c.prototype.isZero=function(){return 0===this.value},h.prototype.isDivisibleBy=function(e){var t=Y(e),r=t.value;return 0!==r&&(1===r||(2===r?this.isEven():this.mod(t).equals(a[0])))},c.prototype.isDivisibleBy=h.prototype.isDivisibleBy,h.prototype.isPrime=function(e){var t=R(this);if(void 0!==t)return t;var r=this.abs(),i=r.bitLength();if(i<=64)return M(r,[2,325,9375,28178,450775,9780504,1795265022]);for(var s=Math.log(2)*i,n=Math.ceil(!0===e?2*Math.pow(s,2):s),a=[],h=0;h<n;h++)a.push(o(h+2));return M(r,a)},c.prototype.isPrime=h.prototype.isPrime,h.prototype.isProbablePrime=function(e){var t=R(this);if(void 0!==t)return t;for(var r=this.abs(),i=void 0===e?5:e,s=[],n=0;n<i;n++)s.push(o.randBetween(2,r.minus(2)));return M(r,s)},c.prototype.isProbablePrime=h.prototype.isProbablePrime,h.prototype.modInv=function(e){for(var t,r,i,s=o.zero,n=o.one,a=Y(e),h=this.abs();!h.equals(o.zero);)t=a.divide(h),r=s,i=a,s=n,a=h,n=r.subtract(t.multiply(n)),h=i.subtract(t.multiply(h));if(!a.equals(1))throw new Error(this.toString()+" and "+e.toString()+" are not co-prime");return-1===s.compare(0)&&(s=s.add(e)),this.isNegative()?s.negate():s},c.prototype.modInv=h.prototype.modInv,h.prototype.next=function(){var e=this.value;return this.sign?y(e,1,this.sign):new h(_(e,1),this.sign)},c.prototype.next=function(){var e=this.value;return e+1<i?new c(e+1):new h(s,!1)},h.prototype.prev=function(){var e=this.value;return this.sign?new h(_(e,1),!0):y(e,1,this.sign)},c.prototype.prev=function(){var e=this.value;return e-1>-i?new c(e-1):new h(s,!0)};for(var P=[1];2*P[P.length-1]<=t;)P.push(2*P[P.length-1]);var B=P.length,N=P[B-1];function T(e){return("number"==typeof e||"string"==typeof e)&&+Math.abs(e)<=t||e instanceof h&&e.value.length<=1}function C(e,t,r){t=Y(t);for(var i=e.isNegative(),s=t.isNegative(),n=i?e.not():e,a=s?t.not():t,h=0,c=0,u=null,f=null,l=[];!n.isZero()||!a.isZero();)h=(u=O(n,N))[1].toJSNumber(),i&&(h=N-1-h),c=(f=O(a,N))[1].toJSNumber(),s&&(c=N-1-c),n=u[0],a=f[0],l.push(r(h,c));for(var d=0!==r(i?1:0,s?1:0)?o(-1):o(0),p=l.length-1;p>=0;p-=1)d=d.multiply(N).add(o(l[p]));return d}h.prototype.shiftLeft=function(e){if(!T(e))throw new Error(String(e)+" is too large for shifting.");if((e=+e)<0)return this.shiftRight(-e);var t=this;if(t.isZero())return t;for(;e>=B;)t=t.multiply(N),e-=B-1;return t.multiply(P[e])},c.prototype.shiftLeft=h.prototype.shiftLeft,h.prototype.shiftRight=function(e){var t;if(!T(e))throw new Error(String(e)+" is too large for shifting.");if((e=+e)<0)return this.shiftLeft(-e);for(var r=this;e>=B;){if(r.isZero()||r.isNegative()&&r.isUnit())return r;r=(t=O(r,N))[1].isNegative()?t[0].prev():t[0],e-=B-1}return(t=O(r,P[e]))[1].isNegative()?t[0].prev():t[0]},c.prototype.shiftRight=h.prototype.shiftRight,h.prototype.not=function(){return this.negate().prev()},c.prototype.not=h.prototype.not,h.prototype.and=function(e){return C(this,e,function(e,t){return e&t})},c.prototype.and=h.prototype.and,h.prototype.or=function(e){return C(this,e,function(e,t){return e|t})},c.prototype.or=h.prototype.or,h.prototype.xor=function(e){return C(this,e,function(e,t){return e^t})},c.prototype.xor=h.prototype.xor;var q=1<<30,j=(t&-t)*(t&-t)|q;function D(e){var r=e.value,i="number"==typeof r?r|q:r[0]+r[1]*t|j;return i&-i}function U(e,t){return e=Y(e),t=Y(t),e.greater(t)?e:t}function L(e,t){return e=Y(e),t=Y(t),e.lesser(t)?e:t}function z(e,t){if(e=Y(e).abs(),t=Y(t).abs(),e.equals(t))return e;if(e.isZero())return t;if(t.isZero())return e;for(var r,i,s=a[1];e.isEven()&&t.isEven();)r=Math.min(D(e),D(t)),e=e.divide(r),t=t.divide(r),s=s.multiply(r);for(;e.isEven();)e=e.divide(D(e));do{for(;t.isEven();)t=t.divide(D(t));e.greater(t)&&(i=t,t=e,e=i),t=t.subtract(e)}while(!t.isZero());return s.isUnit()?e:e.multiply(s)}h.prototype.bitLength=function(){var e=this;return e.compareTo(o(0))<0&&(e=e.negate().subtract(o(1))),0===e.compareTo(o(0))?o(0):o(function e(t,r){if(r.compareTo(t)<=0){var i=e(t,r.square(r)),s=i.p,n=i.e,a=s.multiply(r);return a.compareTo(t)<=0?{p:a,e:2*n+1}:{p:s,e:2*n}}return{p:o(1),e:0}}(e,o(2)).e).add(o(1))},c.prototype.bitLength=h.prototype.bitLength;var F=function(e,t){for(var r=e.length,i=Math.abs(t),s=0;s<r;s++){if("-"!==(u=e[s].toLowerCase())&&/[a-z0-9]/.test(u)){if(/[0-9]/.test(u)&&+u>=i){if("1"===u&&1===i)continue;throw new Error(u+" is not a valid digit in base "+t+".")}if(u.charCodeAt(0)-87>=i)throw new Error(u+" is not a valid digit in base "+t+".")}}if(2<=t&&t<=36&&r<=n/Math.log(t)){var o=parseInt(e,t);if(isNaN(o))throw new Error(u+" is not a valid digit in base "+t+".");return new c(parseInt(e,t))}t=Y(t);var a=[],h="-"===e[0];for(s=h?1:0;s<e.length;s++){var u,f=(u=e[s].toLowerCase()).charCodeAt(0);if(48<=f&&f<=57)a.push(Y(u));else if(97<=f&&f<=122)a.push(Y(u.charCodeAt(0)-87));else{if("<"!==u)throw new Error(u+" is not a valid character");var l=s;do{s++}while(">"!==e[s]);a.push(Y(e.slice(l+1,s)))}}return H(a,t,h)};function H(e,t,r){var i,s=a[0],n=a[1];for(i=e.length-1;i>=0;i--)s=s.add(e[i].times(n)),n=n.times(t);return r?s.negate():s}function V(e){return e<=35?"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e):"<"+e+">"}function K(e,t){if((t=o(t)).isZero()){if(e.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1)){if(e.isZero())return{value:[0],isNegative:!1};if(e.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-e)).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var r=Array.apply(null,Array(+e-1)).map(Array.prototype.valueOf,[0,1]);return r.unshift([1]),{value:[].concat.apply([],r),isNegative:!1}}var i=!1;if(e.isNegative()&&t.isPositive()&&(i=!0,e=e.abs()),t.equals(1))return e.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(+e)).map(Number.prototype.valueOf,1),isNegative:i};for(var s,n=[],a=e;a.isNegative()||a.compareAbs(t)>=0;){a=(s=a.divmod(t)).quotient;var h=s.remainder;h.isNegative()&&(h=t.minus(h).abs(),a=a.next()),n.push(h.toJSNumber())}return n.push(a.toJSNumber()),{value:n.reverse(),isNegative:i}}function W(e,t){var r=K(e,t);return(r.isNegative?"-":"")+r.value.map(V).join("")}function G(e){if(u(+e)){var t=+e;if(t===b(t))return new c(t);throw new Error("Invalid integer: "+e)}var i="-"===e[0];i&&(e=e.slice(1));var s=e.split(/e/i);if(s.length>2)throw new Error("Invalid integer: "+s.join("e"));if(2===s.length){var n=s[1];if("+"===n[0]&&(n=n.slice(1)),(n=+n)!==b(n)||!u(n))throw new Error("Invalid integer: "+n+" is not a valid exponent.");var o=s[0],a=o.indexOf(".");if(a>=0&&(n-=o.length-a-1,o=o.slice(0,a)+o.slice(a+1)),n<0)throw new Error("Cannot include negative exponent part for integers");e=o+=new Array(n+1).join("0")}if(!/^([0-9][0-9]*)$/.test(e))throw new Error("Invalid integer: "+e);for(var f=[],l=e.length,p=r,g=l-p;l>0;)f.push(+e.slice(g,l)),(g-=p)<0&&(g=0),l-=p;return d(f),new h(f,i)}function Y(e){return"number"==typeof e?function(e){if(u(e)){if(e!==b(e))throw new Error(e+" is not an integer.");return new c(e)}return G(e.toString())}(e):"string"==typeof e?G(e):e}h.prototype.toArray=function(e){return K(this,e)},c.prototype.toArray=function(e){return K(this,e)},h.prototype.toString=function(e){if(void 0===e&&(e=10),10!==e)return W(this,e);for(var t,r=this.value,i=r.length,s=String(r[--i]);--i>=0;)t=String(r[i]),s+="0000000".slice(t.length)+t;return(this.sign?"-":"")+s},c.prototype.toString=function(e){return void 0===e&&(e=10),10!=e?W(this,e):String(this.value)},h.prototype.toJSON=c.prototype.toJSON=function(){return this.toString()},h.prototype.valueOf=function(){return parseInt(this.toString(),10)},h.prototype.toJSNumber=h.prototype.valueOf,c.prototype.valueOf=function(){return this.value},c.prototype.toJSNumber=c.prototype.valueOf;for(var X=0;X<1e3;X++)a[X]=new c(X),X>0&&(a[-X]=new c(-X));return a.one=a[1],a.zero=a[0],a.minusOne=a[-1],a.max=U,a.min=L,a.gcd=z,a.lcm=function(e,t){return e=Y(e).abs(),t=Y(t).abs(),e.divide(z(e,t)).multiply(t)},a.isInstance=function(e){return e instanceof h||e instanceof c},a.randBetween=function(e,r){var i=L(e=Y(e),r=Y(r)),s=U(e,r).subtract(i).add(1);if(s.isSmall)return i.add(Math.floor(Math.random()*s));for(var n=[],o=!0,a=s.value.length-1;a>=0;a--){var u=o?s.value[a]:t,f=b(Math.random()*u);n.unshift(f),f<u&&(o=!1)}return n=l(n),i.add("number"==typeof n?new c(n):new h(n,!1))},a.fromArray=function(e,t,r){return H(e.map(Y),Y(t||10),r)},a}();void 0!==r&&r.hasOwnProperty("exports")&&(r.exports=o),"function"==typeof define&&define.amd&&define("big-integer",[],function(){return o})}],["cashaddrjs","/src/convertBits.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(660,r).validate;r.exports=function(e,t,r,i){for(var s=i?Math.floor(e.length*t/r):Math.ceil(e.length*t/r),n=(1<<r)-1,a=new Uint8Array(s),h=0,c=0,u=0,f=0;f<e.length;++f){var l=e[f];for(o(0<=l&&l>>t==0,"Invalid value: "+l+"."),c=c<<t|l,u+=t;u>=r;)u-=r,a[h]=c>>u&n,++h}return i?o(u<t&&0==(c<<r-u&n),"Input cannot be converted to "+r+" bits without padding, but strict mode was used."):u>0&&(a[h]=c<<r-u&n,++h),a}}],["hd-wallet","/lib/discovery/worker/outside/channel.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WorkerChannel=void 0;var o,a=(o=__browser_require__(664,r))&&o.__esModule?o:{default:o},h=__browser_require__(650,r);function c(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var u=(0,a.default)({concurrency:4,autostart:!0}),f=function(){function e(t,r,i){var s,n,o,a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,n="messageEmitter",o=new h.Emitter,n in s?Object.defineProperty(s,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):s[n]=o,this.getPromise=r,this.getStream=i,this.w=new Promise(function(e){u.push(function(r){var i=t(),s=r;i.onmessage=function(e){var t=e.data;a.messageEmitter.emit(t)},e({worker:i,finish:s})})}),this.messageEmitter.attach(function(e){"promiseRequest"===e.type&&a.handlePromiseRequest(e),"streamRequest"===e.type&&a.handleStreamRequest(e)})}var t,r,i;return t=e,(r=[{key:"postToWorker",value:function(e){this.w.then(function(t){t.worker.postMessage(e)})}},{key:"resPromise",value:function(e){var t=this;return new Promise(function(r,i){t.messageEmitter.attach(function(s,n){"result"===s.type&&(r(s.result),n(),e(),t.w.then(function(e){e.worker.terminate(),e.finish()})),"error"===s.type&&(i(new Error(s.error)),n(),e(),t.w.then(function(e){e.worker.terminate(),e.finish()}))})})}},{key:"handlePromiseRequest",value:function(e){var t=this;this.getPromise(e.request).then(function(r){var i={type:e.request.type,response:r};t.postToWorker({type:"promiseResponseSuccess",id:e.id,response:i})},function(r){var i=null==r.message?r.toString():r.message.toString();t.postToWorker({type:"promiseResponseFailure",failure:i,id:e.id})})}},{key:"handleStreamRequest",value:function(e){var t=this,r=this.getStream(e.request);r.values.attach(function(r){t.postToWorker({type:"streamResponseUpdate",id:e.id,update:{type:e.request.type,response:r}})}),r.finish.attach(function(){t.postToWorker({type:"streamResponseFinish",id:e.id})})}}])&&c(t.prototype,r),i&&c(t,i),e}();e.WorkerChannel=f}],["queue","/index.js",function(e,t,r,i,s,n){var o=__browser_require__(470,r),a=__browser_require__(19,r).EventEmitter;function h(e){if(!(this instanceof h))return new h(e);a.call(this),e=e||{},this.concurrency=e.concurrency||1/0,this.timeout=e.timeout||0,this.autostart=e.autostart||!1,this.results=e.results||null,this.pending=0,this.session=0,this.running=!1,this.jobs=[],this.timers={}}r.exports=h,r.exports.default=h,o(h,a);["pop","shift","indexOf","lastIndexOf"].forEach(function(e){h.prototype[e]=function(){return Array.prototype[e].apply(this.jobs,arguments)}}),h.prototype.slice=function(e,t){return this.jobs=this.jobs.slice(e,t),this},h.prototype.reverse=function(){return this.jobs.reverse(),this};function c(e){this.session++,this.running=!1,this.emit("end",e)}["push","unshift","splice"].forEach(function(e){h.prototype[e]=function(){var t=Array.prototype[e].apply(this.jobs,arguments);return this.autostart&&this.start(),t}}),Object.defineProperty(h.prototype,"length",{get:function(){return this.pending+this.jobs.length}}),h.prototype.start=function(e){if(e&&function(e){var t=this;function r(e){t.end(e)}this.on("error",r),this.on("end",function i(s){t.removeListener("error",r);t.removeListener("end",i);e(s,this.results)})}.call(this,e),this.running=!0,!(this.pending>=this.concurrency))if(0!==this.jobs.length){var t=this,r=this.jobs.shift(),i=!0,s=this.session,n=null,o=!1,a=null,h=r.timeout||this.timeout;h&&(n=setTimeout(function(){o=!0,t.listeners("timeout").length>0?t.emit("timeout",f,r):f()},h),this.timers[n]=n),this.results&&(a=this.results.length,this.results[a]=null),this.pending++,t.emit("start",r);var u=r(f);u&&u.then&&"function"==typeof u.then&&u.then(function(e){return f(null,e)}).catch(function(e){return f(e||!0)}),this.running&&this.jobs.length>0&&this.start()}else 0===this.pending&&c.call(this);function f(e,h){i&&t.session===s&&(i=!1,t.pending--,null!==n&&(delete t.timers[n],clearTimeout(n)),e?t.emit("error",e,r):!1===o&&(null!==a&&(t.results[a]=Array.prototype.slice.call(arguments,1)),t.emit("success",h,r)),t.session===s&&(0===t.pending&&0===t.jobs.length?c.call(t):t.running&&t.start()))}},h.prototype.stop=function(){this.running=!1},h.prototype.end=function(e){(function(){for(var e in this.timers){var t=this.timers[e];delete this.timers[e],clearTimeout(t)}}).call(this),this.jobs.length=0,this.pending=0,c.call(this,e)}}],["hd-wallet","/lib/utils/simple-worker-channel.js",function(e,t,r,i,s,n){"use strict";function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(e,"__esModule",{value:!0}),e.WorkerChannel=void 0;var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,"lastI",0),this.worker=t,this.pending={},this.onMessage=this.receiveMessage.bind(this),this.open()}var t,r,i;return t=e,(r=[{key:"open",value:function(){this.worker.onmessage=this.onMessage}},{key:"destroy",value:function(){this.worker.onmessage=function(){}}},{key:"postMessage",value:function(e){var t=this;return new Promise(function(r){t.pending[t.lastI]=r,t.worker.postMessage(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(r,!0).forEach(function(t){h(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e,{i:t.lastI})),t.lastI++})}},{key:"receiveMessage",value:function(e){var t=e,r=t.data.i,i=this.pending[r];i?(delete t.data.i,i(t.data),delete this.pending[r]):console.warn(new Error("Strange incoming message"))}}])&&a(t.prototype,r),i&&a(t,i),e}();e.WorkerChannel=c}],["hd-wallet","/lib/build-tx/index.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildTx=function(e){var t=e.utxos,r=e.outputs,i=e.height,s=e.feeRate,n=e.segwit,u=e.inputAmounts,f=e.basePath,l=e.network,d=e.changeId,p=e.changeAddress,b=e.dustThreshold;if(0===r.length)return a.empty;if(0===t.length)return{type:"error",error:"NOT-ENOUGH-FUNDS"};var g={exists:!1,id:0};try{g=o.getMax(r)}catch(e){return{type:"error",error:e.message}}var m=o.splitByCompleteness(r),_={type:"false"};try{_=c.coinselect(t,r,i,s,n,g.exists,g.id,b,l)}catch(e){return{type:"error",error:e.message}}if("false"===_.type)return{type:"error",error:"NOT-ENOUGH-FUNDS"};if(m.incomplete.length>0)return a.getNonfinalResult(_);var w=h.createTransaction(t,_.result.inputs,m.complete,_.result.outputs,n,u,f,d,p,l);return a.getFinalResult(_,w)},Object.defineProperty(e,"BuildTxRequest",{enumerable:!0,get:function(){return o.Request}}),Object.defineProperty(e,"BuildTxOutputRequest",{enumerable:!0,get:function(){return o.OutputRequest}}),Object.defineProperty(e,"BuildTxEmptyResult",{enumerable:!0,get:function(){return a.empty}}),Object.defineProperty(e,"BuildTxResult",{enumerable:!0,get:function(){return a.Result}}),Object.defineProperty(e,"BuildTxTransaction",{enumerable:!0,get:function(){return h.Transaction}}),Object.defineProperty(e,"BuildTxOutput",{enumerable:!0,get:function(){return h.Output}}),Object.defineProperty(e,"BuildTxInput",{enumerable:!0,get:function(){return h.Input}});var o=u(__browser_require__(667,r)),a=u(__browser_require__(668,r)),h=u(__browser_require__(669,r)),c=u(__browser_require__(671,r));function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}}],["hd-wallet","/lib/build-tx/request.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.splitByCompleteness=function(e){var t={complete:[],incomplete:[]};return e.forEach(function(e){"complete"===e.type||"send-max"===e.type||"opreturn"===e.type?t.complete.push(e):t.incomplete.push(e)}),t},e.getMax=function(e){var t=e.filter(function(e){return"send-max-noaddress"===e.type||"send-max"===e.type});if(t.length>=2)throw new Error("TWO-SEND-MAX");var r=e.findIndex(function(e){return"send-max-noaddress"===e.type||"send-max"===e.type}),i=1===t.length;return{id:r,exists:i}}}],["hd-wallet","/lib/build-tx/result.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getNonfinalResult=function(e){var t=e.result,r=t.max,i=t.fee,s=t.feePerByte,n=t.bytes,o=t.totalSpent;return{type:"nonfinal",fee:i,feePerByte:s,bytes:n,max:r,totalSpent:o}},e.getFinalResult=function(e,t){var r=e.result,i=r.max,s=r.fee,n=r.feePerByte,o=r.bytes,a=r.totalSpent;return{type:"final",fee:s,feePerByte:n,bytes:o,transaction:t,max:i,totalSpent:a}},e.empty=void 0;o(__browser_require__(669,r)),o(__browser_require__(671,r));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}e.empty={type:"error",error:"EMPTY"}}],["hd-wallet","/lib/build-tx/transaction.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createTransaction=function(e,t,r,i,s,n,o,f,g,m){var _=t.map(function(t){var r=t.id,i=e[r];return function(e,t,r,i){var s={hash:b(Buffer.from(e.transactionHash,"hex")),index:e.index,path:i.concat(p(e.addressPath)),segwit:t};if(r)return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(r,!0).forEach(function(t){d(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},s,{amount:e.value});return s}(i,s,n,o)}),w=i.map(function(e,t){var i=t===r.length,n=r[t];if(!i&&"opreturn"===n.type){var h=n.dataHex;return function(e){var t=Buffer.from(e,"hex"),r={opReturnData:t},i=a.script.nullData.output.encode(t);return{output:r,script:i}}(h)}var c=i?g:n.address,l=e.value;return function(e,t,r,i,s,n,o){return{output:n?{path:[].concat(p(i),[1,s]),segwit:o,value:t}:{address:e,value:t},script:a.address.toOutputScript((0,u.convertCashAddress)(e),r)}}(c,l,m,o,f,i,s)});_.sort(function(e,t){return r=e.hash,i=e.index,s=t.hash,n=t.index,b(r).compare(b(s))||i-n;var r,i,s,n});var y=c.Permutation.fromFunction(w,function(e,t){var r="string"==typeof e.output.value?e.output.value:"0",i="string"==typeof t.output.value?t.output.value:"0";return function(e,t,r,i){return new h.default(t).comparedTo(new h.default(i))||e.compare(r)}(e.script,r,t.script,i)}).map(function(e){return e.output});return{inputs:_,outputs:y}};var o,a=__browser_require__(427,r),h=(o=__browser_require__(571,r))&&o.__esModule?o:{default:o},c=__browser_require__(670,r),u=(f(__browser_require__(671,r)),f(__browser_require__(667,r)),__browser_require__(679,r));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function b(e){for(var t=Buffer.alloc(e.length),r=0,i=e.length-1;r<=i;++r,--i)t[r]=e[i],t[i]=e[r];return t}}],["hd-wallet","/lib/build-tx/permutation.js",function(e,t,r,i,s,n){"use strict";function o(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Permutation=void 0;var h=function(){function e(t,r){var i,s,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=[],(s="sorted")in(i=this)?Object.defineProperty(i,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[s]=n,this.sorted=t,this._permutation=r}var t,r,i;return t=e,i=[{key:"fromFunction",value:function(t,r){var i=new e([],o(t.keys()).sort(function(e,i){return r(t[e],t[i])}));return i.forEach(function(e,r){i.sorted[r]=t[e]}),i}}],(r=[{key:"forEach",value:function(e){this._permutation.forEach(e)}},{key:"map",value:function(t){return new e(this.sorted.map(t),this._permutation)}}])&&a(t.prototype,r),i&&a(t,i),e}();e.Permutation=h}],["hd-wallet","/lib/build-tx/coinselect.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.coinselect=function(e,t,r,i,s,n,o,f,l){var w=function(e,t,r){var i=r?b:g;return e.map(function(e,r){return{id:r,script:{length:i},value:e.value,own:e.own,coinbase:e.coinbase,confirmations:null==e.height?0:1+t-e.height}})}(e,r,s),y=function(e,t){var r={length:m};return e.map(function(e){if("complete"===e.type)return{value:e.amount,script:v(e.address,t)};if("noaddress"===e.type)return{value:e.amount,script:r};if("opreturn"===e.type)return{value:"0",script:{length:2+e.dataHex.length/2}};if("send-max"===e.type)return{script:v(e.address,t)};if("send-max-noaddress"===e.type)return{script:r};throw new Error("WRONG-OUTPUT-TYPE")})}(t,l),E={inputLength:s?b:g,changeOutputLength:s?_:m,dustThreshold:f},S=(n?h.default:c.default)(w,y,i,E);if(!S.inputs)return{type:"false"};var I=S.fee,k=-1===o?-1:S.outputs[o].value,A=S.outputs.filter(function(e,r){return r!==t.length}).map(function(e){return e.value}).reduce(function(e,t){return new a.default(e).plus(t)},new a.default(0)).plus(new a.default(S.fee)),O=(0,u.transactionBytes)(S.inputs,S.outputs),x=I/O;return{type:"true",result:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(r,!0).forEach(function(t){p(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},S,{fee:S.fee.toString(),feePerByte:x.toString(),bytes:O,max:k,totalSpent:A.toString()})}};var o=__browser_require__(427,r),a=l(__browser_require__(571,r)),h=l(__browser_require__(672,r)),c=l(__browser_require__(674,r)),u=__browser_require__(673,r),f=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}t.default=e}(__browser_require__(667,r)),__browser_require__(679,r));function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=51,g=109,m=25,_=23,w=22,y=34;function v(e,t){var r,i=function(e){try{return o.address.fromBech32(e),!0}catch(e){return!1}}(e);i?r=20===o.address.fromBech32(e).data.length:r=o.address.fromBase58Check((0,f.convertCashAddress)(e)).version===t.pubKeyHash;return{length:i?r?w:y:r?m:_}}}],["hd-wallet","/lib/build-tx/coinselect-lib/outputs/split.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t,r,i){var s=i.inputLength,n=i.changeOutputLength,o=i.dustThreshold,c=i.coinbase||100,u=h.bignumberOrNaN(r);if(u.isNaN()||!u.isInteger())return{};var f=u.toNumber(),l=function(e,t){return e.filter(function(e){return!e.coinbase||e.confirmations>=t})}(e,c),d=h.transactionBytes(l,t),p=f*d,b={fee:p.toString()};if(0===t.length)return b;var g=h.sumOrNaN(l);if(g.isNaN())return b;var m=h.sumOrNaN(t,!0),_=g.minus(m).minus(new a.default(p));if(_.comparedTo(new a.default(0))<0)return b;var w=t.reduce(function(e,t){return e+(h.bignumberOrNaN(t.value).isNaN()?1:0)},0);if("0"===_.toString()&&0===w)return h.finalize(l,t,f,s,n);var y=_.div(new a.default(w)),v=h.dustThreshold(f,s,n,o);if(!t.every(function(e){return e.value!==undefined||y.comparedTo(new a.default(v))>0}))return b;var E=t.map(function(e){if(e.value!==undefined)return e;var t={};return Object.keys(e).forEach(function(r){t[r]=e[r]}),t.value=y.toString(),t});return h.finalize(l,E,f,s,n,o)};var o,a=(o=__browser_require__(571,r))&&o.__esModule?o:{default:o},h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}(__browser_require__(673,r))}],["hd-wallet","/lib/build-tx/coinselect-lib/utils.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.inputBytes=f,e.outputBytes=l,e.dustThreshold=d,e.transactionBytes=p,e.uintOrNaN=function(e){return"number"!=typeof e?NaN:Number.isFinite(e)?Math.floor(e)!==e?NaN:e<0?NaN:e:NaN},e.bignumberOrNaN=b,e.sumOrNaN=g,e.finalize=function(e,t,r,i,s,n){var o=t,h=p(e,o),c=l({script:{length:s}}),u=new a.default(r*(h+c)),f=g(e),b=g(o),m=!f.isNaN()&&!b.isNaN(),_=m?g(e).minus(g(o).plus(u)):new a.default(0),w=d(r,i,s,n);_.comparedTo(new a.default(w))>0&&(o=o.concat({value:_.toString(),script:{length:s}}));if(!m)return{fee:(r*h).toString()};var y=g(e).minus(g(o)).toString();return{inputs:e,outputs:o,fee:y}},e.anyOf=function(e){return function(t,r,i,s,n){for(var o={fee:1/0},a=0;a<e.length;a++){var h=e[a];if((o=h(t,r,i,s,n)).inputs)return o}return o}},e.utxoScore=function(e,t){return new a.default(e.value).minus(new a.default(t*f(e)))};var o,a=(o=__browser_require__(571,r))&&o.__esModule?o:{default:o};var h=11,c=41,u=9;function f(e){if(null==e.script.length)throw new Error("Null script length");return c+e.script.length}function l(e){if(null==e.script.length)throw new Error("Null script length");return u+e.script.length}function d(e,t,r,i){var s=p([{script:{length:t}}],[{script:{length:r}}])*e;return Math.max(i,s)}function p(e,t){return h+e.reduce(function(e,t){return e+f(t)},0)+t.reduce(function(e,t){return e+l(t)},0)}function b(e){if(e instanceof a.default)return e;if("string"!=typeof e)return new a.default(NaN);try{var t=new a.default(e);return t.toFixed()===e&&t.isInteger()?t:new a.default(NaN)}catch(e){return new a.default(NaN)}}function g(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return e.reduce(function(e,r){if(Number.isNaN(e))return new a.default(NaN);var i=b(r.value);return i.isNaN()?t?new a.default(0).plus(e):new a.default(NaN):i.plus(e)},new a.default(0))}}],["hd-wallet","/lib/build-tx/coinselect-lib/index.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t,r,i){var s=e.sort(h.score(r));return(0,u.default)(c.anyOf([(0,a.default)(.5),o.default]),i)(s,t,r,i)};var o=l(__browser_require__(675,r)),a=l(__browser_require__(676,r)),h=f(__browser_require__(677,r)),c=f(__browser_require__(673,r)),u=l(__browser_require__(678,r));function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}}],["hd-wallet","/lib/build-tx/coinselect-lib/inputs/accumulative.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t,r,i){var s=i.changeOutputLength,n=i.dustThreshold,o=i.inputLength,c=h.bignumberOrNaN(r);if(c.isNaN()||!c.isInteger())return{};for(var u=c.toNumber(),f=h.transactionBytes([],t),l=new a.default(0),d=[],p=h.sumOrNaN(t),b=0;b<e.length;++b){var g=e[b],m=h.inputBytes(g),_=u*m,w=h.bignumberOrNaN(g.value);if(w.isNaN()||w.comparedTo(new a.default(_))<0){if(b===e.length-1)return{fee:(u*(f+m)).toString()}}else{f+=m,l=l.plus(w),d.push(g);var y=u*f,v=p.isNaN()?new a.default(0):p.plus(new a.default(y));if(l.comparedTo(v)>=0)return h.finalize(d,t,u,o,s,n)}}return{fee:(u*f).toString()}};var o,a=(o=__browser_require__(571,r))&&o.__esModule?o:{default:o},h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}(__browser_require__(673,r))}],["hd-wallet","/lib/build-tx/coinselect-lib/inputs/bnb.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){return function(t,r,i,s){var n=s.inputLength,o=s.changeOutputLength,u=s.dustThreshold,f=h.bignumberOrNaN(i);if(f.isNaN()||!f.isInteger())return{};var l=f.toNumber(),d=h.outputBytes({script:{length:o}})*l,p=h.inputBytes({script:{length:n}})*l,b=Math.floor((p+d)*e),g=h.transactionBytes([],r),m=f.times(g),_=h.sumOrNaN(r);if(_.isNaN())return{fee:"0"};var w=_.plus(m),y=function(e,t){return e.map(function(e){var r=h.bignumberOrNaN(e.value);if(r.isNaN())return{utxo:e,effectiveValue:new a.default(0)};var i=h.inputBytes(e)*t,s=r.minus(i);return{utxo:e,effectiveValue:s}})}(t,l).filter(function(e){return e.effectiveValue.comparedTo(new a.default(0))>0}).sort(function(e,t){var r=t.effectiveValue.minus(e.effectiveValue).toNumber();return 0!==r?r:e.utxo.i-t.utxo.i}),v=function(e,t,r){if(0===e.length)return null;var i=c,s=[],n=new a.default(0),o=!1,h=!1,u=e.reduce(function(e,t){return t.effectiveValue.plus(e)},new a.default(0)),f=t.plus(r),l=0;for(;!o;){if(i<=0)return null;if(n.comparedTo(f)>0)h=!0;else if(n.comparedTo(t)>=0)o=!0;else if(l>=e.length)h=!0;else if(n.plus(u).comparedTo(t)<0){if(0===l)return null;h=!0}else u=u.minus(e[l].effectiveValue),s[l]=!0,n=n.plus(e[l].effectiveValue),l++;if(h){for(h=!1,l--;!s[l];)if(u=u.plus(e[l].effectiveValue),--l<0)return null;s[l]=!1,n=n.minus(e[l].effectiveValue),l++}i--}return s}(y,w,b);if(null!==v){for(var E=[],S=0;S<y.length;S++)v[S]&&E.push(y[S].utxo);return h.finalize(E,r,l,n,o,u)}return{fee:"0"}}};var o,a=(o=__browser_require__(571,r))&&o.__esModule?o:{default:o},h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}(__browser_require__(673,r));var c=1e6}],["hd-wallet","/lib/build-tx/coinselect-lib/sorts.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.score=function(e){return function(t,r){var i=o.utxoScore(t,e).comparedTo(o.utxoScore(r,e));return 0===i?t.i-r.i:-i}};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}(__browser_require__(673,r))}],["hd-wallet","/lib/build-tx/coinselect-lib/tryconfirmed.js",function(e,t,r,i,s,n){"use strict";function o(e,t,r){for(var i=[],s=[],n=0;n<e.length;n++){var o=e[n];(o.own?o.confirmations>=t:o.confirmations>=r)?i.push(o):s.push(o)}return{usable:i,unusable:s}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t){var r=t.own||1,i=t.other||6,s=t.coinbase||100;return function(t,n,a,h){t.forEach(function(e){if(null==e.coinbase||null==e.own||null==e.confirmations)throw new Error("Missing information.")});var c=function(e,t){return e.filter(function(e){return!e.coinbase||e.confirmations>=t})}(t,s);if(0===c.length)return{};var u,f=[];for(u=r;u>0;u--)f.push({other:i,own:u});for(u=i-1;u>0;u--)f.push({other:u,own:1});f.push({other:1,own:0}),f.push({other:0,own:0});var l=c,d=[];for(u=0;u<f.length;u++){var p=f[u],b=o(l,p.own,p.other);if(b.usable.length>0){d=d.concat(b.usable);var g=b.unusable;l=g;var m=e(d,n,a,h);if(m.inputs)return m;if(0===l.length)return m}}throw new Error("Unexpected unreturned result")}}}],["hd-wallet","/lib/utils/bchaddr.js",function(e,t,r,i,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.convertCashAddress=void 0;var o,a=(o=__browser_require__(657,r))&&o.__esModule?o:{default:o};e.convertCashAddress=function(e){try{if(a.default.isCashAddress(e))return a.default.toLegacyAddress(e)}catch(e){}return e}}],["trezor-connect","/lib/core/methods/tx/index.js",function(e,t,r,i,s,n){"use strict";e.__esModule=!0;var o={fixPath:!0,convertMultisigPubKey:!0};e.convertMultisigPubKey=e.fixPath=void 0;var a=__browser_require__(560,r),h=__browser_require__(681,r);Object.keys(h).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(o,t)||(e[t]=h[t]))});var c=__browser_require__(683,r);Object.keys(c).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(o,t)||(e[t]=c[t]))});var u=__browser_require__(686,r);Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(o,t)||(e[t]=u[t]))});e.fixPath=(e=>(e.address_n&&Array.isArray(e.address_n)&&(e.address_n=e.address_n.map(e=>e>>>0)),e));e.convertMultisigPubKey=((e,t)=>(t.multisig&&t.multisig.pubkeys&&t.multisig.pubkeys.forEach(t=>{"string"==typeof t.node&&(t.node=(0,a.xpubToHDNodeType)(t.node,e))}),t))}],["trezor-connect","/lib/core/methods/tx/inputs.js",function(e,t,r,i,s,n){"use strict";e.__esModule=!0,e.inputToTrezor=e.inputToHD=e.validateTrezorInputs=void 0;var o=__browser_require__(682,r),a=__browser_require__(413,r),h=__browser_require__(680,r),c=__browser_require__(626,r);e.validateTrezorInputs=((e,t)=>{const r=e.map(h.fixPath).map(h.convertMultisigPubKey.bind(null,t.network));for(const e of r){(0,a.validatePath)(e.address_n);const t=(0,a.isSegwitPath)(e.address_n);(0,c.validateParams)(e,[{name:"prev_hash",type:"string",obligatory:!0},{name:"prev_index",type:"number",obligatory:!0},{name:"script_type",type:"string"},{name:"amount",type:"string",obligatory:t},{name:"sequence",type:"number"},{name:"multisig",type:"object"}])}return r});e.inputToHD=(e=>({hash:(0,o.reverseBuffer)(Buffer.from(e.prev_hash,"hex")),index:e.prev_index,path:e.address_n,amount:e.amount,segwit:(0,a.isSegwitPath)(e.address_n)}));e.inputToTrezor=((e,t)=>{const{hash:r,index:i,path:s,amount:n}=e;return{address_n:s,prev_index:i,prev_hash:(0,o.reverseBuffer)(r).toString("hex"),script_type:(0,a.getScriptType)(s),amount:n,sequence:t}})}],["trezor-connect","/lib/utils/bufferUtils.js",function(e,t,r,i,s,n){"use strict";e.__esModule=!0,e.reverseBuffer=void 0;e.reverseBuffer=(e=>{const t=Buffer.alloc(e.length);return e.copy(t),[].reverse.call(t),t})}],["trezor-connect","/lib/core/methods/tx/outputs.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.outputToTrezor=e.validateHDOutput=e.validateTrezorOutputs=void 0;var a=o(__browser_require__(684,r)),h=__browser_require__(413,r),c=__browser_require__(685,r),u=__browser_require__(680,r),f=__browser_require__(626,r);e.validateTrezorOutputs=((e,t)=>{const r=e.map(u.fixPath).map(u.convertMultisigPubKey.bind(null,t.network));for(const e of r){if((0,f.validateParams)(e,[{name:"address_n",type:"array"},{name:"address",type:"string"},{name:"amount",type:"string"},{name:"op_return_data",type:"string"},{name:"multisig",type:"object"}]),Object.prototype.hasOwnProperty.call(e,"address_n")&&Object.prototype.hasOwnProperty.call(e,"address"))throw new Error("Cannot use address and address_n in one output");if(e.address_n){const t=(0,h.getOutputScriptType)(e.address_n);if(e.script_type!==t)throw new Error(`Output change script_type should be set to ${t}`)}if("string"==typeof e.address&&!(0,c.isValidAddress)(e.address,t))throw new Error(`Invalid ${t.label} output address ${e.address}`)}return r});e.validateHDOutput=((e,t)=>{const r=e=>{if(!(0,c.isValidAddress)(e,t))throw new Error(`Invalid ${t.label} output address format`)};switch(e.type){case"opreturn":return(0,f.validateParams)(e,[{name:"dataHex",type:"string"}]),{type:"opreturn",dataHex:e.dataHex||""};case"send-max":return(0,f.validateParams)(e,[{name:"address",type:"string",obligatory:!0}]),r(e.address),{type:"send-max",address:e.address};case"noaddress":return(0,f.validateParams)(e,[{name:"amount",type:"string",obligatory:!0}]),{type:"noaddress",amount:e.amount};case"send-max-noaddress":return{type:"send-max-noaddress"};default:return(0,f.validateParams)(e,[{name:"amount",type:"string",obligatory:!0},{name:"address",type:"string",obligatory:!0}]),r(e.address),{type:"complete",address:e.address,amount:e.amount}}});e.outputToTrezor=((e,t)=>{if(e.opReturnData){if(Object.prototype.hasOwnProperty.call(e,"value"))throw new Error("Wrong type.");return{amount:"0",op_return_data:e.opReturnData.toString("hex"),script_type:"PAYTOOPRETURN"}}if(!e.address&&!e.path)throw new Error("Both address and path of an output cannot be null.");if(e.path)return{address_n:e.path,amount:e.value,script_type:(0,h.getOutputScriptType)(e.path)};const{address:r,value:i}=e;if("string"!=typeof r)throw new Error("Wrong address type.");const s=!!t.cashAddrPrefix;return(0,c.isScriptHash)(r,t),{address:s?a.default.toCashAddress(r):r,amount:i,script_type:"PAYTOADDRESS"}})}],["bchaddrjs","/src/bchaddr.js",function(e,t,r,i,s,n){var o=__browser_require__(499,r),a=__browser_require__(658,r),h={Legacy:"legacy",Bitpay:"bitpay",Cashaddr:"cashaddr"},c={Mainnet:"mainnet",Testnet:"testnet"},u={};function f(e){return b(e).format}function l(e){return b(e).network}function d(e){return b(e).type}u.P2PKH="p2pkh",u.P2SH="p2sh";var p={};function b(e){try{return function(e){try{var t=o.decode(e);if(t.length!==g)throw new _;var r=t[0],i=Array.prototype.slice.call(t,1);switch(r){case p[h.Legacy][c.Mainnet][u.P2PKH]:return{hash:i,format:h.Legacy,network:c.Mainnet,type:u.P2PKH};case p[h.Legacy][c.Mainnet][u.P2SH]:return{hash:i,format:h.Legacy,network:c.Mainnet,type:u.P2SH};case p[h.Legacy][c.Testnet][u.P2PKH]:return{hash:i,format:h.Legacy,network:c.Testnet,type:u.P2PKH};case p[h.Legacy][c.Testnet][u.P2SH]:return{hash:i,format:h.Legacy,network:c.Testnet,type:u.P2SH};case p[h.Bitpay][c.Mainnet][u.P2PKH]:return{hash:i,format:h.Bitpay,network:c.Mainnet,type:u.P2PKH};case p[h.Bitpay][c.Mainnet][u.P2SH]:return{hash:i,format:h.Bitpay,network:c.Mainnet,type:u.P2SH}}}catch(e){}throw new _}(e)}catch(e){}try{return function(e){if(-1!==e.indexOf(":"))try{return m(e)}catch(e){}else for(var t=["bitcoincash","bchtest","bchreg"],r=0;r<t.length;++r)try{var i=t[r];return m(i+":"+e)}catch(e){}throw new _}(e)}catch(e){}throw new _}p[h.Legacy]={},p[h.Legacy][c.Mainnet]={},p[h.Legacy][c.Mainnet][u.P2PKH]=0,p[h.Legacy][c.Mainnet][u.P2SH]=5,p[h.Legacy][c.Testnet]={},p[h.Legacy][c.Testnet][u.P2PKH]=111,p[h.Legacy][c.Testnet][u.P2SH]=196,p[h.Bitpay]={},p[h.Bitpay][c.Mainnet]={},p[h.Bitpay][c.Mainnet][u.P2PKH]=28,p[h.Bitpay][c.Mainnet][u.P2SH]=40,p[h.Bitpay][c.Testnet]={},p[h.Bitpay][c.Testnet][u.P2PKH]=111,p[h.Bitpay][c.Testnet][u.P2SH]=196;var g=21;function m(e){try{var t=a.decode(e),r=Array.prototype.slice.call(t.hash,0),i="P2PKH"===t.type?u.P2PKH:u.P2SH;switch(t.prefix){case"bitcoincash":return{hash:r,format:h.Cashaddr,network:c.Mainnet,type:i};case"bchtest":case"bchreg":return{hash:r,format:h.Cashaddr,network:c.Testnet,type:i}}}catch(e){}throw new _}function _(){var e=new Error;this.name=e.name="InvalidAddressError",this.message=e.message="Received an invalid Bitcoin Cash address as input.",this.stack=e.stack}_.prototype=Object.create(Error.prototype),r.exports={Format:h,Network:c,Type:u,isValidAddress:function(e){try{return b(e),!0}catch(e){return!1}},detectAddressFormat:f,detectAddressNetwork:l,detectAddressType:d,toLegacyAddress:function(e){var t=b(e);return t.format===h.Legacy?e:function(e){var t=p[h.Legacy][e.network][e.type],r=Buffer.alloc(1+e.hash.length);return r[0]=t,r.set(e.hash,1),o.encode(r)}(t)},toBitpayAddress:function(e){var t=b(e);return t.format===h.Bitpay?e:function(e){var t=p[h.Bitpay][e.network][e.type],r=Buffer.alloc(1+e.hash.length);return r[0]=t,r.set(e.hash,1),o.encode(r)}(t)},toCashAddress:function(e){return function(e){var t=e.network===c.Mainnet?"bitcoincash":"bchtest",r=e.type===u.P2PKH?"P2PKH":"P2SH",i=new Uint8Array(e.hash);return a.encode(t,r,i)}(b(e))},isLegacyAddress:function(e){return f(e)===h.Legacy},isBitpayAddress:function(e){return f(e)===h.Bitpay},isCashAddress:function(e){return f(e)===h.Cashaddr},isMainnetAddress:function(e){return l(e)===c.Mainnet},isTestnetAddress:function(e){return l(e)===c.Testnet},isP2PKHAddress:function(e){return d(e)===u.P2PKH},isP2SHAddress:function(e){return d(e)===u.P2SH},InvalidAddressError:_}}],["trezor-connect","/lib/utils/addressUtils.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.getAddressHash=e.getAddressScriptType=e.isScriptHash=e.isValidAddress=void 0;var a=__browser_require__(427,r),h=o(__browser_require__(684,r));const c=e=>{try{return h.default.isCashAddress(e)}catch(e){return!1}};e.isValidAddress=((e,t)=>t.cashAddrPrefix?c(e):((e,t)=>{try{const r=a.address.fromBase58Check(e);if(r.version!==t.pubKeyHash&&r.version!==t.scriptHash)return!1}catch(e){return!1}return!0})(e,t.network)||((e,t)=>{try{const r=a.address.fromBech32(e);if(0!==r.version||r.prefix!==t.bech32)return!1}catch(e){return!1}return!0})(e,t.network));const u=e=>{try{return a.address.fromBech32(e),!0}catch(e){return!1}},f=(e,t)=>{if(u(e)){const t=a.address.fromBech32(e);if(20===t.data.length)return!1;if(32===t.data.length)return!0}else{t.cashAddrPrefix&&(e=h.default.toLegacyAddress(e));const r=a.address.fromBase58Check(e);if(r.version===t.network.pubKeyHash)return!1;if(r.version===t.network.scriptHash)return!0}throw new Error("Unknown address type.")};e.isScriptHash=f;e.getAddressScriptType=((e,t)=>u(e)?"PAYTOWITNESS":f(e,t)?"PAYTOSCRIPTHASH":"PAYTOADDRESS");e.getAddressHash=(e=>u(e)?a.address.fromBech32(e).data:c(e)?a.address.fromBase58Check(h.default.toLegacyAddress(e)).hash:a.address.fromBase58Check(e).hash)}],["trezor-connect","/lib/core/methods/tx/refTx.js",function(e,t,r,i,s,n){"use strict";e.__esModule=!0,e.transformReferencedTransactions=e.getReferencedTransactions=void 0;var o=__browser_require__(427,r),a=__browser_require__(682,r);e.getReferencedTransactions=(e=>{const t=e.filter(e=>!e.segwit);return t.length<1?[]:t.reduce((e,t)=>{const r=(0,a.reverseBuffer)(t.hash).toString("hex");return e.includes(r)?e:e.concat(r)},[])});e.transformReferencedTransactions=(e=>e.map(e=>{const t=e.getExtraData(),r=o.coins.isZcash(e.network)?parseInt(e.versionGroupId,16):null;return{version:e.isDashSpecialTransaction()?e.version|e.type<<16:e.version,hash:e.getId(),inputs:e.ins.map(e=>({prev_index:e.index,sequence:e.sequence,prev_hash:(0,a.reverseBuffer)(e.hash).toString("hex"),script_sig:e.script.toString("hex")})),bin_outputs:e.outs.map(e=>({amount:"number"==typeof e.value?e.value.toString():e.value,script_pubkey:e.script.toString("hex")})),extra_data:t?t.toString("hex"):null,lock_time:e.locktime,timestamp:e.timestamp,version_group_id:r,expiry:e.expiry}}))}],["trezor-connect","/lib/core/methods/helpers/signtx.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var a=o(__browser_require__(384,r));function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const u=(e,t,r,i)=>{const s=e.details,n=s.tx_hash;if(n){const r=t[n.toLowerCase()];if(!r)throw new Error(`Requested unknown tx: ${n}`);return((e,t,r,i,s)=>{const n=+r;if("TXINPUT"===t)return{inputs:[e.inputs[n]]};if("TXOUTPUT"===t)return{bin_outputs:[e.bin_outputs[n]]};if("TXEXTRADATA"===t){if(null==i)throw new Error("Missing extra_data_len");const t=+i;if(null==s)throw new Error("Missing extra_data_offset");const r=+s;if(null==e.extra_data)throw new Error("No extra data for transaction "+e.hash);return{extra_data:e.extra_data.substring(2*r,2*(r+t))}}if("TXMETA"===t){const t=e.bin_outputs.length,r=e.extra_data,i={version:e.version,lock_time:e.lock_time,inputs_cnt:e.inputs.length,outputs_cnt:t,timestamp:e.timestamp,version_group_id:e.version_group_id};return"string"==typeof r&&0!==r.length?c({},i,{extra_data_len:r.length/2}):i}throw new Error(`Unknown request type: ${t}`)})(r,e.request_type,s.request_index,s.extra_data_len,s.extra_data_offset)}return((e,t,r,i)=>{const s=+i;if("TXINPUT"===r)return{inputs:[e[s]]};if("TXOUTPUT"===r)return{outputs:[t[s]]};if("TXMETA"===r)throw new Error("Cannot read TXMETA from signed transaction");if("TXEXTRADATA"===r)throw new Error("Cannot read TXEXTRADATA from signed transaction");throw new Error(`Unknown request type: ${r}`)})(r,i,e.request_type,s.request_index)},f=async(e,t,r,i,s,n,o)=>{if(((e,t,r)=>{if(e){const i=e.signature_index,s=e.signature,n=e.serialized_tx;if(null!=n&&(t.serialized+=n),null!=i){if(null==s)throw new Error("Unexpected null in trezor:TxRequestSerialized signature.");r[i]=s}}})(t.serialized,r,i),"TXFINISHED"===t.request_type)return Promise.resolve({signatures:i,serializedTx:r.serialized});const a=u(t,s,n,o),h=await e("TxAck","TxRequest",{tx:a});return await f(e,h.message,r,i,s,n,o)};e.default=(async(e,t,r,i,s,n)=>{const o={};i.forEach(e=>{o[e.hash.toLowerCase()]=e});const a=await e("SignTx","TxRequest",c({},s,{inputs_count:t.length,outputs_count:r.length,coin_name:n.name}));return await f(e,a.message,{serialized:""},[],o,t,r)})}],["trezor-connect","/lib/core/methods/helpers/signtxVerify.js",function(e,t,r,i,s,n){"use strict";e.__esModule=!0,e.default=e.derivePubKeyHash=void 0;var o=__browser_require__(427,r),a=__browser_require__(685,r),h=__browser_require__(413,r);const c=[];o.Transaction.USE_STRING_VALUES=!0;const u=async(e,t,r)=>{if(5===e.length){const i=await t(e.slice(0,4),r);return o.HDNode.fromBase58(i.xpub,r.network,!0).derive(e[e.length-1]).getIdentifier()}const i=await t(e,r);return o.HDNode.fromBase58(i.xpub,r.network,!0).getIdentifier()};e.derivePubKeyHash=u;const f=async(e,t,r)=>{if(t.op_return_data)return o.script.nullData.output.encode(Buffer.from(t.op_return_data,"hex"));if(!t.address_n&&!t.address)throw new Error("deriveOutputScript: Neither address or address_n is set");const i=t.address_n?(0,h.getOutputScriptType)(t.address_n):(0,a.getAddressScriptType)(t.address,r),s=t.address_n?await u(t.address_n,e,r):(0,a.getAddressHash)(t.address);if("PAYTOADDRESS"===i)return o.script.pubKeyHash.output.encode(s);if("PAYTOSCRIPTHASH"===i)return o.script.scriptHash.output.encode(s);if("PAYTOP2SHWITNESS"===i)return(e=>{const t=Buffer.alloc(e.length+2);t[0]=0,t[1]=20,e.copy(t,2);const r=o.crypto.hash160(t),i=Buffer.alloc(23);return i[0]=169,i[1]=20,i[22]=135,r.copy(i,2),i})(s);if("PAYTOWITNESS"===i)return(e=>{if(32!==e.length&&20!==e.length)throw new Error("deriveBech32Output: Unknown size for witness program v0.");const t=Buffer.alloc(e.length+2);return t[0]=0,t[1]=e.length,e.copy(t,2),t})(s);throw new Error("Unknown script type "+i)};e.default=(async(e,t,r,i,s)=>{c.splice(0,c.length);const n=o.Transaction.fromHex(i,s.network);if(t.length!==n.ins.length)throw new Error("Signed transaction has wrong length.");if(r.length!==n.outs.length)throw new Error("Signed transaction has wrong length.");for(let t=0;t<r.length;t++){const i=n.outs[t].script;if(r[t].amount){const e=r[t].amount;if(e!==n.outs[t].value)throw new Error(`Wrong output amount at output ${t}. Requested: ${e}, signed: ${n.outs[t].value}`)}if(0!==(await f(e,r[t],s)).compare(i))throw new Error(`Output ${t} scripts differ.`)}})}],["trezor-connect","/lib/core/methods/CustomMessage.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(622,r)),c=__browser_require__(626,r),u=o(__browser_require__(388,r)),f=__browser_require__(621,r);e.default=class extends h.default{constructor(e){super(e),this.requiredPermissions=["custom-message","read","write"],this.info="Custom message";const t=e.payload;if((0,c.validateParams)(e.payload,[{name:"message",type:"string",obligatory:!0},{name:"params",type:"object",obligatory:!0}]),Object.prototype.hasOwnProperty.call(t,"messages"))try{JSON.parse(JSON.stringify(t.messages))}catch(e){throw new Error('Parameter "messages" has invalid type. JSON expected.')}this.params={customMessages:t.messages,message:t.message,params:t.params}}getCustomMessages(){return this.params.customMessages}async run(){if("trezor.io"===this.device.features.vendor||"bitcointrezor.com"===this.device.features.vendor)throw new Error('Cannot use custom message on device with official firmware. Change device "vendor" field.');const e=await this.device.getCommands()._commonCall(this.params.message,this.params.params);this.postMessage((0,f.UiMessage)(u.CUSTOM_MESSAGE_REQUEST,e));const t=(await this.createUiPromise(u.CUSTOM_MESSAGE_RESPONSE,this.device).promise).payload;return(0,c.validateParams)(t,[{name:"message",type:"string",obligatory:!0}]),"release"===t.message.toLowerCase()?e:((0,c.validateParams)(t,[{name:"params",type:"object",obligatory:!0}]),this.params.message=t.message,this.params.params=t.params,await this.run())}}}],["trezor-connect","/lib/core/methods/debuglink/DebugLinkDecision.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var a=o(__browser_require__(622,r)),h=__browser_require__(626,r);e.default=class extends a.default{constructor(e){super(e),this.useDevice=!0,this.debugLink=!0,this.useUi=!1,this.requiredPermissions=["management"];const t=e.payload;(0,h.validateParams)(t,[{name:"yes_no",type:"boolean"},{name:"up_down",type:"boolean"},{name:"input",type:"string"}]),this.params={yes_no:t.yes_no,up_down:t.up_down,input:t.input}}async run(){if(!this.device.hasDebugLink)throw new Error("Device is not a debug link");if(!this.device.isUsedHere())throw new Error("Device is not acquired!");return await this.device.getCommands().debugLinkDecision(this.params),{debugLink:!0}}}}],["trezor-connect","/lib/core/methods/debuglink/DebugLinkGetState.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var a=o(__browser_require__(384,r)),h=o(__browser_require__(622,r));function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}e.default=class extends h.default{constructor(e){super(e),this.useDevice=!0,this.debugLink=!0,this.useUi=!1,this.requiredPermissions=["management"]}async run(){if(!this.device.hasDebugLink)throw new Error("Device is not a debug link");return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},await this.device.getCommands().debugLinkGetState(),{debugLink:!0})}}}],["trezor-connect","/lib/core/methods/EthereumGetAddress.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(384,r)),c=a(__browser_require__(622,r)),u=__browser_require__(626,r),f=__browser_require__(413,r),l=__browser_require__(563,r),d=__browser_require__(412,r),p=__browser_require__(570,r),b=o(__browser_require__(388,r)),g=__browser_require__(621,r);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}e.default=class extends c.default{constructor(e){super(e),(0,h.default)(this,"confirmed",!1),(0,h.default)(this,"progress",0),this.requiredPermissions=["read"],this.hasBundle=Object.prototype.hasOwnProperty.call(e.payload,"bundle");const t=this.hasBundle?e.payload:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e.payload,{bundle:[e.payload]});(0,u.validateParams)(t,[{name:"bundle",type:"array"},{name:"useEventListener",type:"boolean"}]);const r=[];if(t.bundle.forEach(e=>{(0,u.validateParams)(e,[{name:"path",obligatory:!0},{name:"address",type:"string"},{name:"showOnTrezor",type:"boolean"}]);const t=(0,f.validatePath)(e.path,3),i=(0,d.getEthereumNetwork)(t);this.firmwareRange=(0,u.getFirmwareRange)(this.name,i,this.firmwareRange);let s=!0;Object.prototype.hasOwnProperty.call(e,"showOnTrezor")&&(s=e.showOnTrezor),r.push({path:t,address:e.address,network:i,showOnTrezor:s})}),1===r.length)this.info=(0,l.getNetworkLabel)("Export #NETWORK address",r[0].network);else{const e=r.map(e=>e.network),t=(0,d.getUniqueNetworks)(e);1===t.length&&t[0]?this.info=(0,l.getNetworkLabel)("Export multiple #NETWORK addresses",t[0]):this.info="Export multiple addresses"}const i=t.useEventListener&&1===r.length&&"string"==typeof r[0].address&&r[0].showOnTrezor;this.confirmed=i,this.useUi=!i,this.params=r}getButtonRequestData(e){return"ButtonRequest_Address"===e?{type:"address",serializedPath:(0,f.getSerializedPath)(this.params[this.progress].path),address:this.params[this.progress].address||"not-set"}:null}async confirmation(){if(this.confirmed)return!0;await this.getPopupPromise().promise;const e=this.createUiPromise(b.RECEIVE_CONFIRMATION,this.device),t=this.info;this.postMessage((0,g.UiMessage)(b.REQUEST_CONFIRMATION,{view:"export-address",label:t}));const r=await e.promise;return this.confirmed=r.payload,this.confirmed}async noBackupConfirmation(){await this.getPopupPromise().promise;const e=this.createUiPromise(b.RECEIVE_CONFIRMATION,this.device);return this.postMessage((0,g.UiMessage)(b.REQUEST_CONFIRMATION,{view:"no-backup"})),(await e.promise).payload}async run(){const e=[];for(let t=0;t<this.params.length;t++){const r=this.params[t];if(r.showOnTrezor){const e=await this.device.getCommands().ethereumGetAddress(r.path,r.network,!1);if("string"==typeof r.address){if((0,p.stripHexPrefix)(r.address).toLowerCase()!==(0,p.stripHexPrefix)(e.address).toLowerCase())throw new Error("Addresses do not match")}else r.address=e.address}const i=await this.device.getCommands().ethereumGetAddress(r.path,r.network,r.showOnTrezor);e.push({address:i.address,path:r.path,serializedPath:(0,f.getSerializedPath)(r.path)}),this.hasBundle&&this.postMessage((0,g.UiMessage)(b.BUNDLE_PROGRESS,{progress:t,response:i})),this.progress++}return this.hasBundle?e:e[0]}}}],["trezor-connect","/lib/core/methods/EthereumGetPublicKey.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(384,r)),c=a(__browser_require__(622,r)),u=__browser_require__(626,r),f=__browser_require__(413,r),l=__browser_require__(563,r),d=__browser_require__(412,r),p=o(__browser_require__(388,r)),b=__browser_require__(621,r);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}e.default=class extends c.default{constructor(e){super(e),(0,h.default)(this,"confirmed",!1),this.requiredPermissions=["read"],this.hasBundle=Object.prototype.hasOwnProperty.call(e.payload,"bundle");const t=this.hasBundle?e.payload:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e.payload,{bundle:[e.payload]});(0,u.validateParams)(t,[{name:"bundle",type:"array"}]);const r=[];if(t.bundle.forEach(e=>{(0,u.validateParams)(e,[{name:"path",obligatory:!0},{name:"showOnTrezor",type:"boolean"}]);const t=(0,f.validatePath)(e.path,3),i=(0,d.getEthereumNetwork)(t);this.firmwareRange=(0,u.getFirmwareRange)(this.name,i,this.firmwareRange);let s=!1;Object.prototype.hasOwnProperty.call(e,"showOnTrezor")&&(s=e.showOnTrezor),r.push({path:t,network:i,showOnTrezor:s})}),this.params=r,1===r.length)this.info=(0,l.getNetworkLabel)("Export #NETWORK public key",r[0].network);else{const e=r.map(e=>e.network),t=(0,d.getUniqueNetworks)(e);1===t.length&&t[0]?this.info=(0,l.getNetworkLabel)("Export multiple #NETWORK public keys",t[0]):this.info="Export multiple public keys"}}async confirmation(){if(this.confirmed)return!0;await this.getPopupPromise().promise;const e=this.createUiPromise(p.RECEIVE_CONFIRMATION,this.device);this.postMessage((0,b.UiMessage)(p.REQUEST_CONFIRMATION,{view:"export-xpub",label:this.info}));const t=await e.promise;return this.confirmed=t.payload,this.confirmed}async run(){const e=[];for(let t=0;t<this.params.length;t++){const r=this.params[t],i=await this.device.getCommands().ethereumGetPublicKey(r.path,r.showOnTrezor);e.push(i),this.hasBundle&&this.postMessage((0,b.UiMessage)(p.BUNDLE_PROGRESS,{progress:t,response:i}))}return this.hasBundle?e:e[0]}}}],["trezor-connect","/lib/core/methods/EthereumSignMessage.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var a=o(__browser_require__(622,r)),h=__browser_require__(626,r),c=__browser_require__(413,r),u=__browser_require__(412,r),f=__browser_require__(563,r),l=__browser_require__(570,r);e.default=class extends a.default{constructor(e){super(e),this.requiredPermissions=["read","write"];const t=e.payload;(0,h.validateParams)(t,[{name:"path",obligatory:!0},{name:"message",type:"string",obligatory:!0},{name:"hex",type:"boolean"}]);const r=(0,c.validatePath)(t.path,3),i=(0,u.getEthereumNetwork)(r);this.firmwareRange=(0,h.getFirmwareRange)(this.name,i,this.firmwareRange),this.info=(0,f.getNetworkLabel)("Sign #NETWORK message",i);const s=t.hex?(0,l.messageToHex)(t.message):Buffer.from(t.message,"utf8").toString("hex");this.params={path:r,network:i,message:s}}async run(){const e=await this.device.getCommands().ethereumSignMessage(this.params.path,this.params.message);return e.address=(0,f.toChecksumAddress)(e.address,this.params.network),e}}}],["trezor-connect","/lib/core/methods/EthereumSignTransaction.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(622,r)),c=__browser_require__(626,r),u=__browser_require__(413,r),f=__browser_require__(412,r),l=__browser_require__(563,r),d=__browser_require__(570,r),p=o(__browser_require__(696,r));e.default=class extends h.default{constructor(e){super(e),this.requiredPermissions=["read","write"];const t=e.payload;(0,c.validateParams)(t,[{name:"path",obligatory:!0},{name:"transaction",obligatory:!0}]);const r=(0,u.validatePath)(t.path,3),i=(0,f.getEthereumNetwork)(r);this.firmwareRange=(0,c.getFirmwareRange)(this.name,i,this.firmwareRange),this.info=(0,l.getNetworkLabel)("Sign #NETWORK transaction",i);const s=t.transaction;(0,c.validateParams)(s,[{name:"to",type:"string",obligatory:!0},{name:"value",type:"string",obligatory:!0},{name:"gasLimit",type:"string",obligatory:!0},{name:"gasPrice",type:"string",obligatory:!0},{name:"nonce",type:"string",obligatory:!0},{name:"data",type:"string"},{name:"chainId",type:"number"},{name:"txType",type:"number"}]),Object.keys(s).map(e=>{if("string"==typeof s[e]){let t=(0,d.stripHexPrefix)(s[e]);t.length%2!=0&&(t="0"+t),s[e]=t}}),this.params={path:r,transaction:s}}async run(){const e=this.params.transaction;return await p.ethereumSignTx(this.device.getCommands().typedCall.bind(this.device.getCommands()),this.params.path,e.to,e.value,e.gasLimit,e.gasPrice,e.nonce,e.data,e.chainId,e.txType)}}}],["trezor-connect","/lib/core/methods/helpers/ethereumSignTx.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.ethereumSignTx=void 0;var a=o(__browser_require__(384,r));function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const u=(e,t)=>{if(null==e)return["",""];return[e.slice(0,t),e.slice(t)]},f=async(e,t,r,i)=>{if(!t.data_length){let e=t.signature_v;const r=t.signature_r,s=t.signature_s;if(null==e||null==r||null==s)throw new Error("Unexpected request.");return i&&e<=1&&(e+=2*i+35),Promise.resolve({v:"0x"+e.toString(16),r:"0x"+r,s:"0x"+s})}const[s,n]=u(r,2*t.data_length),o=await e("EthereumTxAck","EthereumTxRequest",{data_chunk:s});return await f(e,o.message,n,i)};function l(e){for(;/^00/.test(e);)e=e.slice(2);return e}e.ethereumSignTx=(async(e,t,r,i,s,n,o,a,h,d)=>{const p=null==a?0:a.length/2,[b,g]=u(a,2048);let m={address_n:t,nonce:l(o),gas_price:l(n),gas_limit:l(s),to:r,value:l(i)};0!==p&&(m=c({},m,{data_length:p,data_initial_chunk:b})),h&&(m=c({},m,{chain_id:h})),null!==d&&(m=c({},m,{tx_type:d}));const _=await e("EthereumSignTx","EthereumTxRequest",m);return await f(e,_.message,g,h)})}],["trezor-connect","/lib/core/methods/EthereumVerifyMessage.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var a=o(__browser_require__(622,r)),h=__browser_require__(626,r),c=__browser_require__(570,r);e.default=class extends a.default{constructor(e){super(e),this.requiredPermissions=["read","write"],this.firmwareRange=(0,h.getFirmwareRange)(this.name,null,this.firmwareRange),this.info="Verify message";const t=e.payload;(0,h.validateParams)(t,[{name:"address",type:"string",obligatory:!0},{name:"signature",type:"string",obligatory:!0},{name:"message",type:"string",obligatory:!0},{name:"hex",type:"boolean"}]);const r=t.hex?(0,c.messageToHex)(t.message):Buffer.from(t.message,"utf8").toString("hex");this.params={address:(0,c.stripHexPrefix)(t.address),signature:(0,c.stripHexPrefix)(t.signature),message:r}}async run(){return await this.device.getCommands().ethereumVerifyMessage(this.params.address,this.params.signature,this.params.message)}}}],["trezor-connect","/lib/core/methods/GetAccountInfo.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(384,r)),c=a(__browser_require__(622,r)),u=a(__browser_require__(645,r)),f=__browser_require__(626,r),l=__browser_require__(413,r),d=__browser_require__(562,r),p=__browser_require__(421,r),b=__browser_require__(412,r),g=__browser_require__(414,r),m=o(__browser_require__(388,r)),_=__browser_require__(621,r),w=__browser_require__(627,r);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}e.default=class extends c.default{constructor(e){super(e),(0,h.default)(this,"disposed",!1),(0,h.default)(this,"discovery",undefined),this.requiredPermissions=["read"],this.info="Export account info",this.useDevice=!0,this.useUi=!0;let t=!1;this.hasBundle=Object.prototype.hasOwnProperty.call(e.payload,"bundle");const r=this.hasBundle?e.payload:v({},e.payload,{bundle:[e.payload]});(0,f.validateParams)(r,[{name:"bundle",type:"array"}]),r.bundle.forEach(e=>{(0,f.validateParams)(e,[{name:"coin",type:"string",obligatory:!0},{name:"descriptor",type:"string"},{name:"path",type:"string"},{name:"details",type:"string"},{name:"tokens",type:"string"},{name:"page",type:"number"},{name:"pageSize",type:"number"},{name:"from",type:"number"},{name:"to",type:"number"},{name:"contractFilter",type:"string"},{name:"gap",type:"number"},{name:"marker",type:"object"}]);const i=(0,b.getCoinInfo)(e.coin);if(!i)throw g.NO_COIN_INFO;if(!i.blockchainLink)throw(0,g.backendNotSupported)(i.name);if(e.path&&(e.address_n=(0,l.validatePath)(e.path,3),t="string"!=typeof e.descriptor),!e.path&&!e.descriptor){if(r.bundle.length>1)throw Error("Discovery for multiple coins in not supported");t=!0}e.coinInfo=i,this.firmwareRange=(0,f.getFirmwareRange)(this.name,i,this.firmwareRange)}),this.params=r.bundle,this.useDevice=t,this.useUi=t}async confirmation(){await this.getPopupPromise().promise;const e=this.createUiPromise(m.RECEIVE_CONFIRMATION,this.device);if(1!==this.params.length||this.params[0].path||this.params[0].descriptor){const e={};this.params.forEach(t=>{e[t.coinInfo.label]||(e[t.coinInfo.label]={coinInfo:t.coinInfo,values:[]}),e[t.coinInfo.label].values.push(t.descriptor||t.address_n)});const t=[];Object.keys(e).forEach((r,i,s)=>{const n=e[r];n.values.forEach((e,i)=>{t.push("<span>"),t.push(r),t.push(" "),"string"==typeof e?t.push(e):t.push((0,d.getAccountLabel)(e,n.coinInfo)),t.push("</span>")})}),this.postMessage((0,_.UiMessage)(m.REQUEST_CONFIRMATION,{view:"export-account-info",label:`Export info for: ${t.join("")}`}))}else this.postMessage((0,_.UiMessage)(m.REQUEST_CONFIRMATION,{view:"export-account-info",label:`Export info for ${this.params[0].coinInfo.label} account of your selection`,customConfirmButton:{label:"Proceed to account selection",className:"not-empty-css"}}));return(await e.promise).payload}async noBackupConfirmation(){await this.getPopupPromise().promise;const e=this.createUiPromise(m.RECEIVE_CONFIRMATION,this.device);return this.postMessage((0,_.UiMessage)(m.REQUEST_CONFIRMATION,{view:"no-backup"})),(await e.promise).payload}async checkFirmwareRange(e){if(e||1===this.params.length)return super.checkFirmwareRange(e);const t={1:{min:"1.0.0",max:"0"},2:{min:"2.0.0",max:"0"}},r=[];for(let e=0;e<this.params.length;e++){this.firmwareRange=(0,f.getFirmwareRange)(this.name,this.params[e].coinInfo,t);const i=await super.checkFirmwareRange(!1);i&&r.push({index:e,exception:i,coin:this.params[e].coin})}if(r.length>0)throw new g.TrezorError("bundle_fw_exception",JSON.stringify(r));return null}async run(){if(1===this.params.length&&!this.params[0].address_n&&!this.params[0].descriptor)return this.discover(this.params[0]);const e=[],t=(e,t,r)=>{!this.hasBundle||this.device&&this.device.getCommands().disposed||this.postMessage((0,_.UiMessage)(m.BUNDLE_PROGRESS,{progress:e,response:t,error:r}))};for(let r=0;r<this.params.length;r++){const i=this.params[r],{address_n:s}=i;let n=i.descriptor;if(this.disposed)break;if(s&&"string"!=typeof n)try{const o=await this.device.getCommands().getAccountDescriptor(i.coinInfo,s);o&&(n=o.descriptor)}catch(i){if(this.hasBundle){e.push(null),t(r,null,i.message);continue}throw i}if(this.disposed)break;try{if("string"!=typeof n)throw new Error("GetAccountInfo: descriptor not found");const s=await(0,w.initBlockchain)(i.coinInfo,this.postMessage);if(this.disposed)break;const o=await s.getAccountInfo({descriptor:n,details:i.details,tokens:i.tokens,page:i.page,pageSize:i.pageSize,from:i.from,to:i.to,contractFilter:i.contractFilter,gap:i.gap,marker:i.marker});if(this.disposed)break;let a;if("bitcoin"===i.coinInfo.type&&"string"==typeof i.details&&"basic"!==i.details&&(a=await s.getAccountUtxo(n)),this.disposed)break;const h=v({path:i.path},o,{descriptor:n,utxo:a});e.push(h),t(r,h)}catch(i){if(this.hasBundle){e.push(null),t(r,null,i.message);continue}throw i}}return this.disposed?new Promise(()=>{}):this.hasBundle?e:e[0]}async discover(e){const{coinInfo:t}=e,r=await(0,w.initBlockchain)(t,this.postMessage),i=this.createUiPromise(m.RECEIVE_ACCOUNT,this.device),s=new u.default({blockchain:r,commands:this.device.getCommands()});s.on("progress",e=>{this.postMessage((0,_.UiMessage)(m.SELECT_ACCOUNT,{type:"progress",coinInfo:t,accounts:e}))}),s.on("complete",()=>{this.postMessage((0,_.UiMessage)(m.SELECT_ACCOUNT,{type:"end",coinInfo:t}))}),s.start().catch(e=>{i.reject(e)}),this.postMessage((0,_.UiMessage)(m.SELECT_ACCOUNT,{type:"start",accountTypes:s.types.map(e=>e.type),coinInfo:t}));const n=await i.promise;s.stop();const o=n.payload,a=s.accounts[o];s.completed||await(0,p.resolveAfter)(501);const h=await r.getAccountInfo({descriptor:a.descriptor,details:e.details,tokens:e.tokens,page:e.page,pageSize:e.pageSize,from:e.from,to:e.to,contractFilter:e.contractFilter,gap:e.gap,marker:e.marker});let c;return"bitcoin"===e.coinInfo.type&&"string"==typeof e.details&&"basic"!==e.details&&(c=await r.getAccountUtxo(a.descriptor)),v({path:(0,l.getSerializedPath)(a.address_n)},h,{utxo:c})}dispose(){this.disposed=!0;const{discovery:e}=this;e&&(e.removeAllListeners(),e.stop())}}}],["trezor-connect","/lib/core/methods/GetAddress.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(384,r)),c=a(__browser_require__(622,r)),u=__browser_require__(626,r),f=__browser_require__(413,r),l=__browser_require__(412,r),d=__browser_require__(414,r),p=o(__browser_require__(388,r)),b=__browser_require__(621,r);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}e.default=class extends c.default{constructor(e){super(e),(0,h.default)(this,"confirmed",!1),(0,h.default)(this,"progress",0),this.requiredPermissions=["read"],this.hasBundle=Object.prototype.hasOwnProperty.call(e.payload,"bundle");const t=this.hasBundle?e.payload:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e.payload,{bundle:[e.payload]});(0,u.validateParams)(t,[{name:"bundle",type:"array"},{name:"useEventListener",type:"boolean"}]);const r=[];t.bundle.forEach(e=>{(0,u.validateParams)(e,[{name:"path",obligatory:!0},{name:"coin",type:"string"},{name:"address",type:"string"},{name:"showOnTrezor",type:"boolean"},{name:"multisig",type:"object"},{name:"scriptType",type:"string"}]);const t=(0,f.validatePath)(e.path,1);let i;e.coin&&(i=(0,l.getBitcoinNetwork)(e.coin)),i&&!e.crossChain?(0,u.validateCoinPath)(i,t):i||(i=(0,l.getBitcoinNetwork)(t));let s=!0;if(Object.prototype.hasOwnProperty.call(e,"showOnTrezor")&&(s=e.showOnTrezor),!i)throw d.NO_COIN_INFO;i&&(this.firmwareRange=(0,u.getFirmwareRange)(this.name,i,this.firmwareRange)),i=(0,l.fixCoinInfoNetwork)(i,t),r.push({path:t,address:e.address,coinInfo:i,showOnTrezor:s,multisig:e.multisig,scriptType:e.scriptType})});const i=t.useEventListener&&1===r.length&&"string"==typeof r[0].address&&r[0].showOnTrezor;if(this.confirmed=i,this.useUi=!i,1===r.length)this.info=(0,f.getLabel)("Export #NETWORK address",r[0].coinInfo);else{const e=r.map(e=>e.coinInfo),t=(0,l.getUniqueNetworks)(e);1===t.length&&t[0]?this.info=(0,f.getLabel)("Export multiple #NETWORK addresses",t[0]):this.info="Export multiple addresses"}this.params=r}getButtonRequestData(e){return"ButtonRequest_Address"===e?{type:"address",serializedPath:(0,f.getSerializedPath)(this.params[this.progress].path),address:this.params[this.progress].address||"not-set"}:null}async confirmation(){if(this.confirmed)return!0;await this.getPopupPromise().promise;const e=this.createUiPromise(p.RECEIVE_CONFIRMATION,this.device),t=this.info;this.postMessage((0,b.UiMessage)(p.REQUEST_CONFIRMATION,{view:"export-address",label:t}));const r=await e.promise;return this.confirmed=r.payload,this.confirmed}async noBackupConfirmation(){await this.getPopupPromise().promise;const e=this.createUiPromise(p.RECEIVE_CONFIRMATION,this.device);return this.postMessage((0,b.UiMessage)(p.REQUEST_CONFIRMATION,{view:"no-backup"})),(await e.promise).payload}async run(){const e=[];for(let t=0;t<this.params.length;t++){const r=this.params[t];if(r.showOnTrezor){const e=await this.device.getCommands().getAddress(r.path,r.coinInfo,!1,r.multisig,r.scriptType);if("string"==typeof r.address){if(r.address!==e.address)throw new Error("Addresses do not match")}else r.address=e.address}const i=await this.device.getCommands().getAddress(r.path,r.coinInfo,r.showOnTrezor,r.multisig,r.scriptType);e.push(i),this.hasBundle&&this.postMessage((0,b.UiMessage)(p.BUNDLE_PROGRESS,{progress:t,response:i})),this.progress++}return this.hasBundle?e:e[0]}}}],["trezor-connect","/lib/core/methods/GetDeviceState.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var a=o(__browser_require__(622,r));e.default=class extends a.default{constructor(e){super(e),this.requiredPermissions=[]}async run(){if(this.device.getState())return{state:this.device.getState()};const e=await this.device.getCommands().getDeviceState();return{state:this.device.getState()||e}}}}],["trezor-connect","/lib/core/methods/GetFeatures.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(384,r)),c=a(__browser_require__(622,r)),u=o(__browser_require__(388,r));function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}e.default=class extends c.default{constructor(e){super(e),this.requiredPermissions=[],this.useUi=!1,this.allowDeviceMode=[...this.allowDeviceMode,u.INITIALIZE],this.useDeviceState=!1,this.skipFirmwareCheck=!0}async run(){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},this.device.features)}}}],["trezor-connect","/lib/core/methods/GetPublicKey.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(384,r)),c=a(__browser_require__(622,r)),u=__browser_require__(626,r),f=__browser_require__(413,r),l=o(__browser_require__(388,r)),d=__browser_require__(621,r),p=__browser_require__(412,r);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}e.default=class extends c.default{constructor(e){super(e),(0,h.default)(this,"confirmed",!1),this.requiredPermissions=["read"],this.info="Export public key",this.hasBundle=Object.prototype.hasOwnProperty.call(e.payload,"bundle");const t=this.hasBundle?e.payload:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e.payload,{bundle:[e.payload]});(0,u.validateParams)(t,[{name:"bundle",type:"array"}]);const r=[];t.bundle.forEach(e=>{let t;(0,u.validateParams)(e,[{name:"path",obligatory:!0},{name:"coin",type:"string"},{name:"crossChain",type:"boolean"}]),e.coin&&(t=(0,p.getBitcoinNetwork)(e.coin));const i=(0,f.validatePath)(e.path,t?3:0);t&&!e.crossChain?(0,u.validateCoinPath)(t,i):t||(t=(0,p.getBitcoinNetwork)(i)),r.push({path:i,coinInfo:t}),t&&(this.firmwareRange=(0,u.getFirmwareRange)(this.name,t,this.firmwareRange))}),this.params=r}async confirmation(){if(this.confirmed)return!0;await this.getPopupPromise().promise;const e=this.createUiPromise(l.RECEIVE_CONFIRMATION,this.device);let t;t=this.params.length>1?"Export multiple public keys":(0,f.getPublicKeyLabel)(this.params[0].path,this.params[0].coinInfo),this.postMessage((0,d.UiMessage)(l.REQUEST_CONFIRMATION,{view:"export-xpub",label:t}));const r=await e.promise;return this.confirmed=r.payload,this.confirmed}async run(){const e=[];for(let t=0;t<this.params.length;t++){const r=this.params[t],i=await this.device.getCommands().getHDNode(r.path,r.coinInfo);e.push(i),this.hasBundle&&this.postMessage((0,d.UiMessage)(l.BUNDLE_PROGRESS,{progress:t,response:i}))}return this.hasBundle?e:e[0]}}}],["trezor-connect","/lib/core/methods/GetSettings.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var a=o(__browser_require__(622,r)),h=o(__browser_require__(409,r));e.default=class extends a.default{constructor(e){super(e),this.requiredPermissions=[],this.useDevice=!1,this.useUi=!1}async run(){return h.default.getSettings()}}}],["trezor-connect","/lib/core/methods/LiskGetAddress.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(384,r)),c=a(__browser_require__(622,r)),u=__browser_require__(626,r),f=__browser_require__(412,r),l=__browser_require__(413,r),d=o(__browser_require__(388,r)),p=__browser_require__(621,r);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}e.default=class extends c.default{constructor(e){super(e),(0,h.default)(this,"confirmed",!1),(0,h.default)(this,"progress",0),this.requiredPermissions=["read"],this.firmwareRange=(0,u.getFirmwareRange)(this.name,(0,f.getMiscNetwork)("Lisk"),this.firmwareRange),this.hasBundle=Object.prototype.hasOwnProperty.call(e.payload,"bundle");const t=this.hasBundle?e.payload:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e.payload,{bundle:[e.payload]});(0,u.validateParams)(t,[{name:"bundle",type:"array"},{name:"useEventListener",type:"boolean"}]);const r=[];t.bundle.forEach(e=>{(0,u.validateParams)(e,[{name:"path",obligatory:!0},{name:"address",type:"string"},{name:"showOnTrezor",type:"boolean"}]);const t=(0,l.validatePath)(e.path,3);let i=!0;Object.prototype.hasOwnProperty.call(e,"showOnTrezor")&&(i=e.showOnTrezor),r.push({path:t,address:e.address,showOnTrezor:i})});const i=t.useEventListener&&1===r.length&&"string"==typeof r[0].address&&r[0].showOnTrezor;this.confirmed=i,this.useUi=!i,this.params=r,1===r.length?this.info=`Export Lisk address for account #${(0,l.fromHardened)(this.params[0].path[2])+1}`:this.info="Export multiple Lisk addresses"}getButtonRequestData(e){return"ButtonRequest_Address"===e?{type:"address",serializedPath:(0,l.getSerializedPath)(this.params[this.progress].path),address:this.params[this.progress].address||"not-set"}:null}async confirmation(){if(this.confirmed)return!0;await this.getPopupPromise().promise;const e=this.createUiPromise(d.RECEIVE_CONFIRMATION,this.device),t=this.info;this.postMessage((0,p.UiMessage)(d.REQUEST_CONFIRMATION,{view:"export-address",label:t}));const r=await e.promise;return this.confirmed=r.payload,this.confirmed}async noBackupConfirmation(){await this.getPopupPromise().promise;const e=this.createUiPromise(d.RECEIVE_CONFIRMATION,this.device);return this.postMessage((0,p.UiMessage)(d.REQUEST_CONFIRMATION,{view:"no-backup"})),(await e.promise).payload}async run(){const e=[];for(let t=0;t<this.params.length;t++){const r=this.params[t];if(r.showOnTrezor){const e=await this.device.getCommands().liskGetAddress(r.path,!1);if("string"==typeof r.address){if(r.address!==e.address)throw new Error("Addresses do not match")}else r.address=e.address}const i=await this.device.getCommands().liskGetAddress(r.path,r.showOnTrezor);e.push({path:r.path,serializedPath:(0,l.getSerializedPath)(r.path),address:i.address}),this.hasBundle&&this.postMessage((0,p.UiMessage)(d.BUNDLE_PROGRESS,{progress:t,response:i})),this.progress++}return this.hasBundle?e:e[0]}}}],["trezor-connect","/lib/core/methods/LiskGetPublicKey.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(384,r)),c=a(__browser_require__(622,r)),u=__browser_require__(626,r),f=__browser_require__(412,r),l=__browser_require__(413,r),d=o(__browser_require__(388,r)),p=__browser_require__(621,r);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}e.default=class extends c.default{constructor(e){super(e),(0,h.default)(this,"confirmed",!1),this.requiredPermissions=["read"],this.firmwareRange=(0,u.getFirmwareRange)(this.name,(0,f.getMiscNetwork)("Lisk"),this.firmwareRange),this.info="Export Lisk public key",this.hasBundle=Object.prototype.hasOwnProperty.call(e.payload,"bundle");const t=this.hasBundle?e.payload:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e.payload,{bundle:[e.payload]});(0,u.validateParams)(t,[{name:"bundle",type:"array"}]);const r=[];t.bundle.forEach(e=>{(0,u.validateParams)(e,[{name:"path",obligatory:!0},{name:"showOnTrezor",type:"boolean"}]);const t=(0,l.validatePath)(e.path,3);let i=!1;Object.prototype.hasOwnProperty.call(e,"showOnTrezor")&&(i=e.showOnTrezor),r.push({path:t,showOnTrezor:i})}),this.params=r}async confirmation(){if(this.confirmed)return!0;await this.getPopupPromise().promise;const e=this.createUiPromise(d.RECEIVE_CONFIRMATION,this.device);let t;t=this.params.length>1?"Export multiple Lisk public keys":`Export Lisk public key for account #${(0,l.fromHardened)(this.params[0].path[2])+1}`,this.postMessage((0,p.UiMessage)(d.REQUEST_CONFIRMATION,{view:"export-xpub",label:t}));const r=await e.promise;return this.confirmed=r.payload,this.confirmed}async run(){const e=[];for(let t=0;t<this.params.length;t++){const r=this.params[t],i=await this.device.getCommands().liskGetPublicKey(r.path,r.showOnTrezor);e.push({publicKey:i.public_key,path:r.path,serializedPath:(0,l.getSerializedPath)(r.path)}),this.hasBundle&&this.postMessage((0,p.UiMessage)(d.BUNDLE_PROGRESS,{progress:t,response:i}))}return this.hasBundle?e:e[0]}}}],["trezor-connect","/lib/core/methods/LiskSignMessage.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var a=o(__browser_require__(622,r)),h=__browser_require__(626,r),c=__browser_require__(412,r),u=__browser_require__(413,r);e.default=class extends a.default{constructor(e){super(e),this.requiredPermissions=["read","write"],this.firmwareRange=(0,h.getFirmwareRange)(this.name,(0,c.getMiscNetwork)("Lisk"),this.firmwareRange);const t=e.payload;(0,h.validateParams)(t,[{name:"path",obligatory:!0},{name:"message",type:"string",obligatory:!0}]);const r=(0,u.validatePath)(t.path,3);this.info="Sign Lisk Message";const i=Buffer.from(t.message,"utf8").toString("hex");this.params={path:r,message:i}}async run(){const e=await this.device.getCommands().liskSignMessage(this.params.path,this.params.message);return{publicKey:e.public_key,signature:e.signature}}}}],["trezor-connect","/lib/core/methods/LiskVerifyMessage.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var a=o(__browser_require__(622,r)),h=__browser_require__(626,r),c=__browser_require__(412,r);e.default=class extends a.default{constructor(e){super(e),this.requiredPermissions=["read","write"],this.firmwareRange=(0,h.getFirmwareRange)(this.name,(0,c.getMiscNetwork)("Lisk"),this.firmwareRange),this.info="Verify Lisk message";const t=e.payload;(0,h.validateParams)(t,[{name:"publicKey",type:"string",obligatory:!0},{name:"signature",type:"string",obligatory:!0},{name:"message",type:"string",obligatory:!0}]);const r=Buffer.from(t.message,"utf8").toString("hex");this.params={publicKey:t.publicKey,signature:t.signature,message:r}}async run(){return await this.device.getCommands().liskVerifyMessage(this.params.publicKey,this.params.signature,this.params.message)}}}],["trezor-connect","/lib/core/methods/LiskSignTransaction.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var a=o(__browser_require__(622,r)),h=__browser_require__(626,r),c=__browser_require__(412,r),u=__browser_require__(413,r),f=__browser_require__(709,r);e.default=class extends a.default{constructor(e){super(e),this.requiredPermissions=["read","write"],this.firmwareRange=(0,h.getFirmwareRange)(this.name,(0,c.getMiscNetwork)("Lisk"),this.firmwareRange);const t=e.payload;(0,h.validateParams)(t,[{name:"path",obligatory:!0},{name:"transaction",obligatory:!0}]);const r=(0,u.validatePath)(t.path,3);this.info="Sign Lisk transaction";const i=t.transaction;(0,h.validateParams)(i,[{name:"type",type:"number",obligatory:!0},{name:"fee",type:"string",obligatory:!0},{name:"amount",type:"amount",obligatory:!0},{name:"timestamp",type:"number",obligatory:!0},{name:"recipientId",type:"string"},{name:"signature",type:"string"},{name:"asset",type:"object"}]);const s=(0,f.prepareTx)(i);this.params={path:r,transaction:s}}async run(){return await this.device.getCommands().liskSignTx(this.params.path,this.params.transaction)}}}],["trezor-connect","/lib/core/methods/helpers/liskSignTx.js",function(e,t,r,i,s,n){"use strict";e.__esModule=!0,e.prepareTx=void 0;const o=["lifetime","keysgroup"],a=(e,t,r)=>{let i=(e=>e.replace(/([A-Z])/g,e=>"_"+e.toLowerCase()))(e);o.includes(e)&&(i=[e.substr(0,4),"_",e.substr(4)].join("")),r[i]=t},h=(e,t={})=>{for(const r in e){const i=e[r];"object"!=typeof i||Array.isArray(i)?a(r,i,t):t[r]=h(i)}return t};e.prepareTx=h}],["trezor-connect","/lib/core/methods/LoadDevice.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(384,r)),c=a(__browser_require__(622,r)),u=o(__browser_require__(388,r)),f=__browser_require__(621,r),l=__browser_require__(626,r);e.default=class extends c.default{constructor(e){super(e),(0,h.default)(this,"confirmed",!1),this.allowDeviceMode=[u.INITIALIZE,u.SEEDLESS],this.useDeviceState=!1,this.requiredPermissions=["management"],this.info="Load device";const t=e.payload;(0,l.validateParams)(t,[{name:"mnemonics",type:"array"},{name:"node",type:"object"},{name:"pin",type:"string"},{name:"passphraseProtection",type:"boolean"},{name:"language",type:"string"},{name:"label",type:"string"},{name:"skipChecksum",type:"boolean"},{name:"u2fCounter",type:"number"}]),this.params={mnemonics:t.mnemonics,node:t.node,pin:t.pin,passphrase_protection:t.passphraseProtection,language:t.language,label:t.label,skip_checksum:t.skipChecksum,u2f_counter:t.u2fCounter||Math.floor(Date.now()/1e3)}}async confirmation(){if(this.confirmed)return!0;await this.getPopupPromise().promise;const e=this.createUiPromise(u.RECEIVE_CONFIRMATION,this.device);this.postMessage((0,f.UiMessage)(u.REQUEST_CONFIRMATION,{view:"device-management",customConfirmButton:{className:"wipe",label:`Load ${this.device.toMessageObject().label}`},label:"Are you sure you want to load your device?"}));const t=await e.promise;return this.confirmed=t.payload,this.confirmed}async run(){if(!this.device.atLeast(["1.8.2","2.1.2"])){if(!this.params.mnemonics||"string"!=typeof this.params.mnemonics[0])throw new Error("invalid mnemonic array. should contain at least one mnemonic string");this.params.mnemonic=this.params.mnemonics[0],delete this.params.mnemonics}return await this.device.getCommands().load(this.params)}}}],["trezor-connect","/lib/core/methods/PushTransaction.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var a=o(__browser_require__(622,r)),h=__browser_require__(626,r),c=__browser_require__(412,r),u=__browser_require__(414,r),f=__browser_require__(627,r);e.default=class extends a.default{constructor(e){super(e),this.requiredPermissions=[],this.useUi=!1,this.useDevice=!1;const t=e.payload;(0,h.validateParams)(t,[{name:"tx",type:"string",obligatory:!0},{name:"coin",type:"string",obligatory:!0}]);const r=(0,c.getCoinInfo)(t.coin);if(!r)throw u.NO_COIN_INFO;if(!r.blockchainLink)throw(0,u.backendNotSupported)(r.name);if("bitcoin"===r.type&&!/^[0-9A-Fa-f]*$/.test(t.tx))throw new Error("Invalid params: Transaction must be hexadecimal");this.params={tx:t.tx,coinInfo:r}}async run(){const e=await(0,f.initBlockchain)(this.params.coinInfo,this.postMessage);return{txid:await e.pushTransaction(this.params.tx)}}}}],["trezor-connect","/lib/core/methods/RequestLogin.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(622,r)),c=__browser_require__(626,r),u=o(__browser_require__(388,r)),f=__browser_require__(621,r),l=a(__browser_require__(409,r));e.default=class extends h.default{constructor(e){super(e),this.requiredPermissions=["read","write"],this.firmwareRange=(0,c.getFirmwareRange)(this.name,null,this.firmwareRange),this.info="Login",this.useEmptyPassphrase=!0;const t=e.payload,r={},i=l.default.getSettings();if(i.origin){const e=i.origin.split(":");r.proto=e[0],r.host=e[1].substring(2),e[2]&&(r.port=e[2]),r.index=0}(0,c.validateParams)(t,[{name:"challengeHidden",type:"string"},{name:"challengeVisual",type:"string"},{name:"asyncChallenge",type:"boolean"}]),this.params={asyncChallenge:t.asyncChallenge,identity:r,challengeHidden:t.challengeHidden||"",challengeVisual:t.challengeVisual||""}}async run(){if(this.params.asyncChallenge){this.postMessage((0,f.UiMessage)(u.LOGIN_CHALLENGE_REQUEST));const e=(await this.createUiPromise(u.LOGIN_CHALLENGE_RESPONSE,this.device).promise).payload;if("string"==typeof e)throw new Error(`TrezorConnect.requestLogin callback error: ${e}`);(0,c.validateParams)(e,[{name:"challengeHidden",type:"string",obligatory:!0},{name:"challengeVisual",type:"string",obligatory:!0}]),this.params.challengeHidden=e.challengeHidden,this.params.challengeVisual=e.challengeVisual}const e=await this.device.getCommands().signIdentity(this.params.identity,this.params.challengeHidden,this.params.challengeVisual);return{address:e.address,publicKey:e.public_key,signature:e.signature}}}}],["trezor-connect","/lib/core/methods/ResetDevice.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(384,r)),c=a(__browser_require__(622,r)),u=o(__browser_require__(388,r)),f=__browser_require__(621,r),l=__browser_require__(626,r);e.default=class extends c.default{constructor(e){super(e),(0,h.default)(this,"confirmed",!1),this.allowDeviceMode=[u.INITIALIZE,u.SEEDLESS],this.useDeviceState=!1,this.requiredPermissions=["management"],this.firmwareRange=(0,l.getFirmwareRange)(this.name,null,this.firmwareRange),this.info="Setup device";const t=e.payload;(0,l.validateParams)(t,[{name:"displayRandom",type:"boolean"},{name:"strength",type:"number"},{name:"passphraseProtection",type:"boolean"},{name:"pinProtection",type:"boolean"},{name:"language",type:"string"},{name:"label",type:"string"},{name:"u2fCounter",type:"number"},{name:"skipBackup",type:"boolean"},{name:"noBackup",type:"boolean"},{name:"backupType",type:"number"}]),this.params={display_random:t.displayRandom,strength:t.strength||256,passphrase_protection:t.passphraseProtection,pin_protection:t.pinProtection,language:t.language,label:t.label,u2f_counter:t.u2fCounter||Math.floor(Date.now()/1e3),skip_backup:t.skipBackup,no_backup:t.noBackup,backup_type:t.backupType}}async confirmation(){if(this.confirmed)return!0;await this.getPopupPromise().promise;const e=this.createUiPromise(u.RECEIVE_CONFIRMATION,this.device);this.postMessage((0,f.UiMessage)(u.REQUEST_CONFIRMATION,{view:"device-management",label:"Do you really you want to create a new wallet?"}));const t=await e.promise;return this.confirmed=t.payload,this.confirmed}async run(){return await this.device.getCommands().reset(this.params)}}}],["trezor-connect","/lib/core/methods/RippleGetAddress.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(384,r)),c=a(__browser_require__(622,r)),u=__browser_require__(626,r),f=__browser_require__(412,r),l=__browser_require__(413,r),d=o(__browser_require__(388,r)),p=__browser_require__(621,r);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}e.default=class extends c.default{constructor(e){super(e),(0,h.default)(this,"confirmed",!1),(0,h.default)(this,"progress",0),this.requiredPermissions=["read"],this.firmwareRange=(0,u.getFirmwareRange)(this.name,(0,f.getMiscNetwork)("Ripple"),this.firmwareRange),this.hasBundle=Object.prototype.hasOwnProperty.call(e.payload,"bundle");const t=this.hasBundle?e.payload:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e.payload,{bundle:[e.payload]});(0,u.validateParams)(t,[{name:"bundle",type:"array"},{name:"useEventListener",type:"boolean"}]);const r=[];t.bundle.forEach(e=>{(0,u.validateParams)(e,[{name:"path",obligatory:!0},{name:"address",type:"string"},{name:"showOnTrezor",type:"boolean"}]);const t=(0,l.validatePath)(e.path,3);let i=!0;Object.prototype.hasOwnProperty.call(e,"showOnTrezor")&&(i=e.showOnTrezor),r.push({path:t,address:e.address,showOnTrezor:i})});const i=t.useEventListener&&1===r.length&&"string"==typeof r[0].address&&r[0].showOnTrezor;this.confirmed=i,this.useUi=!i,this.params=r,1===r.length?this.info=`Export Ripple address for account #${(0,l.fromHardened)(this.params[0].path[2])+1}`:this.info="Export multiple Ripple addresses"}getButtonRequestData(e){return"ButtonRequest_Address"===e?{type:"address",serializedPath:(0,l.getSerializedPath)(this.params[this.progress].path),address:this.params[this.progress].address||"not-set"}:null}async confirmation(){if(this.confirmed)return!0;await this.getPopupPromise().promise;const e=this.createUiPromise(d.RECEIVE_CONFIRMATION,this.device),t=this.info;this.postMessage((0,p.UiMessage)(d.REQUEST_CONFIRMATION,{view:"export-address",label:t}));const r=await e.promise;return this.confirmed=r.payload,this.confirmed}async noBackupConfirmation(){await this.getPopupPromise().promise;const e=this.createUiPromise(d.RECEIVE_CONFIRMATION,this.device);return this.postMessage((0,p.UiMessage)(d.REQUEST_CONFIRMATION,{view:"no-backup"})),(await e.promise).payload}async run(){const e=[];for(let t=0;t<this.params.length;t++){const r=this.params[t];if(r.showOnTrezor){const e=await this.device.getCommands().rippleGetAddress(r.path,!1);if("string"==typeof r.address){if(r.address!==e.address)throw new Error("Addresses do not match")}else r.address=e.address}const i=await this.device.getCommands().rippleGetAddress(r.path,r.showOnTrezor);e.push({address:i.address,path:r.path,serializedPath:(0,l.getSerializedPath)(r.path)}),this.hasBundle&&this.postMessage((0,p.UiMessage)(d.BUNDLE_PROGRESS,{progress:t,response:i})),this.progress++}return this.hasBundle?e:e[0]}}}],["trezor-connect","/lib/core/methods/RippleSignTransaction.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var a=o(__browser_require__(622,r)),h=__browser_require__(626,r),c=__browser_require__(412,r),u=__browser_require__(413,r);e.default=class extends a.default{constructor(e){super(e),this.requiredPermissions=["read","write"],this.firmwareRange=(0,h.getFirmwareRange)(this.name,(0,c.getMiscNetwork)("Ripple"),this.firmwareRange),this.info="Sign Ripple transaction";const t=e.payload;(0,h.validateParams)(t,[{name:"path",obligatory:!0},{name:"transaction",obligatory:!0}]);const r=(0,u.validatePath)(t.path,5),i=t.transaction;(0,h.validateParams)(i,[{name:"fee",type:"string"},{name:"flags",type:"number"},{name:"sequence",type:"number"},{name:"maxLedgerVersion",type:"number"},{name:"payment",type:"object"}]),(0,h.validateParams)(i.payment,[{name:"amount",type:"string",obligatory:!0},{name:"destination",type:"string",obligatory:!0},{name:"destinationTag",type:"number"}]),this.params={path:r,transaction:i}}async run(){const e=this.params.transaction,t=await this.device.getCommands().rippleSignTx({address_n:this.params.path,fee:parseInt(e.fee),flags:e.flags,sequence:e.sequence,last_ledger_sequence:e.maxLedgerVersion,payment:{amount:e.payment.amount,destination:e.payment.destination,destination_tag:e.payment.destinationTag}});return{serializedTx:t.serialized_tx,signature:t.signature}}}}],["trezor-connect","/lib/core/methods/NEMGetAddress.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(384,r)),c=a(__browser_require__(622,r)),u=__browser_require__(626,r),f=__browser_require__(412,r),l=__browser_require__(413,r),d=o(__browser_require__(388,r)),p=__browser_require__(621,r);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}const g=104,m=152,_=96;e.default=class extends c.default{constructor(e){super(e),(0,h.default)(this,"confirmed",!1),(0,h.default)(this,"progress",0),this.requiredPermissions=["read"],this.firmwareRange=(0,u.getFirmwareRange)(this.name,(0,f.getMiscNetwork)("NEM"),this.firmwareRange),this.hasBundle=Object.prototype.hasOwnProperty.call(e.payload,"bundle");const t=this.hasBundle?e.payload:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e.payload,{bundle:[e.payload]});(0,u.validateParams)(t,[{name:"bundle",type:"array"},{name:"useEventListener",type:"boolean"}]);const r=[];t.bundle.forEach(e=>{(0,u.validateParams)(e,[{name:"path",obligatory:!0},{name:"address",type:"string"},{name:"network",type:"number"},{name:"showOnTrezor",type:"boolean"}]);const t=(0,l.validatePath)(e.path,3);let i=!0;Object.prototype.hasOwnProperty.call(e,"showOnTrezor")&&(i=e.showOnTrezor),r.push({path:t,address:e.address,network:e.network||g,showOnTrezor:i})});const i=t.useEventListener&&1===r.length&&"string"==typeof r[0].address&&r[0].showOnTrezor;if(this.confirmed=i,this.useUi=!i,this.params=r,1===r.length){let e="Unknown";switch(this.params[0].network){case g:e="Mainnet";break;case m:e="Testnet";break;case _:e="Mijin"}this.info=`Export NEM address for account #${(0,l.fromHardened)(this.params[0].path[2])+1} on ${e} network`}else this.info="Export multiple NEM addresses"}getButtonRequestData(e){return"ButtonRequest_Address"===e?{type:"address",serializedPath:(0,l.getSerializedPath)(this.params[this.progress].path),address:this.params[this.progress].address||"not-set"}:null}async confirmation(){if(this.confirmed)return!0;await this.getPopupPromise().promise;const e=this.createUiPromise(d.RECEIVE_CONFIRMATION,this.device),t=this.info;this.postMessage((0,p.UiMessage)(d.REQUEST_CONFIRMATION,{view:"export-address",label:t}));const r=await e.promise;return this.confirmed=r.payload,this.confirmed}async noBackupConfirmation(){await this.getPopupPromise().promise;const e=this.createUiPromise(d.RECEIVE_CONFIRMATION,this.device);return this.postMessage((0,p.UiMessage)(d.REQUEST_CONFIRMATION,{view:"no-backup"})),(await e.promise).payload}async run(){const e=[];for(let t=0;t<this.params.length;t++){const r=this.params[t];if(r.showOnTrezor){const e=await this.device.getCommands().nemGetAddress(r.path,r.network,!1);if("string"==typeof r.address){if(r.address!==e.address)throw new Error("Addresses do not match")}else r.address=e.address}const i=await this.device.getCommands().nemGetAddress(r.path,r.network,r.showOnTrezor);e.push({path:r.path,serializedPath:(0,l.getSerializedPath)(r.path),address:i.address}),this.hasBundle&&this.postMessage((0,p.UiMessage)(d.BUNDLE_PROGRESS,{progress:t,response:i})),this.progress++}return this.hasBundle?e:e[0]}}}],["trezor-connect","/lib/core/methods/NEMSignTransaction.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(622,r)),c=__browser_require__(626,r),u=__browser_require__(412,r),f=__browser_require__(413,r),l=o(__browser_require__(718,r));e.default=class extends h.default{constructor(e){super(e),this.requiredPermissions=["read","write"],this.firmwareRange=(0,c.getFirmwareRange)(this.name,(0,u.getMiscNetwork)("NEM"),this.firmwareRange),this.info="Sign NEM transaction";const t=e.payload;(0,c.validateParams)(t,[{name:"path",obligatory:!0},{name:"transaction",obligatory:!0}]);const r=(0,f.validatePath)(t.path,3),i=t.transaction;this.message=l.createTx(i,r)}async run(){return await this.device.getCommands().nemSignTx(this.message)}}}],["trezor-connect","/lib/core/methods/helpers/nemSignTx.js",function(e,t,r,i,s,n){"use strict";e.__esModule=!0,e.createTx=e.TX_TYPES=e.NEM_SUPPLY_CHANGE=e.NEM_MOSAIC_CREATION=e.NEM_PROVISION_NAMESPACE=e.NEM_MULTISIG=e.NEM_MULTISIG_SIGNATURE=e.NEM_AGGREGATE_MODIFICATION=e.NEM_IMPORTANCE_TRANSFER=e.NEM_COSIGNING=e.NEM_TRANSFER=e.NETWORKS=e.NEM_MIJIN=e.NEM_TESTNET=e.NEM_MAINNET=void 0;e.NEM_MAINNET=104;e.NEM_TESTNET=152;e.NEM_MIJIN=96;const o={mainnet:104,testnet:152,mijin:96};e.NETWORKS=o;e.NEM_TRANSFER=257;e.NEM_COSIGNING=258;e.NEM_IMPORTANCE_TRANSFER=2049;e.NEM_AGGREGATE_MODIFICATION=4097;e.NEM_MULTISIG_SIGNATURE=4098;e.NEM_MULTISIG=4100;e.NEM_PROVISION_NAMESPACE=8193;e.NEM_MOSAIC_CREATION=16385;e.NEM_SUPPLY_CHANGE=16386;const a={transfer:257,cosigning:258,importanceTransfer:2049,aggregateModification:4097,multisigSignature:4098,multisig:4100,provisionNamespace:8193,mosaicCreation:16385,supplyChange:16386};e.TX_TYPES=a;const h={1:"MosaicLevy_Absolute",2:"MosaicLevy_Percentile"},c={1:"SupplyChange_Increase",2:"SupplyChange_Decrease"},u={1:"CosignatoryModification_Add",2:"CosignatoryModification_Delete"},f={1:"ImportanceTransfer_Activate",2:"ImportanceTransfer_Deactivate"},l=(e,t)=>({address_n:t,network:e.version>>24&255,timestamp:e.timeStamp,fee:e.fee,deadline:e.deadline,signer:t?undefined:e.signer});var d;e.createTx=((e,t)=>{let r=e;const i={transaction:l(e,t)};switch(i.cosigning=4098===e.type,(i.cosigning||4100===e.type)&&(r=e.otherTrans,i.multisig=l(r)),r.type){case 257:i.transfer=(e=>{const t=e.mosaics?e.mosaics.map(e=>({namespace:e.mosaicId.namespaceId,mosaic:e.mosaicId.name,quantity:e.quantity})):undefined;return{recipient:e.recipient,amount:e.amount,payload:e.message.payload||undefined,public_key:2===e.message.type?e.message.publicKey:undefined,mosaics:t}})(r);break;case 2049:i.importance_transfer=(e=>({mode:f[e.importanceTransfer.mode],public_key:e.importanceTransfer.publicKey}))(r);break;case 4097:i.aggregate_modification={modifications:(e=r).modifications?e.modifications.map(e=>({type:u[e.modificationType],public_key:e.cosignatoryAccount})):undefined,relative_change:e.minCosignatories.relativeChange};break;case 8193:i.provision_namespace=(e=>({namespace:e.newPart,parent:e.parent||undefined,sink:e.rentalFeeSink,fee:e.rentalFee}))(r);break;case 16385:i.mosaic_creation=(e=>{const t=e.mosaicDefinition.levy&&e.mosaicDefinition.levy.type?e.mosaicDefinition.levy:undefined,r={namespace:e.mosaicDefinition.id.namespaceId,mosaic:e.mosaicDefinition.id.name,levy:t&&h[t.type],fee:t&&t.fee,levy_address:t&&t.recipient,levy_namespace:t&&t.mosaicId.namespaceId,levy_mosaic:t&&t.mosaicId.name,description:e.mosaicDefinition.description},i=e.mosaicDefinition.properties;return Array.isArray(i)&&i.forEach(e=>{const{name:t,value:i}=e;switch(t){case"divisibility":r.divisibility=parseInt(i);break;case"initialSupply":r.supply=parseInt(i);break;case"supplyMutable":r.mutable_supply="true"===i;break;case"transferable":r.transferable="true"===i}}),{definition:r,sink:e.creationFeeSink,fee:e.creationFee}})(r);break;case 16386:i.supply_change=(e=>({namespace:e.mosaicId.namespaceId,mosaic:e.mosaicId.name,type:c[e.supplyType],delta:e.delta}))(r);break;default:throw new Error("Unknown transaction type")}return i})}],["trezor-connect","/lib/core/methods/SignMessage.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var a=o(__browser_require__(384,r)),h=o(__browser_require__(622,r)),c=__browser_require__(626,r),u=__browser_require__(413,r),f=__browser_require__(412,r),l=__browser_require__(570,r);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}e.default=class extends h.default{constructor(e){super(e),this.requiredPermissions=["read","write"];const t=e.payload;(0,c.validateParams)(t,[{name:"path",obligatory:!0},{name:"coin",type:"string"},{name:"message",type:"string",obligatory:!0},{name:"hex",type:"boolean"}]);const r=(0,u.validatePath)(t.path);let i;t.coin?(i=(0,f.getBitcoinNetwork)(t.coin),(0,c.validateCoinPath)(i,r)):i=(0,f.getBitcoinNetwork)(r),this.info=(0,u.getLabel)("Sign #NETWORK message",i),i&&(this.firmwareRange=(0,c.getFirmwareRange)(this.name,i,this.firmwareRange));const s=t.hex?(0,l.messageToHex)(t.message):Buffer.from(t.message,"utf8").toString("hex");this.params={path:r,message:s,coinInfo:i}}async run(){const e=await this.device.getCommands().signMessage(this.params.path,this.params.message,this.params.coinInfo?this.params.coinInfo.name:null);return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e,{signature:Buffer.from(e.signature,"hex").toString("base64")})}}}],["trezor-connect","/lib/core/methods/SignTransaction.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var a=o(__browser_require__(384,r)),h=o(__browser_require__(571,r)),c=o(__browser_require__(622,r)),u=__browser_require__(626,r),f=__browser_require__(412,r),l=__browser_require__(413,r),d=__browser_require__(414,r),p=__browser_require__(627,r),b=o(__browser_require__(687,r)),g=o(__browser_require__(688,r)),m=__browser_require__(680,r);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}e.default=class extends c.default{constructor(e){super(e),this.requiredPermissions=["read","write"],this.info="Sign transaction";const t=e.payload;(0,u.validateParams)(t,[{name:"coin",type:"string",obligatory:!0},{name:"inputs",type:"array",obligatory:!0},{name:"outputs",type:"array",obligatory:!0},{name:"refTxs",type:"array",allowEmpty:!0},{name:"locktime",type:"number"},{name:"timestamp",type:"number"},{name:"version",type:"number"},{name:"expiry",type:"number"},{name:"overwintered",type:"boolean"},{name:"versionGroupId",type:"number"},{name:"branchId",type:"number"},{name:"push",type:"boolean"}]);const r=(0,f.getBitcoinNetwork)(t.coin);if(!r)throw d.NO_COIN_INFO;this.firmwareRange=(0,u.getFirmwareRange)(this.name,r,this.firmwareRange),this.info=(0,l.getLabel)("Sign #NETWORK transaction",r),Object.prototype.hasOwnProperty.call(t,"refTxs")&&t.refTxs.forEach(e=>{(0,u.validateParams)(e,[{name:"hash",type:"string",obligatory:!0},{name:"inputs",type:"array",obligatory:!0},{name:"bin_outputs",type:"array",obligatory:!0},{name:"version",type:"number",obligatory:!0},{name:"lock_time",type:"number",obligatory:!0},{name:"extra_data",type:"string"},{name:"timestamp",type:"number"},{name:"version_group_id",type:"number"}])});const i=(0,m.validateTrezorInputs)(t.inputs,r),s=(0,m.validateTrezorOutputs)(t.outputs,r).filter(e=>"string"==typeof e.amount&&!Object.prototype.hasOwnProperty.call(e,"op_return_data"));if(s.length>0&&s.reduce((e,t)=>e.plus("string"==typeof t.amount?t.amount:"0"),new h.default(0)).lte(r.dustLimit))throw new Error("Total amount is below dust limit.");if(this.params={inputs:i,outputs:t.outputs,refTxs:t.refTxs,options:{lock_time:t.locktime,timestamp:t.timestamp,version:t.version,expiry:t.expiry,overwintered:t.overwintered,version_group_id:t.versionGroupId,branch_id:t.branchId},coinInfo:r,push:"boolean"==typeof t.push&&t.push},r.hasTimestamp&&!Object.prototype.hasOwnProperty.call(t,"timestamp")){const e=new Date;this.params.options.timestamp=Math.round(e.getTime()/1e3)}}async run(){const{device:e,params:t}=this;let r=[];if(t.refTxs)r=t.refTxs;else{const e=t.inputs.map(m.inputToHD),i=(0,m.getReferencedTransactions)(e);if(i.length>0){if(!t.coinInfo.blockchainLink)throw(0,d.backendNotSupported)(t.coinInfo.name);const e=await(0,p.initBlockchain)(t.coinInfo,this.postMessage),s=await e.getReferencedTransactions(i);r=(0,m.transformReferencedTransactions)(s)}}const i=await(0,b.default)(e.getCommands().typedCall.bind(e.getCommands()),t.inputs,t.outputs,r,t.options,t.coinInfo);if(await(0,g.default)(e.getCommands().getHDNode.bind(e.getCommands()),t.inputs,t.outputs,i.serializedTx,t.coinInfo),t.push){if(!t.coinInfo.blockchainLink)throw(0,d.backendNotSupported)(t.coinInfo.name);const e=await(0,p.initBlockchain)(t.coinInfo,this.postMessage);return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},i,{txid:await e.pushTransaction(i.serializedTx)})}return i}}}],["trezor-connect","/lib/core/methods/StellarGetAddress.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(384,r)),c=a(__browser_require__(622,r)),u=__browser_require__(626,r),f=__browser_require__(412,r),l=__browser_require__(413,r),d=o(__browser_require__(388,r)),p=__browser_require__(621,r);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}e.default=class extends c.default{constructor(e){super(e),(0,h.default)(this,"confirmed",!1),(0,h.default)(this,"progress",0),this.requiredPermissions=["read"],this.firmwareRange=(0,u.getFirmwareRange)(this.name,(0,f.getMiscNetwork)("Stellar"),this.firmwareRange),this.hasBundle=Object.prototype.hasOwnProperty.call(e.payload,"bundle");const t=this.hasBundle?e.payload:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e.payload,{bundle:[e.payload]});(0,u.validateParams)(t,[{name:"bundle",type:"array"},{name:"useEventListener",type:"boolean"}]);const r=[];t.bundle.forEach(e=>{(0,u.validateParams)(e,[{name:"path",obligatory:!0},{name:"address",type:"string"},{name:"showOnTrezor",type:"boolean"}]);const t=(0,l.validatePath)(e.path,3);let i=!0;Object.prototype.hasOwnProperty.call(e,"showOnTrezor")&&(i=e.showOnTrezor),r.push({path:t,address:e.address,showOnTrezor:i})});const i=t.useEventListener&&1===r.length&&"string"==typeof r[0].address&&r[0].showOnTrezor;this.confirmed=i,this.useUi=!i,this.params=r,1===r.length?this.info=`Export Stellar address for account #${(0,l.fromHardened)(this.params[0].path[2])+1}`:this.info="Export multiple Stellar addresses"}getButtonRequestData(e){return"ButtonRequest_Address"===e?{type:"address",serializedPath:(0,l.getSerializedPath)(this.params[this.progress].path),address:this.params[this.progress].address||"not-set"}:null}async confirmation(){if(this.confirmed)return!0;await this.getPopupPromise().promise;const e=this.createUiPromise(d.RECEIVE_CONFIRMATION,this.device),t=this.info;this.postMessage((0,p.UiMessage)(d.REQUEST_CONFIRMATION,{view:"export-address",label:t}));const r=await e.promise;return this.confirmed=r.payload,this.confirmed}async noBackupConfirmation(){await this.getPopupPromise().promise;const e=this.createUiPromise(d.RECEIVE_CONFIRMATION,this.device);return this.postMessage((0,p.UiMessage)(d.REQUEST_CONFIRMATION,{view:"no-backup"})),(await e.promise).payload}async run(){const e=[];for(let t=0;t<this.params.length;t++){const r=this.params[t];if(r.showOnTrezor){const e=await this.device.getCommands().stellarGetAddress(r.path,!1);if("string"==typeof r.address){if(r.address!==e.address)throw new Error("Addresses do not match")}else r.address=e.address}const i=await this.device.getCommands().stellarGetAddress(r.path,r.showOnTrezor);e.push({address:i.address,path:r.path,serializedPath:(0,l.getSerializedPath)(r.path)}),this.hasBundle&&this.postMessage((0,p.UiMessage)(d.BUNDLE_PROGRESS,{progress:t,response:i})),this.progress++}return this.hasBundle?e:e[0]}}}],["trezor-connect","/lib/core/methods/StellarSignTransaction.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(622,r)),c=__browser_require__(626,r),u=__browser_require__(412,r),f=__browser_require__(413,r),l=o(__browser_require__(723,r));e.default=class extends h.default{constructor(e){super(e),this.requiredPermissions=["read","write"],this.firmwareRange=(0,c.getFirmwareRange)(this.name,(0,u.getMiscNetwork)("Stellar"),this.firmwareRange),this.info="Sign Stellar transaction";const t=e.payload;(0,c.validateParams)(t,[{name:"path",obligatory:!0},{name:"networkPassphrase",type:"string",obligatory:!0},{name:"transaction",obligatory:!0}]);const r=(0,f.validatePath)(t.path,3),i=t.transaction;this.params={path:r,networkPassphrase:t.networkPassphrase,transaction:i}}async run(){const e=await l.stellarSignTx(this.device.getCommands().typedCall.bind(this.device.getCommands()),this.params.path,this.params.networkPassphrase,this.params.transaction);return{publicKey:e.public_key,signature:e.signature}}}}],["trezor-connect","/lib/core/methods/helpers/stellarSignTx.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.stellarSignTx=void 0;var a=o(__browser_require__(384,r)),h=__browser_require__(626,r);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const f=async(e,t,r)=>{const i=r+1>=t.length,s=t[r],n=s.type;if(i){return(await e(n,"StellarSignedTx",u({},s,{type:null}))).message}return await e(n,"StellarTxOpRequest",u({},s,{type:null})),await f(e,t,r+1)};e.stellarSignTx=(async(e,t,r,i)=>{const s=l(i);s.address_n=t,s.network_passphrase=r;const n=[];return i.operations.forEach(e=>{const t=d(e);t&&n.push(t)}),await e("StellarSignTx","StellarTxOpRequest",s),await f(e,n,0)});const l=e=>{const t=e.timebounds?{timebounds_start:e.timebounds.minTime,timebounds_end:e.timebounds.maxTime}:undefined,r=e.memo?{memo_type:e.memo.type,memo_text:e.memo.text,memo_id:e.memo.id,memo_hash:e.memo.hash}:undefined;return u({address_n:[],network_passphrase:"",source_account:e.source,fee:e.fee,sequence_number:e.sequence},t,{},r,{num_operations:e.operations.length})},d=e=>{switch(e.type){case"createAccount":return(0,h.validateParams)(e,[{name:"destination",type:"string",obligatory:!0},{name:"startingBalance",type:"amount",obligatory:!0}]),{type:"StellarCreateAccountOp",source_account:e.source,new_account:e.destination,starting_balance:e.startingBalance};case"payment":return(0,h.validateParams)(e,[{name:"destination",type:"string",obligatory:!0},{name:"amount",type:"amount",obligatory:!0}]),{type:"StellarPaymentOp",source_account:e.source,destination_account:e.destination,asset:e.asset,amount:e.amount};case"pathPayment":return(0,h.validateParams)(e,[{name:"destAmount",type:"amount",obligatory:!0}]),{type:"StellarPathPaymentOp",source_account:e.source,send_asset:e.sendAsset,send_max:e.sendMax,destination_account:e.destination,destination_asset:e.destAsset,destination_amount:e.destAmount,paths:e.path};case"createPassiveOffer":return(0,h.validateParams)(e,[{name:"amount",type:"amount",obligatory:!0}]),{type:"StellarCreatePassiveOfferOp",source_account:e.source,buying_asset:e.buying,selling_asset:e.selling,amount:e.amount,price_n:e.price.n,price_d:e.price.d};case"manageOffer":return(0,h.validateParams)(e,[{name:"amount",type:"amount",obligatory:!0}]),{type:"StellarManageOfferOp",source_account:e.source,buying_asset:e.buying,selling_asset:e.selling,amount:e.amount,offer_id:e.offerId,price_n:e.price.n,price_d:e.price.d};case"setOptions":{const t=e.signer?{signer_type:e.signer.type,signer_key:e.signer.key,signer_weight:e.signer.weight}:undefined;return u({type:"StellarSetOptionsOp",source_account:e.source,clear_flags:e.clearFlags,set_flags:e.setFlags,master_weight:e.masterWeight,low_threshold:e.lowThreshold,medium_threshold:e.medThreshold,high_threshold:e.highThreshold,home_domain:e.homeDomain,inflation_destination_account:e.inflationDest},t)}case"changeTrust":return(0,h.validateParams)(e,[{name:"limit",type:"amount"}]),{type:"StellarChangeTrustOp",source_account:e.source,asset:e.line,limit:e.limit};case"allowTrust":return{type:"StellarAllowTrustOp",source_account:e.source,trusted_account:e.trustor,asset_type:e.assetType,asset_code:e.assetCode,is_authorized:e.authorize?1:0};case"accountMerge":return{type:"StellarAccountMergeOp",source_account:e.source,destination_account:e.destination};case"manageData":return{type:"StellarManageDataOp",source_account:e.source,key:e.name,value:e.value};case"bumpSequence":return{type:"StellarBumpSequenceOp",source_account:e.source,bump_to:e.bumpTo}}}}],["trezor-connect","/lib/core/methods/TezosGetAddress.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(384,r)),c=a(__browser_require__(622,r)),u=__browser_require__(626,r),f=__browser_require__(412,r),l=__browser_require__(413,r),d=o(__browser_require__(388,r)),p=__browser_require__(621,r);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}e.default=class extends c.default{constructor(e){super(e),(0,h.default)(this,"confirmed",!1),(0,h.default)(this,"progress",0),this.requiredPermissions=["read"],this.firmwareRange=(0,u.getFirmwareRange)(this.name,(0,f.getMiscNetwork)("Tezos"),this.firmwareRange),this.hasBundle=Object.prototype.hasOwnProperty.call(e.payload,"bundle");const t=this.hasBundle?e.payload:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e.payload,{bundle:[e.payload]});(0,u.validateParams)(t,[{name:"bundle",type:"array"},{name:"useEventListener",type:"boolean"}]);const r=[];t.bundle.forEach(e=>{(0,u.validateParams)(e,[{name:"path",obligatory:!0},{name:"address",type:"string"},{name:"showOnTrezor",type:"boolean"}]);const t=(0,l.validatePath)(e.path,3);let i=!0;Object.prototype.hasOwnProperty.call(e,"showOnTrezor")&&(i=e.showOnTrezor),r.push({path:t,address:e.address,showOnTrezor:i})});const i=t.useEventListener&&1===r.length&&"string"==typeof r[0].address&&r[0].showOnTrezor;this.confirmed=i,this.useUi=!i,this.params=r,1===r.length?this.info=`Export Tezos address for account #${(0,l.fromHardened)(this.params[0].path[2])+1}`:this.info="Export multiple Tezos addresses"}getButtonRequestData(e){return"ButtonRequest_Address"===e?{type:"address",serializedPath:(0,l.getSerializedPath)(this.params[this.progress].path),address:this.params[this.progress].address||"not-set"}:null}async confirmation(){if(this.confirmed)return!0;await this.getPopupPromise().promise;const e=this.createUiPromise(d.RECEIVE_CONFIRMATION,this.device),t=this.info;this.postMessage((0,p.UiMessage)(d.REQUEST_CONFIRMATION,{view:"export-address",label:t}));const r=await e.promise;return this.confirmed=r.payload,this.confirmed}async noBackupConfirmation(){await this.getPopupPromise().promise;const e=this.createUiPromise(d.RECEIVE_CONFIRMATION,this.device);return this.postMessage((0,p.UiMessage)(d.REQUEST_CONFIRMATION,{view:"no-backup"})),(await e.promise).payload}async run(){const e=[];for(let t=0;t<this.params.length;t++){const r=this.params[t];if(r.showOnTrezor){const e=await this.device.getCommands().tezosGetAddress(r.path,!1);if("string"==typeof r.address){if(r.address!==e.address)throw new Error("Addresses do not match")}else r.address=e.address}const i=await this.device.getCommands().tezosGetAddress(r.path,r.showOnTrezor);e.push({path:r.path,serializedPath:(0,l.getSerializedPath)(r.path),address:i.address}),this.hasBundle&&this.postMessage((0,p.UiMessage)(d.BUNDLE_PROGRESS,{progress:t,response:i})),this.progress++}return this.hasBundle?e:e[0]}}}],["trezor-connect","/lib/core/methods/TezosGetPublicKey.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(384,r)),c=a(__browser_require__(622,r)),u=__browser_require__(626,r),f=__browser_require__(412,r),l=__browser_require__(413,r),d=o(__browser_require__(388,r)),p=__browser_require__(621,r);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}e.default=class extends c.default{constructor(e){super(e),(0,h.default)(this,"confirmed",!1),this.requiredPermissions=["read"],this.firmwareRange=(0,u.getFirmwareRange)(this.name,(0,f.getMiscNetwork)("Tezos"),this.firmwareRange),this.info="Export Tezos public key",this.hasBundle=Object.prototype.hasOwnProperty.call(e.payload,"bundle");const t=this.hasBundle?e.payload:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e.payload,{bundle:[e.payload]});(0,u.validateParams)(t,[{name:"bundle",type:"array"}]);const r=[];t.bundle.forEach(e=>{(0,u.validateParams)(e,[{name:"path",obligatory:!0},{name:"showOnTrezor",type:"boolean"}]);const t=(0,l.validatePath)(e.path,3);let i=!0;Object.prototype.hasOwnProperty.call(e,"showOnTrezor")&&(i=e.showOnTrezor),r.push({path:t,showOnTrezor:i})}),this.params=r}async confirmation(){if(this.confirmed)return!0;await this.getPopupPromise().promise;const e=this.createUiPromise(d.RECEIVE_CONFIRMATION,this.device);let t;t=this.params.length>1?"Export multiple Tezos public keys":`Export Tezos public key for account #${(0,l.fromHardened)(this.params[0].path[2])+1}`,this.postMessage((0,p.UiMessage)(d.REQUEST_CONFIRMATION,{view:"export-address",label:t}));const r=await e.promise;return this.confirmed=r.payload,this.confirmed}async run(){const e=[];for(let t=0;t<this.params.length;t++){const r=this.params[t],i=await this.device.getCommands().tezosGetPublicKey(r.path,r.showOnTrezor);e.push({path:r.path,serializedPath:(0,l.getSerializedPath)(r.path),publicKey:i.public_key}),this.hasBundle&&this.postMessage((0,p.UiMessage)(d.BUNDLE_PROGRESS,{progress:t,response:i}))}return this.hasBundle?e:e[0]}}}],["trezor-connect","/lib/core/methods/TezosSignTransaction.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(622,r)),c=__browser_require__(626,r),u=__browser_require__(412,r),f=__browser_require__(413,r),l=o(__browser_require__(727,r));e.default=class extends h.default{constructor(e){super(e),this.requiredPermissions=["read","write"],this.firmwareRange=(0,c.getFirmwareRange)(this.name,(0,u.getMiscNetwork)("Tezos"),this.firmwareRange),this.info="Sign Tezos transaction";const t=e.payload;(0,c.validateParams)(t,[{name:"path",obligatory:!0},{name:"branch",type:"string",obligatory:!0},{name:"operation",obligatory:!0}]);const r=(0,f.validatePath)(t.path,3),i=t.branch,s=t.operation,n=l.createTx(r,i,s);this.params={transaction:n}}async run(){return await this.device.getCommands().tezosSignTransaction(this.params.transaction)}}}],["trezor-connect","/lib/core/methods/helpers/tezosSignTx.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.createTx=void 0;var h=a(__browser_require__(384,r)),c=o(__browser_require__(499,r)),u=__browser_require__(626,r);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const d={B:new Uint8Array([1,52]),tz1:new Uint8Array([6,161,159]),tz2:new Uint8Array([6,161,161]),tz3:new Uint8Array([6,161,164]),KT1:new Uint8Array([2,90,121]),edpk:new Uint8Array([13,15,37,217]),sppk:new Uint8Array([3,254,226,86]),p2pk:new Uint8Array([3,178,139,127])},p=(e,t)=>c.decode(t).slice(e.length),b=(e,t)=>{const r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r},g=e=>{switch(e.substr(0,3)){case"tz1":return{originated:0,hash:b(new Uint8Array([0]),p(d.tz1,e))};case"tz2":return{originated:0,hash:b(new Uint8Array([1]),p(d.tz2,e))};case"tz3":return{originated:0,hash:b(new Uint8Array([2]),p(d.tz3,e))};case"KT1":return{originated:1,hash:b(p(d.KT1,e),new Uint8Array([0]))};default:throw new Error("Wrong Tezos publicKeyHash address")}};e.createTx=((e,t,r)=>{let i={address_n:e,branch:p(d.B,t)};if(r.reveal){const e=r.reveal;(0,u.validateParams)(e,[{name:"source",type:"string",obligatory:!0},{name:"public_key",type:"string",obligatory:!0},{name:"fee",type:"number",obligatory:!0},{name:"counter",type:"number",obligatory:!0},{name:"gas_limit",type:"number",obligatory:!0},{name:"storage_limit",type:"number",obligatory:!0}]),i=l({},i,{reveal:{source:g(e.source).hash,public_key:(e=>{switch(e.substr(0,4)){case"edpk":return b(new Uint8Array([0]),p(d.edpk,e));case"sppk":return b(new Uint8Array([1]),p(d.sppk,e));case"p2pk":return b(new Uint8Array([2]),p(d.p2pk,e));default:throw new Error("Wrong Tezos publicKey ")}})(e.public_key),fee:e.fee,counter:e.counter,gas_limit:e.gas_limit,storage_limit:e.storage_limit}})}if(r.transaction){const e=r.transaction;if((0,u.validateParams)(e,[{name:"source",type:"string",obligatory:!0},{name:"destination",type:"string",obligatory:!0},{name:"amount",type:"number",obligatory:!0},{name:"counter",type:"number",obligatory:!0},{name:"fee",type:"number",obligatory:!0},{name:"gas_limit",type:"number",obligatory:!0},{name:"storage_limit",type:"number",obligatory:!0}]),i=l({},i,{transaction:{source:g(e.source).hash,destination:{tag:g(e.destination).originated,hash:g(e.destination).hash},amount:e.amount,counter:e.counter,fee:e.fee,gas_limit:e.gas_limit,storage_limit:e.storage_limit}}),Object.prototype.hasOwnProperty.call(e,"parameters")&&(i=l({},i,{transaction:l({},i.transaction,{parameters:e.parameters})})),e.parameters_manager){const t=e.parameters_manager;if((0,u.validateParams)(t,[{name:"set_delegate",type:"string",obligatory:!1},{name:"cancel_delegate",type:"boolean",obligatory:!1},{name:"transfer",type:"object",obligatory:!1}]),t.set_delegate&&(i=l({},i,{transaction:l({},i.transaction,{parameters_manager:{set_delegate:g(t.set_delegate).hash}})})),Object.prototype.hasOwnProperty.call(t,"cancel_delegate")&&(i=l({},i,{transaction:l({},i.transaction,{parameters_manager:{cancel_delegate:!0}})})),t.transfer){const e=t.transfer;(0,u.validateParams)(e,[{name:"amount",type:"number",obligatory:!0},{name:"destination",type:"string",obligatory:!0}]),i=l({},i,{transaction:l({},i.transaction,{parameters_manager:{transfer:{destination:{tag:g(e.destination).originated,hash:g(e.destination).hash},amount:e.amount}}})})}}}if(r.origination){const e=r.origination;(0,u.validateParams)(e,[{name:"source",type:"string",obligatory:!0},{name:"balance",type:"number",obligatory:!0},{name:"fee",type:"number",obligatory:!0},{name:"counter",type:"number",obligatory:!0},{name:"gas_limit",type:"number",obligatory:!0},{name:"storage_limit",type:"number",obligatory:!0},{name:"script",type:"string",obligatory:!0}]),i=l({},i,{origination:{source:g(e.source).hash,balance:e.balance,fee:e.fee,counter:e.counter,gas_limit:e.gas_limit,storage_limit:e.storage_limit,script:e.script}}),e.delegate&&(i=l({},i,{origination:l({},i.origination,{delegate:g(e.delegate).hash})}))}if(r.delegation){const e=r.delegation;(0,u.validateParams)(e,[{name:"source",type:"string",obligatory:!0},{name:"delegate",type:"string",obligatory:!0},{name:"fee",type:"number",obligatory:!0},{name:"counter",type:"number",obligatory:!0},{name:"gas_limit",type:"number",obligatory:!0},{name:"storage_limit",type:"number",obligatory:!0}]),i=l({},i,{delegation:{source:g(e.source).hash,delegate:g(e.delegate).hash,fee:e.fee,counter:e.counter,gas_limit:e.gas_limit,storage_limit:e.storage_limit}})}return i})}],["trezor-connect","/lib/core/methods/EosGetPublicKey.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(384,r)),c=a(__browser_require__(622,r)),u=__browser_require__(626,r),f=__browser_require__(412,r),l=__browser_require__(413,r),d=o(__browser_require__(388,r)),p=__browser_require__(621,r);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}e.default=class extends c.default{constructor(e){super(e),(0,h.default)(this,"confirmed",!1),this.requiredPermissions=["read"],this.firmwareRange=(0,u.getFirmwareRange)(this.name,(0,f.getMiscNetwork)("EOS"),this.firmwareRange),this.hasBundle=Object.prototype.hasOwnProperty.call(e.payload,"bundle");const t=this.hasBundle?e.payload:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e.payload,{bundle:[e.payload]});(0,u.validateParams)(t,[{name:"bundle",type:"array"}]);const r=[];t.bundle.forEach(e=>{(0,u.validateParams)(e,[{name:"path",obligatory:!0},{name:"showOnTrezor",type:"boolean"}]);const t=(0,l.validatePath)(e.path,3);let i=!0;Object.prototype.hasOwnProperty.call(e,"showOnTrezor")&&(i=e.showOnTrezor),r.push({path:t,showOnTrezor:i})}),1===r.length?this.info="Export Eos public key":this.info="Export multiple Eos public keys",this.params=r}async confirmation(){if(this.confirmed)return!0;await this.getPopupPromise().promise;const e=this.createUiPromise(d.RECEIVE_CONFIRMATION,this.device);let t;t=this.params.length>1?"Export multiple Eos public keys":`Export Eos public key for account #${(0,l.fromHardened)(this.params[0].path[2])+1}`,this.postMessage((0,p.UiMessage)(d.REQUEST_CONFIRMATION,{view:"export-address",label:t}));const r=await e.promise;return this.confirmed=r.payload,this.confirmed}async run(){const e=[];for(let t=0;t<this.params.length;t++){const r=this.params[t],i=await this.device.getCommands().eosGetPublicKey(r.path,r.showOnTrezor);e.push({rawPublicKey:i.raw_public_key,wifPublicKey:i.wif_public_key,path:r.path,serializedPath:(0,l.getSerializedPath)(r.path)}),this.hasBundle&&this.postMessage((0,p.UiMessage)(d.BUNDLE_PROGRESS,{progress:t,response:i}))}return this.hasBundle?e:e[0]}}}],["trezor-connect","/lib/core/methods/EosSignTransaction.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(622,r)),c=__browser_require__(626,r),u=__browser_require__(412,r),f=__browser_require__(413,r),l=o(__browser_require__(730,r));e.default=class extends h.default{constructor(e){super(e),this.requiredPermissions=["read","write"],this.firmwareRange=(0,c.getFirmwareRange)(this.name,(0,u.getMiscNetwork)("EOS"),this.firmwareRange),this.info="Sign EOS transaction";const t=e.payload;(0,c.validateParams)(t,[{name:"path",obligatory:!0},{name:"transaction",obligatory:!0}]);const r=(0,f.validatePath)(t.path,3),{chain_id:i,header:s,ack:n}=l.validate(r,t.transaction);this.params={path:r,chain_id:i,header:s,ack:n}}async run(){return{signature:(await l.signTx(this.device.getCommands().typedCall.bind(this.device.getCommands()),this.params.path,this.params.chain_id,this.params.header,this.params.ack)).signature}}}}],["trezor-connect","/lib/core/methods/helpers/eosSignTx.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.signTx=e.validate=void 0;var h=a(__browser_require__(384,r)),c=o(__browser_require__(501,r));function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const l=(e,t=1)=>{const r=Array(t).fill("0".charCodeAt(0));for(let t=e.length-1;t>=0;--t){let i=e[t];for(let e=0;e<r.length;++e){const t=(r[e]-"0".charCodeAt(0)<<8)+i;r[e]="0".charCodeAt(0)+t%10,i=t/10|0}for(;i;)r.push("0".charCodeAt(0)+i%10),i=i/10|0}return r.reverse(),String.fromCharCode(...r)},d=e=>{if("string"!=typeof e)throw new Error(`Eos serialization error, "${typeof e}" should be a string`);const t=new Uint8Array(8);let r=63;for(let i=0;i<e.length;++i){let s=(s=e.charCodeAt(i))>="a".charCodeAt(0)&&s<="z".charCodeAt(0)?s-"a".charCodeAt(0)+6:s>="1".charCodeAt(0)&&s<="5".charCodeAt(0)?s-"1".charCodeAt(0)+1:0;r<5&&(s<<=1);for(let e=4;e>=0;--e)r>=0&&(t[Math.floor(r/8)]|=(s>>e&1)<<r%8,--r)}return l(t)};var p;const b=e=>{if("string"!=typeof e)throw new Error(`Eos serialization error. Expected string containing asset, got: ${typeof e}`);let t=0,r="",i=0;"-"===(e=e.trim())[t]&&(r+="-",++t);let s=!1;for(;t<e.length&&e.charCodeAt(t)>="0".charCodeAt(0)&&e.charCodeAt(t)<="9".charCodeAt(0);)s=!0,r+=e[t],++t;if(!s)throw new Error("Eos serialization error. Asset must begin with a number");if("."===e[t])for(++t;t<e.length&&e.charCodeAt(t)>="0".charCodeAt(0)&&e.charCodeAt(t)<="9".charCodeAt(0);)r+=e[t],++i,++t;const n=e.substr(t).trim(),o=[255&i];for(let e=0;e<n.length;++e)o.push(n.charCodeAt(e));for(;o.length<8;)o.push(0);return{amount:r,symbol:l(o.slice(0,8))}},g=e=>{return{threshold:e.threshold,keys:e.keys.map(e=>f({weight:e.weight},function(e){const t=0===e.indexOf("EOS")?3:7,r=c.decode(e.substring(t));return{type:0,key:r.slice(0,r.length-4)}}(e.key))),accounts:e.accounts.map(e=>({weight:e.weight,account:{actor:d(e.permission.actor),permission:d(e.permission.permission)}})),waits:e.waits}},m=e=>{const t=(e=>{switch(e.name){case"transfer":return{transfer:{sender:d(e.data.from),receiver:d(e.data.to),quantity:b(e.data.quantity),memo:e.data.memo}};case"delegatebw":return{delegate:{sender:d(e.data.from),receiver:d(e.data.receiver),net_quantity:b(e.data.stake_net_quantity),cpu_quantity:b(e.data.stake_cpu_quantity),transfer:e.data.transfer}};case"undelegatebw":return{undelegate:{sender:d(e.data.from),receiver:d(e.data.receiver),net_quantity:b(e.data.unstake_net_quantity),cpu_quantity:b(e.data.unstake_cpu_quantity)}};case"buyram":return{buy_ram:{payer:d(e.data.payer),receiver:d(e.data.receiver),quantity:b(e.data.quant)}};case"buyrambytes":return{buy_ram_bytes:{payer:d(e.data.payer),receiver:d(e.data.receiver),bytes:e.data.bytes}};case"sellram":return{sell_ram:{account:d(e.data.account),bytes:e.data.bytes}};case"voteproducer":return{vote_producer:{voter:d(e.data.voter),proxy:d(e.data.proxy),producers:e.data.producers.map(e=>d(e))}};case"refund":return{refund:{owner:d(e.data.owner)}};case"updateauth":return{update_auth:{account:d(e.data.account),permission:d(e.data.permission),parent:d(e.data.parent),auth:g(e.data.auth)}};case"deleteauth":return{delete_auth:{account:d(e.data.account),permission:d(e.data.permission)}};case"linkauth":return{link_auth:{account:d(e.data.account),code:d(e.data.code),type:d(e.data.type),requirement:d(e.data.requirement)}};case"unlinkauth":return{unlink_auth:{account:d(e.data.account),code:d(e.data.code),type:d(e.data.type)}};case"newaccount":return{new_account:{creator:d(e.data.creator),name:d(e.data.name),owner:g(e.data.owner),active:g(e.data.active)}};default:return null}})(e)||(e=>"string"!=typeof e.data?null:{unknown:{data_size:e.data.length/2,data_chunk:e.data}})(e);return f({common:(e=>({account:d(e.account),name:d(e.name),authorization:e.authorization.map(e=>({actor:d(e.actor),permission:d(e.permission)}))}))(e)},t)};e.validate=((e,t)=>{const r=t.header?{expiration:"number"==typeof t.header.expiration?t.header.expiration:(e=>{if("string"!=typeof e)throw new Error("Eos serialization error. Header.expiration should be string or number");return"Z"!==e.substr(e.length-1,e.length)&&(e+="Z"),Date.parse(e)/1e3})(t.header.expiration),ref_block_num:t.header.refBlockNum,ref_block_prefix:t.header.refBlockPrefix,max_net_usage_words:t.header.maxNetUsageWords,max_cpu_usage_ms:t.header.maxCpuUsageMs,delay_sec:t.header.delaySec}:null,i=[];return t.actions.forEach(e=>{i.push(m(e))}),{chain_id:t.chainId,header:r,ack:i}});const _=async(e,t,r,i)=>{const s=r[i],n=i+1>=r.length;let o;const a=t.message.data_size;if(s.unknown){const t=s.unknown,r="number"==typeof a?a:0,h=((e,t)=>{if(t<0)return null;if(e.length<t)return null;const r=t>0?e.length-2*t:0;return e.substring(r,r+4096)})(t.data_chunk,r),c={common:s.common,unknown:{data_size:t.data_size,data_chunk:h}},u=(r>0?t.data_size-r+2048:2048)>=t.data_size;if(n&&u){return(await e("EosTxActionAck","EosSignedTx",c)).message}o=await e("EosTxActionAck","EosTxActionRequest",c),u&&i++}else{if(n){return(await e("EosTxActionAck","EosSignedTx",s)).message}o=await e("EosTxActionAck","EosTxActionRequest",s),i++}return await _(e,o,r,i)};e.signTx=(async(e,t,r,i,s)=>{const n=await e("EosSignTx","EosTxActionRequest",{address_n:t,chain_id:r,header:i,num_actions:s.length});return await _(e,n,s,0)})}],["trezor-connect","/lib/core/methods/BinanceGetPublicKey.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(384,r)),c=a(__browser_require__(622,r)),u=__browser_require__(626,r),f=__browser_require__(412,r),l=__browser_require__(413,r),d=o(__browser_require__(388,r)),p=__browser_require__(621,r);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}e.default=class extends c.default{constructor(e){super(e),(0,h.default)(this,"confirmed",!1),this.requiredPermissions=["read"],this.firmwareRange=(0,u.getFirmwareRange)(this.name,(0,f.getMiscNetwork)("BNB"),this.firmwareRange),this.info="Export Binance public key",this.hasBundle=Object.prototype.hasOwnProperty.call(e.payload,"bundle");const t=this.hasBundle?e.payload:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e.payload,{bundle:[e.payload]});(0,u.validateParams)(t,[{name:"bundle",type:"array"}]);const r=[];t.bundle.forEach(e=>{(0,u.validateParams)(e,[{name:"path",obligatory:!0},{name:"showOnTrezor",type:"boolean"}]);const t=(0,l.validatePath)(e.path,3);let i=!0;Object.prototype.hasOwnProperty.call(e,"showOnTrezor")&&(i=e.showOnTrezor),r.push({path:t,showOnTrezor:i})}),this.params=r}async confirmation(){if(this.confirmed)return!0;await this.getPopupPromise().promise;const e=this.createUiPromise(d.RECEIVE_CONFIRMATION,this.device);let t;t=this.params.length>1?"Export multiple Binance public keys":`Export Binance public key for account #${(0,l.fromHardened)(this.params[0].path[2])+1}`,this.postMessage((0,p.UiMessage)(d.REQUEST_CONFIRMATION,{view:"export-address",label:t}));const r=await e.promise;return this.confirmed=r.payload,this.confirmed}async run(){const e=[];for(let t=0;t<this.params.length;t++){const r=this.params[t],i=await this.device.getCommands().binanceGetPublicKey(r.path,r.showOnTrezor);e.push({path:r.path,serializedPath:(0,l.getSerializedPath)(r.path),publicKey:i.public_key}),this.hasBundle&&this.postMessage((0,p.UiMessage)(d.BUNDLE_PROGRESS,{progress:t,response:i}))}return this.hasBundle?e:e[0]}}}],["trezor-connect","/lib/core/methods/BinanceGetAddress.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(384,r)),c=a(__browser_require__(622,r)),u=__browser_require__(626,r),f=__browser_require__(412,r),l=__browser_require__(413,r),d=o(__browser_require__(388,r)),p=__browser_require__(621,r);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}e.default=class extends c.default{constructor(e){super(e),(0,h.default)(this,"confirmed",!1),(0,h.default)(this,"progress",0),this.requiredPermissions=["read"],this.firmwareRange=(0,u.getFirmwareRange)(this.name,(0,f.getMiscNetwork)("BNB"),this.firmwareRange),this.hasBundle=Object.prototype.hasOwnProperty.call(e.payload,"bundle");const t=this.hasBundle?e.payload:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e.payload,{bundle:[e.payload]});(0,u.validateParams)(t,[{name:"bundle",type:"array"},{name:"useEventListener",type:"boolean"}]);const r=[];t.bundle.forEach(e=>{(0,u.validateParams)(e,[{name:"path",obligatory:!0},{name:"address",type:"string"},{name:"showOnTrezor",type:"boolean"}]);const t=(0,l.validatePath)(e.path,3);let i=!0;Object.prototype.hasOwnProperty.call(e,"showOnTrezor")&&(i=e.showOnTrezor),r.push({path:t,address:e.address,showOnTrezor:i})});const i=t.useEventListener&&1===r.length&&"string"==typeof r[0].address&&r[0].showOnTrezor;this.confirmed=i,this.useUi=!i,this.params=r,1===r.length?this.info=`Export Binance address for account #${(0,l.fromHardened)(this.params[0].path[2])+1}`:this.info="Export multiple Binance addresses"}getButtonRequestData(e){return"ButtonRequest_Address"===e?{type:"address",serializedPath:(0,l.getSerializedPath)(this.params[this.progress].path),address:this.params[this.progress].address||"not-set"}:null}async confirmation(){if(this.confirmed)return!0;await this.getPopupPromise().promise;const e=this.createUiPromise(d.RECEIVE_CONFIRMATION,this.device),t=this.info;this.postMessage((0,p.UiMessage)(d.REQUEST_CONFIRMATION,{view:"export-address",label:t}));const r=await e.promise;return this.confirmed=r.payload,this.confirmed}async noBackupConfirmation(){await this.getPopupPromise().promise;const e=this.createUiPromise(d.RECEIVE_CONFIRMATION,this.device);return this.postMessage((0,p.UiMessage)(d.REQUEST_CONFIRMATION,{view:"no-backup"})),(await e.promise).payload}async run(){const e=[];for(let t=0;t<this.params.length;t++){const r=this.params[t];if(r.showOnTrezor){const e=await this.device.getCommands().binanceGetAddress(r.path,!1);if("string"==typeof r.address){if(r.address!==e.address)throw new Error("Addresses do not match")}else r.address=e.address}const i=await this.device.getCommands().binanceGetAddress(r.path,r.showOnTrezor);e.push({path:r.path,serializedPath:(0,l.getSerializedPath)(r.path),address:i.address}),this.hasBundle&&this.postMessage((0,p.UiMessage)(d.BUNDLE_PROGRESS,{progress:t,response:i})),this.progress++}return this.hasBundle?e:e[0]}}}],["trezor-connect","/lib/core/methods/BinanceSignTransaction.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(622,r)),c=__browser_require__(626,r),u=__browser_require__(412,r),f=__browser_require__(413,r),l=o(__browser_require__(734,r));e.default=class extends h.default{constructor(e){super(e),this.requiredPermissions=["read","write"],this.firmwareRange=(0,c.getFirmwareRange)(this.name,(0,u.getMiscNetwork)("BNB"),this.firmwareRange),this.info="Sign Binance transaction";const t=e.payload;(0,c.validateParams)(t,[{name:"path",type:"string",obligatory:!0},{name:"transaction",obligatory:!0}]);const r=(0,f.validatePath)(t.path,3),i=l.validate(t.transaction);this.params={path:r,transaction:i}}async run(){return l.signTx(this.device.getCommands().typedCall.bind(this.device.getCommands()),this.params.path,this.params.transaction)}}}],["trezor-connect","/lib/core/methods/helpers/binanceSignTx.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.signTx=e.validate=void 0;var a=o(__browser_require__(384,r)),h=__browser_require__(414,r),c=__browser_require__(626,r);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const l=async(e,t,r,i)=>{const s=r[i],n=s.type;if(i+1>=r.length){return(await e(n,"BinanceSignedTx",f({},s,{type:null}))).message}const o=await e(n,"BinanceTxRequest",f({},s,{type:null}));return i++,await l(e,o,r,i)};e.validate=(e=>{(0,c.validateParams)(e,[{name:"chain_id",type:"string",obligatory:!0},{name:"account_number",type:"number"},{name:"memo",type:"string"},{name:"sequence",type:"number"},{name:"source",type:"number"},{name:"message",type:"object"}]);const t={chain_id:e.chain_id,account_number:e.account_number||0,memo:e.memo,sequence:e.sequence||0,source:e.source||0,messages:[]},{transfer:r,placeOrder:i,cancelOrder:s}=e;if(r&&((0,c.validateParams)(r,[{name:"inputs",type:"array",obligatory:!0},{name:"outputs",type:"array",obligatory:!0}]),t.messages.push(f({},r,{type:"BinanceTransferMsg"}))),i&&((0,c.validateParams)(i,[{name:"id",type:"string"},{name:"ordertype",type:"number"},{name:"price",type:"number"},{name:"quantity",type:"number"},{name:"sender",type:"string"},{name:"side",type:"number"}]),t.messages.push(f({},i,{type:"BinanceOrderMsg"}))),s&&((0,c.validateParams)(e.cancelOrder,[{name:"refid",type:"string",obligatory:!0},{name:"sender",type:"string",obligatory:!0},{name:"symbol",type:"string",obligatory:!0}]),t.messages.push(f({},s,{type:"BinanceCancelMsg"}))),t.messages.length<1)throw(0,h.invalidParameter)("Transaction does not have any message");return t});e.signTx=(async(e,t,r)=>{const{account_number:i,chain_id:s,memo:n,sequence:o,source:a,messages:h}=r,c=h.length,u=await e("BinanceSignTx","BinanceTxRequest",{address_n:t,msg_count:c,account_number:i,chain_id:s,memo:n,sequence:o,source:a});return await l(e,u,h,0)})}],["trezor-connect","/lib/core/methods/VerifyMessage.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var a=o(__browser_require__(622,r)),h=__browser_require__(626,r),c=__browser_require__(412,r),u=__browser_require__(413,r),f=__browser_require__(414,r),l=__browser_require__(570,r);e.default=class extends a.default{constructor(e){super(e),this.requiredPermissions=["read","write"],this.info="Verify message";const t=e.payload;(0,h.validateParams)(t,[{name:"address",type:"string",obligatory:!0},{name:"signature",type:"string",obligatory:!0},{name:"message",type:"string",obligatory:!0},{name:"coin",type:"string",obligatory:!0},{name:"hex",type:"boolean"}]);const r=(0,c.getBitcoinNetwork)(t.coin);if(!r)throw f.NO_COIN_INFO;this.firmwareRange=(0,h.getFirmwareRange)(this.name,r,this.firmwareRange),this.info=(0,u.getLabel)("Verify #NETWORK message",r);const i=t.hex?(0,l.messageToHex)(t.message):Buffer.from(t.message,"utf8").toString("hex"),s=Buffer.from(t.signature,"base64").toString("hex");this.params={address:t.address,signature:s,message:i,coinInfo:r}}async run(){return await this.device.getCommands().verifyMessage(this.params.address,this.params.signature,this.params.message,this.params.coinInfo.name)}}}],["trezor-connect","/lib/core/methods/WipeDevice.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(384,r)),c=a(__browser_require__(622,r)),u=o(__browser_require__(388,r)),f=__browser_require__(621,r),l=__browser_require__(626,r);e.default=class extends c.default{constructor(e){super(e),(0,h.default)(this,"confirmed",!1),this.allowDeviceMode=[u.INITIALIZE,u.SEEDLESS],this.useDeviceState=!1,this.requiredPermissions=["management"],this.firmwareRange=(0,l.getFirmwareRange)(this.name,null,this.firmwareRange),this.info="Wipe device"}async confirmation(){if(this.confirmed)return!0;await this.getPopupPromise().promise;const e=this.createUiPromise(u.RECEIVE_CONFIRMATION,this.device);this.postMessage((0,f.UiMessage)(u.REQUEST_CONFIRMATION,{view:"device-management",customConfirmButton:{className:"wipe",label:`Wipe ${this.device.toMessageObject().label}`},label:"Are you sure you want to wipe your device?"}));const t=await e.promise;return this.confirmed=t.payload,this.confirmed}async run(){return await this.device.getCommands().wipe()}}}],["trezor-connect","/lib/core/methods/ApplyFlags.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(622,r)),c=__browser_require__(626,r),u=o(__browser_require__(388,r)),f=__browser_require__(621,r);e.default=class extends h.default{constructor(e){super(e),this.requiredPermissions=["management"],this.useEmptyPassphrase=!0;const t=e.payload;(0,c.validateParams)(t,[{name:"flags",type:"number",obligatory:!0}]),this.params={flags:t.flags}}async confirmation(){await this.getPopupPromise().promise;const e=this.createUiPromise(u.RECEIVE_CONFIRMATION,this.device);return this.postMessage((0,f.UiMessage)(u.REQUEST_CONFIRMATION,{view:"device-management",customConfirmButton:{className:"confirm",label:"Proceed"},label:"Do you really want to apply flags?"})),(await e.promise).payload}async run(){return await this.device.getCommands().applyFlags(this.params)}}}],["trezor-connect","/lib/core/methods/ApplySettings.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(622,r)),c=o(__browser_require__(388,r)),u=__browser_require__(626,r),f=__browser_require__(621,r);e.default=class extends h.default{constructor(e){super(e),this.requiredPermissions=["management"],this.useEmptyPassphrase=!0;const t=e.payload;(0,u.validateParams)(t,[{name:"language",type:"string"},{name:"label",type:"string"},{name:"use_passphrase",type:"boolean"},{name:"homescreen",type:"string"},{name:"passphrase_source",type:"number"},{name:"auto_lock_delay_ms",type:"number"},{name:"display_rotation",type:"number"}]),this.params={language:t.language,label:t.label,use_passphrase:t.use_passphrase,homescreen:t.homescreen,passhprase_source:t.passhprase_source,auto_lock_delay_ms:t.auto_lock_delay_ms,display_rotation:t.display_rotation}}async confirmation(){await this.getPopupPromise().promise;const e=this.createUiPromise(c.RECEIVE_CONFIRMATION,this.device);return this.postMessage((0,f.UiMessage)(c.REQUEST_CONFIRMATION,{view:"device-management",customConfirmButton:{className:"confirm",label:"Proceed"},label:"Do you really want to change device settings?"})),(await e.promise).payload}async run(){return await this.device.getCommands().applySettings(this.params)}}}],["trezor-connect","/lib/core/methods/BackupDevice.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(622,r)),c=o(__browser_require__(388,r)),u=__browser_require__(621,r);e.default=class extends h.default{constructor(e){super(e),this.requiredPermissions=["management"],this.useEmptyPassphrase=!0}async confirmation(){await this.getPopupPromise().promise;const e=this.createUiPromise(c.RECEIVE_CONFIRMATION,this.device);return this.postMessage((0,u.UiMessage)(c.REQUEST_CONFIRMATION,{view:"device-management",customConfirmButton:{className:"confirm",label:"Proceed"},label:"Do you want to initiate backup procedure?"})),(await e.promise).payload}async run(){return await this.device.getCommands().backupDevice()}}}],["trezor-connect","/lib/core/methods/ChangePin.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var a=o(__browser_require__(622,r)),h=__browser_require__(626,r);e.default=class extends a.default{constructor(e){super(e),this.useEmptyPassphrase=!0,this.requiredPermissions=["management"];const t=e.payload;(0,h.validateParams)(t,[{name:"remove",type:"boolean"}]),this.params={remove:t.remove}}async run(){return await this.device.getCommands().changePin(this.params)}}}],["trezor-connect","/lib/core/methods/FirmwareUpdate.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(622,r)),c=o(__browser_require__(388,r)),u=__browser_require__(626,r),f=__browser_require__(742,r),l=__browser_require__(621,r);e.default=class extends h.default{constructor(e){super(e),this.useEmptyPassphrase=!0,this.requiredPermissions=["management"],this.allowDeviceMode=[c.BOOTLOADER,c.INITIALIZE],this.requireDeviceMode=[c.BOOTLOADER],this.useDeviceState=!1,this.skipFirmwareCheck=!0;const t=e.payload;(0,u.validateParams)(t,[{name:"payload",type:"buffer",obligatory:!0}]),this.params={payload:t.payload,length:t.payload.byteLength}}async confirmation(){await this.getPopupPromise().promise;const e=this.createUiPromise(c.RECEIVE_CONFIRMATION,this.device);return this.postMessage((0,l.UiMessage)(c.REQUEST_CONFIRMATION,{view:"device-management",customConfirmButton:{className:"wipe",label:"Proceed"},label:"Do you want to update firmware? Never do this without your recovery card."})),(await e.promise).payload}async run(){const{device:e,params:t}=this;return await(0,f.uploadFirmware)(this.device.getCommands().typedCall.bind(this.device.getCommands()),this.postMessage,e,t)}}}],["trezor-connect","/lib/core/methods/helpers/uploadFirmware.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.uploadFirmware=void 0;var h=__browser_require__(621,r),c=(a(__browser_require__(422,r)),o(__browser_require__(388,r))),u=o(__browser_require__(389,r));const f=e=>{e.features.firmware_present&&e.emit(u.BUTTON,e,"ButtonRequest_FirmwareUpdate")},l=(e,t,r)=>{r((0,h.UiMessage)(c.FIRMWARE_PROGRESS,{device:e.toMessageObject(),progress:t}))};e.uploadFirmware=(async(e,t,r,i)=>{const{payload:s,length:n}=i;let o={};if(1===r.features.major_version)return f(r),await e("FirmwareErase","Success",{}),l(r,0,t),o=await e("FirmwareUpload","Success",{payload:s}),l(r,100,t),o.message;if(2===r.features.major_version){for(f(r),o=await e("FirmwareErase","FirmwareRequest",{length:n});"Success"!==o.type;){const i=o.message.offset,a=o.message.offset+o.message.length,h=s.slice(i,a);i>0&&l(r,Math.round(i/n*100),t),o=await e("FirmwareUpload","FirmwareRequest|Success",{payload:h})}return l(r,100,t),o.message}})}],["trezor-connect","/lib/core/methods/RecoveryDevice.js",function(e,t,r,i,s,n){"use strict";var o=__browser_require__(381,r),a=__browser_require__(383,r);e.__esModule=!0,e.default=void 0;var h=a(__browser_require__(622,r)),c=o(__browser_require__(388,r)),u=__browser_require__(626,r),f=__browser_require__(621,r);e.default=class extends h.default{constructor(e){super(e),this.requiredPermissions=["management"],this.useEmptyPassphrase=!0;const t=e.payload;(0,u.validateParams)(t,[{name:"word_count",type:"number"},{name:"passphrase_protection",type:"boolean"},{name:"pin_protection",type:"boolean"},{name:"language",type:"string"},{name:"label",type:"string"},{name:"enforce_wordlist",type:"boolean"},{name:"type",type:"number"},{name:"u2f_counter",type:"number"},{name:"dry_run",type:"boolean"}]),this.params={word_count:t.word_count,passphrase_protection:t.passphrase_protection,pin_protection:t.pin_protection,language:t.language,label:t.label,enforce_wordlist:t.enforce_wordlist,type:t.type,u2f_counter:t.u2f_counter,dry_run:t.dry_run},this.allowDeviceMode=[...this.allowDeviceMode,c.INITIALIZE],this.useDeviceState=!1}async confirmation(){await this.getPopupPromise().promise;const e=this.createUiPromise(c.RECEIVE_CONFIRMATION,this.device);return this.postMessage((0,f.UiMessage)(c.REQUEST_CONFIRMATION,{view:"device-management",customConfirmButton:{className:"confirm",label:"Proceed"},label:"Do you want to recover device from seed?"})),(await e.promise).payload}async run(){return await this.device.getCommands().recoveryDevice(this.params)}}}],["trezor-connect","/lib/types/blockchainEvent.js",function(e,t,r,i,s,n){"use strict";__browser_require__(381,r)(__browser_require__(390,r))}],["trezor-connect","/lib/types/account.js",function(e,t,r,i,s,n){"use strict"}],["bsigner","/lib/device/trezor.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(2,r),{enforce:a}=o,h=__browser_require__(56,r),c=__browser_require__(379,r).default,u=__browser_require__(133,r),f=__browser_require__(126,r),{vendors:l}=__browser_require__(1,r),d=__browser_require__(61,r),p=__browser_require__(169,r),b=__browser_require__(747,r);function g(e){if(!e.success){if(!e.payload||!e.payload.error)throw new Error("Unknown error without payload.");throw new Error(e.payload.error)}}r.exports=class extends d{constructor(e){super(e),this.logger=h.global,this.path=null,this.label=null,this.deviceID=null,this.status=null,this.destroyed=!1}fromOptions(e){return super.fromOptions(e),o(e),a("string"==typeof e.path,"options.path","string"),a("string"==typeof e.label,"options.label","string"),a("string"==typeof e.deviceID,"options.deviceID","string"),this.path=e.path,this.label=e.label,this.deviceID=e.deviceID,null!=e.status&&(o("string"==typeof e.status),this.status=e.status),null!=e.logger&&(o("object"==typeof e.logger),this.logger=e.logger.context("trezor-device")),this}get vendor(){return l.TREZOR}get handle(){return this.path}get key(){return this.deviceID}get opened(){return!0}destroy(){o(!this.destroyed)}async open(){o(!this.destroyed,"Device no longer available.")}async close(){o(!this.destroyed,"Device no longer available.")}async getPublicKey(e,t=!0){o(!this.destroyed,"Device no longer available."),e=p.parsePath(e),this.logger.debug("getting public key for path",e);const r=await c.getPublicKey({device:{path:this.handle},coin:b.getCoinType(this.network),path:e.toString()});g(r);const{payload:i}=r;return new u({depth:i.depth,childIndex:i.childNum,chainCode:Buffer.from(i.chainCode,"hex"),publicKey:Buffer.from(i.publicKey,"hex"),parentFingerPrint:i.fingerprint})}async getSignatures(e,t){o(!this.destroyed,"Device no longer available."),this.logger.debug("Getting signatures for transaction."),t=p.prepareSignOptions(t);const r=b.createTrezorInputs(e,t,this.network),i=await c.signTransaction({device:{path:this.handle},coin:b.getCoinType(this.network),...r});g(i);const{payload:s}=i,n=[];for(const e of s.signatures){const t="01";n.push(Buffer.from(e+t,"hex"))}return n}async signTransaction(e,t){o(!this.destroyed,"Device no longer available."),this.logger.debug("Sign transaction."),t=p.prepareSignOptions(t);const r=b.createTrezorInputs(e,t,this.network),i=await c.signTransaction({device:{path:this.handle},coin:b.getCoinType(this.network),...r});g(i);const s=f.fromRaw(Buffer.from(i.payload.serializedTx,"hex"));for(const e of t.values())s.view.addCoin(e.coin);return s}async signMessage(e,t){o(!this.destroyed,"Device no longer available."),o(null!=t&&!0===t._isBuffer||"string"==typeof t,"message must be a buffer or a string."),e=p.parsePath(e),this.logger.debug("Signing message using path:",e),"string"==typeof t&&(t=Buffer.from(t,"utf8")),null!=t&&!0===t._isBuffer&&(t=t.toString("hex"));const r=await c.signMessage({device:{path:this.handle},coin:b.getCoinType(this.network),path:e.toList(),message:t,hex:!0});return g(r),Buffer.from(r.payload.signature,"base64")}static fromOptions(e){return(new this).fromOptions(e)}}}],["bsigner","/lib/device/helpers/trezor.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(2,r),a=__browser_require__(98,r),h=__browser_require__(14,r),c=__browser_require__(17,r),u=__browser_require__(133,r),f=e,l={main:"Bitcoin",testnet:"Testnet",regtest:null,simnet:null};function d(e){const t={};t.hash=e.txid().toString("hex"),t.version=e.version,t.lock_time=e.locktime,t.inputs=[];for(const r of e.inputs){const e={};e.prev_hash=r.prevout.txid().toString("hex"),e.prev_index=r.prevout.index,e.sequence=r.sequence,e.script_sig=r.script.toRaw().toString("hex"),t.inputs.push(e)}t.bin_outputs=[];for(const r of e.outputs){const e={};e.amount=r.value,e.script_pubkey=r.script.toRaw().toString("hex"),t.bin_outputs.push(e)}return t}function p(e,t){o(e.multisig,"expected multisig in inputData.");const{multisig:r}=e;o(Array.isArray(r.pubkeys));const i=r.pubkeys,s=r.m,n=i.length;o(s<=n,"M is more than N in multisig."),o(n<=c.MAX_MULTISIG_PUBKEYS);const a=function(e,t){const r=e.pubkeys.slice();return r.sort((e,r)=>{const i=u.fromBase58(e.xpub,t),s=u.fromBase58(r.xpub,t),n=e.path.toString(),o=r.path.toString(),a=i.derivePath(n).publicKey,h=s.derivePath(o).publicKey;return Buffer.compare(a,h)}),r}(r,t),h=[];for(const e of a)h.push(m(e.signature));const f={m:s,pubkeys:[],signatures:h};for(const e of a)f.pubkeys.push({node:e.xpub,address_n:e.path.toList()});return f}function b(e,t,r,i){const s={prev_index:-1,prev_hash:null,sequence:0,script_type:null};if(s.prev_hash=e.prevout.txid(),s.prev_index=e.prevout.index,s.sequence=e.sequence,!r||!r.path||!t)throw new Error("External inputs are not supported.");const n=r.path;o(t,"must provide coin."),n&&(s.address_n=n.toList()),s.amount=String(t.value);const a=t.getType(),h=e.prevout.txid();let c,u=!1,f=!1;switch(a){case"pubkey":throw new Error("Not implemented.");case"pubkeyhash":u=!0,c="SPENDADDRESS";break;case"witnesspubkeyhash":c="SPENDWITNESS";break;case"witnessscripthash":c="SPENDWITNESS",f=!0;break;case"scripthash":if(!r.witness){u=!0,f=!0,c="SPENDMULTISIG";break}c="SPENDP2SHWITNESS",r.multisig&&(f=!0);break;default:throw new Error("Can not figure out input type.")}o(c,"Could not determine type."),s.script_type=c;let l=null;return u&&(o(i.has(h),"reference transaction required."),l=i.get(h)),f&&(s.multisig=p(r)),{trezorInput:s,refTX:l}}function g(e,t){const r={},i=e.getType();let s,n;switch(r.amount=String(e.value),i){case"pubkey":case"pubkeyhash":case"scripthash":n=e.getAddress(),o(n,"Could not get the address."),s="PAYTOADDRESS";break;case"multisig":case"nulldata":throw new Error("Not implemented.");case"witnesspubkeyhash":case"witnessscripthash":n=e.getAddress(),o(n,"Could not get the address."),s="PAYTOWITNESS";break;default:throw new Error("Could not determine the output type.")}return r.script_type=s,n&&(r.address=n.toString(t)),r}function m(e){if(""===e)return"";const t=Buffer.from(e,"hex");if(a.isSignatureEncoding(t))return t.slice(0,-1).toString("hex");const r=Buffer.alloc(t.length+1);return t.copy(r),r[r.length-1]=a.hashType.ALL,o(a.isSignatureEncoding(r)),e}f.getCoinType=function(e){const t=l[e.type];return t||l.testnet},f.getCoinNetwork=function(e){switch(e.type){case"main":return h.get("main");case"testnet":default:return h.get("testnet")}},f.createTrezorInputs=function(e,t,r){r=f.getCoinNetwork(r);const i={inputs:[],outputs:[],refTxs:[]};i.version=e.version,i.lock_time=e.locktime,i.inputs_count=e.inputs.length,i.outputs_count=e.outputs.length;const s=function(e){const t=new Map;for(const r of e.values()){if(!r.prevTX)continue;const e=r.prevTX.txid();t.set(e,r.prevTX)}return t}(t);for(const r of e.inputs){const e=r.prevout.toKey(),n=t.get(e);o(n,`Could not get metadata for input ${e.toString("hex")}`);const a=n.coin,{trezorInput:h,refTX:c}=b(r,a,n,s);if(c){const e=d(c);i.refTxs.push(e)}i.inputs.push(h)}for(const t of e.outputs){const e=g(t,r);i.outputs.push(e)}return i}}],["bsigner","/lib/manager/memory.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(2,r),a=__browser_require__(56,r),h=__browser_require__(14,r),c=__browser_require__(377,r),u=__browser_require__(749,r),{vendors:f}=__browser_require__(1,r);r.exports=class extends c{constructor(e){super(),this.opened=!1,this.options=e,this.logger=a.global,this.network=h.primary,this.cachedDevices=new Map,this.selected=null,e&&this.fromOptions(e)}fromOptions(e){o(e),null!=e.selector&&(o("function"==typeof e.selector),this.selector=e.selector),null!=e.network&&(o("object"==typeof e.network),this.network=e.network),null!=e.logger&&(o("object"==typeof e.logger),this.logger=e.logger),null!=e.device?this.addDevice(e.device):this.addDevice(e)}get vendor(){return f.MEMORY}addDevice(e){let t;t=e instanceof u?e:new u({...this.options,...e}),this.cachedDevices.set(t.handle,t),this.emit("connect",t)}async removeDevice(e){this.selected===e&&await this.deselectDevice(),e.destroy(),this.cachedDevices.delete(e.handle),this.emit("disconnect",e)}async selectDevice(e){if(o(this.opened,"Not open."),e){const t=e.handle;if(!this.cachedDevices.has(t))throw new Error("Device not found.");return await this.deselectDevice(),this.selected=e,this.emit("select",e),e}const t=await this.getDevices(),r=await this.selector(t);if(!r)throw new Error("Device was not selected.");return await this.deselectDevice(),this.selected=r,this.emit("select",this.selected),this.selected}async deselectDevice(){return!!this.selected&&(this.selected.opened&&await this.selected.close(),this.emit("deselect",this.selected),this.selected=null,!0)}async open(){o(!this.opened,"Already open."),this.opened=!0}async close(){o(this.opened,"Not open."),await this.deselectDevice();for(const e of this.cachedDevices.values())e.opened&&e.close(),e.destroy();this.cachedDevices.clear(),this.opened=!1}async getDevices(){return o(this.opened,"Not open."),Array.from(this.cachedDevices.values())}getPublicKey(e,t=!0){return o(this.selected,"Device was not selected."),this.selected.getPublicKey(e,t)}signTransaction(e,t){return o(this.selected,"Device was not selected."),this.selected.signTransaction(e,t)}getSignatures(e,t){return o(this.selected,"Device was not selected."),this.selected.getSignatures(e,t)}signMessage(e,t){return o(this.selected,"Device was not selected."),this.selected.signMessage(e,t)}}}],["bsigner","/lib/device/memory.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(2,r),a=__browser_require__(56,r),h=__browser_require__(126,r),c=__browser_require__(249,r),u=__browser_require__(750,r),f=__browser_require__(170,r),l=__browser_require__(61,r),{vendors:d}=__browser_require__(1,r),p=__browser_require__(169,r);let b=0;r.exports=class extends l{constructor(e){super(),this.logger=a.global,this.master=null,this.id=b++,this._opened=!1,e&&this.fromOptions(e)}fromOptions(e){let t;return super.fromOptions(e),null!=e.logger&&(o("object"==typeof e.logger),this.logger=e.logger.context("memory-device")),null!=e.phrase&&(o("string"==typeof e.phrase),t=c.fromPhrase(e.phrase)),null!=e.key&&(o(c.isHDPrivateKey(e.key)),t=e.key),null==t&&(t=c.generate()),this.master=t,this}get vendor(){return d.MEMORY}get handle(){return String(this.id)}get key(){return String(this.id)}get opened(){return this._opened}async destroy(){o(!this.destroyed,"Device no longer available."),o(!this.opened,"Device is open."),this.destroyed=!0}async open(){o(!this.destroyed,"Device no longer available."),o(!this.opened,"Device is already open."),this._opened=!0}async close(){o(!this.destroyed,"Device no longer available."),o(this.opened,"Device is not open."),this._opened=!1}async getPublicKey(e,t=!0){return o(!this.destroyed,"Device no longer available."),o(this.opened,"Device is not open."),this.master.derivePath(e.toString()).toPublic()}async signTransaction(e,t){o(!this.destroyed,"Device no longer available."),o(this.opened,"Device is not open.");const r=p.prepareSignOptions(t),i=h.fromTX(e),s=[];for(const e of r.values()){i.view.addCoin(e.coin);const t=this.master.derivePath(e.path.toString()),r=p.createRing(e,t.publicKey,this.network,t.privateKey);s.push(r)}const n=i.sign(s),a=e.inputs.length*s.length;return o(n===e.inputs.length,`Some inputs were not signed (${n}/${a})`),p.applyOtherSignatures(i,r,this.network)}async getSignatures(e,t){o(!this.destroyed,"Device no longer available."),o(this.opened,"Device is not open.");const r=p.prepareSignOptions(t),i=f.fromTX(e);for(const e of r.values())i.view.addCoin(e.coin);const s=[];for(const e of i.inputs){const t=e.prevout.toKey(),i=r.get(t);o(i,`Could not get metadata for input ${t.toString("hex")}`);const n=this.master.derivePath(i.path.toString()),a=p.createRing(i,n.publicKey,this.network,n.privateKey);s.push(a)}return i.getSignatures(s)}async signMessage(e,t){o(!this.destroyed,"Device no longer available."),o(this.opened,"Device is not open.");const r=this.master.derivePath(e.toString());return u.signMessage(t,r.privateKey)}static fromOptions(e){return(new this).fromOptions(e)}static generate(e){const t=c.generate();return(new this).fromOptions({...e,key:t})}}}],["bmultisig","/lib/utils/sig.js",function(e,t,r,i,s,n){"use strict";const o=__browser_require__(171,r),{enforce:a}=o,h=__browser_require__(75,r),c=__browser_require__(14,r),u=__browser_require__(133,r),f=__browser_require__(141,r),l=__browser_require__(117,r),d=e;d.PROOF_INDEX=2147483647,d.BTC_MAGIC="Bitcoin Signed Message:\n",d.hashMessage=function(e,t=d.BTC_MAGIC){a(null!=e&&!0===e._isBuffer,"message","buffer"),o(e.length<65535,"Message is too big."),a("string"==typeof t,t,"string");const r=e.length<253?1:3,i=h.write(t.length+r+e.length+1);return i.writeVarString(t),i.writeVarBytes(e),l.digest(i.render())},d.verifyHash=function(e,t,r){return a(null!=e&&!0===e._isBuffer,"hash","buffer"),a(null!=t&&!0===t._isBuffer,"signature","buffer"),a(null!=r&&!0===r._isBuffer,"publicKey","buffer"),o(32===e.length,"hash must be 32 bytes."),o(65===t.length,"signature must be 65 bytes."),o(33===r.length,"public key must be 33 bytes."),f.verify(e,t.slice(1),r)},d.verifyMessage=function(e,t,r){const i=d.hashMessage(e);return d.verifyHash(i,t,r)},d.signHash=function(e,t){const[r,i]=f.signRecoverable(e,t);return d.encodeSignature(r,i)},d.signMessage=function(e,t){const r=d.hashMessage(e);return d.signHash(r,t)},d.encodeSignature=function(e,t){const r=Buffer.allocUnsafe(65);return r[0]=t+31,e.copy(r,1),r},d.encodeJoinMessage=function(e,t,r){a("string"==typeof e,"walletName","string"),a(t&&"object"==typeof t,"options","object"),a("string"==typeof t.name,"options.name","string"),a(null!=t.authPubKey&&!0===t.authPubKey._isBuffer,"options.authPubKey","string"),a(u.isHDPublicKey(t.key),"options.key","HDPublicKey"),r=c.get(r);let i=0;i+=Buffer.byteLength(e,"utf8"),i+=Buffer.byteLength(t.name,"utf8"),i+=t.authPubKey.length,i+=t.key.getSize();const s=h.write(i);return s.writeString(e,"utf8"),s.writeString(t.name,"utf8"),s.writeBytes(t.authPubKey),s.writeBytes(t.key.toRaw(r)),s.render()},d.getJoinHash=function(e,t,r){const i=d.encodeJoinMessage(e,t,r);return d.hashMessage(i)},d.encodeProposalJSON=function(e,t,r){a("string"==typeof e,"walletName","string"),a((255&t)===t,"type","u8."),a("string"==typeof r,"json","string");let i=Buffer.byteLength(e,"utf8")+1;i+=Buffer.byteLength(r,"utf8");const s=Buffer.allocUnsafe(i);let n=0;return n=s.write(e,"utf8"),n=s.writeUInt8(t,n),n+=s.write(r,n,"utf8"),o(i===n),s},d.getProposalHash=function(e,t,r){const i=d.encodeProposalJSON(e,t,r);return d.hashMessage(i)}}],["bsigner","/lib/app.js",function(e,t,r,i,s,n){"use strict";const{MTX:o,TX:a}=__browser_require__(173,r),h=__browser_require__(2,r),{hash:c}=__browser_require__(1,r),{Path:u}=__browser_require__(172,r);async function f(e,t,r,i,s){if(r)return r;if(!i){if(!s)throw new Error("Can not get account info without account.");const e=await t.getAccount(s);if(!e)throw new Error("Problem fetching account info.");i=u.fromAccountPublicKey(e.accountKey)}return u.isPath(i)||(i=u.fromType(i)),h(3===i.depth),r=e.inputs.map(()=>i)}e.prepareSign=async function(e){const{wallet:t}=e;let{tx:r,paths:i,path:s,network:n}=e;h(r,"must pass tx"),h(t,"must pass wallet client"),h(n,"must pass network"),n.type&&(n=n.type),o.isMTX(r)||(r=o.fromJSON(r)),i=await f(r,t,i,s,e.account),h(Array.isArray(i));const c=[];for(const[e,s]of Object.entries(r.inputs)){const o=s.prevout.txid(),h=await t.getTX(o),u=a.fromRaw(h.tx,"hex"),f=r.view.getCoinFor(s);if(!f)throw new Error("could not fetch coin");const l=i[e].clone(),d=f.getAddress().toString(n),p=await t.getKey(d);if(!p)throw new Error("could not fetch key info");const{witness:b,branch:g,index:m}=p,_={coin:f,prevTX:u,path:l.push(g).push(m),witness:b};c.push(_)}return{mtx:r,inputData:c}},e.prepareSignMultisig=async function(e){const{wallet:t}=e;let{path:r,pid:i,network:s}=e;h(t,"must pass wallet client"),h(s,"must pass network"),s.type&&(s=s.type);const n=await t.getAccount(),c=n.witness,u=[n.accountKey,...n.keys],l=await t.getProposalMTX(i,{paths:!0,txs:!0}),d=o.fromJSON(l.tx),p=await f(d,t,null,r);h(Array.isArray(p));const b=[];for(const[e,t]of d.inputs.entries()){if(!l.paths[e])throw new Error("External inputs are not supported.");const{branch:i,index:s}=l.paths[e],o={m:n.m,pubkeys:[]};for(const e of u)o.pubkeys.push({xpub:e,path:[i,s],signature:""});const h={witness:c,prevout:t.prevout,coin:t.coin,prevTX:a.fromRaw(Buffer.from(l.txs[e],"hex")),path:r.clone().push(i).push(s),multisig:o};b.push(h)}return{mtx:d,inputData:b}},e.generateToken=async function(e,t,r){if(!t)throw new Error("must provide a path");const i=await e.getPublicKey(t),s=c(i.publicKey);return"hex"===r?s.toString("hex"):s},e.guessPath=async function(e,t,r){let i;h(e,"must pass hardware"),h(t,"must pass wallet");const s=await t.getAccount();if(!s)throw new Error("could not fetch account info");const n=new Set([s.accountKey,...s.keys]);for(const t of n.values()){const s=u.fromAccountPublicKey(t),o=await e.getPublicKey(s);if(n.has(o.xpubkey(r))){i=t;break}}return i?u.fromAccountPublicKey(i):i},e.getKnownPaths=async function(e,t){const r={keys:[],paths:{}};h(e,"must pass hardware"),h(t,"must pass wallet");const i=await t.getAccount();if(!i)throw new Error("could not fetch account info");const s=new Set([i.accountKey,...i.keys]);for(const t of s.values()){r.paths[t]=null;for(const i of[44,48]){const n=u.fromAccountPublicKey(t);n.purpose=u.harden(i);const o=await e.getXPUB(n);s.has(o)&&(r.keys.push(o),r.paths[o]=n.toString())}}return r}}],["bpkg","/lib/builtins/timers.js",function(e,t,r,i,s,n){"use strict";var o=e,a=global,h=Function.prototype.apply,c=Array.prototype.slice,u=a.setTimeout,f=a.clearTimeout,l=a.setInterval,d=a.clearInterval,p=a.setImmediate,b=a.clearImmediate;function g(){return!1}function m(){return this}function _(e,t,r){this._id=h.call(e,a,r),this._set=e,this._clear=t,this._args=r}function w(e){this._id=e}_.prototype.hasRef=g,_.prototype.ref=m,_.prototype.unref=m,_.prototype.refresh=function(){return this._clear.call(a,this._id),this._id=h.call(this._set,a,this._args),this},_.prototype.close=function(){return this._clear.call(a,this._id),this},w.prototype.hasRef=g,w.prototype.ref=m,w.prototype.unref=m,o.setTimeout=function(){var e=c.call(arguments,0);return new _(u,f,e)},o.clearTimeout=function(e){e instanceof _&&e.close()},o.setInterval=function(){var e=c.call(arguments,0);return new _(l,d,e)},o.clearInterval=o.clearTimeout,o.setImmediate=function(){return new w(h.call(p,a,arguments))},o.clearImmediate=function(e){e instanceof w&&b.call(a,e._id)},function(){if(!a.setImmediate){var e,t,r,i,s,n=1,o={},h=!1,c=a.document;!function(){if(a.postMessage&&!a.importScripts){var e=!0,t=a.onmessage;return a.onmessage=function(){e=!1},a.postMessage("","*"),a.onmessage=t,e}return!1}()?a.MessageChannel?((r=new MessageChannel).port1.onmessage=function(e){l(e.data)},e=function(e){r.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(t=c.documentElement,e=function(e){var r=c.createElement("script");r.onreadystatechange=function(){l(e),r.onreadystatechange=null,t.removeChild(r),r=null},t.appendChild(r)}):e=function(e){u(l,0,e)}:(i="setImmediate$"+Math.random()+"$",s=function(e){e.source===a&&"string"==typeof e.data&&0===e.data.indexOf(i)&&l(e.data.slice(i.length))},a.addEventListener?a.addEventListener("message",s,!1):a.attachEvent("onmessage",s),e=function(e){a.postMessage(i+e,"*")}),p=function(t){"function"!=typeof t&&(t=new Function(String(t)));for(var r=new Array(arguments.length-1),i=0;i<r.length;i++)r[i]=arguments[i+1];var s={callback:t,args:r};return o[n]=s,e(n),n++},b=f}function f(e){delete o[e]}function l(e){if(h)u(l,0,e);else{var t=o[e];if(t){h=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(undefined,r)}}(t)}finally{f(e),h=!1}}}}}()}],["bpkg","/lib/builtins/process.js",function(e,t,r,i,s,n){"use strict";var o,a=e,h=global,c=h.setTimeout,u=h.clearTimeout,f=Number(new Date),l=[],d=!1,p=-1;function b(){return[]}function g(){return!1}function m(){}function _(){return 0}function w(){return""}function y(){return this}function v(){d&&o&&(d=!1,o.length>0?l=o.concat(l):p=-1,l.length>0&&E())}function E(){if(!d){var e=c.call(h,v,0),t=l.length;for(d=!0;t>0;){for(o=l,l=[];++p<t;)o&&o[p].run();p=-1,t=l.length}o=null,d=!1,u.call(h,e)}}function S(e,t){this.func=e,this.array=t}S.prototype.run=function(){this.func.apply(null,this.array)},a.allowedNodeEnvironmentFlags="function"==typeof Set?new Set:undefined,a.arch="javascript",a.argv=["/usr/bin/node"],a.argv0="node",a.browser=!0,a.channel=undefined,a.config={},a.connected=undefined,a.debugPort=9229,a.env={__proto__:null},a.env.PATH="/usr/bin",a.env.HOME="/",a.execArgv=[],a.execPath="/usr/bin/node",a.exitCode=undefined,a.mainModule=null,a.noDeprecation=!1,a.pid=1,a.platform="browser",a.ppid=1,a.release={name:"browser"},a.report={},a.stdin=null,a.stdout=null,a.stderr=null,a.throwDeprecation=!1,a.title="browser",a.traceDeprecation=!1,a.version="v0.0.0",a.versions={node:"0.0.0"},a._events={__proto__:null},a._eventsCount=0,a._maxListeners=0,a.addListener=y,a.emit=g,a.eventNames=b,a.getMaxListeners=_,a.listenerCount=_,a.listeners=b,a.off=y,a.on=y,a.once=y,a.prependListener=y,a.prependOnceListener=y,a.removeAllListeners=y,a.removeListener=y,a.setMaxListeners=y,a.rawListeners=b,a.abort=function(){throw new Error("Process aborted.")},a.binding=function(e){throw new Error("process.binding is not supported.")},a.chdir=function(e){throw new Error("process.chdir is not supported.")},a.cpuUsage=function(e){return{user:0,system:0}},a.cwd=function(){return"/"},a.dlopen=function(e,t,r){throw new Error("process.dlopen is not supported.")},a.emitWarning=function(e,t){var r="Warning: "+e;console.warn?console.warn(r):console.error?console.error(r):console.log(r)},a.exit=function(e){throw null==e&&(e=a.exitCode),e>>>=0,new Error("Exit code: "+e+".")},a.getegid=_,a.geteuid=_,a.getgid=_,a.getgroups=b,a.getuid=_,a.hasUncaughtExceptionCaptureCallback=g,a.hrtime=function(e){var t,r,i,s=Number(new Date)-f;return s<0&&(f=Number(new Date),s=0),e&&(r=e[0],i=e[1],s-=1e3*r+Math.floor(i/1e6),isFinite(s)||(s=0),s<0&&(s=0)),[r=(s-(t=s%1e3))/1e3,i=1e6*t]},a.hrtime.bigint=function(){if("function"!=typeof BigInt)throw new Error("BigInt is unsupported.");var e=Number(new Date)-f;return e<0&&(f=Number(new Date),e=0),BigInt(e)*BigInt(1e6)},a.initgroups=m,a.kill=m,a.memoryUsage=function(){return{rss:0,heapTotal:0,heapUsed:0,external:0}},a.nextTick=function(e){if("function"!=typeof e)throw new TypeError("Callback must be a function");var t,r=new Array(arguments.length-1);if(arguments.length>1)for(t=1;t<arguments.length;t++)r[t-1]=arguments[t];l.push(new S(e,r)),1!==l.length||d||c.call(h,E,0)},a.report.getReport=w,a.report.setOptions=m,a.report.triggerReport=w,a.send=undefined,a.setegid=m,a.seteuid=m,a.setgid=m,a.setgroups=m,a.setuid=m,a.setUncaughtExceptionCaptureCallback=m,a.umask=_,a.uptime=function(){var e=Number(new Date)-f;return e<0&&(f=Number(new Date),e=0),e/1e3}}]],__browser_cache__=[],timers;function __browser_error__(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}function __fake_require__(e){__browser_error__(e)}function __browser_require__(e,t){if(e>>>0!==e||e>__browser_modules__.length)return __browser_error__(e);if(null!=t&&!t.children)return __browser_error__(e);for(;__browser_cache__.length<=e;)__browser_cache__.push(null);var r=__browser_cache__[e];if(r)return r.exports;var i=__browser_modules__[e],s=i[0],n=i[1],o=i[2],a=n,h=a.split("/").slice(0,-1).join("/")||"/",c=__fake_require__,u={},f={id:"/"+s+n,exports:u,parent:t,filename:a,loaded:!1,children:[],paths:["/"],require:c};t&&t.children.push(f),0===e&&(c.main=f),0===e&&(process.mainModule=f),__browser_cache__[e]=f;try{o.call(u,u,c,f,a,h,void 0)}catch(t){throw __browser_cache__[e]=null,t}return __browser_modules__[e]=null,f.loaded=!0,f.exports}__fake_require__.cache={__proto__:null},__fake_require__.extensions={__proto__:null},__fake_require__.main=null,__fake_require__.resolve=__browser_error__,__fake_require__.resolve.paths=__browser_error__,timers=__browser_require__(752,null),setTimeout=timers.setTimeout,clearTimeout=timers.clearTimeout,setInterval=timers.setInterval,clearInterval=timers.clearInterval,setImmediate=timers.setImmediate,clearImmediate=timers.clearImmediate,process=__browser_require__(753,null),Buffer=__browser_require__(426,null).Buffer;var __browser_main__=__browser_require__(0,null);"function"==typeof define&&define.amd?define("BSigner",[],function(){return __browser_main__}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=__browser_main__:global.BSigner=__browser_main__}("undefined"!=typeof window&&window.Math===Math?window:"undefined"!=typeof self&&self.Math===Math?self:Function("return this")());

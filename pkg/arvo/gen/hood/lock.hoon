::  kiln: remove userspace permissions from a desk
::
:-  %say
|=  $:  [now=@da eny=@uvJ bek=beak]
        [=desk pes=(list perm:gall)]
        [all=_| extra=_| ~]
    ==
:-  %helm-curb
^-  [^desk pers:gall]
=+  .^(=dome:clay %cx /(scot %p p.bek)//(scot %da now)/domes/(scot %tas desk))
:-  desk
?:  all
  ~
?:  extra
  =/  in-seal=pers:gall
    ?.  .^(? %cu (en-beam [p.bek desk da+now] /desk/seal))
      *pers:gall
    %-  ~(gas in *pers:gall)
    +:.^([%0 (list perm:gall)] %cx (en-beam [p.bek desk da+now] /desk/seal))
  (~(dif in in-seal) (sy pes))
(~(dif in pes.dome) (sy pes))
